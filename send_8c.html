<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: send/send.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2025-09-05-84-g3cce42</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('send_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">send.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Prepare and send an email.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;locale.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mutt_2lib_8h_source.html">mutt/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="address_2lib_8h_source.html">address/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_2lib_8h_source.html">config/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="email_2lib_8h_source.html">email/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="core_2lib_8h_source.html">core/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="alias_2lib_8h_source.html">alias/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gui_2lib_8h_source.html">gui/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt_8h_source.html">mutt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="send_8h_source.html">send.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="attach_2lib_8h_source.html">attach/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="browser_2lib_8h_source.html">browser/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="compose_2lib_8h_source.html">compose/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="editor_2lib_8h_source.html">editor/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="expando_2lib_8h_source.html">expando/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="history_2lib_8h_source.html">history/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="imap_2lib_8h_source.html">imap/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="index_2lib_8h_source.html">index/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ncrypt_2lib_8h_source.html">ncrypt/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pager_2lib_8h_source.html">pager/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="parse_2lib_8h_source.html">parse/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pattern_2lib_8h_source.html">pattern/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="postpone_2lib_8h_source.html">postpone/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="question_2lib_8h_source.html">question/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="send_2body_8h_source.html">body.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="copy_8h_source.html">copy.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="send_2expando_8h_source.html">expando.h</a>&quot;</code><br />
<code>#include &quot;globals.h&quot;</code><br />
<code>#include &quot;<a class="el" href="handler_8h_source.html">handler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="header_8h_source.html">header.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hook_8h_source.html">hook.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="maillist_8h_source.html">maillist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="multipart_8h_source.html">multipart.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__body_8h_source.html">mutt_body.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__header_8h_source.html">mutt_header.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__logging_8h_source.html">mutt_logging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="muttlib_8h_source.html">muttlib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mx_8h_source.html">mx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nntp_2mdata_8h_source.html">nntp/mdata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="protos_8h_source.html">protos.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rfc3676_8h_source.html">rfc3676.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sendlib_8h_source.html">sendlib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sendmail_8h_source.html">sendmail.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="smtp_8h_source.html">smtp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="notmuch_2lib_8h_source.html">notmuch/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="autocrypt_2lib_8h_source.html">autocrypt/lib.h</a>&quot;</code><br />
</div>
<p><a href="send_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afa5258518aabbe76c14e64e105515acf" id="r_afa5258518aabbe76c14e64e105515acf"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa5258518aabbe76c14e64e105515acf">append_signature</a> (FILE *fp, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:afa5258518aabbe76c14e64e105515acf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append a signature to an email.  <br /></td></tr>
<tr class="separator:afa5258518aabbe76c14e64e105515acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6671477ec99e59665fcbac17986d6e93" id="r_a6671477ec99e59665fcbac17986d6e93"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6671477ec99e59665fcbac17986d6e93">remove_user</a> (struct AddressList *al, bool leave_only)</td></tr>
<tr class="memdesc:a6671477ec99e59665fcbac17986d6e93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove any address which matches the current user.  <br /></td></tr>
<tr class="separator:a6671477ec99e59665fcbac17986d6e93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7513f0a7dea1ccf4de7506399771a4c2" id="r_a7513f0a7dea1ccf4de7506399771a4c2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7513f0a7dea1ccf4de7506399771a4c2">add_mailing_lists</a> (struct AddressList *out, const struct AddressList *t, const struct AddressList *c)</td></tr>
<tr class="memdesc:a7513f0a7dea1ccf4de7506399771a4c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search <a class="el" href="structAddress.html" title="An email address.">Address</a> lists for mailing lists.  <br /></td></tr>
<tr class="separator:a7513f0a7dea1ccf4de7506399771a4c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a50e112e7c0ddd1270a550e63fdd80f" id="r_a3a50e112e7c0ddd1270a550e63fdd80f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3a50e112e7c0ddd1270a550e63fdd80f">mutt_edit_address</a> (struct AddressList *al, const char *field, bool expand_aliases)</td></tr>
<tr class="memdesc:a3a50e112e7c0ddd1270a550e63fdd80f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit an email address.  <br /></td></tr>
<tr class="separator:a3a50e112e7c0ddd1270a550e63fdd80f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fb4ee964889bd118582f0938027a659" id="r_a9fb4ee964889bd118582f0938027a659"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9fb4ee964889bd118582f0938027a659">edit_envelope</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *en, <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a> flags, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a9fb4ee964889bd118582f0938027a659"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit <a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> fields.  <br /></td></tr>
<tr class="separator:a9fb4ee964889bd118582f0938027a659"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54e6b9ee8303e2e85019dd66d73f95d8" id="r_a54e6b9ee8303e2e85019dd66d73f95d8"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a54e6b9ee8303e2e85019dd66d73f95d8">nntp_get_header</a> (const char *s)</td></tr>
<tr class="memdesc:a54e6b9ee8303e2e85019dd66d73f95d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the trimmed header.  <br /></td></tr>
<tr class="separator:a54e6b9ee8303e2e85019dd66d73f95d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93b53146e2fbfb6657f83297e722fdac" id="r_a93b53146e2fbfb6657f83297e722fdac"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a93b53146e2fbfb6657f83297e722fdac">process_user_recips</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env)</td></tr>
<tr class="memdesc:a93b53146e2fbfb6657f83297e722fdac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the user headers.  <br /></td></tr>
<tr class="separator:a93b53146e2fbfb6657f83297e722fdac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bca5c9f44a7908485389d16dcf20f96" id="r_a9bca5c9f44a7908485389d16dcf20f96"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9bca5c9f44a7908485389d16dcf20f96">process_user_header</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env)</td></tr>
<tr class="memdesc:a9bca5c9f44a7908485389d16dcf20f96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the user headers.  <br /></td></tr>
<tr class="separator:a9bca5c9f44a7908485389d16dcf20f96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40683be6f58e2cdf321c3e30a494fbde" id="r_a40683be6f58e2cdf321c3e30a494fbde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a40683be6f58e2cdf321c3e30a494fbde">mutt_forward_intro</a> (struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a40683be6f58e2cdf321c3e30a494fbde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the "start of forwarded message" text.  <br /></td></tr>
<tr class="separator:a40683be6f58e2cdf321c3e30a494fbde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad951cc16f636045622b313f89278627a" id="r_ad951cc16f636045622b313f89278627a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad951cc16f636045622b313f89278627a">mutt_forward_trailer</a> (struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:ad951cc16f636045622b313f89278627a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a "end of forwarded message" text.  <br /></td></tr>
<tr class="separator:ad951cc16f636045622b313f89278627a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e533b7adb511ebbadbd637e3264fb05" id="r_a5e533b7adb511ebbadbd637e3264fb05"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e533b7adb511ebbadbd637e3264fb05">include_forward</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp_out, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a5e533b7adb511ebbadbd637e3264fb05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write out a forwarded message.  <br /></td></tr>
<tr class="separator:a5e533b7adb511ebbadbd637e3264fb05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0accb8ca6f488f8a6d77cd9fac7672b" id="r_ae0accb8ca6f488f8a6d77cd9fac7672b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0accb8ca6f488f8a6d77cd9fac7672b">inline_forward_attachments</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, struct <a class="el" href="structBody.html">Body</a> ***plast, enum <a class="el" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> *forwardq, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:ae0accb8ca6f488f8a6d77cd9fac7672b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add attachments to an email, inline.  <br /></td></tr>
<tr class="separator:ae0accb8ca6f488f8a6d77cd9fac7672b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98117235d1c6eb0c923b1114b6f3ff85" id="r_a98117235d1c6eb0c923b1114b6f3ff85"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a98117235d1c6eb0c923b1114b6f3ff85">format_attribution</a> (const struct <a class="el" href="structExpando.html">Expando</a> *exp, struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp_out, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a98117235d1c6eb0c923b1114b6f3ff85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format an attribution prefix/suffix.  <br /></td></tr>
<tr class="separator:a98117235d1c6eb0c923b1114b6f3ff85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23d9e167b5a86151993349839cc4eaf0" id="r_a23d9e167b5a86151993349839cc4eaf0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23d9e167b5a86151993349839cc4eaf0">mutt_make_attribution_intro</a> (struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp_out, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a23d9e167b5a86151993349839cc4eaf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add "on DATE, PERSON wrote" header.  <br /></td></tr>
<tr class="separator:a23d9e167b5a86151993349839cc4eaf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2a449fb243514b7945f71808d689d9b" id="r_af2a449fb243514b7945f71808d689d9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af2a449fb243514b7945f71808d689d9b">mutt_make_attribution_trailer</a> (struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp_out, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:af2a449fb243514b7945f71808d689d9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add suffix to replied email text.  <br /></td></tr>
<tr class="separator:af2a449fb243514b7945f71808d689d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83f702d9e8d2f453b99a29cc6afe57e1" id="r_a83f702d9e8d2f453b99a29cc6afe57e1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83f702d9e8d2f453b99a29cc6afe57e1">mutt_make_greeting</a> (struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp_out, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a83f702d9e8d2f453b99a29cc6afe57e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add greetings string.  <br /></td></tr>
<tr class="separator:a83f702d9e8d2f453b99a29cc6afe57e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a133621f63fdff19b66d2b833f29a7c0f" id="r_a133621f63fdff19b66d2b833f29a7c0f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a133621f63fdff19b66d2b833f29a7c0f">include_reply</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp_out, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a133621f63fdff19b66d2b833f29a7c0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate the reply text for an email.  <br /></td></tr>
<tr class="separator:a133621f63fdff19b66d2b833f29a7c0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bd501aa5eb91b97bc7c0ec116b76baa" id="r_a4bd501aa5eb91b97bc7c0ec116b76baa"><td class="memItemLeft" align="right" valign="top">static const struct AddressList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4bd501aa5eb91b97bc7c0ec116b76baa">choose_default_to</a> (const struct <a class="el" href="structAddress.html">Address</a> *from, const struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a4bd501aa5eb91b97bc7c0ec116b76baa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pick the best 'to:' value.  <br /></td></tr>
<tr class="separator:a4bd501aa5eb91b97bc7c0ec116b76baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5edea027c9fa45beef0a68fb707789d" id="r_ab5edea027c9fa45beef0a68fb707789d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5edea027c9fa45beef0a68fb707789d">default_to</a> (struct AddressList *to, struct <a class="el" href="structEnvelope.html">Envelope</a> *env, <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a> flags, int hmfupto, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:ab5edea027c9fa45beef0a68fb707789d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate default email addresses.  <br /></td></tr>
<tr class="separator:ab5edea027c9fa45beef0a68fb707789d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78de7631e05a4bde3c61e5f5d2c34921" id="r_a78de7631e05a4bde3c61e5f5d2c34921"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78de7631e05a4bde3c61e5f5d2c34921">mutt_fetch_recips</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *out, struct <a class="el" href="structEnvelope.html">Envelope</a> *in, <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a> flags, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a78de7631e05a4bde3c61e5f5d2c34921"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate recpients for a reply email.  <br /></td></tr>
<tr class="separator:a78de7631e05a4bde3c61e5f5d2c34921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af14544f55d0b62fcba84643fadec4890" id="r_af14544f55d0b62fcba84643fadec4890"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af14544f55d0b62fcba84643fadec4890">add_references</a> (struct ListHead *head, struct <a class="el" href="structEnvelope.html">Envelope</a> *env)</td></tr>
<tr class="memdesc:af14544f55d0b62fcba84643fadec4890"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the email's references to a list.  <br /></td></tr>
<tr class="separator:af14544f55d0b62fcba84643fadec4890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0f91c0d2e3bb30c0dc096c2d5d5361" id="r_a6c0f91c0d2e3bb30c0dc096c2d5d5361"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c0f91c0d2e3bb30c0dc096c2d5d5361">add_message_id</a> (struct ListHead *head, struct <a class="el" href="structEnvelope.html">Envelope</a> *env)</td></tr>
<tr class="memdesc:a6c0f91c0d2e3bb30c0dc096c2d5d5361"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the email's message ID to a list.  <br /></td></tr>
<tr class="separator:a6c0f91c0d2e3bb30c0dc096c2d5d5361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a527f182325365ed083dad7be735bab25" id="r_a527f182325365ed083dad7be735bab25"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a527f182325365ed083dad7be735bab25">mutt_fix_reply_recipients</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a527f182325365ed083dad7be735bab25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove duplicate recipients.  <br /></td></tr>
<tr class="separator:a527f182325365ed083dad7be735bab25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a441dbd4f179147fa14692a98acbd8f26" id="r_a441dbd4f179147fa14692a98acbd8f26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a441dbd4f179147fa14692a98acbd8f26">mutt_make_forward_subject</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structEmail.html">Email</a> *e, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a441dbd4f179147fa14692a98acbd8f26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a subject for a forwarded email.  <br /></td></tr>
<tr class="separator:a441dbd4f179147fa14692a98acbd8f26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057d0285aaa896223a70469deb4063c9" id="r_a057d0285aaa896223a70469deb4063c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a057d0285aaa896223a70469deb4063c9">mutt_make_misc_reply_headers</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structEnvelope.html">Envelope</a> *env_cur, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a057d0285aaa896223a70469deb4063c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set subject for a reply.  <br /></td></tr>
<tr class="separator:a057d0285aaa896223a70469deb4063c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afff65d1a3590d6cae315239f25a6c48d" id="r_afff65d1a3590d6cae315239f25a6c48d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afff65d1a3590d6cae315239f25a6c48d">mutt_add_to_reference_headers</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structEnvelope.html">Envelope</a> *env_cur, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:afff65d1a3590d6cae315239f25a6c48d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate references for a reply email.  <br /></td></tr>
<tr class="separator:afff65d1a3590d6cae315239f25a6c48d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450bd21350999dad5a44e947982f4f91" id="r_a450bd21350999dad5a44e947982f4f91"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a450bd21350999dad5a44e947982f4f91">make_reference_headers</a> (struct EmailArray *ea, struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a450bd21350999dad5a44e947982f4f91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate reference headers for an email.  <br /></td></tr>
<tr class="separator:a450bd21350999dad5a44e947982f4f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3816a6e89fb33a2c6d3d27e90fa024d0" id="r_a3816a6e89fb33a2c6d3d27e90fa024d0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3816a6e89fb33a2c6d3d27e90fa024d0">envelope_defaults</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct EmailArray *ea, <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a> flags, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a3816a6e89fb33a2c6d3d27e90fa024d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill in some defaults for a new email.  <br /></td></tr>
<tr class="separator:a3816a6e89fb33a2c6d3d27e90fa024d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f6595bb450dfd3e7f3b8b01e45396cd" id="r_a5f6595bb450dfd3e7f3b8b01e45396cd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5f6595bb450dfd3e7f3b8b01e45396cd">generate_body</a> (FILE *fp_tmp, struct <a class="el" href="structEmail.html">Email</a> *e, <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a> flags, struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct EmailArray *ea, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a5f6595bb450dfd3e7f3b8b01e45396cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new email body.  <br /></td></tr>
<tr class="separator:a5f6595bb450dfd3e7f3b8b01e45396cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa20b4cc93fe3d7cbc02675afeddcad4" id="r_afa20b4cc93fe3d7cbc02675afeddcad4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa20b4cc93fe3d7cbc02675afeddcad4">mutt_set_followup_to</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:afa20b4cc93fe3d7cbc02675afeddcad4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set followup-to field.  <br /></td></tr>
<tr class="separator:afa20b4cc93fe3d7cbc02675afeddcad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5be3d670b1d7e5cddb605652e9aa859" id="r_ac5be3d670b1d7e5cddb605652e9aa859"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac5be3d670b1d7e5cddb605652e9aa859">set_reverse_name</a> (struct AddressList *al, struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:ac5be3d670b1d7e5cddb605652e9aa859"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to set the 'from' field from the recipients.  <br /></td></tr>
<tr class="separator:ac5be3d670b1d7e5cddb605652e9aa859"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90907de4e46f3a56b2889b79a48c9011" id="r_a90907de4e46f3a56b2889b79a48c9011"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structAddress.html">Address</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a> (struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a90907de4e46f3a56b2889b79a48c9011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a default 'from' <a class="el" href="structAddress.html" title="An email address.">Address</a>.  <br /></td></tr>
<tr class="separator:a90907de4e46f3a56b2889b79a48c9011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a859ddbab5f9384328fd06bf9c18c02f2" id="r_a859ddbab5f9384328fd06bf9c18c02f2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a859ddbab5f9384328fd06bf9c18c02f2">invoke_mta</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a859ddbab5f9384328fd06bf9c18c02f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an email.  <br /></td></tr>
<tr class="separator:a859ddbab5f9384328fd06bf9c18c02f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ba9ce78a67261e872a264bc956ef857" id="r_a1ba9ce78a67261e872a264bc956ef857"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a> (struct <a class="el" href="structBody.html">Body</a> *b, bool recurse, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a1ba9ce78a67261e872a264bc956ef857"><td class="mdescLeft">&#160;</td><td class="mdescRight">RFC2047 encode the content-descriptions.  <br /></td></tr>
<tr class="separator:a1ba9ce78a67261e872a264bc956ef857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b54154700865964598299ed1cf9a6a" id="r_af1b54154700865964598299ed1cf9a6a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af1b54154700865964598299ed1cf9a6a">decode_descriptions</a> (struct <a class="el" href="structBody.html">Body</a> *b)</td></tr>
<tr class="memdesc:af1b54154700865964598299ed1cf9a6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">RFC2047 decode them in case of an error.  <br /></td></tr>
<tr class="separator:af1b54154700865964598299ed1cf9a6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e73f6a253107a7f55ee7388fbbf92f" id="r_ad5e73f6a253107a7f55ee7388fbbf92f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad5e73f6a253107a7f55ee7388fbbf92f">fix_end_of_file</a> (const char *data)</td></tr>
<tr class="memdesc:ad5e73f6a253107a7f55ee7388fbbf92f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure a file ends with a linefeed.  <br /></td></tr>
<tr class="separator:ad5e73f6a253107a7f55ee7388fbbf92f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58823b3164da72a6429664e1091d12a8" id="r_a58823b3164da72a6429664e1091d12a8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a58823b3164da72a6429664e1091d12a8">mutt_resend_message</a> (FILE *fp, struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e_cur, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a58823b3164da72a6429664e1091d12a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resend an email.  <br /></td></tr>
<tr class="separator:a58823b3164da72a6429664e1091d12a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19cc8b134c97bc3752c778d8b4977e8c" id="r_a19cc8b134c97bc3752c778d8b4977e8c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a19cc8b134c97bc3752c778d8b4977e8c">is_reply</a> (struct <a class="el" href="structEmail.html">Email</a> *reply, struct <a class="el" href="structEmail.html">Email</a> *orig)</td></tr>
<tr class="memdesc:a19cc8b134c97bc3752c778d8b4977e8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is one email a reply to another?  <br /></td></tr>
<tr class="separator:a19cc8b134c97bc3752c778d8b4977e8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad829e8c88d7630a8a6ed719378dd4570" id="r_ad829e8c88d7630a8a6ed719378dd4570"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad829e8c88d7630a8a6ed719378dd4570">search_attach_keyword</a> (char *filename, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:ad829e8c88d7630a8a6ed719378dd4570"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search an email for 'attachment' keywords.  <br /></td></tr>
<tr class="separator:ad829e8c88d7630a8a6ed719378dd4570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a255efc8a4a366c3de07d48da23d03a32" id="r_a255efc8a4a366c3de07d48da23d03a32"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a255efc8a4a366c3de07d48da23d03a32">save_fcc</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, struct <a class="el" href="structBuffer.html">Buffer</a> *fcc, struct <a class="el" href="structBody.html">Body</a> *clear_content, char *pgpkeylist, <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a> flags, char **finalpath, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a255efc8a4a366c3de07d48da23d03a32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save an <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> to a 'sent mail' folder.  <br /></td></tr>
<tr class="separator:a255efc8a4a366c3de07d48da23d03a32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08794ff2edb022ef0c0f59086da9675f" id="r_a08794ff2edb022ef0c0f59086da9675f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08794ff2edb022ef0c0f59086da9675f">postpone_message</a> (struct <a class="el" href="structEmail.html">Email</a> *e_post, struct <a class="el" href="structEmail.html">Email</a> *e_cur, const char *fcc, <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a> flags, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a08794ff2edb022ef0c0f59086da9675f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save an <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> for another day.  <br /></td></tr>
<tr class="separator:a08794ff2edb022ef0c0f59086da9675f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaad7f2e93eb41299f638d224d90f82b" id="r_adaad7f2e93eb41299f638d224d90f82b"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adaad7f2e93eb41299f638d224d90f82b">is_text_plain</a> (const struct <a class="el" href="structBody.html">Body</a> *b)</td></tr>
<tr class="memdesc:adaad7f2e93eb41299f638d224d90f82b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is a <a class="el" href="structBody.html" title="The body of an email.">Body</a> a text/plain MIME part?  <br /></td></tr>
<tr class="separator:adaad7f2e93eb41299f638d224d90f82b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad5805f2620506ae4bc2d7f6474cb849" id="r_aad5805f2620506ae4bc2d7f6474cb849"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad5805f2620506ae4bc2d7f6474cb849">abort_for_missing_attachments</a> (const struct <a class="el" href="structBody.html">Body</a> *b, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:aad5805f2620506ae4bc2d7f6474cb849"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should we abort sending because of missing attachments?  <br /></td></tr>
<tr class="separator:aad5805f2620506ae4bc2d7f6474cb849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c2899c7c3a76d2ce3b911221705a30" id="r_ad9c2899c7c3a76d2ce3b911221705a30"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad9c2899c7c3a76d2ce3b911221705a30">mutt_send_message</a> (<a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a> flags, struct <a class="el" href="structEmail.html">Email</a> *e_templ, const char *tempfile, struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct EmailArray *ea, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:ad9c2899c7c3a76d2ce3b911221705a30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an email.  <br /></td></tr>
<tr class="separator:ad9c2899c7c3a76d2ce3b911221705a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9b94334fee20d86baa8355c9b8379b4" id="r_aa9b94334fee20d86baa8355c9b8379b4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9b94334fee20d86baa8355c9b8379b4">send_simple_email</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct EmailArray *ea, const char *mailto, const char *subj, const char *body)</td></tr>
<tr class="memdesc:aa9b94334fee20d86baa8355c9b8379b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compose an email given a few basic ingredients.  <br /></td></tr>
<tr class="separator:aa9b94334fee20d86baa8355c9b8379b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb49acb8f5aeb91227ad946786970111" id="r_aeb49acb8f5aeb91227ad946786970111"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeb49acb8f5aeb91227ad946786970111">mutt_send_list_subscribe</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:aeb49acb8f5aeb91227ad946786970111"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a mailing-list subscription email.  <br /></td></tr>
<tr class="separator:aeb49acb8f5aeb91227ad946786970111"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9567485020b1fd8c30be9b06382cc7d9" id="r_a9567485020b1fd8c30be9b06382cc7d9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9567485020b1fd8c30be9b06382cc7d9">mutt_send_list_unsubscribe</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a9567485020b1fd8c30be9b06382cc7d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a mailing-list unsubscription email.  <br /></td></tr>
<tr class="separator:a9567485020b1fd8c30be9b06382cc7d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Prepare and send an email. </p>
<dl class="section author"><dt>Authors</dt><dd><ul>
<li>Richard Russon</li>
<li>Pietro Cerutti</li>
<li>Jakub Jindra</li>
<li>Thomas Sanchez</li>
<li>Ashish Panigrahi</li>
<li>Charalampos Kardaris</li>
<li>Thomas Bracht Laumann Jespersen</li>
<li>Viktor Cheburkin</li>
<li>David Purton</li>
<li>Dennis Schön</li>
<li>Whitney Cumber</li>
<li>наб</li>
<li>Alejandro Colomar</li>
<li>Tóth János</li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</dd></dl>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p class="definition">Definition in file <a class="el" href="send_8c_source.html">send.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afa5258518aabbe76c14e64e105515acf" name="afa5258518aabbe76c14e64e105515acf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa5258518aabbe76c14e64e105515acf">&#9670;&#160;</a></span>append_signature()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void append_signature </td>
          <td>(</td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Append a signature to an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>File to write to </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00106">106</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  107</span>{</div>
<div class="line"><span class="lineno">  108</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_signature = <a class="code hl_function" href="config_2helpers_8c.html#a9f184e61342916799259930333f4205f">cs_subset_path</a>(sub, <span class="stringliteral">&quot;signature&quot;</span>);</div>
<div class="line"><span class="lineno">  109</span>  <span class="keywordflow">if</span> (!c_signature)</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>  <span class="comment">// If the user hasn&#39;t set $signature, don&#39;t warn them if it doesn&#39;t exist</span></div>
<div class="line"><span class="lineno">  113</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *def_sig = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  114</span>  <a class="code hl_function" href="config_2set_8c.html#a1bc435f8e505a9274333899fa70250ce">cs_str_initial_get</a>(sub-&gt;<a class="code hl_variable" href="structConfigSubset.html#a910a9162ee6326d796e785a03dc8b47a">cs</a>, <span class="stringliteral">&quot;signature&quot;</span>, def_sig);</div>
<div class="line"><span class="lineno">  115</span>  <a class="code hl_function" href="mutt_2path_8c.html#a5f202de8d83fe9daaa212af55622d75e">mutt_path_canon</a>(def_sig, <a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#ac181d2dd4b8f4acbcfe0b1878ebbfa08">home_dir</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  116</span>  <span class="keywordtype">bool</span> notify_missing = !<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(c_signature, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(def_sig));</div>
<div class="line"><span class="lineno">  117</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;def_sig);</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>  pid_t pid = 0;</div>
<div class="line"><span class="lineno">  120</span>  FILE *fp_tmp = <a class="code hl_function" href="muttlib_8c.html#af2015a9a442c4b2bed656f9c9ea20933">mutt_open_read</a>(c_signature, &amp;pid);</div>
<div class="line"><span class="lineno">  121</span>  <span class="keywordflow">if</span> (!fp_tmp)</div>
<div class="line"><span class="lineno">  122</span>  {</div>
<div class="line"><span class="lineno">  123</span>    <span class="keywordflow">if</span> (notify_missing)</div>
<div class="line"><span class="lineno">  124</span>      <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, c_signature);</div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  126</span>  }</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_sig_dashes = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;sig_dashes&quot;</span>);</div>
<div class="line"><span class="lineno">  129</span>  <span class="keywordflow">if</span> (c_sig_dashes)</div>
<div class="line"><span class="lineno">  130</span>    fputs(<span class="stringliteral">&quot;\n-- \n&quot;</span>, fp);</div>
<div class="line"><span class="lineno">  131</span>  <a class="code hl_function" href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a>(fp_tmp, fp);</div>
<div class="line"><span class="lineno">  132</span>  <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp_tmp);</div>
<div class="line"><span class="lineno">  133</span>  <span class="keywordflow">if</span> (pid != -1)</div>
<div class="line"><span class="lineno">  134</span>    <a class="code hl_function" href="mutt_2filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a>(pid);</div>
<div class="line"><span class="lineno">  135</span>}</div>
<div class="ttc" id="abuffer_8h_html_a728ebc5a947b77c8d56db44ce553a7ab"><div class="ttname"><a href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a></div><div class="ttdeci">static const char * buf_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00096">buffer.h:96</a></div></div>
<div class="ttc" id="aconfig_2helpers_8c_html_a9f184e61342916799259930333f4205f"><div class="ttname"><a href="config_2helpers_8c.html#a9f184e61342916799259930333f4205f">cs_subset_path</a></div><div class="ttdeci">const char * cs_subset_path(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a path config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00168">helpers.c:168</a></div></div>
<div class="ttc" id="aconfig_2helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00047">helpers.c:47</a></div></div>
<div class="ttc" id="aconfig_2set_8c_html_a1bc435f8e505a9274333899fa70250ce"><div class="ttname"><a href="config_2set_8c.html#a1bc435f8e505a9274333899fa70250ce">cs_str_initial_get</a></div><div class="ttdeci">int cs_str_initial_get(const struct ConfigSet *cs, const char *name, struct Buffer *result)</div><div class="ttdoc">Get the initial, or parent, value of a config item.</div><div class="ttdef"><b>Definition</b> <a href="config_2set_8c_source.html#l00593">set.c:593</a></div></div>
<div class="ttc" id="afile_8c_html_a0a6ff09a685fb6fa1120a582a5a6ef4a"><div class="ttname"><a href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a></div><div class="ttdeci">int mutt_file_copy_stream(FILE *fp_in, FILE *fp_out)</div><div class="ttdoc">Copy the contents of one file into another.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l00225">file.c:225</a></div></div>
<div class="ttc" id="afile_8h_html_a9b519e795f098be88b93cd72c49a35ec"><div class="ttname"><a href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a></div><div class="ttdeci">#define mutt_file_fclose(FP)</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00139">file.h:139</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00094">logging2.h:94</a></div></div>
<div class="ttc" id="amutt_2filter_8c_html_a22c6912b837b1114c3276c990e73dca3"><div class="ttname"><a href="mutt_2filter_8c.html#a22c6912b837b1114c3276c990e73dca3">filter_wait</a></div><div class="ttdeci">int filter_wait(pid_t pid)</div><div class="ttdoc">Wait for the exit of a process and return its status.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2filter_8c_source.html#l00220">filter.c:220</a></div></div>
<div class="ttc" id="amutt_2path_8c_html_a5f202de8d83fe9daaa212af55622d75e"><div class="ttname"><a href="mutt_2path_8c.html#a5f202de8d83fe9daaa212af55622d75e">mutt_path_canon</a></div><div class="ttdeci">bool mutt_path_canon(struct Buffer *path, const char *homedir, bool is_dir)</div><div class="ttdoc">Create the canonical version of a path.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2path_8c_source.html#l00248">path.c:248</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a6b6a50296dd2a31863a43379ef4a343d"><div class="ttname"><a href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a></div><div class="ttdeci">bool mutt_str_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00660">string.c:660</a></div></div>
<div class="ttc" id="amuttlib_8c_html_af2015a9a442c4b2bed656f9c9ea20933"><div class="ttname"><a href="muttlib_8c.html#af2015a9a442c4b2bed656f9c9ea20933">mutt_open_read</a></div><div class="ttdeci">FILE * mutt_open_read(const char *path, pid_t *thepid)</div><div class="ttdoc">Run a command to read from.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00699">muttlib.c:699</a></div></div>
<div class="ttc" id="apool_8c_html_a41cba27c25d33cb6822789a2856093f2"><div class="ttname"><a href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a></div><div class="ttdeci">struct Buffer * buf_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00082">pool.c:82</a></div></div>
<div class="ttc" id="apool_8c_html_a4cc6068279461cb8628219586dfa35a1"><div class="ttname"><a href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a></div><div class="ttdeci">void buf_pool_release(struct Buffer **ptr)</div><div class="ttdoc">Return a Buffer to the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00096">pool.c:96</a></div></div>
<div class="ttc" id="astructBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00035">buffer.h:36</a></div></div>
<div class="ttc" id="astructConfigSubset_html_a910a9162ee6326d796e785a03dc8b47a"><div class="ttname"><a href="structConfigSubset.html#a910a9162ee6326d796e785a03dc8b47a">ConfigSubset::cs</a></div><div class="ttdeci">struct ConfigSet * cs</div><div class="ttdoc">Parent ConfigSet.</div><div class="ttdef"><b>Definition</b> <a href="subset_8h_source.html#l00050">subset.h:50</a></div></div>
<div class="ttc" id="astructNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00041">neomutt.h:42</a></div></div>
<div class="ttc" id="astructNeoMutt_html_ac181d2dd4b8f4acbcfe0b1878ebbfa08"><div class="ttname"><a href="structNeoMutt.html#ac181d2dd4b8f4acbcfe0b1878ebbfa08">NeoMutt::home_dir</a></div><div class="ttdeci">char * home_dir</div><div class="ttdoc">User&#39;s home directory.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00052">neomutt.h:52</a></div></div>
</div><!-- fragment --><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_afa5258518aabbe76c14e64e105515acf_cgraph.svg" width="352" height="598"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_afa5258518aabbe76c14e64e105515acf_icgraph.svg" width="340" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6671477ec99e59665fcbac17986d6e93" name="a6671477ec99e59665fcbac17986d6e93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6671477ec99e59665fcbac17986d6e93">&#9670;&#160;</a></span>remove_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void remove_user </td>
          <td>(</td>
          <td class="paramtype">struct AddressList *</td>          <td class="paramname"><span class="paramname"><em>al</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>leave_only</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove any address which matches the current user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">al</td><td>List of addresses </td></tr>
    <tr><td class="paramname">leave_only</td><td>If set, don't remove the user's address if it it the only one in the list </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00143">143</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  144</span>{</div>
<div class="line"><span class="lineno">  145</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *a = NULL, *tmp = NULL;</div>
<div class="line"><span class="lineno">  146</span>  <a class="code hl_define" href="queue_8h.html#a2a85f19896399eecd0ebf91cb8176166">TAILQ_FOREACH_SAFE</a>(a, al, entries, tmp)</div>
<div class="line"><span class="lineno">  147</span>  {</div>
<div class="line"><span class="lineno">  148</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="alias_8c.html#a9d6f6b4ea9d79c9c33ddd7c6b6ef764b">mutt_addr_is_user</a>(a) &amp;&amp; (!leave_only || <a class="code hl_define" href="queue_8h.html#abd57fe9bdea6007a602f8c7d61bd5265">TAILQ_NEXT</a>(a, entries)))</div>
<div class="line"><span class="lineno">  149</span>    {</div>
<div class="line"><span class="lineno">  150</span>      <a class="code hl_define" href="queue_8h.html#aaae87ca18c28066e1a96221e762d1209">TAILQ_REMOVE</a>(al, a, entries);</div>
<div class="line"><span class="lineno">  151</span>      <a class="code hl_function" href="address_2address_8c.html#a40eda06e6e64ff9d9f1e7d3b69e7c846">mutt_addr_free</a>(&amp;a);</div>
<div class="line"><span class="lineno">  152</span>    }</div>
<div class="line"><span class="lineno">  153</span>  }</div>
<div class="line"><span class="lineno">  154</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a40eda06e6e64ff9d9f1e7d3b69e7c846"><div class="ttname"><a href="address_2address_8c.html#a40eda06e6e64ff9d9f1e7d3b69e7c846">mutt_addr_free</a></div><div class="ttdeci">void mutt_addr_free(struct Address **ptr)</div><div class="ttdoc">Free a single Address.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00462">address.c:462</a></div></div>
<div class="ttc" id="aalias_8c_html_a9d6f6b4ea9d79c9c33ddd7c6b6ef764b"><div class="ttname"><a href="alias_8c.html#a9d6f6b4ea9d79c9c33ddd7c6b6ef764b">mutt_addr_is_user</a></div><div class="ttdeci">bool mutt_addr_is_user(const struct Address *addr)</div><div class="ttdoc">Does the address belong to the user.</div><div class="ttdef"><b>Definition</b> <a href="alias_8c_source.html#l00595">alias.c:595</a></div></div>
<div class="ttc" id="aqueue_8h_html_a2a85f19896399eecd0ebf91cb8176166"><div class="ttname"><a href="queue_8h.html#a2a85f19896399eecd0ebf91cb8176166">TAILQ_FOREACH_SAFE</a></div><div class="ttdeci">#define TAILQ_FOREACH_SAFE(var, head, field, tvar)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00792">queue.h:792</a></div></div>
<div class="ttc" id="aqueue_8h_html_aaae87ca18c28066e1a96221e762d1209"><div class="ttname"><a href="queue_8h.html#aaae87ca18c28066e1a96221e762d1209">TAILQ_REMOVE</a></div><div class="ttdeci">#define TAILQ_REMOVE(head, elm, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00901">queue.h:901</a></div></div>
<div class="ttc" id="aqueue_8h_html_abd57fe9bdea6007a602f8c7d61bd5265"><div class="ttname"><a href="queue_8h.html#abd57fe9bdea6007a602f8c7d61bd5265">TAILQ_NEXT</a></div><div class="ttdeci">#define TAILQ_NEXT(elm, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00889">queue.h:889</a></div></div>
<div class="ttc" id="astructAddress_html"><div class="ttname"><a href="structAddress.html">Address</a></div><div class="ttdoc">An email address.</div><div class="ttdef"><b>Definition</b> <a href="address_8h_source.html#l00034">address.h:35</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a6671477ec99e59665fcbac17986d6e93_cgraph.svg" width="298" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a6671477ec99e59665fcbac17986d6e93_icgraph.svg" width="338" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7513f0a7dea1ccf4de7506399771a4c2" name="a7513f0a7dea1ccf4de7506399771a4c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7513f0a7dea1ccf4de7506399771a4c2">&#9670;&#160;</a></span>add_mailing_lists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_mailing_lists </td>
          <td>(</td>
          <td class="paramtype">struct AddressList *</td>          <td class="paramname"><span class="paramname"><em>out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct AddressList *</td>          <td class="paramname"><span class="paramname"><em>t</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct AddressList *</td>          <td class="paramname"><span class="paramname"><em>c</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Search <a class="el" href="structAddress.html" title="An email address.">Address</a> lists for mailing lists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td><a class="el" href="structAddress.html" title="An email address.">Address</a> list where to append matching mailing lists </td></tr>
    <tr><td class="paramname">t</td><td>'To' <a class="el" href="structAddress.html" title="An email address.">Address</a> list </td></tr>
    <tr><td class="paramname">c</td><td>'Cc' <a class="el" href="structAddress.html" title="An email address.">Address</a> list </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00162">162</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  164</span>{</div>
<div class="line"><span class="lineno">  165</span>  <span class="keyword">const</span> <span class="keyword">struct </span>AddressList *<span class="keyword">const</span> als[] = { t, c };</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code hl_define" href="memory_8h.html#a13aaf9e9e194ebfd84f90bcf4e264aca">countof</a>(als); i++)</div>
<div class="line"><span class="lineno">  168</span>  {</div>
<div class="line"><span class="lineno">  169</span>    <span class="keyword">const</span> <span class="keyword">struct </span>AddressList *al = als[i];</div>
<div class="line"><span class="lineno">  170</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *a = NULL;</div>
<div class="line"><span class="lineno">  171</span>    <a class="code hl_define" href="queue_8h.html#a16e5fc168e7f3494d4b1df54447d871e">TAILQ_FOREACH</a>(a, al, entries)</div>
<div class="line"><span class="lineno">  172</span>    {</div>
<div class="line"><span class="lineno">  173</span>      <span class="keywordflow">if</span> (!a-&gt;<a class="code hl_variable" href="structAddress.html#a12bd44ccc016e50c674ec3a902ba1c28">group</a> &amp;&amp; <a class="code hl_function" href="group__addr__predicate__api.html#ga546aac24675f5681df8fe2ccd17aece8">mutt_is_mail_list</a>(a))</div>
<div class="line"><span class="lineno">  174</span>      {</div>
<div class="line"><span class="lineno">  175</span>        <a class="code hl_function" href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a>(out, <a class="code hl_function" href="address_2address_8c.html#a8f8e4be1b71a169870ac10be5426af8d">mutt_addr_copy</a>(a));</div>
<div class="line"><span class="lineno">  176</span>      }</div>
<div class="line"><span class="lineno">  177</span>    }</div>
<div class="line"><span class="lineno">  178</span>  }</div>
<div class="line"><span class="lineno">  179</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a68385b174baad74a9aecf3dec61432a0"><div class="ttname"><a href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a></div><div class="ttdeci">void mutt_addrlist_append(struct AddressList *al, struct Address *a)</div><div class="ttdoc">Append an Address to an AddressList.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01480">address.c:1480</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_a8f8e4be1b71a169870ac10be5426af8d"><div class="ttname"><a href="address_2address_8c.html#a8f8e4be1b71a169870ac10be5426af8d">mutt_addr_copy</a></div><div class="ttdeci">struct Address * mutt_addr_copy(const struct Address *addr)</div><div class="ttdoc">Copy the real address.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00745">address.c:745</a></div></div>
<div class="ttc" id="agroup__addr__predicate__api_html_ga546aac24675f5681df8fe2ccd17aece8"><div class="ttname"><a href="group__addr__predicate__api.html#ga546aac24675f5681df8fe2ccd17aece8">mutt_is_mail_list</a></div><div class="ttdeci">bool mutt_is_mail_list(const struct Address *addr)</div><div class="ttdoc">Is this the email address of a mailing list?</div><div class="ttdef"><b>Definition</b> <a href="maillist_8c_source.html#l00044">maillist.c:44</a></div></div>
<div class="ttc" id="amemory_8h_html_a13aaf9e9e194ebfd84f90bcf4e264aca"><div class="ttname"><a href="memory_8h.html#a13aaf9e9e194ebfd84f90bcf4e264aca">countof</a></div><div class="ttdeci">#define countof(x)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00044">memory.h:44</a></div></div>
<div class="ttc" id="aqueue_8h_html_a16e5fc168e7f3494d4b1df54447d871e"><div class="ttname"><a href="queue_8h.html#a16e5fc168e7f3494d4b1df54447d871e">TAILQ_FOREACH</a></div><div class="ttdeci">#define TAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00782">queue.h:782</a></div></div>
<div class="ttc" id="astructAddress_html_a12bd44ccc016e50c674ec3a902ba1c28"><div class="ttname"><a href="structAddress.html#a12bd44ccc016e50c674ec3a902ba1c28">Address::group</a></div><div class="ttdeci">bool group</div><div class="ttdoc">Group mailbox?</div><div class="ttdef"><b>Definition</b> <a href="address_8h_source.html#l00038">address.h:38</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a7513f0a7dea1ccf4de7506399771a4c2_cgraph.svg" width="339" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a7513f0a7dea1ccf4de7506399771a4c2_icgraph.svg" width="314" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3a50e112e7c0ddd1270a550e63fdd80f" name="a3a50e112e7c0ddd1270a550e63fdd80f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a50e112e7c0ddd1270a550e63fdd80f">&#9670;&#160;</a></span>mutt_edit_address()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_edit_address </td>
          <td>(</td>
          <td class="paramtype">struct AddressList *</td>          <td class="paramname"><span class="paramname"><em>al</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>field</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>expand_aliases</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Edit an email address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">al</td><td>AddressList to edit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">field</td><td>Prompt for user </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">expand_aliases</td><td>If true, expand <a class="el" href="structAddress.html" title="An email address.">Address</a> aliases </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00189">189</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  190</span>{</div>
<div class="line"><span class="lineno">  191</span>  <span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><span class="lineno">  192</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  193</span>  <a class="code hl_function" href="buffer_8c.html#ae144a736bd5f9de289bdc8f27fecf96a">buf_alloc</a>(buf, 8192);</div>
<div class="line"><span class="lineno">  194</span>  <span class="keywordtype">char</span> *err = NULL;</div>
<div class="line"><span class="lineno">  195</span>  <span class="keywordtype">int</span> idna_ok = 0;</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>  <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  198</span>  {</div>
<div class="line"><span class="lineno">  199</span>    <a class="code hl_function" href="address_2address_8c.html#a7b1224fc8c5dde7114228cfc8ffbbc23">mutt_addrlist_to_local</a>(al);</div>
<div class="line"><span class="lineno">  200</span>    <a class="code hl_function" href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a>(buf);</div>
<div class="line"><span class="lineno">  201</span>    <a class="code hl_function" href="address_2address_8c.html#a8143574988507c4f906548a2e88166d5">mutt_addrlist_write</a>(al, buf, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  202</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(buf))</div>
<div class="line"><span class="lineno">  203</span>      <a class="code hl_function" href="buffer_8c.html#a9924e74ddcb5280ab380e4627d1fba99">buf_addstr</a>(buf, <span class="stringliteral">&quot;, &quot;</span>);</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(field, buf, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234a7087d625c6e65aa739171b10a68907c5">HC_ALIAS</a>, &amp;<a class="code hl_variable" href="alias_2complete_8c.html#a88ecc4c4cbc99cdba5fed7e26b8b65e9">CompleteAliasOps</a>, NULL) != 0)</div>
<div class="line"><span class="lineno">  206</span>    {</div>
<div class="line"><span class="lineno">  207</span>      rc = -1;</div>
<div class="line"><span class="lineno">  208</span>      <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  209</span>    }</div>
<div class="line"><span class="lineno">  210</span>    <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(al);</div>
<div class="line"><span class="lineno">  211</span>    <a class="code hl_function" href="address_2address_8c.html#a8ac391285f1af69a114544e6575b597a">mutt_addrlist_parse2</a>(al, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno">  212</span>    <span class="keywordflow">if</span> (expand_aliases)</div>
<div class="line"><span class="lineno">  213</span>      <a class="code hl_function" href="alias_8c.html#a7c57d5376e9a1cf5e1f504a452996b86">mutt_expand_aliases</a>(al);</div>
<div class="line"><span class="lineno">  214</span>    idna_ok = <a class="code hl_function" href="address_2address_8c.html#abe8afdaeb5bdca19a1867823d73a1ec4">mutt_addrlist_to_intl</a>(al, &amp;err);</div>
<div class="line"><span class="lineno">  215</span>    <span class="keywordflow">if</span> (idna_ok != 0)</div>
<div class="line"><span class="lineno">  216</span>    {</div>
<div class="line"><span class="lineno">  217</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Bad IDN: &#39;%s&#39;&quot;</span>), err);</div>
<div class="line"><span class="lineno">  218</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;err);</div>
<div class="line"><span class="lineno">  219</span>    }</div>
<div class="line"><span class="lineno">  220</span>  } <span class="keywordflow">while</span> (idna_ok != 0);</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>done:</div>
<div class="line"><span class="lineno">  223</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  224</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  225</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a396bcf6adfff6663096fa6ae99c31c9a"><div class="ttname"><a href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a></div><div class="ttdeci">void mutt_addrlist_clear(struct AddressList *al)</div><div class="ttdoc">Unlink and free all Address in an AddressList.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01460">address.c:1460</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_a7b1224fc8c5dde7114228cfc8ffbbc23"><div class="ttname"><a href="address_2address_8c.html#a7b1224fc8c5dde7114228cfc8ffbbc23">mutt_addrlist_to_local</a></div><div class="ttdeci">int mutt_addrlist_to_local(struct AddressList *al)</div><div class="ttdoc">Convert an Address list from Punycode.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01378">address.c:1378</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_a8143574988507c4f906548a2e88166d5"><div class="ttname"><a href="address_2address_8c.html#a8143574988507c4f906548a2e88166d5">mutt_addrlist_write</a></div><div class="ttdeci">size_t mutt_addrlist_write(const struct AddressList *al, struct Buffer *buf, bool display)</div><div class="ttdoc">Write an Address to a buffer.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01206">address.c:1206</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_a8ac391285f1af69a114544e6575b597a"><div class="ttname"><a href="address_2address_8c.html#a8ac391285f1af69a114544e6575b597a">mutt_addrlist_parse2</a></div><div class="ttdeci">int mutt_addrlist_parse2(struct AddressList *al, const char *s)</div><div class="ttdoc">Parse a list of email addresses.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00644">address.c:644</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_abe8afdaeb5bdca19a1867823d73a1ec4"><div class="ttname"><a href="address_2address_8c.html#abe8afdaeb5bdca19a1867823d73a1ec4">mutt_addrlist_to_intl</a></div><div class="ttdeci">int mutt_addrlist_to_intl(struct AddressList *al, char **err)</div><div class="ttdoc">Convert an Address list to Punycode.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01293">address.c:1293</a></div></div>
<div class="ttc" id="aalias_2complete_8c_html_a88ecc4c4cbc99cdba5fed7e26b8b65e9"><div class="ttname"><a href="alias_2complete_8c.html#a88ecc4c4cbc99cdba5fed7e26b8b65e9">CompleteAliasOps</a></div><div class="ttdeci">const struct CompleteOps CompleteAliasOps</div><div class="ttdoc">Auto-Completion of Aliases.</div><div class="ttdef"><b>Definition</b> <a href="alias_2complete_8c_source.html#l00108">complete.c:108</a></div></div>
<div class="ttc" id="aalias_8c_html_a7c57d5376e9a1cf5e1f504a452996b86"><div class="ttname"><a href="alias_8c.html#a7c57d5376e9a1cf5e1f504a452996b86">mutt_expand_aliases</a></div><div class="ttdeci">void mutt_expand_aliases(struct AddressList *al)</div><div class="ttdoc">Expand aliases in a List of Addresses.</div><div class="ttdef"><b>Definition</b> <a href="alias_8c_source.html#l00294">alias.c:294</a></div></div>
<div class="ttc" id="abuffer_8c_html_a3b1f80652b37dc26046f9acdd85a0b05"><div class="ttname"><a href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a></div><div class="ttdeci">void buf_reset(struct Buffer *buf)</div><div class="ttdoc">Reset an existing Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00076">buffer.c:76</a></div></div>
<div class="ttc" id="abuffer_8c_html_a4245e227baa2a9beb6991917404aab0d"><div class="ttname"><a href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a></div><div class="ttdeci">bool buf_is_empty(const struct Buffer *buf)</div><div class="ttdoc">Is the Buffer empty?</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00291">buffer.c:291</a></div></div>
<div class="ttc" id="abuffer_8c_html_a9924e74ddcb5280ab380e4627d1fba99"><div class="ttname"><a href="buffer_8c.html#a9924e74ddcb5280ab380e4627d1fba99">buf_addstr</a></div><div class="ttdeci">size_t buf_addstr(struct Buffer *buf, const char *s)</div><div class="ttdoc">Add a string to a Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00226">buffer.c:226</a></div></div>
<div class="ttc" id="abuffer_8c_html_ae144a736bd5f9de289bdc8f27fecf96a"><div class="ttname"><a href="buffer_8c.html#ae144a736bd5f9de289bdc8f27fecf96a">buf_alloc</a></div><div class="ttdeci">void buf_alloc(struct Buffer *buf, size_t new_size)</div><div class="ttdoc">Make sure a buffer can store at least new_size bytes.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00337">buffer.c:337</a></div></div>
<div class="ttc" id="agroup__gui__mw_html_gabcbd2498b412e9f8e9d953cafc01989c"><div class="ttname"><a href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a></div><div class="ttdeci">int mw_get_field(const char *prompt, struct Buffer *buf, CompletionFlags complete, enum HistoryClass hclass, const struct CompleteOps *comp_api, void *cdata)</div><div class="ttdoc">Ask the user for a string -.</div><div class="ttdef"><b>Definition</b> <a href="editor_2window_8c_source.html#l00272">window.c:272</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00093">logging2.h:93</a></div></div>
<div class="ttc" id="ahistory_2lib_8h_html_acb0a49d94e5b4fe512c30e2c12621234a7087d625c6e65aa739171b10a68907c5"><div class="ttname"><a href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234a7087d625c6e65aa739171b10a68907c5">HC_ALIAS</a></div><div class="ttdeci">@ HC_ALIAS</div><div class="ttdoc">Aliases.</div><div class="ttdef"><b>Definition</b> <a href="history_2lib_8h_source.html#l00055">lib.h:55</a></div></div>
<div class="ttc" id="amemory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00062">memory.h:62</a></div></div>
<div class="ttc" id="amutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="amutt_8h_html_ab0d3fda521b45dec654ff46bac59c8c2"><div class="ttname"><a href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_COMP_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00056">mutt.h:56</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a3a50e112e7c0ddd1270a550e63fdd80f_cgraph.svg" width="482" height="719"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a3a50e112e7c0ddd1270a550e63fdd80f_icgraph.svg" width="391" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9fb4ee964889bd118582f0938027a659" name="a9fb4ee964889bd118582f0938027a659"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fb4ee964889bd118582f0938027a659">&#9670;&#160;</a></span>edit_envelope()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int edit_envelope </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>en</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit <a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> fields. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">en</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> to edit </td></tr>
    <tr><td class="paramname">flags</td><td>Flags, see <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506" title="Flags for mutt_send_message(), e.g. SEND_REPLY.">SendFlags</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00235">235</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  236</span>{</div>
<div class="line"><span class="lineno">  237</span>  <span class="keywordtype">int</span> rc = -1;</div>
<div class="line"><span class="lineno">  238</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  239</span>  <a class="code hl_function" href="buffer_8c.html#ae144a736bd5f9de289bdc8f27fecf96a">buf_alloc</a>(buf, 8192);</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a>)</div>
<div class="line"><span class="lineno">  242</span>  {</div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordflow">if</span> (en-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>)</div>
<div class="line"><span class="lineno">  244</span>      <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(buf, en-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>);</div>
<div class="line"><span class="lineno">  245</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  246</span>      <a class="code hl_function" href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a>(buf);</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<span class="stringliteral">&quot;Newsgroups: &quot;</span>, buf, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a">HC_OTHER</a>, NULL, NULL) != 0)</div>
<div class="line"><span class="lineno">  249</span>    {</div>
<div class="line"><span class="lineno">  250</span>      <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  251</span>    }</div>
<div class="line"><span class="lineno">  252</span>    <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>    <span class="keywordflow">if</span> (en-&gt;<a class="code hl_variable" href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">followup_to</a>)</div>
<div class="line"><span class="lineno">  255</span>      <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(buf, en-&gt;<a class="code hl_variable" href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">followup_to</a>);</div>
<div class="line"><span class="lineno">  256</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  257</span>      <a class="code hl_function" href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a>(buf);</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_ask_followup_to = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;ask_followup_to&quot;</span>);</div>
<div class="line"><span class="lineno">  260</span>    <span class="keywordflow">if</span> (c_ask_followup_to &amp;&amp; (<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<span class="stringliteral">&quot;Followup-To: &quot;</span>, buf, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>,</div>
<div class="line"><span class="lineno">  261</span>                                           <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a">HC_OTHER</a>, NULL, NULL) != 0))</div>
<div class="line"><span class="lineno">  262</span>    {</div>
<div class="line"><span class="lineno">  263</span>      <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  264</span>    }</div>
<div class="line"><span class="lineno">  265</span>    <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">followup_to</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>    <span class="keywordflow">if</span> (en-&gt;<a class="code hl_variable" href="structEnvelope.html#a52153c6e4fdb551233e26d4fdb48fb78">x_comment_to</a>)</div>
<div class="line"><span class="lineno">  268</span>      <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(buf, en-&gt;<a class="code hl_variable" href="structEnvelope.html#a52153c6e4fdb551233e26d4fdb48fb78">x_comment_to</a>);</div>
<div class="line"><span class="lineno">  269</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  270</span>      <a class="code hl_function" href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a>(buf);</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_x_comment_to = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;x_comment_to&quot;</span>);</div>
<div class="line"><span class="lineno">  273</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_ask_x_comment_to = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;ask_x_comment_to&quot;</span>);</div>
<div class="line"><span class="lineno">  274</span>    <span class="keywordflow">if</span> (c_x_comment_to &amp;&amp; c_ask_x_comment_to &amp;&amp;</div>
<div class="line"><span class="lineno">  275</span>        (<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<span class="stringliteral">&quot;X-Comment-To: &quot;</span>, buf, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a">HC_OTHER</a>, NULL, NULL) != 0))</div>
<div class="line"><span class="lineno">  276</span>    {</div>
<div class="line"><span class="lineno">  277</span>      <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  278</span>    }</div>
<div class="line"><span class="lineno">  279</span>    <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#a52153c6e4fdb551233e26d4fdb48fb78">x_comment_to</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno">  280</span>  }</div>
<div class="line"><span class="lineno">  281</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  282</span>  {</div>
<div class="line"><span class="lineno">  283</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_fast_reply = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;fast_reply&quot;</span>);</div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>) || !c_fast_reply || (flags &amp; <a class="code hl_define" href="send_8h.html#ae202c5175fee11b7b523c737b41fdb92">SEND_REVIEW_TO</a>))</div>
<div class="line"><span class="lineno">  285</span>    {</div>
<div class="line"><span class="lineno">  286</span>      <span class="keywordflow">if</span> ((<a class="code hl_function" href="#a3a50e112e7c0ddd1270a550e63fdd80f">mutt_edit_address</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;To: &quot;</span>), <span class="keyword">true</span>) == -1))</div>
<div class="line"><span class="lineno">  287</span>        <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  288</span>    }</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_ask_cc = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;ask_cc&quot;</span>);</div>
<div class="line"><span class="lineno">  291</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>) || !c_fast_reply)</div>
<div class="line"><span class="lineno">  292</span>    {</div>
<div class="line"><span class="lineno">  293</span>      <span class="keywordflow">if</span> (c_ask_cc &amp;&amp; (<a class="code hl_function" href="#a3a50e112e7c0ddd1270a550e63fdd80f">mutt_edit_address</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Cc: &quot;</span>), <span class="keyword">true</span>) == -1))</div>
<div class="line"><span class="lineno">  294</span>        <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  295</span>    }</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_ask_bcc = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;ask_bcc&quot;</span>);</div>
<div class="line"><span class="lineno">  298</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#aad427832f4ae422f1b16d0896c1d3af6">bcc</a>) || !c_fast_reply)</div>
<div class="line"><span class="lineno">  299</span>    {</div>
<div class="line"><span class="lineno">  300</span>      <span class="keywordflow">if</span> (c_ask_bcc &amp;&amp; (<a class="code hl_function" href="#a3a50e112e7c0ddd1270a550e63fdd80f">mutt_edit_address</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#aad427832f4ae422f1b16d0896c1d3af6">bcc</a>, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Bcc: &quot;</span>), <span class="keyword">true</span>) == -1))</div>
<div class="line"><span class="lineno">  301</span>        <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  302</span>    }</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>) &amp;&amp; <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>) &amp;&amp; <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#aad427832f4ae422f1b16d0896c1d3af6">bcc</a>))</div>
<div class="line"><span class="lineno">  305</span>    {</div>
<div class="line"><span class="lineno">  306</span>      <a class="code hl_define" href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No recipients specified&quot;</span>));</div>
<div class="line"><span class="lineno">  307</span>      <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  308</span>    }</div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_reply_with_xorig = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;reply_with_xorig&quot;</span>);</div>
<div class="line"><span class="lineno">  311</span>    <span class="keywordflow">if</span> (c_reply_with_xorig &amp;&amp; (flags &amp; (<a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a> | <a class="code hl_define" href="send_8h.html#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a> | <a class="code hl_define" href="send_8h.html#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a>)) &amp;&amp;</div>
<div class="line"><span class="lineno">  312</span>        (<a class="code hl_function" href="#a3a50e112e7c0ddd1270a550e63fdd80f">mutt_edit_address</a>(&amp;en-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, <span class="stringliteral">&quot;From: &quot;</span>, <span class="keyword">true</span>) == -1))</div>
<div class="line"><span class="lineno">  313</span>    {</div>
<div class="line"><span class="lineno">  314</span>      <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  315</span>    }</div>
<div class="line"><span class="lineno">  316</span>  }</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>  <span class="keywordflow">if</span> (en-&gt;<a class="code hl_variable" href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">subject</a>)</div>
<div class="line"><span class="lineno">  319</span>  {</div>
<div class="line"><span class="lineno">  320</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_fast_reply = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;fast_reply&quot;</span>);</div>
<div class="line"><span class="lineno">  321</span>    <span class="keywordflow">if</span> (c_fast_reply)</div>
<div class="line"><span class="lineno">  322</span>    {</div>
<div class="line"><span class="lineno">  323</span>      rc = 0;</div>
<div class="line"><span class="lineno">  324</span>      <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  325</span>    }</div>
<div class="line"><span class="lineno">  326</span>    <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(buf, en-&gt;<a class="code hl_variable" href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">subject</a>);</div>
<div class="line"><span class="lineno">  327</span>  }</div>
<div class="line"><span class="lineno">  328</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  329</span>  {</div>
<div class="line"><span class="lineno">  330</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *p = NULL;</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>    <a class="code hl_function" href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a>(buf);</div>
<div class="line"><span class="lineno">  333</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structListNode.html">ListNode</a> *uh = NULL;</div>
<div class="line"><span class="lineno">  334</span>    <a class="code hl_define" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(uh, &amp;<a class="code hl_variable" href="globals_8c.html#aa6af9b507b7033a8a1226c0c1946116d">UserHeader</a>, entries)</div>
<div class="line"><span class="lineno">  335</span>    {</div>
<div class="line"><span class="lineno">  336</span>      <span class="keywordtype">size_t</span> plen = <a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;subject:&quot;</span>);</div>
<div class="line"><span class="lineno">  337</span>      <span class="keywordflow">if</span> (plen)</div>
<div class="line"><span class="lineno">  338</span>      {</div>
<div class="line"><span class="lineno">  339</span>        p = <a class="code hl_function" href="mutt_2string_8c.html#a5bc328ca69776d155059041aaff9435a">mutt_str_skip_email_wsp</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a> + plen);</div>
<div class="line"><span class="lineno">  340</span>        <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(buf, p);</div>
<div class="line"><span class="lineno">  341</span>      }</div>
<div class="line"><span class="lineno">  342</span>    }</div>
<div class="line"><span class="lineno">  343</span>  }</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>  <span class="keywordflow">if</span> ((<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Subject: &quot;</span>), buf, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a">HC_OTHER</a>, NULL, NULL) != 0) ||</div>
<div class="line"><span class="lineno">  346</span>      (<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(buf) &amp;&amp;</div>
<div class="line"><span class="lineno">  347</span>       (<a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No subject, abort?&quot;</span>), sub, <span class="stringliteral">&quot;abort_nosubject&quot;</span>) != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>)))</div>
<div class="line"><span class="lineno">  348</span>  {</div>
<div class="line"><span class="lineno">  349</span>    <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No subject, aborting&quot;</span>));</div>
<div class="line"><span class="lineno">  350</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  351</span>  }</div>
<div class="line"><span class="lineno">  352</span>  <a class="code hl_function" href="envelope_8c.html#a91c00f700ee3ca43aa33487591b0d317">mutt_env_set_subject</a>(en, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno">  353</span>  rc = 0;</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>done:</div>
<div class="line"><span class="lineno">  356</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  357</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  358</span>}</div>
<div class="ttc" id="abuffer_8c_html_ac958acbd189e463a2c3bbc2f23aaeb1e"><div class="ttname"><a href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a></div><div class="ttdeci">size_t buf_strcpy(struct Buffer *buf, const char *s)</div><div class="ttdoc">Copy a string into a Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00395">buffer.c:395</a></div></div>
<div class="ttc" id="aenvelope_8c_html_a91c00f700ee3ca43aa33487591b0d317"><div class="ttname"><a href="envelope_8c.html#a91c00f700ee3ca43aa33487591b0d317">mutt_env_set_subject</a></div><div class="ttdeci">void mutt_env_set_subject(struct Envelope *env, const char *subj)</div><div class="ttdoc">Set both subject and real_subj to subj.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00068">envelope.c:68</a></div></div>
<div class="ttc" id="aglobals_8c_html_aa6af9b507b7033a8a1226c0c1946116d"><div class="ttname"><a href="globals_8c.html#aa6af9b507b7033a8a1226c0c1946116d">UserHeader</a></div><div class="ttdeci">struct ListHead UserHeader</div><div class="ttdoc">List of custom headers to add to outgoing emails.</div><div class="ttdef"><b>Definition</b> <a href="globals_8c_source.html#l00049">globals.c:49</a></div></div>
<div class="ttc" id="aglobals_8c_html_ae002039367e2c7cedb76674311136d1f"><div class="ttname"><a href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a></div><div class="ttdeci">bool OptNewsSend</div><div class="ttdoc">(pseudo) used to change behavior when posting</div><div class="ttdef"><b>Definition</b> <a href="globals_8c_source.html#l00065">globals.c:65</a></div></div>
<div class="ttc" id="agroup__logging__api_html_ga377d6ae04687e3cac3da87e05bc7de5d"><div class="ttname"><a href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a></div><div class="ttdeci">#define mutt_warning(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00091">logging2.h:91</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00092">logging2.h:92</a></div></div>
<div class="ttc" id="ahistory_2lib_8h_html_acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a"><div class="ttname"><a href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a">HC_OTHER</a></div><div class="ttdeci">@ HC_OTHER</div><div class="ttdoc">Miscellaneous strings.</div><div class="ttdef"><b>Definition</b> <a href="history_2lib_8h_source.html#l00059">lib.h:59</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a5bc328ca69776d155059041aaff9435a"><div class="ttname"><a href="mutt_2string_8c.html#a5bc328ca69776d155059041aaff9435a">mutt_str_skip_email_wsp</a></div><div class="ttdeci">char * mutt_str_skip_email_wsp(const char *s)</div><div class="ttdoc">Skip over whitespace as defined by RFC5322.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00608">string.c:608</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_aebd2a8a3f8a30062c31fa1474d87cc41"><div class="ttname"><a href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a></div><div class="ttdeci">size_t mutt_istr_startswith(const char *str, const char *prefix)</div><div class="ttdoc">Check whether a string starts with a prefix, ignoring case.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00244">string.c:244</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_af8c32ffc64dd55e92001a974a4be6bbf"><div class="ttname"><a href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a></div><div class="ttdeci">char * mutt_str_replace(char **p, const char *s)</div><div class="ttdoc">Replace one string with another.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00282">string.c:282</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a></div><div class="ttdeci">@ MUTT_NO</div><div class="ttdoc">User answered &#39;No&#39;, or assume &#39;No&#39;.</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00038">quad.h:38</a></div></div>
<div class="ttc" id="aquestion_2lib_8h_html_a8ba883bf53e8ab425a03d17368de84b4"><div class="ttname"><a href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a></div><div class="ttdeci">enum QuadOption query_quadoption(const char *prompt, struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Ask the user a quad-question.</div><div class="ttdef"><b>Definition</b> <a href="question_8c_source.html#l00377">question.c:377</a></div></div>
<div class="ttc" id="aqueue_8h_html_a77999ebdf5aaf7af8b8ea22bf208c432"><div class="ttname"><a href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a></div><div class="ttdeci">#define STAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00390">queue.h:390</a></div></div>
<div class="ttc" id="aqueue_8h_html_ac3c9da7ac712eacbbad5cc54d7a3477e"><div class="ttname"><a href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a></div><div class="ttdeci">#define TAILQ_EMPTY(head)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00778">queue.h:778</a></div></div>
<div class="ttc" id="asend_8c_html_a3a50e112e7c0ddd1270a550e63fdd80f"><div class="ttname"><a href="#a3a50e112e7c0ddd1270a550e63fdd80f">mutt_edit_address</a></div><div class="ttdeci">int mutt_edit_address(struct AddressList *al, const char *field, bool expand_aliases)</div><div class="ttdoc">Edit an email address.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00189">send.c:189</a></div></div>
<div class="ttc" id="asend_8h_html_a47e90c63dbdc4426d0630139c04cc8f3"><div class="ttname"><a href="send_8h.html#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a></div><div class="ttdeci">#define SEND_GROUP_REPLY</div><div class="ttdoc">Reply to all.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00043">send.h:43</a></div></div>
<div class="ttc" id="asend_8h_html_a54e225c19799cf682ef8228825dbb3d8"><div class="ttname"><a href="send_8h.html#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a></div><div class="ttdeci">#define SEND_LIST_REPLY</div><div class="ttdoc">Reply to mailing list.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00044">send.h:44</a></div></div>
<div class="ttc" id="asend_8h_html_ac23e1891bcbc52cc25b5824acfb42d3c"><div class="ttname"><a href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a></div><div class="ttdeci">#define SEND_REPLY</div><div class="ttdoc">Reply to sender.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00042">send.h:42</a></div></div>
<div class="ttc" id="asend_8h_html_ae202c5175fee11b7b523c737b41fdb92"><div class="ttname"><a href="send_8h.html#ae202c5175fee11b7b523c737b41fdb92">SEND_REVIEW_TO</a></div><div class="ttdeci">#define SEND_REVIEW_TO</div><div class="ttdoc">Allow the user to edit the To field.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00056">send.h:56</a></div></div>
<div class="ttc" id="astructEnvelope_html_a20d5ccf675db375e011a7791151fa09d"><div class="ttname"><a href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">Envelope::subject</a></div><div class="ttdeci">char *const subject</div><div class="ttdoc">Email&#39;s subject.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00070">envelope.h:70</a></div></div>
<div class="ttc" id="astructEnvelope_html_a2d927371b3b80e025d6f7522b7361fe7"><div class="ttname"><a href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">Envelope::to</a></div><div class="ttdeci">struct AddressList to</div><div class="ttdoc">Email&#39;s &#39;To&#39; list.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00060">envelope.h:60</a></div></div>
<div class="ttc" id="astructEnvelope_html_a46a9e33786aa5394ad768cbcc2357d65"><div class="ttname"><a href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">Envelope::followup_to</a></div><div class="ttdeci">char * followup_to</div><div class="ttdoc">List of &#39;followup-to&#39; fields.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00080">envelope.h:80</a></div></div>
<div class="ttc" id="astructEnvelope_html_a52153c6e4fdb551233e26d4fdb48fb78"><div class="ttname"><a href="structEnvelope.html#a52153c6e4fdb551233e26d4fdb48fb78">Envelope::x_comment_to</a></div><div class="ttdeci">char * x_comment_to</div><div class="ttdoc">List of &#39;X-comment-to&#39; fields.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00081">envelope.h:81</a></div></div>
<div class="ttc" id="astructEnvelope_html_a5f680f60f1713477a879877dcbd21a5c"><div class="ttname"><a href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">Envelope::newsgroups</a></div><div class="ttdeci">char * newsgroups</div><div class="ttdoc">List of newsgroups.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00078">envelope.h:78</a></div></div>
<div class="ttc" id="astructEnvelope_html_a6b00837b3cb4b41898b42307135be8b6"><div class="ttname"><a href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">Envelope::cc</a></div><div class="ttdeci">struct AddressList cc</div><div class="ttdoc">Email&#39;s &#39;Cc&#39; list.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00061">envelope.h:61</a></div></div>
<div class="ttc" id="astructEnvelope_html_aad427832f4ae422f1b16d0896c1d3af6"><div class="ttname"><a href="structEnvelope.html#aad427832f4ae422f1b16d0896c1d3af6">Envelope::bcc</a></div><div class="ttdeci">struct AddressList bcc</div><div class="ttdoc">Email&#39;s &#39;Bcc&#39; list.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00062">envelope.h:62</a></div></div>
<div class="ttc" id="astructEnvelope_html_af1aa00aed4b8767cf98f08e45a432ad8"><div class="ttname"><a href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">Envelope::from</a></div><div class="ttdeci">struct AddressList from</div><div class="ttdoc">Email&#39;s &#39;From&#39; list.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00059">envelope.h:59</a></div></div>
<div class="ttc" id="astructListNode_html"><div class="ttname"><a href="structListNode.html">ListNode</a></div><div class="ttdoc">A List node for strings.</div><div class="ttdef"><b>Definition</b> <a href="list_8h_source.html#l00036">list.h:37</a></div></div>
<div class="ttc" id="astructListNode_html_aafe688d670318196766392d8235d00a7"><div class="ttname"><a href="structListNode.html#aafe688d670318196766392d8235d00a7">ListNode::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">String.</div><div class="ttdef"><b>Definition</b> <a href="list_8h_source.html#l00038">list.h:38</a></div></div>
</div><!-- fragment --><div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a9fb4ee964889bd118582f0938027a659_cgraph.svg" width="648" height="795"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a9fb4ee964889bd118582f0938027a659_icgraph.svg" width="316" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a54e6b9ee8303e2e85019dd66d73f95d8" name="a54e6b9ee8303e2e85019dd66d73f95d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54e6b9ee8303e2e85019dd66d73f95d8">&#9670;&#160;</a></span>nntp_get_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * nntp_get_header </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>s</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the trimmed header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>Header line with leading whitespace </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Copy of string</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The caller should free the returned string. </dd></dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00367">367</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  368</span>{</div>
<div class="line"><span class="lineno">  369</span>  <a class="code hl_define" href="string2_8h.html#aebd4477213a7b706515efaffdec64181">SKIPWS</a>(s);</div>
<div class="line"><span class="lineno">  370</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(s);</div>
<div class="line"><span class="lineno">  371</span>}</div>
<div class="ttc" id="amutt_2string_8c_html_a3fe33d90e4814281cd57de048119c950"><div class="ttname"><a href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a></div><div class="ttdeci">char * mutt_str_dup(const char *str)</div><div class="ttdoc">Copy a string, safely.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00255">string.c:255</a></div></div>
<div class="ttc" id="astring2_8h_html_aebd4477213a7b706515efaffdec64181"><div class="ttname"><a href="string2_8h.html#aebd4477213a7b706515efaffdec64181">SKIPWS</a></div><div class="ttdeci">#define SKIPWS(ch)</div><div class="ttdef"><b>Definition</b> <a href="string2_8h_source.html#l00051">string2.h:51</a></div></div>
</div><!-- fragment --><div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a54e6b9ee8303e2e85019dd66d73f95d8_cgraph.svg" width="292" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a54e6b9ee8303e2e85019dd66d73f95d8_icgraph.svg" width="332" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a93b53146e2fbfb6657f83297e722fdac" name="a93b53146e2fbfb6657f83297e722fdac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93b53146e2fbfb6657f83297e722fdac">&#9670;&#160;</a></span>process_user_recips()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void process_user_recips </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process the user headers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> to populate </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00377">377</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  378</span>{</div>
<div class="line"><span class="lineno">  379</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structListNode.html">ListNode</a> *uh = NULL;</div>
<div class="line"><span class="lineno">  380</span>  <a class="code hl_define" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(uh, &amp;<a class="code hl_variable" href="globals_8c.html#aa6af9b507b7033a8a1226c0c1946116d">UserHeader</a>, entries)</div>
<div class="line"><span class="lineno">  381</span>  {</div>
<div class="line"><span class="lineno">  382</span>    <span class="keywordtype">size_t</span> plen;</div>
<div class="line"><span class="lineno">  383</span>    <span class="keywordflow">if</span> ((plen = <a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;to:&quot;</span>)))</div>
<div class="line"><span class="lineno">  384</span>      <a class="code hl_function" href="address_2address_8c.html#a9bb4abe92405bac67f03e36936a29b6e">mutt_addrlist_parse</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a> + plen);</div>
<div class="line"><span class="lineno">  385</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((plen = <a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;cc:&quot;</span>)))</div>
<div class="line"><span class="lineno">  386</span>      <a class="code hl_function" href="address_2address_8c.html#a9bb4abe92405bac67f03e36936a29b6e">mutt_addrlist_parse</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a> + plen);</div>
<div class="line"><span class="lineno">  387</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((plen = <a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;bcc:&quot;</span>)))</div>
<div class="line"><span class="lineno">  388</span>      <a class="code hl_function" href="address_2address_8c.html#a9bb4abe92405bac67f03e36936a29b6e">mutt_addrlist_parse</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#aad427832f4ae422f1b16d0896c1d3af6">bcc</a>, uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a> + plen);</div>
<div class="line"><span class="lineno">  389</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((plen = <a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;newsgroups:&quot;</span>)))</div>
<div class="line"><span class="lineno">  390</span>      env-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a> = <a class="code hl_function" href="#a54e6b9ee8303e2e85019dd66d73f95d8">nntp_get_header</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a> + plen);</div>
<div class="line"><span class="lineno">  391</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((plen = <a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;followup-to:&quot;</span>)))</div>
<div class="line"><span class="lineno">  392</span>      env-&gt;<a class="code hl_variable" href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">followup_to</a> = <a class="code hl_function" href="#a54e6b9ee8303e2e85019dd66d73f95d8">nntp_get_header</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a> + plen);</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((plen = <a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;x-comment-to:&quot;</span>)))</div>
<div class="line"><span class="lineno">  394</span>      env-&gt;<a class="code hl_variable" href="structEnvelope.html#a52153c6e4fdb551233e26d4fdb48fb78">x_comment_to</a> = <a class="code hl_function" href="#a54e6b9ee8303e2e85019dd66d73f95d8">nntp_get_header</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a> + plen);</div>
<div class="line"><span class="lineno">  395</span>  }</div>
<div class="line"><span class="lineno">  396</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a9bb4abe92405bac67f03e36936a29b6e"><div class="ttname"><a href="address_2address_8c.html#a9bb4abe92405bac67f03e36936a29b6e">mutt_addrlist_parse</a></div><div class="ttdeci">int mutt_addrlist_parse(struct AddressList *al, const char *s)</div><div class="ttdoc">Parse a list of email addresses.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00480">address.c:480</a></div></div>
<div class="ttc" id="asend_8c_html_a54e6b9ee8303e2e85019dd66d73f95d8"><div class="ttname"><a href="#a54e6b9ee8303e2e85019dd66d73f95d8">nntp_get_header</a></div><div class="ttdeci">static char * nntp_get_header(const char *s)</div><div class="ttdoc">Get the trimmed header.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00367">send.c:367</a></div></div>
</div><!-- fragment --><div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a93b53146e2fbfb6657f83297e722fdac_cgraph.svg" width="348" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a93b53146e2fbfb6657f83297e722fdac_icgraph.svg" width="352" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9bca5c9f44a7908485389d16dcf20f96" name="a9bca5c9f44a7908485389d16dcf20f96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bca5c9f44a7908485389d16dcf20f96">&#9670;&#160;</a></span>process_user_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void process_user_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process the user headers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> to populate </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00402">402</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  403</span>{</div>
<div class="line"><span class="lineno">  404</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structListNode.html">ListNode</a> *uh = NULL;</div>
<div class="line"><span class="lineno">  405</span>  <a class="code hl_define" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(uh, &amp;<a class="code hl_variable" href="globals_8c.html#aa6af9b507b7033a8a1226c0c1946116d">UserHeader</a>, entries)</div>
<div class="line"><span class="lineno">  406</span>  {</div>
<div class="line"><span class="lineno">  407</span>    <span class="keywordtype">size_t</span> plen;</div>
<div class="line"><span class="lineno">  408</span>    <span class="keywordflow">if</span> ((plen = <a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;from:&quot;</span>)))</div>
<div class="line"><span class="lineno">  409</span>    {</div>
<div class="line"><span class="lineno">  410</span>      <span class="comment">/* User has specified a default From: address.  Remove default address */</span></div>
<div class="line"><span class="lineno">  411</span>      <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno">  412</span>      <a class="code hl_function" href="address_2address_8c.html#a9bb4abe92405bac67f03e36936a29b6e">mutt_addrlist_parse</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a> + plen);</div>
<div class="line"><span class="lineno">  413</span>    }</div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((plen = <a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;reply-to:&quot;</span>)))</div>
<div class="line"><span class="lineno">  415</span>    {</div>
<div class="line"><span class="lineno">  416</span>      <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">reply_to</a>);</div>
<div class="line"><span class="lineno">  417</span>      <a class="code hl_function" href="address_2address_8c.html#a9bb4abe92405bac67f03e36936a29b6e">mutt_addrlist_parse</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">reply_to</a>, uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a> + plen);</div>
<div class="line"><span class="lineno">  418</span>    }</div>
<div class="line"><span class="lineno">  419</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((plen = <a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;message-id:&quot;</span>)))</div>
<div class="line"><span class="lineno">  420</span>    {</div>
<div class="line"><span class="lineno">  421</span>      <span class="keywordtype">char</span> *tmp = <a class="code hl_function" href="email_2parse_8c.html#aa7b7d3d9446a52fbc31ef18eea1b52c2">mutt_extract_message_id</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a> + plen, NULL);</div>
<div class="line"><span class="lineno">  422</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="address_2address_8c.html#a434492a707aadd897d74bdf7b493bbc2">mutt_addr_valid_msgid</a>(tmp))</div>
<div class="line"><span class="lineno">  423</span>      {</div>
<div class="line"><span class="lineno">  424</span>        <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>);</div>
<div class="line"><span class="lineno">  425</span>        env-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a> = tmp;</div>
<div class="line"><span class="lineno">  426</span>      }</div>
<div class="line"><span class="lineno">  427</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  428</span>      {</div>
<div class="line"><span class="lineno">  429</span>        <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;tmp);</div>
<div class="line"><span class="lineno">  430</span>      }</div>
<div class="line"><span class="lineno">  431</span>    }</div>
<div class="line"><span class="lineno">  432</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;to:&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  433</span>             !<a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;cc:&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  434</span>             !<a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;bcc:&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  435</span>             !<a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;newsgroups:&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  436</span>             !<a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;followup-to:&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  437</span>             !<a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;x-comment-to:&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  438</span>             !<a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;supersedes:&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  439</span>             !<a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;subject:&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  440</span>             !<a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <span class="stringliteral">&quot;return-path:&quot;</span>))</div>
<div class="line"><span class="lineno">  441</span>    {</div>
<div class="line"><span class="lineno">  442</span>      <a class="code hl_function" href="list_8c.html#a47252e2b00de607c64a5fec8dc16058d">mutt_list_insert_tail</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a005f4bd665ae1ae362add27948753fe1">userhdrs</a>, <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(uh-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>));</div>
<div class="line"><span class="lineno">  443</span>    }</div>
<div class="line"><span class="lineno">  444</span>  }</div>
<div class="line"><span class="lineno">  445</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a434492a707aadd897d74bdf7b493bbc2"><div class="ttname"><a href="address_2address_8c.html#a434492a707aadd897d74bdf7b493bbc2">mutt_addr_valid_msgid</a></div><div class="ttdeci">bool mutt_addr_valid_msgid(const char *msgid)</div><div class="ttdoc">Is this a valid Message ID?</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00792">address.c:792</a></div></div>
<div class="ttc" id="aemail_2parse_8c_html_aa7b7d3d9446a52fbc31ef18eea1b52c2"><div class="ttname"><a href="email_2parse_8c.html#aa7b7d3d9446a52fbc31ef18eea1b52c2">mutt_extract_message_id</a></div><div class="ttdeci">char * mutt_extract_message_id(const char *s, size_t *len)</div><div class="ttdoc">Find a message-id.</div><div class="ttdef"><b>Definition</b> <a href="email_2parse_8c_source.html#l00400">parse.c:400</a></div></div>
<div class="ttc" id="alist_8c_html_a47252e2b00de607c64a5fec8dc16058d"><div class="ttname"><a href="list_8c.html#a47252e2b00de607c64a5fec8dc16058d">mutt_list_insert_tail</a></div><div class="ttdeci">struct ListNode * mutt_list_insert_tail(struct ListHead *h, char *s)</div><div class="ttdoc">Append a string to the end of a List.</div><div class="ttdef"><b>Definition</b> <a href="list_8c_source.html#l00065">list.c:65</a></div></div>
<div class="ttc" id="astructEnvelope_html_a005f4bd665ae1ae362add27948753fe1"><div class="ttname"><a href="structEnvelope.html#a005f4bd665ae1ae362add27948753fe1">Envelope::userhdrs</a></div><div class="ttdeci">struct ListHead userhdrs</div><div class="ttdoc">user defined headers</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00085">envelope.h:85</a></div></div>
<div class="ttc" id="astructEnvelope_html_a4b75ab1853f95878dec079371bb0d799"><div class="ttname"><a href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">Envelope::reply_to</a></div><div class="ttdeci">struct AddressList reply_to</div><div class="ttdoc">Email&#39;s &#39;reply-to&#39;.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00064">envelope.h:64</a></div></div>
<div class="ttc" id="astructEnvelope_html_a50418c13a849bf27b22922bd5867e5e1"><div class="ttname"><a href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">Envelope::message_id</a></div><div class="ttdeci">char * message_id</div><div class="ttdoc">Message ID.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00073">envelope.h:73</a></div></div>
</div><!-- fragment --><div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a9bca5c9f44a7908485389d16dcf20f96_cgraph.svg" width="578" height="355"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a9bca5c9f44a7908485389d16dcf20f96_icgraph.svg" width="360" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a40683be6f58e2cdf321c3e30a494fbde" name="a40683be6f58e2cdf321c3e30a494fbde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40683be6f58e2cdf321c3e30a494fbde">&#9670;&#160;</a></span>mutt_forward_intro()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_forward_intro </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the "start of forwarded message" text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
    <tr><td class="paramname">fp</td><td>File to write to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00453">453</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  454</span>{</div>
<div class="line"><span class="lineno">  455</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structExpando.html">Expando</a> *c_forward_attribution_intro = <a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(sub, <span class="stringliteral">&quot;forward_attribution_intro&quot;</span>);</div>
<div class="line"><span class="lineno">  456</span>  <span class="keywordflow">if</span> (!c_forward_attribution_intro || !fp)</div>
<div class="line"><span class="lineno">  457</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  458</span> </div>
<div class="line"><span class="lineno">  459</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_attribution_locale = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;attribution_locale&quot;</span>);</div>
<div class="line"><span class="lineno">  460</span> </div>
<div class="line"><span class="lineno">  461</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  462</span>  setlocale(LC_TIME, <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_attribution_locale));</div>
<div class="line"><span class="lineno">  463</span>  <a class="code hl_function" href="dlg__index_8c.html#ae150a6b0d1c7e5ffa3ad1705072ca048">mutt_make_string</a>(buf, -1, c_forward_attribution_intro, NULL, -1, e,</div>
<div class="line"><span class="lineno">  464</span>                   <a class="code hl_define" href="render_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a>, NULL);</div>
<div class="line"><span class="lineno">  465</span>  setlocale(LC_TIME, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  466</span>  fputs(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf), fp);</div>
<div class="line"><span class="lineno">  467</span>  fputs(<span class="stringliteral">&quot;\n\n&quot;</span>, fp);</div>
<div class="line"><span class="lineno">  468</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  469</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_a6b1589ee93ff51ef31f1d9324e138078"><div class="ttname"><a href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a></div><div class="ttdeci">const char * cs_subset_string(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00291">helpers.c:291</a></div></div>
<div class="ttc" id="aconfig_2helpers_8h_html_afadba3dd7a0ec53c70d047005b2efcef"><div class="ttname"><a href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a></div><div class="ttdeci">const struct Expando * cs_subset_expando(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get an Expando config item by name.</div><div class="ttdef"><b>Definition</b> <a href="expando_2config__type_8c_source.html#l00360">config_type.c:360</a></div></div>
<div class="ttc" id="adlg__index_8c_html_ae150a6b0d1c7e5ffa3ad1705072ca048"><div class="ttname"><a href="dlg__index_8c.html#ae150a6b0d1c7e5ffa3ad1705072ca048">mutt_make_string</a></div><div class="ttdeci">int mutt_make_string(struct Buffer *buf, size_t max_cols, const struct Expando *exp, struct Mailbox *m, int inpgr, struct Email *e, MuttFormatFlags flags, const char *progress)</div><div class="ttdoc">Create formatted strings using mailbox expandos.</div><div class="ttdef"><b>Definition</b> <a href="dlg__index_8c_source.html#l00802">dlg_index.c:802</a></div></div>
<div class="ttc" id="arender_8h_html_a5167e8b2777abe5e02be90e0d2a816de"><div class="ttname"><a href="render_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_FORMAT_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00033">render.h:33</a></div></div>
<div class="ttc" id="astring2_8h_html_a7e0481bed27661ea2679f256b24e0283"><div class="ttname"><a href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a></div><div class="ttdeci">#define NONULL(x)</div><div class="ttdef"><b>Definition</b> <a href="string2_8h_source.html#l00043">string2.h:43</a></div></div>
<div class="ttc" id="astructExpando_html"><div class="ttname"><a href="structExpando.html">Expando</a></div><div class="ttdoc">Parsed Expando trees.</div><div class="ttdef"><b>Definition</b> <a href="expando_2expando_8h_source.html#l00040">expando.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a40683be6f58e2cdf321c3e30a494fbde_cgraph.svg" width="340" height="331"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-17" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a40683be6f58e2cdf321c3e30a494fbde_icgraph.svg" width="362" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad951cc16f636045622b313f89278627a" name="ad951cc16f636045622b313f89278627a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad951cc16f636045622b313f89278627a">&#9670;&#160;</a></span>mutt_forward_trailer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_forward_trailer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a "end of forwarded message" text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
    <tr><td class="paramname">fp</td><td>File to write to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00477">477</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  478</span>{</div>
<div class="line"><span class="lineno">  479</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structExpando.html">Expando</a> *c_forward_attribution_trailer = <a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(sub, <span class="stringliteral">&quot;forward_attribution_trailer&quot;</span>);</div>
<div class="line"><span class="lineno">  480</span>  <span class="keywordflow">if</span> (!c_forward_attribution_trailer || !fp)</div>
<div class="line"><span class="lineno">  481</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  482</span> </div>
<div class="line"><span class="lineno">  483</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_attribution_locale = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;attribution_locale&quot;</span>);</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  486</span>  setlocale(LC_TIME, <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_attribution_locale));</div>
<div class="line"><span class="lineno">  487</span>  <a class="code hl_function" href="dlg__index_8c.html#ae150a6b0d1c7e5ffa3ad1705072ca048">mutt_make_string</a>(buf, -1, c_forward_attribution_trailer, NULL, -1, e,</div>
<div class="line"><span class="lineno">  488</span>                   <a class="code hl_define" href="render_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a>, NULL);</div>
<div class="line"><span class="lineno">  489</span>  setlocale(LC_TIME, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  490</span>  fputc(<span class="charliteral">&#39;\n&#39;</span>, fp);</div>
<div class="line"><span class="lineno">  491</span>  fputs(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf), fp);</div>
<div class="line"><span class="lineno">  492</span>  fputc(<span class="charliteral">&#39;\n&#39;</span>, fp);</div>
<div class="line"><span class="lineno">  493</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  494</span>}</div>
</div><!-- fragment --><div id="dynsection-18" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ad951cc16f636045622b313f89278627a_cgraph.svg" width="348" height="331"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-19" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ad951cc16f636045622b313f89278627a_icgraph.svg" width="370" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5e533b7adb511ebbadbd637e3264fb05" name="a5e533b7adb511ebbadbd637e3264fb05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e533b7adb511ebbadbd637e3264fb05">&#9670;&#160;</a></span>include_forward()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int include_forward </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write out a forwarded message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">fp_out</td><td>File to write to </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00505">505</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  507</span>{</div>
<div class="line"><span class="lineno">  508</span>  <a class="code hl_typedef" href="copy_8h.html#a88a40e8f238a8478b885c90d1ce53e9c">CopyHeaderFlags</a> chflags = <a class="code hl_define" href="copy_8h.html#a05de77c5d16eb6266cfb34b7b322a807">CH_DECODE</a>;</div>
<div class="line"><span class="lineno">  509</span>  <a class="code hl_typedef" href="copy_8h.html#adc738493d51f47c7dd372f3ebd53223a">CopyMessageFlags</a> cmflags = <a class="code hl_define" href="copy_8h.html#ac778c083de78e4fb27889f345f242d13">MUTT_CM_NO_FLAGS</a>;</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMessage.html">Message</a> *msg = <a class="code hl_function" href="mx_8c.html#a9b2902ecb2bebbd553a8ec733ca59886">mx_msg_open</a>(m, e);</div>
<div class="line"><span class="lineno">  512</span>  <span class="keywordflow">if</span> (!msg)</div>
<div class="line"><span class="lineno">  513</span>  {</div>
<div class="line"><span class="lineno">  514</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  515</span>  }</div>
<div class="line"><span class="lineno">  516</span>  <a class="code hl_function" href="attach_2commands_8c.html#a521686f973cf66e6c60be12cc9659ac3">mutt_parse_mime_message</a>(e, msg-&gt;<a class="code hl_variable" href="structMessage.html#a11d53ee4319e8735c1677d8780a7b517">fp</a>);</div>
<div class="line"><span class="lineno">  517</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(m, e, <a class="code hl_define" href="hook_8h.html#ac4fada4e7df870f12ec6387389bba8c4">MUTT_MESSAGE_HOOK</a>);</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_forward_decode = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;forward_decode&quot;</span>);</div>
<div class="line"><span class="lineno">  520</span>  <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; (e-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>) &amp;&amp; c_forward_decode)</div>
<div class="line"><span class="lineno">  521</span>  {</div>
<div class="line"><span class="lineno">  522</span>    <span class="comment">/* make sure we have the user&#39;s passphrase before proceeding... */</span></div>
<div class="line"><span class="lineno">  523</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="crypt_8c.html#a4ee7f1419a7e39b0e9f1f9d550f4de43">crypt_valid_passphrase</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a>))</div>
<div class="line"><span class="lineno">  524</span>    {</div>
<div class="line"><span class="lineno">  525</span>      <a class="code hl_function" href="mx_8c.html#a2610a2afe8887bb874131a4ba092aa6a">mx_msg_close</a>(m, &amp;msg);</div>
<div class="line"><span class="lineno">  526</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  527</span>    }</div>
<div class="line"><span class="lineno">  528</span>  }</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>  <a class="code hl_function" href="#a40683be6f58e2cdf321c3e30a494fbde">mutt_forward_intro</a>(e, fp_out, sub);</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>  <span class="keywordflow">if</span> (c_forward_decode)</div>
<div class="line"><span class="lineno">  533</span>  {</div>
<div class="line"><span class="lineno">  534</span>    cmflags |= <a class="code hl_define" href="copy_8h.html#a4898a6c2c88fdba8ce7decdb6c125a96">MUTT_CM_DECODE</a> | <a class="code hl_define" href="copy_8h.html#a648ee091378fa6c0f6f129f64fc7f22b">MUTT_CM_CHARCONV</a>;</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_weed = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;weed&quot;</span>);</div>
<div class="line"><span class="lineno">  537</span>    <span class="keywordflow">if</span> (c_weed)</div>
<div class="line"><span class="lineno">  538</span>    {</div>
<div class="line"><span class="lineno">  539</span>      chflags |= <a class="code hl_define" href="copy_8h.html#a5e818fe5d60277b658d3f98ee7e0e675">CH_WEED</a> | <a class="code hl_define" href="copy_8h.html#a606b533a9896e294b1341e648f0b8ba2">CH_REORDER</a>;</div>
<div class="line"><span class="lineno">  540</span>      cmflags |= <a class="code hl_define" href="copy_8h.html#a2184765637d3fe603457f28a20eccb41">MUTT_CM_WEED</a>;</div>
<div class="line"><span class="lineno">  541</span>    }</div>
<div class="line"><span class="lineno">  542</span>  }</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_forward_quote = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;forward_quote&quot;</span>);</div>
<div class="line"><span class="lineno">  545</span>  <span class="keywordflow">if</span> (c_forward_quote)</div>
<div class="line"><span class="lineno">  546</span>    cmflags |= <a class="code hl_define" href="copy_8h.html#a23b8aa8125d370213675b3c0b1c5e6fe">MUTT_CM_PREFIX</a>;</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>  <a class="code hl_function" href="copy_8c.html#a72172841415fb14e143da3c102be0364">mutt_copy_message</a>(fp_out, e, msg, cmflags, chflags, 0);</div>
<div class="line"><span class="lineno">  549</span>  <a class="code hl_function" href="mx_8c.html#a2610a2afe8887bb874131a4ba092aa6a">mx_msg_close</a>(m, &amp;msg);</div>
<div class="line"><span class="lineno">  550</span>  <a class="code hl_function" href="#ad951cc16f636045622b313f89278627a">mutt_forward_trailer</a>(e, fp_out, sub);</div>
<div class="line"><span class="lineno">  551</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  552</span>}</div>
<div class="ttc" id="aattach_2commands_8c_html_a521686f973cf66e6c60be12cc9659ac3"><div class="ttname"><a href="attach_2commands_8c.html#a521686f973cf66e6c60be12cc9659ac3">mutt_parse_mime_message</a></div><div class="ttdeci">void mutt_parse_mime_message(struct Email *e, FILE *fp)</div><div class="ttdoc">Parse a MIME email.</div><div class="ttdef"><b>Definition</b> <a href="attach_2commands_8c_source.html#l00596">commands.c:596</a></div></div>
<div class="ttc" id="acopy_8c_html_a72172841415fb14e143da3c102be0364"><div class="ttname"><a href="copy_8c.html#a72172841415fb14e143da3c102be0364">mutt_copy_message</a></div><div class="ttdeci">int mutt_copy_message(FILE *fp_out, struct Email *e, struct Message *msg, CopyMessageFlags cmflags, CopyHeaderFlags chflags, int wraplen)</div><div class="ttdoc">Copy a message from a Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="copy_8c_source.html#l00908">copy.c:908</a></div></div>
<div class="ttc" id="acopy_8h_html_a05de77c5d16eb6266cfb34b7b322a807"><div class="ttname"><a href="copy_8h.html#a05de77c5d16eb6266cfb34b7b322a807">CH_DECODE</a></div><div class="ttdeci">#define CH_DECODE</div><div class="ttdoc">Do RFC2047 header decoding.</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00056">copy.h:56</a></div></div>
<div class="ttc" id="acopy_8h_html_a2184765637d3fe603457f28a20eccb41"><div class="ttname"><a href="copy_8h.html#a2184765637d3fe603457f28a20eccb41">MUTT_CM_WEED</a></div><div class="ttdeci">#define MUTT_CM_WEED</div><div class="ttdoc">Weed message/rfc822 attachment headers.</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00043">copy.h:43</a></div></div>
<div class="ttc" id="acopy_8h_html_a23b8aa8125d370213675b3c0b1c5e6fe"><div class="ttname"><a href="copy_8h.html#a23b8aa8125d370213675b3c0b1c5e6fe">MUTT_CM_PREFIX</a></div><div class="ttdeci">#define MUTT_CM_PREFIX</div><div class="ttdoc">Quote the header and body.</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00039">copy.h:39</a></div></div>
<div class="ttc" id="acopy_8h_html_a4898a6c2c88fdba8ce7decdb6c125a96"><div class="ttname"><a href="copy_8h.html#a4898a6c2c88fdba8ce7decdb6c125a96">MUTT_CM_DECODE</a></div><div class="ttdeci">#define MUTT_CM_DECODE</div><div class="ttdoc">Decode the message body into text/plain.</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00040">copy.h:40</a></div></div>
<div class="ttc" id="acopy_8h_html_a5e818fe5d60277b658d3f98ee7e0e675"><div class="ttname"><a href="copy_8h.html#a5e818fe5d60277b658d3f98ee7e0e675">CH_WEED</a></div><div class="ttdeci">#define CH_WEED</div><div class="ttdoc">Weed the headers?</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00055">copy.h:55</a></div></div>
<div class="ttc" id="acopy_8h_html_a606b533a9896e294b1341e648f0b8ba2"><div class="ttname"><a href="copy_8h.html#a606b533a9896e294b1341e648f0b8ba2">CH_REORDER</a></div><div class="ttdeci">#define CH_REORDER</div><div class="ttdoc">Re-order output of headers (specified by &#39;hdr_order&#39;)</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00061">copy.h:61</a></div></div>
<div class="ttc" id="acopy_8h_html_a648ee091378fa6c0f6f129f64fc7f22b"><div class="ttname"><a href="copy_8h.html#a648ee091378fa6c0f6f129f64fc7f22b">MUTT_CM_CHARCONV</a></div><div class="ttdeci">#define MUTT_CM_CHARCONV</div><div class="ttdoc">Perform character set conversions.</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00044">copy.h:44</a></div></div>
<div class="ttc" id="acopy_8h_html_a88a40e8f238a8478b885c90d1ce53e9c"><div class="ttname"><a href="copy_8h.html#a88a40e8f238a8478b885c90d1ce53e9c">CopyHeaderFlags</a></div><div class="ttdeci">uint32_t CopyHeaderFlags</div><div class="ttdoc">Flags for mutt_copy_header(), e.g. CH_UPDATE.</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00052">copy.h:52</a></div></div>
<div class="ttc" id="acopy_8h_html_ac778c083de78e4fb27889f345f242d13"><div class="ttname"><a href="copy_8h.html#ac778c083de78e4fb27889f345f242d13">MUTT_CM_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_CM_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00037">copy.h:37</a></div></div>
<div class="ttc" id="acopy_8h_html_adc738493d51f47c7dd372f3ebd53223a"><div class="ttname"><a href="copy_8h.html#adc738493d51f47c7dd372f3ebd53223a">CopyMessageFlags</a></div><div class="ttdeci">uint16_t CopyMessageFlags</div><div class="ttdoc">Flags for mutt_copy_message(), e.g. MUTT_CM_NOHEADER.</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00036">copy.h:36</a></div></div>
<div class="ttc" id="acrypt_8c_html_a4ee7f1419a7e39b0e9f1f9d550f4de43"><div class="ttname"><a href="crypt_8c.html#a4ee7f1419a7e39b0e9f1f9d550f4de43">crypt_valid_passphrase</a></div><div class="ttdeci">bool crypt_valid_passphrase(SecurityFlags flags)</div><div class="ttdoc">Check that we have a usable passphrase, ask if not.</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l00131">crypt.c:131</a></div></div>
<div class="ttc" id="ahook_8c_html_af487ca5e3f7da21c86e3ad61fdb55faa"><div class="ttname"><a href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a></div><div class="ttdeci">void mutt_message_hook(struct Mailbox *m, struct Email *e, HookFlags type)</div><div class="ttdoc">Perform a message hook.</div><div class="ttdef"><b>Definition</b> <a href="hook_8c_source.html#l00699">hook.c:699</a></div></div>
<div class="ttc" id="ahook_8h_html_ac4fada4e7df870f12ec6387389bba8c4"><div class="ttname"><a href="hook_8h.html#ac4fada4e7df870f12ec6387389bba8c4">MUTT_MESSAGE_HOOK</a></div><div class="ttdeci">#define MUTT_MESSAGE_HOOK</div><div class="ttdoc">message-hook: run before displaying a message</div><div class="ttdef"><b>Definition</b> <a href="hook_8h_source.html#l00044">hook.h:44</a></div></div>
<div class="ttc" id="amx_8c_html_a2610a2afe8887bb874131a4ba092aa6a"><div class="ttname"><a href="mx_8c.html#a2610a2afe8887bb874131a4ba092aa6a">mx_msg_close</a></div><div class="ttdeci">int mx_msg_close(struct Mailbox *m, struct Message **ptr)</div><div class="ttdoc">Close a message.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l01185">mx.c:1185</a></div></div>
<div class="ttc" id="amx_8c_html_a9b2902ecb2bebbd553a8ec733ca59886"><div class="ttname"><a href="mx_8c.html#a9b2902ecb2bebbd553a8ec733ca59886">mx_msg_open</a></div><div class="ttdeci">struct Message * mx_msg_open(struct Mailbox *m, struct Email *e)</div><div class="ttdoc">Return a stream pointer for a message.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l01139">mx.c:1139</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_aacaa4abd4c0696e260b7a0f1d466360a"><div class="ttname"><a href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a></div><div class="ttdeci">#define SEC_ENCRYPT</div><div class="ttdoc">Email is encrypted.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00084">lib.h:84</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_ad980bff69bb614893ad8e7e1c28a5023"><div class="ttname"><a href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a></div><div class="ttdeci">#define WithCrypto</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00122">lib.h:122</a></div></div>
<div class="ttc" id="asend_8c_html_a40683be6f58e2cdf321c3e30a494fbde"><div class="ttname"><a href="#a40683be6f58e2cdf321c3e30a494fbde">mutt_forward_intro</a></div><div class="ttdeci">void mutt_forward_intro(struct Email *e, FILE *fp, struct ConfigSubset *sub)</div><div class="ttdoc">Add the &quot;start of forwarded message&quot; text.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00453">send.c:453</a></div></div>
<div class="ttc" id="asend_8c_html_ad951cc16f636045622b313f89278627a"><div class="ttname"><a href="#ad951cc16f636045622b313f89278627a">mutt_forward_trailer</a></div><div class="ttdeci">void mutt_forward_trailer(struct Email *e, FILE *fp, struct ConfigSubset *sub)</div><div class="ttdoc">Add a &quot;end of forwarded message&quot; text.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00477">send.c:477</a></div></div>
<div class="ttc" id="astructEmail_html_a570a81cd747437c9ea4357947731ae10"><div class="ttname"><a href="structEmail.html#a570a81cd747437c9ea4357947731ae10">Email::security</a></div><div class="ttdeci">SecurityFlags security</div><div class="ttdoc">bit 0-10: flags, bit 11,12: application, bit 13: traditional pgp See: ncrypt/lib.h pgplib....</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00043">email.h:43</a></div></div>
<div class="ttc" id="astructMessage_html"><div class="ttname"><a href="structMessage.html">Message</a></div><div class="ttdoc">A local copy of an email.</div><div class="ttdef"><b>Definition</b> <a href="core_2message_8h_source.html#l00033">message.h:34</a></div></div>
<div class="ttc" id="astructMessage_html_a11d53ee4319e8735c1677d8780a7b517"><div class="ttname"><a href="structMessage.html#a11d53ee4319e8735c1677d8780a7b517">Message::fp</a></div><div class="ttdeci">FILE * fp</div><div class="ttdoc">pointer to the message data</div><div class="ttdef"><b>Definition</b> <a href="core_2message_8h_source.html#l00035">message.h:35</a></div></div>
</div><!-- fragment --><div id="dynsection-20" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a5e533b7adb511ebbadbd637e3264fb05_cgraph.svg" width="374" height="467"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-21" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a5e533b7adb511ebbadbd637e3264fb05_icgraph.svg" width="295" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae0accb8ca6f488f8a6d77cd9fac7672b" name="ae0accb8ca6f488f8a6d77cd9fac7672b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0accb8ca6f488f8a6d77cd9fac7672b">&#9670;&#160;</a></span>inline_forward_attachments()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int inline_forward_attachments </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> ***</td>          <td class="paramname"><span class="paramname"><em>plast</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> *</td>          <td class="paramname"><span class="paramname"><em>forwardq</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add attachments to an email, inline. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">e</td><td>Current <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">plast</td><td>Pointer to the last Attachment </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">forwardq</td><td>Result of asking the user to forward the attachments, e.g. <a class="el" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7" title="User answered &#39;Yes&#39;, or assume &#39;Yes&#39;.">MUTT_YES</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00564">564</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  567</span>{</div>
<div class="line"><span class="lineno">  568</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> **last = *plast;</div>
<div class="line"><span class="lineno">  569</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *body = NULL;</div>
<div class="line"><span class="lineno">  570</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachCtx.html">AttachCtx</a> *actx = NULL;</div>
<div class="line"><span class="lineno">  571</span>  <span class="keywordtype">int</span> rc = 0, i;</div>
<div class="line"><span class="lineno">  572</span> </div>
<div class="line"><span class="lineno">  573</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMessage.html">Message</a> *msg = <a class="code hl_function" href="mx_8c.html#a9b2902ecb2bebbd553a8ec733ca59886">mx_msg_open</a>(m, e);</div>
<div class="line"><span class="lineno">  574</span>  <span class="keywordflow">if</span> (!msg)</div>
<div class="line"><span class="lineno">  575</span>  {</div>
<div class="line"><span class="lineno">  576</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  577</span>  }</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>  <a class="code hl_function" href="attach_2commands_8c.html#a521686f973cf66e6c60be12cc9659ac3">mutt_parse_mime_message</a>(e, msg-&gt;<a class="code hl_variable" href="structMessage.html#a11d53ee4319e8735c1677d8780a7b517">fp</a>);</div>
<div class="line"><span class="lineno">  580</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(m, e, <a class="code hl_define" href="hook_8h.html#ac4fada4e7df870f12ec6387389bba8c4">MUTT_MESSAGE_HOOK</a>);</div>
<div class="line"><span class="lineno">  581</span> </div>
<div class="line"><span class="lineno">  582</span>  actx = <a class="code hl_define" href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a>(1, <span class="keyword">struct</span> <a class="code hl_struct" href="structAttachCtx.html">AttachCtx</a>);</div>
<div class="line"><span class="lineno">  583</span>  actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8753a1c1a51b26d4a628861dfd56294f">email</a> = e;</div>
<div class="line"><span class="lineno">  584</span>  actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a6bd678fc233b795a978f78f786f89f1c">fp_root</a> = msg-&gt;<a class="code hl_variable" href="structMessage.html#a11d53ee4319e8735c1677d8780a7b517">fp</a>;</div>
<div class="line"><span class="lineno">  585</span> </div>
<div class="line"><span class="lineno">  586</span>  <a class="code hl_function" href="recvattach_8c.html#a0bcb0072bf0ee2929a8fdeae86644700">mutt_generate_recvattach_list</a>(actx, actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8753a1c1a51b26d4a628861dfd56294f">email</a>, actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8753a1c1a51b26d4a628861dfd56294f">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>,</div>
<div class="line"><span class="lineno">  587</span>                                actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a6bd678fc233b795a978f78f786f89f1c">fp_root</a>, -1, 0, 0);</div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span>  <span class="keywordflow">for</span> (i = 0; i &lt; actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a>; i++)</div>
<div class="line"><span class="lineno">  590</span>  {</div>
<div class="line"><span class="lineno">  591</span>    body = actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>;</div>
<div class="line"><span class="lineno">  592</span>    <span class="keywordflow">if</span> ((body-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> != <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>) &amp;&amp; <a class="code hl_function" href="handler_8c.html#a0f1d59623c3dea670f7f5b4c17bf24a8">mutt_prefer_as_attachment</a>(body) &amp;&amp;</div>
<div class="line"><span class="lineno">  593</span>        !((body-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e">TYPE_APPLICATION</a>) &amp;&amp;</div>
<div class="line"><span class="lineno">  594</span>          (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(body-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;pgp-signature&quot;</span>) ||</div>
<div class="line"><span class="lineno">  595</span>           <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(body-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;x-pkcs7-signature&quot;</span>) ||</div>
<div class="line"><span class="lineno">  596</span>           <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(body-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;pkcs7-signature&quot;</span>))))</div>
<div class="line"><span class="lineno">  597</span>    {</div>
<div class="line"><span class="lineno">  598</span>      <span class="comment">/* Ask the quadoption only once */</span></div>
<div class="line"><span class="lineno">  599</span>      <span class="keywordflow">if</span> (*forwardq == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>)</div>
<div class="line"><span class="lineno">  600</span>      {</div>
<div class="line"><span class="lineno">  601</span>        <span class="comment">/* L10N: This is the prompt for $forward_attachments.</span></div>
<div class="line"><span class="lineno">  602</span><span class="comment">           When inline forwarding ($mime_forward answered &quot;no&quot;), this prompts</span></div>
<div class="line"><span class="lineno">  603</span><span class="comment">           whether to add non-decodable attachments from the original email.</span></div>
<div class="line"><span class="lineno">  604</span><span class="comment">           Text/plain parts and the like will already be included in the</span></div>
<div class="line"><span class="lineno">  605</span><span class="comment">           message contents, but other attachment, such as PDF files, will also</span></div>
<div class="line"><span class="lineno">  606</span><span class="comment">           be added as attachments to the new mail, if this is answered yes.  */</span></div>
<div class="line"><span class="lineno">  607</span>        *forwardq = <a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Forward attachments?&quot;</span>), sub, <span class="stringliteral">&quot;forward_attachments&quot;</span>);</div>
<div class="line"><span class="lineno">  608</span>        <span class="keywordflow">if</span> (*forwardq != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div>
<div class="line"><span class="lineno">  609</span>        {</div>
<div class="line"><span class="lineno">  610</span>          <span class="keywordflow">if</span> (*forwardq == -1)</div>
<div class="line"><span class="lineno">  611</span>            rc = -1;</div>
<div class="line"><span class="lineno">  612</span>          <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno">  613</span>        }</div>
<div class="line"><span class="lineno">  614</span>      }</div>
<div class="line"><span class="lineno">  615</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt__body_8c.html#ab139c8809243a6622ae10f716f984ed7">mutt_body_copy</a>(actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a776ea6f490cedf7dc47accba055d964c">fp</a>, last, body) == -1)</div>
<div class="line"><span class="lineno">  616</span>      {</div>
<div class="line"><span class="lineno">  617</span>        rc = -1;</div>
<div class="line"><span class="lineno">  618</span>        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno">  619</span>      }</div>
<div class="line"><span class="lineno">  620</span>      last = &amp;((*last)-&gt;next);</div>
<div class="line"><span class="lineno">  621</span>    }</div>
<div class="line"><span class="lineno">  622</span>  }</div>
<div class="line"><span class="lineno">  623</span> </div>
<div class="line"><span class="lineno">  624</span>cleanup:</div>
<div class="line"><span class="lineno">  625</span>  *plast = last;</div>
<div class="line"><span class="lineno">  626</span>  <a class="code hl_function" href="mx_8c.html#a2610a2afe8887bb874131a4ba092aa6a">mx_msg_close</a>(m, &amp;msg);</div>
<div class="line"><span class="lineno">  627</span>  <a class="code hl_function" href="attach_2attach_8c.html#ac215772ab5cc4d60e0a64fd5c84513e1">mutt_actx_free</a>(&amp;actx);</div>
<div class="line"><span class="lineno">  628</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  629</span>}</div>
<div class="ttc" id="aattach_2attach_8c_html_ac215772ab5cc4d60e0a64fd5c84513e1"><div class="ttname"><a href="attach_2attach_8c.html#ac215772ab5cc4d60e0a64fd5c84513e1">mutt_actx_free</a></div><div class="ttdeci">void mutt_actx_free(struct AttachCtx **ptr)</div><div class="ttdoc">Free an Attachment Context.</div><div class="ttdef"><b>Definition</b> <a href="attach_2attach_8c_source.html#l00198">attach.c:198</a></div></div>
<div class="ttc" id="ahandler_8c_html_a0f1d59623c3dea670f7f5b4c17bf24a8"><div class="ttname"><a href="handler_8c.html#a0f1d59623c3dea670f7f5b4c17bf24a8">mutt_prefer_as_attachment</a></div><div class="ttdeci">bool mutt_prefer_as_attachment(struct Body *b)</div><div class="ttdoc">Do we want this part as an attachment?</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l01850">handler.c:1850</a></div></div>
<div class="ttc" id="amemory_8h_html_a9aaf8f21a29735767a069ff1aee9d7d9"><div class="ttname"><a href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a></div><div class="ttdeci">#define MUTT_MEM_CALLOC(n, type)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00047">memory.h:47</a></div></div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a></div><div class="ttdeci">@ TYPE_MULTIPART</div><div class="ttdoc">Type: &#39;multipart/*&#39;.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00037">mime.h:37</a></div></div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e">TYPE_APPLICATION</a></div><div class="ttdeci">@ TYPE_APPLICATION</div><div class="ttdoc">Type: &#39;application/*&#39;.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00033">mime.h:33</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a29db81d6f5a7dd216cbea75ecf8a5885"><div class="ttname"><a href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a></div><div class="ttdeci">bool mutt_istr_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings, ignoring case.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00672">string.c:672</a></div></div>
<div class="ttc" id="amutt__body_8c_html_ab139c8809243a6622ae10f716f984ed7"><div class="ttname"><a href="mutt__body_8c.html#ab139c8809243a6622ae10f716f984ed7">mutt_body_copy</a></div><div class="ttdeci">int mutt_body_copy(FILE *fp, struct Body **b_dst, struct Body *b_src)</div><div class="ttdoc">Create a send-mode duplicate from a receive-mode body.</div><div class="ttdef"><b>Definition</b> <a href="mutt__body_8c_source.html#l00049">mutt_body.c:49</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a></div><div class="ttdeci">@ MUTT_ABORT</div><div class="ttdoc">User aborted the question (with Ctrl-G)</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00037">quad.h:37</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a></div><div class="ttdeci">@ MUTT_YES</div><div class="ttdoc">User answered &#39;Yes&#39;, or assume &#39;Yes&#39;.</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00039">quad.h:39</a></div></div>
<div class="ttc" id="arecvattach_8c_html_a0bcb0072bf0ee2929a8fdeae86644700"><div class="ttname"><a href="recvattach_8c.html#a0bcb0072bf0ee2929a8fdeae86644700">mutt_generate_recvattach_list</a></div><div class="ttdeci">void mutt_generate_recvattach_list(struct AttachCtx *actx, struct Email *e, struct Body *b, FILE *fp, int parent_type, int level, bool decrypted)</div><div class="ttdoc">Create a list of attachments.</div><div class="ttdef"><b>Definition</b> <a href="recvattach_8c_source.html#l01091">recvattach.c:1091</a></div></div>
<div class="ttc" id="astructAttachCtx_html"><div class="ttname"><a href="structAttachCtx.html">AttachCtx</a></div><div class="ttdoc">A set of attachments.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00062">attach.h:63</a></div></div>
<div class="ttc" id="astructAttachCtx_html_a6bd678fc233b795a978f78f786f89f1c"><div class="ttname"><a href="structAttachCtx.html#a6bd678fc233b795a978f78f786f89f1c">AttachCtx::fp_root</a></div><div class="ttdeci">FILE * fp_root</div><div class="ttdoc">Used by recvattach for updating.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00065">attach.h:65</a></div></div>
<div class="ttc" id="astructAttachCtx_html_a8753a1c1a51b26d4a628861dfd56294f"><div class="ttname"><a href="structAttachCtx.html#a8753a1c1a51b26d4a628861dfd56294f">AttachCtx::email</a></div><div class="ttdeci">struct Email * email</div><div class="ttdoc">Used by recvattach for updating.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00064">attach.h:64</a></div></div>
<div class="ttc" id="astructAttachCtx_html_a8954cda6f07f33628b3addf8bc2621fd"><div class="ttname"><a href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">AttachCtx::idx</a></div><div class="ttdeci">struct AttachPtr ** idx</div><div class="ttdoc">Array of attachments.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00067">attach.h:67</a></div></div>
<div class="ttc" id="astructAttachCtx_html_af02af835a67d8b3467f3a52ede4897f0"><div class="ttname"><a href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">AttachCtx::idxlen</a></div><div class="ttdeci">short idxlen</div><div class="ttdoc">Number of attachmentes.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00068">attach.h:68</a></div></div>
<div class="ttc" id="astructAttachPtr_html_a0546c0753a6155ae9555c290b80d0356"><div class="ttname"><a href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">AttachPtr::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">Attachment.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00036">attach.h:36</a></div></div>
<div class="ttc" id="astructAttachPtr_html_a776ea6f490cedf7dc47accba055d964c"><div class="ttname"><a href="structAttachPtr.html#a776ea6f490cedf7dc47accba055d964c">AttachPtr::fp</a></div><div class="ttdeci">FILE * fp</div><div class="ttdoc">Used in the recvattach menu.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00037">attach.h:37</a></div></div>
<div class="ttc" id="astructBody_html"><div class="ttname"><a href="structBody.html">Body</a></div><div class="ttdoc">The body of an email.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00035">body.h:36</a></div></div>
<div class="ttc" id="astructBody_html_ace00f9cba9b46a2d434764335d2fa43a"><div class="ttname"><a href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">Body::subtype</a></div><div class="ttdeci">char * subtype</div><div class="ttdoc">content-type subtype</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00061">body.h:61</a></div></div>
<div class="ttc" id="astructBody_html_af77d79aadb278bef8f2829c268f2486f"><div class="ttname"><a href="structBody.html#af77d79aadb278bef8f2829c268f2486f">Body::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdoc">content-type primary type, ContentType</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00040">body.h:40</a></div></div>
<div class="ttc" id="astructEmail_html_a57ad6ac618c0f685804f6f5bb390b3a6"><div class="ttname"><a href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">Email::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">List of MIME parts.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00069">email.h:69</a></div></div>
</div><!-- fragment --><div id="dynsection-22" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ae0accb8ca6f488f8a6d77cd9fac7672b_cgraph.svg" width="624" height="542"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-23" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ae0accb8ca6f488f8a6d77cd9fac7672b_icgraph.svg" width="367" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a98117235d1c6eb0c923b1114b6f3ff85" name="a98117235d1c6eb0c923b1114b6f3ff85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98117235d1c6eb0c923b1114b6f3ff85">&#9670;&#160;</a></span>format_attribution()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void format_attribution </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structExpando.html">Expando</a> *</td>          <td class="paramname"><span class="paramname"><em>exp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Format an attribution prefix/suffix. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exp</td><td><a class="el" href="structExpando.html" title="Parsed Expando trees.">Expando</a> to format </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">fp_out</td><td>File to write to </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00638">638</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  640</span>{</div>
<div class="line"><span class="lineno">  641</span>  <span class="keywordflow">if</span> (!exp || !fp_out)</div>
<div class="line"><span class="lineno">  642</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_attribution_locale = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;attribution_locale&quot;</span>);</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  647</span>  setlocale(LC_TIME, <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_attribution_locale));</div>
<div class="line"><span class="lineno">  648</span>  <a class="code hl_function" href="dlg__index_8c.html#ae150a6b0d1c7e5ffa3ad1705072ca048">mutt_make_string</a>(buf, -1, exp, NULL, -1, e, <a class="code hl_define" href="render_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a>, NULL);</div>
<div class="line"><span class="lineno">  649</span>  setlocale(LC_TIME, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  650</span>  fputs(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf), fp_out);</div>
<div class="line"><span class="lineno">  651</span>  fputc(<span class="charliteral">&#39;\n&#39;</span>, fp_out);</div>
<div class="line"><span class="lineno">  652</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  653</span>}</div>
</div><!-- fragment --><div id="dynsection-24" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a98117235d1c6eb0c923b1114b6f3ff85_cgraph.svg" width="328" height="278"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-25" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a98117235d1c6eb0c923b1114b6f3ff85_icgraph.svg" width="359" height="134"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a23d9e167b5a86151993349839cc4eaf0" name="a23d9e167b5a86151993349839cc4eaf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23d9e167b5a86151993349839cc4eaf0">&#9670;&#160;</a></span>mutt_make_attribution_intro()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_make_attribution_intro </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add "on DATE, PERSON wrote" header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">fp_out</td><td>File to write to </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00661">661</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  662</span>{</div>
<div class="line"><span class="lineno">  663</span>  <a class="code hl_function" href="#a98117235d1c6eb0c923b1114b6f3ff85">format_attribution</a>(<a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(sub, <span class="stringliteral">&quot;attribution_intro&quot;</span>), e, fp_out, sub);</div>
<div class="line"><span class="lineno">  664</span>}</div>
<div class="ttc" id="asend_8c_html_a98117235d1c6eb0c923b1114b6f3ff85"><div class="ttname"><a href="#a98117235d1c6eb0c923b1114b6f3ff85">format_attribution</a></div><div class="ttdeci">static void format_attribution(const struct Expando *exp, struct Email *e, FILE *fp_out, struct ConfigSubset *sub)</div><div class="ttdoc">Format an attribution prefix/suffix.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00638">send.c:638</a></div></div>
</div><!-- fragment --><div id="dynsection-26" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a23d9e167b5a86151993349839cc4eaf0_cgraph.svg" width="362" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-27" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a23d9e167b5a86151993349839cc4eaf0_icgraph.svg" width="550" height="144"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af2a449fb243514b7945f71808d689d9b" name="af2a449fb243514b7945f71808d689d9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2a449fb243514b7945f71808d689d9b">&#9670;&#160;</a></span>mutt_make_attribution_trailer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_make_attribution_trailer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add suffix to replied email text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">fp_out</td><td>File to write to </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00672">672</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  673</span>{</div>
<div class="line"><span class="lineno">  674</span>  <a class="code hl_function" href="#a98117235d1c6eb0c923b1114b6f3ff85">format_attribution</a>(<a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(sub, <span class="stringliteral">&quot;attribution_trailer&quot;</span>), e, fp_out, sub);</div>
<div class="line"><span class="lineno">  675</span>}</div>
</div><!-- fragment --><div id="dynsection-28" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_af2a449fb243514b7945f71808d689d9b_cgraph.svg" width="362" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-29" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_af2a449fb243514b7945f71808d689d9b_icgraph.svg" width="550" height="144"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a83f702d9e8d2f453b99a29cc6afe57e1" name="a83f702d9e8d2f453b99a29cc6afe57e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83f702d9e8d2f453b99a29cc6afe57e1">&#9670;&#160;</a></span>mutt_make_greeting()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mutt_make_greeting </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add greetings string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">fp_out</td><td>File to write to </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>$greeting </dd></dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00685">685</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  686</span>{</div>
<div class="line"><span class="lineno">  687</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structExpando.html">Expando</a> *c_greeting = <a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(sub, <span class="stringliteral">&quot;greeting&quot;</span>);</div>
<div class="line"><span class="lineno">  688</span>  <span class="keywordflow">if</span> (!c_greeting || !fp_out)</div>
<div class="line"><span class="lineno">  689</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  690</span> </div>
<div class="line"><span class="lineno">  691</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  692</span> </div>
<div class="line"><span class="lineno">  693</span>  <a class="code hl_function" href="expando_2filter_8c.html#aca5d8e52ad7cb152322d011300631bc1">expando_filter</a>(c_greeting, <a class="code hl_variable" href="send_2expando_8c.html#ac0a239eaf282f770941d49d43894c905">GreetingRenderCallbacks</a>, e, <a class="code hl_define" href="extract_8h.html#ac836dbb7a5321eb5e81497298499263c">TOKEN_NO_FLAGS</a>,</div>
<div class="line"><span class="lineno">  694</span>                 buf-&gt;<a class="code hl_variable" href="structBuffer.html#a1d9ee60bcf94de702b15ec2b5d811995">dsize</a>, <a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#a5410041863c473ba1f27b415c0a40482">env</a>, buf);</div>
<div class="line"><span class="lineno">  695</span> </div>
<div class="line"><span class="lineno">  696</span>  fputs(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf), fp_out);</div>
<div class="line"><span class="lineno">  697</span>  fputc(<span class="charliteral">&#39;\n&#39;</span>, fp_out);</div>
<div class="line"><span class="lineno">  698</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  699</span>}</div>
<div class="ttc" id="aexpando_2filter_8c_html_aca5d8e52ad7cb152322d011300631bc1"><div class="ttname"><a href="expando_2filter_8c.html#aca5d8e52ad7cb152322d011300631bc1">expando_filter</a></div><div class="ttdeci">int expando_filter(const struct Expando *exp, const struct ExpandoRenderCallback *erc, void *data, MuttFormatFlags flags, int max_cols, char **env_list, struct Buffer *buf)</div><div class="ttdoc">Render an Expando and run the result through a filter.</div><div class="ttdef"><b>Definition</b> <a href="expando_2filter_8c_source.html#l00138">filter.c:138</a></div></div>
<div class="ttc" id="aextract_8h_html_ac836dbb7a5321eb5e81497298499263c"><div class="ttname"><a href="extract_8h.html#ac836dbb7a5321eb5e81497298499263c">TOKEN_NO_FLAGS</a></div><div class="ttdeci">#define TOKEN_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="extract_8h_source.html#l00044">extract.h:44</a></div></div>
<div class="ttc" id="asend_2expando_8c_html_ac0a239eaf282f770941d49d43894c905"><div class="ttname"><a href="send_2expando_8c.html#ac0a239eaf282f770941d49d43894c905">GreetingRenderCallbacks</a></div><div class="ttdeci">const struct ExpandoRenderCallback GreetingRenderCallbacks[]</div><div class="ttdoc">Callbacks for Greeting Expandos.</div><div class="ttdef"><b>Definition</b> <a href="send_2expando_8c_source.html#l00109">expando.c:109</a></div></div>
<div class="ttc" id="astructBuffer_html_a1d9ee60bcf94de702b15ec2b5d811995"><div class="ttname"><a href="structBuffer.html#a1d9ee60bcf94de702b15ec2b5d811995">Buffer::dsize</a></div><div class="ttdeci">size_t dsize</div><div class="ttdoc">Length of data.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00039">buffer.h:39</a></div></div>
<div class="ttc" id="astructNeoMutt_html_a5410041863c473ba1f27b415c0a40482"><div class="ttname"><a href="structNeoMutt.html#a5410041863c473ba1f27b415c0a40482">NeoMutt::env</a></div><div class="ttdeci">char ** env</div><div class="ttdoc">Private copy of the environment variables.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00054">neomutt.h:54</a></div></div>
</div><!-- fragment --><div id="dynsection-30" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a83f702d9e8d2f453b99a29cc6afe57e1_cgraph.svg" width="482" height="251"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-31" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a83f702d9e8d2f453b99a29cc6afe57e1_icgraph.svg" width="358" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a133621f63fdff19b66d2b833f29a7c0f" name="a133621f63fdff19b66d2b833f29a7c0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a133621f63fdff19b66d2b833f29a7c0f">&#9670;&#160;</a></span>include_reply()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int include_reply </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate the reply text for an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">fp_out</td><td>File to write to </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00710">710</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  712</span>{</div>
<div class="line"><span class="lineno">  713</span>  <a class="code hl_typedef" href="copy_8h.html#adc738493d51f47c7dd372f3ebd53223a">CopyMessageFlags</a> cmflags = <a class="code hl_define" href="copy_8h.html#a23b8aa8125d370213675b3c0b1c5e6fe">MUTT_CM_PREFIX</a> | <a class="code hl_define" href="copy_8h.html#a4898a6c2c88fdba8ce7decdb6c125a96">MUTT_CM_DECODE</a> | <a class="code hl_define" href="copy_8h.html#a648ee091378fa6c0f6f129f64fc7f22b">MUTT_CM_CHARCONV</a> | <a class="code hl_define" href="copy_8h.html#a21e9ee6d7c3e70ffe4775aa9a90ac8c6">MUTT_CM_REPLYING</a>;</div>
<div class="line"><span class="lineno">  714</span>  <a class="code hl_typedef" href="copy_8h.html#a88a40e8f238a8478b885c90d1ce53e9c">CopyHeaderFlags</a> chflags = <a class="code hl_define" href="copy_8h.html#a05de77c5d16eb6266cfb34b7b322a807">CH_DECODE</a>;</div>
<div class="line"><span class="lineno">  715</span> </div>
<div class="line"><span class="lineno">  716</span>  <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; (e-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>))</div>
<div class="line"><span class="lineno">  717</span>  {</div>
<div class="line"><span class="lineno">  718</span>    <span class="comment">/* make sure we have the user&#39;s passphrase before proceeding... */</span></div>
<div class="line"><span class="lineno">  719</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="crypt_8c.html#a4ee7f1419a7e39b0e9f1f9d550f4de43">crypt_valid_passphrase</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a>))</div>
<div class="line"><span class="lineno">  720</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  721</span>  }</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMessage.html">Message</a> *msg = <a class="code hl_function" href="mx_8c.html#a9b2902ecb2bebbd553a8ec733ca59886">mx_msg_open</a>(m, e);</div>
<div class="line"><span class="lineno">  724</span>  <span class="keywordflow">if</span> (!msg)</div>
<div class="line"><span class="lineno">  725</span>  {</div>
<div class="line"><span class="lineno">  726</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  727</span>  }</div>
<div class="line"><span class="lineno">  728</span>  <a class="code hl_function" href="attach_2commands_8c.html#a521686f973cf66e6c60be12cc9659ac3">mutt_parse_mime_message</a>(e, msg-&gt;<a class="code hl_variable" href="structMessage.html#a11d53ee4319e8735c1677d8780a7b517">fp</a>);</div>
<div class="line"><span class="lineno">  729</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(m, e, <a class="code hl_define" href="hook_8h.html#ac4fada4e7df870f12ec6387389bba8c4">MUTT_MESSAGE_HOOK</a>);</div>
<div class="line"><span class="lineno">  730</span> </div>
<div class="line"><span class="lineno">  731</span>  <a class="code hl_function" href="#a23d9e167b5a86151993349839cc4eaf0">mutt_make_attribution_intro</a>(e, fp_out, sub);</div>
<div class="line"><span class="lineno">  732</span> </div>
<div class="line"><span class="lineno">  733</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_header = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;header&quot;</span>);</div>
<div class="line"><span class="lineno">  734</span>  <span class="keywordflow">if</span> (!c_header)</div>
<div class="line"><span class="lineno">  735</span>    cmflags |= <a class="code hl_define" href="copy_8h.html#ad0d836342af33c74966ba719fd33c475">MUTT_CM_NOHEADER</a>;</div>
<div class="line"><span class="lineno">  736</span> </div>
<div class="line"><span class="lineno">  737</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_weed = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;weed&quot;</span>);</div>
<div class="line"><span class="lineno">  738</span>  <span class="keywordflow">if</span> (c_weed)</div>
<div class="line"><span class="lineno">  739</span>  {</div>
<div class="line"><span class="lineno">  740</span>    chflags |= <a class="code hl_define" href="copy_8h.html#a5e818fe5d60277b658d3f98ee7e0e675">CH_WEED</a> | <a class="code hl_define" href="copy_8h.html#a606b533a9896e294b1341e648f0b8ba2">CH_REORDER</a>;</div>
<div class="line"><span class="lineno">  741</span>    cmflags |= <a class="code hl_define" href="copy_8h.html#a2184765637d3fe603457f28a20eccb41">MUTT_CM_WEED</a>;</div>
<div class="line"><span class="lineno">  742</span>  }</div>
<div class="line"><span class="lineno">  743</span> </div>
<div class="line"><span class="lineno">  744</span>  <a class="code hl_function" href="copy_8c.html#a72172841415fb14e143da3c102be0364">mutt_copy_message</a>(fp_out, e, msg, cmflags, chflags, 0);</div>
<div class="line"><span class="lineno">  745</span>  <a class="code hl_function" href="mx_8c.html#a2610a2afe8887bb874131a4ba092aa6a">mx_msg_close</a>(m, &amp;msg);</div>
<div class="line"><span class="lineno">  746</span> </div>
<div class="line"><span class="lineno">  747</span>  <a class="code hl_function" href="#af2a449fb243514b7945f71808d689d9b">mutt_make_attribution_trailer</a>(e, fp_out, sub);</div>
<div class="line"><span class="lineno">  748</span> </div>
<div class="line"><span class="lineno">  749</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  750</span>}</div>
<div class="ttc" id="acopy_8h_html_a21e9ee6d7c3e70ffe4775aa9a90ac8c6"><div class="ttname"><a href="copy_8h.html#a21e9ee6d7c3e70ffe4775aa9a90ac8c6">MUTT_CM_REPLYING</a></div><div class="ttdeci">#define MUTT_CM_REPLYING</div><div class="ttdoc">Replying the message.</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00046">copy.h:46</a></div></div>
<div class="ttc" id="acopy_8h_html_ad0d836342af33c74966ba719fd33c475"><div class="ttname"><a href="copy_8h.html#ad0d836342af33c74966ba719fd33c475">MUTT_CM_NOHEADER</a></div><div class="ttdeci">#define MUTT_CM_NOHEADER</div><div class="ttdoc">Don&#39;t copy the message header.</div><div class="ttdef"><b>Definition</b> <a href="copy_8h_source.html#l00038">copy.h:38</a></div></div>
<div class="ttc" id="asend_8c_html_a23d9e167b5a86151993349839cc4eaf0"><div class="ttname"><a href="#a23d9e167b5a86151993349839cc4eaf0">mutt_make_attribution_intro</a></div><div class="ttdeci">void mutt_make_attribution_intro(struct Email *e, FILE *fp_out, struct ConfigSubset *sub)</div><div class="ttdoc">Add &quot;on DATE, PERSON wrote&quot; header.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00661">send.c:661</a></div></div>
<div class="ttc" id="asend_8c_html_af2a449fb243514b7945f71808d689d9b"><div class="ttname"><a href="#af2a449fb243514b7945f71808d689d9b">mutt_make_attribution_trailer</a></div><div class="ttdeci">void mutt_make_attribution_trailer(struct Email *e, FILE *fp_out, struct ConfigSubset *sub)</div><div class="ttdoc">Add suffix to replied email text.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00672">send.c:672</a></div></div>
</div><!-- fragment --><div id="dynsection-32" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a133621f63fdff19b66d2b833f29a7c0f_cgraph.svg" width="356" height="506"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-33" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a133621f63fdff19b66d2b833f29a7c0f_icgraph.svg" width="276" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4bd501aa5eb91b97bc7c0ec116b76baa" name="a4bd501aa5eb91b97bc7c0ec116b76baa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bd501aa5eb91b97bc7c0ec116b76baa">&#9670;&#160;</a></span>choose_default_to()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const struct AddressList * choose_default_to </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structAddress.html">Address</a> *</td>          <td class="paramname"><span class="paramname"><em>from</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pick the best 'to:' value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">from</td><td>From <a class="el" href="structAddress.html" title="An email address.">Address</a> </td></tr>
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Addresses to use </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00759">759</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  762</span>{</div>
<div class="line"><span class="lineno">  763</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_reply_self = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;reply_self&quot;</span>);</div>
<div class="line"><span class="lineno">  764</span>  <span class="keywordflow">if</span> (!c_reply_self &amp;&amp; <a class="code hl_function" href="alias_8c.html#a9d6f6b4ea9d79c9c33ddd7c6b6ef764b">mutt_addr_is_user</a>(from))</div>
<div class="line"><span class="lineno">  765</span>  {</div>
<div class="line"><span class="lineno">  766</span>    <span class="comment">/* mail is from the user, assume replying to recipients */</span></div>
<div class="line"><span class="lineno">  767</span>    <span class="keywordflow">return</span> &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>;</div>
<div class="line"><span class="lineno">  768</span>  }</div>
<div class="line"><span class="lineno">  769</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  770</span>  {</div>
<div class="line"><span class="lineno">  771</span>    <span class="keywordflow">return</span> &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>;</div>
<div class="line"><span class="lineno">  772</span>  }</div>
<div class="line"><span class="lineno">  773</span>}</div>
</div><!-- fragment --><div id="dynsection-34" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a4bd501aa5eb91b97bc7c0ec116b76baa_cgraph.svg" width="328" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-35" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a4bd501aa5eb91b97bc7c0ec116b76baa_icgraph.svg" width="278" height="64"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab5edea027c9fa45beef0a68fb707789d" name="ab5edea027c9fa45beef0a68fb707789d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5edea027c9fa45beef0a68fb707789d">&#9670;&#160;</a></span>default_to()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int default_to </td>
          <td>(</td>
          <td class="paramtype">struct AddressList *</td>          <td class="paramname"><span class="paramname"><em>to</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>hmfupto</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate default email addresses. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">to</td><td>'To' address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> to populate </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags, see <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506" title="Flags for mutt_send_message(), e.g. SEND_REPLY.">SendFlags</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hmfupto</td><td>If true, add 'followup-to' address to 'to' address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Aborted </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00785">785</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  787</span>{</div>
<div class="line"><span class="lineno">  788</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *from = <a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno">  789</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *reply_to = <a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">reply_to</a>);</div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>  <span class="keywordflow">if</span> (flags &amp;&amp; !<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>) &amp;&amp; (hmfupto == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>))</div>
<div class="line"><span class="lineno">  792</span>  {</div>
<div class="line"><span class="lineno">  793</span>    <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(to, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  794</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  795</span>  }</div>
<div class="line"><span class="lineno">  796</span> </div>
<div class="line"><span class="lineno">  797</span>  <span class="comment">/* Exit now if we&#39;re setting up the default Cc list for list-reply</span></div>
<div class="line"><span class="lineno">  798</span><span class="comment">   * (only set if Mail-Followup-To is present and honoured).  */</span></div>
<div class="line"><span class="lineno">  799</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a>)</div>
<div class="line"><span class="lineno">  800</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span>  <span class="keyword">const</span> <span class="keyword">struct </span>AddressList *<a class="code hl_function" href="#ab5edea027c9fa45beef0a68fb707789d">default_to</a> = <a class="code hl_function" href="#a4bd501aa5eb91b97bc7c0ec116b76baa">choose_default_to</a>(from, env, sub);</div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>  <span class="keywordflow">if</span> (reply_to)</div>
<div class="line"><span class="lineno">  805</span>  {</div>
<div class="line"><span class="lineno">  806</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> from_is_reply_to = <a class="code hl_function" href="address_2address_8c.html#a60b3ced56e9f5be39c391250d951bf72">mutt_addr_cmp</a>(from, reply_to);</div>
<div class="line"><span class="lineno">  807</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> multiple_reply_to = reply_to &amp;&amp;</div>
<div class="line"><span class="lineno">  808</span>                                   <a class="code hl_define" href="queue_8h.html#abd57fe9bdea6007a602f8c7d61bd5265">TAILQ_NEXT</a>(<a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">reply_to</a>), entries);</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_ignore_list_reply_to = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;ignore_list_reply_to&quot;</span>);</div>
<div class="line"><span class="lineno">  811</span>    <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_reply_to = <a class="code hl_function" href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(sub, <span class="stringliteral">&quot;reply_to&quot;</span>);</div>
<div class="line"><span class="lineno">  812</span>    <span class="keywordflow">if</span> ((from_is_reply_to &amp;&amp; !multiple_reply_to &amp;&amp; !reply_to-&gt;<a class="code hl_variable" href="structAddress.html#a01b32bc3153d06f852064f1cca3feb61">personal</a>) ||</div>
<div class="line"><span class="lineno">  813</span>        (c_ignore_list_reply_to &amp;&amp; <a class="code hl_function" href="group__addr__predicate__api.html#ga546aac24675f5681df8fe2ccd17aece8">mutt_is_mail_list</a>(reply_to) &amp;&amp;</div>
<div class="line"><span class="lineno">  814</span>         (<a class="code hl_function" href="address_2address_8c.html#ad602a3cf6ff5c7fb79d21627553a586d">mutt_addrlist_search</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, reply_to) || <a class="code hl_function" href="address_2address_8c.html#ad602a3cf6ff5c7fb79d21627553a586d">mutt_addrlist_search</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, reply_to))))</div>
<div class="line"><span class="lineno">  815</span>    {</div>
<div class="line"><span class="lineno">  816</span>      <span class="comment">/* If the Reply-To: address is a mailing list, assume that it was</span></div>
<div class="line"><span class="lineno">  817</span><span class="comment">       * put there by the mailing list, and use the From: address</span></div>
<div class="line"><span class="lineno">  818</span><span class="comment">       *</span></div>
<div class="line"><span class="lineno">  819</span><span class="comment">       * We also take the from header if our correspondent has a reply-to</span></div>
<div class="line"><span class="lineno">  820</span><span class="comment">       * header which is identical to the electronic mail address given</span></div>
<div class="line"><span class="lineno">  821</span><span class="comment">       * in his From header, and the reply-to has no display-name.  */</span></div>
<div class="line"><span class="lineno">  822</span>      <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(to, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  823</span>    }</div>
<div class="line"><span class="lineno">  824</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(from_is_reply_to &amp;&amp; !multiple_reply_to) &amp;&amp; (c_reply_to != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>))</div>
<div class="line"><span class="lineno">  825</span>    {</div>
<div class="line"><span class="lineno">  826</span>      <span class="keywordtype">char</span> prompt[256] = { 0 };</div>
<div class="line"><span class="lineno">  827</span>      <span class="comment">/* There are quite a few mailing lists which set the Reply-To:</span></div>
<div class="line"><span class="lineno">  828</span><span class="comment">       * header field to the list address, which makes it quite impossible</span></div>
<div class="line"><span class="lineno">  829</span><span class="comment">       * to send a message to only the sender of the message.  This</span></div>
<div class="line"><span class="lineno">  830</span><span class="comment">       * provides a way to do that.  */</span></div>
<div class="line"><span class="lineno">  831</span>      <span class="comment">/* L10N: Asks whether the user respects the reply-to header.</span></div>
<div class="line"><span class="lineno">  832</span><span class="comment">         If she says no, neomutt will reply to the from header&#39;s address instead. */</span></div>
<div class="line"><span class="lineno">  833</span>      snprintf(prompt, <span class="keyword">sizeof</span>(prompt), <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Reply to %s%s?&quot;</span>),</div>
<div class="line"><span class="lineno">  834</span>               <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(reply_to-&gt;<a class="code hl_variable" href="structAddress.html#a45cd47ee76ef04b63f55a0345c691fe8">mailbox</a>), multiple_reply_to ? <span class="stringliteral">&quot;,...&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  835</span>      <span class="keywordflow">switch</span> (<a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(prompt, sub, <span class="stringliteral">&quot;reply_to&quot;</span>))</div>
<div class="line"><span class="lineno">  836</span>      {</div>
<div class="line"><span class="lineno">  837</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>:</div>
<div class="line"><span class="lineno">  838</span>          <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(to, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">reply_to</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  839</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  840</span> </div>
<div class="line"><span class="lineno">  841</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>:</div>
<div class="line"><span class="lineno">  842</span>          <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(to, <a class="code hl_function" href="#ab5edea027c9fa45beef0a68fb707789d">default_to</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  843</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  844</span> </div>
<div class="line"><span class="lineno">  845</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  846</span>          <span class="keywordflow">return</span> -1; <span class="comment">/* abort */</span></div>
<div class="line"><span class="lineno">  847</span>      }</div>
<div class="line"><span class="lineno">  848</span>    }</div>
<div class="line"><span class="lineno">  849</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  850</span>    {</div>
<div class="line"><span class="lineno">  851</span>      <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(to, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">reply_to</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  852</span>    }</div>
<div class="line"><span class="lineno">  853</span>  }</div>
<div class="line"><span class="lineno">  854</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  855</span>  {</div>
<div class="line"><span class="lineno">  856</span>    <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(to, <a class="code hl_function" href="#ab5edea027c9fa45beef0a68fb707789d">default_to</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  857</span>  }</div>
<div class="line"><span class="lineno">  858</span> </div>
<div class="line"><span class="lineno">  859</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  860</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a16764dc80c9b3f6ad2897c8b7e59bd10"><div class="ttname"><a href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a></div><div class="ttdeci">void mutt_addrlist_copy(struct AddressList *dst, const struct AddressList *src, bool prune)</div><div class="ttdoc">Copy a list of addresses into another list.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00765">address.c:765</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_a60b3ced56e9f5be39c391250d951bf72"><div class="ttname"><a href="address_2address_8c.html#a60b3ced56e9f5be39c391250d951bf72">mutt_addr_cmp</a></div><div class="ttdeci">bool mutt_addr_cmp(const struct Address *a, const struct Address *b)</div><div class="ttdoc">Compare two e-mail addresses.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00892">address.c:892</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_ad602a3cf6ff5c7fb79d21627553a586d"><div class="ttname"><a href="address_2address_8c.html#ad602a3cf6ff5c7fb79d21627553a586d">mutt_addrlist_search</a></div><div class="ttdeci">bool mutt_addrlist_search(const struct AddressList *haystack, const struct Address *needle)</div><div class="ttdoc">Search for an e-mail address in a list.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00909">address.c:909</a></div></div>
<div class="ttc" id="aconfig_2helpers_8c_html_a9154ba713ce99b0937f475eec7c61af9"><div class="ttname"><a href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a></div><div class="ttdeci">enum QuadOption cs_subset_quad(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a quad-value config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00192">helpers.c:192</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35db"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a></div><div class="ttdeci">QuadOption</div><div class="ttdoc">Possible values for a quad-option.</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00035">quad.h:36</a></div></div>
<div class="ttc" id="aqueue_8h_html_a7d6894360bd1c41e0e6f6d84998c1362"><div class="ttname"><a href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a></div><div class="ttdeci">#define TAILQ_FIRST(head)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00780">queue.h:780</a></div></div>
<div class="ttc" id="asend_8c_html_a4bd501aa5eb91b97bc7c0ec116b76baa"><div class="ttname"><a href="#a4bd501aa5eb91b97bc7c0ec116b76baa">choose_default_to</a></div><div class="ttdeci">static const struct AddressList * choose_default_to(const struct Address *from, const struct Envelope *env, struct ConfigSubset *sub)</div><div class="ttdoc">Pick the best &#39;to:&#39; value.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00759">send.c:759</a></div></div>
<div class="ttc" id="asend_8c_html_ab5edea027c9fa45beef0a68fb707789d"><div class="ttname"><a href="#ab5edea027c9fa45beef0a68fb707789d">default_to</a></div><div class="ttdeci">static int default_to(struct AddressList *to, struct Envelope *env, SendFlags flags, int hmfupto, struct ConfigSubset *sub)</div><div class="ttdoc">Generate default email addresses.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00785">send.c:785</a></div></div>
<div class="ttc" id="astructAddress_html_a01b32bc3153d06f852064f1cca3feb61"><div class="ttname"><a href="structAddress.html#a01b32bc3153d06f852064f1cca3feb61">Address::personal</a></div><div class="ttdeci">struct Buffer * personal</div><div class="ttdoc">Real name of address.</div><div class="ttdef"><b>Definition</b> <a href="address_8h_source.html#l00036">address.h:36</a></div></div>
<div class="ttc" id="astructAddress_html_a45cd47ee76ef04b63f55a0345c691fe8"><div class="ttname"><a href="structAddress.html#a45cd47ee76ef04b63f55a0345c691fe8">Address::mailbox</a></div><div class="ttdeci">struct Buffer * mailbox</div><div class="ttdoc">Mailbox and host address.</div><div class="ttdef"><b>Definition</b> <a href="address_8h_source.html#l00037">address.h:37</a></div></div>
<div class="ttc" id="astructEnvelope_html_a6044b60220b8029a6a505e5b61f1cadc"><div class="ttname"><a href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">Envelope::mail_followup_to</a></div><div class="ttdeci">struct AddressList mail_followup_to</div><div class="ttdoc">Email&#39;s &#39;mail-followup-to&#39;.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00065">envelope.h:65</a></div></div>
</div><!-- fragment --><div id="dynsection-36" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ab5edea027c9fa45beef0a68fb707789d_cgraph.svg" width="459" height="447"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-37" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ab5edea027c9fa45beef0a68fb707789d_icgraph.svg" width="275" height="64"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a78de7631e05a4bde3c61e5f5d2c34921" name="a78de7631e05a4bde3c61e5f5d2c34921"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78de7631e05a4bde3c61e5f5d2c34921">&#9670;&#160;</a></span>mutt_fetch_recips()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_fetch_recips </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>in</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate recpients for a reply email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> to populate </td></tr>
    <tr><td class="paramname">in</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> of source email </td></tr>
    <tr><td class="paramname">flags</td><td>Flags, see <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506" title="Flags for mutt_send_message(), e.g. SEND_REPLY.">SendFlags</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00871">871</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  873</span>{</div>
<div class="line"><span class="lineno">  874</span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> hmfupto = <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>;</div>
<div class="line"><span class="lineno">  875</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *followup_to = <a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>);</div>
<div class="line"><span class="lineno">  876</span> </div>
<div class="line"><span class="lineno">  877</span>  <span class="keywordflow">if</span> ((flags &amp; (<a class="code hl_define" href="send_8h.html#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a> | <a class="code hl_define" href="send_8h.html#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a> | <a class="code hl_define" href="send_8h.html#a0e11db957196a8cc43bbe955178f3686">SEND_GROUP_CHAT_REPLY</a>)) &amp;&amp; followup_to)</div>
<div class="line"><span class="lineno">  878</span>  {</div>
<div class="line"><span class="lineno">  879</span>    <span class="keywordtype">char</span> prompt[256] = { 0 };</div>
<div class="line"><span class="lineno">  880</span>    snprintf(prompt, <span class="keyword">sizeof</span>(prompt), <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Follow-up to %s%s?&quot;</span>),</div>
<div class="line"><span class="lineno">  881</span>             <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(followup_to-&gt;<a class="code hl_variable" href="structAddress.html#a45cd47ee76ef04b63f55a0345c691fe8">mailbox</a>),</div>
<div class="line"><span class="lineno">  882</span>             <a class="code hl_define" href="queue_8h.html#abd57fe9bdea6007a602f8c7d61bd5265">TAILQ_NEXT</a>(<a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>), entries) ? <span class="stringliteral">&quot;,...&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span>    hmfupto = <a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(prompt, sub, <span class="stringliteral">&quot;honor_followup_to&quot;</span>);</div>
<div class="line"><span class="lineno">  885</span>    <span class="keywordflow">if</span> (hmfupto == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>)</div>
<div class="line"><span class="lineno">  886</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  887</span>  }</div>
<div class="line"><span class="lineno">  888</span> </div>
<div class="line"><span class="lineno">  889</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a>)</div>
<div class="line"><span class="lineno">  890</span>  {</div>
<div class="line"><span class="lineno">  891</span>    <a class="code hl_function" href="#a7513f0a7dea1ccf4de7506399771a4c2">add_mailing_lists</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>);</div>
<div class="line"><span class="lineno">  892</span> </div>
<div class="line"><span class="lineno">  893</span>    <span class="keywordflow">if</span> (followup_to &amp;&amp; (hmfupto == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>) &amp;&amp;</div>
<div class="line"><span class="lineno">  894</span>        (<a class="code hl_function" href="#ab5edea027c9fa45beef0a68fb707789d">default_to</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, in, flags &amp; <a class="code hl_define" href="send_8h.html#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a>, (hmfupto == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>), sub) == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>))</div>
<div class="line"><span class="lineno">  895</span>    {</div>
<div class="line"><span class="lineno">  896</span>      <span class="keywordflow">return</span> -1; <span class="comment">/* abort */</span></div>
<div class="line"><span class="lineno">  897</span>    }</div>
<div class="line"><span class="lineno">  898</span>  }</div>
<div class="line"><span class="lineno">  899</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#aa0a201a6d90a4760c1e0ece8be43c1cb">SEND_TO_SENDER</a>)</div>
<div class="line"><span class="lineno">  900</span>  {</div>
<div class="line"><span class="lineno">  901</span>    <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  902</span>  }</div>
<div class="line"><span class="lineno">  903</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  904</span>  {</div>
<div class="line"><span class="lineno">  905</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#ab5edea027c9fa45beef0a68fb707789d">default_to</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, in, flags &amp; (<a class="code hl_define" href="send_8h.html#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a> | <a class="code hl_define" href="send_8h.html#a0e11db957196a8cc43bbe955178f3686">SEND_GROUP_CHAT_REPLY</a>),</div>
<div class="line"><span class="lineno">  906</span>                   (hmfupto == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>), sub) == -1)</div>
<div class="line"><span class="lineno">  907</span>    {</div>
<div class="line"><span class="lineno">  908</span>      <span class="keywordflow">return</span> -1; <span class="comment">/* abort */</span></div>
<div class="line"><span class="lineno">  909</span>    }</div>
<div class="line"><span class="lineno">  910</span> </div>
<div class="line"><span class="lineno">  911</span>    <span class="keywordflow">if</span> ((flags &amp; (<a class="code hl_define" href="send_8h.html#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a> | <a class="code hl_define" href="send_8h.html#a0e11db957196a8cc43bbe955178f3686">SEND_GROUP_CHAT_REPLY</a>)) &amp;&amp;</div>
<div class="line"><span class="lineno">  912</span>        (!followup_to || (hmfupto != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)))</div>
<div class="line"><span class="lineno">  913</span>    {</div>
<div class="line"><span class="lineno">  914</span>      <span class="comment">/* if(!mutt_addr_is_user(in-&gt;to)) */</span></div>
<div class="line"><span class="lineno">  915</span>      <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a>)</div>
<div class="line"><span class="lineno">  916</span>        <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  917</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  918</span>        <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  919</span>      <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  920</span>    }</div>
<div class="line"><span class="lineno">  921</span>  }</div>
<div class="line"><span class="lineno">  922</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  923</span>}</div>
<div class="ttc" id="asend_8c_html_a7513f0a7dea1ccf4de7506399771a4c2"><div class="ttname"><a href="#a7513f0a7dea1ccf4de7506399771a4c2">add_mailing_lists</a></div><div class="ttdeci">static void add_mailing_lists(struct AddressList *out, const struct AddressList *t, const struct AddressList *c)</div><div class="ttdoc">Search Address lists for mailing lists.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00162">send.c:162</a></div></div>
<div class="ttc" id="asend_8h_html_a0e11db957196a8cc43bbe955178f3686"><div class="ttname"><a href="send_8h.html#a0e11db957196a8cc43bbe955178f3686">SEND_GROUP_CHAT_REPLY</a></div><div class="ttdeci">#define SEND_GROUP_CHAT_REPLY</div><div class="ttdoc">Reply to all recipients preserving To/Cc.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00054">send.h:54</a></div></div>
<div class="ttc" id="asend_8h_html_aa0a201a6d90a4760c1e0ece8be43c1cb"><div class="ttname"><a href="send_8h.html#aa0a201a6d90a4760c1e0ece8be43c1cb">SEND_TO_SENDER</a></div><div class="ttdeci">#define SEND_TO_SENDER</div><div class="ttdoc">Compose new email to sender.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00053">send.h:53</a></div></div>
</div><!-- fragment --><div id="dynsection-38" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a78de7631e05a4bde3c61e5f5d2c34921_cgraph.svg" width="500" height="250"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-39" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a78de7631e05a4bde3c61e5f5d2c34921_icgraph.svg" width="367" height="166"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af14544f55d0b62fcba84643fadec4890" name="af14544f55d0b62fcba84643fadec4890"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af14544f55d0b62fcba84643fadec4890">&#9670;&#160;</a></span>add_references()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_references </td>
          <td>(</td>
          <td class="paramtype">struct ListHead *</td>          <td class="paramname"><span class="paramname"><em>head</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add the email's references to a list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>List of references </td></tr>
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> of message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00930">930</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  931</span>{</div>
<div class="line"><span class="lineno">  932</span>  <span class="keyword">struct </span>ListHead *src = <a class="code hl_define" href="queue_8h.html#a8427c8f43d09d73062cf6b37f303aff5">STAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>) ? &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a9ae6d450b2f012c37d3350f4305fbb90">in_reply_to</a> : &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>;</div>
<div class="line"><span class="lineno">  933</span>  <a class="code hl_function" href="list_8c.html#a3df8a4dc742babace631d82e71321678">mutt_list_copy_tail</a>(head, src);</div>
<div class="line"><span class="lineno">  934</span>}</div>
<div class="ttc" id="alist_8c_html_a3df8a4dc742babace631d82e71321678"><div class="ttname"><a href="list_8c.html#a3df8a4dc742babace631d82e71321678">mutt_list_copy_tail</a></div><div class="ttdeci">void mutt_list_copy_tail(struct ListHead *dst, const struct ListHead *src)</div><div class="ttdoc">Copy a list into another list.</div><div class="ttdef"><b>Definition</b> <a href="list_8c_source.html#l00275">list.c:275</a></div></div>
<div class="ttc" id="aqueue_8h_html_a8427c8f43d09d73062cf6b37f303aff5"><div class="ttname"><a href="queue_8h.html#a8427c8f43d09d73062cf6b37f303aff5">STAILQ_EMPTY</a></div><div class="ttdeci">#define STAILQ_EMPTY(head)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00382">queue.h:382</a></div></div>
<div class="ttc" id="astructEnvelope_html_a832eec73356a806761e26f0bc40d9083"><div class="ttname"><a href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">Envelope::references</a></div><div class="ttdeci">struct ListHead references</div><div class="ttdoc">message references (in reverse order)</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00083">envelope.h:83</a></div></div>
<div class="ttc" id="astructEnvelope_html_a9ae6d450b2f012c37d3350f4305fbb90"><div class="ttname"><a href="structEnvelope.html#a9ae6d450b2f012c37d3350f4305fbb90">Envelope::in_reply_to</a></div><div class="ttdeci">struct ListHead in_reply_to</div><div class="ttdoc">in-reply-to header content</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00084">envelope.h:84</a></div></div>
</div><!-- fragment --><div id="dynsection-40" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-40-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-40-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-40-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_af14544f55d0b62fcba84643fadec4890_cgraph.svg" width="310" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-41" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-41-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-41-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-41-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_af14544f55d0b62fcba84643fadec4890_icgraph.svg" width="343" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6c0f91c0d2e3bb30c0dc096c2d5d5361" name="a6c0f91c0d2e3bb30c0dc096c2d5d5361"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c0f91c0d2e3bb30c0dc096c2d5d5361">&#9670;&#160;</a></span>add_message_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_message_id </td>
          <td>(</td>
          <td class="paramtype">struct ListHead *</td>          <td class="paramname"><span class="paramname"><em>head</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add the email's message ID to a list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>List of message IDs </td></tr>
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> of message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00941">941</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  942</span>{</div>
<div class="line"><span class="lineno">  943</span>  <span class="keywordflow">if</span> (env-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>)</div>
<div class="line"><span class="lineno">  944</span>  {</div>
<div class="line"><span class="lineno">  945</span>    <a class="code hl_function" href="list_8c.html#a5a575610af3a8c6f267924b46c95b059">mutt_list_insert_head</a>(head, <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(env-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>));</div>
<div class="line"><span class="lineno">  946</span>  }</div>
<div class="line"><span class="lineno">  947</span>}</div>
<div class="ttc" id="alist_8c_html_a5a575610af3a8c6f267924b46c95b059"><div class="ttname"><a href="list_8c.html#a5a575610af3a8c6f267924b46c95b059">mutt_list_insert_head</a></div><div class="ttdeci">struct ListNode * mutt_list_insert_head(struct ListHead *h, char *s)</div><div class="ttdoc">Insert a string at the beginning of a List.</div><div class="ttdef"><b>Definition</b> <a href="list_8c_source.html#l00046">list.c:46</a></div></div>
</div><!-- fragment --><div id="dynsection-42" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-42-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-42-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-42-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a6c0f91c0d2e3bb30c0dc096c2d5d5361_cgraph.svg" width="335" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-43" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-43-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-43-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-43-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a6c0f91c0d2e3bb30c0dc096c2d5d5361_icgraph.svg" width="348" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a527f182325365ed083dad7be735bab25" name="a527f182325365ed083dad7be735bab25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a527f182325365ed083dad7be735bab25">&#9670;&#160;</a></span>mutt_fix_reply_recipients()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_fix_reply_recipients </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove duplicate recipients. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> to fix </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00954">954</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  955</span>{</div>
<div class="line"><span class="lineno">  956</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_me_too = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;me_too&quot;</span>);</div>
<div class="line"><span class="lineno">  957</span>  <span class="keywordflow">if</span> (!c_me_too)</div>
<div class="line"><span class="lineno">  958</span>  {</div>
<div class="line"><span class="lineno">  959</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_reply_self = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;reply_self&quot;</span>);</div>
<div class="line"><span class="lineno">  960</span> </div>
<div class="line"><span class="lineno">  961</span>    <span class="comment">/* the order is important here.  do the CC: first so that if the</span></div>
<div class="line"><span class="lineno">  962</span><span class="comment">     * the user is the only recipient, it ends up on the TO: field */</span></div>
<div class="line"><span class="lineno">  963</span>    <a class="code hl_function" href="#a6671477ec99e59665fcbac17986d6e93">remove_user</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>));</div>
<div class="line"><span class="lineno">  964</span>    <a class="code hl_function" href="#a6671477ec99e59665fcbac17986d6e93">remove_user</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>) || c_reply_self);</div>
<div class="line"><span class="lineno">  965</span>  }</div>
<div class="line"><span class="lineno">  966</span> </div>
<div class="line"><span class="lineno">  967</span>  <span class="comment">/* the CC field can get cluttered, especially with lists */</span></div>
<div class="line"><span class="lineno">  968</span>  <a class="code hl_function" href="address_2address_8c.html#aee5d40d84136d3a7adba727e2908ad66">mutt_addrlist_dedupe</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>);</div>
<div class="line"><span class="lineno">  969</span>  <a class="code hl_function" href="address_2address_8c.html#aee5d40d84136d3a7adba727e2908ad66">mutt_addrlist_dedupe</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>);</div>
<div class="line"><span class="lineno">  970</span>  <a class="code hl_function" href="address_2address_8c.html#a968e9f56e7408d5e0fa1d1135bdee017">mutt_addrlist_remove_xrefs</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>);</div>
<div class="line"><span class="lineno">  971</span> </div>
<div class="line"><span class="lineno">  972</span>  <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>) &amp;&amp; <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>))</div>
<div class="line"><span class="lineno">  973</span>  {</div>
<div class="line"><span class="lineno">  974</span>    <a class="code hl_define" href="queue_8h.html#aa4cf483c7dcddd1d89a00886b5466bac">TAILQ_SWAP</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, <a class="code hl_struct" href="structAddress.html">Address</a>, entries);</div>
<div class="line"><span class="lineno">  975</span>  }</div>
<div class="line"><span class="lineno">  976</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a968e9f56e7408d5e0fa1d1135bdee017"><div class="ttname"><a href="address_2address_8c.html#a968e9f56e7408d5e0fa1d1135bdee017">mutt_addrlist_remove_xrefs</a></div><div class="ttdeci">void mutt_addrlist_remove_xrefs(const struct AddressList *a, struct AddressList *b)</div><div class="ttdoc">Remove cross-references.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01433">address.c:1433</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_aee5d40d84136d3a7adba727e2908ad66"><div class="ttname"><a href="address_2address_8c.html#aee5d40d84136d3a7adba727e2908ad66">mutt_addrlist_dedupe</a></div><div class="ttdeci">void mutt_addrlist_dedupe(struct AddressList *al)</div><div class="ttdoc">Remove duplicate addresses.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01397">address.c:1397</a></div></div>
<div class="ttc" id="aqueue_8h_html_aa4cf483c7dcddd1d89a00886b5466bac"><div class="ttname"><a href="queue_8h.html#aa4cf483c7dcddd1d89a00886b5466bac">TAILQ_SWAP</a></div><div class="ttdeci">#define TAILQ_SWAP(head1, head2, type, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00937">queue.h:937</a></div></div>
<div class="ttc" id="asend_8c_html_a6671477ec99e59665fcbac17986d6e93"><div class="ttname"><a href="#a6671477ec99e59665fcbac17986d6e93">remove_user</a></div><div class="ttdeci">static void remove_user(struct AddressList *al, bool leave_only)</div><div class="ttdoc">Remove any address which matches the current user.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00143">send.c:143</a></div></div>
</div><!-- fragment --><div id="dynsection-44" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-44-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-44-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-44-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a527f182325365ed083dad7be735bab25_cgraph.svg" width="392" height="219"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-45" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-45-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-45-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-45-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a527f182325365ed083dad7be735bab25_icgraph.svg" width="395" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a441dbd4f179147fa14692a98acbd8f26" name="a441dbd4f179147fa14692a98acbd8f26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a441dbd4f179147fa14692a98acbd8f26">&#9670;&#160;</a></span>mutt_make_forward_subject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_make_forward_subject </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a subject for a forwarded email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> for result </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00984">984</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  985</span>{</div>
<div class="line"><span class="lineno">  986</span>  <span class="keywordflow">if</span> (!env)</div>
<div class="line"><span class="lineno">  987</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  988</span> </div>
<div class="line"><span class="lineno">  989</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structExpando.html">Expando</a> *c_forward_format = <a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(sub, <span class="stringliteral">&quot;forward_format&quot;</span>);</div>
<div class="line"><span class="lineno">  990</span> </div>
<div class="line"><span class="lineno">  991</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  992</span>  <span class="comment">/* set the default subject for the message. */</span></div>
<div class="line"><span class="lineno">  993</span>  <a class="code hl_function" href="dlg__index_8c.html#ae150a6b0d1c7e5ffa3ad1705072ca048">mutt_make_string</a>(buf, -1, c_forward_format, NULL, -1, e, <a class="code hl_define" href="render_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a>, NULL);</div>
<div class="line"><span class="lineno">  994</span>  <a class="code hl_function" href="envelope_8c.html#a91c00f700ee3ca43aa33487591b0d317">mutt_env_set_subject</a>(env, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno">  995</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  996</span>}</div>
</div><!-- fragment --><div id="dynsection-46" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-46-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-46-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-46-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a441dbd4f179147fa14692a98acbd8f26_cgraph.svg" width="411" height="331"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-47" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-47-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-47-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-47-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a441dbd4f179147fa14692a98acbd8f26_icgraph.svg" width="416" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a057d0285aaa896223a70469deb4063c9" name="a057d0285aaa896223a70469deb4063c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a057d0285aaa896223a70469deb4063c9">&#9670;&#160;</a></span>mutt_make_misc_reply_headers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_make_misc_reply_headers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env_cur</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set subject for a reply. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> for result </td></tr>
    <tr><td class="paramname">env_cur</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> of source email </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01004">1004</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1006</span>{</div>
<div class="line"><span class="lineno"> 1007</span>  <span class="keywordflow">if</span> (!env || !env_cur)</div>
<div class="line"><span class="lineno"> 1008</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1009</span> </div>
<div class="line"><span class="lineno"> 1010</span>  <span class="comment">/* This takes precedence over a subject that might have</span></div>
<div class="line"><span class="lineno"> 1011</span><span class="comment">   * been taken from a List-Post header.  Is that correct?  */</span></div>
<div class="line"><span class="lineno"> 1012</span>  <span class="keywordflow">if</span> (env_cur-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>)</div>
<div class="line"><span class="lineno"> 1013</span>  {</div>
<div class="line"><span class="lineno"> 1014</span>    <span class="keywordtype">char</span> *subj = NULL;</div>
<div class="line"><span class="lineno"> 1015</span>    <a class="code hl_function" href="mutt_2string_8c.html#a4388c16988fac9a7596dee4d4af89595">mutt_str_asprintf</a>(&amp;subj, <span class="stringliteral">&quot;Re: %s&quot;</span>, env_cur-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>);</div>
<div class="line"><span class="lineno"> 1016</span>    <a class="code hl_function" href="envelope_8c.html#a91c00f700ee3ca43aa33487591b0d317">mutt_env_set_subject</a>(env, subj);</div>
<div class="line"><span class="lineno"> 1017</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;subj);</div>
<div class="line"><span class="lineno"> 1018</span>  }</div>
<div class="line"><span class="lineno"> 1019</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!env-&gt;<a class="code hl_variable" href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">subject</a>)</div>
<div class="line"><span class="lineno"> 1020</span>  {</div>
<div class="line"><span class="lineno"> 1021</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_empty_subject = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;empty_subject&quot;</span>);</div>
<div class="line"><span class="lineno"> 1022</span>    <a class="code hl_function" href="envelope_8c.html#a91c00f700ee3ca43aa33487591b0d317">mutt_env_set_subject</a>(env, c_empty_subject);</div>
<div class="line"><span class="lineno"> 1023</span>  }</div>
<div class="line"><span class="lineno"> 1024</span>}</div>
<div class="ttc" id="amutt_2string_8c_html_a4388c16988fac9a7596dee4d4af89595"><div class="ttname"><a href="mutt_2string_8c.html#a4388c16988fac9a7596dee4d4af89595">mutt_str_asprintf</a></div><div class="ttdeci">int mutt_str_asprintf(char **strp, const char *fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00803">string.c:803</a></div></div>
<div class="ttc" id="astructEnvelope_html_ad7dc5e8dd9356bb5266787bf647a4031"><div class="ttname"><a href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">Envelope::real_subj</a></div><div class="ttdeci">char *const real_subj</div><div class="ttdoc">Offset of the real subject.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00071">envelope.h:71</a></div></div>
</div><!-- fragment --><div id="dynsection-48" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-48-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-48-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-48-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a057d0285aaa896223a70469deb4063c9_cgraph.svg" width="376" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-49" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-49-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-49-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-49-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a057d0285aaa896223a70469deb4063c9_icgraph.svg" width="380" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="afff65d1a3590d6cae315239f25a6c48d" name="afff65d1a3590d6cae315239f25a6c48d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afff65d1a3590d6cae315239f25a6c48d">&#9670;&#160;</a></span>mutt_add_to_reference_headers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_add_to_reference_headers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env_cur</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate references for a reply email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> for result </td></tr>
    <tr><td class="paramname">env_cur</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> of source email </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01032">1032</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1034</span>{</div>
<div class="line"><span class="lineno"> 1035</span>  <a class="code hl_function" href="#af14544f55d0b62fcba84643fadec4890">add_references</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>, env_cur);</div>
<div class="line"><span class="lineno"> 1036</span>  <a class="code hl_function" href="#a6c0f91c0d2e3bb30c0dc096c2d5d5361">add_message_id</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>, env_cur);</div>
<div class="line"><span class="lineno"> 1037</span>  <a class="code hl_function" href="#a6c0f91c0d2e3bb30c0dc096c2d5d5361">add_message_id</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a9ae6d450b2f012c37d3350f4305fbb90">in_reply_to</a>, env_cur);</div>
<div class="line"><span class="lineno"> 1038</span> </div>
<div class="line"><span class="lineno"> 1039</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_x_comment_to = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;x_comment_to&quot;</span>);</div>
<div class="line"><span class="lineno"> 1040</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a> &amp;&amp; c_x_comment_to &amp;&amp; !<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env_cur-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>))</div>
<div class="line"><span class="lineno"> 1041</span>    env-&gt;<a class="code hl_variable" href="structEnvelope.html#a52153c6e4fdb551233e26d4fdb48fb78">x_comment_to</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(<a class="code hl_function" href="email_2sort_8c.html#a2e20b923e21514eff962dfbde7ec1955">mutt_get_name</a>(<a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;env_cur-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>)));</div>
<div class="line"><span class="lineno"> 1042</span>}</div>
<div class="ttc" id="aemail_2sort_8c_html_a2e20b923e21514eff962dfbde7ec1955"><div class="ttname"><a href="email_2sort_8c.html#a2e20b923e21514eff962dfbde7ec1955">mutt_get_name</a></div><div class="ttdeci">const char * mutt_get_name(const struct Address *a)</div><div class="ttdoc">Pick the best name to display from an address.</div><div class="ttdef"><b>Definition</b> <a href="email_2sort_8c_source.html#l00139">sort.c:139</a></div></div>
<div class="ttc" id="asend_8c_html_a6c0f91c0d2e3bb30c0dc096c2d5d5361"><div class="ttname"><a href="#a6c0f91c0d2e3bb30c0dc096c2d5d5361">add_message_id</a></div><div class="ttdeci">static void add_message_id(struct ListHead *head, struct Envelope *env)</div><div class="ttdoc">Add the email&#39;s message ID to a list.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00941">send.c:941</a></div></div>
<div class="ttc" id="asend_8c_html_af14544f55d0b62fcba84643fadec4890"><div class="ttname"><a href="#af14544f55d0b62fcba84643fadec4890">add_references</a></div><div class="ttdeci">static void add_references(struct ListHead *head, struct Envelope *env)</div><div class="ttdoc">Add the email&#39;s references to a list.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00930">send.c:930</a></div></div>
</div><!-- fragment --><div id="dynsection-50" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-50-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-50-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-50-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_afff65d1a3590d6cae315239f25a6c48d_cgraph.svg" width="510" height="248"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-51" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-51-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-51-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-51-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_afff65d1a3590d6cae315239f25a6c48d_icgraph.svg" width="404" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a450bd21350999dad5a44e947982f4f91" name="a450bd21350999dad5a44e947982f4f91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a450bd21350999dad5a44e947982f4f91">&#9670;&#160;</a></span>make_reference_headers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void make_reference_headers </td>
          <td>(</td>
          <td class="paramtype">struct EmailArray *</td>          <td class="paramname"><span class="paramname"><em>ea</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate reference headers for an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ea</td><td>Array of source Emails </td></tr>
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> for result </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01050">1050</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1052</span>{</div>
<div class="line"><span class="lineno"> 1053</span>  <span class="keywordflow">if</span> (!ea || !env || <a class="code hl_define" href="array_8h.html#a748cb2df8cbe952b6fff91d62811a20a">ARRAY_EMPTY</a>(ea))</div>
<div class="line"><span class="lineno"> 1054</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1055</span> </div>
<div class="line"><span class="lineno"> 1056</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> **ep = NULL;</div>
<div class="line"><span class="lineno"> 1057</span>  <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(ep, ea)</div>
<div class="line"><span class="lineno"> 1058</span>  {</div>
<div class="line"><span class="lineno"> 1059</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = *ep;</div>
<div class="line"><span class="lineno"> 1060</span>    <a class="code hl_function" href="#afff65d1a3590d6cae315239f25a6c48d">mutt_add_to_reference_headers</a>(<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, sub);</div>
<div class="line"><span class="lineno"> 1061</span>  }</div>
<div class="line"><span class="lineno"> 1062</span> </div>
<div class="line"><span class="lineno"> 1063</span>  <span class="comment">/* if there&#39;s more than entry in In-Reply-To (i.e. message has multiple</span></div>
<div class="line"><span class="lineno"> 1064</span><span class="comment">   * parents), don&#39;t generate a References: header as it&#39;s discouraged by</span></div>
<div class="line"><span class="lineno"> 1065</span><span class="comment">   * RFC2822, sect. 3.6.4 */</span></div>
<div class="line"><span class="lineno"> 1066</span>  <span class="keywordflow">if</span> ((<a class="code hl_define" href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a>(ea) &gt; 1) &amp;&amp; !<a class="code hl_define" href="queue_8h.html#a8427c8f43d09d73062cf6b37f303aff5">STAILQ_EMPTY</a>(&amp;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a9ae6d450b2f012c37d3350f4305fbb90">in_reply_to</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1067</span>      <a class="code hl_define" href="queue_8h.html#ad89ac472696d006112dface9c2d75e47">STAILQ_NEXT</a>(<a class="code hl_define" href="queue_8h.html#a3e2eb7535019a2829399b24744dd1a66">STAILQ_FIRST</a>(&amp;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a9ae6d450b2f012c37d3350f4305fbb90">in_reply_to</a>), entries))</div>
<div class="line"><span class="lineno"> 1068</span>  {</div>
<div class="line"><span class="lineno"> 1069</span>    <a class="code hl_function" href="list_8c.html#ab5c53ce94cc2aafa4299dbc81a37f4a4">mutt_list_free</a>(&amp;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>);</div>
<div class="line"><span class="lineno"> 1070</span>  }</div>
<div class="line"><span class="lineno"> 1071</span>}</div>
<div class="ttc" id="aarray_8h_html_a6b8ea5fb2f366d7716f5042b347093a6"><div class="ttname"><a href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a></div><div class="ttdeci">#define ARRAY_FOREACH(elem, head)</div><div class="ttdoc">Iterate over all elements of the array.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00214">array.h:214</a></div></div>
<div class="ttc" id="aarray_8h_html_a748cb2df8cbe952b6fff91d62811a20a"><div class="ttname"><a href="array_8h.html#a748cb2df8cbe952b6fff91d62811a20a">ARRAY_EMPTY</a></div><div class="ttdeci">#define ARRAY_EMPTY(head)</div><div class="ttdoc">Check if an array is empty.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00074">array.h:74</a></div></div>
<div class="ttc" id="aarray_8h_html_a7f1bf469a48c0a2618c94b7b8281c5bf"><div class="ttname"><a href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(head)</div><div class="ttdoc">The number of elements stored.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00087">array.h:87</a></div></div>
<div class="ttc" id="alist_8c_html_ab5c53ce94cc2aafa4299dbc81a37f4a4"><div class="ttname"><a href="list_8c.html#ab5c53ce94cc2aafa4299dbc81a37f4a4">mutt_list_free</a></div><div class="ttdeci">void mutt_list_free(struct ListHead *h)</div><div class="ttdoc">Free a List AND its strings.</div><div class="ttdef"><b>Definition</b> <a href="list_8c_source.html#l00123">list.c:123</a></div></div>
<div class="ttc" id="aqueue_8h_html_a3e2eb7535019a2829399b24744dd1a66"><div class="ttname"><a href="queue_8h.html#a3e2eb7535019a2829399b24744dd1a66">STAILQ_FIRST</a></div><div class="ttdeci">#define STAILQ_FIRST(head)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00388">queue.h:388</a></div></div>
<div class="ttc" id="aqueue_8h_html_ad89ac472696d006112dface9c2d75e47"><div class="ttname"><a href="queue_8h.html#ad89ac472696d006112dface9c2d75e47">STAILQ_NEXT</a></div><div class="ttdeci">#define STAILQ_NEXT(elm, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00439">queue.h:439</a></div></div>
<div class="ttc" id="asend_8c_html_afff65d1a3590d6cae315239f25a6c48d"><div class="ttname"><a href="#afff65d1a3590d6cae315239f25a6c48d">mutt_add_to_reference_headers</a></div><div class="ttdeci">void mutt_add_to_reference_headers(struct Envelope *env, struct Envelope *env_cur, struct ConfigSubset *sub)</div><div class="ttdoc">Generate references for a reply email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01032">send.c:1032</a></div></div>
<div class="ttc" id="astructEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00038">email.h:39</a></div></div>
<div class="ttc" id="astructEmail_html_a34cc4493729d7a3b1f4ed783e739a9ec"><div class="ttname"><a href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">Email::env</a></div><div class="ttdeci">struct Envelope * env</div><div class="ttdoc">Envelope information.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00068">email.h:68</a></div></div>
</div><!-- fragment --><div id="dynsection-52" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-52-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-52-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-52-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a450bd21350999dad5a44e947982f4f91_cgraph.svg" width="404" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-53" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-53-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-53-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-53-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a450bd21350999dad5a44e947982f4f91_icgraph.svg" width="374" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3816a6e89fb33a2c6d3d27e90fa024d0" name="a3816a6e89fb33a2c6d3d27e90fa024d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3816a6e89fb33a2c6d3d27e90fa024d0">&#9670;&#160;</a></span>envelope_defaults()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int envelope_defaults </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct EmailArray *</td>          <td class="paramname"><span class="paramname"><em>ea</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fill in some defaults for a new email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> for result </td></tr>
    <tr><td class="paramname">ea</td><td>Array of Emails to use </td></tr>
    <tr><td class="paramname">flags</td><td>Flags, see <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506" title="Flags for mutt_send_message(), e.g. SEND_REPLY.">SendFlags</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01082">1082</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1084</span>{</div>
<div class="line"><span class="lineno"> 1085</span>  <span class="keywordflow">if</span> (!ea || <a class="code hl_define" href="array_8h.html#a748cb2df8cbe952b6fff91d62811a20a">ARRAY_EMPTY</a>(ea))</div>
<div class="line"><span class="lineno"> 1086</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1087</span> </div>
<div class="line"><span class="lineno"> 1088</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e_cur = *<a class="code hl_define" href="array_8h.html#aebd057bb37aec75b6bdbed9e76715803">ARRAY_GET</a>(ea, 0);</div>
<div class="line"><span class="lineno"> 1089</span>  <span class="keywordtype">bool</span> single = (<a class="code hl_define" href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a>(ea) == 1);</div>
<div class="line"><span class="lineno"> 1090</span> </div>
<div class="line"><span class="lineno"> 1091</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEnvelope.html">Envelope</a> *env_cur = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>;</div>
<div class="line"><span class="lineno"> 1092</span>  <span class="keywordflow">if</span> (!env_cur)</div>
<div class="line"><span class="lineno"> 1093</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span>  <span class="keywordflow">if</span> (flags &amp; (<a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a> | <a class="code hl_define" href="send_8h.html#aa0a201a6d90a4760c1e0ece8be43c1cb">SEND_TO_SENDER</a>))</div>
<div class="line"><span class="lineno"> 1096</span>  {</div>
<div class="line"><span class="lineno"> 1097</span>    <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="send_8h.html#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>))</div>
<div class="line"><span class="lineno"> 1098</span>    {</div>
<div class="line"><span class="lineno"> 1099</span>      <span class="comment">/* in case followup set Newsgroups: with Followup-To: if it present */</span></div>
<div class="line"><span class="lineno"> 1100</span>      <span class="keywordflow">if</span> (!env-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a> &amp;&amp; !<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(env_cur-&gt;<a class="code hl_variable" href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">followup_to</a>, <span class="stringliteral">&quot;poster&quot;</span>))</div>
<div class="line"><span class="lineno"> 1101</span>      {</div>
<div class="line"><span class="lineno"> 1102</span>        env-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(env_cur-&gt;<a class="code hl_variable" href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">followup_to</a>);</div>
<div class="line"><span class="lineno"> 1103</span>      }</div>
<div class="line"><span class="lineno"> 1104</span>    }</div>
<div class="line"><span class="lineno"> 1105</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!single)</div>
<div class="line"><span class="lineno"> 1106</span>    {</div>
<div class="line"><span class="lineno"> 1107</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> **ep = NULL;</div>
<div class="line"><span class="lineno"> 1108</span>      <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(ep, ea)</div>
<div class="line"><span class="lineno"> 1109</span>      {</div>
<div class="line"><span class="lineno"> 1110</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = *ep;</div>
<div class="line"><span class="lineno"> 1111</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#a78de7631e05a4bde3c61e5f5d2c34921">mutt_fetch_recips</a>(<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, flags, sub) == -1)</div>
<div class="line"><span class="lineno"> 1112</span>          <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1113</span>      }</div>
<div class="line"><span class="lineno"> 1114</span>    }</div>
<div class="line"><span class="lineno"> 1115</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="#a78de7631e05a4bde3c61e5f5d2c34921">mutt_fetch_recips</a>(<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, env_cur, flags, sub) == -1)</div>
<div class="line"><span class="lineno"> 1116</span>    {</div>
<div class="line"><span class="lineno"> 1117</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1118</span>    }</div>
<div class="line"><span class="lineno"> 1119</span> </div>
<div class="line"><span class="lineno"> 1120</span>    <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="send_8h.html#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a>) &amp;&amp; <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>))</div>
<div class="line"><span class="lineno"> 1121</span>    {</div>
<div class="line"><span class="lineno"> 1122</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No mailing lists found&quot;</span>));</div>
<div class="line"><span class="lineno"> 1123</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1124</span>    }</div>
<div class="line"><span class="lineno"> 1125</span> </div>
<div class="line"><span class="lineno"> 1126</span>    <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>)</div>
<div class="line"><span class="lineno"> 1127</span>    {</div>
<div class="line"><span class="lineno"> 1128</span>      <a class="code hl_function" href="#a057d0285aaa896223a70469deb4063c9">mutt_make_misc_reply_headers</a>(<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, env_cur, sub);</div>
<div class="line"><span class="lineno"> 1129</span>      <a class="code hl_function" href="#a450bd21350999dad5a44e947982f4f91">make_reference_headers</a>(ea, <a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, sub);</div>
<div class="line"><span class="lineno"> 1130</span>    }</div>
<div class="line"><span class="lineno"> 1131</span>  }</div>
<div class="line"><span class="lineno"> 1132</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a>)</div>
<div class="line"><span class="lineno"> 1133</span>  {</div>
<div class="line"><span class="lineno"> 1134</span>    <a class="code hl_function" href="#a441dbd4f179147fa14692a98acbd8f26">mutt_make_forward_subject</a>(<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, e_cur, sub);</div>
<div class="line"><span class="lineno"> 1135</span> </div>
<div class="line"><span class="lineno"> 1136</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_forward_references = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;forward_references&quot;</span>);</div>
<div class="line"><span class="lineno"> 1137</span>    <span class="keywordflow">if</span> (c_forward_references)</div>
<div class="line"><span class="lineno"> 1138</span>      <a class="code hl_function" href="#a450bd21350999dad5a44e947982f4f91">make_reference_headers</a>(ea, <a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, sub);</div>
<div class="line"><span class="lineno"> 1139</span>  }</div>
<div class="line"><span class="lineno"> 1140</span> </div>
<div class="line"><span class="lineno"> 1141</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1142</span>}</div>
<div class="ttc" id="aarray_8h_html_aebd057bb37aec75b6bdbed9e76715803"><div class="ttname"><a href="array_8h.html#aebd057bb37aec75b6bdbed9e76715803">ARRAY_GET</a></div><div class="ttdeci">#define ARRAY_GET(head, idx)</div><div class="ttdoc">Return the element at index.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00109">array.h:109</a></div></div>
<div class="ttc" id="asend_8c_html_a057d0285aaa896223a70469deb4063c9"><div class="ttname"><a href="#a057d0285aaa896223a70469deb4063c9">mutt_make_misc_reply_headers</a></div><div class="ttdeci">void mutt_make_misc_reply_headers(struct Envelope *env, struct Envelope *env_cur, struct ConfigSubset *sub)</div><div class="ttdoc">Set subject for a reply.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01004">send.c:1004</a></div></div>
<div class="ttc" id="asend_8c_html_a441dbd4f179147fa14692a98acbd8f26"><div class="ttname"><a href="#a441dbd4f179147fa14692a98acbd8f26">mutt_make_forward_subject</a></div><div class="ttdeci">void mutt_make_forward_subject(struct Envelope *env, struct Email *e, struct ConfigSubset *sub)</div><div class="ttdoc">Create a subject for a forwarded email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00984">send.c:984</a></div></div>
<div class="ttc" id="asend_8c_html_a450bd21350999dad5a44e947982f4f91"><div class="ttname"><a href="#a450bd21350999dad5a44e947982f4f91">make_reference_headers</a></div><div class="ttdeci">static void make_reference_headers(struct EmailArray *ea, struct Envelope *env, struct ConfigSubset *sub)</div><div class="ttdoc">Generate reference headers for an email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01050">send.c:1050</a></div></div>
<div class="ttc" id="asend_8c_html_a78de7631e05a4bde3c61e5f5d2c34921"><div class="ttname"><a href="#a78de7631e05a4bde3c61e5f5d2c34921">mutt_fetch_recips</a></div><div class="ttdeci">int mutt_fetch_recips(struct Envelope *out, struct Envelope *in, SendFlags flags, struct ConfigSubset *sub)</div><div class="ttdoc">Generate recpients for a reply email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00871">send.c:871</a></div></div>
<div class="ttc" id="asend_8h_html_ae31498a0e61355a0b4ece8f0c89daf49"><div class="ttname"><a href="send_8h.html#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a></div><div class="ttdeci">#define SEND_NEWS</div><div class="ttdoc">Reply to a news article.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00055">send.h:55</a></div></div>
<div class="ttc" id="asend_8h_html_af72e00ab3817e49360034f4d9593bb62"><div class="ttname"><a href="send_8h.html#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a></div><div class="ttdeci">#define SEND_FORWARD</div><div class="ttdoc">Forward email.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00045">send.h:45</a></div></div>
<div class="ttc" id="astructEnvelope_html"><div class="ttname"><a href="structEnvelope.html">Envelope</a></div><div class="ttdoc">The header of an Email.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00056">envelope.h:57</a></div></div>
</div><!-- fragment --><div id="dynsection-54" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-54-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-54-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-54-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a3816a6e89fb33a2c6d3d27e90fa024d0_cgraph.svg" width="391" height="379"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-55" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-55-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-55-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-55-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a3816a6e89fb33a2c6d3d27e90fa024d0_icgraph.svg" width="343" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5f6595bb450dfd3e7f3b8b01e45396cd" name="a5f6595bb450dfd3e7f3b8b01e45396cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f6595bb450dfd3e7f3b8b01e45396cd">&#9670;&#160;</a></span>generate_body()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int generate_body </td>
          <td>(</td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp_tmp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct EmailArray *</td>          <td class="paramname"><span class="paramname"><em>ea</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new email body. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp_tmp</td><td>Stream for outgoing message </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> for outgoing message </td></tr>
    <tr><td class="paramname">flags</td><td>Compose mode, see <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506" title="Flags for mutt_send_message(), e.g. SEND_REPLY.">SendFlags</a> </td></tr>
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">ea</td><td>Array of Emails to use </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01155">1155</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1157</span>{</div>
<div class="line"><span class="lineno"> 1158</span>  <span class="comment">/* An EmailList is required for replying and forwarding */</span></div>
<div class="line"><span class="lineno"> 1159</span>  <span class="keywordflow">if</span> (!ea &amp;&amp; (flags &amp; (<a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a> | <a class="code hl_define" href="send_8h.html#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a>)))</div>
<div class="line"><span class="lineno"> 1160</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1161</span> </div>
<div class="line"><span class="lineno"> 1162</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>)</div>
<div class="line"><span class="lineno"> 1163</span>  {</div>
<div class="line"><span class="lineno"> 1164</span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> ans = <a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Include message in reply?&quot;</span>), sub, <span class="stringliteral">&quot;include&quot;</span>);</div>
<div class="line"><span class="lineno"> 1165</span>    <span class="keywordflow">if</span> (ans == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>)</div>
<div class="line"><span class="lineno"> 1166</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1167</span> </div>
<div class="line"><span class="lineno"> 1168</span>    <span class="keywordflow">if</span> (ans == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div>
<div class="line"><span class="lineno"> 1169</span>    {</div>
<div class="line"><span class="lineno"> 1170</span>      <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Including quoted message...&quot;</span>));</div>
<div class="line"><span class="lineno"> 1171</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> **ep = NULL;</div>
<div class="line"><span class="lineno"> 1172</span>      <span class="keywordtype">size_t</span> count = <a class="code hl_define" href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a>(ea) - 1;</div>
<div class="line"><span class="lineno"> 1173</span>      <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(ep, ea)</div>
<div class="line"><span class="lineno"> 1174</span>      {</div>
<div class="line"><span class="lineno"> 1175</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#a133621f63fdff19b66d2b833f29a7c0f">include_reply</a>(m, *ep, fp_tmp, sub) == -1)</div>
<div class="line"><span class="lineno"> 1176</span>        {</div>
<div class="line"><span class="lineno"> 1177</span>          <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Could not include all requested messages&quot;</span>));</div>
<div class="line"><span class="lineno"> 1178</span>          <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1179</span>        }</div>
<div class="line"><span class="lineno"> 1180</span>        <span class="keywordflow">if</span> (ARRAY_FOREACH_IDX_ep &lt; count)</div>
<div class="line"><span class="lineno"> 1181</span>        {</div>
<div class="line"><span class="lineno"> 1182</span>          fputc(<span class="charliteral">&#39;\n&#39;</span>, fp_tmp);</div>
<div class="line"><span class="lineno"> 1183</span>        }</div>
<div class="line"><span class="lineno"> 1184</span>      }</div>
<div class="line"><span class="lineno"> 1185</span>    }</div>
<div class="line"><span class="lineno"> 1186</span>  }</div>
<div class="line"><span class="lineno"> 1187</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a>)</div>
<div class="line"><span class="lineno"> 1188</span>  {</div>
<div class="line"><span class="lineno"> 1189</span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> ans = <a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Forward as attachment?&quot;</span>), sub, <span class="stringliteral">&quot;mime_forward&quot;</span>);</div>
<div class="line"><span class="lineno"> 1190</span>    <span class="keywordflow">if</span> (ans == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div>
<div class="line"><span class="lineno"> 1191</span>    {</div>
<div class="line"><span class="lineno"> 1192</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *last = e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 1193</span> </div>
<div class="line"><span class="lineno"> 1194</span>      <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Preparing forwarded message...&quot;</span>));</div>
<div class="line"><span class="lineno"> 1195</span> </div>
<div class="line"><span class="lineno"> 1196</span>      <span class="keywordflow">while</span> (last &amp;&amp; last-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1197</span>        last = last-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>;</div>
<div class="line"><span class="lineno"> 1198</span> </div>
<div class="line"><span class="lineno"> 1199</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> **ep = NULL;</div>
<div class="line"><span class="lineno"> 1200</span>      <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(ep, ea)</div>
<div class="line"><span class="lineno"> 1201</span>      {</div>
<div class="line"><span class="lineno"> 1202</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *tmp = <a class="code hl_function" href="sendlib_8c.html#ac581b91b8ed18532dc94bf12335c178b">mutt_make_message_attach</a>(m, *ep, <span class="keyword">false</span>, sub);</div>
<div class="line"><span class="lineno"> 1203</span>        <span class="keywordflow">if</span> (last)</div>
<div class="line"><span class="lineno"> 1204</span>        {</div>
<div class="line"><span class="lineno"> 1205</span>          last-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> = tmp;</div>
<div class="line"><span class="lineno"> 1206</span>          last = tmp;</div>
<div class="line"><span class="lineno"> 1207</span>        }</div>
<div class="line"><span class="lineno"> 1208</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1209</span>        {</div>
<div class="line"><span class="lineno"> 1210</span>          last = tmp;</div>
<div class="line"><span class="lineno"> 1211</span>          e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = tmp;</div>
<div class="line"><span class="lineno"> 1212</span>        }</div>
<div class="line"><span class="lineno"> 1213</span>      }</div>
<div class="line"><span class="lineno"> 1214</span>    }</div>
<div class="line"><span class="lineno"> 1215</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ans != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>)</div>
<div class="line"><span class="lineno"> 1216</span>    {</div>
<div class="line"><span class="lineno"> 1217</span>      <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> forwardq = <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>;</div>
<div class="line"><span class="lineno"> 1218</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> **last = NULL;</div>
<div class="line"><span class="lineno"> 1219</span> </div>
<div class="line"><span class="lineno"> 1220</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_forward_decode = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;forward_decode&quot;</span>);</div>
<div class="line"><span class="lineno"> 1221</span>      <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_forward_attachments = <a class="code hl_function" href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(sub, <span class="stringliteral">&quot;forward_attachments&quot;</span>);</div>
<div class="line"><span class="lineno"> 1222</span>      <span class="keywordflow">if</span> (c_forward_decode &amp;&amp; (c_forward_attachments != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>))</div>
<div class="line"><span class="lineno"> 1223</span>      {</div>
<div class="line"><span class="lineno"> 1224</span>        last = &amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 1225</span>        <span class="keywordflow">while</span> (*last)</div>
<div class="line"><span class="lineno"> 1226</span>          last = &amp;((*last)-&gt;next);</div>
<div class="line"><span class="lineno"> 1227</span>      }</div>
<div class="line"><span class="lineno"> 1228</span> </div>
<div class="line"><span class="lineno"> 1229</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> **ep = NULL;</div>
<div class="line"><span class="lineno"> 1230</span>      <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(ep, ea)</div>
<div class="line"><span class="lineno"> 1231</span>      {</div>
<div class="line"><span class="lineno"> 1232</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e_cur = *ep;</div>
<div class="line"><span class="lineno"> 1233</span>        <a class="code hl_function" href="#a5e533b7adb511ebbadbd637e3264fb05">include_forward</a>(m, e_cur, fp_tmp, sub);</div>
<div class="line"><span class="lineno"> 1234</span>        <span class="keywordflow">if</span> (c_forward_decode &amp;&amp; (c_forward_attachments != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>))</div>
<div class="line"><span class="lineno"> 1235</span>        {</div>
<div class="line"><span class="lineno"> 1236</span>          <span class="keywordflow">if</span> (<a class="code hl_function" href="#ae0accb8ca6f488f8a6d77cd9fac7672b">inline_forward_attachments</a>(m, e_cur, &amp;last, &amp;forwardq, sub) != 0)</div>
<div class="line"><span class="lineno"> 1237</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1238</span>        }</div>
<div class="line"><span class="lineno"> 1239</span>      }</div>
<div class="line"><span class="lineno"> 1240</span>    }</div>
<div class="line"><span class="lineno"> 1241</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1242</span>    {</div>
<div class="line"><span class="lineno"> 1243</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1244</span>    }</div>
<div class="line"><span class="lineno"> 1245</span>  }</div>
<div class="line"><span class="lineno"> 1246</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; (flags &amp; <a class="code hl_define" href="send_8h.html#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a>))</div>
<div class="line"><span class="lineno"> 1247</span>  {</div>
<div class="line"><span class="lineno"> 1248</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b = NULL;</div>
<div class="line"><span class="lineno"> 1249</span> </div>
<div class="line"><span class="lineno"> 1250</span>    <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; !(b = <a class="code hl_function" href="cryptglue_8c.html#a6ff317859513ab653641114e19fb8f59">crypt_pgp_make_key_attachment</a>()))</div>
<div class="line"><span class="lineno"> 1251</span>    {</div>
<div class="line"><span class="lineno"> 1252</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1253</span>    }</div>
<div class="line"><span class="lineno"> 1254</span> </div>
<div class="line"><span class="lineno"> 1255</span>    b-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> = e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 1256</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = b;</div>
<div class="line"><span class="lineno"> 1257</span>  }</div>
<div class="line"><span class="lineno"> 1258</span> </div>
<div class="line"><span class="lineno"> 1259</span>  <a class="code hl_function" href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a>();</div>
<div class="line"><span class="lineno"> 1260</span> </div>
<div class="line"><span class="lineno"> 1261</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1262</span>}</div>
<div class="ttc" id="acryptglue_8c_html_a6ff317859513ab653641114e19fb8f59"><div class="ttname"><a href="cryptglue_8c.html#a6ff317859513ab653641114e19fb8f59">crypt_pgp_make_key_attachment</a></div><div class="ttdeci">struct Body * crypt_pgp_make_key_attachment(void)</div><div class="ttdoc">Wrapper for CryptModuleSpecs::pgp_make_key_attachment()</div><div class="ttdef"><b>Definition</b> <a href="cryptglue_8c_source.html#l00304">cryptglue.c:304</a></div></div>
<div class="ttc" id="amutt__logging_8c_html_af068b3f524a31fad293b2fb61dfc4534"><div class="ttname"><a href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a></div><div class="ttdeci">void mutt_clear_error(void)</div><div class="ttdoc">Clear the message line (bottom line of screen)</div><div class="ttdef"><b>Definition</b> <a href="mutt__logging_8c_source.html#l00074">mutt_logging.c:74</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a587e679a4c9cc44f11f0c467bb22b0af"><div class="ttname"><a href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a></div><div class="ttdeci">#define APPLICATION_PGP</div><div class="ttdoc">Use PGP to encrypt/sign.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00096">lib.h:96</a></div></div>
<div class="ttc" id="asend_8c_html_a133621f63fdff19b66d2b833f29a7c0f"><div class="ttname"><a href="#a133621f63fdff19b66d2b833f29a7c0f">include_reply</a></div><div class="ttdeci">static int include_reply(struct Mailbox *m, struct Email *e, FILE *fp_out, struct ConfigSubset *sub)</div><div class="ttdoc">Generate the reply text for an email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00710">send.c:710</a></div></div>
<div class="ttc" id="asend_8c_html_a5e533b7adb511ebbadbd637e3264fb05"><div class="ttname"><a href="#a5e533b7adb511ebbadbd637e3264fb05">include_forward</a></div><div class="ttdeci">static int include_forward(struct Mailbox *m, struct Email *e, FILE *fp_out, struct ConfigSubset *sub)</div><div class="ttdoc">Write out a forwarded message.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00505">send.c:505</a></div></div>
<div class="ttc" id="asend_8c_html_ae0accb8ca6f488f8a6d77cd9fac7672b"><div class="ttname"><a href="#ae0accb8ca6f488f8a6d77cd9fac7672b">inline_forward_attachments</a></div><div class="ttdeci">static int inline_forward_attachments(struct Mailbox *m, struct Email *e, struct Body ***plast, enum QuadOption *forwardq, struct ConfigSubset *sub)</div><div class="ttdoc">Add attachments to an email, inline.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00564">send.c:564</a></div></div>
<div class="ttc" id="asend_8h_html_a623f46e1bab1e562893dbd01bbbd92dd"><div class="ttname"><a href="send_8h.html#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a></div><div class="ttdeci">#define SEND_KEY</div><div class="ttdoc">Mail a PGP public key.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00048">send.h:48</a></div></div>
<div class="ttc" id="asendlib_8c_html_ac581b91b8ed18532dc94bf12335c178b"><div class="ttname"><a href="sendlib_8c.html#ac581b91b8ed18532dc94bf12335c178b">mutt_make_message_attach</a></div><div class="ttdeci">struct Body * mutt_make_message_attach(struct Mailbox *m, struct Email *e, bool attach_msg, struct ConfigSubset *sub)</div><div class="ttdoc">Create a message attachment.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00453">sendlib.c:453</a></div></div>
<div class="ttc" id="astructBody_html_ac55cdfce46eed13151dcfe9b329d254c"><div class="ttname"><a href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">Body::next</a></div><div class="ttdeci">struct Body * next</div><div class="ttdoc">next attachment in the list</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00072">body.h:72</a></div></div>
</div><!-- fragment --><div id="dynsection-56" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-56-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-56-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-56-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a5f6595bb450dfd3e7f3b8b01e45396cd_cgraph.svg" width="554" height="467"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-57" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-57-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-57-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-57-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a5f6595bb450dfd3e7f3b8b01e45396cd_icgraph.svg" width="323" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="afa20b4cc93fe3d7cbc02675afeddcad4" name="afa20b4cc93fe3d7cbc02675afeddcad4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa20b4cc93fe3d7cbc02675afeddcad4">&#9670;&#160;</a></span>mutt_set_followup_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_set_followup_to </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set followup-to field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> to modify </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01269">1269</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1270</span>{</div>
<div class="line"><span class="lineno"> 1271</span>  <span class="comment">/* Only generate the Mail-Followup-To if the user has requested it, and</span></div>
<div class="line"><span class="lineno"> 1272</span><span class="comment">   * it hasn&#39;t already been set */</span></div>
<div class="line"><span class="lineno"> 1273</span> </div>
<div class="line"><span class="lineno"> 1274</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_followup_to = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;followup_to&quot;</span>);</div>
<div class="line"><span class="lineno"> 1275</span>  <span class="keywordflow">if</span> (!c_followup_to)</div>
<div class="line"><span class="lineno"> 1276</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1277</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a>)</div>
<div class="line"><span class="lineno"> 1278</span>  {</div>
<div class="line"><span class="lineno"> 1279</span>    <span class="keywordflow">if</span> (!env-&gt;<a class="code hl_variable" href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">followup_to</a> &amp;&amp; env-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a> &amp;&amp; (strrchr(env-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>, <span class="charliteral">&#39;,&#39;</span>)))</div>
<div class="line"><span class="lineno"> 1280</span>      env-&gt;<a class="code hl_variable" href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">followup_to</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(env-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>);</div>
<div class="line"><span class="lineno"> 1281</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1282</span>  }</div>
<div class="line"><span class="lineno"> 1283</span> </div>
<div class="line"><span class="lineno"> 1284</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>))</div>
<div class="line"><span class="lineno"> 1285</span>  {</div>
<div class="line"><span class="lineno"> 1286</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="exec_8c.html#aca4f25244d007a70ef8d0650f8b77b86">mutt_is_list_recipient</a>(<span class="keyword">false</span>, env))</div>
<div class="line"><span class="lineno"> 1287</span>    {</div>
<div class="line"><span class="lineno"> 1288</span>      <span class="comment">/* this message goes to known mailing lists, so create a proper</span></div>
<div class="line"><span class="lineno"> 1289</span><span class="comment">       * mail-followup-to header */</span></div>
<div class="line"><span class="lineno"> 1290</span> </div>
<div class="line"><span class="lineno"> 1291</span>      <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1292</span>      <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1293</span>    }</div>
<div class="line"><span class="lineno"> 1294</span> </div>
<div class="line"><span class="lineno"> 1295</span>    <span class="comment">/* remove ourselves from the mail-followup-to header */</span></div>
<div class="line"><span class="lineno"> 1296</span>    <a class="code hl_function" href="#a6671477ec99e59665fcbac17986d6e93">remove_user</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1297</span> </div>
<div class="line"><span class="lineno"> 1298</span>    <span class="comment">/* If we are not subscribed to any of the lists in question, re-add</span></div>
<div class="line"><span class="lineno"> 1299</span><span class="comment">     * ourselves to the mail-followup-to header.  The mail-followup-to header</span></div>
<div class="line"><span class="lineno"> 1300</span><span class="comment">     * generated is a no-op with group-reply, but makes sure list-reply has the</span></div>
<div class="line"><span class="lineno"> 1301</span><span class="comment">     * desired effect.  */</span></div>
<div class="line"><span class="lineno"> 1302</span> </div>
<div class="line"><span class="lineno"> 1303</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1304</span>        !<a class="code hl_function" href="exec_8c.html#a94da23f412141f03a53ef13461c3e40a">mutt_is_subscribed_list_recipient</a>(<span class="keyword">false</span>, env))</div>
<div class="line"><span class="lineno"> 1305</span>    {</div>
<div class="line"><span class="lineno"> 1306</span>      <span class="keyword">struct </span>AddressList *al = NULL;</div>
<div class="line"><span class="lineno"> 1307</span>      <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">reply_to</a>))</div>
<div class="line"><span class="lineno"> 1308</span>        al = &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">reply_to</a>;</div>
<div class="line"><span class="lineno"> 1309</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>))</div>
<div class="line"><span class="lineno"> 1310</span>        al = &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>;</div>
<div class="line"><span class="lineno"> 1311</span> </div>
<div class="line"><span class="lineno"> 1312</span>      <span class="keywordflow">if</span> (al)</div>
<div class="line"><span class="lineno"> 1313</span>      {</div>
<div class="line"><span class="lineno"> 1314</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *a = NULL;</div>
<div class="line"><span class="lineno"> 1315</span>        <a class="code hl_define" href="queue_8h.html#aa7f65c910cd4616fcfa9723c5763b1a5">TAILQ_FOREACH_REVERSE</a>(a, al, AddressList, entries)</div>
<div class="line"><span class="lineno"> 1316</span>        {</div>
<div class="line"><span class="lineno"> 1317</span>          <a class="code hl_function" href="address_2address_8c.html#aa68a29c1feb5938596aa589cf2d6a1af">mutt_addrlist_prepend</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>, <a class="code hl_function" href="address_2address_8c.html#a8f8e4be1b71a169870ac10be5426af8d">mutt_addr_copy</a>(a));</div>
<div class="line"><span class="lineno"> 1318</span>        }</div>
<div class="line"><span class="lineno"> 1319</span>      }</div>
<div class="line"><span class="lineno"> 1320</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1321</span>      {</div>
<div class="line"><span class="lineno"> 1322</span>        <a class="code hl_function" href="address_2address_8c.html#aa68a29c1feb5938596aa589cf2d6a1af">mutt_addrlist_prepend</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>, <a class="code hl_function" href="#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a>(sub));</div>
<div class="line"><span class="lineno"> 1323</span>      }</div>
<div class="line"><span class="lineno"> 1324</span>    }</div>
<div class="line"><span class="lineno"> 1325</span> </div>
<div class="line"><span class="lineno"> 1326</span>    <a class="code hl_function" href="address_2address_8c.html#aee5d40d84136d3a7adba727e2908ad66">mutt_addrlist_dedupe</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>);</div>
<div class="line"><span class="lineno"> 1327</span>  }</div>
<div class="line"><span class="lineno"> 1328</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_aa68a29c1feb5938596aa589cf2d6a1af"><div class="ttname"><a href="address_2address_8c.html#aa68a29c1feb5938596aa589cf2d6a1af">mutt_addrlist_prepend</a></div><div class="ttdeci">void mutt_addrlist_prepend(struct AddressList *al, struct Address *a)</div><div class="ttdoc">Prepend an Address to an AddressList.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01491">address.c:1491</a></div></div>
<div class="ttc" id="aexec_8c_html_a94da23f412141f03a53ef13461c3e40a"><div class="ttname"><a href="exec_8c.html#a94da23f412141f03a53ef13461c3e40a">mutt_is_subscribed_list_recipient</a></div><div class="ttdeci">bool mutt_is_subscribed_list_recipient(bool all_addr, struct Envelope *env)</div><div class="ttdoc">Matches subscribed mailing lists.</div><div class="ttdef"><b>Definition</b> <a href="exec_8c_source.html#l00496">exec.c:496</a></div></div>
<div class="ttc" id="aexec_8c_html_aca4f25244d007a70ef8d0650f8b77b86"><div class="ttname"><a href="exec_8c.html#aca4f25244d007a70ef8d0650f8b77b86">mutt_is_list_recipient</a></div><div class="ttdeci">bool mutt_is_list_recipient(bool all_addr, struct Envelope *env)</div><div class="ttdoc">Matches known mailing lists.</div><div class="ttdef"><b>Definition</b> <a href="exec_8c_source.html#l00509">exec.c:509</a></div></div>
<div class="ttc" id="aqueue_8h_html_aa7f65c910cd4616fcfa9723c5763b1a5"><div class="ttname"><a href="queue_8h.html#aa7f65c910cd4616fcfa9723c5763b1a5">TAILQ_FOREACH_REVERSE</a></div><div class="ttdeci">#define TAILQ_FOREACH_REVERSE(var, head, headname, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00802">queue.h:802</a></div></div>
<div class="ttc" id="asend_8c_html_a90907de4e46f3a56b2889b79a48c9011"><div class="ttname"><a href="#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a></div><div class="ttdeci">struct Address * mutt_default_from(struct ConfigSubset *sub)</div><div class="ttdoc">Get a default &#39;from&#39; Address.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01393">send.c:1393</a></div></div>
</div><!-- fragment --><div id="dynsection-58" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-58-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-58-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-58-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_afa20b4cc93fe3d7cbc02675afeddcad4_cgraph.svg" width="546" height="516"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-59" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-59-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-59-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-59-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_afa20b4cc93fe3d7cbc02675afeddcad4_icgraph.svg" width="384" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac5be3d670b1d7e5cddb605652e9aa859" name="ac5be3d670b1d7e5cddb605652e9aa859"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5be3d670b1d7e5cddb605652e9aa859">&#9670;&#160;</a></span>set_reverse_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_reverse_name </td>
          <td>(</td>
          <td class="paramtype">struct AddressList *</td>          <td class="paramname"><span class="paramname"><em>al</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to set the 'from' field from the recipients. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">al</td><td>AddressList to prepend the found address </td></tr>
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> to use </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset</td></tr>
  </table>
  </dd>
</dl>
<p>Look through the recipients of the message we are replying to, and if we find an address that matches $alternates, we use that as the default from field </p>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01340">1340</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1342</span>{</div>
<div class="line"><span class="lineno"> 1343</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *a = NULL;</div>
<div class="line"><span class="lineno"> 1344</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(al))</div>
<div class="line"><span class="lineno"> 1345</span>  {</div>
<div class="line"><span class="lineno"> 1346</span>    <a class="code hl_define" href="queue_8h.html#a16e5fc168e7f3494d4b1df54447d871e">TAILQ_FOREACH</a>(a, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, entries)</div>
<div class="line"><span class="lineno"> 1347</span>    {</div>
<div class="line"><span class="lineno"> 1348</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="alias_8c.html#a9d6f6b4ea9d79c9c33ddd7c6b6ef764b">mutt_addr_is_user</a>(a))</div>
<div class="line"><span class="lineno"> 1349</span>      {</div>
<div class="line"><span class="lineno"> 1350</span>        <a class="code hl_function" href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a>(al, <a class="code hl_function" href="address_2address_8c.html#a8f8e4be1b71a169870ac10be5426af8d">mutt_addr_copy</a>(a));</div>
<div class="line"><span class="lineno"> 1351</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1352</span>      }</div>
<div class="line"><span class="lineno"> 1353</span>    }</div>
<div class="line"><span class="lineno"> 1354</span>  }</div>
<div class="line"><span class="lineno"> 1355</span> </div>
<div class="line"><span class="lineno"> 1356</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(al))</div>
<div class="line"><span class="lineno"> 1357</span>  {</div>
<div class="line"><span class="lineno"> 1358</span>    <a class="code hl_define" href="queue_8h.html#a16e5fc168e7f3494d4b1df54447d871e">TAILQ_FOREACH</a>(a, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, entries)</div>
<div class="line"><span class="lineno"> 1359</span>    {</div>
<div class="line"><span class="lineno"> 1360</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="alias_8c.html#a9d6f6b4ea9d79c9c33ddd7c6b6ef764b">mutt_addr_is_user</a>(a))</div>
<div class="line"><span class="lineno"> 1361</span>      {</div>
<div class="line"><span class="lineno"> 1362</span>        <a class="code hl_function" href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a>(al, <a class="code hl_function" href="address_2address_8c.html#a8f8e4be1b71a169870ac10be5426af8d">mutt_addr_copy</a>(a));</div>
<div class="line"><span class="lineno"> 1363</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1364</span>      }</div>
<div class="line"><span class="lineno"> 1365</span>    }</div>
<div class="line"><span class="lineno"> 1366</span>  }</div>
<div class="line"><span class="lineno"> 1367</span> </div>
<div class="line"><span class="lineno"> 1368</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(al))</div>
<div class="line"><span class="lineno"> 1369</span>  {</div>
<div class="line"><span class="lineno"> 1370</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *from = <a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 1371</span>    <span class="keywordflow">if</span> (from &amp;&amp; <a class="code hl_function" href="alias_8c.html#a9d6f6b4ea9d79c9c33ddd7c6b6ef764b">mutt_addr_is_user</a>(from))</div>
<div class="line"><span class="lineno"> 1372</span>    {</div>
<div class="line"><span class="lineno"> 1373</span>      <a class="code hl_function" href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a>(al, <a class="code hl_function" href="address_2address_8c.html#a8f8e4be1b71a169870ac10be5426af8d">mutt_addr_copy</a>(from));</div>
<div class="line"><span class="lineno"> 1374</span>    }</div>
<div class="line"><span class="lineno"> 1375</span>  }</div>
<div class="line"><span class="lineno"> 1376</span> </div>
<div class="line"><span class="lineno"> 1377</span>  <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(al))</div>
<div class="line"><span class="lineno"> 1378</span>  {</div>
<div class="line"><span class="lineno"> 1379</span>    <span class="comment">/* when $reverse_real_name is not set, clear the personal name so that it</span></div>
<div class="line"><span class="lineno"> 1380</span><span class="comment">     * may be set via a reply- or send-hook.  */</span></div>
<div class="line"><span class="lineno"> 1381</span> </div>
<div class="line"><span class="lineno"> 1382</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_reverse_real_name = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;reverse_real_name&quot;</span>);</div>
<div class="line"><span class="lineno"> 1383</span>    <span class="keywordflow">if</span> (!c_reverse_real_name)</div>
<div class="line"><span class="lineno"> 1384</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(al)-&gt;<a class="code hl_variable" href="structAddress.html#a01b32bc3153d06f852064f1cca3feb61">personal</a>);</div>
<div class="line"><span class="lineno"> 1385</span>  }</div>
<div class="line"><span class="lineno"> 1386</span>}</div>
</div><!-- fragment --><div id="dynsection-60" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-60-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-60-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-60-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ac5be3d670b1d7e5cddb605652e9aa859_cgraph.svg" width="350" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-61" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-61-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-61-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-61-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ac5be3d670b1d7e5cddb605652e9aa859_icgraph.svg" width="342" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a90907de4e46f3a56b2889b79a48c9011" name="a90907de4e46f3a56b2889b79a48c9011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90907de4e46f3a56b2889b79a48c9011">&#9670;&#160;</a></span>mutt_default_from()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structAddress.html">Address</a> * mutt_default_from </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a default 'from' <a class="el" href="structAddress.html" title="An email address.">Address</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Newly allocated <a class="el" href="structAddress.html" title="An email address.">Address</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01393">1393</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1394</span>{</div>
<div class="line"><span class="lineno"> 1395</span>  <span class="comment">/* Note: We let $from override $real_name here.</span></div>
<div class="line"><span class="lineno"> 1396</span><span class="comment">   *       Is this the right thing to do?</span></div>
<div class="line"><span class="lineno"> 1397</span><span class="comment">   */</span></div>
<div class="line"><span class="lineno"> 1398</span> </div>
<div class="line"><span class="lineno"> 1399</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *c_from = <a class="code hl_function" href="address_2config__type_8c.html#ae303ac83498043a651ec046b572bc707">cs_subset_address</a>(sub, <span class="stringliteral">&quot;from&quot;</span>);</div>
<div class="line"><span class="lineno"> 1400</span>  <span class="keywordflow">if</span> (c_from)</div>
<div class="line"><span class="lineno"> 1401</span>  {</div>
<div class="line"><span class="lineno"> 1402</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="address_2address_8c.html#a8f8e4be1b71a169870ac10be5426af8d">mutt_addr_copy</a>(c_from);</div>
<div class="line"><span class="lineno"> 1403</span>  }</div>
<div class="line"><span class="lineno"> 1404</span> </div>
<div class="line"><span class="lineno"> 1405</span>  <span class="keywordtype">char</span> domain[1024] = { 0 };</div>
<div class="line"><span class="lineno"> 1406</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="structAddress.html#a45cd47ee76ef04b63f55a0345c691fe8">mailbox</a> = <a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#a5c2d30a2f734f94412bd5b3a7367b981">username</a>;</div>
<div class="line"><span class="lineno"> 1407</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_use_domain = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;use_domain&quot;</span>);</div>
<div class="line"><span class="lineno"> 1408</span>  <span class="keywordflow">if</span> (c_use_domain)</div>
<div class="line"><span class="lineno"> 1409</span>  {</div>
<div class="line"><span class="lineno"> 1410</span>    snprintf(domain, <span class="keyword">sizeof</span>(domain), <span class="stringliteral">&quot;%s@%s&quot;</span>, <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#a5c2d30a2f734f94412bd5b3a7367b981">username</a>),</div>
<div class="line"><span class="lineno"> 1411</span>             <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(<a class="code hl_function" href="sendlib_8c.html#a448ec1abcfc24a2a3d61197ef604877d">mutt_fqdn</a>(<span class="keyword">true</span>, sub)));</div>
<div class="line"><span class="lineno"> 1412</span>    <a class="code hl_variable" href="structAddress.html#a45cd47ee76ef04b63f55a0345c691fe8">mailbox</a> = domain;</div>
<div class="line"><span class="lineno"> 1413</span>  }</div>
<div class="line"><span class="lineno"> 1414</span> </div>
<div class="line"><span class="lineno"> 1415</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="address_2address_8c.html#a0d8aef5de5f361ae50ad1c7d567fe46a">mutt_addr_create</a>(NULL, <a class="code hl_variable" href="structAddress.html#a45cd47ee76ef04b63f55a0345c691fe8">mailbox</a>);</div>
<div class="line"><span class="lineno"> 1416</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a0d8aef5de5f361ae50ad1c7d567fe46a"><div class="ttname"><a href="address_2address_8c.html#a0d8aef5de5f361ae50ad1c7d567fe46a">mutt_addr_create</a></div><div class="ttdeci">struct Address * mutt_addr_create(const char *personal, const char *mailbox)</div><div class="ttdoc">Create and populate a new Address.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00414">address.c:414</a></div></div>
<div class="ttc" id="aaddress_2config__type_8c_html_ae303ac83498043a651ec046b572bc707"><div class="ttname"><a href="address_2config__type_8c.html#ae303ac83498043a651ec046b572bc707">cs_subset_address</a></div><div class="ttdeci">const struct Address * cs_subset_address(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get an Address config item by name.</div><div class="ttdef"><b>Definition</b> <a href="address_2config__type_8c_source.html#l00286">config_type.c:286</a></div></div>
<div class="ttc" id="asendlib_8c_html_a448ec1abcfc24a2a3d61197ef604877d"><div class="ttname"><a href="sendlib_8c.html#a448ec1abcfc24a2a3d61197ef604877d">mutt_fqdn</a></div><div class="ttdeci">const char * mutt_fqdn(bool may_hide_host, const struct ConfigSubset *sub)</div><div class="ttdoc">Get the Fully-Qualified Domain Name.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00706">sendlib.c:706</a></div></div>
<div class="ttc" id="astructNeoMutt_html_a5c2d30a2f734f94412bd5b3a7367b981"><div class="ttname"><a href="structNeoMutt.html#a5c2d30a2f734f94412bd5b3a7367b981">NeoMutt::username</a></div><div class="ttdeci">char * username</div><div class="ttdoc">User&#39;s login name.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00053">neomutt.h:53</a></div></div>
</div><!-- fragment --><div id="dynsection-62" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-62-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-62-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-62-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a90907de4e46f3a56b2889b79a48c9011_cgraph.svg" width="492" height="251"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-63" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-63-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-63-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-63-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a90907de4e46f3a56b2889b79a48c9011_icgraph.svg" width="558" height="251"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a859ddbab5f9384328fd06bf9c18c02f2" name="a859ddbab5f9384328fd06bf9c18c02f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a859ddbab5f9384328fd06bf9c18c02f2">&#9670;&#160;</a></span>invoke_mta()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int invoke_mta </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01426">1426</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1427</span>{</div>
<div class="line"><span class="lineno"> 1428</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *tempfile = NULL;</div>
<div class="line"><span class="lineno"> 1429</span>  <span class="keywordtype">int</span> rc = -1;</div>
<div class="line"><span class="lineno"> 1430</span> </div>
<div class="line"><span class="lineno"> 1431</span>  <span class="comment">/* Write out the message in MIME form. */</span></div>
<div class="line"><span class="lineno"> 1432</span>  tempfile = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1433</span>  <a class="code hl_define" href="tmp_8h.html#a271a7828888985955df49205d7846a45">buf_mktemp</a>(tempfile);</div>
<div class="line"><span class="lineno"> 1434</span>  FILE *fp_tmp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tempfile), <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"><span class="lineno"> 1435</span>  <span class="keywordflow">if</span> (!fp_tmp)</div>
<div class="line"><span class="lineno"> 1436</span>    <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 1437</span> </div>
<div class="line"><span class="lineno"> 1438</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_write_bcc = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;write_bcc&quot;</span>);</div>
<div class="line"><span class="lineno"> 1439</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_smtp_url = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;smtp_url&quot;</span>);</div>
<div class="line"><span class="lineno"> 1440</span>  <span class="keywordflow">if</span> (c_smtp_url)</div>
<div class="line"><span class="lineno"> 1441</span>    <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(sub, <span class="stringliteral">&quot;write_bcc&quot;</span>, <span class="keyword">false</span>, NULL);</div>
<div class="line"><span class="lineno"> 1442</span> </div>
<div class="line"><span class="lineno"> 1443</span>  <a class="code hl_function" href="header_8c.html#a00c731e98afb40438296e6a0f47752e7">mutt_rfc822_write_header</a>(fp_tmp, e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, <a class="code hl_enumvalue" href="header_8h.html#a610db600447893b501a944c8e5dbb9f7ab8ca5468a3e97884fe52cfc76ff40fa8">MUTT_WRITE_HEADER_NORMAL</a>,</div>
<div class="line"><span class="lineno"> 1444</span>                           <span class="keyword">false</span>, <a class="code hl_function" href="crypt_8c.html#a52c65477f5b80ad3dc8028663653771d">mutt_should_hide_protected_subject</a>(e), sub);</div>
<div class="line"><span class="lineno"> 1445</span> </div>
<div class="line"><span class="lineno"> 1446</span>  <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(sub, <span class="stringliteral">&quot;write_bcc&quot;</span>, c_write_bcc, NULL);</div>
<div class="line"><span class="lineno"> 1447</span> </div>
<div class="line"><span class="lineno"> 1448</span>  fputc(<span class="charliteral">&#39;\n&#39;</span>, fp_tmp); <span class="comment">/* tie off the header. */</span></div>
<div class="line"><span class="lineno"> 1449</span> </div>
<div class="line"><span class="lineno"> 1450</span>  <span class="keywordflow">if</span> ((<a class="code hl_function" href="send_2body_8c.html#a833ceeb9577d06bdb2b888190bba83ff">mutt_write_mime_body</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, fp_tmp, sub) == -1))</div>
<div class="line"><span class="lineno"> 1451</span>    <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 1452</span> </div>
<div class="line"><span class="lineno"> 1453</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp_tmp) != 0)</div>
<div class="line"><span class="lineno"> 1454</span>  {</div>
<div class="line"><span class="lineno"> 1455</span>    <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tempfile));</div>
<div class="line"><span class="lineno"> 1456</span>    unlink(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tempfile));</div>
<div class="line"><span class="lineno"> 1457</span>    <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 1458</span>  }</div>
<div class="line"><span class="lineno"> 1459</span> </div>
<div class="line"><span class="lineno"> 1460</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a>)</div>
<div class="line"><span class="lineno"> 1461</span>    <span class="keywordflow">goto</span> sendmail;</div>
<div class="line"><span class="lineno"> 1462</span> </div>
<div class="line"><span class="lineno"> 1463</span>  <span class="keywordflow">if</span> (c_smtp_url)</div>
<div class="line"><span class="lineno"> 1464</span>  {</div>
<div class="line"><span class="lineno"> 1465</span>    rc = <a class="code hl_function" href="smtp_8c.html#ae59289bca751588d49e12337981f375d">mutt_smtp_send</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, &amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, &amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#aad427832f4ae422f1b16d0896c1d3af6">bcc</a>,</div>
<div class="line"><span class="lineno"> 1466</span>                        <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tempfile), (e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> == <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a7c05065f79f9ed33904677a211ec3466">ENC_8BIT</a>), sub);</div>
<div class="line"><span class="lineno"> 1467</span>    <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 1468</span>  }</div>
<div class="line"><span class="lineno"> 1469</span> </div>
<div class="line"><span class="lineno"> 1470</span>sendmail:</div>
<div class="line"><span class="lineno"> 1471</span>  rc = <a class="code hl_function" href="sendmail_8c.html#a5562a863571c41379b43fd780735776c">mutt_invoke_sendmail</a>(m, &amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, &amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, &amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#aad427832f4ae422f1b16d0896c1d3af6">bcc</a>,</div>
<div class="line"><span class="lineno"> 1472</span>                            <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tempfile), (e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> == <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a7c05065f79f9ed33904677a211ec3466">ENC_8BIT</a>), sub);</div>
<div class="line"><span class="lineno"> 1473</span>cleanup:</div>
<div class="line"><span class="lineno"> 1474</span>  <span class="keywordflow">if</span> (fp_tmp)</div>
<div class="line"><span class="lineno"> 1475</span>  {</div>
<div class="line"><span class="lineno"> 1476</span>    <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp_tmp);</div>
<div class="line"><span class="lineno"> 1477</span>    unlink(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tempfile));</div>
<div class="line"><span class="lineno"> 1478</span>  }</div>
<div class="line"><span class="lineno"> 1479</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;tempfile);</div>
<div class="line"><span class="lineno"> 1480</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1481</span>}</div>
<div class="ttc" id="acrypt_8c_html_a52c65477f5b80ad3dc8028663653771d"><div class="ttname"><a href="crypt_8c.html#a52c65477f5b80ad3dc8028663653771d">mutt_should_hide_protected_subject</a></div><div class="ttdeci">bool mutt_should_hide_protected_subject(struct Email *e)</div><div class="ttdoc">Should NeoMutt hide the protected subject?</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l01100">crypt.c:1100</a></div></div>
<div class="ttc" id="afile_8h_html_a9fa358d76519cb6bc8ffca5850976d46"><div class="ttname"><a href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a></div><div class="ttdeci">#define mutt_file_fopen(PATH, MODE)</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00138">file.h:138</a></div></div>
<div class="ttc" id="aheader_8c_html_a00c731e98afb40438296e6a0f47752e7"><div class="ttname"><a href="header_8c.html#a00c731e98afb40438296e6a0f47752e7">mutt_rfc822_write_header</a></div><div class="ttdeci">int mutt_rfc822_write_header(FILE *fp, struct Envelope *env, struct Body *b, enum MuttWriteHeaderMode mode, bool privacy, bool hide_protected_subject, struct ConfigSubset *sub)</div><div class="ttdoc">Write out one RFC822 header line.</div><div class="ttdef"><b>Definition</b> <a href="header_8c_source.html#l00577">header.c:577</a></div></div>
<div class="ttc" id="aheader_8h_html_a610db600447893b501a944c8e5dbb9f7ab8ca5468a3e97884fe52cfc76ff40fa8"><div class="ttname"><a href="header_8h.html#a610db600447893b501a944c8e5dbb9f7ab8ca5468a3e97884fe52cfc76ff40fa8">MUTT_WRITE_HEADER_NORMAL</a></div><div class="ttdeci">@ MUTT_WRITE_HEADER_NORMAL</div><div class="ttdoc">A normal Email, write full header + MIME headers.</div><div class="ttdef"><b>Definition</b> <a href="header_8h_source.html#l00040">header.h:40</a></div></div>
<div class="ttc" id="amime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61a7c05065f79f9ed33904677a211ec3466"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a7c05065f79f9ed33904677a211ec3466">ENC_8BIT</a></div><div class="ttdeci">@ ENC_8BIT</div><div class="ttdoc">8-bit text</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00050">mime.h:50</a></div></div>
<div class="ttc" id="asend_2body_8c_html_a833ceeb9577d06bdb2b888190bba83ff"><div class="ttname"><a href="send_2body_8c.html#a833ceeb9577d06bdb2b888190bba83ff">mutt_write_mime_body</a></div><div class="ttdeci">int mutt_write_mime_body(struct Body *b, FILE *fp, struct ConfigSubset *sub)</div><div class="ttdoc">Write a MIME part.</div><div class="ttdef"><b>Definition</b> <a href="send_2body_8c_source.html#l00300">body.c:300</a></div></div>
<div class="ttc" id="asendmail_8c_html_a5562a863571c41379b43fd780735776c"><div class="ttname"><a href="sendmail_8c.html#a5562a863571c41379b43fd780735776c">mutt_invoke_sendmail</a></div><div class="ttdeci">int mutt_invoke_sendmail(struct Mailbox *m, struct AddressList *from, struct AddressList *to, struct AddressList *cc, struct AddressList *bcc, const char *msg, bool eightbit, struct ConfigSubset *sub)</div><div class="ttdoc">Run sendmail.</div><div class="ttdef"><b>Definition</b> <a href="sendmail_8c_source.html#l00298">sendmail.c:298</a></div></div>
<div class="ttc" id="asmtp_8c_html_ae59289bca751588d49e12337981f375d"><div class="ttname"><a href="smtp_8c.html#ae59289bca751588d49e12337981f375d">mutt_smtp_send</a></div><div class="ttdeci">int mutt_smtp_send(const struct AddressList *from, const struct AddressList *to, const struct AddressList *cc, const struct AddressList *bcc, const char *msgfile, bool eightbit, struct ConfigSubset *sub)</div><div class="ttdoc">Send a message using SMTP.</div><div class="ttdef"><b>Definition</b> <a href="smtp_8c_source.html#l01099">smtp.c:1099</a></div></div>
<div class="ttc" id="astructBody_html_ad2f05b8ff24813de41988e63de5d6a31"><div class="ttname"><a href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">Body::encoding</a></div><div class="ttdeci">unsigned int encoding</div><div class="ttdoc">content-transfer-encoding, ContentEncoding</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00041">body.h:41</a></div></div>
<div class="ttc" id="asubset_8c_html_a6ee598a96defed645b11cad6e6cb6512"><div class="ttname"><a href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a></div><div class="ttdeci">int cs_subset_str_native_set(const struct ConfigSubset *sub, const char *name, intptr_t value, struct Buffer *err)</div><div class="ttdoc">Natively set the value of a string config item.</div><div class="ttdef"><b>Definition</b> <a href="subset_8c_source.html#l00303">subset.c:303</a></div></div>
<div class="ttc" id="atmp_8h_html_a271a7828888985955df49205d7846a45"><div class="ttname"><a href="tmp_8h.html#a271a7828888985955df49205d7846a45">buf_mktemp</a></div><div class="ttdeci">#define buf_mktemp(buf)</div><div class="ttdef"><b>Definition</b> <a href="tmp_8h_source.html#l00033">tmp.h:33</a></div></div>
</div><!-- fragment --><div id="dynsection-64" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-64-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-64-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-64-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a859ddbab5f9384328fd06bf9c18c02f2_cgraph.svg" width="524" height="576"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-65" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-65-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-65-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-65-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a859ddbab5f9384328fd06bf9c18c02f2_icgraph.svg" width="300" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1ba9ce78a67261e872a264bc956ef857" name="a1ba9ce78a67261e872a264bc956ef857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ba9ce78a67261e872a264bc956ef857">&#9670;&#160;</a></span>mutt_encode_descriptions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_encode_descriptions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>recurse</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RFC2047 encode the content-descriptions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> of email </td></tr>
    <tr><td class="paramname">recurse</td><td>If true, encode children parts </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01489">1489</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1490</span>{</div>
<div class="line"><span class="lineno"> 1491</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structSlist.html">Slist</a> *<span class="keyword">const</span> c_send_charset = <a class="code hl_function" href="config_2helpers_8c.html#a72ee0a5d0c0632c4fe911ef5aa6a9b8b">cs_subset_slist</a>(sub, <span class="stringliteral">&quot;send_charset&quot;</span>);</div>
<div class="line"><span class="lineno"> 1492</span>  <span class="keywordflow">for</span> (<span class="keyword">struct</span> <a class="code hl_struct" href="structBody.html">Body</a> *t = b; t; t = t-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1493</span>  {</div>
<div class="line"><span class="lineno"> 1494</span>    <span class="keywordflow">if</span> (t-&gt;description)</div>
<div class="line"><span class="lineno"> 1495</span>    {</div>
<div class="line"><span class="lineno"> 1496</span>      <a class="code hl_function" href="rfc2047_8c.html#a61043d0660090027414b220222dbf90b">rfc2047_encode</a>(&amp;t-&gt;description, NULL, <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;Content-Description:&quot;</span>), c_send_charset);</div>
<div class="line"><span class="lineno"> 1497</span>    }</div>
<div class="line"><span class="lineno"> 1498</span>    <span class="keywordflow">if</span> (recurse &amp;&amp; t-&gt;parts)</div>
<div class="line"><span class="lineno"> 1499</span>      <a class="code hl_function" href="#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a>(t-&gt;parts, recurse, sub);</div>
<div class="line"><span class="lineno"> 1500</span>  }</div>
<div class="line"><span class="lineno"> 1501</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_a72ee0a5d0c0632c4fe911ef5aa6a9b8b"><div class="ttname"><a href="config_2helpers_8c.html#a72ee0a5d0c0632c4fe911ef5aa6a9b8b">cs_subset_slist</a></div><div class="ttdeci">const struct Slist * cs_subset_slist(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string-list config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00242">helpers.c:242</a></div></div>
<div class="ttc" id="arfc2047_8c_html_a61043d0660090027414b220222dbf90b"><div class="ttname"><a href="rfc2047_8c.html#a61043d0660090027414b220222dbf90b">rfc2047_encode</a></div><div class="ttdeci">void rfc2047_encode(char **pd, const char *specials, int col, const struct Slist *charsets)</div><div class="ttdoc">RFC-2047-encode a string.</div><div class="ttdef"><b>Definition</b> <a href="rfc2047_8c_source.html#l00628">rfc2047.c:628</a></div></div>
<div class="ttc" id="asend_8c_html_a1ba9ce78a67261e872a264bc956ef857"><div class="ttname"><a href="#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a></div><div class="ttdeci">void mutt_encode_descriptions(struct Body *b, bool recurse, struct ConfigSubset *sub)</div><div class="ttdoc">RFC2047 encode the content-descriptions.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01489">send.c:1489</a></div></div>
<div class="ttc" id="astructSlist_html"><div class="ttname"><a href="structSlist.html">Slist</a></div><div class="ttdoc">String list.</div><div class="ttdef"><b>Definition</b> <a href="slist_8h_source.html#l00036">slist.h:37</a></div></div>
</div><!-- fragment --><div id="dynsection-66" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-66-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-66-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-66-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a1ba9ce78a67261e872a264bc956ef857_cgraph.svg" width="366" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-67" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-67-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-67-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-67-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a1ba9ce78a67261e872a264bc956ef857_icgraph.svg" width="680" height="116"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af1b54154700865964598299ed1cf9a6a" name="af1b54154700865964598299ed1cf9a6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1b54154700865964598299ed1cf9a6a">&#9670;&#160;</a></span>decode_descriptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void decode_descriptions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>RFC2047 decode them in case of an error. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>MIME parts to decode </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01507">1507</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1508</span>{</div>
<div class="line"><span class="lineno"> 1509</span>  <span class="keywordflow">for</span> (<span class="keyword">struct</span> <a class="code hl_struct" href="structBody.html">Body</a> *t = b; t; t = t-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1510</span>  {</div>
<div class="line"><span class="lineno"> 1511</span>    <span class="keywordflow">if</span> (t-&gt;description)</div>
<div class="line"><span class="lineno"> 1512</span>    {</div>
<div class="line"><span class="lineno"> 1513</span>      <a class="code hl_function" href="rfc2047_8c.html#a89c57c82465740567f73641c9397d760">rfc2047_decode</a>(&amp;t-&gt;description);</div>
<div class="line"><span class="lineno"> 1514</span>    }</div>
<div class="line"><span class="lineno"> 1515</span>    <span class="keywordflow">if</span> (t-&gt;parts)</div>
<div class="line"><span class="lineno"> 1516</span>      <a class="code hl_function" href="#af1b54154700865964598299ed1cf9a6a">decode_descriptions</a>(t-&gt;parts);</div>
<div class="line"><span class="lineno"> 1517</span>  }</div>
<div class="line"><span class="lineno"> 1518</span>}</div>
<div class="ttc" id="arfc2047_8c_html_a89c57c82465740567f73641c9397d760"><div class="ttname"><a href="rfc2047_8c.html#a89c57c82465740567f73641c9397d760">rfc2047_decode</a></div><div class="ttdeci">void rfc2047_decode(char **pd)</div><div class="ttdoc">Decode any RFC2047-encoded header fields.</div><div class="ttdef"><b>Definition</b> <a href="rfc2047_8c_source.html#l00661">rfc2047.c:661</a></div></div>
<div class="ttc" id="asend_8c_html_af1b54154700865964598299ed1cf9a6a"><div class="ttname"><a href="#af1b54154700865964598299ed1cf9a6a">decode_descriptions</a></div><div class="ttdeci">static void decode_descriptions(struct Body *b)</div><div class="ttdoc">RFC2047 decode them in case of an error.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01507">send.c:1507</a></div></div>
</div><!-- fragment --><div id="dynsection-68" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-68-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-68-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-68-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_af1b54154700865964598299ed1cf9a6a_cgraph.svg" width="330" height="64"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-69" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-69-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-69-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-69-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_af1b54154700865964598299ed1cf9a6a_icgraph.svg" width="546" height="90"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad5e73f6a253107a7f55ee7388fbbf92f" name="ad5e73f6a253107a7f55ee7388fbbf92f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5e73f6a253107a7f55ee7388fbbf92f">&#9670;&#160;</a></span>fix_end_of_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fix_end_of_file </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ensure a file ends with a linefeed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Name of file to fix </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01524">1524</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1525</span>{</div>
<div class="line"><span class="lineno"> 1526</span>  FILE *fp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(data, <span class="stringliteral">&quot;a+&quot;</span>);</div>
<div class="line"><span class="lineno"> 1527</span>  <span class="keywordflow">if</span> (!fp)</div>
<div class="line"><span class="lineno"> 1528</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1529</span> </div>
<div class="line"><span class="lineno"> 1530</span>  <span class="keywordflow">if</span> ((<a class="code hl_function" href="file_8c.html#a4cffa4f503de3736198956ebed431f7e">mutt_file_get_size_fp</a>(fp) &gt; 0) &amp;&amp; <a class="code hl_function" href="file_8c.html#a6b60cb2044041374689e6e6641c5cc05">mutt_file_seek</a>(fp, -1, SEEK_END))</div>
<div class="line"><span class="lineno"> 1531</span>  {</div>
<div class="line"><span class="lineno"> 1532</span>    <span class="keywordtype">int</span> c = fgetc(fp);</div>
<div class="line"><span class="lineno"> 1533</span>    <span class="keywordflow">if</span> (c != <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><span class="lineno"> 1534</span>      fputc(<span class="charliteral">&#39;\n&#39;</span>, fp);</div>
<div class="line"><span class="lineno"> 1535</span>  }</div>
<div class="line"><span class="lineno"> 1536</span>  <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp);</div>
<div class="line"><span class="lineno"> 1537</span>}</div>
<div class="ttc" id="afile_8c_html_a4cffa4f503de3736198956ebed431f7e"><div class="ttname"><a href="file_8c.html#a4cffa4f503de3736198956ebed431f7e">mutt_file_get_size_fp</a></div><div class="ttdeci">long mutt_file_get_size_fp(FILE *fp)</div><div class="ttdoc">Get the size of a file.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l01430">file.c:1430</a></div></div>
<div class="ttc" id="afile_8c_html_a6b60cb2044041374689e6e6641c5cc05"><div class="ttname"><a href="file_8c.html#a6b60cb2044041374689e6e6641c5cc05">mutt_file_seek</a></div><div class="ttdeci">bool mutt_file_seek(FILE *fp, LOFF_T offset, int whence)</div><div class="ttdoc">Wrapper for fseeko with error handling.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l00655">file.c:655</a></div></div>
</div><!-- fragment --><div id="dynsection-70" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-70-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-70-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-70-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ad5e73f6a253107a7f55ee7388fbbf92f_cgraph.svg" width="320" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-71" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-71-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-71-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-71-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ad5e73f6a253107a7f55ee7388fbbf92f_icgraph.svg" width="318" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a58823b3164da72a6429664e1091d12a8" name="a58823b3164da72a6429664e1091d12a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58823b3164da72a6429664e1091d12a8">&#9670;&#160;</a></span>mutt_resend_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_resend_message </td>
          <td>(</td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e_cur</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resend an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>File containing email </td></tr>
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e_cur</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> to resend </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was successfully sent </td></tr>
    <tr><td class="paramname">-1</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was aborted or an error occurred </td></tr>
    <tr><td class="paramname">1</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was postponed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01549">1549</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1551</span>{</div>
<div class="line"><span class="lineno"> 1552</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e_new = <a class="code hl_function" href="email_2email_8c.html#ab53e91414f24cecdc75fcfea6f1824e3">email_new</a>();</div>
<div class="line"><span class="lineno"> 1553</span> </div>
<div class="line"><span class="lineno"> 1554</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="postpone_2lib_8h.html#aad14aaca518d6c005ec318f14114d5ec">mutt_prepare_template</a>(fp, m, e_new, e_cur, <span class="keyword">true</span>) &lt; 0)</div>
<div class="line"><span class="lineno"> 1555</span>  {</div>
<div class="line"><span class="lineno"> 1556</span>    <a class="code hl_function" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;e_new);</div>
<div class="line"><span class="lineno"> 1557</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1558</span>  }</div>
<div class="line"><span class="lineno"> 1559</span> </div>
<div class="line"><span class="lineno"> 1560</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a>)</div>
<div class="line"><span class="lineno"> 1561</span>  {</div>
<div class="line"><span class="lineno"> 1562</span>    <span class="comment">/* mutt_prepare_template doesn&#39;t always flip on an application bit.</span></div>
<div class="line"><span class="lineno"> 1563</span><span class="comment">     * so fix that here */</span></div>
<div class="line"><span class="lineno"> 1564</span>    <span class="keywordflow">if</span> (!(e_new-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)))</div>
<div class="line"><span class="lineno"> 1565</span>    {</div>
<div class="line"><span class="lineno"> 1566</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_smime_is_default = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;smime_is_default&quot;</span>);</div>
<div class="line"><span class="lineno"> 1567</span>      <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>) != 0) &amp;&amp; c_smime_is_default)</div>
<div class="line"><span class="lineno"> 1568</span>        e_new-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>;</div>
<div class="line"><span class="lineno"> 1569</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)</div>
<div class="line"><span class="lineno"> 1570</span>        e_new-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>;</div>
<div class="line"><span class="lineno"> 1571</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1572</span>        e_new-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>;</div>
<div class="line"><span class="lineno"> 1573</span>    }</div>
<div class="line"><span class="lineno"> 1574</span> </div>
<div class="line"><span class="lineno"> 1575</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_opportunistic_encrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_opportunistic_encrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 1576</span>    <span class="keywordflow">if</span> (c_crypt_opportunistic_encrypt)</div>
<div class="line"><span class="lineno"> 1577</span>    {</div>
<div class="line"><span class="lineno"> 1578</span>      e_new-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a2fb0b0aa796d8d79a746001d09c2a2c7">SEC_OPPENCRYPT</a>;</div>
<div class="line"><span class="lineno"> 1579</span>      <a class="code hl_function" href="crypt_8c.html#a2afe38b474061773d69624018621ff1e">crypt_opportunistic_encrypt</a>(e_new);</div>
<div class="line"><span class="lineno"> 1580</span>    }</div>
<div class="line"><span class="lineno"> 1581</span>  }</div>
<div class="line"><span class="lineno"> 1582</span> </div>
<div class="line"><span class="lineno"> 1583</span>  <span class="keyword">struct </span>EmailArray ea = <a class="code hl_define" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div>
<div class="line"><span class="lineno"> 1584</span>  <a class="code hl_define" href="array_8h.html#a4f570f2382025383e4b2cc46ede6ebd0">ARRAY_ADD</a>(&amp;ea, e_cur);</div>
<div class="line"><span class="lineno"> 1585</span>  <span class="keywordtype">int</span> rc = <a class="code hl_function" href="#ad9c2899c7c3a76d2ce3b911221705a30">mutt_send_message</a>(<a class="code hl_define" href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>, e_new, NULL, m, &amp;ea, sub);</div>
<div class="line"><span class="lineno"> 1586</span>  <a class="code hl_define" href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a>(&amp;ea);</div>
<div class="line"><span class="lineno"> 1587</span> </div>
<div class="line"><span class="lineno"> 1588</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1589</span>}</div>
<div class="ttc" id="aarray_8h_html_a4f570f2382025383e4b2cc46ede6ebd0"><div class="ttname"><a href="array_8h.html#a4f570f2382025383e4b2cc46ede6ebd0">ARRAY_ADD</a></div><div class="ttdeci">#define ARRAY_ADD(head, elem)</div><div class="ttdoc">Add an element at the end of the array.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00156">array.h:156</a></div></div>
<div class="ttc" id="aarray_8h_html_aaa8805bd90a2015d8f5eb0fe3bb13b3f"><div class="ttname"><a href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a></div><div class="ttdeci">#define ARRAY_FREE(head)</div><div class="ttdoc">Release all memory.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00204">array.h:204</a></div></div>
<div class="ttc" id="aarray_8h_html_af50a4967d27a0531a1b10a23fc22fe05"><div class="ttname"><a href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a></div><div class="ttdeci">#define ARRAY_HEAD_INITIALIZER</div><div class="ttdoc">Static initializer for arrays.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00058">array.h:58</a></div></div>
<div class="ttc" id="acrypt_8c_html_a2afe38b474061773d69624018621ff1e"><div class="ttname"><a href="crypt_8c.html#a2afe38b474061773d69624018621ff1e">crypt_opportunistic_encrypt</a></div><div class="ttdeci">void crypt_opportunistic_encrypt(struct Email *e)</div><div class="ttdoc">Can all recipients be determined.</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l01045">crypt.c:1045</a></div></div>
<div class="ttc" id="aemail_2email_8c_html_ab53e91414f24cecdc75fcfea6f1824e3"><div class="ttname"><a href="email_2email_8c.html#ab53e91414f24cecdc75fcfea6f1824e3">email_new</a></div><div class="ttdeci">struct Email * email_new(void)</div><div class="ttdoc">Create a new Email.</div><div class="ttdef"><b>Definition</b> <a href="email_2email_8c_source.html#l00077">email.c:77</a></div></div>
<div class="ttc" id="aemail_2email_8c_html_ae9f719d3fc31d00b92bcf9f77d56ee67"><div class="ttname"><a href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a></div><div class="ttdeci">void email_free(struct Email **ptr)</div><div class="ttdoc">Free an Email.</div><div class="ttdef"><b>Definition</b> <a href="email_2email_8c_source.html#l00046">email.c:46</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a2fb0b0aa796d8d79a746001d09c2a2c7"><div class="ttname"><a href="ncrypt_2lib_8h.html#a2fb0b0aa796d8d79a746001d09c2a2c7">SEC_OPPENCRYPT</a></div><div class="ttdeci">#define SEC_OPPENCRYPT</div><div class="ttdoc">Opportunistic encrypt mode.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00092">lib.h:92</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a798dfac1e8839ca89375b4ec62b3eff2"><div class="ttname"><a href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a></div><div class="ttdeci">#define APPLICATION_SMIME</div><div class="ttdoc">Use SMIME to encrypt/sign.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00097">lib.h:97</a></div></div>
<div class="ttc" id="apostpone_2lib_8h_html_aad14aaca518d6c005ec318f14114d5ec"><div class="ttname"><a href="postpone_2lib_8h.html#aad14aaca518d6c005ec318f14114d5ec">mutt_prepare_template</a></div><div class="ttdeci">int mutt_prepare_template(FILE *fp, struct Mailbox *m, struct Email *e_new, struct Email *e, bool resend)</div><div class="ttdoc">Prepare a message template.</div><div class="ttdef"><b>Definition</b> <a href="postpone_8c_source.html#l00487">postpone.c:487</a></div></div>
<div class="ttc" id="asend_8c_html_ad9c2899c7c3a76d2ce3b911221705a30"><div class="ttname"><a href="#ad9c2899c7c3a76d2ce3b911221705a30">mutt_send_message</a></div><div class="ttdeci">int mutt_send_message(SendFlags flags, struct Email *e_templ, const char *tempfile, struct Mailbox *m, struct EmailArray *ea, struct ConfigSubset *sub)</div><div class="ttdoc">Send an email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l02034">send.c:2034</a></div></div>
<div class="ttc" id="asend_8h_html_abeb38906954f30b89ad58ebbf95ac2b0"><div class="ttname"><a href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a></div><div class="ttdeci">#define SEND_RESEND</div><div class="ttdoc">Reply using the current email as a template.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00049">send.h:49</a></div></div>
</div><!-- fragment --><div id="dynsection-72" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-72-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-72-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-72-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a58823b3164da72a6429664e1091d12a8_cgraph.svg" width="739" height="320"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-73" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-73-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-73-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-73-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a58823b3164da72a6429664e1091d12a8_icgraph.svg" width="364" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a19cc8b134c97bc3752c778d8b4977e8c" name="a19cc8b134c97bc3752c778d8b4977e8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19cc8b134c97bc3752c778d8b4977e8c">&#9670;&#160;</a></span>is_reply()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_reply </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>reply</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>orig</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is one email a reply to another? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reply</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> to test </td></tr>
    <tr><td class="paramname">orig</td><td>Original email </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>It is a reply </td></tr>
    <tr><td class="paramname">false</td><td>It is not a reply </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01598">1598</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1599</span>{</div>
<div class="line"><span class="lineno"> 1600</span>  <span class="keywordflow">if</span> (!reply || !reply-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a> || !orig || !orig-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>)</div>
<div class="line"><span class="lineno"> 1601</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1602</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="list_8c.html#a4dfda7348290a9903470e7f135fc1ae4">mutt_list_find</a>(&amp;orig-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>, reply-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>) ||</div>
<div class="line"><span class="lineno"> 1603</span>         <a class="code hl_function" href="list_8c.html#a4dfda7348290a9903470e7f135fc1ae4">mutt_list_find</a>(&amp;orig-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a9ae6d450b2f012c37d3350f4305fbb90">in_reply_to</a>, reply-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>);</div>
<div class="line"><span class="lineno"> 1604</span>}</div>
<div class="ttc" id="alist_8c_html_a4dfda7348290a9903470e7f135fc1ae4"><div class="ttname"><a href="list_8c.html#a4dfda7348290a9903470e7f135fc1ae4">mutt_list_find</a></div><div class="ttdeci">struct ListNode * mutt_list_find(const struct ListHead *h, const char *data)</div><div class="ttdoc">Find a string in a List.</div><div class="ttdef"><b>Definition</b> <a href="list_8c_source.html#l00103">list.c:103</a></div></div>
</div><!-- fragment --><div id="dynsection-74" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-74-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-74-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-74-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a19cc8b134c97bc3752c778d8b4977e8c_cgraph.svg" width="231" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-75" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-75-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-75-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-75-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a19cc8b134c97bc3752c778d8b4977e8c_icgraph.svg" width="275" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad829e8c88d7630a8a6ed719378dd4570" name="ad829e8c88d7630a8a6ed719378dd4570"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad829e8c88d7630a8a6ed719378dd4570">&#9670;&#160;</a></span>search_attach_keyword()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool search_attach_keyword </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Search an email for 'attachment' keywords. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Filename </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The regex matches in the email</td></tr>
  </table>
  </dd>
</dl>
<p>Search an email for the regex in $abort_noattach_regex. A match might indicate that the user should have attached something.</p>
<dl class="section note"><dt>Note</dt><dd>Quoted lines (as defined by $quote_regex) are ignored </dd></dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01617">1617</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1618</span>{</div>
<div class="line"><span class="lineno"> 1619</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structRegex.html">Regex</a> *c_abort_noattach_regex = <a class="code hl_function" href="config_2helpers_8c.html#a1c788f1dbe7b04cec7721fc1c7680b48">cs_subset_regex</a>(sub, <span class="stringliteral">&quot;abort_noattach_regex&quot;</span>);</div>
<div class="line"><span class="lineno"> 1620</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structRegex.html">Regex</a> *c_quote_regex = <a class="code hl_function" href="config_2helpers_8c.html#a1c788f1dbe7b04cec7721fc1c7680b48">cs_subset_regex</a>(sub, <span class="stringliteral">&quot;quote_regex&quot;</span>);</div>
<div class="line"><span class="lineno"> 1621</span> </div>
<div class="line"><span class="lineno"> 1622</span>  <span class="comment">/* Search for the regex in `$abort_noattach_regex` within a file */</span></div>
<div class="line"><span class="lineno"> 1623</span>  <span class="keywordflow">if</span> (!c_abort_noattach_regex || !c_abort_noattach_regex-&gt;<a class="code hl_variable" href="structRegex.html#af9ccc25da6324c9055e53966abe9a7b3">regex</a> ||</div>
<div class="line"><span class="lineno"> 1624</span>      !c_quote_regex || !c_quote_regex-&gt;<a class="code hl_variable" href="structRegex.html#af9ccc25da6324c9055e53966abe9a7b3">regex</a>)</div>
<div class="line"><span class="lineno"> 1625</span>  {</div>
<div class="line"><span class="lineno"> 1626</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1627</span>  }</div>
<div class="line"><span class="lineno"> 1628</span> </div>
<div class="line"><span class="lineno"> 1629</span>  FILE *fp_att = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(filename, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno"> 1630</span>  <span class="keywordflow">if</span> (!fp_att)</div>
<div class="line"><span class="lineno"> 1631</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1632</span> </div>
<div class="line"><span class="lineno"> 1633</span>  <span class="keywordtype">char</span> *inputline = <a class="code hl_define" href="memory_8h.html#af997cb3719dc7abbeabae655d0ee1b9e">MUTT_MEM_MALLOC</a>(1024, <span class="keywordtype">char</span>);</div>
<div class="line"><span class="lineno"> 1634</span>  <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1635</span>  <span class="keywordflow">while</span> (!feof(fp_att) &amp;&amp; fgets(inputline, 1024, fp_att))</div>
<div class="line"><span class="lineno"> 1636</span>  {</div>
<div class="line"><span class="lineno"> 1637</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="display_8c.html#a2e899f2d711d53f6e97e83dea8aca151">mutt_is_quote_line</a>(inputline, NULL) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1638</span>        <a class="code hl_function" href="mutt_2regex_8c.html#ad25947e610db74945537b99edf428982">mutt_regex_match</a>(c_abort_noattach_regex, inputline))</div>
<div class="line"><span class="lineno"> 1639</span>    {</div>
<div class="line"><span class="lineno"> 1640</span>      found = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1641</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1642</span>    }</div>
<div class="line"><span class="lineno"> 1643</span>  }</div>
<div class="line"><span class="lineno"> 1644</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;inputline);</div>
<div class="line"><span class="lineno"> 1645</span>  <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp_att);</div>
<div class="line"><span class="lineno"> 1646</span>  <span class="keywordflow">return</span> found;</div>
<div class="line"><span class="lineno"> 1647</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_a1c788f1dbe7b04cec7721fc1c7680b48"><div class="ttname"><a href="config_2helpers_8c.html#a1c788f1dbe7b04cec7721fc1c7680b48">cs_subset_regex</a></div><div class="ttdeci">const struct Regex * cs_subset_regex(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a regex config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00217">helpers.c:217</a></div></div>
<div class="ttc" id="adisplay_8c_html_a2e899f2d711d53f6e97e83dea8aca151"><div class="ttname"><a href="display_8c.html#a2e899f2d711d53f6e97e83dea8aca151">mutt_is_quote_line</a></div><div class="ttdeci">bool mutt_is_quote_line(char *line, regmatch_t *pmatch)</div><div class="ttdoc">Is a line of message text a quote?</div><div class="ttdef"><b>Definition</b> <a href="display_8c_source.html#l00322">display.c:322</a></div></div>
<div class="ttc" id="amemory_8h_html_af997cb3719dc7abbeabae655d0ee1b9e"><div class="ttname"><a href="memory_8h.html#af997cb3719dc7abbeabae655d0ee1b9e">MUTT_MEM_MALLOC</a></div><div class="ttdeci">#define MUTT_MEM_MALLOC(n, type)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00048">memory.h:48</a></div></div>
<div class="ttc" id="amutt_2regex_8c_html_ad25947e610db74945537b99edf428982"><div class="ttname"><a href="mutt_2regex_8c.html#ad25947e610db74945537b99edf428982">mutt_regex_match</a></div><div class="ttdeci">bool mutt_regex_match(const struct Regex *regex, const char *str)</div><div class="ttdoc">Shorthand to mutt_regex_capture()</div><div class="ttdef"><b>Definition</b> <a href="mutt_2regex_8c_source.html#l00613">regex.c:613</a></div></div>
<div class="ttc" id="astructRegex_html"><div class="ttname"><a href="structRegex.html">Regex</a></div><div class="ttdoc">Cached regular expression.</div><div class="ttdef"><b>Definition</b> <a href="regex3_8h_source.html#l00085">regex3.h:86</a></div></div>
<div class="ttc" id="astructRegex_html_af9ccc25da6324c9055e53966abe9a7b3"><div class="ttname"><a href="structRegex.html#af9ccc25da6324c9055e53966abe9a7b3">Regex::regex</a></div><div class="ttdeci">regex_t * regex</div><div class="ttdoc">compiled expression</div><div class="ttdef"><b>Definition</b> <a href="regex3_8h_source.html#l00088">regex3.h:88</a></div></div>
</div><!-- fragment --><div id="dynsection-76" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-76-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-76-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-76-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ad829e8c88d7630a8a6ed719378dd4570_cgraph.svg" width="530" height="119"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-77" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-77-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-77-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-77-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ad829e8c88d7630a8a6ed719378dd4570_icgraph.svg" width="438" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a255efc8a4a366c3de07d48da23d03a32" name="a255efc8a4a366c3de07d48da23d03a32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a255efc8a4a366c3de07d48da23d03a32">&#9670;&#160;</a></span>save_fcc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int save_fcc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBuffer.html">Buffer</a> *</td>          <td class="paramname"><span class="paramname"><em>fcc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>clear_content</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>pgpkeylist</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>finalpath</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save an <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> to a 'sent mail' folder. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Current <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> to save </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fcc</td><td><a class="el" href="structFolder.html" title="A folder/dir in the browser.">Folder</a> to save to (can be comma-separated list) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">clear_content</td><td>Cleartext content of <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pgpkeylist</td><td>List of pgp keys </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Send mode, see <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506" title="Flags for mutt_send_message(), e.g. SEND_REPLY.">SendFlags</a> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">finalpath</td><td>Path of final folder </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01662">1662</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1665</span>{</div>
<div class="line"><span class="lineno"> 1666</span>  <span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><span class="lineno"> 1667</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *save_content = NULL;</div>
<div class="line"><span class="lineno"> 1668</span> </div>
<div class="line"><span class="lineno"> 1669</span>  <a class="code hl_function" href="muttlib_8c.html#adde3990a0490dfba609fc94dbdbfd6b3">buf_expand_path</a>(fcc);</div>
<div class="line"><span class="lineno"> 1670</span> </div>
<div class="line"><span class="lineno"> 1671</span>  <span class="comment">/* Don&#39;t save a copy when we are in batch-mode, and the FCC</span></div>
<div class="line"><span class="lineno"> 1672</span><span class="comment">   * folder is on an IMAP server: This would involve possibly lots</span></div>
<div class="line"><span class="lineno"> 1673</span><span class="comment">   * of user interaction, which is not available in batch mode.</span></div>
<div class="line"><span class="lineno"> 1674</span><span class="comment">   *</span></div>
<div class="line"><span class="lineno"> 1675</span><span class="comment">   * Note: A patch to fix the problems with the use of IMAP servers</span></div>
<div class="line"><span class="lineno"> 1676</span><span class="comment">   * from non-curses mode is available from Brendan Cully.  However,</span></div>
<div class="line"><span class="lineno"> 1677</span><span class="comment">   * I&#39;d like to think a bit more about this before including it.  */</span></div>
<div class="line"><span class="lineno"> 1678</span> </div>
<div class="line"><span class="lineno"> 1679</span>  <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>) &amp;&amp; !<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(fcc) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1680</span>      (<a class="code hl_function" href="group__mx__path__probe.html#gab4f27af8eb857a20834f445be3f498de">imap_path_probe</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fcc), NULL) == <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da7f541a03089370b1a260e344f8d1809b">MUTT_IMAP</a>))</div>
<div class="line"><span class="lineno"> 1681</span>  {</div>
<div class="line"><span class="lineno"> 1682</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Warning: Fcc to an IMAP mailbox is not supported in batch mode&quot;</span>));</div>
<div class="line"><span class="lineno"> 1683</span>    <span class="comment">/* L10N: Printed after the &quot;Fcc to an IMAP mailbox is not supported&quot; message.</span></div>
<div class="line"><span class="lineno"> 1684</span><span class="comment">       To make it clearer that the message doesn&#39;t mean NeoMutt is aborting</span></div>
<div class="line"><span class="lineno"> 1685</span><span class="comment">       sending the mail too.</span></div>
<div class="line"><span class="lineno"> 1686</span><span class="comment">       %s is the full mailbox URL, including imap(s)://</span></div>
<div class="line"><span class="lineno"> 1687</span><span class="comment">    */</span></div>
<div class="line"><span class="lineno"> 1688</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Skipping Fcc to %s&quot;</span>), <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fcc));</div>
<div class="line"><span class="lineno"> 1689</span>    <a class="code hl_function" href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a>(fcc);</div>
<div class="line"><span class="lineno"> 1690</span>    <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1691</span>  }</div>
<div class="line"><span class="lineno"> 1692</span> </div>
<div class="line"><span class="lineno"> 1693</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(fcc) || <a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(<span class="stringliteral">&quot;/dev/null&quot;</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fcc)))</div>
<div class="line"><span class="lineno"> 1694</span>    <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1695</span> </div>
<div class="line"><span class="lineno"> 1696</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *tmpbody = e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 1697</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *save_sig = NULL;</div>
<div class="line"><span class="lineno"> 1698</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *save_parts = NULL;</div>
<div class="line"><span class="lineno"> 1699</span> </div>
<div class="line"><span class="lineno"> 1700</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_fcc_before_send = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;fcc_before_send&quot;</span>);</div>
<div class="line"><span class="lineno"> 1701</span>  <span class="comment">/* Before sending, we don&#39;t allow message manipulation because it</span></div>
<div class="line"><span class="lineno"> 1702</span><span class="comment">   * will break message signatures.  This is especially complicated by</span></div>
<div class="line"><span class="lineno"> 1703</span><span class="comment">   * Protected Headers. */</span></div>
<div class="line"><span class="lineno"> 1704</span>  <span class="keywordflow">if</span> (!c_fcc_before_send)</div>
<div class="line"><span class="lineno"> 1705</span>  {</div>
<div class="line"><span class="lineno"> 1706</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_fcc_clear = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;fcc_clear&quot;</span>);</div>
<div class="line"><span class="lineno"> 1707</span>    <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1708</span>        (e-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>)) &amp;&amp; c_fcc_clear)</div>
<div class="line"><span class="lineno"> 1709</span>    {</div>
<div class="line"><span class="lineno"> 1710</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = clear_content;</div>
<div class="line"><span class="lineno"> 1711</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp;= ~(<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>);</div>
<div class="line"><span class="lineno"> 1712</span>      <a class="code hl_function" href="envelope_8c.html#a244dacf9b1001c9ce1dbd473e001381f">mutt_env_free</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a62f6c9b4245ed3b6b9296adb45aa4010">mime_headers</a>);</div>
<div class="line"><span class="lineno"> 1713</span>      <a class="code hl_function" href="parameter_8c.html#a34454ee6af9d43eeabf80898dc7270b8">mutt_param_delete</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>, <span class="stringliteral">&quot;protected-headers&quot;</span>);</div>
<div class="line"><span class="lineno"> 1714</span>    }</div>
<div class="line"><span class="lineno"> 1715</span> </div>
<div class="line"><span class="lineno"> 1716</span>    <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_fcc_attach = <a class="code hl_function" href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(sub, <span class="stringliteral">&quot;fcc_attach&quot;</span>);</div>
<div class="line"><span class="lineno"> 1717</span> </div>
<div class="line"><span class="lineno"> 1718</span>    <span class="comment">/* check to see if the user wants copies of all attachments */</span></div>
<div class="line"><span class="lineno"> 1719</span>    <span class="keywordtype">bool</span> save_atts = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1720</span>    <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)</div>
<div class="line"><span class="lineno"> 1721</span>    {</div>
<div class="line"><span class="lineno"> 1722</span>      <span class="comment">/* In batch mode, save attachments if the quadoption is yes or ask-yes */</span></div>
<div class="line"><span class="lineno"> 1723</span>      <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>)</div>
<div class="line"><span class="lineno"> 1724</span>      {</div>
<div class="line"><span class="lineno"> 1725</span>        <span class="keywordflow">if</span> ((c_fcc_attach == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>) || (c_fcc_attach == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaf90604c0e1430d5002944c93ac46952">MUTT_ASKNO</a>))</div>
<div class="line"><span class="lineno"> 1726</span>          save_atts = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1727</span>      }</div>
<div class="line"><span class="lineno"> 1728</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Save attachments in Fcc?&quot;</span>), sub, <span class="stringliteral">&quot;fcc_attach&quot;</span>) != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div>
<div class="line"><span class="lineno"> 1729</span>      {</div>
<div class="line"><span class="lineno"> 1730</span>        save_atts = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1731</span>      }</div>
<div class="line"><span class="lineno"> 1732</span>    }</div>
<div class="line"><span class="lineno"> 1733</span>    <span class="keywordflow">if</span> (!save_atts)</div>
<div class="line"><span class="lineno"> 1734</span>    {</div>
<div class="line"><span class="lineno"> 1735</span>      <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; (e-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>)) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1736</span>          (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;encrypted&quot;</span>) ||</div>
<div class="line"><span class="lineno"> 1737</span>           <a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;signed&quot;</span>)))</div>
<div class="line"><span class="lineno"> 1738</span>      {</div>
<div class="line"><span class="lineno"> 1739</span>        <span class="keywordflow">if</span> ((clear_content-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1740</span>            (<a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Save attachments in Fcc?&quot;</span>), sub, <span class="stringliteral">&quot;fcc_attach&quot;</span>) != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>))</div>
<div class="line"><span class="lineno"> 1741</span>        {</div>
<div class="line"><span class="lineno"> 1742</span>          <span class="keywordflow">if</span> (!(e-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>) &amp;&amp; (e-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>))</div>
<div class="line"><span class="lineno"> 1743</span>          {</div>
<div class="line"><span class="lineno"> 1744</span>            <span class="comment">/* save initial signature and attachments */</span></div>
<div class="line"><span class="lineno"> 1745</span>            save_sig = e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>;</div>
<div class="line"><span class="lineno"> 1746</span>            save_parts = clear_content-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>;</div>
<div class="line"><span class="lineno"> 1747</span>          }</div>
<div class="line"><span class="lineno"> 1748</span> </div>
<div class="line"><span class="lineno"> 1749</span>          <span class="comment">/* this means writing only the main part */</span></div>
<div class="line"><span class="lineno"> 1750</span>          e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = clear_content-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 1751</span> </div>
<div class="line"><span class="lineno"> 1752</span>          <span class="keywordflow">if</span> (<a class="code hl_function" href="crypt_8c.html#a896502d4448fefadaf8786a4f2d5556e">mutt_protect</a>(e, pgpkeylist, <span class="keyword">false</span>) == -1)</div>
<div class="line"><span class="lineno"> 1753</span>          {</div>
<div class="line"><span class="lineno"> 1754</span>            <span class="comment">/* we can&#39;t do much about it at this point, so</span></div>
<div class="line"><span class="lineno"> 1755</span><span class="comment">           * fallback to saving the whole thing to fcc */</span></div>
<div class="line"><span class="lineno"> 1756</span>            e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = tmpbody;</div>
<div class="line"><span class="lineno"> 1757</span>            save_sig = NULL;</div>
<div class="line"><span class="lineno"> 1758</span>            <span class="keywordflow">goto</span> full_fcc;</div>
<div class="line"><span class="lineno"> 1759</span>          }</div>
<div class="line"><span class="lineno"> 1760</span> </div>
<div class="line"><span class="lineno"> 1761</span>          save_content = e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 1762</span>        }</div>
<div class="line"><span class="lineno"> 1763</span>      }</div>
<div class="line"><span class="lineno"> 1764</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1765</span>      {</div>
<div class="line"><span class="lineno"> 1766</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Save attachments in Fcc?&quot;</span>), sub, <span class="stringliteral">&quot;fcc_attach&quot;</span>) != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div>
<div class="line"><span class="lineno"> 1767</span>          e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 1768</span>      }</div>
<div class="line"><span class="lineno"> 1769</span>    }</div>
<div class="line"><span class="lineno"> 1770</span>  }</div>
<div class="line"><span class="lineno"> 1771</span> </div>
<div class="line"><span class="lineno"> 1772</span>full_fcc:</div>
<div class="line"><span class="lineno"> 1773</span>  <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>)</div>
<div class="line"><span class="lineno"> 1774</span>  {</div>
<div class="line"><span class="lineno"> 1775</span>    <span class="comment">/* update received time so that when storing to a mbox-style folder</span></div>
<div class="line"><span class="lineno"> 1776</span><span class="comment">     * the From_ line contains the current time instead of when the</span></div>
<div class="line"><span class="lineno"> 1777</span><span class="comment">     * message was first postponed.  */</span></div>
<div class="line"><span class="lineno"> 1778</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#af64bcf33ccd8b0ba248fc8d427c21264">received</a> = <a class="code hl_function" href="mutt_2date_8c.html#ad1e6304a91c7b6f3c266a9b17c1740fe">mutt_date_now</a>();</div>
<div class="line"><span class="lineno"> 1779</span>    rc = <a class="code hl_function" href="sendlib_8c.html#a8957ce367f6683e839e4ddb7245d466c">mutt_write_multiple_fcc</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fcc), e, NULL, <span class="keyword">false</span>, NULL, finalpath, sub);</div>
<div class="line"><span class="lineno"> 1780</span>    <span class="keywordflow">while</span> (rc &amp;&amp; !(flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>))</div>
<div class="line"><span class="lineno"> 1781</span>    {</div>
<div class="line"><span class="lineno"> 1782</span>      <a class="code hl_function" href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a>();</div>
<div class="line"><span class="lineno"> 1783</span>      <span class="keywordtype">int</span> choice = <a class="code hl_function" href="group__gui__mw.html#gad530cebf7d9c54c55a609509acc56f70">mw_multi_choice</a>(</div>
<div class="line"><span class="lineno"> 1784</span>          <span class="comment">/* L10N: Called when saving to $record or Fcc failed after sending.</span></div>
<div class="line"><span class="lineno"> 1785</span><span class="comment">             (r)etry tries the same mailbox again.</span></div>
<div class="line"><span class="lineno"> 1786</span><span class="comment">             alternate (m)ailbox prompts for a different mailbox to try.</span></div>
<div class="line"><span class="lineno"> 1787</span><span class="comment">             (s)kip aborts saving.  */</span></div>
<div class="line"><span class="lineno"> 1788</span>          <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Fcc failed. (r)etry, alternate (m)ailbox, or (s)kip?&quot;</span>),</div>
<div class="line"><span class="lineno"> 1789</span>          <span class="comment">/* L10N: These correspond to the &quot;Fcc failed&quot; multi-choice prompt</span></div>
<div class="line"><span class="lineno"> 1790</span><span class="comment">             (r)etry, alternate (m)ailbox, or (s)kip.</span></div>
<div class="line"><span class="lineno"> 1791</span><span class="comment">             Any similarity to famous leaders of the FSF is coincidental.  */</span></div>
<div class="line"><span class="lineno"> 1792</span>          <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;rms&quot;</span>));</div>
<div class="line"><span class="lineno"> 1793</span>      <span class="keywordflow">switch</span> (choice)</div>
<div class="line"><span class="lineno"> 1794</span>      {</div>
<div class="line"><span class="lineno"> 1795</span>        <span class="keywordflow">case</span> 2: <span class="comment">/* alternate (m)ailbox */</span></div>
<div class="line"><span class="lineno"> 1796</span>          <span class="comment">/* L10N: This is the prompt to enter an &quot;alternate (m)ailbox&quot; when the</span></div>
<div class="line"><span class="lineno"> 1797</span><span class="comment">             initial Fcc fails.  */</span></div>
<div class="line"><span class="lineno"> 1798</span>          rc = <a class="code hl_function" href="group__gui__mw.html#ga7074d808675e21370b1cef98d55e75ca">mw_enter_fname</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Fcc mailbox&quot;</span>), fcc, <span class="keyword">true</span>, m, <span class="keyword">false</span>, NULL, NULL,</div>
<div class="line"><span class="lineno"> 1799</span>                              <a class="code hl_define" href="browser_2lib_8h.html#aef17206dea5302001a39f3c633e731d3">MUTT_SEL_NO_FLAGS</a>);</div>
<div class="line"><span class="lineno"> 1800</span>          <span class="keywordflow">if</span> ((rc == -1) || <a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(fcc))</div>
<div class="line"><span class="lineno"> 1801</span>          {</div>
<div class="line"><span class="lineno"> 1802</span>            rc = 0;</div>
<div class="line"><span class="lineno"> 1803</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1804</span>          }</div>
<div class="line"><span class="lineno"> 1805</span>          <a class="code hl_define" href="mutt_2lib_8h.html#a0cf2d82c57a09723ab59e6f4dcc45b84">FALLTHROUGH</a>;</div>
<div class="line"><span class="lineno"> 1806</span> </div>
<div class="line"><span class="lineno"> 1807</span>        <span class="keywordflow">case</span> 1: <span class="comment">/* (r)etry */</span></div>
<div class="line"><span class="lineno"> 1808</span>          rc = <a class="code hl_function" href="sendlib_8c.html#a8957ce367f6683e839e4ddb7245d466c">mutt_write_multiple_fcc</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fcc), e, NULL, <span class="keyword">false</span>, NULL, finalpath, sub);</div>
<div class="line"><span class="lineno"> 1809</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1810</span> </div>
<div class="line"><span class="lineno"> 1811</span>        <span class="keywordflow">case</span> -1: <span class="comment">/* abort */</span></div>
<div class="line"><span class="lineno"> 1812</span>        <span class="keywordflow">case</span> 3:  <span class="comment">/* (s)kip */</span></div>
<div class="line"><span class="lineno"> 1813</span>          rc = 0;</div>
<div class="line"><span class="lineno"> 1814</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1815</span>      }</div>
<div class="line"><span class="lineno"> 1816</span>    }</div>
<div class="line"><span class="lineno"> 1817</span>  }</div>
<div class="line"><span class="lineno"> 1818</span> </div>
<div class="line"><span class="lineno"> 1819</span>  <span class="keywordflow">if</span> (!c_fcc_before_send)</div>
<div class="line"><span class="lineno"> 1820</span>  {</div>
<div class="line"><span class="lineno"> 1821</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = tmpbody;</div>
<div class="line"><span class="lineno"> 1822</span> </div>
<div class="line"><span class="lineno"> 1823</span>    <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; save_sig)</div>
<div class="line"><span class="lineno"> 1824</span>    {</div>
<div class="line"><span class="lineno"> 1825</span>      <span class="comment">/* cleanup the second signature structures */</span></div>
<div class="line"><span class="lineno"> 1826</span>      <span class="keywordflow">if</span> (save_content-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>)</div>
<div class="line"><span class="lineno"> 1827</span>      {</div>
<div class="line"><span class="lineno"> 1828</span>        <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;save_content-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>);</div>
<div class="line"><span class="lineno"> 1829</span>        save_content-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a> = NULL;</div>
<div class="line"><span class="lineno"> 1830</span>      }</div>
<div class="line"><span class="lineno"> 1831</span>      <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;save_content);</div>
<div class="line"><span class="lineno"> 1832</span> </div>
<div class="line"><span class="lineno"> 1833</span>      <span class="comment">/* restore old signature and attachments */</span></div>
<div class="line"><span class="lineno"> 1834</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> = save_sig;</div>
<div class="line"><span class="lineno"> 1835</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> = save_parts;</div>
<div class="line"><span class="lineno"> 1836</span>    }</div>
<div class="line"><span class="lineno"> 1837</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; save_content)</div>
<div class="line"><span class="lineno"> 1838</span>    {</div>
<div class="line"><span class="lineno"> 1839</span>      <span class="comment">/* destroy the new encrypted body. */</span></div>
<div class="line"><span class="lineno"> 1840</span>      <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;save_content);</div>
<div class="line"><span class="lineno"> 1841</span>    }</div>
<div class="line"><span class="lineno"> 1842</span>  }</div>
<div class="line"><span class="lineno"> 1843</span> </div>
<div class="line"><span class="lineno"> 1844</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1845</span>}</div>
<div class="ttc" id="abrowser_2lib_8h_html_aef17206dea5302001a39f3c633e731d3"><div class="ttname"><a href="browser_2lib_8h.html#aef17206dea5302001a39f3c633e731d3">MUTT_SEL_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_SEL_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="browser_2lib_8h_source.html#l00057">lib.h:57</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921da7f541a03089370b1a260e344f8d1809b"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da7f541a03089370b1a260e344f8d1809b">MUTT_IMAP</a></div><div class="ttdeci">@ MUTT_IMAP</div><div class="ttdoc">&#39;IMAP&#39; Mailbox type</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00050">mailbox.h:50</a></div></div>
<div class="ttc" id="acrypt_8c_html_a896502d4448fefadaf8786a4f2d5556e"><div class="ttname"><a href="crypt_8c.html#a896502d4448fefadaf8786a4f2d5556e">mutt_protect</a></div><div class="ttdeci">int mutt_protect(struct Email *e, char *keylist, bool postpone)</div><div class="ttdoc">Encrypt and/or sign a message.</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l00156">crypt.c:156</a></div></div>
<div class="ttc" id="aemail_2body_8c_html_a129af1c316fcbc26b55fb48957bab2cb"><div class="ttname"><a href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a></div><div class="ttdeci">void mutt_body_free(struct Body **ptr)</div><div class="ttdoc">Free a Body.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8c_source.html#l00058">body.c:58</a></div></div>
<div class="ttc" id="aenvelope_8c_html_a244dacf9b1001c9ce1dbd473e001381f"><div class="ttname"><a href="envelope_8c.html#a244dacf9b1001c9ce1dbd473e001381f">mutt_env_free</a></div><div class="ttdeci">void mutt_env_free(struct Envelope **ptr)</div><div class="ttdoc">Free an Envelope.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00125">envelope.c:125</a></div></div>
<div class="ttc" id="agroup__gui__mw_html_ga7074d808675e21370b1cef98d55e75ca"><div class="ttname"><a href="group__gui__mw.html#ga7074d808675e21370b1cef98d55e75ca">mw_enter_fname</a></div><div class="ttdeci">int mw_enter_fname(const char *prompt, struct Buffer *fname, bool mailbox, struct Mailbox *m, bool multiple, char ***files, int *numfiles, SelectFileFlags flags)</div><div class="ttdoc">Ask the user to select a file -.</div><div class="ttdef"><b>Definition</b> <a href="curs__lib_8c_source.html#l00237">curs_lib.c:237</a></div></div>
<div class="ttc" id="agroup__gui__mw_html_gad530cebf7d9c54c55a609509acc56f70"><div class="ttname"><a href="group__gui__mw.html#gad530cebf7d9c54c55a609509acc56f70">mw_multi_choice</a></div><div class="ttdeci">int mw_multi_choice(const char *prompt, const char *letters)</div><div class="ttdoc">Offer the user a multiple choice question -.</div><div class="ttdef"><b>Definition</b> <a href="question_8c_source.html#l00061">question.c:61</a></div></div>
<div class="ttc" id="agroup__mx__path__probe_html_gab4f27af8eb857a20834f445be3f498de"><div class="ttname"><a href="group__mx__path__probe.html#gab4f27af8eb857a20834f445be3f498de">imap_path_probe</a></div><div class="ttdeci">enum MailboxType imap_path_probe(const char *path, const struct stat *st)</div><div class="ttdoc">Is this an IMAP Mailbox?</div><div class="ttdef"><b>Definition</b> <a href="imap_8c_source.html#l02351">imap.c:2351</a></div></div>
<div class="ttc" id="amutt_2date_8c_html_ad1e6304a91c7b6f3c266a9b17c1740fe"><div class="ttname"><a href="mutt_2date_8c.html#ad1e6304a91c7b6f3c266a9b17c1740fe">mutt_date_now</a></div><div class="ttdeci">time_t mutt_date_now(void)</div><div class="ttdoc">Return the number of seconds since the Unix epoch.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2date_8c_source.html#l00455">date.c:455</a></div></div>
<div class="ttc" id="amutt_2lib_8h_html_a0cf2d82c57a09723ab59e6f4dcc45b84"><div class="ttname"><a href="mutt_2lib_8h.html#a0cf2d82c57a09723ab59e6f4dcc45b84">FALLTHROUGH</a></div><div class="ttdeci">#define FALLTHROUGH</div><div class="ttdef"><b>Definition</b> <a href="mutt_2lib_8h_source.html#l00113">lib.h:113</a></div></div>
<div class="ttc" id="amuttlib_8c_html_adde3990a0490dfba609fc94dbdbfd6b3"><div class="ttname"><a href="muttlib_8c.html#adde3990a0490dfba609fc94dbdbfd6b3">buf_expand_path</a></div><div class="ttdeci">void buf_expand_path(struct Buffer *buf)</div><div class="ttdoc">Create the canonical path.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00314">muttlib.c:314</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a0b36be5c32ca90d8f2caef9ea9d627fc"><div class="ttname"><a href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a></div><div class="ttdeci">#define SEC_AUTOCRYPT</div><div class="ttdoc">(Autocrypt) Message will be, or was Autocrypt encrypt+signed</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00093">lib.h:93</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_ae12c003463c99d28f65f1d6b8b053b2c"><div class="ttname"><a href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a></div><div class="ttdeci">#define SEC_SIGN</div><div class="ttdoc">Email is signed.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00085">lib.h:85</a></div></div>
<div class="ttc" id="aparameter_8c_html_a34454ee6af9d43eeabf80898dc7270b8"><div class="ttname"><a href="parameter_8c.html#a34454ee6af9d43eeabf80898dc7270b8">mutt_param_delete</a></div><div class="ttdeci">void mutt_param_delete(struct ParameterList *pl, const char *attribute)</div><div class="ttdoc">Delete a matching Parameter.</div><div class="ttdef"><b>Definition</b> <a href="parameter_8c_source.html#l00143">parameter.c:143</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35dbaaf90604c0e1430d5002944c93ac46952"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaf90604c0e1430d5002944c93ac46952">MUTT_ASKNO</a></div><div class="ttdeci">@ MUTT_ASKNO</div><div class="ttdoc">Ask the user, defaulting to &#39;No&#39;.</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00040">quad.h:40</a></div></div>
<div class="ttc" id="asend_8h_html_a05caaa1cac7622dce2a0e32d75619b48"><div class="ttname"><a href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a></div><div class="ttdeci">#define SEND_BATCH</div><div class="ttdoc">Send email in batch mode (without user interaction)</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00047">send.h:47</a></div></div>
<div class="ttc" id="asendlib_8c_html_a8957ce367f6683e839e4ddb7245d466c"><div class="ttname"><a href="sendlib_8c.html#a8957ce367f6683e839e4ddb7245d466c">mutt_write_multiple_fcc</a></div><div class="ttdeci">int mutt_write_multiple_fcc(const char *path, struct Email *e, const char *msgid, bool post, char *fcc, char **finalpath, struct ConfigSubset *sub)</div><div class="ttdoc">Handle FCC with multiple, comma separated entries.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l01004">sendlib.c:1004</a></div></div>
<div class="ttc" id="astructBody_html_a0b87b7bdb6faef44d9aac4854975f805"><div class="ttname"><a href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">Body::parts</a></div><div class="ttdeci">struct Body * parts</div><div class="ttdoc">parts of a multipart or message/rfc822</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00073">body.h:73</a></div></div>
<div class="ttc" id="astructBody_html_a62f6c9b4245ed3b6b9296adb45aa4010"><div class="ttname"><a href="structBody.html#a62f6c9b4245ed3b6b9296adb45aa4010">Body::mime_headers</a></div><div class="ttdeci">struct Envelope * mime_headers</div><div class="ttdoc">Memory hole protected headers.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00076">body.h:76</a></div></div>
<div class="ttc" id="astructBody_html_a782cee95e0064e3895b88248bdfc781a"><div class="ttname"><a href="structBody.html#a782cee95e0064e3895b88248bdfc781a">Body::parameter</a></div><div class="ttdeci">struct ParameterList parameter</div><div class="ttdoc">Parameters of the content-type.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00063">body.h:63</a></div></div>
<div class="ttc" id="astructEmail_html_af64bcf33ccd8b0ba248fc8d427c21264"><div class="ttname"><a href="structEmail.html#af64bcf33ccd8b0ba248fc8d427c21264">Email::received</a></div><div class="ttdeci">time_t received</div><div class="ttdoc">Time when the message was placed in the mailbox.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00061">email.h:61</a></div></div>
</div><!-- fragment --><div id="dynsection-78" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-78-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-78-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-78-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a255efc8a4a366c3de07d48da23d03a32_cgraph.svg" width="651" height="926"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-79" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-79-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-79-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-79-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a255efc8a4a366c3de07d48da23d03a32_icgraph.svg" width="280" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a08794ff2edb022ef0c0f59086da9675f" name="a08794ff2edb022ef0c0f59086da9675f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08794ff2edb022ef0c0f59086da9675f">&#9670;&#160;</a></span>postpone_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int postpone_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e_post</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e_cur</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>fcc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save an <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> for another day. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e_post</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> to postpone </td></tr>
    <tr><td class="paramname">e_cur</td><td>Current <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> in the index </td></tr>
    <tr><td class="paramname">fcc</td><td><a class="el" href="structFolder.html" title="A folder/dir in the browser.">Folder</a> for 'sent mail' </td></tr>
    <tr><td class="paramname">flags</td><td>Send mode, see <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506" title="Flags for mutt_send_message(), e.g. SEND_REPLY.">SendFlags</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01857">1857</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1859</span>{</div>
<div class="line"><span class="lineno"> 1860</span>  <span class="keywordtype">char</span> *pgpkeylist = NULL;</div>
<div class="line"><span class="lineno"> 1861</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *encrypt_as = NULL;</div>
<div class="line"><span class="lineno"> 1862</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *clear_content = NULL;</div>
<div class="line"><span class="lineno"> 1863</span> </div>
<div class="line"><span class="lineno"> 1864</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_postponed = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;postponed&quot;</span>);</div>
<div class="line"><span class="lineno"> 1865</span>  <span class="keywordflow">if</span> (!c_postponed)</div>
<div class="line"><span class="lineno"> 1866</span>  {</div>
<div class="line"><span class="lineno"> 1867</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t postpone.  $postponed is unset&quot;</span>));</div>
<div class="line"><span class="lineno"> 1868</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1869</span>  }</div>
<div class="line"><span class="lineno"> 1870</span> </div>
<div class="line"><span class="lineno"> 1871</span>  <span class="keywordflow">if</span> (e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1872</span>    e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a9700f763b34719d97a56b5f9b032d97a">mutt_make_multipart</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 1873</span> </div>
<div class="line"><span class="lineno"> 1874</span>  <a class="code hl_function" href="#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, <span class="keyword">true</span>, sub);</div>
<div class="line"><span class="lineno"> 1875</span> </div>
<div class="line"><span class="lineno"> 1876</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_postpone_encrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;postpone_encrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 1877</span>  <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; c_postpone_encrypt &amp;&amp;</div>
<div class="line"><span class="lineno"> 1878</span>      (e_post-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>)))</div>
<div class="line"><span class="lineno"> 1879</span>  {</div>
<div class="line"><span class="lineno"> 1880</span>    <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; (e_post-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>))</div>
<div class="line"><span class="lineno"> 1881</span>    {</div>
<div class="line"><span class="lineno"> 1882</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_pgp_default_key = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;pgp_default_key&quot;</span>);</div>
<div class="line"><span class="lineno"> 1883</span>      encrypt_as = c_pgp_default_key;</div>
<div class="line"><span class="lineno"> 1884</span>    }</div>
<div class="line"><span class="lineno"> 1885</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>) != 0) &amp;&amp; (e_post-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>))</div>
<div class="line"><span class="lineno"> 1886</span>    {</div>
<div class="line"><span class="lineno"> 1887</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_smime_default_key = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;smime_default_key&quot;</span>);</div>
<div class="line"><span class="lineno"> 1888</span>      encrypt_as = c_smime_default_key;</div>
<div class="line"><span class="lineno"> 1889</span>    }</div>
<div class="line"><span class="lineno"> 1890</span>    <span class="keywordflow">if</span> (!encrypt_as)</div>
<div class="line"><span class="lineno"> 1891</span>    {</div>
<div class="line"><span class="lineno"> 1892</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_postpone_encrypt_as = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;postpone_encrypt_as&quot;</span>);</div>
<div class="line"><span class="lineno"> 1893</span>      encrypt_as = c_postpone_encrypt_as;</div>
<div class="line"><span class="lineno"> 1894</span>    }</div>
<div class="line"><span class="lineno"> 1895</span> </div>
<div class="line"><span class="lineno"> 1896</span><span class="preprocessor">#ifdef USE_AUTOCRYPT</span></div>
<div class="line"><span class="lineno"> 1897</span>    <span class="keywordflow">if</span> (e_post-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>)</div>
<div class="line"><span class="lineno"> 1898</span>    {</div>
<div class="line"><span class="lineno"> 1899</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="autocrypt_8c.html#ae4aac04801499d414565c58f9f5ac6f6">mutt_autocrypt_set_sign_as_default_key</a>(e_post))</div>
<div class="line"><span class="lineno"> 1900</span>      {</div>
<div class="line"><span class="lineno"> 1901</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;mixed&quot;</span>))</div>
<div class="line"><span class="lineno"> 1902</span>          e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 1903</span>        <a class="code hl_function" href="#af1b54154700865964598299ed1cf9a6a">decode_descriptions</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 1904</span>        <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error encrypting message. Check your crypt settings.&quot;</span>));</div>
<div class="line"><span class="lineno"> 1905</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1906</span>      }</div>
<div class="line"><span class="lineno"> 1907</span>      encrypt_as = <a class="code hl_variable" href="autocrypt_2config_8c.html#a933b5108398b46e2aadfe51b4ce466a7">AutocryptDefaultKey</a>;</div>
<div class="line"><span class="lineno"> 1908</span>    }</div>
<div class="line"><span class="lineno"> 1909</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1910</span> </div>
<div class="line"><span class="lineno"> 1911</span>    <span class="keywordflow">if</span> (encrypt_as)</div>
<div class="line"><span class="lineno"> 1912</span>    {</div>
<div class="line"><span class="lineno"> 1913</span>      pgpkeylist = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(encrypt_as);</div>
<div class="line"><span class="lineno"> 1914</span>      clear_content = e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 1915</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="crypt_8c.html#a896502d4448fefadaf8786a4f2d5556e">mutt_protect</a>(e_post, pgpkeylist, <span class="keyword">true</span>) == -1)</div>
<div class="line"><span class="lineno"> 1916</span>      {</div>
<div class="line"><span class="lineno"> 1917</span>        <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;pgpkeylist);</div>
<div class="line"><span class="lineno"> 1918</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;mixed&quot;</span>))</div>
<div class="line"><span class="lineno"> 1919</span>          e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 1920</span>        <a class="code hl_function" href="#af1b54154700865964598299ed1cf9a6a">decode_descriptions</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 1921</span>        <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error encrypting message. Check your crypt settings.&quot;</span>));</div>
<div class="line"><span class="lineno"> 1922</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1923</span>      }</div>
<div class="line"><span class="lineno"> 1924</span> </div>
<div class="line"><span class="lineno"> 1925</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;pgpkeylist);</div>
<div class="line"><span class="lineno"> 1926</span> </div>
<div class="line"><span class="lineno"> 1927</span>      <a class="code hl_function" href="#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, <span class="keyword">false</span>, sub);</div>
<div class="line"><span class="lineno"> 1928</span>    }</div>
<div class="line"><span class="lineno"> 1929</span>  }</div>
<div class="line"><span class="lineno"> 1930</span> </div>
<div class="line"><span class="lineno"> 1931</span>  <span class="comment">/* make sure the message is written to the right part of a maildir</span></div>
<div class="line"><span class="lineno"> 1932</span><span class="comment">   * postponed folder.  */</span></div>
<div class="line"><span class="lineno"> 1933</span>  e_post-&gt;<a class="code hl_variable" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1934</span>  e_post-&gt;<a class="code hl_variable" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1935</span> </div>
<div class="line"><span class="lineno"> 1936</span>  <a class="code hl_function" href="sendlib_8c.html#ac35da3d19eb0d95d4f6260adab57b4c9">mutt_prepare_envelope</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, <span class="keyword">false</span>, sub);</div>
<div class="line"><span class="lineno"> 1937</span>  <a class="code hl_function" href="envelope_8c.html#a0108f989ca58622df272cf31b610395e">mutt_env_to_intl</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, NULL, NULL); <span class="comment">/* Handle bad IDNAs the next time. */</span></div>
<div class="line"><span class="lineno"> 1938</span> </div>
<div class="line"><span class="lineno"> 1939</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="sendlib_8c.html#acd4f22db21ca81a6a845ffe6888d141f">mutt_write_fcc</a>(<a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_postponed), e_post,</div>
<div class="line"><span class="lineno"> 1940</span>                     (e_cur &amp;&amp; (flags &amp; <a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>)) ? e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a> : NULL,</div>
<div class="line"><span class="lineno"> 1941</span>                     <span class="keyword">true</span>, fcc, NULL, sub) &lt; 0)</div>
<div class="line"><span class="lineno"> 1942</span>  {</div>
<div class="line"><span class="lineno"> 1943</span>    <span class="keywordflow">if</span> (clear_content)</div>
<div class="line"><span class="lineno"> 1944</span>    {</div>
<div class="line"><span class="lineno"> 1945</span>      <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 1946</span>      e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = clear_content;</div>
<div class="line"><span class="lineno"> 1947</span>    }</div>
<div class="line"><span class="lineno"> 1948</span>    <a class="code hl_function" href="envelope_8c.html#a244dacf9b1001c9ce1dbd473e001381f">mutt_env_free</a>(&amp;e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a62f6c9b4245ed3b6b9296adb45aa4010">mime_headers</a>); <span class="comment">/* protected headers */</span></div>
<div class="line"><span class="lineno"> 1949</span>    <a class="code hl_function" href="parameter_8c.html#a34454ee6af9d43eeabf80898dc7270b8">mutt_param_delete</a>(&amp;e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>, <span class="stringliteral">&quot;protected-headers&quot;</span>);</div>
<div class="line"><span class="lineno"> 1950</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;mixed&quot;</span>))</div>
<div class="line"><span class="lineno"> 1951</span>      e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 1952</span>    <a class="code hl_function" href="#af1b54154700865964598299ed1cf9a6a">decode_descriptions</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 1953</span>    <a class="code hl_function" href="sendlib_8c.html#a99b5cff5076c9e25bce367f0bae45f4c">mutt_unprepare_envelope</a>(e_post-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 1954</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1955</span>  }</div>
<div class="line"><span class="lineno"> 1956</span> </div>
<div class="line"><span class="lineno"> 1957</span>  <a class="code hl_function" href="postpone_2lib_8h.html#a6d6fb2f03b78be714443316f335c90ae">mutt_update_num_postponed</a>();</div>
<div class="line"><span class="lineno"> 1958</span> </div>
<div class="line"><span class="lineno"> 1959</span>  <span class="keywordflow">if</span> (clear_content)</div>
<div class="line"><span class="lineno"> 1960</span>    <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;clear_content);</div>
<div class="line"><span class="lineno"> 1961</span> </div>
<div class="line"><span class="lineno"> 1962</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1963</span>}</div>
<div class="ttc" id="aautocrypt_2config_8c_html_a933b5108398b46e2aadfe51b4ce466a7"><div class="ttname"><a href="autocrypt_2config_8c.html#a933b5108398b46e2aadfe51b4ce466a7">AutocryptDefaultKey</a></div><div class="ttdeci">char * AutocryptDefaultKey</div><div class="ttdoc">Autocrypt default key id (used for postponing messages)</div><div class="ttdef"><b>Definition</b> <a href="autocrypt_2config_8c_source.html#l00038">config.c:38</a></div></div>
<div class="ttc" id="aautocrypt_8c_html_ae4aac04801499d414565c58f9f5ac6f6"><div class="ttname"><a href="autocrypt_8c.html#ae4aac04801499d414565c58f9f5ac6f6">mutt_autocrypt_set_sign_as_default_key</a></div><div class="ttdeci">int mutt_autocrypt_set_sign_as_default_key(struct Email *e)</div><div class="ttdoc">Set the Autocrypt default key for signing.</div><div class="ttdef"><b>Definition</b> <a href="autocrypt_8c_source.html#l00697">autocrypt.c:697</a></div></div>
<div class="ttc" id="aenvelope_8c_html_a0108f989ca58622df272cf31b610395e"><div class="ttname"><a href="envelope_8c.html#a0108f989ca58622df272cf31b610395e">mutt_env_to_intl</a></div><div class="ttdeci">int mutt_env_to_intl(struct Envelope *env, const char **tag, char **err)</div><div class="ttdoc">Convert an Envelope&#39;s Address fields to Punycode format.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00354">envelope.c:354</a></div></div>
<div class="ttc" id="amultipart_8c_html_a294249634f22cab1bce592ca8602c5ec"><div class="ttname"><a href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a></div><div class="ttdeci">struct Body * mutt_remove_multipart(struct Body *b)</div><div class="ttdoc">Extract the multipart body if it exists.</div><div class="ttdef"><b>Definition</b> <a href="multipart_8c_source.html#l00126">multipart.c:126</a></div></div>
<div class="ttc" id="amultipart_8c_html_a9700f763b34719d97a56b5f9b032d97a"><div class="ttname"><a href="multipart_8c.html#a9700f763b34719d97a56b5f9b032d97a">mutt_make_multipart</a></div><div class="ttdeci">struct Body * mutt_make_multipart(struct Body *b)</div><div class="ttdoc">Create a multipart email.</div><div class="ttdef"><b>Definition</b> <a href="multipart_8c_source.html#l00100">multipart.c:100</a></div></div>
<div class="ttc" id="apostpone_2lib_8h_html_a6d6fb2f03b78be714443316f335c90ae"><div class="ttname"><a href="postpone_2lib_8h.html#a6d6fb2f03b78be714443316f335c90ae">mutt_update_num_postponed</a></div><div class="ttdeci">void mutt_update_num_postponed(void)</div><div class="ttdoc">Force the update of the number of postponed messages.</div><div class="ttdef"><b>Definition</b> <a href="postpone_8c_source.html#l00177">postpone.c:177</a></div></div>
<div class="ttc" id="asendlib_8c_html_a99b5cff5076c9e25bce367f0bae45f4c"><div class="ttname"><a href="sendlib_8c.html#a99b5cff5076c9e25bce367f0bae45f4c">mutt_unprepare_envelope</a></div><div class="ttdeci">void mutt_unprepare_envelope(struct Envelope *env)</div><div class="ttdoc">Undo the encodings of mutt_prepare_envelope()</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00818">sendlib.c:818</a></div></div>
<div class="ttc" id="asendlib_8c_html_ac35da3d19eb0d95d4f6260adab57b4c9"><div class="ttname"><a href="sendlib_8c.html#ac35da3d19eb0d95d4f6260adab57b4c9">mutt_prepare_envelope</a></div><div class="ttdeci">void mutt_prepare_envelope(struct Envelope *env, bool final, struct ConfigSubset *sub)</div><div class="ttdoc">Prepare an email header.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00779">sendlib.c:779</a></div></div>
<div class="ttc" id="asendlib_8c_html_acd4f22db21ca81a6a845ffe6888d141f"><div class="ttname"><a href="sendlib_8c.html#acd4f22db21ca81a6a845ffe6888d141f">mutt_write_fcc</a></div><div class="ttdeci">int mutt_write_fcc(const char *path, struct Email *e, const char *msgid, bool post, const char *fcc, char **finalpath, struct ConfigSubset *sub)</div><div class="ttdoc">Write email to FCC mailbox.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l01057">sendlib.c:1057</a></div></div>
<div class="ttc" id="astructEmail_html_a0bd79550be901d44e50953fb43614e10"><div class="ttname"><a href="structEmail.html#a0bd79550be901d44e50953fb43614e10">Email::read</a></div><div class="ttdeci">bool read</div><div class="ttdoc">Email is read.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00050">email.h:50</a></div></div>
<div class="ttc" id="astructEmail_html_a6d9062408a8c89b19cf25584dd2ffb57"><div class="ttname"><a href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">Email::old</a></div><div class="ttdeci">bool old</div><div class="ttdoc">Email is seen, but unread.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00049">email.h:49</a></div></div>
</div><!-- fragment --><div id="dynsection-80" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-80-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-80-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-80-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a08794ff2edb022ef0c0f59086da9675f_cgraph.svg" width="956" height="991"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-81" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-81-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-81-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-81-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a08794ff2edb022ef0c0f59086da9675f_icgraph.svg" width="348" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="adaad7f2e93eb41299f638d224d90f82b" name="adaad7f2e93eb41299f638d224d90f82b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaad7f2e93eb41299f638d224d90f82b">&#9670;&#160;</a></span>is_text_plain()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_text_plain </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is a <a class="el" href="structBody.html" title="The body of an email.">Body</a> a text/plain MIME part? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> is text/plain </td></tr>
    <tr><td class="paramname">false</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> is not </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01971">1971</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1972</span>{</div>
<div class="line"><span class="lineno"> 1973</span>  <span class="keywordflow">return</span> (b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167">TYPE_TEXT</a>) &amp;&amp; <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;plain&quot;</span>);</div>
<div class="line"><span class="lineno"> 1974</span>}</div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167">TYPE_TEXT</a></div><div class="ttdeci">@ TYPE_TEXT</div><div class="ttdoc">Type: &#39;text/*&#39;.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00038">mime.h:38</a></div></div>
</div><!-- fragment --><div id="dynsection-82" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-82-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-82-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-82-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_adaad7f2e93eb41299f638d224d90f82b_cgraph.svg" width="272" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-83" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-83-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-83-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-83-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_adaad7f2e93eb41299f638d224d90f82b_icgraph.svg" width="566" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aad5805f2620506ae4bc2d7f6474cb849" name="aad5805f2620506ae4bc2d7f6474cb849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad5805f2620506ae4bc2d7f6474cb849">&#9670;&#160;</a></span>abort_for_missing_attachments()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool abort_for_missing_attachments </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should we abort sending because of missing attachments? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Abort because of missing attachments </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01982">1982</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1983</span>{</div>
<div class="line"><span class="lineno"> 1984</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_abort_noattach = <a class="code hl_function" href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(sub, <span class="stringliteral">&quot;abort_noattach&quot;</span>);</div>
<div class="line"><span class="lineno"> 1985</span> </div>
<div class="line"><span class="lineno"> 1986</span>  <span class="keywordflow">if</span> (c_abort_noattach == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>)</div>
<div class="line"><span class="lineno"> 1987</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1988</span> </div>
<div class="line"><span class="lineno"> 1989</span>  <span class="keywordflow">if</span> (b-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1990</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1991</span> </div>
<div class="line"><span class="lineno"> 1992</span>  <span class="keywordtype">bool</span> has_keyword = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1993</span> </div>
<div class="line"><span class="lineno"> 1994</span>  <span class="comment">/* search text/plain parts, whether they are main or alternative parts */</span></div>
<div class="line"><span class="lineno"> 1995</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="#adaad7f2e93eb41299f638d224d90f82b">is_text_plain</a>(b))</div>
<div class="line"><span class="lineno"> 1996</span>  {</div>
<div class="line"><span class="lineno"> 1997</span>    has_keyword |= <a class="code hl_function" href="#ad829e8c88d7630a8a6ed719378dd4570">search_attach_keyword</a>(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, sub);</div>
<div class="line"><span class="lineno"> 1998</span>  }</div>
<div class="line"><span class="lineno"> 1999</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2000</span>  {</div>
<div class="line"><span class="lineno"> 2001</span>    <span class="keywordflow">for</span> (b = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>; b; b = b-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 2002</span>    {</div>
<div class="line"><span class="lineno"> 2003</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="#adaad7f2e93eb41299f638d224d90f82b">is_text_plain</a>(b))</div>
<div class="line"><span class="lineno"> 2004</span>      {</div>
<div class="line"><span class="lineno"> 2005</span>        has_keyword |= <a class="code hl_function" href="#ad829e8c88d7630a8a6ed719378dd4570">search_attach_keyword</a>(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, sub);</div>
<div class="line"><span class="lineno"> 2006</span>      }</div>
<div class="line"><span class="lineno"> 2007</span>    }</div>
<div class="line"><span class="lineno"> 2008</span>  }</div>
<div class="line"><span class="lineno"> 2009</span> </div>
<div class="line"><span class="lineno"> 2010</span>  <span class="keywordflow">if</span> (!has_keyword)</div>
<div class="line"><span class="lineno"> 2011</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2012</span> </div>
<div class="line"><span class="lineno"> 2013</span>  <span class="keywordflow">if</span> (c_abort_noattach == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div>
<div class="line"><span class="lineno"> 2014</span>  {</div>
<div class="line"><span class="lineno"> 2015</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Message contains text matching \&quot;$abort_noattach_regex\&quot;. Not sending.&quot;</span>));</div>
<div class="line"><span class="lineno"> 2016</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2017</span>  }</div>
<div class="line"><span class="lineno"> 2018</span> </div>
<div class="line"><span class="lineno"> 2019</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No attachments, cancel sending?&quot;</span>), sub, <span class="stringliteral">&quot;abort_noattach&quot;</span>) != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>;</div>
<div class="line"><span class="lineno"> 2020</span>}</div>
<div class="ttc" id="asend_8c_html_ad829e8c88d7630a8a6ed719378dd4570"><div class="ttname"><a href="#ad829e8c88d7630a8a6ed719378dd4570">search_attach_keyword</a></div><div class="ttdeci">static bool search_attach_keyword(char *filename, struct ConfigSubset *sub)</div><div class="ttdoc">Search an email for &#39;attachment&#39; keywords.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01617">send.c:1617</a></div></div>
<div class="ttc" id="asend_8c_html_adaad7f2e93eb41299f638d224d90f82b"><div class="ttname"><a href="#adaad7f2e93eb41299f638d224d90f82b">is_text_plain</a></div><div class="ttdeci">static bool is_text_plain(const struct Body *b)</div><div class="ttdoc">Is a Body a text/plain MIME part?</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01971">send.c:1971</a></div></div>
<div class="ttc" id="astructBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">When sending a message, this is the file to which this structure refers.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00059">body.h:59</a></div></div>
</div><!-- fragment --><div id="dynsection-84" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-84-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-84-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-84-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_aad5805f2620506ae4bc2d7f6474cb849_cgraph.svg" width="438" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-85" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-85-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-85-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-85-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_aad5805f2620506ae4bc2d7f6474cb849_icgraph.svg" width="423" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad9c2899c7c3a76d2ce3b911221705a30" name="ad9c2899c7c3a76d2ce3b911221705a30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c2899c7c3a76d2ce3b911221705a30">&#9670;&#160;</a></span>mutt_send_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_send_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e_templ</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>tempfile</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct EmailArray *</td>          <td class="paramname"><span class="paramname"><em>ea</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>Send mode, see <a class="el" href="send_8h.html#a3f25bb31648a5f49a537d8df89a77506" title="Flags for mutt_send_message(), e.g. SEND_REPLY.">SendFlags</a> </td></tr>
    <tr><td class="paramname">e_templ</td><td>Template to use for new message </td></tr>
    <tr><td class="paramname">tempfile</td><td>File specified by -i or -H </td></tr>
    <tr><td class="paramname">m</td><td>Current mailbox </td></tr>
    <tr><td class="paramname">ea</td><td>Array of Emails to send </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was successfully sent </td></tr>
    <tr><td class="paramname">-1</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was aborted or an error occurred </td></tr>
    <tr><td class="paramname">1</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was postponed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l02034">2034</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2036</span>{</div>
<div class="line"><span class="lineno"> 2037</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *fcc = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>(); <span class="comment">/* where to copy this message */</span></div>
<div class="line"><span class="lineno"> 2038</span>  FILE *fp_tmp = NULL;</div>
<div class="line"><span class="lineno"> 2039</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *pbody = NULL;</div>
<div class="line"><span class="lineno"> 2040</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 2041</span>  <span class="keywordtype">bool</span> free_clear_content = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2042</span> </div>
<div class="line"><span class="lineno"> 2043</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *clear_content = NULL;</div>
<div class="line"><span class="lineno"> 2044</span>  <span class="keywordtype">char</span> *pgpkeylist = NULL;</div>
<div class="line"><span class="lineno"> 2045</span>  <span class="comment">/* save current value of &quot;pgp_sign_as&quot;  and &quot;smime_default_key&quot; */</span></div>
<div class="line"><span class="lineno"> 2046</span>  <span class="keywordtype">char</span> *pgp_sign_as = NULL;</div>
<div class="line"><span class="lineno"> 2047</span>  <span class="keywordtype">char</span> *smime_sign_as = NULL;</div>
<div class="line"><span class="lineno"> 2048</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *tag = NULL;</div>
<div class="line"><span class="lineno"> 2049</span>  <span class="keywordtype">char</span> *err = NULL;</div>
<div class="line"><span class="lineno"> 2050</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *ctype = NULL;</div>
<div class="line"><span class="lineno"> 2051</span>  <span class="keywordtype">char</span> *finalpath = NULL;</div>
<div class="line"><span class="lineno"> 2052</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e_cur = NULL;</div>
<div class="line"><span class="lineno"> 2053</span> </div>
<div class="line"><span class="lineno"> 2054</span>  <span class="keywordflow">if</span> (ea &amp;&amp; (<a class="code hl_define" href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a>(ea) == 1))</div>
<div class="line"><span class="lineno"> 2055</span>    e_cur = *<a class="code hl_define" href="array_8h.html#aebd057bb37aec75b6bdbed9e76715803">ARRAY_GET</a>(ea, 0);</div>
<div class="line"><span class="lineno"> 2056</span> </div>
<div class="line"><span class="lineno"> 2057</span>  <span class="keywordtype">int</span> rc = -1;</div>
<div class="line"><span class="lineno"> 2058</span> </div>
<div class="line"><span class="lineno"> 2059</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>)</div>
<div class="line"><span class="lineno"> 2060</span>    <a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2061</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2062</span>    <a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2063</span> </div>
<div class="line"><span class="lineno"> 2064</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_recall = <a class="code hl_function" href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(sub, <span class="stringliteral">&quot;recall&quot;</span>);</div>
<div class="line"><span class="lineno"> 2065</span> </div>
<div class="line"><span class="lineno"> 2066</span>  <span class="keywordflow">if</span> (!flags &amp;&amp; !e_templ &amp;&amp; (c_recall != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>) &amp;&amp; <a class="code hl_function" href="postpone_2lib_8h.html#a42853d2d4da10271644dc7083ae1c453">mutt_num_postponed</a>(m, <span class="keyword">true</span>))</div>
<div class="line"><span class="lineno"> 2067</span>  {</div>
<div class="line"><span class="lineno"> 2068</span>    <span class="comment">/* If the user is composing a new message, check to see if there</span></div>
<div class="line"><span class="lineno"> 2069</span><span class="comment">     * are any postponed messages first.  */</span></div>
<div class="line"><span class="lineno"> 2070</span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> ans = <a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Recall postponed message?&quot;</span>), sub, <span class="stringliteral">&quot;recall&quot;</span>);</div>
<div class="line"><span class="lineno"> 2071</span>    <span class="keywordflow">if</span> (ans == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>)</div>
<div class="line"><span class="lineno"> 2072</span>      <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 2073</span> </div>
<div class="line"><span class="lineno"> 2074</span>    <span class="keywordflow">if</span> (ans == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div>
<div class="line"><span class="lineno"> 2075</span>      flags |= <a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>;</div>
<div class="line"><span class="lineno"> 2076</span>  }</div>
<div class="line"><span class="lineno"> 2077</span> </div>
<div class="line"><span class="lineno"> 2078</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>)</div>
<div class="line"><span class="lineno"> 2079</span>  {</div>
<div class="line"><span class="lineno"> 2080</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)</div>
<div class="line"><span class="lineno"> 2081</span>    {</div>
<div class="line"><span class="lineno"> 2082</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_pgp_sign_as = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;pgp_sign_as&quot;</span>);</div>
<div class="line"><span class="lineno"> 2083</span>      pgp_sign_as = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(c_pgp_sign_as);</div>
<div class="line"><span class="lineno"> 2084</span>    }</div>
<div class="line"><span class="lineno"> 2085</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>)</div>
<div class="line"><span class="lineno"> 2086</span>    {</div>
<div class="line"><span class="lineno"> 2087</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_smime_sign_as = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;smime_sign_as&quot;</span>);</div>
<div class="line"><span class="lineno"> 2088</span>      smime_sign_as = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(c_smime_sign_as);</div>
<div class="line"><span class="lineno"> 2089</span>    }</div>
<div class="line"><span class="lineno"> 2090</span>  }</div>
<div class="line"><span class="lineno"> 2091</span> </div>
<div class="line"><span class="lineno"> 2092</span>  <span class="comment">/* Delay expansion of aliases until absolutely necessary--shouldn&#39;t</span></div>
<div class="line"><span class="lineno"> 2093</span><span class="comment">   * be necessary unless we are prompting the user or about to execute a</span></div>
<div class="line"><span class="lineno"> 2094</span><span class="comment">   * send-hook.  */</span></div>
<div class="line"><span class="lineno"> 2095</span> </div>
<div class="line"><span class="lineno"> 2096</span>  <span class="keywordflow">if</span> (!e_templ)</div>
<div class="line"><span class="lineno"> 2097</span>  {</div>
<div class="line"><span class="lineno"> 2098</span>    e_templ = <a class="code hl_function" href="email_2email_8c.html#ab53e91414f24cecdc75fcfea6f1824e3">email_new</a>();</div>
<div class="line"><span class="lineno"> 2099</span> </div>
<div class="line"><span class="lineno"> 2100</span>    <span class="keywordflow">if</span> (flags == <a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>)</div>
<div class="line"><span class="lineno"> 2101</span>    {</div>
<div class="line"><span class="lineno"> 2102</span>      rc = <a class="code hl_function" href="postpone_2lib_8h.html#aacde94d20e952e822eac92e0fbf74682">mutt_get_postponed</a>(m, e_templ, &amp;e_cur, fcc);</div>
<div class="line"><span class="lineno"> 2103</span>      <span class="keywordflow">if</span> (rc &lt; 0)</div>
<div class="line"><span class="lineno"> 2104</span>      {</div>
<div class="line"><span class="lineno"> 2105</span>        flags = <a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>;</div>
<div class="line"><span class="lineno"> 2106</span>        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2107</span>      }</div>
<div class="line"><span class="lineno"> 2108</span>      flags = rc;</div>
<div class="line"><span class="lineno"> 2109</span>      <span class="comment">/* If postponed message is a news article, it have</span></div>
<div class="line"><span class="lineno"> 2110</span><span class="comment">       * a &quot;Newsgroups:&quot; header line, then set appropriate flag.  */</span></div>
<div class="line"><span class="lineno"> 2111</span>      <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>)</div>
<div class="line"><span class="lineno"> 2112</span>      {</div>
<div class="line"><span class="lineno"> 2113</span>        flags |= <a class="code hl_define" href="send_8h.html#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>;</div>
<div class="line"><span class="lineno"> 2114</span>        <a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2115</span>      }</div>
<div class="line"><span class="lineno"> 2116</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2117</span>      {</div>
<div class="line"><span class="lineno"> 2118</span>        flags &amp;= <a class="code hl_define" href="send_8h.html#ae31498a0e61355a0b4ece8f0c89daf49">~SEND_NEWS</a>;</div>
<div class="line"><span class="lineno"> 2119</span>        <a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2120</span>      }</div>
<div class="line"><span class="lineno"> 2121</span>    }</div>
<div class="line"><span class="lineno"> 2122</span> </div>
<div class="line"><span class="lineno"> 2123</span>    <span class="keywordflow">if</span> (flags &amp; (<a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>))</div>
<div class="line"><span class="lineno"> 2124</span>    {</div>
<div class="line"><span class="lineno"> 2125</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 2126</span>      <span class="keywordflow">while</span> (b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>)</div>
<div class="line"><span class="lineno"> 2127</span>        b = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 2128</span>      fp_tmp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <span class="stringliteral">&quot;a+&quot;</span>);</div>
<div class="line"><span class="lineno"> 2129</span>      <span class="keywordflow">if</span> (!fp_tmp)</div>
<div class="line"><span class="lineno"> 2130</span>      {</div>
<div class="line"><span class="lineno"> 2131</span>        <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2132</span>        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2133</span>      }</div>
<div class="line"><span class="lineno"> 2134</span>    }</div>
<div class="line"><span class="lineno"> 2135</span> </div>
<div class="line"><span class="lineno"> 2136</span>    <span class="keywordflow">if</span> (!e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>)</div>
<div class="line"><span class="lineno"> 2137</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a> = <a class="code hl_function" href="envelope_8c.html#a406e6f76001e7604ce65ffe972fc19c1">mutt_env_new</a>();</div>
<div class="line"><span class="lineno"> 2138</span>  }</div>
<div class="line"><span class="lineno"> 2139</span> </div>
<div class="line"><span class="lineno"> 2140</span>  <span class="comment">/* Parse and use an eventual list-post header */</span></div>
<div class="line"><span class="lineno"> 2141</span>  <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="send_8h.html#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a>) &amp;&amp; e_cur &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a> &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad0b7bb8cf358dd2d5d1dc5733b3f0be1">list_post</a>)</div>
<div class="line"><span class="lineno"> 2142</span>  {</div>
<div class="line"><span class="lineno"> 2143</span>    <span class="comment">/* Use any list-post header as a template */</span></div>
<div class="line"><span class="lineno"> 2144</span>    <a class="code hl_function" href="email_2parse_8c.html#a85f5f11a70b04f611f3e131f67644fbf">mutt_parse_mailto</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, NULL, e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad0b7bb8cf358dd2d5d1dc5733b3f0be1">list_post</a>);</div>
<div class="line"><span class="lineno"> 2145</span>    <span class="comment">/* We don&#39;t let them set the sender&#39;s address. */</span></div>
<div class="line"><span class="lineno"> 2146</span>    <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2147</span>  }</div>
<div class="line"><span class="lineno"> 2148</span> </div>
<div class="line"><span class="lineno"> 2149</span>  <span class="keywordflow">if</span> (!(flags &amp; (<a class="code hl_define" href="send_8h.html#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a> | <a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>)))</div>
<div class="line"><span class="lineno"> 2150</span>  {</div>
<div class="line"><span class="lineno"> 2151</span>    <span class="comment">/* When SEND_DRAFT_FILE is set, the caller has already</span></div>
<div class="line"><span class="lineno"> 2152</span><span class="comment">     * created the &quot;parent&quot; body structure.  */</span></div>
<div class="line"><span class="lineno"> 2153</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="send_8h.html#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a>))</div>
<div class="line"><span class="lineno"> 2154</span>    {</div>
<div class="line"><span class="lineno"> 2155</span>      pbody = <a class="code hl_function" href="email_2body_8c.html#a37b346253e3b97aa64bb38ffc8d1ea0c">mutt_body_new</a>();</div>
<div class="line"><span class="lineno"> 2156</span>      pbody-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>; <span class="comment">/* don&#39;t kill command-line attachments */</span></div>
<div class="line"><span class="lineno"> 2157</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = pbody;</div>
<div class="line"><span class="lineno"> 2158</span> </div>
<div class="line"><span class="lineno"> 2159</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_content_type = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;content_type&quot;</span>);</div>
<div class="line"><span class="lineno"> 2160</span>      ctype = c_content_type;</div>
<div class="line"><span class="lineno"> 2161</span>      <span class="keywordflow">if</span> (!ctype)</div>
<div class="line"><span class="lineno"> 2162</span>        ctype = <span class="stringliteral">&quot;text/plain&quot;</span>;</div>
<div class="line"><span class="lineno"> 2163</span>      <a class="code hl_function" href="email_2parse_8c.html#a1c0bcb79c2ff930b4131a1ede5828762">mutt_parse_content_type</a>(ctype, e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2164</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2165</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a86721d1d557276cbc9cf69777af8c305">use_disp</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2166</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a99aff302b287a47c407a7412a99630f5">disposition</a> = <a class="code hl_enumvalue" href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073">DISP_INLINE</a>;</div>
<div class="line"><span class="lineno"> 2167</span> </div>
<div class="line"><span class="lineno"> 2168</span>      <span class="keywordflow">if</span> (tempfile)</div>
<div class="line"><span class="lineno"> 2169</span>      {</div>
<div class="line"><span class="lineno"> 2170</span>        fp_tmp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(tempfile, <span class="stringliteral">&quot;a+&quot;</span>);</div>
<div class="line"><span class="lineno"> 2171</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(tempfile);</div>
<div class="line"><span class="lineno"> 2172</span>        <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#a160dd7bb90081f1d45201ef2ab6b46d3">SEND_NO_FREE_HEADER</a>)</div>
<div class="line"><span class="lineno"> 2173</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2174</span>      }</div>
<div class="line"><span class="lineno"> 2175</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2176</span>      {</div>
<div class="line"><span class="lineno"> 2177</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 2178</span>        <a class="code hl_define" href="tmp_8h.html#a271a7828888985955df49205d7846a45">buf_mktemp</a>(buf);</div>
<div class="line"><span class="lineno"> 2179</span>        fp_tmp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf), <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line"><span class="lineno"> 2180</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a> = <a class="code hl_function" href="buffer_8c.html#ad76477cc0c660bc50162393e997233eb">buf_strdup</a>(buf);</div>
<div class="line"><span class="lineno"> 2181</span>        <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno"> 2182</span>      }</div>
<div class="line"><span class="lineno"> 2183</span>    }</div>
<div class="line"><span class="lineno"> 2184</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2185</span>    {</div>
<div class="line"><span class="lineno"> 2186</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 2187</span>      <span class="keywordflow">while</span> (b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>)</div>
<div class="line"><span class="lineno"> 2188</span>        b = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 2189</span>      fp_tmp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <span class="stringliteral">&quot;a+&quot;</span>);</div>
<div class="line"><span class="lineno"> 2190</span>    }</div>
<div class="line"><span class="lineno"> 2191</span> </div>
<div class="line"><span class="lineno"> 2192</span>    <span class="keywordflow">if</span> (!fp_tmp)</div>
<div class="line"><span class="lineno"> 2193</span>    {</div>
<div class="line"><span class="lineno"> 2194</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;can&#39;t create tempfile %s (errno=%d)\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 2195</span>                 e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, errno);</div>
<div class="line"><span class="lineno"> 2196</span>      <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2197</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2198</span>    }</div>
<div class="line"><span class="lineno"> 2199</span>  }</div>
<div class="line"><span class="lineno"> 2200</span> </div>
<div class="line"><span class="lineno"> 2201</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_reverse_name = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;reverse_name&quot;</span>);</div>
<div class="line"><span class="lineno"> 2202</span>  <span class="comment">/* this is handled here so that the user can match ~f in send-hook */</span></div>
<div class="line"><span class="lineno"> 2203</span>  <span class="keywordflow">if</span> (e_cur &amp;&amp; c_reverse_name &amp;&amp; !(flags &amp; (<a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>)))</div>
<div class="line"><span class="lineno"> 2204</span>  {</div>
<div class="line"><span class="lineno"> 2205</span>    <span class="comment">/* We shouldn&#39;t have to worry about alias expansion here since we are</span></div>
<div class="line"><span class="lineno"> 2206</span><span class="comment">     * either replying to a real or postponed message, therefore no aliases</span></div>
<div class="line"><span class="lineno"> 2207</span><span class="comment">     * should exist since the user has not had the opportunity to add</span></div>
<div class="line"><span class="lineno"> 2208</span><span class="comment">     * addresses to the list.  We just have to ensure the postponed messages</span></div>
<div class="line"><span class="lineno"> 2209</span><span class="comment">     * have their aliases expanded.  */</span></div>
<div class="line"><span class="lineno"> 2210</span> </div>
<div class="line"><span class="lineno"> 2211</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>))</div>
<div class="line"><span class="lineno"> 2212</span>    {</div>
<div class="line"><span class="lineno"> 2213</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9a678d278eb301551ba0b3e0dbcfcee630">LL_DEBUG5</a>, <span class="stringliteral">&quot;e_templ-&gt;env-&gt;from before set_reverse_name: %s\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 2214</span>                 <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(<a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>)-&gt;mailbox));</div>
<div class="line"><span class="lineno"> 2215</span>      <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2216</span>    }</div>
<div class="line"><span class="lineno"> 2217</span>    <a class="code hl_function" href="#ac5be3d670b1d7e5cddb605652e9aa859">set_reverse_name</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, sub);</div>
<div class="line"><span class="lineno"> 2218</span>  }</div>
<div class="line"><span class="lineno"> 2219</span> </div>
<div class="line"><span class="lineno"> 2220</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_reply_with_xorig = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;reply_with_xorig&quot;</span>);</div>
<div class="line"><span class="lineno"> 2221</span>  <span class="keywordflow">if</span> (e_cur &amp;&amp; c_reply_with_xorig &amp;&amp; !(flags &amp; (<a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a> | <a class="code hl_define" href="send_8h.html#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a>)))</div>
<div class="line"><span class="lineno"> 2222</span>  {</div>
<div class="line"><span class="lineno"> 2223</span>    <span class="comment">/* We shouldn&#39;t have to worry about freeing &#39;e_templ-&gt;env-&gt;from&#39; before</span></div>
<div class="line"><span class="lineno"> 2224</span><span class="comment">     * setting it here since this code will only execute when doing some</span></div>
<div class="line"><span class="lineno"> 2225</span><span class="comment">     * sort of reply. The pointer will only be set when using the -H command</span></div>
<div class="line"><span class="lineno"> 2226</span><span class="comment">     * line option.</span></div>
<div class="line"><span class="lineno"> 2227</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 2228</span><span class="comment">     * If there is already a from address recorded in &#39;e_templ-&gt;env-&gt;from&#39;,</span></div>
<div class="line"><span class="lineno"> 2229</span><span class="comment">     * then it theoretically comes from `$reverse_name` handling, and we don&#39;t use</span></div>
<div class="line"><span class="lineno"> 2230</span><span class="comment">     * the &#39;X-Original-To header&#39;.  */</span></div>
<div class="line"><span class="lineno"> 2231</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a525bd5213606067d5c2be2e17fbe956b">x_original_to</a>) &amp;&amp; <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>))</div>
<div class="line"><span class="lineno"> 2232</span>    {</div>
<div class="line"><span class="lineno"> 2233</span>      <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, &amp;e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a525bd5213606067d5c2be2e17fbe956b">x_original_to</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 2234</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9a678d278eb301551ba0b3e0dbcfcee630">LL_DEBUG5</a>, <span class="stringliteral">&quot;e_templ-&gt;env-&gt;from extracted from X-Original-To: header: %s\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 2235</span>                 <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(<a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>)-&gt;mailbox));</div>
<div class="line"><span class="lineno"> 2236</span>    }</div>
<div class="line"><span class="lineno"> 2237</span>  }</div>
<div class="line"><span class="lineno"> 2238</span> </div>
<div class="line"><span class="lineno"> 2239</span>  <span class="keywordflow">if</span> (!e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>)</div>
<div class="line"><span class="lineno"> 2240</span>    e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a> = <a class="code hl_function" href="sendlib_8c.html#a891ada8c467ba28aede353247f77d3ec">mutt_gen_msgid</a>();</div>
<div class="line"><span class="lineno"> 2241</span> </div>
<div class="line"><span class="lineno"> 2242</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_resume_draft_files = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;resume_draft_files&quot;</span>);</div>
<div class="line"><span class="lineno"> 2243</span>  <span class="keywordflow">if</span> (!(flags &amp; (<a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>)) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2244</span>      !((flags &amp; <a class="code hl_define" href="send_8h.html#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a>) &amp;&amp; c_resume_draft_files))</div>
<div class="line"><span class="lineno"> 2245</span>  {</div>
<div class="line"><span class="lineno"> 2246</span>    <span class="keywordflow">if</span> ((flags &amp; (<a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a> | <a class="code hl_define" href="send_8h.html#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a> | <a class="code hl_define" href="send_8h.html#aa0a201a6d90a4760c1e0ece8be43c1cb">SEND_TO_SENDER</a>)) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2247</span>        (<a class="code hl_function" href="#a3816a6e89fb33a2c6d3d27e90fa024d0">envelope_defaults</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, ea, flags, sub) == -1))</div>
<div class="line"><span class="lineno"> 2248</span>    {</div>
<div class="line"><span class="lineno"> 2249</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2250</span>    }</div>
<div class="line"><span class="lineno"> 2251</span> </div>
<div class="line"><span class="lineno"> 2252</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_hdrs = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;hdrs&quot;</span>);</div>
<div class="line"><span class="lineno"> 2253</span>    <span class="keywordflow">if</span> (c_hdrs)</div>
<div class="line"><span class="lineno"> 2254</span>      <a class="code hl_function" href="#a93b53146e2fbfb6657f83297e722fdac">process_user_recips</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 2255</span> </div>
<div class="line"><span class="lineno"> 2256</span>    <span class="comment">/* Expand aliases and remove duplicates/crossrefs */</span></div>
<div class="line"><span class="lineno"> 2257</span>    <a class="code hl_function" href="alias_8c.html#aa90fd4b086aebbf4fed5245ecaca1ac1">mutt_expand_aliases_env</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 2258</span> </div>
<div class="line"><span class="lineno"> 2259</span>    <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>)</div>
<div class="line"><span class="lineno"> 2260</span>      <a class="code hl_function" href="#a527f182325365ed083dad7be735bab25">mutt_fix_reply_recipients</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, sub);</div>
<div class="line"><span class="lineno"> 2261</span> </div>
<div class="line"><span class="lineno"> 2262</span>    <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="send_8h.html#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>) &amp;&amp; (m &amp;&amp; m-&gt;<a class="code hl_variable" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> == <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803">MUTT_NNTP</a>) &amp;&amp; !e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>)</div>
<div class="line"><span class="lineno"> 2263</span>    {</div>
<div class="line"><span class="lineno"> 2264</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(((<span class="keyword">struct</span> <a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *) m-&gt;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)-&gt;group);</div>
<div class="line"><span class="lineno"> 2265</span>    }</div>
<div class="line"><span class="lineno"> 2266</span> </div>
<div class="line"><span class="lineno"> 2267</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_auto_edit = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;auto_edit&quot;</span>);</div>
<div class="line"><span class="lineno"> 2268</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_edit_headers = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;edit_headers&quot;</span>);</div>
<div class="line"><span class="lineno"> 2269</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_fast_reply = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;fast_reply&quot;</span>);</div>
<div class="line"><span class="lineno"> 2270</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>) &amp;&amp; !(c_auto_edit &amp;&amp; c_edit_headers) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2271</span>        !((flags &amp; <a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>) &amp;&amp; c_fast_reply))</div>
<div class="line"><span class="lineno"> 2272</span>    {</div>
<div class="line"><span class="lineno"> 2273</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="#a9fb4ee964889bd118582f0938027a659">edit_envelope</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, flags, sub) == -1)</div>
<div class="line"><span class="lineno"> 2274</span>        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2275</span>    }</div>
<div class="line"><span class="lineno"> 2276</span> </div>
<div class="line"><span class="lineno"> 2277</span>    <span class="comment">/* the from address must be set here regardless of whether or not</span></div>
<div class="line"><span class="lineno"> 2278</span><span class="comment">     * $use_from is set so that the &#39;~P&#39; (from you) operator in send-hook</span></div>
<div class="line"><span class="lineno"> 2279</span><span class="comment">     * patterns will work.  if $use_from is unset, the from address is killed</span></div>
<div class="line"><span class="lineno"> 2280</span><span class="comment">     * after send-hooks are evaluated */</span></div>
<div class="line"><span class="lineno"> 2281</span> </div>
<div class="line"><span class="lineno"> 2282</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> killfrom = <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2283</span>    <span class="keywordflow">if</span> (killfrom)</div>
<div class="line"><span class="lineno"> 2284</span>    {</div>
<div class="line"><span class="lineno"> 2285</span>      <a class="code hl_function" href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, <a class="code hl_function" href="#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a>(sub));</div>
<div class="line"><span class="lineno"> 2286</span>    }</div>
<div class="line"><span class="lineno"> 2287</span> </div>
<div class="line"><span class="lineno"> 2288</span>    <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>) &amp;&amp; e_cur)</div>
<div class="line"><span class="lineno"> 2289</span>    {</div>
<div class="line"><span class="lineno"> 2290</span>      <span class="comment">/* change setting based upon message we are replying to */</span></div>
<div class="line"><span class="lineno"> 2291</span>      <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(m, e_cur, <a class="code hl_define" href="hook_8h.html#ab6ec93bff7f691fb01cb5233f4040f62">MUTT_REPLY_HOOK</a>);</div>
<div class="line"><span class="lineno"> 2292</span> </div>
<div class="line"><span class="lineno"> 2293</span>      <span class="comment">/* set the replied flag for the message we are generating so that the</span></div>
<div class="line"><span class="lineno"> 2294</span><span class="comment">       * user can use ~Q in a send-hook to know when reply-hook&#39;s are also</span></div>
<div class="line"><span class="lineno"> 2295</span><span class="comment">       * being used.  */</span></div>
<div class="line"><span class="lineno"> 2296</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2297</span>    }</div>
<div class="line"><span class="lineno"> 2298</span> </div>
<div class="line"><span class="lineno"> 2299</span>    <span class="comment">/* change settings based upon recipients */</span></div>
<div class="line"><span class="lineno"> 2300</span> </div>
<div class="line"><span class="lineno"> 2301</span>    <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, e_templ, <a class="code hl_define" href="hook_8h.html#a365ef87efead32b0e7a8265927171dc1">MUTT_SEND_HOOK</a>);</div>
<div class="line"><span class="lineno"> 2302</span> </div>
<div class="line"><span class="lineno"> 2303</span>    <span class="comment">/* Unset the replied flag from the message we are composing since it is</span></div>
<div class="line"><span class="lineno"> 2304</span><span class="comment">     * no longer required.  This is done here because the FCC&#39;d copy of</span></div>
<div class="line"><span class="lineno"> 2305</span><span class="comment">     * this message was erroneously get the &#39;R&#39;eplied flag when stored in</span></div>
<div class="line"><span class="lineno"> 2306</span><span class="comment">     * a maildir-style mailbox.  */</span></div>
<div class="line"><span class="lineno"> 2307</span>    e_templ-&gt;<a class="code hl_variable" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2308</span> </div>
<div class="line"><span class="lineno"> 2309</span>    <span class="comment">/* $use_from and/or $from might have changed in a send-hook */</span></div>
<div class="line"><span class="lineno"> 2310</span>    <span class="keywordflow">if</span> (killfrom)</div>
<div class="line"><span class="lineno"> 2311</span>    {</div>
<div class="line"><span class="lineno"> 2312</span>      <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2313</span> </div>
<div class="line"><span class="lineno"> 2314</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_use_from = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;use_from&quot;</span>);</div>
<div class="line"><span class="lineno"> 2315</span>      <span class="keywordflow">if</span> (c_use_from &amp;&amp; !(flags &amp; (<a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>)))</div>
<div class="line"><span class="lineno"> 2316</span>        <a class="code hl_function" href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, <a class="code hl_function" href="#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a>(sub));</div>
<div class="line"><span class="lineno"> 2317</span>    }</div>
<div class="line"><span class="lineno"> 2318</span> </div>
<div class="line"><span class="lineno"> 2319</span>    <span class="keywordflow">if</span> (c_hdrs)</div>
<div class="line"><span class="lineno"> 2320</span>      <a class="code hl_function" href="#a9bca5c9f44a7908485389d16dcf20f96">process_user_header</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 2321</span> </div>
<div class="line"><span class="lineno"> 2322</span>    <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>) &amp;&amp; !(flags &amp; <a class="code hl_define" href="send_8h.html#a942f852d37ce6e458cda7f187b922b67">SEND_CONSUMED_STDIN</a>))</div>
<div class="line"><span class="lineno"> 2323</span>    {</div>
<div class="line"><span class="lineno"> 2324</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a>(stdin, fp_tmp) &lt; 0)</div>
<div class="line"><span class="lineno"> 2325</span>      {</div>
<div class="line"><span class="lineno"> 2326</span>        <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error sending message&quot;</span>));</div>
<div class="line"><span class="lineno"> 2327</span>        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2328</span>      }</div>
<div class="line"><span class="lineno"> 2329</span>    }</div>
<div class="line"><span class="lineno"> 2330</span> </div>
<div class="line"><span class="lineno"> 2331</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>))</div>
<div class="line"><span class="lineno"> 2332</span>      <a class="code hl_function" href="#a83f702d9e8d2f453b99a29cc6afe57e1">mutt_make_greeting</a>(e_templ, fp_tmp, sub);</div>
<div class="line"><span class="lineno"> 2333</span> </div>
<div class="line"><span class="lineno"> 2334</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_sig_on_top = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;sig_on_top&quot;</span>);</div>
<div class="line"><span class="lineno"> 2335</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_editor = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;editor&quot;</span>);</div>
<div class="line"><span class="lineno"> 2336</span>    <span class="keywordflow">if</span> (c_sig_on_top &amp;&amp; !(flags &amp; (<a class="code hl_define" href="send_8h.html#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a> | <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>)) &amp;&amp; c_editor)</div>
<div class="line"><span class="lineno"> 2337</span>    {</div>
<div class="line"><span class="lineno"> 2338</span>      <a class="code hl_function" href="#afa5258518aabbe76c14e64e105515acf">append_signature</a>(fp_tmp, sub);</div>
<div class="line"><span class="lineno"> 2339</span>    }</div>
<div class="line"><span class="lineno"> 2340</span> </div>
<div class="line"><span class="lineno"> 2341</span>    <span class="comment">/* include replies/forwarded messages, unless we are given a template */</span></div>
<div class="line"><span class="lineno"> 2342</span>    <span class="keywordflow">if</span> (!tempfile &amp;&amp; (m || !(flags &amp; (<a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a> | <a class="code hl_define" href="send_8h.html#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a>))) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2343</span>        (<a class="code hl_function" href="#a5f6595bb450dfd3e7f3b8b01e45396cd">generate_body</a>(fp_tmp, e_templ, flags, m, ea, sub) == -1))</div>
<div class="line"><span class="lineno"> 2344</span>    {</div>
<div class="line"><span class="lineno"> 2345</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2346</span>    }</div>
<div class="line"><span class="lineno"> 2347</span> </div>
<div class="line"><span class="lineno"> 2348</span>    <span class="keywordflow">if</span> (!c_sig_on_top &amp;&amp; !(flags &amp; (<a class="code hl_define" href="send_8h.html#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a> | <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>)) &amp;&amp; c_editor)</div>
<div class="line"><span class="lineno"> 2349</span>    {</div>
<div class="line"><span class="lineno"> 2350</span>      <a class="code hl_function" href="#afa5258518aabbe76c14e64e105515acf">append_signature</a>(fp_tmp, sub);</div>
<div class="line"><span class="lineno"> 2351</span>    }</div>
<div class="line"><span class="lineno"> 2352</span>  }</div>
<div class="line"><span class="lineno"> 2353</span> </div>
<div class="line"><span class="lineno"> 2354</span>  <span class="comment">/* Only set format=flowed for new messages.  postponed/resent/draftfiles</span></div>
<div class="line"><span class="lineno"> 2355</span><span class="comment">   * should respect the original email.</span></div>
<div class="line"><span class="lineno"> 2356</span><span class="comment">   *</span></div>
<div class="line"><span class="lineno"> 2357</span><span class="comment">   * This is set here so that send-hook can be used to turn the option on.  */</span></div>
<div class="line"><span class="lineno"> 2358</span>  <span class="keywordflow">if</span> (!(flags &amp; (<a class="code hl_define" href="send_8h.html#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a> | <a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a> | <a class="code hl_define" href="send_8h.html#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a>)))</div>
<div class="line"><span class="lineno"> 2359</span>  {</div>
<div class="line"><span class="lineno"> 2360</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_text_flowed = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;text_flowed&quot;</span>);</div>
<div class="line"><span class="lineno"> 2361</span>    <span class="keywordflow">if</span> (c_text_flowed &amp;&amp; <a class="code hl_function" href="#adaad7f2e93eb41299f638d224d90f82b">is_text_plain</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>))</div>
<div class="line"><span class="lineno"> 2362</span>    {</div>
<div class="line"><span class="lineno"> 2363</span>      <a class="code hl_function" href="parameter_8c.html#a42249fc15b1e52df046a0a10de29da44">mutt_param_set</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>, <span class="stringliteral">&quot;format&quot;</span>, <span class="stringliteral">&quot;flowed&quot;</span>);</div>
<div class="line"><span class="lineno"> 2364</span>    }</div>
<div class="line"><span class="lineno"> 2365</span>  }</div>
<div class="line"><span class="lineno"> 2366</span> </div>
<div class="line"><span class="lineno"> 2367</span>  <span class="comment">/* This hook is even called for postponed messages, and can, e.g., be used</span></div>
<div class="line"><span class="lineno"> 2368</span><span class="comment">   * for setting the editor, the sendmail path, or the envelope sender.  */</span></div>
<div class="line"><span class="lineno"> 2369</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, e_templ, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 2370</span> </div>
<div class="line"><span class="lineno"> 2371</span>  <span class="comment">/* wait until now to set the real name portion of our return address so</span></div>
<div class="line"><span class="lineno"> 2372</span><span class="comment">   * that $real_name can be set in a send-hook */</span></div>
<div class="line"><span class="lineno"> 2373</span>  {</div>
<div class="line"><span class="lineno"> 2374</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *from = <a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2375</span>    <span class="keywordflow">if</span> (from &amp;&amp; !from-&gt;<a class="code hl_variable" href="structAddress.html#a01b32bc3153d06f852064f1cca3feb61">personal</a> &amp;&amp; !(flags &amp; (<a class="code hl_define" href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a> | <a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>)))</div>
<div class="line"><span class="lineno"> 2376</span>    {</div>
<div class="line"><span class="lineno"> 2377</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_real_name = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;real_name&quot;</span>);</div>
<div class="line"><span class="lineno"> 2378</span>      <span class="keywordflow">if</span> (c_real_name)</div>
<div class="line"><span class="lineno"> 2379</span>        from-&gt;<a class="code hl_variable" href="structAddress.html#a01b32bc3153d06f852064f1cca3feb61">personal</a> = <a class="code hl_function" href="buffer_8c.html#a7f93abaa65bfc8c15c6ea5d02889c19d">buf_new</a>(c_real_name);</div>
<div class="line"><span class="lineno"> 2380</span>    }</div>
<div class="line"><span class="lineno"> 2381</span>  }</div>
<div class="line"><span class="lineno"> 2382</span> </div>
<div class="line"><span class="lineno"> 2383</span>  <span class="keywordflow">if</span> (!(((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; (flags &amp; <a class="code hl_define" href="send_8h.html#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a>)))</div>
<div class="line"><span class="lineno"> 2384</span>    <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp_tmp);</div>
<div class="line"><span class="lineno"> 2385</span> </div>
<div class="line"><span class="lineno"> 2386</span>  <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>))</div>
<div class="line"><span class="lineno"> 2387</span>  {</div>
<div class="line"><span class="lineno"> 2388</span>    <span class="keyword">struct </span>stat st = { 0 };</div>
<div class="line"><span class="lineno"> 2389</span>    time_t mtime;</div>
<div class="line"><span class="lineno"> 2390</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 2391</span>    <span class="keywordflow">while</span> (b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>)</div>
<div class="line"><span class="lineno"> 2392</span>      b = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 2393</span>    mtime = <a class="code hl_function" href="file_8c.html#a61b50c8615492662cbc27ebbf83090ce">mutt_file_decrease_mtime</a>(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, NULL);</div>
<div class="line"><span class="lineno"> 2394</span>    <span class="keywordflow">if</span> (mtime == (time_t) -1)</div>
<div class="line"><span class="lineno"> 2395</span>    {</div>
<div class="line"><span class="lineno"> 2396</span>      <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2397</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2398</span>    }</div>
<div class="line"><span class="lineno"> 2399</span> </div>
<div class="line"><span class="lineno"> 2400</span>    <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(b, sub);</div>
<div class="line"><span class="lineno"> 2401</span> </div>
<div class="line"><span class="lineno"> 2402</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_edit_headers = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;edit_headers&quot;</span>);</div>
<div class="line"><span class="lineno"> 2403</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_auto_edit = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;auto_edit&quot;</span>);</div>
<div class="line"><span class="lineno"> 2404</span> </div>
<div class="line"><span class="lineno"> 2405</span>    <span class="comment">/* Select whether or not the user&#39;s editor should be called now.  We</span></div>
<div class="line"><span class="lineno"> 2406</span><span class="comment">     * don&#39;t want to do this when:</span></div>
<div class="line"><span class="lineno"> 2407</span><span class="comment">     * 1) we are sending a key/cert</span></div>
<div class="line"><span class="lineno"> 2408</span><span class="comment">     * 2) we are forwarding a message and the user doesn&#39;t want to edit it.</span></div>
<div class="line"><span class="lineno"> 2409</span><span class="comment">     *    This is controlled by the quadoption $forward_edit.  However, if</span></div>
<div class="line"><span class="lineno"> 2410</span><span class="comment">     *    both $edit_headers and $auto_edit are set, we want to ignore the</span></div>
<div class="line"><span class="lineno"> 2411</span><span class="comment">     *    setting of $forward_edit because the user probably needs to add the</span></div>
<div class="line"><span class="lineno"> 2412</span><span class="comment">     *    recipients.  */</span></div>
<div class="line"><span class="lineno"> 2413</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="send_8h.html#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2414</span>        (((flags &amp; <a class="code hl_define" href="send_8h.html#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a>) == 0) || (c_edit_headers &amp;&amp; c_auto_edit) ||</div>
<div class="line"><span class="lineno"> 2415</span>         (<a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Edit forwarded message?&quot;</span>), sub, <span class="stringliteral">&quot;forward_edit&quot;</span>) == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)))</div>
<div class="line"><span class="lineno"> 2416</span>    {</div>
<div class="line"><span class="lineno"> 2417</span>      <span class="comment">/* If the this isn&#39;t a text message, look for a mailcap edit command */</span></div>
<div class="line"><span class="lineno"> 2418</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_editor = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;editor&quot;</span>);</div>
<div class="line"><span class="lineno"> 2419</span>      b = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 2420</span>      <span class="keywordflow">while</span> (b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>)</div>
<div class="line"><span class="lineno"> 2421</span>        b = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 2422</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="muttlib_8c.html#a8973b2e5185609bfc5e0ef136fcd3177">mutt_needs_mailcap</a>(b))</div>
<div class="line"><span class="lineno"> 2423</span>      {</div>
<div class="line"><span class="lineno"> 2424</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt__attach_8c.html#a0b2292184984705d60be088b9dbbecfb">mutt_edit_attachment</a>(b))</div>
<div class="line"><span class="lineno"> 2425</span>          <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2426</span>      }</div>
<div class="line"><span class="lineno"> 2427</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c_edit_headers)</div>
<div class="line"><span class="lineno"> 2428</span>      {</div>
<div class="line"><span class="lineno"> 2429</span>        <a class="code hl_function" href="envelope_8c.html#afd00cc8d84947cbd55e082420b5732f1">mutt_env_to_local</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 2430</span>        <a class="code hl_function" href="mutt__header_8c.html#add6fa85ce7ef8dcad27d465fbbc27708">mutt_edit_headers</a>(c_editor, b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, e_templ, fcc);</div>
<div class="line"><span class="lineno"> 2431</span>        <a class="code hl_function" href="envelope_8c.html#a0108f989ca58622df272cf31b610395e">mutt_env_to_intl</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, NULL, NULL);</div>
<div class="line"><span class="lineno"> 2432</span>      }</div>
<div class="line"><span class="lineno"> 2433</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2434</span>      {</div>
<div class="line"><span class="lineno"> 2435</span>        <a class="code hl_function" href="curs__lib_8c.html#a0590f11f42a6242002ea4c842438231b">mutt_edit_file</a>(c_editor, b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2436</span>        <span class="keywordflow">if</span> (stat(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, &amp;st) == 0)</div>
<div class="line"><span class="lineno"> 2437</span>        {</div>
<div class="line"><span class="lineno"> 2438</span>          <span class="keywordflow">if</span> (mtime != st.st_mtime)</div>
<div class="line"><span class="lineno"> 2439</span>            <a class="code hl_function" href="#ad5e73f6a253107a7f55ee7388fbbf92f">fix_end_of_file</a>(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2440</span>        }</div>
<div class="line"><span class="lineno"> 2441</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2442</span>        {</div>
<div class="line"><span class="lineno"> 2443</span>          <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2444</span>        }</div>
<div class="line"><span class="lineno"> 2445</span>      }</div>
<div class="line"><span class="lineno"> 2446</span> </div>
<div class="line"><span class="lineno"> 2447</span>      <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, e_templ, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 2448</span>    }</div>
<div class="line"><span class="lineno"> 2449</span> </div>
<div class="line"><span class="lineno"> 2450</span>    <span class="keywordflow">if</span> (!(flags &amp; (<a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="send_8h.html#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a> | <a class="code hl_define" href="send_8h.html#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a> | <a class="code hl_define" href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a> | <a class="code hl_define" href="send_8h.html#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a>)))</div>
<div class="line"><span class="lineno"> 2451</span>    {</div>
<div class="line"><span class="lineno"> 2452</span>      <span class="keywordflow">if</span> (stat(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, &amp;st) == 0)</div>
<div class="line"><span class="lineno"> 2453</span>      {</div>
<div class="line"><span class="lineno"> 2454</span>        <span class="comment">/* if the file was not modified, bail out now */</span></div>
<div class="line"><span class="lineno"> 2455</span>        <span class="keywordflow">if</span> ((mtime == st.st_mtime) &amp;&amp; !e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 2456</span>            (<a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Abort unmodified message?&quot;</span>), sub, <span class="stringliteral">&quot;abort_unmodified&quot;</span>) == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>))</div>
<div class="line"><span class="lineno"> 2457</span>        {</div>
<div class="line"><span class="lineno"> 2458</span>          <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Aborted unmodified message&quot;</span>));</div>
<div class="line"><span class="lineno"> 2459</span>          <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2460</span>        }</div>
<div class="line"><span class="lineno"> 2461</span>      }</div>
<div class="line"><span class="lineno"> 2462</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2463</span>      {</div>
<div class="line"><span class="lineno"> 2464</span>        <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2465</span>      }</div>
<div class="line"><span class="lineno"> 2466</span>    }</div>
<div class="line"><span class="lineno"> 2467</span>  }</div>
<div class="line"><span class="lineno"> 2468</span> </div>
<div class="line"><span class="lineno"> 2469</span>  <span class="comment">/* Set the message security unless:</span></div>
<div class="line"><span class="lineno"> 2470</span><span class="comment">   * 1) crypto support is not enabled (WithCrypto==0)</span></div>
<div class="line"><span class="lineno"> 2471</span><span class="comment">   * 2) pgp: header field was present during message editing with $edit_headers (e_templ-&gt;security != 0)</span></div>
<div class="line"><span class="lineno"> 2472</span><span class="comment">   * 3) we are resending a message</span></div>
<div class="line"><span class="lineno"> 2473</span><span class="comment">   * 4) we are recalling a postponed message (don&#39;t override the user&#39;s saved settings)</span></div>
<div class="line"><span class="lineno"> 2474</span><span class="comment">   * 5) we are in batch mode</span></div>
<div class="line"><span class="lineno"> 2475</span><span class="comment">   * But 3, 4, and 5, can be overridden with &#39;-C&#39; in the command line (flags &amp; SEND_CLI_CRYPTO)</span></div>
<div class="line"><span class="lineno"> 2476</span><span class="comment">   *</span></div>
<div class="line"><span class="lineno"> 2477</span><span class="comment">   * This is done after allowing the user to edit the message so that security</span></div>
<div class="line"><span class="lineno"> 2478</span><span class="comment">   * settings can be configured with send2-hook and $edit_headers.  */</span></div>
<div class="line"><span class="lineno"> 2479</span>  <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> == 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2480</span>      ((flags &amp; <a class="code hl_define" href="send_8h.html#ab52a058ff3342266b80a3890e2b277a4">SEND_CLI_CRYPTO</a>) || !(flags &amp; (<a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a> | <a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="send_8h.html#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>))))</div>
<div class="line"><span class="lineno"> 2481</span>  {</div>
<div class="line"><span class="lineno"> 2482</span>    <span class="keywordtype">bool</span> c_autocrypt = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2483</span>    <span class="keywordtype">bool</span> c_autocrypt_reply = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2484</span> </div>
<div class="line"><span class="lineno"> 2485</span><span class="preprocessor">#ifdef USE_AUTOCRYPT</span></div>
<div class="line"><span class="lineno"> 2486</span>    c_autocrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;autocrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 2487</span>    c_autocrypt_reply = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;autocrypt_reply&quot;</span>);</div>
<div class="line"><span class="lineno"> 2488</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2489</span> </div>
<div class="line"><span class="lineno"> 2490</span>    <span class="keywordflow">if</span> (c_autocrypt &amp;&amp; c_autocrypt_reply &amp;&amp; e_cur &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>))</div>
<div class="line"><span class="lineno"> 2491</span>    {</div>
<div class="line"><span class="lineno"> 2492</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= (<a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#ae0ce4a742538f3ee3e1bfbf143c794fb">SEC_AUTOCRYPT_OVERRIDE</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>);</div>
<div class="line"><span class="lineno"> 2493</span>    }</div>
<div class="line"><span class="lineno"> 2494</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2495</span>    {</div>
<div class="line"><span class="lineno"> 2496</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_auto_sign = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_auto_sign&quot;</span>);</div>
<div class="line"><span class="lineno"> 2497</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_auto_encrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_auto_encrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 2498</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_reply_encrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_reply_encrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 2499</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_reply_sign = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_reply_sign&quot;</span>);</div>
<div class="line"><span class="lineno"> 2500</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_reply_sign_encrypted = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_reply_sign_encrypted&quot;</span>);</div>
<div class="line"><span class="lineno"> 2501</span> </div>
<div class="line"><span class="lineno"> 2502</span>      <span class="keywordflow">if</span> (c_crypt_auto_sign)</div>
<div class="line"><span class="lineno"> 2503</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>;</div>
<div class="line"><span class="lineno"> 2504</span>      <span class="keywordflow">if</span> (c_crypt_auto_encrypt)</div>
<div class="line"><span class="lineno"> 2505</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>;</div>
<div class="line"><span class="lineno"> 2506</span>      <span class="keywordflow">if</span> (c_crypt_reply_encrypt &amp;&amp; e_cur &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>))</div>
<div class="line"><span class="lineno"> 2507</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>;</div>
<div class="line"><span class="lineno"> 2508</span>      <span class="keywordflow">if</span> (c_crypt_reply_sign &amp;&amp; e_cur &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>))</div>
<div class="line"><span class="lineno"> 2509</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>;</div>
<div class="line"><span class="lineno"> 2510</span>      <span class="keywordflow">if</span> (c_crypt_reply_sign_encrypted &amp;&amp; e_cur &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>))</div>
<div class="line"><span class="lineno"> 2511</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>;</div>
<div class="line"><span class="lineno"> 2512</span> </div>
<div class="line"><span class="lineno"> 2513</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_opportunistic_encrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_opportunistic_encrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 2514</span> </div>
<div class="line"><span class="lineno"> 2515</span>      <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2516</span>          ((e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>)) || c_crypt_opportunistic_encrypt))</div>
<div class="line"><span class="lineno"> 2517</span>      {</div>
<div class="line"><span class="lineno"> 2518</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> c_pgp_auto_inline = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;pgp_auto_inline&quot;</span>);</div>
<div class="line"><span class="lineno"> 2519</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> c_pgp_reply_inline = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;pgp_reply_inline&quot;</span>);</div>
<div class="line"><span class="lineno"> 2520</span> </div>
<div class="line"><span class="lineno"> 2521</span>        <span class="keywordflow">if</span> (c_pgp_auto_inline)</div>
<div class="line"><span class="lineno"> 2522</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a074f827472ad45f11ec1132cdfed2daf">SEC_INLINE</a>;</div>
<div class="line"><span class="lineno"> 2523</span>        <span class="keywordflow">if</span> (c_pgp_reply_inline &amp;&amp; e_cur &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a074f827472ad45f11ec1132cdfed2daf">SEC_INLINE</a>))</div>
<div class="line"><span class="lineno"> 2524</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a074f827472ad45f11ec1132cdfed2daf">SEC_INLINE</a>;</div>
<div class="line"><span class="lineno"> 2525</span>      }</div>
<div class="line"><span class="lineno"> 2526</span>    }</div>
<div class="line"><span class="lineno"> 2527</span> </div>
<div class="line"><span class="lineno"> 2528</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_opportunistic_encrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_opportunistic_encrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 2529</span> </div>
<div class="line"><span class="lineno"> 2530</span>    <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> || c_crypt_opportunistic_encrypt)</div>
<div class="line"><span class="lineno"> 2531</span>    {</div>
<div class="line"><span class="lineno"> 2532</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_auto_pgp = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_auto_pgp&quot;</span>);</div>
<div class="line"><span class="lineno"> 2533</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_auto_smime = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_auto_smime&quot;</span>);</div>
<div class="line"><span class="lineno"> 2534</span> </div>
<div class="line"><span class="lineno"> 2535</span>      <span class="comment">/* When replying / forwarding, use the original message&#39;s</span></div>
<div class="line"><span class="lineno"> 2536</span><span class="comment">       * crypto system.  According to the documentation,</span></div>
<div class="line"><span class="lineno"> 2537</span><span class="comment">       * smime_is_default should be disregarded here.</span></div>
<div class="line"><span class="lineno"> 2538</span><span class="comment">       *</span></div>
<div class="line"><span class="lineno"> 2539</span><span class="comment">       * Problem: At least with forwarding, this doesn&#39;t really</span></div>
<div class="line"><span class="lineno"> 2540</span><span class="comment">       * make much sense. Should we have an option to completely</span></div>
<div class="line"><span class="lineno"> 2541</span><span class="comment">       * disable individual mechanisms at run-time?  */</span></div>
<div class="line"><span class="lineno"> 2542</span>      <span class="keywordflow">if</span> (e_cur)</div>
<div class="line"><span class="lineno"> 2543</span>      {</div>
<div class="line"><span class="lineno"> 2544</span>        <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; c_crypt_auto_pgp &amp;&amp;</div>
<div class="line"><span class="lineno"> 2545</span>            (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>))</div>
<div class="line"><span class="lineno"> 2546</span>        {</div>
<div class="line"><span class="lineno"> 2547</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>;</div>
<div class="line"><span class="lineno"> 2548</span>        }</div>
<div class="line"><span class="lineno"> 2549</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>) != 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2550</span>                 c_crypt_auto_smime &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>))</div>
<div class="line"><span class="lineno"> 2551</span>        {</div>
<div class="line"><span class="lineno"> 2552</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>;</div>
<div class="line"><span class="lineno"> 2553</span>        }</div>
<div class="line"><span class="lineno"> 2554</span>      }</div>
<div class="line"><span class="lineno"> 2555</span> </div>
<div class="line"><span class="lineno"> 2556</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_smime_is_default = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;smime_is_default&quot;</span>);</div>
<div class="line"><span class="lineno"> 2557</span> </div>
<div class="line"><span class="lineno"> 2558</span>      <span class="comment">/* No crypto mechanism selected? Use availability + smime_is_default</span></div>
<div class="line"><span class="lineno"> 2559</span><span class="comment">       * for the decision.  */</span></div>
<div class="line"><span class="lineno"> 2560</span>      <span class="keywordflow">if</span> (!(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)))</div>
<div class="line"><span class="lineno"> 2561</span>      {</div>
<div class="line"><span class="lineno"> 2562</span>        <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>) != 0) &amp;&amp; c_crypt_auto_smime &amp;&amp; c_smime_is_default)</div>
<div class="line"><span class="lineno"> 2563</span>        {</div>
<div class="line"><span class="lineno"> 2564</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>;</div>
<div class="line"><span class="lineno"> 2565</span>        }</div>
<div class="line"><span class="lineno"> 2566</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; c_crypt_auto_pgp)</div>
<div class="line"><span class="lineno"> 2567</span>        {</div>
<div class="line"><span class="lineno"> 2568</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>;</div>
<div class="line"><span class="lineno"> 2569</span>        }</div>
<div class="line"><span class="lineno"> 2570</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>) != 0) &amp;&amp; c_crypt_auto_smime)</div>
<div class="line"><span class="lineno"> 2571</span>        {</div>
<div class="line"><span class="lineno"> 2572</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>;</div>
<div class="line"><span class="lineno"> 2573</span>        }</div>
<div class="line"><span class="lineno"> 2574</span>      }</div>
<div class="line"><span class="lineno"> 2575</span>    }</div>
<div class="line"><span class="lineno"> 2576</span> </div>
<div class="line"><span class="lineno"> 2577</span>    <span class="comment">/* opportunistic encrypt relies on SMIME or PGP already being selected */</span></div>
<div class="line"><span class="lineno"> 2578</span>    <span class="keywordflow">if</span> (c_crypt_opportunistic_encrypt)</div>
<div class="line"><span class="lineno"> 2579</span>    {</div>
<div class="line"><span class="lineno"> 2580</span>      <span class="comment">/* If something has already enabled encryption, e.g. `$crypt_auto_encrypt`</span></div>
<div class="line"><span class="lineno"> 2581</span><span class="comment">       * or `$crypt_reply_encrypt`, then don&#39;t enable opportunistic encrypt for</span></div>
<div class="line"><span class="lineno"> 2582</span><span class="comment">       * the message.  */</span></div>
<div class="line"><span class="lineno"> 2583</span>      <span class="keywordflow">if</span> (!(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>)))</div>
<div class="line"><span class="lineno"> 2584</span>      {</div>
<div class="line"><span class="lineno"> 2585</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a2fb0b0aa796d8d79a746001d09c2a2c7">SEC_OPPENCRYPT</a>;</div>
<div class="line"><span class="lineno"> 2586</span>        <a class="code hl_function" href="crypt_8c.html#a2afe38b474061773d69624018621ff1e">crypt_opportunistic_encrypt</a>(e_templ);</div>
<div class="line"><span class="lineno"> 2587</span>      }</div>
<div class="line"><span class="lineno"> 2588</span>    }</div>
<div class="line"><span class="lineno"> 2589</span> </div>
<div class="line"><span class="lineno"> 2590</span>    <span class="comment">/* No permissible mechanisms found.  Don&#39;t sign or encrypt. */</span></div>
<div class="line"><span class="lineno"> 2591</span>    <span class="keywordflow">if</span> (!(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)))</div>
<div class="line"><span class="lineno"> 2592</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> = <a class="code hl_define" href="ncrypt_2lib_8h.html#a95845954210adfc850d5602843f858d4">SEC_NO_FLAGS</a>;</div>
<div class="line"><span class="lineno"> 2593</span>  }</div>
<div class="line"><span class="lineno"> 2594</span> </div>
<div class="line"><span class="lineno"> 2595</span>  <span class="comment">/* Deal with the corner case where the crypto module backend is not available.</span></div>
<div class="line"><span class="lineno"> 2596</span><span class="comment">   * This can happen if configured without PGP/SMIME and with GPGME, but</span></div>
<div class="line"><span class="lineno"> 2597</span><span class="comment">   * $crypt_use_gpgme is unset.  */</span></div>
<div class="line"><span class="lineno"> 2598</span>  <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp;&amp; !<a class="code hl_function" href="cryptglue_8c.html#a07a6c891658dd90ef8333a1e5bbcc285">crypt_has_module_backend</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a>))</div>
<div class="line"><span class="lineno"> 2599</span>  {</div>
<div class="line"><span class="lineno"> 2600</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No crypto backend configured.  Disabling message security setting.&quot;</span>));</div>
<div class="line"><span class="lineno"> 2601</span>    e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> = <a class="code hl_define" href="ncrypt_2lib_8h.html#a95845954210adfc850d5602843f858d4">SEC_NO_FLAGS</a>;</div>
<div class="line"><span class="lineno"> 2602</span>  }</div>
<div class="line"><span class="lineno"> 2603</span> </div>
<div class="line"><span class="lineno"> 2604</span>  <span class="comment">/* specify a default fcc.  if we are in batchmode, only save a copy of</span></div>
<div class="line"><span class="lineno"> 2605</span><span class="comment">   * the message if the value of $copy is yes or ask-yes */</span></div>
<div class="line"><span class="lineno"> 2606</span> </div>
<div class="line"><span class="lineno"> 2607</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_copy = <a class="code hl_function" href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(sub, <span class="stringliteral">&quot;copy&quot;</span>);</div>
<div class="line"><span class="lineno"> 2608</span> </div>
<div class="line"><span class="lineno"> 2609</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(fcc) &amp;&amp; !(flags &amp; <a class="code hl_define" href="send_8h.html#a0124ba8cc117eff717a4ddf672c22018">SEND_POSTPONED_FCC</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2610</span>      (!(flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>) || (c_copy &amp; 0x1)))</div>
<div class="line"><span class="lineno"> 2611</span>  {</div>
<div class="line"><span class="lineno"> 2612</span>    <span class="comment">/* set the default FCC */</span></div>
<div class="line"><span class="lineno"> 2613</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> killfrom = <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2614</span>    <span class="keywordflow">if</span> (killfrom)</div>
<div class="line"><span class="lineno"> 2615</span>    {</div>
<div class="line"><span class="lineno"> 2616</span>      <a class="code hl_function" href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, <a class="code hl_function" href="#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a>(sub));</div>
<div class="line"><span class="lineno"> 2617</span>    }</div>
<div class="line"><span class="lineno"> 2618</span>    <a class="code hl_function" href="hook_8c.html#a6d228c86f5a1900b27af0fde26991a63">mutt_select_fcc</a>(fcc, e_templ);</div>
<div class="line"><span class="lineno"> 2619</span>    <span class="keywordflow">if</span> (killfrom)</div>
<div class="line"><span class="lineno"> 2620</span>    {</div>
<div class="line"><span class="lineno"> 2621</span>      <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2622</span>    }</div>
<div class="line"><span class="lineno"> 2623</span>  }</div>
<div class="line"><span class="lineno"> 2624</span> </div>
<div class="line"><span class="lineno"> 2625</span>  <a class="code hl_function" href="rfc3676_8c.html#ae80c6b55541960f57f67f4ea3e4467e8">mutt_rfc3676_space_stuff</a>(e_templ);</div>
<div class="line"><span class="lineno"> 2626</span> </div>
<div class="line"><span class="lineno"> 2627</span>  <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, sub);</div>
<div class="line"><span class="lineno"> 2628</span> </div>
<div class="line"><span class="lineno"> 2629</span>  <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>))</div>
<div class="line"><span class="lineno"> 2630</span>  {</div>
<div class="line"><span class="lineno"> 2631</span>  main_loop:</div>
<div class="line"><span class="lineno"> 2632</span> </div>
<div class="line"><span class="lineno"> 2633</span>    <a class="code hl_function" href="muttlib_8c.html#a777680c324667521d8c486051c22fe10">buf_pretty_mailbox</a>(fcc);</div>
<div class="line"><span class="lineno"> 2634</span>    i = <a class="code hl_function" href="group__gui__dlg.html#ga4bb08d7fcc8d6dc6524a6a9d153c5820">dlg_compose</a>(e_templ, fcc,</div>
<div class="line"><span class="lineno"> 2635</span>                    ((flags &amp; <a class="code hl_define" href="send_8h.html#a160dd7bb90081f1d45201ef2ab6b46d3">SEND_NO_FREE_HEADER</a>) ? <a class="code hl_define" href="compose_2lib_8h.html#adf568d592758fae1758bbb4dc4e3e554">MUTT_COMPOSE_NOFREEHEADER</a> : 0), sub);</div>
<div class="line"><span class="lineno"> 2636</span>    <span class="keywordflow">if</span> (i == -1)</div>
<div class="line"><span class="lineno"> 2637</span>    {</div>
<div class="line"><span class="lineno"> 2638</span>      <span class="comment">/* abort */</span></div>
<div class="line"><span class="lineno"> 2639</span>      <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>)</div>
<div class="line"><span class="lineno"> 2640</span>        <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Article not posted&quot;</span>));</div>
<div class="line"><span class="lineno"> 2641</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2642</span>        <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Mail not sent&quot;</span>));</div>
<div class="line"><span class="lineno"> 2643</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2644</span>    }</div>
<div class="line"><span class="lineno"> 2645</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == 1)</div>
<div class="line"><span class="lineno"> 2646</span>    {</div>
<div class="line"><span class="lineno"> 2647</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="#a08794ff2edb022ef0c0f59086da9675f">postpone_message</a>(e_templ, e_cur, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fcc), flags, sub) != 0)</div>
<div class="line"><span class="lineno"> 2648</span>        <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2649</span>      <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Message postponed&quot;</span>));</div>
<div class="line"><span class="lineno"> 2650</span>      rc = 1;</div>
<div class="line"><span class="lineno"> 2651</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2652</span>    }</div>
<div class="line"><span class="lineno"> 2653</span>  }</div>
<div class="line"><span class="lineno"> 2654</span> </div>
<div class="line"><span class="lineno"> 2655</span>  <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="send_8h.html#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>))</div>
<div class="line"><span class="lineno"> 2656</span>  {</div>
<div class="line"><span class="lineno"> 2657</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="address_2address_8c.html#a9a6c4ff878258def25f155501ddb3e7a">mutt_addrlist_count_recips</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>) == 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2658</span>        (<a class="code hl_function" href="address_2address_8c.html#a9a6c4ff878258def25f155501ddb3e7a">mutt_addrlist_count_recips</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>) == 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2659</span>        (<a class="code hl_function" href="address_2address_8c.html#a9a6c4ff878258def25f155501ddb3e7a">mutt_addrlist_count_recips</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#aad427832f4ae422f1b16d0896c1d3af6">bcc</a>) == 0))</div>
<div class="line"><span class="lineno"> 2660</span>    {</div>
<div class="line"><span class="lineno"> 2661</span>      <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>)</div>
<div class="line"><span class="lineno"> 2662</span>      {</div>
<div class="line"><span class="lineno"> 2663</span>        puts(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No recipients specified&quot;</span>));</div>
<div class="line"><span class="lineno"> 2664</span>        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2665</span>      }</div>
<div class="line"><span class="lineno"> 2666</span> </div>
<div class="line"><span class="lineno"> 2667</span>      <a class="code hl_define" href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No recipients specified&quot;</span>));</div>
<div class="line"><span class="lineno"> 2668</span>      <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2669</span>    }</div>
<div class="line"><span class="lineno"> 2670</span>  }</div>
<div class="line"><span class="lineno"> 2671</span> </div>
<div class="line"><span class="lineno"> 2672</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="envelope_8c.html#a0108f989ca58622df272cf31b610395e">mutt_env_to_intl</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, &amp;tag, &amp;err))</div>
<div class="line"><span class="lineno"> 2673</span>  {</div>
<div class="line"><span class="lineno"> 2674</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Bad IDN in &#39;%s&#39;: &#39;%s&#39;&quot;</span>), tag, err);</div>
<div class="line"><span class="lineno"> 2675</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;err);</div>
<div class="line"><span class="lineno"> 2676</span>    <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>)</div>
<div class="line"><span class="lineno"> 2677</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2678</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2679</span>  }</div>
<div class="line"><span class="lineno"> 2680</span> </div>
<div class="line"><span class="lineno"> 2681</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_abort_nosubject = <a class="code hl_function" href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(sub, <span class="stringliteral">&quot;abort_nosubject&quot;</span>);</div>
<div class="line"><span class="lineno"> 2682</span> </div>
<div class="line"><span class="lineno"> 2683</span>  <span class="keywordflow">if</span> (!e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">subject</a> &amp;&amp; !(flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2684</span>      (<a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No subject, abort sending?&quot;</span>), sub, <span class="stringliteral">&quot;abort_nosubject&quot;</span>) != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>))</div>
<div class="line"><span class="lineno"> 2685</span>  {</div>
<div class="line"><span class="lineno"> 2686</span>    <span class="comment">/* if the abort is automatic, print an error message */</span></div>
<div class="line"><span class="lineno"> 2687</span>    <span class="keywordflow">if</span> (c_abort_nosubject == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div>
<div class="line"><span class="lineno"> 2688</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No subject specified&quot;</span>));</div>
<div class="line"><span class="lineno"> 2689</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2690</span>  }</div>
<div class="line"><span class="lineno"> 2691</span> </div>
<div class="line"><span class="lineno"> 2692</span>  <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="send_8h.html#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>) &amp;&amp; !e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">subject</a>)</div>
<div class="line"><span class="lineno"> 2693</span>  {</div>
<div class="line"><span class="lineno"> 2694</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No subject specified&quot;</span>));</div>
<div class="line"><span class="lineno"> 2695</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2696</span>  }</div>
<div class="line"><span class="lineno"> 2697</span> </div>
<div class="line"><span class="lineno"> 2698</span>  <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="send_8h.html#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>) &amp;&amp; !e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>)</div>
<div class="line"><span class="lineno"> 2699</span>  {</div>
<div class="line"><span class="lineno"> 2700</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No newsgroup specified&quot;</span>));</div>
<div class="line"><span class="lineno"> 2701</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2702</span>  }</div>
<div class="line"><span class="lineno"> 2703</span> </div>
<div class="line"><span class="lineno"> 2704</span>  <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>) &amp;&amp; <a class="code hl_function" href="#aad5805f2620506ae4bc2d7f6474cb849">abort_for_missing_attachments</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, sub))</div>
<div class="line"><span class="lineno"> 2705</span>  {</div>
<div class="line"><span class="lineno"> 2706</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2707</span>  }</div>
<div class="line"><span class="lineno"> 2708</span> </div>
<div class="line"><span class="lineno"> 2709</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_confirm_empty_to = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;confirm_empty_to&quot;</span>);</div>
<div class="line"><span class="lineno"> 2710</span>  <span class="keywordflow">if</span> (c_confirm_empty_to &amp;&amp; <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2711</span>      (<a class="code hl_function" href="question_2lib_8h.html#ae359ab94312d9ae6bcad5ab5b52bd529">query_yesorno</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No recipients specified in To. Send anyway?&quot;</span>), <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>) == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>))</div>
<div class="line"><span class="lineno"> 2712</span>  {</div>
<div class="line"><span class="lineno"> 2713</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2714</span>  }</div>
<div class="line"><span class="lineno"> 2715</span> </div>
<div class="line"><span class="lineno"> 2716</span>  <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 2717</span>    e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a9700f763b34719d97a56b5f9b032d97a">mutt_make_multipart</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2718</span> </div>
<div class="line"><span class="lineno"> 2719</span>  <span class="comment">/* Ok, we need to do it this way instead of handling all fcc stuff in</span></div>
<div class="line"><span class="lineno"> 2720</span><span class="comment">   * one place in order to avoid going to main_loop with encoded &quot;env&quot;</span></div>
<div class="line"><span class="lineno"> 2721</span><span class="comment">   * in case of error.  Ugh.  */</span></div>
<div class="line"><span class="lineno"> 2722</span> </div>
<div class="line"><span class="lineno"> 2723</span>  <a class="code hl_function" href="#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, <span class="keyword">true</span>, sub);</div>
<div class="line"><span class="lineno"> 2724</span> </div>
<div class="line"><span class="lineno"> 2725</span>  <span class="comment">/* Make sure that clear_content and free_clear_content are</span></div>
<div class="line"><span class="lineno"> 2726</span><span class="comment">   * properly initialized -- we may visit this particular place in</span></div>
<div class="line"><span class="lineno"> 2727</span><span class="comment">   * the code multiple times, including after a failed call to</span></div>
<div class="line"><span class="lineno"> 2728</span><span class="comment">   * mutt_protect().  */</span></div>
<div class="line"><span class="lineno"> 2729</span> </div>
<div class="line"><span class="lineno"> 2730</span>  clear_content = NULL;</div>
<div class="line"><span class="lineno"> 2731</span>  free_clear_content = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2732</span> </div>
<div class="line"><span class="lineno"> 2733</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a>)</div>
<div class="line"><span class="lineno"> 2734</span>  {</div>
<div class="line"><span class="lineno"> 2735</span>    <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>))</div>
<div class="line"><span class="lineno"> 2736</span>    {</div>
<div class="line"><span class="lineno"> 2737</span>      <span class="comment">/* save the decrypted attachments */</span></div>
<div class="line"><span class="lineno"> 2738</span>      clear_content = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 2739</span> </div>
<div class="line"><span class="lineno"> 2740</span>      <span class="keywordflow">if</span> ((<a class="code hl_function" href="crypt_8c.html#abb04ccb83d144391034d86704c52b987">crypt_get_keys</a>(e_templ, &amp;pgpkeylist, <span class="keyword">false</span>) == -1) ||</div>
<div class="line"><span class="lineno"> 2741</span>          (<a class="code hl_function" href="crypt_8c.html#a896502d4448fefadaf8786a4f2d5556e">mutt_protect</a>(e_templ, pgpkeylist, <span class="keyword">false</span>) == -1))</div>
<div class="line"><span class="lineno"> 2742</span>      {</div>
<div class="line"><span class="lineno"> 2743</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;mixed&quot;</span>))</div>
<div class="line"><span class="lineno"> 2744</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2745</span> </div>
<div class="line"><span class="lineno"> 2746</span>        <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;pgpkeylist);</div>
<div class="line"><span class="lineno"> 2747</span> </div>
<div class="line"><span class="lineno"> 2748</span>        <a class="code hl_function" href="#af1b54154700865964598299ed1cf9a6a">decode_descriptions</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2749</span> </div>
<div class="line"><span class="lineno"> 2750</span>        <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>)</div>
<div class="line"><span class="lineno"> 2751</span>        {</div>
<div class="line"><span class="lineno"> 2752</span>          <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Missing encryption key; mail not sent&quot;</span>));</div>
<div class="line"><span class="lineno"> 2753</span>          rc = -1;</div>
<div class="line"><span class="lineno"> 2754</span>          <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2755</span>        }</div>
<div class="line"><span class="lineno"> 2756</span> </div>
<div class="line"><span class="lineno"> 2757</span>        <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2758</span>      }</div>
<div class="line"><span class="lineno"> 2759</span>      <a class="code hl_function" href="#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, <span class="keyword">false</span>, sub);</div>
<div class="line"><span class="lineno"> 2760</span>    }</div>
<div class="line"><span class="lineno"> 2761</span> </div>
<div class="line"><span class="lineno"> 2762</span>    <span class="comment">/* at this point, e_templ-&gt;body is one of the following three things:</span></div>
<div class="line"><span class="lineno"> 2763</span><span class="comment">     * - multipart/signed.     In this case, clear_content is a child</span></div>
<div class="line"><span class="lineno"> 2764</span><span class="comment">     * - multipart/encrypted.  In this case, clear_content exists independently</span></div>
<div class="line"><span class="lineno"> 2765</span><span class="comment">     * - application/pgp.      In this case, clear_content exists independently</span></div>
<div class="line"><span class="lineno"> 2766</span><span class="comment">     * - something else.       In this case, it&#39;s the same as clear_content */</span></div>
<div class="line"><span class="lineno"> 2767</span> </div>
<div class="line"><span class="lineno"> 2768</span>    <span class="comment">/* This is ugly -- lack of &quot;reporting back&quot; from mutt_protect(). */</span></div>
<div class="line"><span class="lineno"> 2769</span> </div>
<div class="line"><span class="lineno"> 2770</span>    <span class="keywordflow">if</span> (clear_content &amp;&amp; (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> != clear_content) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2771</span>        (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a> != clear_content))</div>
<div class="line"><span class="lineno"> 2772</span>      free_clear_content = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2773</span>  }</div>
<div class="line"><span class="lineno"> 2774</span> </div>
<div class="line"><span class="lineno"> 2775</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#a9b3a197dcd72484bca9ba6f0ce451e1f">OptGui</a>)</div>
<div class="line"><span class="lineno"> 2776</span>    <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Sending message...&quot;</span>));</div>
<div class="line"><span class="lineno"> 2777</span> </div>
<div class="line"><span class="lineno"> 2778</span>  <a class="code hl_function" href="sendlib_8c.html#ac35da3d19eb0d95d4f6260adab57b4c9">mutt_prepare_envelope</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, <span class="keyword">true</span>, sub);</div>
<div class="line"><span class="lineno"> 2779</span> </div>
<div class="line"><span class="lineno"> 2780</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_fcc_before_send = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;fcc_before_send&quot;</span>);</div>
<div class="line"><span class="lineno"> 2781</span>  <span class="keywordflow">if</span> (c_fcc_before_send)</div>
<div class="line"><span class="lineno"> 2782</span>    <a class="code hl_function" href="#a255efc8a4a366c3de07d48da23d03a32">save_fcc</a>(m, e_templ, fcc, clear_content, pgpkeylist, flags, &amp;finalpath, sub);</div>
<div class="line"><span class="lineno"> 2783</span> </div>
<div class="line"><span class="lineno"> 2784</span>  i = <a class="code hl_function" href="#a859ddbab5f9384328fd06bf9c18c02f2">invoke_mta</a>(m, e_templ, sub);</div>
<div class="line"><span class="lineno"> 2785</span>  <span class="keywordflow">if</span> (i &lt; 0)</div>
<div class="line"><span class="lineno"> 2786</span>  {</div>
<div class="line"><span class="lineno"> 2787</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="send_8h.html#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>))</div>
<div class="line"><span class="lineno"> 2788</span>    {</div>
<div class="line"><span class="lineno"> 2789</span>      <span class="keywordflow">if</span> (!<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a>)</div>
<div class="line"><span class="lineno"> 2790</span>        ; <span class="comment">// do nothing</span></div>
<div class="line"><span class="lineno"> 2791</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>)) ||</div>
<div class="line"><span class="lineno"> 2792</span>               ((e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>) &amp;&amp; (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e">TYPE_APPLICATION</a>)))</div>
<div class="line"><span class="lineno"> 2793</span>      {</div>
<div class="line"><span class="lineno"> 2794</span>        <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> != clear_content)</div>
<div class="line"><span class="lineno"> 2795</span>        {</div>
<div class="line"><span class="lineno"> 2796</span>          <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>); <span class="comment">/* destroy PGP data */</span></div>
<div class="line"><span class="lineno"> 2797</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = clear_content;  <span class="comment">/* restore clear text. */</span></div>
<div class="line"><span class="lineno"> 2798</span>        }</div>
<div class="line"><span class="lineno"> 2799</span>      }</div>
<div class="line"><span class="lineno"> 2800</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>) &amp;&amp; (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>))</div>
<div class="line"><span class="lineno"> 2801</span>      {</div>
<div class="line"><span class="lineno"> 2802</span>        <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>); <span class="comment">/* destroy sig */</span></div>
<div class="line"><span class="lineno"> 2803</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;mixed&quot;</span>) ||</div>
<div class="line"><span class="lineno"> 2804</span>            <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;signed&quot;</span>))</div>
<div class="line"><span class="lineno"> 2805</span>        {</div>
<div class="line"><span class="lineno"> 2806</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2807</span>        }</div>
<div class="line"><span class="lineno"> 2808</span>      }</div>
<div class="line"><span class="lineno"> 2809</span> </div>
<div class="line"><span class="lineno"> 2810</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;pgpkeylist);</div>
<div class="line"><span class="lineno"> 2811</span>      <a class="code hl_function" href="envelope_8c.html#a244dacf9b1001c9ce1dbd473e001381f">mutt_env_free</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a62f6c9b4245ed3b6b9296adb45aa4010">mime_headers</a>); <span class="comment">/* protected headers */</span></div>
<div class="line"><span class="lineno"> 2812</span>      <a class="code hl_function" href="parameter_8c.html#a34454ee6af9d43eeabf80898dc7270b8">mutt_param_delete</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>, <span class="stringliteral">&quot;protected-headers&quot;</span>);</div>
<div class="line"><span class="lineno"> 2813</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;mixed&quot;</span>))</div>
<div class="line"><span class="lineno"> 2814</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2815</span>      <a class="code hl_function" href="#af1b54154700865964598299ed1cf9a6a">decode_descriptions</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2816</span>      <a class="code hl_function" href="sendlib_8c.html#a99b5cff5076c9e25bce367f0bae45f4c">mutt_unprepare_envelope</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 2817</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;finalpath);</div>
<div class="line"><span class="lineno"> 2818</span>      <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2819</span>    }</div>
<div class="line"><span class="lineno"> 2820</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2821</span>    {</div>
<div class="line"><span class="lineno"> 2822</span>      puts(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Could not send the message&quot;</span>));</div>
<div class="line"><span class="lineno"> 2823</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2824</span>    }</div>
<div class="line"><span class="lineno"> 2825</span>  }</div>
<div class="line"><span class="lineno"> 2826</span> </div>
<div class="line"><span class="lineno"> 2827</span>  <span class="keywordflow">if</span> (!c_fcc_before_send)</div>
<div class="line"><span class="lineno"> 2828</span>    <a class="code hl_function" href="#a255efc8a4a366c3de07d48da23d03a32">save_fcc</a>(m, e_templ, fcc, clear_content, pgpkeylist, flags, &amp;finalpath, sub);</div>
<div class="line"><span class="lineno"> 2829</span> </div>
<div class="line"><span class="lineno"> 2830</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#a9b3a197dcd72484bca9ba6f0ce451e1f">OptGui</a>)</div>
<div class="line"><span class="lineno"> 2831</span>  {</div>
<div class="line"><span class="lineno"> 2832</span>    <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>((i != 0)            ? <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Sending in background&quot;</span>) :</div>
<div class="line"><span class="lineno"> 2833</span>                 (flags &amp; <a class="code hl_define" href="send_8h.html#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>) ? <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Article posted&quot;</span>) :</div>
<div class="line"><span class="lineno"> 2834</span>                                       <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Mail sent&quot;</span>));</div>
<div class="line"><span class="lineno"> 2835</span><span class="preprocessor">#ifdef USE_NOTMUCH</span></div>
<div class="line"><span class="lineno"> 2836</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_nm_record = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;nm_record&quot;</span>);</div>
<div class="line"><span class="lineno"> 2837</span>    <span class="keywordflow">if</span> (c_nm_record)</div>
<div class="line"><span class="lineno"> 2838</span>      <a class="code hl_function" href="notmuch_2lib_8h.html#a76a97a39757a2e0441d23eab1ba5a221">nm_record_message</a>(m, finalpath, e_cur);</div>
<div class="line"><span class="lineno"> 2839</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2840</span>    <a class="code hl_function" href="muttlib_8c.html#a6fbcbe533be7c4e05d99b0eb9cdb2581">mutt_sleep</a>(0);</div>
<div class="line"><span class="lineno"> 2841</span>  }</div>
<div class="line"><span class="lineno"> 2842</span> </div>
<div class="line"><span class="lineno"> 2843</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a>)</div>
<div class="line"><span class="lineno"> 2844</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;pgpkeylist);</div>
<div class="line"><span class="lineno"> 2845</span> </div>
<div class="line"><span class="lineno"> 2846</span>  <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; free_clear_content)</div>
<div class="line"><span class="lineno"> 2847</span>    <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;clear_content);</div>
<div class="line"><span class="lineno"> 2848</span> </div>
<div class="line"><span class="lineno"> 2849</span>  <span class="comment">/* set &#39;replied&#39; flag only if the user didn&#39;t change/remove</span></div>
<div class="line"><span class="lineno"> 2850</span><span class="comment">   * In-Reply-To: and References: headers during edit */</span></div>
<div class="line"><span class="lineno"> 2851</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>)</div>
<div class="line"><span class="lineno"> 2852</span>  {</div>
<div class="line"><span class="lineno"> 2853</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>) &amp;&amp; m)</div>
<div class="line"><span class="lineno"> 2854</span>    {</div>
<div class="line"><span class="lineno"> 2855</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> **ep = NULL;</div>
<div class="line"><span class="lineno"> 2856</span>      <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(ep, ea)</div>
<div class="line"><span class="lineno"> 2857</span>      {</div>
<div class="line"><span class="lineno"> 2858</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = *ep;</div>
<div class="line"><span class="lineno"> 2859</span>        <a class="code hl_function" href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a>(m, e, <a class="code hl_enumvalue" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b">MUTT_REPLIED</a>, <a class="code hl_function" href="#a19cc8b134c97bc3752c778d8b4977e8c">is_reply</a>(e, e_templ), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2860</span>      }</div>
<div class="line"><span class="lineno"> 2861</span>    }</div>
<div class="line"><span class="lineno"> 2862</span>  }</div>
<div class="line"><span class="lineno"> 2863</span> </div>
<div class="line"><span class="lineno"> 2864</span>  rc = 0;</div>
<div class="line"><span class="lineno"> 2865</span> </div>
<div class="line"><span class="lineno"> 2866</span>cleanup:</div>
<div class="line"><span class="lineno"> 2867</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fcc);</div>
<div class="line"><span class="lineno"> 2868</span> </div>
<div class="line"><span class="lineno"> 2869</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>)</div>
<div class="line"><span class="lineno"> 2870</span>  {</div>
<div class="line"><span class="lineno"> 2871</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)</div>
<div class="line"><span class="lineno"> 2872</span>    {</div>
<div class="line"><span class="lineno"> 2873</span>      <a class="code hl_function" href="subset_8c.html#a8d7d5e60bd8f7f0f8ffd8522de126b12">cs_subset_str_string_set</a>(sub, <span class="stringliteral">&quot;pgp_sign_as&quot;</span>, pgp_sign_as, NULL);</div>
<div class="line"><span class="lineno"> 2874</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;pgp_sign_as);</div>
<div class="line"><span class="lineno"> 2875</span>    }</div>
<div class="line"><span class="lineno"> 2876</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>)</div>
<div class="line"><span class="lineno"> 2877</span>    {</div>
<div class="line"><span class="lineno"> 2878</span>      <a class="code hl_function" href="subset_8c.html#a8d7d5e60bd8f7f0f8ffd8522de126b12">cs_subset_str_string_set</a>(sub, <span class="stringliteral">&quot;smime_sign_as&quot;</span>, smime_sign_as, NULL);</div>
<div class="line"><span class="lineno"> 2879</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;smime_sign_as);</div>
<div class="line"><span class="lineno"> 2880</span>    }</div>
<div class="line"><span class="lineno"> 2881</span>  }</div>
<div class="line"><span class="lineno"> 2882</span> </div>
<div class="line"><span class="lineno"> 2883</span>  <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp_tmp);</div>
<div class="line"><span class="lineno"> 2884</span>  <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="send_8h.html#a160dd7bb90081f1d45201ef2ab6b46d3">SEND_NO_FREE_HEADER</a>))</div>
<div class="line"><span class="lineno"> 2885</span>    <a class="code hl_function" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;e_templ);</div>
<div class="line"><span class="lineno"> 2886</span> </div>
<div class="line"><span class="lineno"> 2887</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;finalpath);</div>
<div class="line"><span class="lineno"> 2888</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 2889</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a9a6c4ff878258def25f155501ddb3e7a"><div class="ttname"><a href="address_2address_8c.html#a9a6c4ff878258def25f155501ddb3e7a">mutt_addrlist_count_recips</a></div><div class="ttdeci">int mutt_addrlist_count_recips(const struct AddressList *al)</div><div class="ttdoc">Count the number of Addresses with valid recipients.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00872">address.c:872</a></div></div>
<div class="ttc" id="aalias_8c_html_aa90fd4b086aebbf4fed5245ecaca1ac1"><div class="ttname"><a href="alias_8c.html#aa90fd4b086aebbf4fed5245ecaca1ac1">mutt_expand_aliases_env</a></div><div class="ttdeci">void mutt_expand_aliases_env(struct Envelope *env)</div><div class="ttdoc">Expand aliases in all the fields of an Envelope.</div><div class="ttdef"><b>Definition</b> <a href="alias_8c_source.html#l00308">alias.c:308</a></div></div>
<div class="ttc" id="abuffer_8c_html_a7f93abaa65bfc8c15c6ea5d02889c19d"><div class="ttname"><a href="buffer_8c.html#a7f93abaa65bfc8c15c6ea5d02889c19d">buf_new</a></div><div class="ttdeci">struct Buffer * buf_new(const char *str)</div><div class="ttdoc">Allocate a new Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00304">buffer.c:304</a></div></div>
<div class="ttc" id="abuffer_8c_html_ad76477cc0c660bc50162393e997233eb"><div class="ttname"><a href="buffer_8c.html#ad76477cc0c660bc50162393e997233eb">buf_strdup</a></div><div class="ttdeci">char * buf_strdup(const struct Buffer *buf)</div><div class="ttdoc">Copy a Buffer&#39;s string.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00571">buffer.c:571</a></div></div>
<div class="ttc" id="acompose_2lib_8h_html_adf568d592758fae1758bbb4dc4e3e554"><div class="ttname"><a href="compose_2lib_8h.html#adf568d592758fae1758bbb4dc4e3e554">MUTT_COMPOSE_NOFREEHEADER</a></div><div class="ttdeci">#define MUTT_COMPOSE_NOFREEHEADER</div><div class="ttdef"><b>Definition</b> <a href="compose_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803">MUTT_NNTP</a></div><div class="ttdeci">@ MUTT_NNTP</div><div class="ttdoc">&#39;NNTP&#39; (Usenet) Mailbox type</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00049">mailbox.h:49</a></div></div>
<div class="ttc" id="acrypt_8c_html_abb04ccb83d144391034d86704c52b987"><div class="ttname"><a href="crypt_8c.html#abb04ccb83d144391034d86704c52b987">crypt_get_keys</a></div><div class="ttdeci">int crypt_get_keys(struct Email *e, char **keylist, bool oppenc_mode)</div><div class="ttdoc">Check we have all the keys we need.</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l00961">crypt.c:961</a></div></div>
<div class="ttc" id="acryptglue_8c_html_a07a6c891658dd90ef8333a1e5bbcc285"><div class="ttname"><a href="cryptglue_8c.html#a07a6c891658dd90ef8333a1e5bbcc285">crypt_has_module_backend</a></div><div class="ttdeci">bool crypt_has_module_backend(SecurityFlags type)</div><div class="ttdoc">Is there a crypto backend for a given type?</div><div class="ttdef"><b>Definition</b> <a href="cryptglue_8c_source.html#l00170">cryptglue.c:170</a></div></div>
<div class="ttc" id="acurs__lib_8c_html_a0590f11f42a6242002ea4c842438231b"><div class="ttname"><a href="curs__lib_8c.html#a0590f11f42a6242002ea4c842438231b">mutt_edit_file</a></div><div class="ttdeci">void mutt_edit_file(const char *editor, const char *file)</div><div class="ttdoc">Let the user edit a file.</div><div class="ttdef"><b>Definition</b> <a href="curs__lib_8c_source.html#l00117">curs_lib.c:117</a></div></div>
<div class="ttc" id="aemail_2body_8c_html_a37b346253e3b97aa64bb38ffc8d1ea0c"><div class="ttname"><a href="email_2body_8c.html#a37b346253e3b97aa64bb38ffc8d1ea0c">mutt_body_new</a></div><div class="ttdeci">struct Body * mutt_body_new(void)</div><div class="ttdoc">Create a new Body.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8c_source.html#l00044">body.c:44</a></div></div>
<div class="ttc" id="aemail_2parse_8c_html_a1c0bcb79c2ff930b4131a1ede5828762"><div class="ttname"><a href="email_2parse_8c.html#a1c0bcb79c2ff930b4131a1ede5828762">mutt_parse_content_type</a></div><div class="ttdeci">void mutt_parse_content_type(const char *s, struct Body *b)</div><div class="ttdoc">Parse a content type.</div><div class="ttdef"><b>Definition</b> <a href="email_2parse_8c_source.html#l00462">parse.c:462</a></div></div>
<div class="ttc" id="aemail_2parse_8c_html_a85f5f11a70b04f611f3e131f67644fbf"><div class="ttname"><a href="email_2parse_8c.html#a85f5f11a70b04f611f3e131f67644fbf">mutt_parse_mailto</a></div><div class="ttdeci">bool mutt_parse_mailto(struct Envelope *env, char **body, const char *src)</div><div class="ttdoc">Parse a mailto:// url.</div><div class="ttdef"><b>Definition</b> <a href="email_2parse_8c_source.html#l01753">parse.c:1753</a></div></div>
<div class="ttc" id="aenvelope_8c_html_a406e6f76001e7604ce65ffe972fc19c1"><div class="ttname"><a href="envelope_8c.html#a406e6f76001e7604ce65ffe972fc19c1">mutt_env_new</a></div><div class="ttdeci">struct Envelope * mutt_env_new(void)</div><div class="ttdoc">Create a new Envelope.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00045">envelope.c:45</a></div></div>
<div class="ttc" id="aenvelope_8c_html_afd00cc8d84947cbd55e082420b5732f1"><div class="ttname"><a href="envelope_8c.html#afd00cc8d84947cbd55e082420b5732f1">mutt_env_to_local</a></div><div class="ttdeci">void mutt_env_to_local(struct Envelope *env)</div><div class="ttdoc">Convert an Envelope&#39;s Address fields to local format.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00316">envelope.c:316</a></div></div>
<div class="ttc" id="afile_8c_html_a61b50c8615492662cbc27ebbf83090ce"><div class="ttname"><a href="file_8c.html#a61b50c8615492662cbc27ebbf83090ce">mutt_file_decrease_mtime</a></div><div class="ttdeci">time_t mutt_file_decrease_mtime(const char *fp, struct stat *st)</div><div class="ttdoc">Decrease a file&#39;s modification time by 1 second.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l00905">file.c:905</a></div></div>
<div class="ttc" id="aflags_8c_html_a29547b9c7c39eb22039ff4b8f1c03829"><div class="ttname"><a href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a></div><div class="ttdeci">void mutt_set_flag(struct Mailbox *m, struct Email *e, enum MessageType flag, bool bf, bool upd_mbox)</div><div class="ttdoc">Set a flag on an email.</div><div class="ttdef"><b>Definition</b> <a href="flags_8c_source.html#l00056">flags.c:56</a></div></div>
<div class="ttc" id="aglobals_8c_html_a9b3a197dcd72484bca9ba6f0ce451e1f"><div class="ttname"><a href="globals_8c.html#a9b3a197dcd72484bca9ba6f0ce451e1f">OptGui</a></div><div class="ttdeci">bool OptGui</div><div class="ttdoc">(pseudo) when the gui (and curses) are started</div><div class="ttdef"><b>Definition</b> <a href="globals_8c_source.html#l00059">globals.c:59</a></div></div>
<div class="ttc" id="agroup__gui__dlg_html_ga4bb08d7fcc8d6dc6524a6a9d153c5820"><div class="ttname"><a href="group__gui__dlg.html#ga4bb08d7fcc8d6dc6524a6a9d153c5820">dlg_compose</a></div><div class="ttdeci">int dlg_compose(struct Email *e, struct Buffer *fcc, uint8_t flags, struct ConfigSubset *sub)</div><div class="ttdoc">Allow the user to edit the message envelope -.</div><div class="ttdef"><b>Definition</b> <a href="dlg__compose_8c_source.html#l00403">dlg_compose.c:403</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00090">logging2.h:90</a></div></div>
<div class="ttc" id="ahook_8c_html_a6d228c86f5a1900b27af0fde26991a63"><div class="ttname"><a href="hook_8c.html#a6d228c86f5a1900b27af0fde26991a63">mutt_select_fcc</a></div><div class="ttdeci">void mutt_select_fcc(struct Buffer *path, struct Email *e)</div><div class="ttdoc">Select the FCC path for an email.</div><div class="ttdef"><b>Definition</b> <a href="hook_8c_source.html#l00815">hook.c:815</a></div></div>
<div class="ttc" id="ahook_8h_html_a365ef87efead32b0e7a8265927171dc1"><div class="ttname"><a href="hook_8h.html#a365ef87efead32b0e7a8265927171dc1">MUTT_SEND_HOOK</a></div><div class="ttdeci">#define MUTT_SEND_HOOK</div><div class="ttdoc">send-hook: when composing a new email</div><div class="ttdef"><b>Definition</b> <a href="hook_8h_source.html#l00039">hook.h:39</a></div></div>
<div class="ttc" id="ahook_8h_html_a709891b042fc13265a7971b2401081c9"><div class="ttname"><a href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a></div><div class="ttdeci">#define MUTT_SEND2_HOOK</div><div class="ttdoc">send2-hook: when changing fields in the compose menu</div><div class="ttdef"><b>Definition</b> <a href="hook_8h_source.html#l00048">hook.h:48</a></div></div>
<div class="ttc" id="ahook_8h_html_ab6ec93bff7f691fb01cb5233f4040f62"><div class="ttname"><a href="hook_8h.html#ab6ec93bff7f691fb01cb5233f4040f62">MUTT_REPLY_HOOK</a></div><div class="ttdeci">#define MUTT_REPLY_HOOK</div><div class="ttdoc">reply-hook: when replying to an email</div><div class="ttdef"><b>Definition</b> <a href="hook_8h_source.html#l00047">hook.h:47</a></div></div>
<div class="ttc" id="alogging2_8h_html_aca1fd1d8935433e6ba2e3918214e07f9a678d278eb301551ba0b3e0dbcfcee630"><div class="ttname"><a href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9a678d278eb301551ba0b3e0dbcfcee630">LL_DEBUG5</a></div><div class="ttdeci">@ LL_DEBUG5</div><div class="ttdoc">Log at debug level 5.</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00048">logging2.h:48</a></div></div>
<div class="ttc" id="alogging2_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdeci">@ LL_DEBUG1</div><div class="ttdoc">Log at debug level 1.</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00044">logging2.h:44</a></div></div>
<div class="ttc" id="amime_8h_html_a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073"><div class="ttname"><a href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073">DISP_INLINE</a></div><div class="ttdeci">@ DISP_INLINE</div><div class="ttdoc">Content is inline.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00062">mime.h:62</a></div></div>
<div class="ttc" id="amutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b">MUTT_REPLIED</a></div><div class="ttdeci">@ MUTT_REPLIED</div><div class="ttdoc">Messages that have been replied to.</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00072">mutt.h:72</a></div></div>
<div class="ttc" id="amutt__attach_8c_html_a0b2292184984705d60be088b9dbbecfb"><div class="ttname"><a href="mutt__attach_8c.html#a0b2292184984705d60be088b9dbbecfb">mutt_edit_attachment</a></div><div class="ttdeci">bool mutt_edit_attachment(struct Body *b)</div><div class="ttdoc">Edit an attachment.</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8c_source.html#l00265">mutt_attach.c:265</a></div></div>
<div class="ttc" id="amutt__header_8c_html_add6fa85ce7ef8dcad27d465fbbc27708"><div class="ttname"><a href="mutt__header_8c.html#add6fa85ce7ef8dcad27d465fbbc27708">mutt_edit_headers</a></div><div class="ttdeci">void mutt_edit_headers(const char *editor, const char *body, struct Email *e, struct Buffer *fcc)</div><div class="ttdoc">Let the user edit the message header and body.</div><div class="ttdef"><b>Definition</b> <a href="mutt__header_8c_source.html#l00180">mutt_header.c:180</a></div></div>
<div class="ttc" id="amuttlib_8c_html_a6fbcbe533be7c4e05d99b0eb9cdb2581"><div class="ttname"><a href="muttlib_8c.html#a6fbcbe533be7c4e05d99b0eb9cdb2581">mutt_sleep</a></div><div class="ttdeci">void mutt_sleep(short s)</div><div class="ttdoc">Sleep for a while.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00841">muttlib.c:841</a></div></div>
<div class="ttc" id="amuttlib_8c_html_a777680c324667521d8c486051c22fe10"><div class="ttname"><a href="muttlib_8c.html#a777680c324667521d8c486051c22fe10">buf_pretty_mailbox</a></div><div class="ttdeci">void buf_pretty_mailbox(struct Buffer *buf)</div><div class="ttdoc">Shorten a mailbox path using &#39;~&#39; or &#39;=&#39;.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00518">muttlib.c:518</a></div></div>
<div class="ttc" id="amuttlib_8c_html_a8973b2e5185609bfc5e0ef136fcd3177"><div class="ttname"><a href="muttlib_8c.html#a8973b2e5185609bfc5e0ef136fcd3177">mutt_needs_mailcap</a></div><div class="ttdeci">bool mutt_needs_mailcap(struct Body *b)</div><div class="ttdoc">Does this type need a mailcap entry do display.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00378">muttlib.c:378</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a074f827472ad45f11ec1132cdfed2daf"><div class="ttname"><a href="ncrypt_2lib_8h.html#a074f827472ad45f11ec1132cdfed2daf">SEC_INLINE</a></div><div class="ttdeci">#define SEC_INLINE</div><div class="ttdoc">Email has an inline signature.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00091">lib.h:91</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a95845954210adfc850d5602843f858d4"><div class="ttname"><a href="ncrypt_2lib_8h.html#a95845954210adfc850d5602843f858d4">SEC_NO_FLAGS</a></div><div class="ttdeci">#define SEC_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00083">lib.h:83</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_ae0ce4a742538f3ee3e1bfbf143c794fb"><div class="ttname"><a href="ncrypt_2lib_8h.html#ae0ce4a742538f3ee3e1bfbf143c794fb">SEC_AUTOCRYPT_OVERRIDE</a></div><div class="ttdeci">#define SEC_AUTOCRYPT_OVERRIDE</div><div class="ttdoc">(Autocrypt) Indicates manual set/unset of encryption</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00094">lib.h:94</a></div></div>
<div class="ttc" id="anotmuch_2lib_8h_html_a76a97a39757a2e0441d23eab1ba5a221"><div class="ttname"><a href="notmuch_2lib_8h.html#a76a97a39757a2e0441d23eab1ba5a221">nm_record_message</a></div><div class="ttdeci">int nm_record_message(struct Mailbox *m, char *path, struct Email *e)</div><div class="ttdoc">Add a message to the Notmuch database.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l01918">notmuch.c:1918</a></div></div>
<div class="ttc" id="aparameter_8c_html_a42249fc15b1e52df046a0a10de29da44"><div class="ttname"><a href="parameter_8c.html#a42249fc15b1e52df046a0a10de29da44">mutt_param_set</a></div><div class="ttdeci">void mutt_param_set(struct ParameterList *pl, const char *attribute, const char *value)</div><div class="ttdoc">Set a Parameter.</div><div class="ttdef"><b>Definition</b> <a href="parameter_8c_source.html#l00111">parameter.c:111</a></div></div>
<div class="ttc" id="apostpone_2lib_8h_html_a42853d2d4da10271644dc7083ae1c453"><div class="ttname"><a href="postpone_2lib_8h.html#a42853d2d4da10271644dc7083ae1c453">mutt_num_postponed</a></div><div class="ttdeci">int mutt_num_postponed(struct Mailbox *m, bool force)</div><div class="ttdoc">Return the number of postponed messages.</div><div class="ttdef"><b>Definition</b> <a href="postpone_8c_source.html#l00070">postpone.c:70</a></div></div>
<div class="ttc" id="apostpone_2lib_8h_html_aacde94d20e952e822eac92e0fbf74682"><div class="ttname"><a href="postpone_2lib_8h.html#aacde94d20e952e822eac92e0fbf74682">mutt_get_postponed</a></div><div class="ttdeci">int mutt_get_postponed(struct Mailbox *m_cur, struct Email *hdr, struct Email **cur, struct Buffer *fcc)</div><div class="ttdoc">Recall a postponed message.</div><div class="ttdef"><b>Definition</b> <a href="postpone_8c_source.html#l00661">postpone.c:661</a></div></div>
<div class="ttc" id="aquestion_2lib_8h_html_ae359ab94312d9ae6bcad5ab5b52bd529"><div class="ttname"><a href="question_2lib_8h.html#ae359ab94312d9ae6bcad5ab5b52bd529">query_yesorno</a></div><div class="ttdeci">enum QuadOption query_yesorno(const char *prompt, enum QuadOption def)</div><div class="ttdoc">Ask the user a Yes/No question.</div><div class="ttdef"><b>Definition</b> <a href="question_8c_source.html#l00325">question.c:325</a></div></div>
<div class="ttc" id="arfc3676_8c_html_ae80c6b55541960f57f67f4ea3e4467e8"><div class="ttname"><a href="rfc3676_8c.html#ae80c6b55541960f57f67f4ea3e4467e8">mutt_rfc3676_space_stuff</a></div><div class="ttdeci">void mutt_rfc3676_space_stuff(struct Email *e)</div><div class="ttdoc">Perform RFC3676 space stuffing on an Email.</div><div class="ttdef"><b>Definition</b> <a href="rfc3676_8c_source.html#l00486">rfc3676.c:486</a></div></div>
<div class="ttc" id="asend_8c_html_a08794ff2edb022ef0c0f59086da9675f"><div class="ttname"><a href="#a08794ff2edb022ef0c0f59086da9675f">postpone_message</a></div><div class="ttdeci">static int postpone_message(struct Email *e_post, struct Email *e_cur, const char *fcc, SendFlags flags, struct ConfigSubset *sub)</div><div class="ttdoc">Save an Email for another day.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01857">send.c:1857</a></div></div>
<div class="ttc" id="asend_8c_html_a19cc8b134c97bc3752c778d8b4977e8c"><div class="ttname"><a href="#a19cc8b134c97bc3752c778d8b4977e8c">is_reply</a></div><div class="ttdeci">static bool is_reply(struct Email *reply, struct Email *orig)</div><div class="ttdoc">Is one email a reply to another?</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01598">send.c:1598</a></div></div>
<div class="ttc" id="asend_8c_html_a255efc8a4a366c3de07d48da23d03a32"><div class="ttname"><a href="#a255efc8a4a366c3de07d48da23d03a32">save_fcc</a></div><div class="ttdeci">static int save_fcc(struct Mailbox *m, struct Email *e, struct Buffer *fcc, struct Body *clear_content, char *pgpkeylist, SendFlags flags, char **finalpath, struct ConfigSubset *sub)</div><div class="ttdoc">Save an Email to a &#39;sent mail&#39; folder.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01662">send.c:1662</a></div></div>
<div class="ttc" id="asend_8c_html_a3816a6e89fb33a2c6d3d27e90fa024d0"><div class="ttname"><a href="#a3816a6e89fb33a2c6d3d27e90fa024d0">envelope_defaults</a></div><div class="ttdeci">static int envelope_defaults(struct Envelope *env, struct EmailArray *ea, SendFlags flags, struct ConfigSubset *sub)</div><div class="ttdoc">Fill in some defaults for a new email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01082">send.c:1082</a></div></div>
<div class="ttc" id="asend_8c_html_a527f182325365ed083dad7be735bab25"><div class="ttname"><a href="#a527f182325365ed083dad7be735bab25">mutt_fix_reply_recipients</a></div><div class="ttdeci">void mutt_fix_reply_recipients(struct Envelope *env, struct ConfigSubset *sub)</div><div class="ttdoc">Remove duplicate recipients.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00954">send.c:954</a></div></div>
<div class="ttc" id="asend_8c_html_a5f6595bb450dfd3e7f3b8b01e45396cd"><div class="ttname"><a href="#a5f6595bb450dfd3e7f3b8b01e45396cd">generate_body</a></div><div class="ttdeci">static int generate_body(FILE *fp_tmp, struct Email *e, SendFlags flags, struct Mailbox *m, struct EmailArray *ea, struct ConfigSubset *sub)</div><div class="ttdoc">Create a new email body.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01155">send.c:1155</a></div></div>
<div class="ttc" id="asend_8c_html_a83f702d9e8d2f453b99a29cc6afe57e1"><div class="ttname"><a href="#a83f702d9e8d2f453b99a29cc6afe57e1">mutt_make_greeting</a></div><div class="ttdeci">static void mutt_make_greeting(struct Email *e, FILE *fp_out, struct ConfigSubset *sub)</div><div class="ttdoc">Add greetings string.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00685">send.c:685</a></div></div>
<div class="ttc" id="asend_8c_html_a859ddbab5f9384328fd06bf9c18c02f2"><div class="ttname"><a href="#a859ddbab5f9384328fd06bf9c18c02f2">invoke_mta</a></div><div class="ttdeci">static int invoke_mta(struct Mailbox *m, struct Email *e, struct ConfigSubset *sub)</div><div class="ttdoc">Send an email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01426">send.c:1426</a></div></div>
<div class="ttc" id="asend_8c_html_a93b53146e2fbfb6657f83297e722fdac"><div class="ttname"><a href="#a93b53146e2fbfb6657f83297e722fdac">process_user_recips</a></div><div class="ttdeci">static void process_user_recips(struct Envelope *env)</div><div class="ttdoc">Process the user headers.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00377">send.c:377</a></div></div>
<div class="ttc" id="asend_8c_html_a9bca5c9f44a7908485389d16dcf20f96"><div class="ttname"><a href="#a9bca5c9f44a7908485389d16dcf20f96">process_user_header</a></div><div class="ttdeci">static void process_user_header(struct Envelope *env)</div><div class="ttdoc">Process the user headers.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00402">send.c:402</a></div></div>
<div class="ttc" id="asend_8c_html_a9fb4ee964889bd118582f0938027a659"><div class="ttname"><a href="#a9fb4ee964889bd118582f0938027a659">edit_envelope</a></div><div class="ttdeci">static int edit_envelope(struct Envelope *en, SendFlags flags, struct ConfigSubset *sub)</div><div class="ttdoc">Edit Envelope fields.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00235">send.c:235</a></div></div>
<div class="ttc" id="asend_8c_html_aad5805f2620506ae4bc2d7f6474cb849"><div class="ttname"><a href="#aad5805f2620506ae4bc2d7f6474cb849">abort_for_missing_attachments</a></div><div class="ttdeci">static bool abort_for_missing_attachments(const struct Body *b, struct ConfigSubset *sub)</div><div class="ttdoc">Should we abort sending because of missing attachments?</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01982">send.c:1982</a></div></div>
<div class="ttc" id="asend_8c_html_ac5be3d670b1d7e5cddb605652e9aa859"><div class="ttname"><a href="#ac5be3d670b1d7e5cddb605652e9aa859">set_reverse_name</a></div><div class="ttdeci">static void set_reverse_name(struct AddressList *al, struct Envelope *env, struct ConfigSubset *sub)</div><div class="ttdoc">Try to set the &#39;from&#39; field from the recipients.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01340">send.c:1340</a></div></div>
<div class="ttc" id="asend_8c_html_ad5e73f6a253107a7f55ee7388fbbf92f"><div class="ttname"><a href="#ad5e73f6a253107a7f55ee7388fbbf92f">fix_end_of_file</a></div><div class="ttdeci">static void fix_end_of_file(const char *data)</div><div class="ttdoc">Ensure a file ends with a linefeed.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01524">send.c:1524</a></div></div>
<div class="ttc" id="asend_8c_html_afa5258518aabbe76c14e64e105515acf"><div class="ttname"><a href="#afa5258518aabbe76c14e64e105515acf">append_signature</a></div><div class="ttdeci">static void append_signature(FILE *fp, struct ConfigSubset *sub)</div><div class="ttdoc">Append a signature to an email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00106">send.c:106</a></div></div>
<div class="ttc" id="asend_8h_html_a0124ba8cc117eff717a4ddf672c22018"><div class="ttname"><a href="send_8h.html#a0124ba8cc117eff717a4ddf672c22018">SEND_POSTPONED_FCC</a></div><div class="ttdeci">#define SEND_POSTPONED_FCC</div><div class="ttdoc">Used by mutt_get_postponed() to signal that the Mutt-Fcc header field was present.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00050">send.h:50</a></div></div>
<div class="ttc" id="asend_8h_html_a160dd7bb90081f1d45201ef2ab6b46d3"><div class="ttname"><a href="send_8h.html#a160dd7bb90081f1d45201ef2ab6b46d3">SEND_NO_FREE_HEADER</a></div><div class="ttdeci">#define SEND_NO_FREE_HEADER</div><div class="ttdoc">Used by the -E flag.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00051">send.h:51</a></div></div>
<div class="ttc" id="asend_8h_html_a21bc6948879d93793ca7afac2c7964bb"><div class="ttname"><a href="send_8h.html#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a></div><div class="ttdeci">#define SEND_DRAFT_FILE</div><div class="ttdoc">Used by the -H flag.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00052">send.h:52</a></div></div>
<div class="ttc" id="asend_8h_html_a819cb72f23fd5b12401baf2963bc694f"><div class="ttname"><a href="send_8h.html#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a></div><div class="ttdeci">#define SEND_POSTPONED</div><div class="ttdoc">Recall a postponed email.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00046">send.h:46</a></div></div>
<div class="ttc" id="asend_8h_html_a942f852d37ce6e458cda7f187b922b67"><div class="ttname"><a href="send_8h.html#a942f852d37ce6e458cda7f187b922b67">SEND_CONSUMED_STDIN</a></div><div class="ttdeci">#define SEND_CONSUMED_STDIN</div><div class="ttdoc">stdin has been read; don&#39;t read it twice</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00057">send.h:57</a></div></div>
<div class="ttc" id="asend_8h_html_ab52a058ff3342266b80a3890e2b277a4"><div class="ttname"><a href="send_8h.html#ab52a058ff3342266b80a3890e2b277a4">SEND_CLI_CRYPTO</a></div><div class="ttdeci">#define SEND_CLI_CRYPTO</div><div class="ttdoc">Enable message security in modes that by default don&#39;t enable it.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00058">send.h:58</a></div></div>
<div class="ttc" id="asendlib_8c_html_a3360a74ad39f0bb8e7ae4f84cc52f3be"><div class="ttname"><a href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a></div><div class="ttdeci">void mutt_update_encoding(struct Body *b, struct ConfigSubset *sub)</div><div class="ttdoc">Update the encoding type.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00421">sendlib.c:421</a></div></div>
<div class="ttc" id="asendlib_8c_html_a891ada8c467ba28aede353247f77d3ec"><div class="ttname"><a href="sendlib_8c.html#a891ada8c467ba28aede353247f77d3ec">mutt_gen_msgid</a></div><div class="ttdeci">char * mutt_gen_msgid(void)</div><div class="ttdoc">Generate a random Message ID.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00752">sendlib.c:752</a></div></div>
<div class="ttc" id="astructBody_html_a47191eabf16d34d0deb412c898ed629b"><div class="ttname"><a href="structBody.html#a47191eabf16d34d0deb412c898ed629b">Body::unlink</a></div><div class="ttdeci">bool unlink</div><div class="ttdoc">If true, filename should be unlink()ed before free()ing this structure.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00068">body.h:68</a></div></div>
<div class="ttc" id="astructBody_html_a86721d1d557276cbc9cf69777af8c305"><div class="ttname"><a href="structBody.html#a86721d1d557276cbc9cf69777af8c305">Body::use_disp</a></div><div class="ttdeci">bool use_disp</div><div class="ttdoc">Content-Disposition uses filename= ?</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00047">body.h:47</a></div></div>
<div class="ttc" id="astructBody_html_a99aff302b287a47c407a7412a99630f5"><div class="ttname"><a href="structBody.html#a99aff302b287a47c407a7412a99630f5">Body::disposition</a></div><div class="ttdeci">unsigned int disposition</div><div class="ttdoc">content-disposition, ContentDisposition</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00042">body.h:42</a></div></div>
<div class="ttc" id="astructEmail_html_aa26dd591f92e548bc3c56d0b7fdb3e8c"><div class="ttname"><a href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">Email::replied</a></div><div class="ttdeci">bool replied</div><div class="ttdoc">Email has been replied to.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00051">email.h:51</a></div></div>
<div class="ttc" id="astructEnvelope_html_a525bd5213606067d5c2be2e17fbe956b"><div class="ttname"><a href="structEnvelope.html#a525bd5213606067d5c2be2e17fbe956b">Envelope::x_original_to</a></div><div class="ttdeci">struct AddressList x_original_to</div><div class="ttdoc">Email&#39;s &#39;X-Original-to&#39;.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00066">envelope.h:66</a></div></div>
<div class="ttc" id="astructEnvelope_html_ad0b7bb8cf358dd2d5d1dc5733b3f0be1"><div class="ttname"><a href="structEnvelope.html#ad0b7bb8cf358dd2d5d1dc5733b3f0be1">Envelope::list_post</a></div><div class="ttdeci">char * list_post</div><div class="ttdoc">This stores a mailto URL, or nothing.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00067">envelope.h:67</a></div></div>
<div class="ttc" id="astructMailbox_html_a5638329fb2ebd4bbe1f4a949ec8de174"><div class="ttname"><a href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">Mailbox::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Mailbox type.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00102">mailbox.h:102</a></div></div>
<div class="ttc" id="astructMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00132">mailbox.h:132</a></div></div>
<div class="ttc" id="astructNntpMboxData_html"><div class="ttname"><a href="structNntpMboxData.html">NntpMboxData</a></div><div class="ttdoc">NNTP-specific Mailbox data -.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00033">mdata.h:34</a></div></div>
<div class="ttc" id="asubset_8c_html_a8d7d5e60bd8f7f0f8ffd8522de126b12"><div class="ttname"><a href="subset_8c.html#a8d7d5e60bd8f7f0f8ffd8522de126b12">cs_subset_str_string_set</a></div><div class="ttdeci">int cs_subset_str_string_set(const struct ConfigSubset *sub, const char *name, const char *value, struct Buffer *err)</div><div class="ttdoc">Set a config item by string.</div><div class="ttdef"><b>Definition</b> <a href="subset_8c_source.html#l00392">subset.c:392</a></div></div>
</div><!-- fragment --><div id="dynsection-86" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-86-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-86-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-86-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_ad9c2899c7c3a76d2ce3b911221705a30_icgraph.svg" width="384" height="947"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa9b94334fee20d86baa8355c9b8379b4" name="aa9b94334fee20d86baa8355c9b8379b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9b94334fee20d86baa8355c9b8379b4">&#9670;&#160;</a></span>send_simple_email()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool send_simple_email </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct EmailArray *</td>          <td class="paramname"><span class="paramname"><em>ea</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>mailto</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>subj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>body</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compose an email given a few basic ingredients. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">ea</td><td>Array of source Emails </td></tr>
    <tr><td class="paramname">mailto</td><td>mailto address to parse (can include fields such as subject) </td></tr>
    <tr><td class="paramname">subj</td><td>Subject, if not overridden by mailto </td></tr>
    <tr><td class="paramname">body</td><td>text/plain body </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success </td></tr>
    <tr><td class="paramname">false</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l02901">2901</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2903</span>{</div>
<div class="line"><span class="lineno"> 2904</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = <a class="code hl_function" href="email_2email_8c.html#ab53e91414f24cecdc75fcfea6f1824e3">email_new</a>();</div>
<div class="line"><span class="lineno"> 2905</span> </div>
<div class="line"><span class="lineno"> 2906</span>  <span class="comment">/* envelope */</span></div>
<div class="line"><span class="lineno"> 2907</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a> = <a class="code hl_function" href="envelope_8c.html#a406e6f76001e7604ce65ffe972fc19c1">mutt_env_new</a>();</div>
<div class="line"><span class="lineno"> 2908</span>  <a class="code hl_function" href="email_2parse_8c.html#a85f5f11a70b04f611f3e131f67644fbf">mutt_parse_mailto</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, NULL, mailto);</div>
<div class="line"><span class="lineno"> 2909</span>  <span class="keywordflow">if</span> (!e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">subject</a>)</div>
<div class="line"><span class="lineno"> 2910</span>  {</div>
<div class="line"><span class="lineno"> 2911</span>    <a class="code hl_function" href="envelope_8c.html#a91c00f700ee3ca43aa33487591b0d317">mutt_env_set_subject</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, subj);</div>
<div class="line"><span class="lineno"> 2912</span>  }</div>
<div class="line"><span class="lineno"> 2913</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>) &amp;&amp; !<a class="code hl_function" href="address_2address_8c.html#a9bb4abe92405bac67f03e36936a29b6e">mutt_addrlist_parse</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, NULL))</div>
<div class="line"><span class="lineno"> 2914</span>  {</div>
<div class="line"><span class="lineno"> 2915</span>    <a class="code hl_define" href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No recipient specified&quot;</span>));</div>
<div class="line"><span class="lineno"> 2916</span>  }</div>
<div class="line"><span class="lineno"> 2917</span> </div>
<div class="line"><span class="lineno"> 2918</span>  <span class="comment">/* body */</span></div>
<div class="line"><span class="lineno"> 2919</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="email_2body_8c.html#a37b346253e3b97aa64bb38ffc8d1ea0c">mutt_body_new</a>();</div>
<div class="line"><span class="lineno"> 2920</span>  <span class="keywordtype">char</span> ctype[] = <span class="stringliteral">&quot;text/plain&quot;</span>;</div>
<div class="line"><span class="lineno"> 2921</span>  <a class="code hl_function" href="email_2parse_8c.html#a1c0bcb79c2ff930b4131a1ede5828762">mutt_parse_content_type</a>(ctype, e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2922</span> </div>
<div class="line"><span class="lineno"> 2923</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *tempfile = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 2924</span>  <a class="code hl_define" href="tmp_8h.html#a271a7828888985955df49205d7846a45">buf_mktemp</a>(tempfile);</div>
<div class="line"><span class="lineno"> 2925</span>  <span class="keywordflow">if</span> (body)</div>
<div class="line"><span class="lineno"> 2926</span>  {</div>
<div class="line"><span class="lineno"> 2927</span>    FILE *fp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tempfile), <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line"><span class="lineno"> 2928</span>    <span class="keywordflow">if</span> (!fp)</div>
<div class="line"><span class="lineno"> 2929</span>    {</div>
<div class="line"><span class="lineno"> 2930</span>      <a class="code hl_function" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;e);</div>
<div class="line"><span class="lineno"> 2931</span>      <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;tempfile);</div>
<div class="line"><span class="lineno"> 2932</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2933</span>    }</div>
<div class="line"><span class="lineno"> 2934</span>    fprintf(fp, <span class="stringliteral">&quot;%s\n&quot;</span>, body);</div>
<div class="line"><span class="lineno"> 2935</span>    <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp);</div>
<div class="line"><span class="lineno"> 2936</span>  }</div>
<div class="line"><span class="lineno"> 2937</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a> = <a class="code hl_function" href="buffer_8c.html#ad76477cc0c660bc50162393e997233eb">buf_strdup</a>(tempfile);</div>
<div class="line"><span class="lineno"> 2938</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2939</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;tempfile);</div>
<div class="line"><span class="lineno"> 2940</span> </div>
<div class="line"><span class="lineno"> 2941</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> rc = <a class="code hl_function" href="#ad9c2899c7c3a76d2ce3b911221705a30">mutt_send_message</a>(<a class="code hl_define" href="send_8h.html#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a>, e, NULL, m, ea, <a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>);</div>
<div class="line"><span class="lineno"> 2942</span>  <span class="keywordflow">return</span> rc &gt;= 0;</div>
<div class="line"><span class="lineno"> 2943</span>}</div>
<div class="ttc" id="astructNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00046">neomutt.h:46</a></div></div>
</div><!-- fragment --><div id="dynsection-87" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-87-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-87-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-87-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_aa9b94334fee20d86baa8355c9b8379b4_cgraph.svg" width="771" height="651"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-88" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-88-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-88-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-88-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_aa9b94334fee20d86baa8355c9b8379b4_icgraph.svg" width="387" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aeb49acb8f5aeb91227ad946786970111" name="aeb49acb8f5aeb91227ad946786970111"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb49acb8f5aeb91227ad946786970111">&#9670;&#160;</a></span>mutt_send_list_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_send_list_subscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a mailing-list subscription email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> carrying mailing-list subscription headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success </td></tr>
    <tr><td class="paramname">false</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l02952">2952</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2953</span>{</div>
<div class="line"><span class="lineno"> 2954</span>  <span class="keywordflow">if</span> (!e || !e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>)</div>
<div class="line"><span class="lineno"> 2955</span>  {</div>
<div class="line"><span class="lineno"> 2956</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2957</span>  }</div>
<div class="line"><span class="lineno"> 2958</span> </div>
<div class="line"><span class="lineno"> 2959</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *mailto = e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a18ca6295a8894d93fe3b44275b62e415">list_subscribe</a>;</div>
<div class="line"><span class="lineno"> 2960</span>  <span class="keywordflow">if</span> (!mailto)</div>
<div class="line"><span class="lineno"> 2961</span>  {</div>
<div class="line"><span class="lineno"> 2962</span>    <a class="code hl_define" href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No List-Subscribe header found&quot;</span>));</div>
<div class="line"><span class="lineno"> 2963</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2964</span>  }</div>
<div class="line"><span class="lineno"> 2965</span> </div>
<div class="line"><span class="lineno"> 2966</span>  <span class="keyword">struct </span>EmailArray ea = <a class="code hl_define" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div>
<div class="line"><span class="lineno"> 2967</span>  <a class="code hl_define" href="array_8h.html#a4f570f2382025383e4b2cc46ede6ebd0">ARRAY_ADD</a>(&amp;ea, e);</div>
<div class="line"><span class="lineno"> 2968</span>  <span class="keywordtype">bool</span> rc = <a class="code hl_function" href="#aa9b94334fee20d86baa8355c9b8379b4">send_simple_email</a>(m, &amp;ea, mailto, <span class="stringliteral">&quot;Subscribe&quot;</span>, <span class="stringliteral">&quot;subscribe&quot;</span>);</div>
<div class="line"><span class="lineno"> 2969</span>  <a class="code hl_define" href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a>(&amp;ea);</div>
<div class="line"><span class="lineno"> 2970</span> </div>
<div class="line"><span class="lineno"> 2971</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 2972</span>}</div>
<div class="ttc" id="asend_8c_html_aa9b94334fee20d86baa8355c9b8379b4"><div class="ttname"><a href="#aa9b94334fee20d86baa8355c9b8379b4">send_simple_email</a></div><div class="ttdeci">static bool send_simple_email(struct Mailbox *m, struct EmailArray *ea, const char *mailto, const char *subj, const char *body)</div><div class="ttdoc">Compose an email given a few basic ingredients.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l02901">send.c:2901</a></div></div>
<div class="ttc" id="astructEnvelope_html_a18ca6295a8894d93fe3b44275b62e415"><div class="ttname"><a href="structEnvelope.html#a18ca6295a8894d93fe3b44275b62e415">Envelope::list_subscribe</a></div><div class="ttdeci">char * list_subscribe</div><div class="ttdoc">This stores a mailto URL, or nothing.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00068">envelope.h:68</a></div></div>
</div><!-- fragment --><div id="dynsection-89" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-89-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-89-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-89-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_aeb49acb8f5aeb91227ad946786970111_cgraph.svg" width="371" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-90" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-90-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-90-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-90-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_aeb49acb8f5aeb91227ad946786970111_icgraph.svg" width="360" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9567485020b1fd8c30be9b06382cc7d9" name="a9567485020b1fd8c30be9b06382cc7d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9567485020b1fd8c30be9b06382cc7d9">&#9670;&#160;</a></span>mutt_send_list_unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_send_list_unsubscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a mailing-list unsubscription email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> carrying mailing-list unsubscription headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success </td></tr>
    <tr><td class="paramname">false</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l02981">2981</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2982</span>{</div>
<div class="line"><span class="lineno"> 2983</span>  <span class="keywordflow">if</span> (!e || !e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>)</div>
<div class="line"><span class="lineno"> 2984</span>  {</div>
<div class="line"><span class="lineno"> 2985</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2986</span>  }</div>
<div class="line"><span class="lineno"> 2987</span> </div>
<div class="line"><span class="lineno"> 2988</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *mailto = e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#aebaaff2a6132162b227659bba4260574">list_unsubscribe</a>;</div>
<div class="line"><span class="lineno"> 2989</span>  <span class="keywordflow">if</span> (!mailto)</div>
<div class="line"><span class="lineno"> 2990</span>  {</div>
<div class="line"><span class="lineno"> 2991</span>    <a class="code hl_define" href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No List-Unsubscribe header found&quot;</span>));</div>
<div class="line"><span class="lineno"> 2992</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2993</span>  }</div>
<div class="line"><span class="lineno"> 2994</span> </div>
<div class="line"><span class="lineno"> 2995</span>  <span class="keyword">struct </span>EmailArray ea = <a class="code hl_define" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div>
<div class="line"><span class="lineno"> 2996</span>  <a class="code hl_define" href="array_8h.html#a4f570f2382025383e4b2cc46ede6ebd0">ARRAY_ADD</a>(&amp;ea, e);</div>
<div class="line"><span class="lineno"> 2997</span>  <span class="keywordtype">bool</span> rc = <a class="code hl_function" href="#aa9b94334fee20d86baa8355c9b8379b4">send_simple_email</a>(m, &amp;ea, mailto, <span class="stringliteral">&quot;Unsubscribe&quot;</span>, <span class="stringliteral">&quot;unsubscribe&quot;</span>);</div>
<div class="line"><span class="lineno"> 2998</span>  <a class="code hl_define" href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a>(&amp;ea);</div>
<div class="line"><span class="lineno"> 2999</span> </div>
<div class="line"><span class="lineno"> 3000</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 3001</span>}</div>
<div class="ttc" id="astructEnvelope_html_aebaaff2a6132162b227659bba4260574"><div class="ttname"><a href="structEnvelope.html#aebaaff2a6132162b227659bba4260574">Envelope::list_unsubscribe</a></div><div class="ttdeci">char * list_unsubscribe</div><div class="ttdoc">This stores a mailto URL, or nothing.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00069">envelope.h:69</a></div></div>
</div><!-- fragment --><div id="dynsection-91" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-91-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-91-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-91-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a9567485020b1fd8c30be9b06382cc7d9_cgraph.svg" width="387" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-92" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-92-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-92-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-92-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8c_a9567485020b1fd8c30be9b06382cc7d9_icgraph.svg" width="392" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
