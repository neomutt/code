<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: mutt_thread.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2025-12-11-79-gf03987</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('mutt__thread_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">mutt_thread.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Create/manipulate threading in emails.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mutt_2lib_8h_source.html">mutt/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_2lib_8h_source.html">config/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="email_2lib_8h_source.html">email/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="core_2lib_8h_source.html">core/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt_8h_source.html">mutt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__thread_8h_source.html">mutt_thread.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mview_8h_source.html">mview.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mx_8h_source.html">mx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="protos_8h_source.html">protos.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for mutt_thread.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c__incl.svg" width="967" height="274"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="mutt__thread_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa7ffe096f2973f3d0cd486f8e8b4228b" id="r_aa7ffe096f2973f3d0cd486f8e8b4228b"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6">UseThreads</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa7ffe096f2973f3d0cd486f8e8b4228b">mutt_thread_style</a> (void)</td></tr>
<tr class="memdesc:aa7ffe096f2973f3d0cd486f8e8b4228b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Which threading style is active?  <br /></td></tr>
<tr class="separator:aa7ffe096f2973f3d0cd486f8e8b4228b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a849aee4fafabc93f47d0aa2beba610fb" id="r_a849aee4fafabc93f47d0aa2beba610fb"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a849aee4fafabc93f47d0aa2beba610fb">get_use_threads_str</a> (enum <a class="el" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6">UseThreads</a> value)</td></tr>
<tr class="memdesc:a849aee4fafabc93f47d0aa2beba610fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert <a class="el" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6" title="Which threading style is active, $use_threads.">UseThreads</a> enum to string.  <br /></td></tr>
<tr class="separator:a849aee4fafabc93f47d0aa2beba610fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga74ba16751b7e5adab6eb77967c802a97" id="r_ga74ba16751b7e5adab6eb77967c802a97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cfg__def__validator.html#ga74ba16751b7e5adab6eb77967c802a97">sort_validator</a> (const struct <a class="el" href="structConfigDef.html">ConfigDef</a> *cdef, intptr_t value, struct <a class="el" href="structBuffer.html">Buffer</a> *err)</td></tr>
<tr class="memdesc:ga74ba16751b7e5adab6eb77967c802a97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate the "sort" config variable - Implements <a class="el" href="structConfigDef.html#a3b23a43192d67d76df5faf1d40feddc3">ConfigDef::validator()</a> -.  <br /></td></tr>
<tr class="separator:ga74ba16751b7e5adab6eb77967c802a97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6f89eb1fe9177d9a3484842f7d5c1cc" id="r_af6f89eb1fe9177d9a3484842f7d5c1cc"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af6f89eb1fe9177d9a3484842f7d5c1cc">is_visible</a> (struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:af6f89eb1fe9177d9a3484842f7d5c1cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the message visible?  <br /></td></tr>
<tr class="separator:af6f89eb1fe9177d9a3484842f7d5c1cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acce2e33f71f8f2ab4797ce26a057d5ce" id="r_acce2e33f71f8f2ab4797ce26a057d5ce"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acce2e33f71f8f2ab4797ce26a057d5ce">need_display_subject</a> (struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:acce2e33f71f8f2ab4797ce26a057d5ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether to display a message's subject.  <br /></td></tr>
<tr class="separator:acce2e33f71f8f2ab4797ce26a057d5ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a050f78574b03ad5cca308994796e5237" id="r_a050f78574b03ad5cca308994796e5237"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a050f78574b03ad5cca308994796e5237">linearize_tree</a> (struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *tctx)</td></tr>
<tr class="memdesc:a050f78574b03ad5cca308994796e5237"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flatten an email thread.  <br /></td></tr>
<tr class="separator:a050f78574b03ad5cca308994796e5237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a065e55c8886d9e2850e6f9cfdaf7bdb7" id="r_a065e55c8886d9e2850e6f9cfdaf7bdb7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a065e55c8886d9e2850e6f9cfdaf7bdb7">calculate_visibility</a> (struct <a class="el" href="structMuttThread.html">MuttThread</a> *tree, int *max_depth)</td></tr>
<tr class="memdesc:a065e55c8886d9e2850e6f9cfdaf7bdb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Are tree nodes visible.  <br /></td></tr>
<tr class="separator:a065e55c8886d9e2850e6f9cfdaf7bdb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3887239c945c4eef7b5efd942754ca24" id="r_a3887239c945c4eef7b5efd942754ca24"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3887239c945c4eef7b5efd942754ca24">mutt_thread_ctx_init</a> (struct <a class="el" href="structMailboxView.html">MailboxView</a> *mv)</td></tr>
<tr class="memdesc:a3887239c945c4eef7b5efd942754ca24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a threading context.  <br /></td></tr>
<tr class="separator:a3887239c945c4eef7b5efd942754ca24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83a0025fb6c71b19d45e8ba006346303" id="r_a83a0025fb6c71b19d45e8ba006346303"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83a0025fb6c71b19d45e8ba006346303">mutt_thread_ctx_free</a> (struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> **ptr)</td></tr>
<tr class="memdesc:a83a0025fb6c71b19d45e8ba006346303"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize a threading context.  <br /></td></tr>
<tr class="separator:a83a0025fb6c71b19d45e8ba006346303"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a726f16b8fb688c688a6d0147052103d8" id="r_a726f16b8fb688c688a6d0147052103d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a726f16b8fb688c688a6d0147052103d8">mutt_draw_tree</a> (struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *tctx)</td></tr>
<tr class="memdesc:a726f16b8fb688c688a6d0147052103d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draw a tree of threaded emails.  <br /></td></tr>
<tr class="separator:a726f16b8fb688c688a6d0147052103d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f28bcf6516e018638aa30d7d7d33e2b" id="r_a7f28bcf6516e018638aa30d7d7d33e2b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f28bcf6516e018638aa30d7d7d33e2b">make_subject_list</a> (struct ListHead *subjects, struct <a class="el" href="structMuttThread.html">MuttThread</a> *cur, time_t *dateptr)</td></tr>
<tr class="memdesc:a7f28bcf6516e018638aa30d7d7d33e2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a sorted list of all subjects in a thread.  <br /></td></tr>
<tr class="separator:a7f28bcf6516e018638aa30d7d7d33e2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade53690995c9c0c41164aea914536fc7" id="r_ade53690995c9c0c41164aea914536fc7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structMuttThread.html">MuttThread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ade53690995c9c0c41164aea914536fc7">find_subject</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMuttThread.html">MuttThread</a> *cur)</td></tr>
<tr class="memdesc:ade53690995c9c0c41164aea914536fc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the best possible match for a parent based on subject.  <br /></td></tr>
<tr class="separator:ade53690995c9c0c41164aea914536fc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb24af0cb606aad19e947822ec7855bd" id="r_abb24af0cb606aad19e947822ec7855bd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structHashTable.html">HashTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb24af0cb606aad19e947822ec7855bd">make_subj_hash</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:abb24af0cb606aad19e947822ec7855bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a Hash Table for the email subjects.  <br /></td></tr>
<tr class="separator:abb24af0cb606aad19e947822ec7855bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab579aee56d21be30318ba922c591fe9" id="r_aab579aee56d21be30318ba922c591fe9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aab579aee56d21be30318ba922c591fe9">pseudo_threads</a> (struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *tctx)</td></tr>
<tr class="memdesc:aab579aee56d21be30318ba922c591fe9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread messages by subject.  <br /></td></tr>
<tr class="separator:aab579aee56d21be30318ba922c591fe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e6979ff2660cfcc507fed20066338a6" id="r_a1e6979ff2660cfcc507fed20066338a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e6979ff2660cfcc507fed20066338a6">mutt_clear_threads</a> (struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *tctx)</td></tr>
<tr class="memdesc:a1e6979ff2660cfcc507fed20066338a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the threading of message in a mailbox.  <br /></td></tr>
<tr class="separator:a1e6979ff2660cfcc507fed20066338a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga368375f735420aa5dd7d2a1d2c9bd5b7" id="r_ga368375f735420aa5dd7d2a1d2c9bd5b7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sort__api.html#ga368375f735420aa5dd7d2a1d2c9bd5b7">compare_threads</a> (const void *a, const void *b, void *sdata)</td></tr>
<tr class="memdesc:ga368375f735420aa5dd7d2a1d2c9bd5b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper to sort email threads - Implements <a class="el" href="qsort__r_8h.html#aba6ac91047d93d4a94103cd9db50d759">sort_t</a> -.  <br /></td></tr>
<tr class="separator:ga368375f735420aa5dd7d2a1d2c9bd5b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31b9ed6d88ccb87e1a97189a62c317a3" id="r_a31b9ed6d88ccb87e1a97189a62c317a3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31b9ed6d88ccb87e1a97189a62c317a3">mutt_sort_subthreads</a> (struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *tctx, bool init)</td></tr>
<tr class="memdesc:a31b9ed6d88ccb87e1a97189a62c317a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sort the children of a thread.  <br /></td></tr>
<tr class="separator:a31b9ed6d88ccb87e1a97189a62c317a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb8bcb094dc43f9c4fb43f7e9bd76deb" id="r_abb8bcb094dc43f9c4fb43f7e9bd76deb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb8bcb094dc43f9c4fb43f7e9bd76deb">check_subjects</a> (struct <a class="el" href="structMailboxView.html">MailboxView</a> *mv, bool init)</td></tr>
<tr class="memdesc:abb8bcb094dc43f9c4fb43f7e9bd76deb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find out which emails' subjects differ from their parent's.  <br /></td></tr>
<tr class="separator:abb8bcb094dc43f9c4fb43f7e9bd76deb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac7a6c714d618e4154a6c7380db506729" id="r_gac7a6c714d618e4154a6c7380db506729"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hash__hdata__free__api.html#gac7a6c714d618e4154a6c7380db506729">thread_hash_destructor</a> (int type, void *obj, intptr_t data)</td></tr>
<tr class="memdesc:gac7a6c714d618e4154a6c7380db506729"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free our hash table data - Implements <a class="el" href="hash_8h.html#a984643f7b9b40f093ad3d6335b7a5118">hash_hdata_free_t</a> -.  <br /></td></tr>
<tr class="separator:gac7a6c714d618e4154a6c7380db506729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7bcb788cdd39c241efce4af04d2f3dc" id="r_ac7bcb788cdd39c241efce4af04d2f3dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac7bcb788cdd39c241efce4af04d2f3dc">mutt_sort_threads</a> (struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *tctx, bool init)</td></tr>
<tr class="memdesc:ac7bcb788cdd39c241efce4af04d2f3dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sort email threads.  <br /></td></tr>
<tr class="separator:ac7bcb788cdd39c241efce4af04d2f3dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb66f40987e98d64c631d45ee1bda645" id="r_adb66f40987e98d64c631d45ee1bda645"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb66f40987e98d64c631d45ee1bda645">mutt_aside_thread</a> (struct <a class="el" href="structEmail.html">Email</a> *e, bool forwards, bool subthreads)</td></tr>
<tr class="memdesc:adb66f40987e98d64c631d45ee1bda645"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the next/previous (sub)thread.  <br /></td></tr>
<tr class="separator:adb66f40987e98d64c631d45ee1bda645"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae021dae3b838ebc7f688d4c9204a2308" id="r_ae021dae3b838ebc7f688d4c9204a2308"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae021dae3b838ebc7f688d4c9204a2308">mutt_parent_message</a> (struct <a class="el" href="structEmail.html">Email</a> *e, bool find_root)</td></tr>
<tr class="memdesc:ae021dae3b838ebc7f688d4c9204a2308"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the parent of a message.  <br /></td></tr>
<tr class="separator:ae021dae3b838ebc7f688d4c9204a2308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad208699eb4bc42837530572fbe4caf8d" id="r_ad208699eb4bc42837530572fbe4caf8d"><td class="memItemLeft" align="right" valign="top">off_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad208699eb4bc42837530572fbe4caf8d">mutt_set_vnum</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ad208699eb4bc42837530572fbe4caf8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the virtual index number of all the messages in a mailbox.  <br /></td></tr>
<tr class="separator:ad208699eb4bc42837530572fbe4caf8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a249d2b866bc0b7a8ef5c4954fd4c33b0" id="r_a249d2b866bc0b7a8ef5c4954fd4c33b0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a249d2b866bc0b7a8ef5c4954fd4c33b0">mutt_traverse_thread</a> (struct <a class="el" href="structEmail.html">Email</a> *e_cur, <a class="el" href="mutt__thread_8h.html#a13d89de5f6b408671d0e624de135ea8a">MuttThreadFlags</a> flag)</td></tr>
<tr class="memdesc:a249d2b866bc0b7a8ef5c4954fd4c33b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recurse through an email thread, matching messages.  <br /></td></tr>
<tr class="separator:a249d2b866bc0b7a8ef5c4954fd4c33b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ea1d8cc762023c88ee9152f9d0a7ce0" id="r_a7ea1d8cc762023c88ee9152f9d0a7ce0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ea1d8cc762023c88ee9152f9d0a7ce0">mutt_messages_in_thread</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, enum <a class="el" href="mutt__thread_8h.html#a7fd1879ba8179c12165019a4f005e1f4">MessageInThread</a> mit)</td></tr>
<tr class="memdesc:a7ea1d8cc762023c88ee9152f9d0a7ce0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count the messages in a thread.  <br /></td></tr>
<tr class="separator:a7ea1d8cc762023c88ee9152f9d0a7ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8501253bd895f865daea90b51817425" id="r_ae8501253bd895f865daea90b51817425"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structHashTable.html">HashTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae8501253bd895f865daea90b51817425">mutt_make_id_hash</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ae8501253bd895f865daea90b51817425"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a Hash Table for message-ids.  <br /></td></tr>
<tr class="separator:ae8501253bd895f865daea90b51817425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb0f13585d6ee005d688ac2579fb53a9" id="r_aeb0f13585d6ee005d688ac2579fb53a9"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeb0f13585d6ee005d688ac2579fb53a9">link_threads</a> (struct <a class="el" href="structEmail.html">Email</a> *parent, struct <a class="el" href="structEmail.html">Email</a> *child, struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:aeb0f13585d6ee005d688ac2579fb53a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forcibly link messages together.  <br /></td></tr>
<tr class="separator:aeb0f13585d6ee005d688ac2579fb53a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6414f40cab1603a6cdb8e6c91a6c3c84" id="r_a6414f40cab1603a6cdb8e6c91a6c3c84"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6414f40cab1603a6cdb8e6c91a6c3c84">mutt_link_threads</a> (struct <a class="el" href="structEmail.html">Email</a> *parent, struct EmailArray *children, struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a6414f40cab1603a6cdb8e6c91a6c3c84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forcibly link threads together.  <br /></td></tr>
<tr class="separator:a6414f40cab1603a6cdb8e6c91a6c3c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e0a2823d87a6353ff855ea5ea581342" id="r_a4e0a2823d87a6353ff855ea5ea581342"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e0a2823d87a6353ff855ea5ea581342">mutt_thread_collapse_collapsed</a> (struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *tctx)</td></tr>
<tr class="memdesc:a4e0a2823d87a6353ff855ea5ea581342"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-collapse threads marked as collapsed.  <br /></td></tr>
<tr class="separator:a4e0a2823d87a6353ff855ea5ea581342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a344c76e215dd1974a684a6ed8d8e580f" id="r_a344c76e215dd1974a684a6ed8d8e580f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a344c76e215dd1974a684a6ed8d8e580f">mutt_thread_collapse</a> (struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *tctx, bool collapse)</td></tr>
<tr class="memdesc:a344c76e215dd1974a684a6ed8d8e580f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle collapse.  <br /></td></tr>
<tr class="separator:a344c76e215dd1974a684a6ed8d8e580f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add8cf6c27de9c8ef451a521b535e6f60" id="r_add8cf6c27de9c8ef451a521b535e6f60"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add8cf6c27de9c8ef451a521b535e6f60">mutt_thread_can_collapse</a> (struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:add8cf6c27de9c8ef451a521b535e6f60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a thread can be collapsed.  <br /></td></tr>
<tr class="separator:add8cf6c27de9c8ef451a521b535e6f60"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5c2a82bc1766950548a5d97a7dbd8d2a" id="r_a5c2a82bc1766950548a5d97a7dbd8d2a"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="structMapping.html">Mapping</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c2a82bc1766950548a5d97a7dbd8d2a">UseThreadsMethods</a> []</td></tr>
<tr class="memdesc:a5c2a82bc1766950548a5d97a7dbd8d2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Choices for '$use_threads' for the index.  <br /></td></tr>
<tr class="separator:a5c2a82bc1766950548a5d97a7dbd8d2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0da49fbb8f920960daef313c3fc7ee2" id="r_ad0da49fbb8f920960daef313c3fc7ee2"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="structEnumDef.html">EnumDef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad0da49fbb8f920960daef313c3fc7ee2">UseThreadsTypeDef</a></td></tr>
<tr class="memdesc:ad0da49fbb8f920960daef313c3fc7ee2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data for the $use_threads enumeration.  <br /></td></tr>
<tr class="separator:ad0da49fbb8f920960daef313c3fc7ee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Create/manipulate threading in emails. </p>
<dl class="section author"><dt>Authors</dt><dd><ul>
<li>Peter Lewis</li>
<li>Richard Russon</li>
<li>Pietro Cerutti</li>
<li>Federico Kircheis</li>
<li>Eric Blake</li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</dd></dl>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p class="definition">Definition in file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa7ffe096f2973f3d0cd486f8e8b4228b" name="aa7ffe096f2973f3d0cd486f8e8b4228b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7ffe096f2973f3d0cd486f8e8b4228b">&#9670;&#160;</a></span>mutt_thread_style()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6">UseThreads</a> mutt_thread_style </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Which threading style is active? </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935" title="Unthreaded.">UT_FLAT</a></td><td>No threading in use </td></tr>
    <tr><td class="paramname"><a class="el" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a7bfb9746c433e5df2aa2ac63688c31ee" title="Normal threading (root above subthreads)">UT_THREADS</a></td><td>Normal threads (root above subthread) </td></tr>
    <tr><td class="paramname"><a class="el" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef" title="Reverse threading (subthreads above root)">UT_REVERSE</a></td><td>Reverse threads (subthread above root)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>UT_UNSET is never returned; rather, this function considers the interaction between $use_threads and $sort. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00080">80</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   81</span>{</div>
<div class="line"><span class="lineno">   82</span>  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c_use_threads = <a class="code hl_function" href="config_2helpers_8c.html#a95398bb7e62a54dcce14a027a926a193">cs_subset_enum</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;use_threads&quot;</span>);</div>
<div class="line"><span class="lineno">   83</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4">EmailSortType</a> c_sort = <a class="code hl_function" href="config_2helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>);</div>
<div class="line"><span class="lineno">   84</span>  <span class="keywordflow">if</span> (c_use_threads &gt; <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935">UT_FLAT</a>)</div>
<div class="line"><span class="lineno">   85</span>    <span class="keywordflow">return</span> c_use_threads;</div>
<div class="line"><span class="lineno">   86</span>  <span class="keywordflow">if</span> ((c_sort &amp; <a class="code hl_define" href="config_2sort_8h.html#a971f7b510c659c9c197c6c3f50714eb5">SORT_MASK</a>) != <a class="code hl_enumvalue" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4a877f1379faba3adfe224a0f564cfa245">EMAIL_SORT_THREADS</a>)</div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935">UT_FLAT</a>;</div>
<div class="line"><span class="lineno">   88</span>  <span class="keywordflow">if</span> (c_sort &amp; <a class="code hl_define" href="config_2sort_8h.html#aed7fbab2a014eaeff33b71040530c48d">SORT_REVERSE</a>)</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef">UT_REVERSE</a>;</div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a7bfb9746c433e5df2aa2ac63688c31ee">UT_THREADS</a>;</div>
<div class="line"><span class="lineno">   91</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_a95398bb7e62a54dcce14a027a926a193"><div class="ttname"><a href="config_2helpers_8c.html#a95398bb7e62a54dcce14a027a926a193">cs_subset_enum</a></div><div class="ttdeci">unsigned char cs_subset_enum(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a enumeration config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00071">helpers.c:71</a></div></div>
<div class="ttc" id="aconfig_2helpers_8c_html_af7f3de51c3c2f5b8f527f40c8397a3fc"><div class="ttname"><a href="config_2helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a></div><div class="ttdeci">short cs_subset_sort(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a sort config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00266">helpers.c:266</a></div></div>
<div class="ttc" id="aconfig_2sort_8h_html_a971f7b510c659c9c197c6c3f50714eb5"><div class="ttname"><a href="config_2sort_8h.html#a971f7b510c659c9c197c6c3f50714eb5">SORT_MASK</a></div><div class="ttdeci">#define SORT_MASK</div><div class="ttdoc">Mask for the sort id.</div><div class="ttdef"><b>Definition</b> <a href="config_2sort_8h_source.html#l00038">sort.h:38</a></div></div>
<div class="ttc" id="aconfig_2sort_8h_html_aed7fbab2a014eaeff33b71040530c48d"><div class="ttname"><a href="config_2sort_8h.html#aed7fbab2a014eaeff33b71040530c48d">SORT_REVERSE</a></div><div class="ttdeci">#define SORT_REVERSE</div><div class="ttdoc">Reverse the order of the sort.</div><div class="ttdef"><b>Definition</b> <a href="config_2sort_8h_source.html#l00039">sort.h:39</a></div></div>
<div class="ttc" id="aemail_2sort_8h_html_aefa89e4f16231d09e09e4693bebf6dd4"><div class="ttname"><a href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4">EmailSortType</a></div><div class="ttdeci">EmailSortType</div><div class="ttdoc">Methods for sorting Emails.</div><div class="ttdef"><b>Definition</b> <a href="email_2sort_8h_source.html#l00052">sort.h:53</a></div></div>
<div class="ttc" id="aemail_2sort_8h_html_aefa89e4f16231d09e09e4693bebf6dd4a877f1379faba3adfe224a0f564cfa245"><div class="ttname"><a href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4a877f1379faba3adfe224a0f564cfa245">EMAIL_SORT_THREADS</a></div><div class="ttdeci">@ EMAIL_SORT_THREADS</div><div class="ttdoc">Sort by email threads.</div><div class="ttdef"><b>Definition</b> <a href="email_2sort_8h_source.html#l00062">sort.h:62</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935"><div class="ttname"><a href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935">UT_FLAT</a></div><div class="ttdeci">@ UT_FLAT</div><div class="ttdoc">Unthreaded.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00098">mutt_thread.h:98</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_a317428aabc925e6a974638673629ddd6a7bfb9746c433e5df2aa2ac63688c31ee"><div class="ttname"><a href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a7bfb9746c433e5df2aa2ac63688c31ee">UT_THREADS</a></div><div class="ttdeci">@ UT_THREADS</div><div class="ttdoc">Normal threading (root above subthreads)</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00099">mutt_thread.h:99</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef"><div class="ttname"><a href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef">UT_REVERSE</a></div><div class="ttdeci">@ UT_REVERSE</div><div class="ttdoc">Reverse threading (subthreads above root)</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00100">mutt_thread.h:100</a></div></div>
<div class="ttc" id="astructNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00042">neomutt.h:43</a></div></div>
<div class="ttc" id="astructNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00047">neomutt.h:47</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_aa7ffe096f2973f3d0cd486f8e8b4228b_cgraph.svg" width="315" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_aa7ffe096f2973f3d0cd486f8e8b4228b_icgraph.svg" width="376" height="467"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a849aee4fafabc93f47d0aa2beba610fb" name="a849aee4fafabc93f47d0aa2beba610fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a849aee4fafabc93f47d0aa2beba610fb">&#9670;&#160;</a></span>get_use_threads_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * get_use_threads_str </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6">UseThreads</a></td>          <td class="paramname"><span class="paramname"><em>value</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert <a class="el" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6" title="Which threading style is active, $use_threads.">UseThreads</a> enum to string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>Value to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>String form of value </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00098">98</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   99</span>{</div>
<div class="line"><span class="lineno">  100</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="mapping_8c.html#ae52d375da6dc3039d2341ae4ace4f557">mutt_map_get_name</a>(value, <a class="code hl_variable" href="#a5c2a82bc1766950548a5d97a7dbd8d2a">UseThreadsMethods</a>);</div>
<div class="line"><span class="lineno">  101</span>}</div>
<div class="ttc" id="amapping_8c_html_ae52d375da6dc3039d2341ae4ace4f557"><div class="ttname"><a href="mapping_8c.html#ae52d375da6dc3039d2341ae4ace4f557">mutt_map_get_name</a></div><div class="ttdeci">const char * mutt_map_get_name(int val, const struct Mapping *map)</div><div class="ttdoc">Lookup a string for a constant.</div><div class="ttdef"><b>Definition</b> <a href="mapping_8c_source.html#l00042">mapping.c:42</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_a5c2a82bc1766950548a5d97a7dbd8d2a"><div class="ttname"><a href="#a5c2a82bc1766950548a5d97a7dbd8d2a">UseThreadsMethods</a></div><div class="ttdeci">static const struct Mapping UseThreadsMethods[]</div><div class="ttdoc">Choices for &#39;$use_threads&#39; for the index.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00051">mutt_thread.c:51</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a849aee4fafabc93f47d0aa2beba610fb_cgraph.svg" width="358" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a849aee4fafabc93f47d0aa2beba610fb_icgraph.svg" width="388" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af6f89eb1fe9177d9a3484842f7d5c1cc" name="af6f89eb1fe9177d9a3484842f7d5c1cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6f89eb1fe9177d9a3484842f7d5c1cc">&#9670;&#160;</a></span>is_visible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_visible </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is the message visible? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The message is not hidden in some way </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00121">121</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  122</span>{</div>
<div class="line"><span class="lineno">  123</span>  <span class="keywordflow">return</span> e-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a> &gt;= 0 || (e-&gt;<a class="code hl_variable" href="structEmail.html#a511f080349cca94d2e3dd531f76351ee">collapsed</a> &amp;&amp; e-&gt;<a class="code hl_variable" href="structEmail.html#a1b48457d5e16b021ada7d227b689f516">visible</a>);</div>
<div class="line"><span class="lineno">  124</span>}</div>
<div class="ttc" id="astructEmail_html_a1b48457d5e16b021ada7d227b689f516"><div class="ttname"><a href="structEmail.html#a1b48457d5e16b021ada7d227b689f516">Email::visible</a></div><div class="ttdeci">bool visible</div><div class="ttdoc">Is this message part of the view?</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00121">email.h:121</a></div></div>
<div class="ttc" id="astructEmail_html_a511f080349cca94d2e3dd531f76351ee"><div class="ttname"><a href="structEmail.html#a511f080349cca94d2e3dd531f76351ee">Email::collapsed</a></div><div class="ttdeci">bool collapsed</div><div class="ttdoc">Is this message part of a collapsed thread?</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00120">email.h:120</a></div></div>
<div class="ttc" id="astructEmail_html_aa5e274ea0f8ce3482f226752fcccad12"><div class="ttname"><a href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">Email::vnum</a></div><div class="ttdeci">int vnum</div><div class="ttdoc">Virtual message number.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00114">email.h:114</a></div></div>
</div><!-- fragment --><div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_af6f89eb1fe9177d9a3484842f7d5c1cc_icgraph.svg" width="470" height="170"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="acce2e33f71f8f2ab4797ce26a057d5ce" name="acce2e33f71f8f2ab4797ce26a057d5ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acce2e33f71f8f2ab4797ce26a057d5ce">&#9670;&#160;</a></span>need_display_subject()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool need_display_subject </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines whether to display a message's subject. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The subject should be displayed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00131">131</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  132</span>{</div>
<div class="line"><span class="lineno">  133</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *tmp = NULL;</div>
<div class="line"><span class="lineno">  134</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *tree = e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>;</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>  <span class="comment">/* if the user disabled subject hiding, display it */</span></div>
<div class="line"><span class="lineno">  137</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_hide_thread_subject = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;hide_thread_subject&quot;</span>);</div>
<div class="line"><span class="lineno">  138</span>  <span class="keywordflow">if</span> (!c_hide_thread_subject)</div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>  <span class="comment">/* if our subject is different from our parent&#39;s, display it */</span></div>
<div class="line"><span class="lineno">  142</span>  <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a6067344fac1be8e00a770303a13974a2">subject_changed</a>)</div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>  <span class="comment">/* if our subject is different from that of our closest previously displayed</span></div>
<div class="line"><span class="lineno">  146</span><span class="comment">   * sibling, display the subject */</span></div>
<div class="line"><span class="lineno">  147</span>  <span class="keywordflow">for</span> (tmp = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">prev</a>; tmp; tmp = tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">prev</a>)</div>
<div class="line"><span class="lineno">  148</span>  {</div>
<div class="line"><span class="lineno">  149</span>    e = tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>;</div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">if</span> (e &amp;&amp; <a class="code hl_function" href="#af6f89eb1fe9177d9a3484842f7d5c1cc">is_visible</a>(e))</div>
<div class="line"><span class="lineno">  151</span>    {</div>
<div class="line"><span class="lineno">  152</span>      <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a6067344fac1be8e00a770303a13974a2">subject_changed</a>)</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  154</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  155</span>    }</div>
<div class="line"><span class="lineno">  156</span>  }</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>  <span class="comment">/* if there is a parent-to-child subject change anywhere between us and our</span></div>
<div class="line"><span class="lineno">  159</span><span class="comment">   * closest displayed ancestor, display the subject */</span></div>
<div class="line"><span class="lineno">  160</span>  <span class="keywordflow">for</span> (tmp = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>; tmp; tmp = tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno">  161</span>  {</div>
<div class="line"><span class="lineno">  162</span>    e = tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>;</div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordflow">if</span> (e)</div>
<div class="line"><span class="lineno">  164</span>    {</div>
<div class="line"><span class="lineno">  165</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="#af6f89eb1fe9177d9a3484842f7d5c1cc">is_visible</a>(e))</div>
<div class="line"><span class="lineno">  166</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  167</span>      <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a6067344fac1be8e00a770303a13974a2">subject_changed</a>)</div>
<div class="line"><span class="lineno">  168</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  169</span>    }</div>
<div class="line"><span class="lineno">  170</span>  }</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>  <span class="comment">/* if we have no visible parent or previous sibling, display the subject */</span></div>
<div class="line"><span class="lineno">  173</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  174</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00047">helpers.c:47</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_af6f89eb1fe9177d9a3484842f7d5c1cc"><div class="ttname"><a href="#af6f89eb1fe9177d9a3484842f7d5c1cc">is_visible</a></div><div class="ttdeci">static bool is_visible(struct Email *e)</div><div class="ttdoc">Is the message visible?</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00121">mutt_thread.c:121</a></div></div>
<div class="ttc" id="astructEmail_html_a6067344fac1be8e00a770303a13974a2"><div class="ttname"><a href="structEmail.html#a6067344fac1be8e00a770303a13974a2">Email::subject_changed</a></div><div class="ttdeci">bool subject_changed</div><div class="ttdoc">Used for threading.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00106">email.h:106</a></div></div>
<div class="ttc" id="astructEmail_html_af7fd9d5febf878edc4b6965ec40f312e"><div class="ttname"><a href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">Email::thread</a></div><div class="ttdeci">struct MuttThread * thread</div><div class="ttdoc">Thread of Emails.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00119">email.h:119</a></div></div>
<div class="ttc" id="astructMuttThread_html"><div class="ttname"><a href="structMuttThread.html">MuttThread</a></div><div class="ttdoc">An Email conversation.</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00033">thread.h:34</a></div></div>
<div class="ttc" id="astructMuttThread_html_a39d5bb1957cb943617225ff5efb9f55c"><div class="ttname"><a href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">MuttThread::parent</a></div><div class="ttdeci">struct MuttThread * parent</div><div class="ttdoc">Parent of this Thread.</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00044">thread.h:44</a></div></div>
<div class="ttc" id="astructMuttThread_html_a5931c5905063b72935f0b37f044dad00"><div class="ttname"><a href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">MuttThread::prev</a></div><div class="ttdeci">struct MuttThread * prev</div><div class="ttdoc">Previous sibling Thread.</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00047">thread.h:47</a></div></div>
<div class="ttc" id="astructMuttThread_html_a76cec751739177388526fb9ae65b7383"><div class="ttname"><a href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">MuttThread::message</a></div><div class="ttdeci">struct Email * message</div><div class="ttdoc">Email this Thread refers to.</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00049">thread.h:49</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_acce2e33f71f8f2ab4797ce26a057d5ce_cgraph.svg" width="324" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_acce2e33f71f8f2ab4797ce26a057d5ce_icgraph.svg" width="339" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a050f78574b03ad5cca308994796e5237" name="a050f78574b03ad5cca308994796e5237"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a050f78574b03ad5cca308994796e5237">&#9670;&#160;</a></span>linearize_tree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void linearize_tree </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *</td>          <td class="paramname"><span class="paramname"><em>tctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flatten an email thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tctx</td><td>Threading context </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00180">180</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  181</span>{</div>
<div class="line"><span class="lineno">  182</span>  <span class="keywordflow">if</span> (!tctx || !tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0a6e58e743952ee8c0b0828be0c2909c">mailbox_view</a>)</div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMailbox.html">Mailbox</a> *m = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0a6e58e743952ee8c0b0828be0c2909c">mailbox_view</a>-&gt;<a class="code hl_variable" href="structMailboxView.html#acc1ad6ff0a3ac9c635ac2a68399d3280">mailbox</a>;</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> reverse = (<a class="code hl_function" href="#aa7ffe096f2973f3d0cd486f8e8b4228b">mutt_thread_style</a>() == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef">UT_REVERSE</a>);</div>
<div class="line"><span class="lineno">  188</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *tree = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a>;</div>
<div class="line"><span class="lineno">  189</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> **array = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a> + (reverse ? m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> - 1 : 0);</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>  <span class="keywordflow">while</span> (<a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a>)</div>
<div class="line"><span class="lineno">  192</span>  {</div>
<div class="line"><span class="lineno">  193</span>    <span class="keywordflow">while</span> (!<a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a>-&gt;message)</div>
<div class="line"><span class="lineno">  194</span>      <a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a> = <a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a>-&gt;child;</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>    *array = <a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a>-&gt;message;</div>
<div class="line"><span class="lineno">  197</span>    array += reverse ? -1 : 1;</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a>-&gt;child)</div>
<div class="line"><span class="lineno">  200</span>    {</div>
<div class="line"><span class="lineno">  201</span>      <a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a> = <a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a>-&gt;child;</div>
<div class="line"><span class="lineno">  202</span>    }</div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  204</span>    {</div>
<div class="line"><span class="lineno">  205</span>      <span class="keywordflow">while</span> (<a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a>)</div>
<div class="line"><span class="lineno">  206</span>      {</div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a>-&gt;next)</div>
<div class="line"><span class="lineno">  208</span>        {</div>
<div class="line"><span class="lineno">  209</span>          <a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a> = <a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a>-&gt;next;</div>
<div class="line"><span class="lineno">  210</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  211</span>        }</div>
<div class="line"><span class="lineno">  212</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  213</span>        {</div>
<div class="line"><span class="lineno">  214</span>          <a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a> = <a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a>-&gt;parent;</div>
<div class="line"><span class="lineno">  215</span>        }</div>
<div class="line"><span class="lineno">  216</span>      }</div>
<div class="line"><span class="lineno">  217</span>    }</div>
<div class="line"><span class="lineno">  218</span>  }</div>
<div class="line"><span class="lineno">  219</span>}</div>
<div class="ttc" id="amutt__thread_8c_html_aa7ffe096f2973f3d0cd486f8e8b4228b"><div class="ttname"><a href="#aa7ffe096f2973f3d0cd486f8e8b4228b">mutt_thread_style</a></div><div class="ttdeci">enum UseThreads mutt_thread_style(void)</div><div class="ttdoc">Which threading style is active?</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00080">mutt_thread.c:80</a></div></div>
<div class="ttc" id="astructEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00038">email.h:39</a></div></div>
<div class="ttc" id="astructEmail_html_a6ab0c038ad82a3771c419731c93398ce"><div class="ttname"><a href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">Email::tree</a></div><div class="ttdeci">char * tree</div><div class="ttdoc">Character string to print thread tree.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00125">email.h:125</a></div></div>
<div class="ttc" id="astructMailboxView_html_acc1ad6ff0a3ac9c635ac2a68399d3280"><div class="ttname"><a href="structMailboxView.html#acc1ad6ff0a3ac9c635ac2a68399d3280">MailboxView::mailbox</a></div><div class="ttdeci">struct Mailbox * mailbox</div><div class="ttdoc">Current Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="mview_8h_source.html#l00051">mview.h:51</a></div></div>
<div class="ttc" id="astructMailbox_html"><div class="ttname"><a href="structMailbox.html">Mailbox</a></div><div class="ttdoc">A mailbox.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00078">mailbox.h:79</a></div></div>
<div class="ttc" id="astructMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00088">mailbox.h:88</a></div></div>
<div class="ttc" id="astructMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00096">mailbox.h:96</a></div></div>
<div class="ttc" id="astructThreadsContext_html_a0a6e58e743952ee8c0b0828be0c2909c"><div class="ttname"><a href="structThreadsContext.html#a0a6e58e743952ee8c0b0828be0c2909c">ThreadsContext::mailbox_view</a></div><div class="ttdeci">struct MailboxView * mailbox_view</div><div class="ttdoc">Current mailbox.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00043">mutt_thread.h:43</a></div></div>
<div class="ttc" id="astructThreadsContext_html_a0c499ca77a266daf0af9c659fc41de9f"><div class="ttname"><a href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">ThreadsContext::tree</a></div><div class="ttdeci">struct MuttThread * tree</div><div class="ttdoc">Top of thread tree.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00044">mutt_thread.h:44</a></div></div>
</div><!-- fragment --><div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a050f78574b03ad5cca308994796e5237_cgraph.svg" width="298" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a050f78574b03ad5cca308994796e5237_icgraph.svg" width="300" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a065e55c8886d9e2850e6f9cfdaf7bdb7" name="a065e55c8886d9e2850e6f9cfdaf7bdb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a065e55c8886d9e2850e6f9cfdaf7bdb7">&#9670;&#160;</a></span>calculate_visibility()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void calculate_visibility </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMuttThread.html">MuttThread</a> *</td>          <td class="paramname"><span class="paramname"><em>tree</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>max_depth</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Are tree nodes visible. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tree</td><td>Threads tree </td></tr>
    <tr><td class="paramname">max_depth</td><td>Maximum depth to check</td></tr>
  </table>
  </dd>
</dl>
<p>this calculates whether a node is the root of a subtree that has visible nodes, whether a node itself is visible, whether, if invisible, it has depth anyway, and whether any of its later siblings are roots of visible subtrees. while it's at it, it frees the old thread display, so we can skip parts of the tree in <a class="el" href="#a726f16b8fb688c688a6d0147052103d8" title="Draw a tree of threaded emails.">mutt_draw_tree()</a> if we've decided here that we don't care about them any more. </p>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00233">233</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  234</span>{</div>
<div class="line"><span class="lineno">  235</span>  <span class="keywordflow">if</span> (!tree)</div>
<div class="line"><span class="lineno">  236</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *tmp = NULL;</div>
<div class="line"><span class="lineno">  239</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *orig_tree = tree;</div>
<div class="line"><span class="lineno">  240</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_hide_top_missing = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;hide_top_missing&quot;</span>);</div>
<div class="line"><span class="lineno">  241</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_hide_missing = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;hide_missing&quot;</span>);</div>
<div class="line"><span class="lineno">  242</span>  <span class="keywordtype">int</span> hide_top_missing = c_hide_top_missing &amp;&amp; !c_hide_missing;</div>
<div class="line"><span class="lineno">  243</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_hide_top_limited = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;hide_top_limited&quot;</span>);</div>
<div class="line"><span class="lineno">  244</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_hide_limited = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;hide_limited&quot;</span>);</div>
<div class="line"><span class="lineno">  245</span>  <span class="keywordtype">int</span> hide_top_limited = c_hide_top_limited &amp;&amp; !c_hide_limited;</div>
<div class="line"><span class="lineno">  246</span>  <span class="keywordtype">int</span> depth = 0;</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>  <span class="comment">/* we walk each level backwards to make it easier to compute next_subtree_visible */</span></div>
<div class="line"><span class="lineno">  249</span>  <span class="keywordflow">while</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno">  250</span>    tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno">  251</span>  *max_depth = 0;</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>  <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  254</span>  {</div>
<div class="line"><span class="lineno">  255</span>    <span class="keywordflow">if</span> (depth &gt; *max_depth)</div>
<div class="line"><span class="lineno">  256</span>      *max_depth = depth;</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>    tree-&gt;<a class="code hl_variable" href="structMuttThread.html#abfc3f860f57e8c763cbcdc586b8b1448">subtree_visible</a> = 0;</div>
<div class="line"><span class="lineno">  259</span>    <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>)</div>
<div class="line"><span class="lineno">  260</span>    {</div>
<div class="line"><span class="lineno">  261</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a>);</div>
<div class="line"><span class="lineno">  262</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="#af6f89eb1fe9177d9a3484842f7d5c1cc">is_visible</a>(tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>))</div>
<div class="line"><span class="lineno">  263</span>      {</div>
<div class="line"><span class="lineno">  264</span>        tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a8c1fd0aa931c50f735bec5e5660856b8">deep</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  265</span>        tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a30c80a1167887f0dc4ab7bff443b8df3">visible</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  266</span>        tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a1906966857aa61046b2eca2eeffaf603">display_subject</a> = <a class="code hl_function" href="#acce2e33f71f8f2ab4797ce26a057d5ce">need_display_subject</a>(tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>);</div>
<div class="line"><span class="lineno">  267</span>        <span class="keywordflow">for</span> (tmp = tree; tmp; tmp = tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno">  268</span>        {</div>
<div class="line"><span class="lineno">  269</span>          <span class="keywordflow">if</span> (tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#abfc3f860f57e8c763cbcdc586b8b1448">subtree_visible</a>)</div>
<div class="line"><span class="lineno">  270</span>          {</div>
<div class="line"><span class="lineno">  271</span>            tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a8c1fd0aa931c50f735bec5e5660856b8">deep</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  272</span>            tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#abfc3f860f57e8c763cbcdc586b8b1448">subtree_visible</a> = 2;</div>
<div class="line"><span class="lineno">  273</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  274</span>          }</div>
<div class="line"><span class="lineno">  275</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  276</span>          {</div>
<div class="line"><span class="lineno">  277</span>            tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#abfc3f860f57e8c763cbcdc586b8b1448">subtree_visible</a> = 1;</div>
<div class="line"><span class="lineno">  278</span>          }</div>
<div class="line"><span class="lineno">  279</span>        }</div>
<div class="line"><span class="lineno">  280</span>      }</div>
<div class="line"><span class="lineno">  281</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  282</span>      {</div>
<div class="line"><span class="lineno">  283</span>        tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a30c80a1167887f0dc4ab7bff443b8df3">visible</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  284</span>        tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a8c1fd0aa931c50f735bec5e5660856b8">deep</a> = !c_hide_limited;</div>
<div class="line"><span class="lineno">  285</span>      }</div>
<div class="line"><span class="lineno">  286</span>    }</div>
<div class="line"><span class="lineno">  287</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  288</span>    {</div>
<div class="line"><span class="lineno">  289</span>      tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a30c80a1167887f0dc4ab7bff443b8df3">visible</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  290</span>      tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a8c1fd0aa931c50f735bec5e5660856b8">deep</a> = !c_hide_missing;</div>
<div class="line"><span class="lineno">  291</span>    }</div>
<div class="line"><span class="lineno">  292</span>    tree-&gt;<a class="code hl_variable" href="structMuttThread.html#ae8aeb3656c0937883a1a0c955b12712c">next_subtree_visible</a> = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a> &amp;&amp; (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#ae8aeb3656c0937883a1a0c955b12712c">next_subtree_visible</a> ||</div>
<div class="line"><span class="lineno">  293</span>                                                tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#abfc3f860f57e8c763cbcdc586b8b1448">subtree_visible</a>);</div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>)</div>
<div class="line"><span class="lineno">  295</span>    {</div>
<div class="line"><span class="lineno">  296</span>      depth++;</div>
<div class="line"><span class="lineno">  297</span>      tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno">  298</span>      <span class="keywordflow">while</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno">  299</span>        tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno">  300</span>    }</div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">prev</a>)</div>
<div class="line"><span class="lineno">  302</span>    {</div>
<div class="line"><span class="lineno">  303</span>      tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">prev</a>;</div>
<div class="line"><span class="lineno">  304</span>    }</div>
<div class="line"><span class="lineno">  305</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  306</span>    {</div>
<div class="line"><span class="lineno">  307</span>      <span class="keywordflow">while</span> (tree &amp;&amp; !tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">prev</a>)</div>
<div class="line"><span class="lineno">  308</span>      {</div>
<div class="line"><span class="lineno">  309</span>        depth--;</div>
<div class="line"><span class="lineno">  310</span>        tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno">  311</span>      }</div>
<div class="line"><span class="lineno">  312</span>      <span class="keywordflow">if</span> (!tree)</div>
<div class="line"><span class="lineno">  313</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  314</span>      tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">prev</a>;</div>
<div class="line"><span class="lineno">  315</span>    }</div>
<div class="line"><span class="lineno">  316</span>  }</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>  <span class="comment">/* now fix up for the OPTHIDETOP* options if necessary */</span></div>
<div class="line"><span class="lineno">  319</span>  <span class="keywordflow">if</span> (hide_top_limited || hide_top_missing)</div>
<div class="line"><span class="lineno">  320</span>  {</div>
<div class="line"><span class="lineno">  321</span>    tree = orig_tree;</div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  323</span>    {</div>
<div class="line"><span class="lineno">  324</span>      <span class="keywordflow">if</span> (!tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a30c80a1167887f0dc4ab7bff443b8df3">visible</a> &amp;&amp; tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a8c1fd0aa931c50f735bec5e5660856b8">deep</a> &amp;&amp; (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#abfc3f860f57e8c763cbcdc586b8b1448">subtree_visible</a> &lt; 2) &amp;&amp;</div>
<div class="line"><span class="lineno">  325</span>          ((tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a> &amp;&amp; hide_top_limited) || (!tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a> &amp;&amp; hide_top_missing)))</div>
<div class="line"><span class="lineno">  326</span>      {</div>
<div class="line"><span class="lineno">  327</span>        tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a8c1fd0aa931c50f735bec5e5660856b8">deep</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  328</span>      }</div>
<div class="line"><span class="lineno">  329</span>      <span class="keywordflow">if</span> (!tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a8c1fd0aa931c50f735bec5e5660856b8">deep</a> &amp;&amp; tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a> &amp;&amp; tree-&gt;<a class="code hl_variable" href="structMuttThread.html#abfc3f860f57e8c763cbcdc586b8b1448">subtree_visible</a>)</div>
<div class="line"><span class="lineno">  330</span>      {</div>
<div class="line"><span class="lineno">  331</span>        tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno">  332</span>      }</div>
<div class="line"><span class="lineno">  333</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno">  334</span>      {</div>
<div class="line"><span class="lineno">  335</span>        tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno">  336</span>      }</div>
<div class="line"><span class="lineno">  337</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  338</span>      {</div>
<div class="line"><span class="lineno">  339</span>        <span class="keywordflow">while</span> (tree &amp;&amp; !tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno">  340</span>          tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno">  341</span>        <span class="keywordflow">if</span> (!tree)</div>
<div class="line"><span class="lineno">  342</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  343</span>        tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno">  344</span>      }</div>
<div class="line"><span class="lineno">  345</span>    }</div>
<div class="line"><span class="lineno">  346</span>  }</div>
<div class="line"><span class="lineno">  347</span>}</div>
<div class="ttc" id="amemory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00063">memory.h:63</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_acce2e33f71f8f2ab4797ce26a057d5ce"><div class="ttname"><a href="#acce2e33f71f8f2ab4797ce26a057d5ce">need_display_subject</a></div><div class="ttdeci">static bool need_display_subject(struct Email *e)</div><div class="ttdoc">Determines whether to display a message&#39;s subject.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00131">mutt_thread.c:131</a></div></div>
<div class="ttc" id="astructEmail_html_a1906966857aa61046b2eca2eeffaf603"><div class="ttname"><a href="structEmail.html#a1906966857aa61046b2eca2eeffaf603">Email::display_subject</a></div><div class="ttdeci">bool display_subject</div><div class="ttdoc">Used for threading.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00101">email.h:101</a></div></div>
<div class="ttc" id="astructMuttThread_html_a30c80a1167887f0dc4ab7bff443b8df3"><div class="ttname"><a href="structMuttThread.html#a30c80a1167887f0dc4ab7bff443b8df3">MuttThread::visible</a></div><div class="ttdeci">bool visible</div><div class="ttdoc">Is this Thread visible?</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00042">thread.h:42</a></div></div>
<div class="ttc" id="astructMuttThread_html_a7067492dadd86f81def9036474086211"><div class="ttname"><a href="structMuttThread.html#a7067492dadd86f81def9036474086211">MuttThread::child</a></div><div class="ttdeci">struct MuttThread * child</div><div class="ttdoc">Child of this Thread.</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00045">thread.h:45</a></div></div>
<div class="ttc" id="astructMuttThread_html_a8c1fd0aa931c50f735bec5e5660856b8"><div class="ttname"><a href="structMuttThread.html#a8c1fd0aa931c50f735bec5e5660856b8">MuttThread::deep</a></div><div class="ttdeci">bool deep</div><div class="ttdoc">Is the Thread deeply nested?</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00036">thread.h:36</a></div></div>
<div class="ttc" id="astructMuttThread_html_abfc3f860f57e8c763cbcdc586b8b1448"><div class="ttname"><a href="structMuttThread.html#abfc3f860f57e8c763cbcdc586b8b1448">MuttThread::subtree_visible</a></div><div class="ttdeci">unsigned int subtree_visible</div><div class="ttdoc">Is this Thread subtree visible?</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00041">thread.h:41</a></div></div>
<div class="ttc" id="astructMuttThread_html_ae8aeb3656c0937883a1a0c955b12712c"><div class="ttname"><a href="structMuttThread.html#ae8aeb3656c0937883a1a0c955b12712c">MuttThread::next_subtree_visible</a></div><div class="ttdeci">bool next_subtree_visible</div><div class="ttdoc">Is the next Thread subtree visible?</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00039">thread.h:39</a></div></div>
<div class="ttc" id="astructMuttThread_html_aee5a1652f34056b764d12844e15f4345"><div class="ttname"><a href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">MuttThread::next</a></div><div class="ttdeci">struct MuttThread * next</div><div class="ttdoc">Next sibling Thread.</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00046">thread.h:46</a></div></div>
</div><!-- fragment --><div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a065e55c8886d9e2850e6f9cfdaf7bdb7_cgraph.svg" width="500" height="106"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a065e55c8886d9e2850e6f9cfdaf7bdb7_icgraph.svg" width="307" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3887239c945c4eef7b5efd942754ca24" name="a3887239c945c4eef7b5efd942754ca24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3887239c945c4eef7b5efd942754ca24">&#9670;&#160;</a></span>mutt_thread_ctx_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> * mutt_thread_ctx_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailboxView.html">MailboxView</a> *</td>          <td class="paramname"><span class="paramname"><em>mv</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a threading context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mv</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> view </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Threading context </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00354">354</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  355</span>{</div>
<div class="line"><span class="lineno">  356</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structThreadsContext.html">ThreadsContext</a> *tctx = <a class="code hl_define" href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a>(1, <span class="keyword">struct</span> <a class="code hl_struct" href="structThreadsContext.html">ThreadsContext</a>);</div>
<div class="line"><span class="lineno">  357</span>  tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0a6e58e743952ee8c0b0828be0c2909c">mailbox_view</a> = mv;</div>
<div class="line"><span class="lineno">  358</span>  <span class="keywordflow">return</span> tctx;</div>
<div class="line"><span class="lineno">  359</span>}</div>
<div class="ttc" id="amemory_8h_html_a9aaf8f21a29735767a069ff1aee9d7d9"><div class="ttname"><a href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a></div><div class="ttdeci">#define MUTT_MEM_CALLOC(n, type)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00048">memory.h:48</a></div></div>
<div class="ttc" id="astructThreadsContext_html"><div class="ttname"><a href="structThreadsContext.html">ThreadsContext</a></div><div class="ttdoc">The &quot;current&quot; threading state.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00041">mutt_thread.h:42</a></div></div>
</div><!-- fragment --><div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a3887239c945c4eef7b5efd942754ca24_icgraph.svg" width="298" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a83a0025fb6c71b19d45e8ba006346303" name="a83a0025fb6c71b19d45e8ba006346303"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83a0025fb6c71b19d45e8ba006346303">&#9670;&#160;</a></span>mutt_thread_ctx_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_thread_ctx_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> **</td>          <td class="paramname"><span class="paramname"><em>ptr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalize a threading context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>Threading context to free </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00365">365</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  366</span>{</div>
<div class="line"><span class="lineno">  367</span>  <span class="keywordflow">if</span> (!ptr || !*ptr)</div>
<div class="line"><span class="lineno">  368</span>  {</div>
<div class="line"><span class="lineno">  369</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  370</span>  }</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structThreadsContext.html">ThreadsContext</a> *tctx = *ptr;</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>  <a class="code hl_function" href="hash_8c.html#afa22b7f78bbf1b59a4a2bd4bdd20948b">mutt_hash_free</a>(&amp;tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a5f2ff2a10c33b293368c1f9b5e98bfb3">hash</a>);</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(ptr);</div>
<div class="line"><span class="lineno">  377</span>}</div>
<div class="ttc" id="ahash_8c_html_afa22b7f78bbf1b59a4a2bd4bdd20948b"><div class="ttname"><a href="hash_8c.html#afa22b7f78bbf1b59a4a2bd4bdd20948b">mutt_hash_free</a></div><div class="ttdeci">void mutt_hash_free(struct HashTable **ptr)</div><div class="ttdoc">Free a hash table.</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00458">hash.c:458</a></div></div>
<div class="ttc" id="astructThreadsContext_html_a5f2ff2a10c33b293368c1f9b5e98bfb3"><div class="ttname"><a href="structThreadsContext.html#a5f2ff2a10c33b293368c1f9b5e98bfb3">ThreadsContext::hash</a></div><div class="ttdeci">struct HashTable * hash</div><div class="ttdoc">Hash Table: &quot;message-id&quot; -&gt; MuttThread.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00045">mutt_thread.h:45</a></div></div>
</div><!-- fragment --><div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a83a0025fb6c71b19d45e8ba006346303_cgraph.svg" width="332" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a83a0025fb6c71b19d45e8ba006346303_icgraph.svg" width="306" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a726f16b8fb688c688a6d0147052103d8" name="a726f16b8fb688c688a6d0147052103d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726f16b8fb688c688a6d0147052103d8">&#9670;&#160;</a></span>mutt_draw_tree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_draw_tree </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *</td>          <td class="paramname"><span class="paramname"><em>tctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Draw a tree of threaded emails. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tctx</td><td>Threading context</td></tr>
  </table>
  </dd>
</dl>
<p>Since the graphics characters have a value &gt;255, I have to resort to using escape sequences to pass the information to <a class="el" href="draw_8c.html#aba12b05761d6bd8857ac9d8ab112e29d" title="Display a string with embedded colours and graphics.">print_enriched_string()</a>. These are the macros MUTT_TREE_* defined in <a class="el" href="mutt_8h.html" title="Many unsorted constants and some structs.">mutt.h</a>.</p>
<p>ncurses should automatically use the default ASCII characters instead of graphics chars on terminals which don't support them (see the man page for curs_addch). </p>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00391">391</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  392</span>{</div>
<div class="line"><span class="lineno">  393</span>  <span class="keywordtype">char</span> *pfx = NULL, *mypfx = NULL, *arrow = NULL, *myarrow = NULL, *new_tree = NULL;</div>
<div class="line"><span class="lineno">  394</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> reverse = (<a class="code hl_function" href="#aa7ffe096f2973f3d0cd486f8e8b4228b">mutt_thread_style</a>() == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef">UT_REVERSE</a>);</div>
<div class="line"><span class="lineno">  395</span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85">TreeChar</a> corner = reverse ? <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a4f2e0474a76e710c2e3adb6239b67556">MUTT_TREE_ULCORNER</a> : <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a1b03b7b1804421f2de731379fb413986">MUTT_TREE_LLCORNER</a>;</div>
<div class="line"><span class="lineno">  396</span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85">TreeChar</a> vtee = reverse ? <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85afa573f9ff8aa5207bc36d10c76d1304a">MUTT_TREE_BTEE</a> : <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85ac8dad568b19763dae68eb32f9e8a1f50">MUTT_TREE_TTEE</a>;</div>
<div class="line"><span class="lineno">  397</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_narrow_tree = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;narrow_tree&quot;</span>);</div>
<div class="line"><span class="lineno">  398</span>  <span class="keywordtype">int</span> depth = 0, start_depth = 0, max_depth = 0, width = c_narrow_tree ? 1 : 2;</div>
<div class="line"><span class="lineno">  399</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *nextdisp = NULL, *pseudo = NULL, *<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a> = NULL;</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *tree = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a>;</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>  <span class="comment">/* Do the visibility calculations and free the old thread chars.</span></div>
<div class="line"><span class="lineno">  404</span><span class="comment">   * From now on we can simply ignore invisible subtrees */</span></div>
<div class="line"><span class="lineno">  405</span>  <a class="code hl_function" href="#a065e55c8886d9e2850e6f9cfdaf7bdb7">calculate_visibility</a>(tree, &amp;max_depth);</div>
<div class="line"><span class="lineno">  406</span>  pfx = <a class="code hl_define" href="memory_8h.html#af997cb3719dc7abbeabae655d0ee1b9e">MUTT_MEM_MALLOC</a>((width * max_depth) + 2, <span class="keywordtype">char</span>);</div>
<div class="line"><span class="lineno">  407</span>  arrow = <a class="code hl_define" href="memory_8h.html#af997cb3719dc7abbeabae655d0ee1b9e">MUTT_MEM_MALLOC</a>((width * max_depth) + 2, <span class="keywordtype">char</span>);</div>
<div class="line"><span class="lineno">  408</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_hide_limited = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;hide_limited&quot;</span>);</div>
<div class="line"><span class="lineno">  409</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_hide_missing = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;hide_missing&quot;</span>);</div>
<div class="line"><span class="lineno">  410</span>  <span class="keywordflow">while</span> (tree)</div>
<div class="line"><span class="lineno">  411</span>  {</div>
<div class="line"><span class="lineno">  412</span>    <span class="keywordflow">if</span> (depth != 0)</div>
<div class="line"><span class="lineno">  413</span>    {</div>
<div class="line"><span class="lineno">  414</span>      myarrow = arrow + (depth - start_depth - ((start_depth != 0) ? 0 : 1)) * width;</div>
<div class="line"><span class="lineno">  415</span>      <span class="keywordflow">if</span> (start_depth == depth)</div>
<div class="line"><span class="lineno">  416</span>        myarrow[0] = nextdisp ? <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85aa5184128354a32c86d895002d62106df">MUTT_TREE_LTEE</a> : corner;</div>
<div class="line"><span class="lineno">  417</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a> &amp;&amp; !c_hide_limited)</div>
<div class="line"><span class="lineno">  418</span>        myarrow[0] = <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a70bd015e812209fff2e21d66e7f2b4a5">MUTT_TREE_HIDDEN</a>;</div>
<div class="line"><span class="lineno">  419</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a> &amp;&amp; !c_hide_missing)</div>
<div class="line"><span class="lineno">  420</span>        myarrow[0] = <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85ac8ccd947afb68604d3d7c7a5cc79b462">MUTT_TREE_MISSING</a>;</div>
<div class="line"><span class="lineno">  421</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  422</span>        myarrow[0] = vtee;</div>
<div class="line"><span class="lineno">  423</span>      <span class="keywordflow">if</span> (width == 2)</div>
<div class="line"><span class="lineno">  424</span>      {</div>
<div class="line"><span class="lineno">  425</span>        myarrow[1] = pseudo ? <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a8a2f85de28c8539fe96d2ad579870b17">MUTT_TREE_STAR</a> :</div>
<div class="line"><span class="lineno">  426</span>                              (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#add9fafa2e72810244df9eee34eff25fa">duplicate_thread</a> ? <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a572135bcae07c0f1a5b4437c60494488">MUTT_TREE_EQUALS</a> : <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85ad1719f84a65b3a0bcc58be9947318b23">MUTT_TREE_HLINE</a>);</div>
<div class="line"><span class="lineno">  427</span>      }</div>
<div class="line"><span class="lineno">  428</span>      <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a30c80a1167887f0dc4ab7bff443b8df3">visible</a>)</div>
<div class="line"><span class="lineno">  429</span>      {</div>
<div class="line"><span class="lineno">  430</span>        myarrow[width] = <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a2476c9394d6e05e4f1d72a29a602324d">MUTT_TREE_RARROW</a>;</div>
<div class="line"><span class="lineno">  431</span>        myarrow[width + 1] = 0;</div>
<div class="line"><span class="lineno">  432</span>        new_tree = <a class="code hl_define" href="memory_8h.html#af997cb3719dc7abbeabae655d0ee1b9e">MUTT_MEM_MALLOC</a>(((<span class="keywordtype">size_t</span>) depth * width) + 2, <span class="keywordtype">char</span>);</div>
<div class="line"><span class="lineno">  433</span>        <span class="keywordflow">if</span> (start_depth &gt; 1)</div>
<div class="line"><span class="lineno">  434</span>        {</div>
<div class="line"><span class="lineno">  435</span>          strncpy(new_tree, pfx, (<span class="keywordtype">size_t</span>) width * (start_depth - 1));</div>
<div class="line"><span class="lineno">  436</span>          <a class="code hl_function" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(new_tree + (start_depth - 1) * width, arrow,</div>
<div class="line"><span class="lineno">  437</span>                        (1 + depth - start_depth) * width + 2);</div>
<div class="line"><span class="lineno">  438</span>        }</div>
<div class="line"><span class="lineno">  439</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  440</span>        {</div>
<div class="line"><span class="lineno">  441</span>          <a class="code hl_function" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(new_tree, arrow, ((<span class="keywordtype">size_t</span>) depth * width) + 2);</div>
<div class="line"><span class="lineno">  442</span>        }</div>
<div class="line"><span class="lineno">  443</span>        tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a6ab0c038ad82a3771c419731c93398ce">tree</a> = new_tree;</div>
<div class="line"><span class="lineno">  444</span>      }</div>
<div class="line"><span class="lineno">  445</span>    }</div>
<div class="line"><span class="lineno">  446</span>    <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a> &amp;&amp; (depth != 0))</div>
<div class="line"><span class="lineno">  447</span>    {</div>
<div class="line"><span class="lineno">  448</span>      mypfx = pfx + (depth - 1) * width;</div>
<div class="line"><span class="lineno">  449</span>      mypfx[0] = nextdisp ? <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85abc7688b347eafb15a9bf642a447c6b5e">MUTT_TREE_VLINE</a> : <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85ada2ee368638a797dbf04a79f81285912">MUTT_TREE_SPACE</a>;</div>
<div class="line"><span class="lineno">  450</span>      <span class="keywordflow">if</span> (width == 2)</div>
<div class="line"><span class="lineno">  451</span>        mypfx[1] = <a class="code hl_enumvalue" href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85ada2ee368638a797dbf04a79f81285912">MUTT_TREE_SPACE</a>;</div>
<div class="line"><span class="lineno">  452</span>    }</div>
<div class="line"><span class="lineno">  453</span>    <a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a> = tree;</div>
<div class="line"><span class="lineno">  454</span>    nextdisp = NULL;</div>
<div class="line"><span class="lineno">  455</span>    pseudo = NULL;</div>
<div class="line"><span class="lineno">  456</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  457</span>    {</div>
<div class="line"><span class="lineno">  458</span>      <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a> &amp;&amp; tree-&gt;<a class="code hl_variable" href="structMuttThread.html#abfc3f860f57e8c763cbcdc586b8b1448">subtree_visible</a>)</div>
<div class="line"><span class="lineno">  459</span>      {</div>
<div class="line"><span class="lineno">  460</span>        <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a8c1fd0aa931c50f735bec5e5660856b8">deep</a>)</div>
<div class="line"><span class="lineno">  461</span>          depth++;</div>
<div class="line"><span class="lineno">  462</span>        <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a30c80a1167887f0dc4ab7bff443b8df3">visible</a>)</div>
<div class="line"><span class="lineno">  463</span>          start_depth = depth;</div>
<div class="line"><span class="lineno">  464</span>        tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>        <span class="comment">/* we do this here because we need to make sure that the first child thread</span></div>
<div class="line"><span class="lineno">  467</span><span class="comment">         * of the old tree that we deal with is actually displayed if any are,</span></div>
<div class="line"><span class="lineno">  468</span><span class="comment">         * or we might set the parent variable wrong while going through it. */</span></div>
<div class="line"><span class="lineno">  469</span>        <span class="keywordflow">while</span> (!tree-&gt;<a class="code hl_variable" href="structMuttThread.html#abfc3f860f57e8c763cbcdc586b8b1448">subtree_visible</a> &amp;&amp; tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno">  470</span>          tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno">  471</span>      }</div>
<div class="line"><span class="lineno">  472</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  473</span>      {</div>
<div class="line"><span class="lineno">  474</span>        <span class="keywordflow">while</span> (!tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a> &amp;&amp; tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno">  475</span>        {</div>
<div class="line"><span class="lineno">  476</span>          <span class="keywordflow">if</span> (tree == pseudo)</div>
<div class="line"><span class="lineno">  477</span>            pseudo = NULL;</div>
<div class="line"><span class="lineno">  478</span>          <span class="keywordflow">if</span> (tree == nextdisp)</div>
<div class="line"><span class="lineno">  479</span>            nextdisp = NULL;</div>
<div class="line"><span class="lineno">  480</span>          <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a30c80a1167887f0dc4ab7bff443b8df3">visible</a>)</div>
<div class="line"><span class="lineno">  481</span>            start_depth = depth;</div>
<div class="line"><span class="lineno">  482</span>          tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno">  483</span>          <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a8c1fd0aa931c50f735bec5e5660856b8">deep</a>)</div>
<div class="line"><span class="lineno">  484</span>          {</div>
<div class="line"><span class="lineno">  485</span>            <span class="keywordflow">if</span> (start_depth == depth)</div>
<div class="line"><span class="lineno">  486</span>              start_depth--;</div>
<div class="line"><span class="lineno">  487</span>            depth--;</div>
<div class="line"><span class="lineno">  488</span>          }</div>
<div class="line"><span class="lineno">  489</span>        }</div>
<div class="line"><span class="lineno">  490</span>        <span class="keywordflow">if</span> (tree == pseudo)</div>
<div class="line"><span class="lineno">  491</span>          pseudo = NULL;</div>
<div class="line"><span class="lineno">  492</span>        <span class="keywordflow">if</span> (tree == nextdisp)</div>
<div class="line"><span class="lineno">  493</span>          nextdisp = NULL;</div>
<div class="line"><span class="lineno">  494</span>        <span class="keywordflow">if</span> (tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a30c80a1167887f0dc4ab7bff443b8df3">visible</a>)</div>
<div class="line"><span class="lineno">  495</span>          start_depth = depth;</div>
<div class="line"><span class="lineno">  496</span>        tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno">  497</span>        <span class="keywordflow">if</span> (!tree)</div>
<div class="line"><span class="lineno">  498</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  499</span>      }</div>
<div class="line"><span class="lineno">  500</span>      <span class="keywordflow">if</span> (!pseudo &amp;&amp; tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a68156e7ac570e245272ba291dfd840fd">fake_thread</a>)</div>
<div class="line"><span class="lineno">  501</span>        pseudo = tree;</div>
<div class="line"><span class="lineno">  502</span>      <span class="keywordflow">if</span> (!nextdisp &amp;&amp; tree-&gt;<a class="code hl_variable" href="structMuttThread.html#ae8aeb3656c0937883a1a0c955b12712c">next_subtree_visible</a>)</div>
<div class="line"><span class="lineno">  503</span>        nextdisp = tree;</div>
<div class="line"><span class="lineno">  504</span>    } <span class="keywordflow">while</span> (!tree-&gt;<a class="code hl_variable" href="structMuttThread.html#a8c1fd0aa931c50f735bec5e5660856b8">deep</a>);</div>
<div class="line"><span class="lineno">  505</span>  }</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;pfx);</div>
<div class="line"><span class="lineno">  508</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;arrow);</div>
<div class="line"><span class="lineno">  509</span>}</div>
<div class="ttc" id="amemory_8h_html_af997cb3719dc7abbeabae655d0ee1b9e"><div class="ttname"><a href="memory_8h.html#af997cb3719dc7abbeabae655d0ee1b9e">MUTT_MEM_MALLOC</a></div><div class="ttdeci">#define MUTT_MEM_MALLOC(n, type)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00049">memory.h:49</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_ad20e00309de897a1e882fc7400335b83"><div class="ttname"><a href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a></div><div class="ttdeci">size_t mutt_str_copy(char *dest, const char *src, size_t dsize)</div><div class="ttdoc">Copy a string into a buffer (guaranteeing NUL-termination)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00583">string.c:583</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_a065e55c8886d9e2850e6f9cfdaf7bdb7"><div class="ttname"><a href="#a065e55c8886d9e2850e6f9cfdaf7bdb7">calculate_visibility</a></div><div class="ttdeci">static void calculate_visibility(struct MuttThread *tree, int *max_depth)</div><div class="ttdoc">Are tree nodes visible.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00233">mutt_thread.c:233</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85">TreeChar</a></div><div class="ttdeci">TreeChar</div><div class="ttdoc">Tree characters for menus.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00055">mutt_thread.h:56</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85a1b03b7b1804421f2de731379fb413986"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a1b03b7b1804421f2de731379fb413986">MUTT_TREE_LLCORNER</a></div><div class="ttdeci">@ MUTT_TREE_LLCORNER</div><div class="ttdoc">Lower left corner.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00057">mutt_thread.h:57</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85a2476c9394d6e05e4f1d72a29a602324d"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a2476c9394d6e05e4f1d72a29a602324d">MUTT_TREE_RARROW</a></div><div class="ttdeci">@ MUTT_TREE_RARROW</div><div class="ttdoc">Right arrow.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00063">mutt_thread.h:63</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85a4f2e0474a76e710c2e3adb6239b67556"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a4f2e0474a76e710c2e3adb6239b67556">MUTT_TREE_ULCORNER</a></div><div class="ttdeci">@ MUTT_TREE_ULCORNER</div><div class="ttdoc">Upper left corner.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00058">mutt_thread.h:58</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85a572135bcae07c0f1a5b4437c60494488"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a572135bcae07c0f1a5b4437c60494488">MUTT_TREE_EQUALS</a></div><div class="ttdeci">@ MUTT_TREE_EQUALS</div><div class="ttdoc">Equals (for threads)</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00066">mutt_thread.h:66</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85a70bd015e812209fff2e21d66e7f2b4a5"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a70bd015e812209fff2e21d66e7f2b4a5">MUTT_TREE_HIDDEN</a></div><div class="ttdeci">@ MUTT_TREE_HIDDEN</div><div class="ttdoc">Ampersand character (for threads)</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00065">mutt_thread.h:65</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85a8a2f85de28c8539fe96d2ad579870b17"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85a8a2f85de28c8539fe96d2ad579870b17">MUTT_TREE_STAR</a></div><div class="ttdeci">@ MUTT_TREE_STAR</div><div class="ttdoc">Star character (for threads)</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00064">mutt_thread.h:64</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85aa5184128354a32c86d895002d62106df"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85aa5184128354a32c86d895002d62106df">MUTT_TREE_LTEE</a></div><div class="ttdeci">@ MUTT_TREE_LTEE</div><div class="ttdoc">Left T-piece.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00059">mutt_thread.h:59</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85abc7688b347eafb15a9bf642a447c6b5e"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85abc7688b347eafb15a9bf642a447c6b5e">MUTT_TREE_VLINE</a></div><div class="ttdeci">@ MUTT_TREE_VLINE</div><div class="ttdoc">Vertical line.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00061">mutt_thread.h:61</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85ac8ccd947afb68604d3d7c7a5cc79b462"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85ac8ccd947afb68604d3d7c7a5cc79b462">MUTT_TREE_MISSING</a></div><div class="ttdeci">@ MUTT_TREE_MISSING</div><div class="ttdoc">Question mark.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00069">mutt_thread.h:69</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85ac8dad568b19763dae68eb32f9e8a1f50"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85ac8dad568b19763dae68eb32f9e8a1f50">MUTT_TREE_TTEE</a></div><div class="ttdeci">@ MUTT_TREE_TTEE</div><div class="ttdoc">Top T-piece.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00067">mutt_thread.h:67</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85ad1719f84a65b3a0bcc58be9947318b23"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85ad1719f84a65b3a0bcc58be9947318b23">MUTT_TREE_HLINE</a></div><div class="ttdeci">@ MUTT_TREE_HLINE</div><div class="ttdoc">Horizontal line.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00060">mutt_thread.h:60</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85ada2ee368638a797dbf04a79f81285912"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85ada2ee368638a797dbf04a79f81285912">MUTT_TREE_SPACE</a></div><div class="ttdeci">@ MUTT_TREE_SPACE</div><div class="ttdoc">Blank space.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00062">mutt_thread.h:62</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_af79cb849efb74c3d732652b647bacb85afa573f9ff8aa5207bc36d10c76d1304a"><div class="ttname"><a href="mutt__thread_8h.html#af79cb849efb74c3d732652b647bacb85afa573f9ff8aa5207bc36d10c76d1304a">MUTT_TREE_BTEE</a></div><div class="ttdeci">@ MUTT_TREE_BTEE</div><div class="ttdoc">Bottom T-piece.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00068">mutt_thread.h:68</a></div></div>
<div class="ttc" id="astructMuttThread_html_a68156e7ac570e245272ba291dfd840fd"><div class="ttname"><a href="structMuttThread.html#a68156e7ac570e245272ba291dfd840fd">MuttThread::fake_thread</a></div><div class="ttdeci">bool fake_thread</div><div class="ttdoc">Emails grouped by Subject.</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00038">thread.h:38</a></div></div>
<div class="ttc" id="astructMuttThread_html_add9fafa2e72810244df9eee34eff25fa"><div class="ttname"><a href="structMuttThread.html#add9fafa2e72810244df9eee34eff25fa">MuttThread::duplicate_thread</a></div><div class="ttdeci">bool duplicate_thread</div><div class="ttdoc">Duplicated Email in Thread.</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00037">thread.h:37</a></div></div>
</div><!-- fragment --><div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a726f16b8fb688c688a6d0147052103d8_cgraph.svg" width="474" height="198"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a726f16b8fb688c688a6d0147052103d8_icgraph.svg" width="314" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7f28bcf6516e018638aa30d7d7d33e2b" name="a7f28bcf6516e018638aa30d7d7d33e2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f28bcf6516e018638aa30d7d7d33e2b">&#9670;&#160;</a></span>make_subject_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void make_subject_list </td>
          <td>(</td>
          <td class="paramtype">struct ListHead *</td>          <td class="paramname"><span class="paramname"><em>subjects</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMuttThread.html">MuttThread</a> *</td>          <td class="paramname"><span class="paramname"><em>cur</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *</td>          <td class="paramname"><span class="paramname"><em>dateptr</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a sorted list of all subjects in a thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">subjects</td><td>String List of subjects </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cur</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> Thread </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dateptr</td><td>Earliest date found in thread</td></tr>
  </table>
  </dd>
</dl>
<p>Since we may be trying to attach as a pseudo-thread a <a class="el" href="structMuttThread.html" title="An Email conversation.">MuttThread</a> that has no message, we have to make a list of all the subjects of its most immediate existing descendants. </p>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00521">521</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  522</span>{</div>
<div class="line"><span class="lineno">  523</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *start = cur;</div>
<div class="line"><span class="lineno">  524</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEnvelope.html">Envelope</a> *env = NULL;</div>
<div class="line"><span class="lineno">  525</span>  time_t thisdate;</div>
<div class="line"><span class="lineno">  526</span>  <span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><span class="lineno">  527</span> </div>
<div class="line"><span class="lineno">  528</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_thread_received = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;thread_received&quot;</span>);</div>
<div class="line"><span class="lineno">  529</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_sort_re = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort_re&quot;</span>);</div>
<div class="line"><span class="lineno">  530</span>  <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  531</span>  {</div>
<div class="line"><span class="lineno">  532</span>    <span class="keywordflow">while</span> (!cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>)</div>
<div class="line"><span class="lineno">  533</span>      cur = cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>    <span class="keywordflow">if</span> (dateptr)</div>
<div class="line"><span class="lineno">  536</span>    {</div>
<div class="line"><span class="lineno">  537</span>      thisdate = c_thread_received ? cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#af64bcf33ccd8b0ba248fc8d427c21264">received</a> : cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a9e3cda5dab6d53f68cad95d28068d962">date_sent</a>;</div>
<div class="line"><span class="lineno">  538</span>      <span class="keywordflow">if</span> ((*dateptr == 0) || (thisdate &lt; *dateptr))</div>
<div class="line"><span class="lineno">  539</span>        *dateptr = thisdate;</div>
<div class="line"><span class="lineno">  540</span>    }</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>    env = cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>;</div>
<div class="line"><span class="lineno">  543</span>    <span class="keywordflow">if</span> (env-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a> &amp;&amp; ((env-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a> != env-&gt;<a class="code hl_variable" href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">subject</a>) || !c_sort_re))</div>
<div class="line"><span class="lineno">  544</span>    {</div>
<div class="line"><span class="lineno">  545</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structListNode.html">ListNode</a> *np = NULL;</div>
<div class="line"><span class="lineno">  546</span>      <a class="code hl_define" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(np, subjects, entries)</div>
<div class="line"><span class="lineno">  547</span>      {</div>
<div class="line"><span class="lineno">  548</span>        rc = <a class="code hl_function" href="mutt_2string_8c.html#a12aff586807f47d08506c55b294784da">mutt_str_cmp</a>(env-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>, np-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>);</div>
<div class="line"><span class="lineno">  549</span>        <span class="keywordflow">if</span> (rc &gt;= 0)</div>
<div class="line"><span class="lineno">  550</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  551</span>      }</div>
<div class="line"><span class="lineno">  552</span>      <span class="keywordflow">if</span> (!np)</div>
<div class="line"><span class="lineno">  553</span>        <a class="code hl_function" href="list_8c.html#a5a575610af3a8c6f267924b46c95b059">mutt_list_insert_head</a>(subjects, env-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>);</div>
<div class="line"><span class="lineno">  554</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc &gt; 0)</div>
<div class="line"><span class="lineno">  555</span>        <a class="code hl_function" href="list_8c.html#afdfa2cea34b1847b1df8e505bda7cea9">mutt_list_insert_after</a>(subjects, np, env-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>);</div>
<div class="line"><span class="lineno">  556</span>    }</div>
<div class="line"><span class="lineno">  557</span> </div>
<div class="line"><span class="lineno">  558</span>    <span class="keywordflow">while</span> (!cur-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a> &amp;&amp; (cur != start))</div>
<div class="line"><span class="lineno">  559</span>    {</div>
<div class="line"><span class="lineno">  560</span>      cur = cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno">  561</span>    }</div>
<div class="line"><span class="lineno">  562</span>    <span class="keywordflow">if</span> (cur == start)</div>
<div class="line"><span class="lineno">  563</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  564</span>    cur = cur-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno">  565</span>  }</div>
<div class="line"><span class="lineno">  566</span>}</div>
<div class="ttc" id="alist_8c_html_a5a575610af3a8c6f267924b46c95b059"><div class="ttname"><a href="list_8c.html#a5a575610af3a8c6f267924b46c95b059">mutt_list_insert_head</a></div><div class="ttdeci">struct ListNode * mutt_list_insert_head(struct ListHead *h, char *s)</div><div class="ttdoc">Insert a string at the beginning of a List.</div><div class="ttdef"><b>Definition</b> <a href="list_8c_source.html#l00046">list.c:46</a></div></div>
<div class="ttc" id="alist_8c_html_afdfa2cea34b1847b1df8e505bda7cea9"><div class="ttname"><a href="list_8c.html#afdfa2cea34b1847b1df8e505bda7cea9">mutt_list_insert_after</a></div><div class="ttdeci">struct ListNode * mutt_list_insert_after(struct ListHead *h, struct ListNode *n, char *s)</div><div class="ttdoc">Insert a string after a given ListNode.</div><div class="ttdef"><b>Definition</b> <a href="list_8c_source.html#l00085">list.c:85</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a12aff586807f47d08506c55b294784da"><div class="ttname"><a href="mutt_2string_8c.html#a12aff586807f47d08506c55b294784da">mutt_str_cmp</a></div><div class="ttdeci">int mutt_str_cmp(const char *a, const char *b)</div><div class="ttdoc">Compare two strings, safely.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00403">string.c:403</a></div></div>
<div class="ttc" id="aqueue_8h_html_a77999ebdf5aaf7af8b8ea22bf208c432"><div class="ttname"><a href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a></div><div class="ttdeci">#define STAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00390">queue.h:390</a></div></div>
<div class="ttc" id="astructEmail_html_a34cc4493729d7a3b1f4ed783e739a9ec"><div class="ttname"><a href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">Email::env</a></div><div class="ttdeci">struct Envelope * env</div><div class="ttdoc">Envelope information.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00068">email.h:68</a></div></div>
<div class="ttc" id="astructEmail_html_a9e3cda5dab6d53f68cad95d28068d962"><div class="ttname"><a href="structEmail.html#a9e3cda5dab6d53f68cad95d28068d962">Email::date_sent</a></div><div class="ttdeci">time_t date_sent</div><div class="ttdoc">Time when the message was sent (UTC)</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00060">email.h:60</a></div></div>
<div class="ttc" id="astructEmail_html_af64bcf33ccd8b0ba248fc8d427c21264"><div class="ttname"><a href="structEmail.html#af64bcf33ccd8b0ba248fc8d427c21264">Email::received</a></div><div class="ttdeci">time_t received</div><div class="ttdoc">Time when the message was placed in the mailbox.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00061">email.h:61</a></div></div>
<div class="ttc" id="astructEnvelope_html"><div class="ttname"><a href="structEnvelope.html">Envelope</a></div><div class="ttdoc">The header of an Email.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00056">envelope.h:57</a></div></div>
<div class="ttc" id="astructEnvelope_html_a20d5ccf675db375e011a7791151fa09d"><div class="ttname"><a href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">Envelope::subject</a></div><div class="ttdeci">char *const subject</div><div class="ttdoc">Email&#39;s subject.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00070">envelope.h:70</a></div></div>
<div class="ttc" id="astructEnvelope_html_ad7dc5e8dd9356bb5266787bf647a4031"><div class="ttname"><a href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">Envelope::real_subj</a></div><div class="ttdeci">char *const real_subj</div><div class="ttdoc">Offset of the real subject.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00071">envelope.h:71</a></div></div>
<div class="ttc" id="astructListNode_html"><div class="ttname"><a href="structListNode.html">ListNode</a></div><div class="ttdoc">A List node for strings.</div><div class="ttdef"><b>Definition</b> <a href="list_8h_source.html#l00036">list.h:37</a></div></div>
<div class="ttc" id="astructListNode_html_aafe688d670318196766392d8235d00a7"><div class="ttname"><a href="structListNode.html#aafe688d670318196766392d8235d00a7">ListNode::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">String.</div><div class="ttdef"><b>Definition</b> <a href="list_8h_source.html#l00038">list.h:38</a></div></div>
</div><!-- fragment --><div id="dynsection-17" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a7f28bcf6516e018638aa30d7d7d33e2b_cgraph.svg" width="340" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-18" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a7f28bcf6516e018638aa30d7d7d33e2b_icgraph.svg" width="283" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ade53690995c9c0c41164aea914536fc7" name="ade53690995c9c0c41164aea914536fc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade53690995c9c0c41164aea914536fc7">&#9670;&#160;</a></span>find_subject()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structMuttThread.html">MuttThread</a> * find_subject </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMuttThread.html">MuttThread</a> *</td>          <td class="paramname"><span class="paramname"><em>cur</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the best possible match for a parent based on subject. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">cur</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> to match </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Best match for a parent</td></tr>
  </table>
  </dd>
</dl>
<p>If there are multiple matches, the one which was sent the latest, but before the current message, is used. </p>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00577">577</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  578</span>{</div>
<div class="line"><span class="lineno">  579</span>  <span class="keywordflow">if</span> (!m)</div>
<div class="line"><span class="lineno">  580</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  581</span> </div>
<div class="line"><span class="lineno">  582</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structHashElem.html">HashElem</a> *he = NULL;</div>
<div class="line"><span class="lineno">  583</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *tmp = NULL, *last = NULL;</div>
<div class="line"><span class="lineno">  584</span>  <span class="keyword">struct </span>ListHead subjects = <a class="code hl_define" href="queue_8h.html#a3d41ce2c3f1dd21c0d4051d13204c321">STAILQ_HEAD_INITIALIZER</a>(subjects);</div>
<div class="line"><span class="lineno">  585</span>  time_t date = 0;</div>
<div class="line"><span class="lineno">  586</span> </div>
<div class="line"><span class="lineno">  587</span>  <a class="code hl_function" href="#a7f28bcf6516e018638aa30d7d7d33e2b">make_subject_list</a>(&amp;subjects, cur, &amp;date);</div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structListNode.html">ListNode</a> *np = NULL;</div>
<div class="line"><span class="lineno">  590</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_thread_received = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;thread_received&quot;</span>);</div>
<div class="line"><span class="lineno">  591</span>  <a class="code hl_define" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(np, &amp;subjects, entries)</div>
<div class="line"><span class="lineno">  592</span>  {</div>
<div class="line"><span class="lineno">  593</span>    <span class="keywordflow">for</span> (he = <a class="code hl_function" href="hash_8c.html#a45a0f9c9f31792cbbce7c4cc44c545aa">mutt_hash_find_bucket</a>(m-&gt;<a class="code hl_variable" href="structMailbox.html#a6fedaadfa93f600be8db87684ca631d7">subj_hash</a>, np-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>); he; he = he-&gt;<a class="code hl_variable" href="structHashElem.html#a5976a8ccc05e36cb49202d9557b81d24">next</a>)</div>
<div class="line"><span class="lineno">  594</span>    {</div>
<div class="line"><span class="lineno">  595</span>      tmp = ((<span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *) he-&gt;<a class="code hl_variable" href="structHashElem.html#ac7e80f63ba2f82457ff68aa0cd360365">data</a>)-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>;</div>
<div class="line"><span class="lineno">  596</span>      <span class="keywordflow">if</span> ((tmp != cur) &amp;&amp;                  <span class="comment">/* don&#39;t match the same message */</span></div>
<div class="line"><span class="lineno">  597</span>          !tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a68156e7ac570e245272ba291dfd840fd">fake_thread</a> &amp;&amp;             <span class="comment">/* don&#39;t match pseudo threads */</span></div>
<div class="line"><span class="lineno">  598</span>          tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a6067344fac1be8e00a770303a13974a2">subject_changed</a> &amp;&amp; <span class="comment">/* only match interesting replies */</span></div>
<div class="line"><span class="lineno">  599</span>          !<a class="code hl_function" href="thread_8c.html#a270ef45b668941a460185742a798a9d4">is_descendant</a>(tmp, cur) &amp;&amp;      <span class="comment">/* don&#39;t match in the same thread */</span></div>
<div class="line"><span class="lineno">  600</span>          (date &gt;= (c_thread_received ? tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#af64bcf33ccd8b0ba248fc8d427c21264">received</a> : tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a9e3cda5dab6d53f68cad95d28068d962">date_sent</a>)) &amp;&amp;</div>
<div class="line"><span class="lineno">  601</span>          (!last || (c_thread_received ?</div>
<div class="line"><span class="lineno">  602</span>                         (last-&gt;message-&gt;received &lt; tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#af64bcf33ccd8b0ba248fc8d427c21264">received</a>) :</div>
<div class="line"><span class="lineno">  603</span>                         (last-&gt;message-&gt;date_sent &lt; tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a9e3cda5dab6d53f68cad95d28068d962">date_sent</a>))) &amp;&amp;</div>
<div class="line"><span class="lineno">  604</span>          tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  605</span>          <a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(np-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>))</div>
<div class="line"><span class="lineno">  606</span>      {</div>
<div class="line"><span class="lineno">  607</span>        last = tmp; <span class="comment">/* best match so far */</span></div>
<div class="line"><span class="lineno">  608</span>      }</div>
<div class="line"><span class="lineno">  609</span>    }</div>
<div class="line"><span class="lineno">  610</span>  }</div>
<div class="line"><span class="lineno">  611</span> </div>
<div class="line"><span class="lineno">  612</span>  <a class="code hl_function" href="list_8c.html#a6cd8f2f5c5e48a6eac0c24ae664898ee">mutt_list_clear</a>(&amp;subjects);</div>
<div class="line"><span class="lineno">  613</span>  <span class="keywordflow">return</span> last;</div>
<div class="line"><span class="lineno">  614</span>}</div>
<div class="ttc" id="ahash_8c_html_a45a0f9c9f31792cbbce7c4cc44c545aa"><div class="ttname"><a href="hash_8c.html#a45a0f9c9f31792cbbce7c4cc44c545aa">mutt_hash_find_bucket</a></div><div class="ttdeci">struct HashElem * mutt_hash_find_bucket(const struct HashTable *table, const char *strkey)</div><div class="ttdoc">Find the HashElem in a Hash Table element using a key.</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00410">hash.c:410</a></div></div>
<div class="ttc" id="alist_8c_html_a6cd8f2f5c5e48a6eac0c24ae664898ee"><div class="ttname"><a href="list_8c.html#a6cd8f2f5c5e48a6eac0c24ae664898ee">mutt_list_clear</a></div><div class="ttdeci">void mutt_list_clear(struct ListHead *h)</div><div class="ttdoc">Free a list, but NOT its strings.</div><div class="ttdef"><b>Definition</b> <a href="list_8c_source.html#l00166">list.c:166</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a6b6a50296dd2a31863a43379ef4a343d"><div class="ttname"><a href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a></div><div class="ttdeci">bool mutt_str_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00662">string.c:662</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_a7f28bcf6516e018638aa30d7d7d33e2b"><div class="ttname"><a href="#a7f28bcf6516e018638aa30d7d7d33e2b">make_subject_list</a></div><div class="ttdeci">static void make_subject_list(struct ListHead *subjects, struct MuttThread *cur, time_t *dateptr)</div><div class="ttdoc">Create a sorted list of all subjects in a thread.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00521">mutt_thread.c:521</a></div></div>
<div class="ttc" id="aqueue_8h_html_a3d41ce2c3f1dd21c0d4051d13204c321"><div class="ttname"><a href="queue_8h.html#a3d41ce2c3f1dd21c0d4051d13204c321">STAILQ_HEAD_INITIALIZER</a></div><div class="ttdeci">#define STAILQ_HEAD_INITIALIZER(head)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00324">queue.h:324</a></div></div>
<div class="ttc" id="astructHashElem_html"><div class="ttname"><a href="structHashElem.html">HashElem</a></div><div class="ttdoc">The item stored in a Hash Table.</div><div class="ttdef"><b>Definition</b> <a href="hash_8h_source.html#l00043">hash.h:44</a></div></div>
<div class="ttc" id="astructHashElem_html_a5976a8ccc05e36cb49202d9557b81d24"><div class="ttname"><a href="structHashElem.html#a5976a8ccc05e36cb49202d9557b81d24">HashElem::next</a></div><div class="ttdeci">struct HashElem * next</div><div class="ttdoc">Linked List.</div><div class="ttdef"><b>Definition</b> <a href="hash_8h_source.html#l00048">hash.h:48</a></div></div>
<div class="ttc" id="astructHashElem_html_ac7e80f63ba2f82457ff68aa0cd360365"><div class="ttname"><a href="structHashElem.html#ac7e80f63ba2f82457ff68aa0cd360365">HashElem::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">User-supplied data.</div><div class="ttdef"><b>Definition</b> <a href="hash_8h_source.html#l00047">hash.h:47</a></div></div>
<div class="ttc" id="astructMailbox_html_a6fedaadfa93f600be8db87684ca631d7"><div class="ttname"><a href="structMailbox.html#a6fedaadfa93f600be8db87684ca631d7">Mailbox::subj_hash</a></div><div class="ttdeci">struct HashTable * subj_hash</div><div class="ttdoc">Hash Table: &quot;subject&quot; -&gt; Email.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00124">mailbox.h:124</a></div></div>
<div class="ttc" id="athread_8c_html_a270ef45b668941a460185742a798a9d4"><div class="ttname"><a href="thread_8c.html#a270ef45b668941a460185742a798a9d4">is_descendant</a></div><div class="ttdeci">bool is_descendant(const struct MuttThread *a, const struct MuttThread *b)</div><div class="ttdoc">Is one thread a descendant of another.</div><div class="ttdef"><b>Definition</b> <a href="thread_8c_source.html#l00046">thread.c:46</a></div></div>
</div><!-- fragment --><div id="dynsection-19" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_ade53690995c9c0c41164aea914536fc7_cgraph.svg" width="480" height="283"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-20" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_ade53690995c9c0c41164aea914536fc7_icgraph.svg" width="275" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="abb24af0cb606aad19e947822ec7855bd" name="abb24af0cb606aad19e947822ec7855bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb24af0cb606aad19e947822ec7855bd">&#9670;&#160;</a></span>make_subj_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structHashTable.html">HashTable</a> * make_subj_hash </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a Hash Table for the email subjects. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Newly allocated Hash Table </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00621">621</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  622</span>{</div>
<div class="line"><span class="lineno">  623</span>  <span class="keywordflow">if</span> (!m)</div>
<div class="line"><span class="lineno">  624</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structHashTable.html">HashTable</a> *hash = <a class="code hl_function" href="hash_8c.html#a75439958fb5faf57c039faec79d19998">mutt_hash_new</a>(m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> * 2, <a class="code hl_define" href="hash_8h.html#ab4f58917275b57d3ddc49b0d704b6059">MUTT_HASH_ALLOW_DUPS</a>);</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno">  629</span>  {</div>
<div class="line"><span class="lineno">  630</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div>
<div class="line"><span class="lineno">  631</span>    <span class="keywordflow">if</span> (!e || !e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>)</div>
<div class="line"><span class="lineno">  632</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  633</span>    <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>)</div>
<div class="line"><span class="lineno">  634</span>      <a class="code hl_function" href="hash_8c.html#a10bd305a8183db9829caee9ea1bac2f5">mutt_hash_insert</a>(hash, e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>, e);</div>
<div class="line"><span class="lineno">  635</span>  }</div>
<div class="line"><span class="lineno">  636</span> </div>
<div class="line"><span class="lineno">  637</span>  <span class="keywordflow">return</span> hash;</div>
<div class="line"><span class="lineno">  638</span>}</div>
<div class="ttc" id="ahash_8c_html_a10bd305a8183db9829caee9ea1bac2f5"><div class="ttname"><a href="hash_8c.html#a10bd305a8183db9829caee9ea1bac2f5">mutt_hash_insert</a></div><div class="ttdeci">struct HashElem * mutt_hash_insert(struct HashTable *table, const char *strkey, void *data)</div><div class="ttdoc">Add a new element to the Hash Table (with string keys)</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00336">hash.c:336</a></div></div>
<div class="ttc" id="ahash_8c_html_a75439958fb5faf57c039faec79d19998"><div class="ttname"><a href="hash_8c.html#a75439958fb5faf57c039faec79d19998">mutt_hash_new</a></div><div class="ttdeci">struct HashTable * mutt_hash_new(size_t num_elems, HashFlags flags)</div><div class="ttdoc">Create a new Hash Table (with string keys)</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00260">hash.c:260</a></div></div>
<div class="ttc" id="ahash_8h_html_ab4f58917275b57d3ddc49b0d704b6059"><div class="ttname"><a href="hash_8h.html#ab4f58917275b57d3ddc49b0d704b6059">MUTT_HASH_ALLOW_DUPS</a></div><div class="ttdeci">#define MUTT_HASH_ALLOW_DUPS</div><div class="ttdoc">allow duplicate keys to be inserted</div><div class="ttdef"><b>Definition</b> <a href="hash_8h_source.html#l00114">hash.h:114</a></div></div>
<div class="ttc" id="astructHashTable_html"><div class="ttname"><a href="structHashTable.html">HashTable</a></div><div class="ttdoc">A Hash Table.</div><div class="ttdef"><b>Definition</b> <a href="hash_8h_source.html#l00098">hash.h:99</a></div></div>
</div><!-- fragment --><div id="dynsection-21" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_abb24af0cb606aad19e947822ec7855bd_cgraph.svg" width="308" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-22" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_abb24af0cb606aad19e947822ec7855bd_icgraph.svg" width="300" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aab579aee56d21be30318ba922c591fe9" name="aab579aee56d21be30318ba922c591fe9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab579aee56d21be30318ba922c591fe9">&#9670;&#160;</a></span>pseudo_threads()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pseudo_threads </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *</td>          <td class="paramname"><span class="paramname"><em>tctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread messages by subject. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tctx</td><td>Threading context</td></tr>
  </table>
  </dd>
</dl>
<p>Thread by subject things that didn't get threaded by message-id </p>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00646">646</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  647</span>{</div>
<div class="line"><span class="lineno">  648</span>  <span class="keywordflow">if</span> (!tctx || !tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0a6e58e743952ee8c0b0828be0c2909c">mailbox_view</a>)</div>
<div class="line"><span class="lineno">  649</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  650</span> </div>
<div class="line"><span class="lineno">  651</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMailbox.html">Mailbox</a> *m = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0a6e58e743952ee8c0b0828be0c2909c">mailbox_view</a>-&gt;<a class="code hl_variable" href="structMailboxView.html#acc1ad6ff0a3ac9c635ac2a68399d3280">mailbox</a>;</div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *tree = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a>;</div>
<div class="line"><span class="lineno">  654</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *top = tree;</div>
<div class="line"><span class="lineno">  655</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *tmp = NULL, *cur = NULL, *<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a> = NULL, *curchild = NULL,</div>
<div class="line"><span class="lineno">  656</span>                    *nextchild = NULL;</div>
<div class="line"><span class="lineno">  657</span> </div>
<div class="line"><span class="lineno">  658</span>  <span class="keywordflow">if</span> (!m-&gt;<a class="code hl_variable" href="structMailbox.html#a6fedaadfa93f600be8db87684ca631d7">subj_hash</a>)</div>
<div class="line"><span class="lineno">  659</span>    m-&gt;<a class="code hl_variable" href="structMailbox.html#a6fedaadfa93f600be8db87684ca631d7">subj_hash</a> = <a class="code hl_function" href="#abb24af0cb606aad19e947822ec7855bd">make_subj_hash</a>(m);</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>  <span class="keywordflow">while</span> (tree)</div>
<div class="line"><span class="lineno">  662</span>  {</div>
<div class="line"><span class="lineno">  663</span>    cur = tree;</div>
<div class="line"><span class="lineno">  664</span>    tree = tree-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno">  665</span>    <a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a> = <a class="code hl_function" href="#ade53690995c9c0c41164aea914536fc7">find_subject</a>(m, cur);</div>
<div class="line"><span class="lineno">  666</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno">  667</span>    {</div>
<div class="line"><span class="lineno">  668</span>      cur-&gt;fake_thread = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  669</span>      <a class="code hl_function" href="thread_8c.html#a0fd268c12ac9d5c96aaff581ee341878">unlink_message</a>(&amp;top, cur);</div>
<div class="line"><span class="lineno">  670</span>      <a class="code hl_function" href="thread_8c.html#a459d73c8b753c6704bead8525a7dbc7d">insert_message</a>(&amp;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>, <a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>, cur);</div>
<div class="line"><span class="lineno">  671</span>      <a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a1fb485f333eb5dbc8b4e74196b818906">sort_children</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  672</span>      tmp = cur;</div>
<div class="line"><span class="lineno">  673</span>      <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  674</span>      {</div>
<div class="line"><span class="lineno">  675</span>        <span class="keywordflow">while</span> (!tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>)</div>
<div class="line"><span class="lineno">  676</span>          tmp = tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno">  677</span> </div>
<div class="line"><span class="lineno">  678</span>        <span class="comment">/* if the message we&#39;re attaching has pseudo-children, they</span></div>
<div class="line"><span class="lineno">  679</span><span class="comment">         * need to be attached to its parent, so move them up a level.</span></div>
<div class="line"><span class="lineno">  680</span><span class="comment">         * but only do this if they have the same real subject as the</span></div>
<div class="line"><span class="lineno">  681</span><span class="comment">         * parent, since otherwise they rightly belong to the message</span></div>
<div class="line"><span class="lineno">  682</span><span class="comment">         * we&#39;re attaching. */</span></div>
<div class="line"><span class="lineno">  683</span>        <span class="keywordflow">if</span> ((tmp == cur) || <a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>,</div>
<div class="line"><span class="lineno">  684</span>                                           <a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>))</div>
<div class="line"><span class="lineno">  685</span>        {</div>
<div class="line"><span class="lineno">  686</span>          tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a6067344fac1be8e00a770303a13974a2">subject_changed</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  687</span> </div>
<div class="line"><span class="lineno">  688</span>          <span class="keywordflow">for</span> (curchild = tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>; curchild;)</div>
<div class="line"><span class="lineno">  689</span>          {</div>
<div class="line"><span class="lineno">  690</span>            nextchild = curchild-&gt;next;</div>
<div class="line"><span class="lineno">  691</span>            <span class="keywordflow">if</span> (curchild-&gt;fake_thread)</div>
<div class="line"><span class="lineno">  692</span>            {</div>
<div class="line"><span class="lineno">  693</span>              <a class="code hl_function" href="thread_8c.html#a0fd268c12ac9d5c96aaff581ee341878">unlink_message</a>(&amp;tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>, curchild);</div>
<div class="line"><span class="lineno">  694</span>              <a class="code hl_function" href="thread_8c.html#a459d73c8b753c6704bead8525a7dbc7d">insert_message</a>(&amp;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>, <a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>, curchild);</div>
<div class="line"><span class="lineno">  695</span>            }</div>
<div class="line"><span class="lineno">  696</span>            curchild = nextchild;</div>
<div class="line"><span class="lineno">  697</span>          }</div>
<div class="line"><span class="lineno">  698</span>        }</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span>        <span class="keywordflow">while</span> (!tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a> &amp;&amp; (tmp != cur))</div>
<div class="line"><span class="lineno">  701</span>        {</div>
<div class="line"><span class="lineno">  702</span>          tmp = tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno">  703</span>        }</div>
<div class="line"><span class="lineno">  704</span>        <span class="keywordflow">if</span> (tmp == cur)</div>
<div class="line"><span class="lineno">  705</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  706</span>        tmp = tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno">  707</span>      }</div>
<div class="line"><span class="lineno">  708</span>    }</div>
<div class="line"><span class="lineno">  709</span>  }</div>
<div class="line"><span class="lineno">  710</span>  tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a> = top;</div>
<div class="line"><span class="lineno">  711</span>}</div>
<div class="ttc" id="amutt__thread_8c_html_abb24af0cb606aad19e947822ec7855bd"><div class="ttname"><a href="#abb24af0cb606aad19e947822ec7855bd">make_subj_hash</a></div><div class="ttdeci">static struct HashTable * make_subj_hash(struct Mailbox *m)</div><div class="ttdoc">Create a Hash Table for the email subjects.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00621">mutt_thread.c:621</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_ade53690995c9c0c41164aea914536fc7"><div class="ttname"><a href="#ade53690995c9c0c41164aea914536fc7">find_subject</a></div><div class="ttdeci">static struct MuttThread * find_subject(struct Mailbox *m, struct MuttThread *cur)</div><div class="ttdoc">Find the best possible match for a parent based on subject.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00577">mutt_thread.c:577</a></div></div>
<div class="ttc" id="astructMuttThread_html_a1fb485f333eb5dbc8b4e74196b818906"><div class="ttname"><a href="structMuttThread.html#a1fb485f333eb5dbc8b4e74196b818906">MuttThread::sort_children</a></div><div class="ttdeci">bool sort_children</div><div class="ttdoc">Sort the children.</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00040">thread.h:40</a></div></div>
<div class="ttc" id="athread_8c_html_a0fd268c12ac9d5c96aaff581ee341878"><div class="ttname"><a href="thread_8c.html#a0fd268c12ac9d5c96aaff581ee341878">unlink_message</a></div><div class="ttdeci">void unlink_message(struct MuttThread **old, struct MuttThread *cur)</div><div class="ttdoc">Break the message out of the thread.</div><div class="ttdef"><b>Definition</b> <a href="thread_8c_source.html#l00066">thread.c:66</a></div></div>
<div class="ttc" id="athread_8c_html_a459d73c8b753c6704bead8525a7dbc7d"><div class="ttname"><a href="thread_8c.html#a459d73c8b753c6704bead8525a7dbc7d">insert_message</a></div><div class="ttdeci">void insert_message(struct MuttThread **add, struct MuttThread *parent, struct MuttThread *cur)</div><div class="ttdoc">Insert a message into a thread.</div><div class="ttdef"><b>Definition</b> <a href="thread_8c_source.html#l00104">thread.c:104</a></div></div>
</div><!-- fragment --><div id="dynsection-23" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_aab579aee56d21be30318ba922c591fe9_cgraph.svg" width="463" height="251"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-24" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_aab579aee56d21be30318ba922c591fe9_icgraph.svg" width="315" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1e6979ff2660cfcc507fed20066338a6" name="a1e6979ff2660cfcc507fed20066338a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e6979ff2660cfcc507fed20066338a6">&#9670;&#160;</a></span>mutt_clear_threads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_clear_threads </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *</td>          <td class="paramname"><span class="paramname"><em>tctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the threading of message in a mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tctx</td><td>Threading context </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00717">717</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  718</span>{</div>
<div class="line"><span class="lineno">  719</span>  <span class="keywordflow">if</span> (!tctx || !tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a>)</div>
<div class="line"><span class="lineno">  720</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  721</span> </div>
<div class="line"><span class="lineno">  722</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMailboxView.html">MailboxView</a> *mv = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0a6e58e743952ee8c0b0828be0c2909c">mailbox_view</a>;</div>
<div class="line"><span class="lineno">  723</span>  <span class="keywordflow">if</span> (!mv)</div>
<div class="line"><span class="lineno">  724</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  725</span> </div>
<div class="line"><span class="lineno">  726</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMailbox.html">Mailbox</a> *m = mv-&gt;<a class="code hl_variable" href="structMailboxView.html#acc1ad6ff0a3ac9c635ac2a68399d3280">mailbox</a>;</div>
<div class="line"><span class="lineno">  727</span>  <span class="keywordflow">if</span> (!m || !m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>)</div>
<div class="line"><span class="lineno">  728</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  729</span> </div>
<div class="line"><span class="lineno">  730</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno">  731</span>  {</div>
<div class="line"><span class="lineno">  732</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div>
<div class="line"><span class="lineno">  733</span>    <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno">  734</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>    <span class="comment">/* mailbox may have been only partially read */</span></div>
<div class="line"><span class="lineno">  737</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = NULL;</div>
<div class="line"><span class="lineno">  738</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">threaded</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  739</span>  }</div>
<div class="line"><span class="lineno">  740</span>  tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a> = NULL;</div>
<div class="line"><span class="lineno">  741</span>  <a class="code hl_function" href="hash_8c.html#afa22b7f78bbf1b59a4a2bd4bdd20948b">mutt_hash_free</a>(&amp;tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a5f2ff2a10c33b293368c1f9b5e98bfb3">hash</a>);</div>
<div class="line"><span class="lineno">  742</span>}</div>
<div class="ttc" id="astructEmail_html_a95029ac9edf984e229faefb6c8630fa9"><div class="ttname"><a href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">Email::threaded</a></div><div class="ttdeci">bool threaded</div><div class="ttdoc">Used for threading.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00108">email.h:108</a></div></div>
<div class="ttc" id="astructMailboxView_html"><div class="ttname"><a href="structMailboxView.html">MailboxView</a></div><div class="ttdoc">View of a Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="mview_8h_source.html#l00039">mview.h:40</a></div></div>
</div><!-- fragment --><div id="dynsection-25" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a1e6979ff2660cfcc507fed20066338a6_cgraph.svg" width="318" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-26" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a1e6979ff2660cfcc507fed20066338a6_icgraph.svg" width="723" height="108"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a31b9ed6d88ccb87e1a97189a62c317a3" name="a31b9ed6d88ccb87e1a97189a62c317a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31b9ed6d88ccb87e1a97189a62c317a3">&#9670;&#160;</a></span>mutt_sort_subthreads()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mutt_sort_subthreads </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *</td>          <td class="paramname"><span class="paramname"><em>tctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>init</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sort the children of a thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tctx</td><td>Threading context </td></tr>
    <tr><td class="paramname">init</td><td>If true, rebuild the thread </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00775">775</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  776</span>{</div>
<div class="line"><span class="lineno">  777</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *thread = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a>;</div>
<div class="line"><span class="lineno">  778</span>  <span class="keywordflow">if</span> (!thread)</div>
<div class="line"><span class="lineno">  779</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  780</span> </div>
<div class="line"><span class="lineno">  781</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> **array = NULL, *top = NULL, *tmp = NULL;</div>
<div class="line"><span class="lineno">  782</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *sort_aux_key = NULL, *oldsort_aux_key = NULL;</div>
<div class="line"><span class="lineno">  783</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *oldsort_thread_key = NULL;</div>
<div class="line"><span class="lineno">  784</span>  <span class="keywordtype">int</span> i, array_size;</div>
<div class="line"><span class="lineno">  785</span>  <span class="keywordtype">bool</span> sort_top = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  786</span> </div>
<div class="line"><span class="lineno">  787</span>  <span class="comment">/* we put things into the array backwards to save some cycles,</span></div>
<div class="line"><span class="lineno">  788</span><span class="comment">   * but we want to have to move less stuff around if we&#39;re</span></div>
<div class="line"><span class="lineno">  789</span><span class="comment">   * resorting, so we sort backwards and then put them back</span></div>
<div class="line"><span class="lineno">  790</span><span class="comment">   * in reverse order so they&#39;re forwards */</span></div>
<div class="line"><span class="lineno">  791</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> reverse = (<a class="code hl_function" href="#aa7ffe096f2973f3d0cd486f8e8b4228b">mutt_thread_style</a>() == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef">UT_REVERSE</a>);</div>
<div class="line"><span class="lineno">  792</span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4">EmailSortType</a> c_sort = <a class="code hl_function" href="config_2helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>);</div>
<div class="line"><span class="lineno">  793</span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4">EmailSortType</a> c_sort_aux = <a class="code hl_function" href="config_2helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort_aux&quot;</span>);</div>
<div class="line"><span class="lineno">  794</span>  <span class="keywordflow">if</span> ((c_sort &amp; <a class="code hl_define" href="config_2sort_8h.html#a971f7b510c659c9c197c6c3f50714eb5">SORT_MASK</a>) == <a class="code hl_enumvalue" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4a877f1379faba3adfe224a0f564cfa245">EMAIL_SORT_THREADS</a>)</div>
<div class="line"><span class="lineno">  795</span>  {</div>
<div class="line"><span class="lineno">  796</span>    <a class="code hl_define" href="signal2_8h.html#a903f9b298be75defd8a3043ebf62bd99">ASSERT</a>(!(c_sort &amp; <a class="code hl_define" href="config_2sort_8h.html#aed7fbab2a014eaeff33b71040530c48d">SORT_REVERSE</a>) != reverse);</div>
<div class="line"><span class="lineno">  797</span>    c_sort = c_sort_aux;</div>
<div class="line"><span class="lineno">  798</span>  }</div>
<div class="line"><span class="lineno">  799</span>  c_sort ^= <a class="code hl_define" href="config_2sort_8h.html#aed7fbab2a014eaeff33b71040530c48d">SORT_REVERSE</a>;</div>
<div class="line"><span class="lineno">  800</span>  c_sort_aux ^= <a class="code hl_define" href="config_2sort_8h.html#aed7fbab2a014eaeff33b71040530c48d">SORT_REVERSE</a>;</div>
<div class="line"><span class="lineno">  801</span>  <span class="keywordflow">if</span> (init || (tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a34e6f4e9f92d3c2d51b30877fabd5270">c_sort</a> != c_sort) || (tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#aacc87a5527bae8607948e6275a063dac">c_sort_aux</a> != c_sort_aux))</div>
<div class="line"><span class="lineno">  802</span>  {</div>
<div class="line"><span class="lineno">  803</span>    tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a34e6f4e9f92d3c2d51b30877fabd5270">c_sort</a> = c_sort;</div>
<div class="line"><span class="lineno">  804</span>    tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#aacc87a5527bae8607948e6275a063dac">c_sort_aux</a> = c_sort_aux;</div>
<div class="line"><span class="lineno">  805</span>    init = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  806</span>  }</div>
<div class="line"><span class="lineno">  807</span> </div>
<div class="line"><span class="lineno">  808</span>  top = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>;</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>  array_size = 256;</div>
<div class="line"><span class="lineno">  811</span>  array = <a class="code hl_define" href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a>(array_size, <span class="keyword">struct</span> <a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *);</div>
<div class="line"><span class="lineno">  812</span>  <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  813</span>  {</div>
<div class="line"><span class="lineno">  814</span>    <span class="keywordflow">if</span> (init || !<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aecdc5e8e8fa0958dcc7fabd1de568752">sort_thread_key</a> || !<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a3dafd246afbf111a25932721162265c8">sort_aux_key</a>)</div>
<div class="line"><span class="lineno">  815</span>    {</div>
<div class="line"><span class="lineno">  816</span>      <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aecdc5e8e8fa0958dcc7fabd1de568752">sort_thread_key</a> = NULL;</div>
<div class="line"><span class="lineno">  817</span>      <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a3dafd246afbf111a25932721162265c8">sort_aux_key</a> = NULL;</div>
<div class="line"><span class="lineno">  818</span> </div>
<div class="line"><span class="lineno">  819</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno">  820</span>        <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a1fb485f333eb5dbc8b4e74196b818906">sort_children</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  821</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  822</span>        sort_top = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  823</span>    }</div>
<div class="line"><span class="lineno">  824</span> </div>
<div class="line"><span class="lineno">  825</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>)</div>
<div class="line"><span class="lineno">  826</span>    {</div>
<div class="line"><span class="lineno">  827</span>      <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno">  828</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  829</span>    }</div>
<div class="line"><span class="lineno">  830</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  831</span>    {</div>
<div class="line"><span class="lineno">  832</span>      <span class="comment">/* if it has no children, it must be real. sort it on its own merits */</span></div>
<div class="line"><span class="lineno">  833</span>      <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aecdc5e8e8fa0958dcc7fabd1de568752">sort_thread_key</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>;</div>
<div class="line"><span class="lineno">  834</span>      <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a3dafd246afbf111a25932721162265c8">sort_aux_key</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>;</div>
<div class="line"><span class="lineno">  835</span> </div>
<div class="line"><span class="lineno">  836</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno">  837</span>      {</div>
<div class="line"><span class="lineno">  838</span>        <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno">  839</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  840</span>      }</div>
<div class="line"><span class="lineno">  841</span>    }</div>
<div class="line"><span class="lineno">  842</span> </div>
<div class="line"><span class="lineno">  843</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structMailbox.html">Mailbox</a> *m = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0a6e58e743952ee8c0b0828be0c2909c">mailbox_view</a>-&gt;<a class="code hl_variable" href="structMailboxView.html#acc1ad6ff0a3ac9c635ac2a68399d3280">mailbox</a>;</div>
<div class="line"><span class="lineno">  844</span>    <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921d">MailboxType</a> mtype = <a class="code hl_function" href="mx_8c.html#ad1b4348096500e4c8df39275b956ec1c">mx_type</a>(m);</div>
<div class="line"><span class="lineno">  845</span>    <span class="keywordflow">while</span> (!thread-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno">  846</span>    {</div>
<div class="line"><span class="lineno">  847</span>      <span class="comment">/* if it has siblings and needs to be sorted, sort it... */</span></div>
<div class="line"><span class="lineno">  848</span>      <span class="keywordflow">if</span> (thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">prev</a> &amp;&amp; (thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a> ? thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a1fb485f333eb5dbc8b4e74196b818906">sort_children</a> : sort_top))</div>
<div class="line"><span class="lineno">  849</span>      {</div>
<div class="line"><span class="lineno">  850</span>        <span class="comment">/* put them into the array */</span></div>
<div class="line"><span class="lineno">  851</span>        <span class="keywordflow">for</span> (i = 0; thread; i++, thread = thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">prev</a>)</div>
<div class="line"><span class="lineno">  852</span>        {</div>
<div class="line"><span class="lineno">  853</span>          <span class="keywordflow">if</span> (i &gt;= array_size)</div>
<div class="line"><span class="lineno">  854</span>          {</div>
<div class="line"><span class="lineno">  855</span>            array_size *= 2;</div>
<div class="line"><span class="lineno">  856</span>            <a class="code hl_define" href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a>(&amp;array, array_size, <span class="keyword">struct</span> <a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *);</div>
<div class="line"><span class="lineno">  857</span>          }</div>
<div class="line"><span class="lineno">  858</span> </div>
<div class="line"><span class="lineno">  859</span>          array[i] = thread;</div>
<div class="line"><span class="lineno">  860</span>        }</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>        <a class="code hl_function" href="qsort__r_8c.html#adb31a05f44d011c04f6df8752c8f05de">mutt_qsort_r</a>((<span class="keywordtype">void</span> *) array, i, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *), <a class="code hl_function" href="group__sort__api.html#ga368375f735420aa5dd7d2a1d2c9bd5b7">compare_threads</a>, tctx);</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>        <span class="comment">/* attach them back together.  make thread the last sibling. */</span></div>
<div class="line"><span class="lineno">  865</span>        thread = array[0];</div>
<div class="line"><span class="lineno">  866</span>        thread-&gt;next = NULL;</div>
<div class="line"><span class="lineno">  867</span>        array[i - 1]-&gt;prev = NULL;</div>
<div class="line"><span class="lineno">  868</span> </div>
<div class="line"><span class="lineno">  869</span>        <span class="keywordflow">if</span> (thread-&gt;parent)</div>
<div class="line"><span class="lineno">  870</span>          thread-&gt;parent-&gt;child = array[i - 1];</div>
<div class="line"><span class="lineno">  871</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  872</span>          top = array[i - 1];</div>
<div class="line"><span class="lineno">  873</span> </div>
<div class="line"><span class="lineno">  874</span>        <span class="keywordflow">while</span> (--i)</div>
<div class="line"><span class="lineno">  875</span>        {</div>
<div class="line"><span class="lineno">  876</span>          array[i - 1]-&gt;prev = array[i];</div>
<div class="line"><span class="lineno">  877</span>          array[i]-&gt;next = array[i - 1];</div>
<div class="line"><span class="lineno">  878</span>        }</div>
<div class="line"><span class="lineno">  879</span>      }</div>
<div class="line"><span class="lineno">  880</span> </div>
<div class="line"><span class="lineno">  881</span>      <span class="keywordflow">if</span> (thread-&gt;parent)</div>
<div class="line"><span class="lineno">  882</span>      {</div>
<div class="line"><span class="lineno">  883</span>        tmp = thread;</div>
<div class="line"><span class="lineno">  884</span>        thread = thread-&gt;parent;</div>
<div class="line"><span class="lineno">  885</span> </div>
<div class="line"><span class="lineno">  886</span>        <span class="keywordflow">if</span> (!thread-&gt;sort_thread_key || !thread-&gt;sort_aux_key || thread-&gt;sort_children)</div>
<div class="line"><span class="lineno">  887</span>        {</div>
<div class="line"><span class="lineno">  888</span>          <span class="comment">/* we just sorted its children */</span></div>
<div class="line"><span class="lineno">  889</span>          thread-&gt;sort_children = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  890</span> </div>
<div class="line"><span class="lineno">  891</span>          oldsort_aux_key = thread-&gt;sort_aux_key;</div>
<div class="line"><span class="lineno">  892</span>          oldsort_thread_key = thread-&gt;sort_thread_key;</div>
<div class="line"><span class="lineno">  893</span> </div>
<div class="line"><span class="lineno">  894</span>          <span class="comment">/* update sort keys. sort_aux_key will be the first or last</span></div>
<div class="line"><span class="lineno">  895</span><span class="comment">           * sibling, as appropriate... */</span></div>
<div class="line"><span class="lineno">  896</span>          thread-&gt;sort_aux_key = thread-&gt;message;</div>
<div class="line"><span class="lineno">  897</span>          sort_aux_key = ((!(c_sort_aux &amp; <a class="code hl_define" href="config_2sort_8h.html#aa210f3e5da89d4845a268b51d1df95f9">SORT_LAST</a>)) ^ (!(c_sort_aux &amp; <a class="code hl_define" href="config_2sort_8h.html#aed7fbab2a014eaeff33b71040530c48d">SORT_REVERSE</a>))) ?</div>
<div class="line"><span class="lineno">  898</span>                             thread-&gt;child-&gt;sort_aux_key :</div>
<div class="line"><span class="lineno">  899</span>                             tmp-&gt;sort_aux_key;</div>
<div class="line"><span class="lineno">  900</span> </div>
<div class="line"><span class="lineno">  901</span>          <span class="keywordflow">if</span> (c_sort_aux &amp; <a class="code hl_define" href="config_2sort_8h.html#aa210f3e5da89d4845a268b51d1df95f9">SORT_LAST</a>)</div>
<div class="line"><span class="lineno">  902</span>          {</div>
<div class="line"><span class="lineno">  903</span>            <span class="keywordflow">if</span> (!thread-&gt;sort_aux_key ||</div>
<div class="line"><span class="lineno">  904</span>                (<a class="code hl_function" href="group__sort__api.html#gaaec1ad688d9afbf919f199df5e55f106">mutt_compare_emails</a>(thread-&gt;sort_aux_key, sort_aux_key, mtype,</div>
<div class="line"><span class="lineno">  905</span>                                     c_sort_aux | <a class="code hl_define" href="config_2sort_8h.html#aed7fbab2a014eaeff33b71040530c48d">SORT_REVERSE</a>, <a class="code hl_enumvalue" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4aa5fa714c8f7a789cb67f5d22cd014361">EMAIL_SORT_UNSORTED</a>) &gt; 0))</div>
<div class="line"><span class="lineno">  906</span>            {</div>
<div class="line"><span class="lineno">  907</span>              thread-&gt;sort_aux_key = sort_aux_key;</div>
<div class="line"><span class="lineno">  908</span>            }</div>
<div class="line"><span class="lineno">  909</span>          }</div>
<div class="line"><span class="lineno">  910</span>          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!thread-&gt;sort_aux_key)</div>
<div class="line"><span class="lineno">  911</span>          {</div>
<div class="line"><span class="lineno">  912</span>            thread-&gt;sort_aux_key = sort_aux_key;</div>
<div class="line"><span class="lineno">  913</span>          }</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>          <span class="comment">/* ...but sort_thread_key may require searching the entire</span></div>
<div class="line"><span class="lineno">  916</span><span class="comment">           * list of siblings */</span></div>
<div class="line"><span class="lineno">  917</span>          <span class="keywordflow">if</span> ((c_sort_aux &amp; ~<a class="code hl_define" href="config_2sort_8h.html#aed7fbab2a014eaeff33b71040530c48d">SORT_REVERSE</a>) == (c_sort &amp; ~<a class="code hl_define" href="config_2sort_8h.html#aed7fbab2a014eaeff33b71040530c48d">SORT_REVERSE</a>))</div>
<div class="line"><span class="lineno">  918</span>          {</div>
<div class="line"><span class="lineno">  919</span>            thread-&gt;sort_thread_key = thread-&gt;sort_aux_key;</div>
<div class="line"><span class="lineno">  920</span>          }</div>
<div class="line"><span class="lineno">  921</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  922</span>          {</div>
<div class="line"><span class="lineno">  923</span>            <span class="keywordflow">if</span> (thread-&gt;message)</div>
<div class="line"><span class="lineno">  924</span>            {</div>
<div class="line"><span class="lineno">  925</span>              thread-&gt;sort_thread_key = thread-&gt;message;</div>
<div class="line"><span class="lineno">  926</span>            }</div>
<div class="line"><span class="lineno">  927</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reverse != (!(c_sort_aux &amp; <a class="code hl_define" href="config_2sort_8h.html#aed7fbab2a014eaeff33b71040530c48d">SORT_REVERSE</a>)))</div>
<div class="line"><span class="lineno">  928</span>            {</div>
<div class="line"><span class="lineno">  929</span>              thread-&gt;sort_thread_key = tmp-&gt;sort_thread_key;</div>
<div class="line"><span class="lineno">  930</span>            }</div>
<div class="line"><span class="lineno">  931</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  932</span>            {</div>
<div class="line"><span class="lineno">  933</span>              thread-&gt;sort_thread_key = thread-&gt;child-&gt;sort_thread_key;</div>
<div class="line"><span class="lineno">  934</span>            }</div>
<div class="line"><span class="lineno">  935</span>            <span class="keywordflow">if</span> (c_sort &amp; <a class="code hl_define" href="config_2sort_8h.html#aa210f3e5da89d4845a268b51d1df95f9">SORT_LAST</a>)</div>
<div class="line"><span class="lineno">  936</span>            {</div>
<div class="line"><span class="lineno">  937</span>              <span class="keywordflow">for</span> (tmp = thread-&gt;child; tmp; tmp = tmp-&gt;next)</div>
<div class="line"><span class="lineno">  938</span>              {</div>
<div class="line"><span class="lineno">  939</span>                <span class="keywordflow">if</span> (tmp-&gt;sort_thread_key == thread-&gt;sort_thread_key)</div>
<div class="line"><span class="lineno">  940</span>                  <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  941</span>                <span class="keywordflow">if</span> ((<a class="code hl_function" href="group__sort__api.html#gaaec1ad688d9afbf919f199df5e55f106">mutt_compare_emails</a>(thread-&gt;sort_thread_key, tmp-&gt;sort_thread_key, mtype,</div>
<div class="line"><span class="lineno">  942</span>                                         c_sort | <a class="code hl_define" href="config_2sort_8h.html#aed7fbab2a014eaeff33b71040530c48d">SORT_REVERSE</a>, <a class="code hl_enumvalue" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4aa5fa714c8f7a789cb67f5d22cd014361">EMAIL_SORT_UNSORTED</a>) &gt; 0))</div>
<div class="line"><span class="lineno">  943</span>                {</div>
<div class="line"><span class="lineno">  944</span>                  thread-&gt;sort_thread_key = tmp-&gt;sort_thread_key;</div>
<div class="line"><span class="lineno">  945</span>                }</div>
<div class="line"><span class="lineno">  946</span>              }</div>
<div class="line"><span class="lineno">  947</span>            }</div>
<div class="line"><span class="lineno">  948</span>          }</div>
<div class="line"><span class="lineno">  949</span> </div>
<div class="line"><span class="lineno">  950</span>          <span class="comment">/* if a sort_key has changed, we need to resort it and siblings */</span></div>
<div class="line"><span class="lineno">  951</span>          <span class="keywordflow">if</span> ((oldsort_aux_key != thread-&gt;sort_aux_key) ||</div>
<div class="line"><span class="lineno">  952</span>              (oldsort_thread_key != thread-&gt;sort_thread_key))</div>
<div class="line"><span class="lineno">  953</span>          {</div>
<div class="line"><span class="lineno">  954</span>            <span class="keywordflow">if</span> (thread-&gt;parent)</div>
<div class="line"><span class="lineno">  955</span>              thread-&gt;parent-&gt;sort_children = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  956</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  957</span>              sort_top = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  958</span>          }</div>
<div class="line"><span class="lineno">  959</span>        }</div>
<div class="line"><span class="lineno">  960</span>      }</div>
<div class="line"><span class="lineno">  961</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  962</span>      {</div>
<div class="line"><span class="lineno">  963</span>        <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;array);</div>
<div class="line"><span class="lineno">  964</span>        tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a> = top;</div>
<div class="line"><span class="lineno">  965</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  966</span>      }</div>
<div class="line"><span class="lineno">  967</span>    }</div>
<div class="line"><span class="lineno">  968</span> </div>
<div class="line"><span class="lineno">  969</span>    thread = thread-&gt;next;</div>
<div class="line"><span class="lineno">  970</span>  }</div>
<div class="line"><span class="lineno">  971</span>}</div>
<div class="ttc" id="aconfig_2sort_8h_html_aa210f3e5da89d4845a268b51d1df95f9"><div class="ttname"><a href="config_2sort_8h.html#aa210f3e5da89d4845a268b51d1df95f9">SORT_LAST</a></div><div class="ttdeci">#define SORT_LAST</div><div class="ttdoc">Sort thread by last-X, e.g. received date.</div><div class="ttdef"><b>Definition</b> <a href="config_2sort_8h_source.html#l00040">sort.h:40</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921d"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921d">MailboxType</a></div><div class="ttdeci">MailboxType</div><div class="ttdoc">Supported mailbox formats.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00040">mailbox.h:41</a></div></div>
<div class="ttc" id="aemail_2sort_8h_html_aefa89e4f16231d09e09e4693bebf6dd4aa5fa714c8f7a789cb67f5d22cd014361"><div class="ttname"><a href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4aa5fa714c8f7a789cb67f5d22cd014361">EMAIL_SORT_UNSORTED</a></div><div class="ttdeci">@ EMAIL_SORT_UNSORTED</div><div class="ttdoc">Sort by the order the messages appear in the mailbox.</div><div class="ttdef"><b>Definition</b> <a href="email_2sort_8h_source.html#l00064">sort.h:64</a></div></div>
<div class="ttc" id="agroup__sort__api_html_ga368375f735420aa5dd7d2a1d2c9bd5b7"><div class="ttname"><a href="group__sort__api.html#ga368375f735420aa5dd7d2a1d2c9bd5b7">compare_threads</a></div><div class="ttdeci">static int compare_threads(const void *a, const void *b, void *sdata)</div><div class="ttdoc">Helper to sort email threads - Implements sort_t -.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00747">mutt_thread.c:747</a></div></div>
<div class="ttc" id="agroup__sort__api_html_gaaec1ad688d9afbf919f199df5e55f106"><div class="ttname"><a href="group__sort__api.html#gaaec1ad688d9afbf919f199df5e55f106">mutt_compare_emails</a></div><div class="ttdeci">int mutt_compare_emails(const struct Email *a, const struct Email *b, enum MailboxType type, short sort, short sort_aux)</div><div class="ttdoc">Compare two emails using up to two sort methods -.</div><div class="ttdef"><b>Definition</b> <a href="email_2sort_8c_source.html#l00329">sort.c:329</a></div></div>
<div class="ttc" id="amemory_8h_html_abd7aad5fe8f11bcd476c64b4243081ba"><div class="ttname"><a href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a></div><div class="ttdeci">#define MUTT_MEM_REALLOC(pptr, n, type)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00051">memory.h:51</a></div></div>
<div class="ttc" id="amx_8c_html_ad1b4348096500e4c8df39275b956ec1c"><div class="ttname"><a href="mx_8c.html#ad1b4348096500e4c8df39275b956ec1c">mx_type</a></div><div class="ttdeci">enum MailboxType mx_type(struct Mailbox *m)</div><div class="ttdoc">Return the type of the Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l01813">mx.c:1813</a></div></div>
<div class="ttc" id="aqsort__r_8c_html_adb31a05f44d011c04f6df8752c8f05de"><div class="ttname"><a href="qsort__r_8c.html#adb31a05f44d011c04f6df8752c8f05de">mutt_qsort_r</a></div><div class="ttdeci">void mutt_qsort_r(void *base, size_t nmemb, size_t size, sort_t compar, void *sdata)</div><div class="ttdoc">Sort an array, where the comparator has access to opaque data rather than requiring global variables.</div><div class="ttdef"><b>Definition</b> <a href="qsort__r_8c_source.html#l00067">qsort_r.c:67</a></div></div>
<div class="ttc" id="asignal2_8h_html_a903f9b298be75defd8a3043ebf62bd99"><div class="ttname"><a href="signal2_8h.html#a903f9b298be75defd8a3043ebf62bd99">ASSERT</a></div><div class="ttdeci">#define ASSERT(COND)</div><div class="ttdef"><b>Definition</b> <a href="signal2_8h_source.html#l00060">signal2.h:60</a></div></div>
<div class="ttc" id="astructMuttThread_html_a3dafd246afbf111a25932721162265c8"><div class="ttname"><a href="structMuttThread.html#a3dafd246afbf111a25932721162265c8">MuttThread::sort_aux_key</a></div><div class="ttdeci">struct Email * sort_aux_key</div><div class="ttdoc">Email that controls how subthread siblings sort.</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00051">thread.h:51</a></div></div>
<div class="ttc" id="astructMuttThread_html_aecdc5e8e8fa0958dcc7fabd1de568752"><div class="ttname"><a href="structMuttThread.html#aecdc5e8e8fa0958dcc7fabd1de568752">MuttThread::sort_thread_key</a></div><div class="ttdeci">struct Email * sort_thread_key</div><div class="ttdoc">Email that controls how top thread sorts.</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00050">thread.h:50</a></div></div>
<div class="ttc" id="astructThreadsContext_html_a34e6f4e9f92d3c2d51b30877fabd5270"><div class="ttname"><a href="structThreadsContext.html#a34e6f4e9f92d3c2d51b30877fabd5270">ThreadsContext::c_sort</a></div><div class="ttdeci">enum EmailSortType c_sort</div><div class="ttdoc">Last sort method.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00046">mutt_thread.h:46</a></div></div>
<div class="ttc" id="astructThreadsContext_html_aacc87a5527bae8607948e6275a063dac"><div class="ttname"><a href="structThreadsContext.html#aacc87a5527bae8607948e6275a063dac">ThreadsContext::c_sort_aux</a></div><div class="ttdeci">enum EmailSortType c_sort_aux</div><div class="ttdoc">Last sort_aux method.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00047">mutt_thread.h:47</a></div></div>
</div><!-- fragment --><div id="dynsection-27" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a31b9ed6d88ccb87e1a97189a62c317a3_cgraph.svg" width="554" height="287"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-28" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a31b9ed6d88ccb87e1a97189a62c317a3_icgraph.svg" width="352" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="abb8bcb094dc43f9c4fb43f7e9bd76deb" name="abb8bcb094dc43f9c4fb43f7e9bd76deb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb8bcb094dc43f9c4fb43f7e9bd76deb">&#9670;&#160;</a></span>check_subjects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void check_subjects </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailboxView.html">MailboxView</a> *</td>          <td class="paramname"><span class="paramname"><em>mv</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>init</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find out which emails' subjects differ from their parent's. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mv</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> View </td></tr>
    <tr><td class="paramname">init</td><td>If true, rebuild the thread </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00978">978</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  979</span>{</div>
<div class="line"><span class="lineno">  980</span>  <span class="keywordflow">if</span> (!mv)</div>
<div class="line"><span class="lineno">  981</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  982</span> </div>
<div class="line"><span class="lineno">  983</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMailbox.html">Mailbox</a> *m = mv-&gt;<a class="code hl_variable" href="structMailboxView.html#acc1ad6ff0a3ac9c635ac2a68399d3280">mailbox</a>;</div>
<div class="line"><span class="lineno">  984</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno">  985</span>  {</div>
<div class="line"><span class="lineno">  986</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div>
<div class="line"><span class="lineno">  987</span>    <span class="keywordflow">if</span> (!e || !e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>)</div>
<div class="line"><span class="lineno">  988</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  989</span> </div>
<div class="line"><span class="lineno">  990</span>    <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#ae942fadad384d962155370650dd56890">check_subject</a>)</div>
<div class="line"><span class="lineno">  991</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#ae942fadad384d962155370650dd56890">check_subject</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  992</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!init)</div>
<div class="line"><span class="lineno">  993</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  994</span> </div>
<div class="line"><span class="lineno">  995</span>    <span class="comment">/* figure out which messages have subjects different than their parents&#39; */</span></div>
<div class="line"><span class="lineno">  996</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *tmp = e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno">  997</span>    <span class="keywordflow">while</span> (tmp &amp;&amp; !tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>)</div>
<div class="line"><span class="lineno">  998</span>    {</div>
<div class="line"><span class="lineno">  999</span>      tmp = tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno"> 1000</span>    }</div>
<div class="line"><span class="lineno"> 1001</span> </div>
<div class="line"><span class="lineno"> 1002</span>    <span class="keywordflow">if</span> (!tmp)</div>
<div class="line"><span class="lineno"> 1003</span>    {</div>
<div class="line"><span class="lineno"> 1004</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#a6067344fac1be8e00a770303a13974a2">subject_changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1005</span>    }</div>
<div class="line"><span class="lineno"> 1006</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a> &amp;&amp; tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>)</div>
<div class="line"><span class="lineno"> 1007</span>    {</div>
<div class="line"><span class="lineno"> 1008</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#a6067344fac1be8e00a770303a13974a2">subject_changed</a> = !<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>, tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>);</div>
<div class="line"><span class="lineno"> 1009</span>    }</div>
<div class="line"><span class="lineno"> 1010</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1011</span>    {</div>
<div class="line"><span class="lineno"> 1012</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#a6067344fac1be8e00a770303a13974a2">subject_changed</a> = (e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a> || tmp-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>);</div>
<div class="line"><span class="lineno"> 1013</span>    }</div>
<div class="line"><span class="lineno"> 1014</span>  }</div>
<div class="line"><span class="lineno"> 1015</span>}</div>
<div class="ttc" id="astructMuttThread_html_ae942fadad384d962155370650dd56890"><div class="ttname"><a href="structMuttThread.html#ae942fadad384d962155370650dd56890">MuttThread::check_subject</a></div><div class="ttdeci">bool check_subject</div><div class="ttdoc">Should the Subject be checked?</div><div class="ttdef"><b>Definition</b> <a href="thread_8h_source.html#l00035">thread.h:35</a></div></div>
</div><!-- fragment --><div id="dynsection-29" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_abb8bcb094dc43f9c4fb43f7e9bd76deb_cgraph.svg" width="286" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-30" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_abb8bcb094dc43f9c4fb43f7e9bd76deb_icgraph.svg" width="307" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac7bcb788cdd39c241efce4af04d2f3dc" name="ac7bcb788cdd39c241efce4af04d2f3dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7bcb788cdd39c241efce4af04d2f3dc">&#9670;&#160;</a></span>mutt_sort_threads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_sort_threads </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *</td>          <td class="paramname"><span class="paramname"><em>tctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>init</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sort email threads. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tctx</td><td>Threading context </td></tr>
    <tr><td class="paramname">init</td><td>If true, rebuild the thread </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01030">1030</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1031</span>{</div>
<div class="line"><span class="lineno"> 1032</span>  <span class="keywordflow">if</span> (!tctx || !tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0a6e58e743952ee8c0b0828be0c2909c">mailbox_view</a>)</div>
<div class="line"><span class="lineno"> 1033</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1034</span> </div>
<div class="line"><span class="lineno"> 1035</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMailboxView.html">MailboxView</a> *mv = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0a6e58e743952ee8c0b0828be0c2909c">mailbox_view</a>;</div>
<div class="line"><span class="lineno"> 1036</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMailbox.html">Mailbox</a> *m = mv-&gt;<a class="code hl_variable" href="structMailboxView.html#acc1ad6ff0a3ac9c635ac2a68399d3280">mailbox</a>;</div>
<div class="line"><span class="lineno"> 1037</span> </div>
<div class="line"><span class="lineno"> 1038</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = NULL;</div>
<div class="line"><span class="lineno"> 1039</span>  <span class="keywordtype">int</span> i, using_refs = 0;</div>
<div class="line"><span class="lineno"> 1040</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *thread = NULL, *tnew = NULL, *tmp = NULL;</div>
<div class="line"><span class="lineno"> 1041</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> top = { 0 };</div>
<div class="line"><span class="lineno"> 1042</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structListNode.html">ListNode</a> *ref = NULL;</div>
<div class="line"><span class="lineno"> 1043</span> </div>
<div class="line"><span class="lineno"> 1044</span>  <a class="code hl_define" href="signal2_8h.html#a903f9b298be75defd8a3043ebf62bd99">ASSERT</a>(m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> &gt; 0);</div>
<div class="line"><span class="lineno"> 1045</span>  <span class="keywordflow">if</span> (!tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a5f2ff2a10c33b293368c1f9b5e98bfb3">hash</a>)</div>
<div class="line"><span class="lineno"> 1046</span>    init = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1047</span> </div>
<div class="line"><span class="lineno"> 1048</span>  <span class="keywordflow">if</span> (init)</div>
<div class="line"><span class="lineno"> 1049</span>  {</div>
<div class="line"><span class="lineno"> 1050</span>    tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a5f2ff2a10c33b293368c1f9b5e98bfb3">hash</a> = <a class="code hl_function" href="hash_8c.html#a75439958fb5faf57c039faec79d19998">mutt_hash_new</a>(m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> * 2, <a class="code hl_define" href="hash_8h.html#ab4f58917275b57d3ddc49b0d704b6059">MUTT_HASH_ALLOW_DUPS</a>);</div>
<div class="line"><span class="lineno"> 1051</span>    <a class="code hl_function" href="hash_8c.html#a8fdd3fbf2f93e78267168d3a8d2b4d79">mutt_hash_set_destructor</a>(tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a5f2ff2a10c33b293368c1f9b5e98bfb3">hash</a>, <a class="code hl_function" href="group__hash__hdata__free__api.html#gac7a6c714d618e4154a6c7380db506729">thread_hash_destructor</a>, 0);</div>
<div class="line"><span class="lineno"> 1052</span>  }</div>
<div class="line"><span class="lineno"> 1053</span> </div>
<div class="line"><span class="lineno"> 1054</span>  <span class="comment">/* we want a quick way to see if things are actually attached to the top of the</span></div>
<div class="line"><span class="lineno"> 1055</span><span class="comment">   * thread tree or if they&#39;re just dangling, so we attach everything to a top</span></div>
<div class="line"><span class="lineno"> 1056</span><span class="comment">   * node temporarily */</span></div>
<div class="line"><span class="lineno"> 1057</span>  top.<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a> = NULL;</div>
<div class="line"><span class="lineno"> 1058</span>  top.<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a> = NULL;</div>
<div class="line"><span class="lineno"> 1059</span>  top.<a class="code hl_variable" href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">prev</a> = NULL;</div>
<div class="line"><span class="lineno"> 1060</span> </div>
<div class="line"><span class="lineno"> 1061</span>  top.<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a> = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a>;</div>
<div class="line"><span class="lineno"> 1062</span>  <span class="keywordflow">for</span> (thread = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a>; thread; thread = thread-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno"> 1063</span>    thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a> = &amp;top;</div>
<div class="line"><span class="lineno"> 1064</span> </div>
<div class="line"><span class="lineno"> 1065</span>  <span class="comment">/* put each new message together with the matching messageless MuttThread if it</span></div>
<div class="line"><span class="lineno"> 1066</span><span class="comment">   * exists.  otherwise, if there is a MuttThread that already has a message, thread</span></div>
<div class="line"><span class="lineno"> 1067</span><span class="comment">   * new message as an identical child.  if we didn&#39;t attach the message to a</span></div>
<div class="line"><span class="lineno"> 1068</span><span class="comment">   * MuttThread, make a new one for it. */</span></div>
<div class="line"><span class="lineno"> 1069</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_duplicate_threads = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;duplicate_threads&quot;</span>);</div>
<div class="line"><span class="lineno"> 1070</span>  <span class="keywordflow">for</span> (i = 0; i &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno"> 1071</span>  {</div>
<div class="line"><span class="lineno"> 1072</span>    e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div>
<div class="line"><span class="lineno"> 1073</span>    <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno"> 1074</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span>    <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>)</div>
<div class="line"><span class="lineno"> 1077</span>    {</div>
<div class="line"><span class="lineno"> 1078</span>      <span class="comment">/* unlink pseudo-threads because they might be children of newly</span></div>
<div class="line"><span class="lineno"> 1079</span><span class="comment">       * arrived messages */</span></div>
<div class="line"><span class="lineno"> 1080</span>      thread = e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>;</div>
<div class="line"><span class="lineno"> 1081</span>      <span class="keywordflow">for</span> (tnew = thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>; tnew;)</div>
<div class="line"><span class="lineno"> 1082</span>      {</div>
<div class="line"><span class="lineno"> 1083</span>        tmp = tnew-&gt;next;</div>
<div class="line"><span class="lineno"> 1084</span>        <span class="keywordflow">if</span> (tnew-&gt;fake_thread)</div>
<div class="line"><span class="lineno"> 1085</span>        {</div>
<div class="line"><span class="lineno"> 1086</span>          <a class="code hl_function" href="thread_8c.html#a0fd268c12ac9d5c96aaff581ee341878">unlink_message</a>(&amp;thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>, tnew);</div>
<div class="line"><span class="lineno"> 1087</span>          <a class="code hl_function" href="thread_8c.html#a459d73c8b753c6704bead8525a7dbc7d">insert_message</a>(&amp;top.<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>, &amp;top, tnew);</div>
<div class="line"><span class="lineno"> 1088</span>          tnew-&gt;fake_thread = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1089</span>        }</div>
<div class="line"><span class="lineno"> 1090</span>        tnew = tmp;</div>
<div class="line"><span class="lineno"> 1091</span>      }</div>
<div class="line"><span class="lineno"> 1092</span>    }</div>
<div class="line"><span class="lineno"> 1093</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1094</span>    {</div>
<div class="line"><span class="lineno"> 1095</span>      <span class="keywordflow">if</span> ((!init || c_duplicate_threads) &amp;&amp; e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>)</div>
<div class="line"><span class="lineno"> 1096</span>        thread = <a class="code hl_function" href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a>(tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a5f2ff2a10c33b293368c1f9b5e98bfb3">hash</a>, e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>);</div>
<div class="line"><span class="lineno"> 1097</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1098</span>        thread = NULL;</div>
<div class="line"><span class="lineno"> 1099</span> </div>
<div class="line"><span class="lineno"> 1100</span>      <span class="keywordflow">if</span> (thread &amp;&amp; !thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>)</div>
<div class="line"><span class="lineno"> 1101</span>      {</div>
<div class="line"><span class="lineno"> 1102</span>        <span class="comment">/* this is a message which was missing before */</span></div>
<div class="line"><span class="lineno"> 1103</span>        thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a> = e;</div>
<div class="line"><span class="lineno"> 1104</span>        e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = thread;</div>
<div class="line"><span class="lineno"> 1105</span>        thread-&gt;<a class="code hl_variable" href="structMuttThread.html#ae942fadad384d962155370650dd56890">check_subject</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1106</span> </div>
<div class="line"><span class="lineno"> 1107</span>        <span class="comment">/* mark descendants as needing subject_changed checked */</span></div>
<div class="line"><span class="lineno"> 1108</span>        <span class="keywordflow">for</span> (tmp = (thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a> ? thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a> : thread); tmp != thread;)</div>
<div class="line"><span class="lineno"> 1109</span>        {</div>
<div class="line"><span class="lineno"> 1110</span>          <span class="keywordflow">while</span> (!tmp-&gt;message)</div>
<div class="line"><span class="lineno"> 1111</span>            tmp = tmp-&gt;child;</div>
<div class="line"><span class="lineno"> 1112</span>          tmp-&gt;check_subject = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1113</span>          <span class="keywordflow">while</span> (!tmp-&gt;next &amp;&amp; (tmp != thread))</div>
<div class="line"><span class="lineno"> 1114</span>            tmp = tmp-&gt;parent;</div>
<div class="line"><span class="lineno"> 1115</span>          <span class="keywordflow">if</span> (tmp != thread)</div>
<div class="line"><span class="lineno"> 1116</span>            tmp = tmp-&gt;next;</div>
<div class="line"><span class="lineno"> 1117</span>        }</div>
<div class="line"><span class="lineno"> 1118</span> </div>
<div class="line"><span class="lineno"> 1119</span>        <span class="keywordflow">if</span> (thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno"> 1120</span>        {</div>
<div class="line"><span class="lineno"> 1121</span>          <span class="comment">/* remove threading info above it based on its children, which we&#39;ll</span></div>
<div class="line"><span class="lineno"> 1122</span><span class="comment">           * recalculate based on its headers.  make sure not to leave</span></div>
<div class="line"><span class="lineno"> 1123</span><span class="comment">           * dangling missing messages.  note that we haven&#39;t kept track</span></div>
<div class="line"><span class="lineno"> 1124</span><span class="comment">           * of what info came from its children and what from its siblings&#39;</span></div>
<div class="line"><span class="lineno"> 1125</span><span class="comment">           * children, so we just remove the stuff that&#39;s definitely from it */</span></div>
<div class="line"><span class="lineno"> 1126</span>          <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno"> 1127</span>          {</div>
<div class="line"><span class="lineno"> 1128</span>            tmp = thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno"> 1129</span>            <a class="code hl_function" href="thread_8c.html#a0fd268c12ac9d5c96aaff581ee341878">unlink_message</a>(&amp;tmp-&gt;child, thread);</div>
<div class="line"><span class="lineno"> 1130</span>            thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a> = NULL;</div>
<div class="line"><span class="lineno"> 1131</span>            thread-&gt;<a class="code hl_variable" href="structMuttThread.html#aecdc5e8e8fa0958dcc7fabd1de568752">sort_thread_key</a> = NULL;</div>
<div class="line"><span class="lineno"> 1132</span>            thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a3dafd246afbf111a25932721162265c8">sort_aux_key</a> = NULL;</div>
<div class="line"><span class="lineno"> 1133</span>            thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a68156e7ac570e245272ba291dfd840fd">fake_thread</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1134</span>            thread = tmp;</div>
<div class="line"><span class="lineno"> 1135</span>          } <span class="keywordflow">while</span> (thread != &amp;top &amp;&amp; !thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a> &amp;&amp; !thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>);</div>
<div class="line"><span class="lineno"> 1136</span>        }</div>
<div class="line"><span class="lineno"> 1137</span>      }</div>
<div class="line"><span class="lineno"> 1138</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1139</span>      {</div>
<div class="line"><span class="lineno"> 1140</span>        tnew = (c_duplicate_threads ? thread : NULL);</div>
<div class="line"><span class="lineno"> 1141</span> </div>
<div class="line"><span class="lineno"> 1142</span>        thread = <a class="code hl_define" href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a>(1, <span class="keyword">struct</span> <a class="code hl_struct" href="structMuttThread.html">MuttThread</a>);</div>
<div class="line"><span class="lineno"> 1143</span>        thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a> = e;</div>
<div class="line"><span class="lineno"> 1144</span>        thread-&gt;<a class="code hl_variable" href="structMuttThread.html#ae942fadad384d962155370650dd56890">check_subject</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1145</span>        e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = thread;</div>
<div class="line"><span class="lineno"> 1146</span>        <a class="code hl_function" href="hash_8c.html#a10bd305a8183db9829caee9ea1bac2f5">mutt_hash_insert</a>(tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a5f2ff2a10c33b293368c1f9b5e98bfb3">hash</a>, e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a> ? e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a> : <span class="stringliteral">&quot;&quot;</span>, thread);</div>
<div class="line"><span class="lineno"> 1147</span> </div>
<div class="line"><span class="lineno"> 1148</span>        <span class="keywordflow">if</span> (tnew)</div>
<div class="line"><span class="lineno"> 1149</span>        {</div>
<div class="line"><span class="lineno"> 1150</span>          <span class="keywordflow">if</span> (tnew-&gt;duplicate_thread)</div>
<div class="line"><span class="lineno"> 1151</span>            tnew = tnew-&gt;parent;</div>
<div class="line"><span class="lineno"> 1152</span> </div>
<div class="line"><span class="lineno"> 1153</span>          thread = e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>;</div>
<div class="line"><span class="lineno"> 1154</span> </div>
<div class="line"><span class="lineno"> 1155</span>          <a class="code hl_function" href="thread_8c.html#a459d73c8b753c6704bead8525a7dbc7d">insert_message</a>(&amp;tnew-&gt;child, tnew, thread);</div>
<div class="line"><span class="lineno"> 1156</span>          thread-&gt;<a class="code hl_variable" href="structMuttThread.html#add9fafa2e72810244df9eee34eff25fa">duplicate_thread</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1157</span>          thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">threaded</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1158</span>        }</div>
<div class="line"><span class="lineno"> 1159</span>      }</div>
<div class="line"><span class="lineno"> 1160</span>    }</div>
<div class="line"><span class="lineno"> 1161</span>  }</div>
<div class="line"><span class="lineno"> 1162</span> </div>
<div class="line"><span class="lineno"> 1163</span>  <span class="comment">/* thread by references */</span></div>
<div class="line"><span class="lineno"> 1164</span>  <span class="keywordflow">for</span> (i = 0; i &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno"> 1165</span>  {</div>
<div class="line"><span class="lineno"> 1166</span>    e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div>
<div class="line"><span class="lineno"> 1167</span>    <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno"> 1168</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1169</span> </div>
<div class="line"><span class="lineno"> 1170</span>    <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">threaded</a>)</div>
<div class="line"><span class="lineno"> 1171</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1172</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">threaded</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1173</span> </div>
<div class="line"><span class="lineno"> 1174</span>    thread = e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>;</div>
<div class="line"><span class="lineno"> 1175</span>    <span class="keywordflow">if</span> (!thread)</div>
<div class="line"><span class="lineno"> 1176</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1177</span>    using_refs = 0;</div>
<div class="line"><span class="lineno"> 1178</span> </div>
<div class="line"><span class="lineno"> 1179</span>    <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno"> 1180</span>    {</div>
<div class="line"><span class="lineno"> 1181</span>      <span class="keywordflow">if</span> (using_refs == 0)</div>
<div class="line"><span class="lineno"> 1182</span>      {</div>
<div class="line"><span class="lineno"> 1183</span>        <span class="comment">/* look at the beginning of in-reply-to: */</span></div>
<div class="line"><span class="lineno"> 1184</span>        ref = <a class="code hl_define" href="queue_8h.html#a3e2eb7535019a2829399b24744dd1a66">STAILQ_FIRST</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a9ae6d450b2f012c37d3350f4305fbb90">in_reply_to</a>);</div>
<div class="line"><span class="lineno"> 1185</span>        <span class="keywordflow">if</span> (ref)</div>
<div class="line"><span class="lineno"> 1186</span>        {</div>
<div class="line"><span class="lineno"> 1187</span>          using_refs = 1;</div>
<div class="line"><span class="lineno"> 1188</span>        }</div>
<div class="line"><span class="lineno"> 1189</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1190</span>        {</div>
<div class="line"><span class="lineno"> 1191</span>          ref = <a class="code hl_define" href="queue_8h.html#a3e2eb7535019a2829399b24744dd1a66">STAILQ_FIRST</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>);</div>
<div class="line"><span class="lineno"> 1192</span>          using_refs = 2;</div>
<div class="line"><span class="lineno"> 1193</span>        }</div>
<div class="line"><span class="lineno"> 1194</span>      }</div>
<div class="line"><span class="lineno"> 1195</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (using_refs == 1)</div>
<div class="line"><span class="lineno"> 1196</span>      {</div>
<div class="line"><span class="lineno"> 1197</span>        <span class="comment">/* if there&#39;s no references header, use all the in-reply-to:</span></div>
<div class="line"><span class="lineno"> 1198</span><span class="comment">         * data that we have.  otherwise, use the first reference</span></div>
<div class="line"><span class="lineno"> 1199</span><span class="comment">         * if it&#39;s different than the first in-reply-to, otherwise use</span></div>
<div class="line"><span class="lineno"> 1200</span><span class="comment">         * the second reference (since at least eudora puts the most</span></div>
<div class="line"><span class="lineno"> 1201</span><span class="comment">         * recent reference in in-reply-to and the rest in references) */</span></div>
<div class="line"><span class="lineno"> 1202</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="queue_8h.html#a8427c8f43d09d73062cf6b37f303aff5">STAILQ_EMPTY</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>))</div>
<div class="line"><span class="lineno"> 1203</span>        {</div>
<div class="line"><span class="lineno"> 1204</span>          ref = <a class="code hl_define" href="queue_8h.html#ad89ac472696d006112dface9c2d75e47">STAILQ_NEXT</a>(ref, entries);</div>
<div class="line"><span class="lineno"> 1205</span>        }</div>
<div class="line"><span class="lineno"> 1206</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1207</span>        {</div>
<div class="line"><span class="lineno"> 1208</span>          <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(ref-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, <a class="code hl_define" href="queue_8h.html#a3e2eb7535019a2829399b24744dd1a66">STAILQ_FIRST</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>)-&gt;data))</div>
<div class="line"><span class="lineno"> 1209</span>            ref = <a class="code hl_define" href="queue_8h.html#a3e2eb7535019a2829399b24744dd1a66">STAILQ_FIRST</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>);</div>
<div class="line"><span class="lineno"> 1210</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1211</span>            ref = <a class="code hl_define" href="queue_8h.html#ad89ac472696d006112dface9c2d75e47">STAILQ_NEXT</a>(<a class="code hl_define" href="queue_8h.html#a3e2eb7535019a2829399b24744dd1a66">STAILQ_FIRST</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>), entries);</div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span>          using_refs = 2;</div>
<div class="line"><span class="lineno"> 1214</span>        }</div>
<div class="line"><span class="lineno"> 1215</span>      }</div>
<div class="line"><span class="lineno"> 1216</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1217</span>      {</div>
<div class="line"><span class="lineno"> 1218</span>        ref = <a class="code hl_define" href="queue_8h.html#ad89ac472696d006112dface9c2d75e47">STAILQ_NEXT</a>(ref, entries); <span class="comment">/* go on with references */</span></div>
<div class="line"><span class="lineno"> 1219</span>      }</div>
<div class="line"><span class="lineno"> 1220</span> </div>
<div class="line"><span class="lineno"> 1221</span>      <span class="keywordflow">if</span> (!ref)</div>
<div class="line"><span class="lineno"> 1222</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1223</span> </div>
<div class="line"><span class="lineno"> 1224</span>      tnew = <a class="code hl_function" href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a>(tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a5f2ff2a10c33b293368c1f9b5e98bfb3">hash</a>, ref-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>);</div>
<div class="line"><span class="lineno"> 1225</span>      <span class="keywordflow">if</span> (tnew)</div>
<div class="line"><span class="lineno"> 1226</span>      {</div>
<div class="line"><span class="lineno"> 1227</span>        <span class="keywordflow">if</span> (tnew-&gt;duplicate_thread)</div>
<div class="line"><span class="lineno"> 1228</span>          tnew = tnew-&gt;parent;</div>
<div class="line"><span class="lineno"> 1229</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="thread_8c.html#a270ef45b668941a460185742a798a9d4">is_descendant</a>(tnew, thread)) <span class="comment">/* no loops! */</span></div>
<div class="line"><span class="lineno"> 1230</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1231</span>      }</div>
<div class="line"><span class="lineno"> 1232</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1233</span>      {</div>
<div class="line"><span class="lineno"> 1234</span>        tnew = <a class="code hl_define" href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a>(1, <span class="keyword">struct</span> <a class="code hl_struct" href="structMuttThread.html">MuttThread</a>);</div>
<div class="line"><span class="lineno"> 1235</span>        <a class="code hl_function" href="hash_8c.html#a10bd305a8183db9829caee9ea1bac2f5">mutt_hash_insert</a>(tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a5f2ff2a10c33b293368c1f9b5e98bfb3">hash</a>, ref-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, tnew);</div>
<div class="line"><span class="lineno"> 1236</span>      }</div>
<div class="line"><span class="lineno"> 1237</span> </div>
<div class="line"><span class="lineno"> 1238</span>      <span class="keywordflow">if</span> (thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno"> 1239</span>        <a class="code hl_function" href="thread_8c.html#a0fd268c12ac9d5c96aaff581ee341878">unlink_message</a>(&amp;top.<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>, thread);</div>
<div class="line"><span class="lineno"> 1240</span>      <a class="code hl_function" href="thread_8c.html#a459d73c8b753c6704bead8525a7dbc7d">insert_message</a>(&amp;tnew-&gt;child, tnew, thread);</div>
<div class="line"><span class="lineno"> 1241</span>      thread = tnew;</div>
<div class="line"><span class="lineno"> 1242</span>      <span class="keywordflow">if</span> (thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a> || (thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a> &amp;&amp; (thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a> != &amp;top)))</div>
<div class="line"><span class="lineno"> 1243</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1244</span>    }</div>
<div class="line"><span class="lineno"> 1245</span> </div>
<div class="line"><span class="lineno"> 1246</span>    <span class="keywordflow">if</span> (!thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno"> 1247</span>      <a class="code hl_function" href="thread_8c.html#a459d73c8b753c6704bead8525a7dbc7d">insert_message</a>(&amp;top.<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>, &amp;top, thread);</div>
<div class="line"><span class="lineno"> 1248</span>  }</div>
<div class="line"><span class="lineno"> 1249</span> </div>
<div class="line"><span class="lineno"> 1250</span>  <span class="comment">/* detach everything from the temporary top node */</span></div>
<div class="line"><span class="lineno"> 1251</span>  <span class="keywordflow">for</span> (thread = top.<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>; thread; thread = thread-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno"> 1252</span>  {</div>
<div class="line"><span class="lineno"> 1253</span>    thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a> = NULL;</div>
<div class="line"><span class="lineno"> 1254</span>  }</div>
<div class="line"><span class="lineno"> 1255</span>  tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a> = top.<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno"> 1256</span> </div>
<div class="line"><span class="lineno"> 1257</span>  <a class="code hl_function" href="#abb8bcb094dc43f9c4fb43f7e9bd76deb">check_subjects</a>(mv, init);</div>
<div class="line"><span class="lineno"> 1258</span> </div>
<div class="line"><span class="lineno"> 1259</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_strict_threads = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;strict_threads&quot;</span>);</div>
<div class="line"><span class="lineno"> 1260</span>  <span class="keywordflow">if</span> (!c_strict_threads)</div>
<div class="line"><span class="lineno"> 1261</span>    <a class="code hl_function" href="#aab579aee56d21be30318ba922c591fe9">pseudo_threads</a>(tctx);</div>
<div class="line"><span class="lineno"> 1262</span> </div>
<div class="line"><span class="lineno"> 1263</span>  <span class="comment">/* if $sort_aux or similar changed after the mailbox is sorted, then</span></div>
<div class="line"><span class="lineno"> 1264</span><span class="comment">   * all the subthreads need to be resorted */</span></div>
<div class="line"><span class="lineno"> 1265</span>  <span class="keywordflow">if</span> (tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a>)</div>
<div class="line"><span class="lineno"> 1266</span>  {</div>
<div class="line"><span class="lineno"> 1267</span>    <a class="code hl_function" href="#a31b9ed6d88ccb87e1a97189a62c317a3">mutt_sort_subthreads</a>(tctx, init || <a class="code hl_variable" href="globals_8c.html#abf26ef5fcbd5234531d588f9f3a1f293">OptSortSubthreads</a>);</div>
<div class="line"><span class="lineno"> 1268</span>    <a class="code hl_variable" href="globals_8c.html#abf26ef5fcbd5234531d588f9f3a1f293">OptSortSubthreads</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1269</span> </div>
<div class="line"><span class="lineno"> 1270</span>    <span class="comment">/* Put the list into an array. */</span></div>
<div class="line"><span class="lineno"> 1271</span>    <a class="code hl_function" href="#a050f78574b03ad5cca308994796e5237">linearize_tree</a>(tctx);</div>
<div class="line"><span class="lineno"> 1272</span> </div>
<div class="line"><span class="lineno"> 1273</span>    <span class="comment">/* Draw the thread tree. */</span></div>
<div class="line"><span class="lineno"> 1274</span>    <a class="code hl_function" href="#a726f16b8fb688c688a6d0147052103d8">mutt_draw_tree</a>(tctx);</div>
<div class="line"><span class="lineno"> 1275</span>  }</div>
<div class="line"><span class="lineno"> 1276</span>}</div>
<div class="ttc" id="aglobals_8c_html_abf26ef5fcbd5234531d588f9f3a1f293"><div class="ttname"><a href="globals_8c.html#abf26ef5fcbd5234531d588f9f3a1f293">OptSortSubthreads</a></div><div class="ttdeci">bool OptSortSubthreads</div><div class="ttdoc">(pseudo) used when $sort_aux changes</div><div class="ttdef"><b>Definition</b> <a href="globals_8c_source.html#l00068">globals.c:68</a></div></div>
<div class="ttc" id="agroup__hash__hdata__free__api_html_gac7a6c714d618e4154a6c7380db506729"><div class="ttname"><a href="group__hash__hdata__free__api.html#gac7a6c714d618e4154a6c7380db506729">thread_hash_destructor</a></div><div class="ttdeci">static void thread_hash_destructor(int type, void *obj, intptr_t data)</div><div class="ttdoc">Free our hash table data - Implements hash_hdata_free_t -.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l01020">mutt_thread.c:1020</a></div></div>
<div class="ttc" id="ahash_8c_html_a21cfc2c56db496fc57d3d85a71c03215"><div class="ttname"><a href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a></div><div class="ttdeci">void * mutt_hash_find(const struct HashTable *table, const char *strkey)</div><div class="ttdoc">Find the HashElem data in a Hash Table element using a key.</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00363">hash.c:363</a></div></div>
<div class="ttc" id="ahash_8c_html_a8fdd3fbf2f93e78267168d3a8d2b4d79"><div class="ttname"><a href="hash_8c.html#a8fdd3fbf2f93e78267168d3a8d2b4d79">mutt_hash_set_destructor</a></div><div class="ttdeci">void mutt_hash_set_destructor(struct HashTable *table, hash_hdata_free_t fn, intptr_t fn_data)</div><div class="ttdoc">Set the destructor for a Hash Table.</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00302">hash.c:302</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_a050f78574b03ad5cca308994796e5237"><div class="ttname"><a href="#a050f78574b03ad5cca308994796e5237">linearize_tree</a></div><div class="ttdeci">static void linearize_tree(struct ThreadsContext *tctx)</div><div class="ttdoc">Flatten an email thread.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00180">mutt_thread.c:180</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_a31b9ed6d88ccb87e1a97189a62c317a3"><div class="ttname"><a href="#a31b9ed6d88ccb87e1a97189a62c317a3">mutt_sort_subthreads</a></div><div class="ttdeci">static void mutt_sort_subthreads(struct ThreadsContext *tctx, bool init)</div><div class="ttdoc">Sort the children of a thread.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00775">mutt_thread.c:775</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_a726f16b8fb688c688a6d0147052103d8"><div class="ttname"><a href="#a726f16b8fb688c688a6d0147052103d8">mutt_draw_tree</a></div><div class="ttdeci">void mutt_draw_tree(struct ThreadsContext *tctx)</div><div class="ttdoc">Draw a tree of threaded emails.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00391">mutt_thread.c:391</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_aab579aee56d21be30318ba922c591fe9"><div class="ttname"><a href="#aab579aee56d21be30318ba922c591fe9">pseudo_threads</a></div><div class="ttdeci">static void pseudo_threads(struct ThreadsContext *tctx)</div><div class="ttdoc">Thread messages by subject.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00646">mutt_thread.c:646</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_abb8bcb094dc43f9c4fb43f7e9bd76deb"><div class="ttname"><a href="#abb8bcb094dc43f9c4fb43f7e9bd76deb">check_subjects</a></div><div class="ttdeci">static void check_subjects(struct MailboxView *mv, bool init)</div><div class="ttdoc">Find out which emails&#39; subjects differ from their parent&#39;s.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l00978">mutt_thread.c:978</a></div></div>
<div class="ttc" id="aqueue_8h_html_a3e2eb7535019a2829399b24744dd1a66"><div class="ttname"><a href="queue_8h.html#a3e2eb7535019a2829399b24744dd1a66">STAILQ_FIRST</a></div><div class="ttdeci">#define STAILQ_FIRST(head)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00388">queue.h:388</a></div></div>
<div class="ttc" id="aqueue_8h_html_a8427c8f43d09d73062cf6b37f303aff5"><div class="ttname"><a href="queue_8h.html#a8427c8f43d09d73062cf6b37f303aff5">STAILQ_EMPTY</a></div><div class="ttdeci">#define STAILQ_EMPTY(head)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00382">queue.h:382</a></div></div>
<div class="ttc" id="aqueue_8h_html_ad89ac472696d006112dface9c2d75e47"><div class="ttname"><a href="queue_8h.html#ad89ac472696d006112dface9c2d75e47">STAILQ_NEXT</a></div><div class="ttdeci">#define STAILQ_NEXT(elm, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00439">queue.h:439</a></div></div>
<div class="ttc" id="astructEnvelope_html_a50418c13a849bf27b22922bd5867e5e1"><div class="ttname"><a href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">Envelope::message_id</a></div><div class="ttdeci">char * message_id</div><div class="ttdoc">Message ID.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00073">envelope.h:73</a></div></div>
<div class="ttc" id="astructEnvelope_html_a832eec73356a806761e26f0bc40d9083"><div class="ttname"><a href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">Envelope::references</a></div><div class="ttdeci">struct ListHead references</div><div class="ttdoc">message references (in reverse order)</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00083">envelope.h:83</a></div></div>
<div class="ttc" id="astructEnvelope_html_a9ae6d450b2f012c37d3350f4305fbb90"><div class="ttname"><a href="structEnvelope.html#a9ae6d450b2f012c37d3350f4305fbb90">Envelope::in_reply_to</a></div><div class="ttdeci">struct ListHead in_reply_to</div><div class="ttdoc">in-reply-to header content</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00084">envelope.h:84</a></div></div>
</div><!-- fragment --><div id="dynsection-31" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_ac7bcb788cdd39c241efce4af04d2f3dc_cgraph.svg" width="546" height="776"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-32" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_ac7bcb788cdd39c241efce4af04d2f3dc_icgraph.svg" width="334" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="adb66f40987e98d64c631d45ee1bda645" name="adb66f40987e98d64c631d45ee1bda645"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb66f40987e98d64c631d45ee1bda645">&#9670;&#160;</a></span>mutt_aside_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_aside_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>forwards</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>subthreads</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the next/previous (sub)thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td>Search from this <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">forwards</td><td>Direction to search: 'true' forwards, 'false' backwards </td></tr>
    <tr><td class="paramname">subthreads</td><td>Search subthreads: 'true' subthread, 'false' not </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Index into the virtual email table </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01286">1286</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1287</span>{</div>
<div class="line"><span class="lineno"> 1288</span>  <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno"> 1289</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1290</span> </div>
<div class="line"><span class="lineno"> 1291</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *cur = NULL;</div>
<div class="line"><span class="lineno"> 1292</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e_tmp = NULL;</div>
<div class="line"><span class="lineno"> 1293</span> </div>
<div class="line"><span class="lineno"> 1294</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6">UseThreads</a> <a class="code hl_variable" href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">threaded</a> = <a class="code hl_function" href="#aa7ffe096f2973f3d0cd486f8e8b4228b">mutt_thread_style</a>();</div>
<div class="line"><span class="lineno"> 1295</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">threaded</a> == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935">UT_FLAT</a>)</div>
<div class="line"><span class="lineno"> 1296</span>  {</div>
<div class="line"><span class="lineno"> 1297</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Threading is not enabled&quot;</span>));</div>
<div class="line"><span class="lineno"> 1298</span>    <span class="keywordflow">return</span> e-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1299</span>  }</div>
<div class="line"><span class="lineno"> 1300</span> </div>
<div class="line"><span class="lineno"> 1301</span>  cur = e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>;</div>
<div class="line"><span class="lineno"> 1302</span> </div>
<div class="line"><span class="lineno"> 1303</span>  <span class="keywordflow">if</span> (subthreads)</div>
<div class="line"><span class="lineno"> 1304</span>  {</div>
<div class="line"><span class="lineno"> 1305</span>    <span class="keywordflow">if</span> (forwards ^ (<a class="code hl_variable" href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">threaded</a> == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef">UT_REVERSE</a>))</div>
<div class="line"><span class="lineno"> 1306</span>    {</div>
<div class="line"><span class="lineno"> 1307</span>      <span class="keywordflow">while</span> (!cur-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a> &amp;&amp; cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno"> 1308</span>        cur = cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno"> 1309</span>    }</div>
<div class="line"><span class="lineno"> 1310</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1311</span>    {</div>
<div class="line"><span class="lineno"> 1312</span>      <span class="keywordflow">while</span> (!cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">prev</a> &amp;&amp; cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno"> 1313</span>        cur = cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno"> 1314</span>    }</div>
<div class="line"><span class="lineno"> 1315</span>  }</div>
<div class="line"><span class="lineno"> 1316</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1317</span>  {</div>
<div class="line"><span class="lineno"> 1318</span>    <span class="keywordflow">while</span> (cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno"> 1319</span>      cur = cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno"> 1320</span>  }</div>
<div class="line"><span class="lineno"> 1321</span> </div>
<div class="line"><span class="lineno"> 1322</span>  <span class="keywordflow">if</span> (forwards ^ (<a class="code hl_variable" href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">threaded</a> == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef">UT_REVERSE</a>))</div>
<div class="line"><span class="lineno"> 1323</span>  {</div>
<div class="line"><span class="lineno"> 1324</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno"> 1325</span>    {</div>
<div class="line"><span class="lineno"> 1326</span>      cur = cur-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno"> 1327</span>      <span class="keywordflow">if</span> (!cur)</div>
<div class="line"><span class="lineno"> 1328</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1329</span>      e_tmp = <a class="code hl_function" href="thread_8c.html#a935c58e8d42dc12e4ed901702fd9f7f3">find_virtual</a>(cur, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1330</span>    } <span class="keywordflow">while</span> (!e_tmp);</div>
<div class="line"><span class="lineno"> 1331</span>  }</div>
<div class="line"><span class="lineno"> 1332</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1333</span>  {</div>
<div class="line"><span class="lineno"> 1334</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno"> 1335</span>    {</div>
<div class="line"><span class="lineno"> 1336</span>      cur = cur-&gt;<a class="code hl_variable" href="structMuttThread.html#a5931c5905063b72935f0b37f044dad00">prev</a>;</div>
<div class="line"><span class="lineno"> 1337</span>      <span class="keywordflow">if</span> (!cur)</div>
<div class="line"><span class="lineno"> 1338</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1339</span>      e_tmp = <a class="code hl_function" href="thread_8c.html#a935c58e8d42dc12e4ed901702fd9f7f3">find_virtual</a>(cur, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1340</span>    } <span class="keywordflow">while</span> (!e_tmp);</div>
<div class="line"><span class="lineno"> 1341</span>  }</div>
<div class="line"><span class="lineno"> 1342</span> </div>
<div class="line"><span class="lineno"> 1343</span>  <span class="keywordflow">return</span> e_tmp-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1344</span>}</div>
<div class="ttc" id="agroup__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00094">logging2.h:94</a></div></div>
<div class="ttc" id="amutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_a317428aabc925e6a974638673629ddd6"><div class="ttname"><a href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6">UseThreads</a></div><div class="ttdeci">UseThreads</div><div class="ttdoc">Which threading style is active, $use_threads.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00095">mutt_thread.h:96</a></div></div>
<div class="ttc" id="athread_8c_html_a935c58e8d42dc12e4ed901702fd9f7f3"><div class="ttname"><a href="thread_8c.html#a935c58e8d42dc12e4ed901702fd9f7f3">find_virtual</a></div><div class="ttdeci">struct Email * find_virtual(struct MuttThread *cur, bool reverse)</div><div class="ttdoc">Find an email with a Virtual message number.</div><div class="ttdef"><b>Definition</b> <a href="thread_8c_source.html#l00124">thread.c:124</a></div></div>
</div><!-- fragment --><div id="dynsection-33" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_adb66f40987e98d64c631d45ee1bda645_cgraph.svg" width="328" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae021dae3b838ebc7f688d4c9204a2308" name="ae021dae3b838ebc7f688d4c9204a2308"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae021dae3b838ebc7f688d4c9204a2308">&#9670;&#160;</a></span>mutt_parent_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_parent_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>find_root</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the parent of a message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td>Current <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">find_root</td><td>If true, find the root message </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;=0</td><td>Virtual index number of parent/root message </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01353">1353</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1354</span>{</div>
<div class="line"><span class="lineno"> 1355</span>  <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno"> 1356</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1357</span> </div>
<div class="line"><span class="lineno"> 1358</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *thread = NULL;</div>
<div class="line"><span class="lineno"> 1359</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e_parent = NULL;</div>
<div class="line"><span class="lineno"> 1360</span> </div>
<div class="line"><span class="lineno"> 1361</span>  <span class="keywordflow">if</span> (!<a class="code hl_define" href="mutt__thread_8h.html#a3c51d7064c28996bbe6fed52eec84857">mutt_using_threads</a>())</div>
<div class="line"><span class="lineno"> 1362</span>  {</div>
<div class="line"><span class="lineno"> 1363</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Threading is not enabled&quot;</span>));</div>
<div class="line"><span class="lineno"> 1364</span>    <span class="keywordflow">return</span> e-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1365</span>  }</div>
<div class="line"><span class="lineno"> 1366</span> </div>
<div class="line"><span class="lineno"> 1367</span>  <span class="comment">/* Root may be the current message */</span></div>
<div class="line"><span class="lineno"> 1368</span>  <span class="keywordflow">if</span> (find_root)</div>
<div class="line"><span class="lineno"> 1369</span>    e_parent = e;</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>  <span class="keywordflow">for</span> (<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>; <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>; <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno"> 1372</span>  {</div>
<div class="line"><span class="lineno"> 1373</span>    e = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>;</div>
<div class="line"><span class="lineno"> 1374</span>    <span class="keywordflow">if</span> (e)</div>
<div class="line"><span class="lineno"> 1375</span>    {</div>
<div class="line"><span class="lineno"> 1376</span>      e_parent = e;</div>
<div class="line"><span class="lineno"> 1377</span>      <span class="keywordflow">if</span> (!find_root)</div>
<div class="line"><span class="lineno"> 1378</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1379</span>    }</div>
<div class="line"><span class="lineno"> 1380</span>  }</div>
<div class="line"><span class="lineno"> 1381</span> </div>
<div class="line"><span class="lineno"> 1382</span>  <span class="keywordflow">if</span> (!e_parent)</div>
<div class="line"><span class="lineno"> 1383</span>  {</div>
<div class="line"><span class="lineno"> 1384</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Parent message is not available&quot;</span>));</div>
<div class="line"><span class="lineno"> 1385</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1386</span>  }</div>
<div class="line"><span class="lineno"> 1387</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="#af6f89eb1fe9177d9a3484842f7d5c1cc">is_visible</a>(e_parent))</div>
<div class="line"><span class="lineno"> 1388</span>  {</div>
<div class="line"><span class="lineno"> 1389</span>    <span class="keywordflow">if</span> (find_root)</div>
<div class="line"><span class="lineno"> 1390</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Root message is not visible in this limited view&quot;</span>));</div>
<div class="line"><span class="lineno"> 1391</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1392</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Parent message is not visible in this limited view&quot;</span>));</div>
<div class="line"><span class="lineno"> 1393</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1394</span>  }</div>
<div class="line"><span class="lineno"> 1395</span>  <span class="keywordflow">return</span> e_parent-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1396</span>}</div>
<div class="ttc" id="amutt__thread_8h_html_a3c51d7064c28996bbe6fed52eec84857"><div class="ttname"><a href="mutt__thread_8h.html#a3c51d7064c28996bbe6fed52eec84857">mutt_using_threads</a></div><div class="ttdeci">#define mutt_using_threads()</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00113">mutt_thread.h:113</a></div></div>
</div><!-- fragment --><div id="dynsection-34" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_ae021dae3b838ebc7f688d4c9204a2308_cgraph.svg" width="292" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-35" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_ae021dae3b838ebc7f688d4c9204a2308_icgraph.svg" width="384" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad208699eb4bc42837530572fbe4caf8d" name="ad208699eb4bc42837530572fbe4caf8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad208699eb4bc42837530572fbe4caf8d">&#9670;&#160;</a></span>mutt_set_vnum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">off_t mutt_set_vnum </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the virtual index number of all the messages in a mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Size in bytes of all messages shown </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01403">1403</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1404</span>{</div>
<div class="line"><span class="lineno"> 1405</span>  <span class="keywordflow">if</span> (!m)</div>
<div class="line"><span class="lineno"> 1406</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1407</span> </div>
<div class="line"><span class="lineno"> 1408</span>  off_t vsize = 0;</div>
<div class="line"><span class="lineno"> 1409</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> padding = <a class="code hl_function" href="mx_8c.html#a4721eba787445b6c9ab9a6366b5e816d">mx_msg_padding_size</a>(m);</div>
<div class="line"><span class="lineno"> 1410</span> </div>
<div class="line"><span class="lineno"> 1411</span>  m-&gt;<a class="code hl_variable" href="structMailbox.html#a0e1673cdf63976b1d148786457666f84">vcount</a> = 0;</div>
<div class="line"><span class="lineno"> 1412</span> </div>
<div class="line"><span class="lineno"> 1413</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno"> 1414</span>  {</div>
<div class="line"><span class="lineno"> 1415</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div>
<div class="line"><span class="lineno"> 1416</span>    <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno"> 1417</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1418</span> </div>
<div class="line"><span class="lineno"> 1419</span>    <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a> &gt;= 0)</div>
<div class="line"><span class="lineno"> 1420</span>    {</div>
<div class="line"><span class="lineno"> 1421</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a> = m-&gt;<a class="code hl_variable" href="structMailbox.html#a0e1673cdf63976b1d148786457666f84">vcount</a>;</div>
<div class="line"><span class="lineno"> 1422</span>      m-&gt;<a class="code hl_variable" href="structMailbox.html#a29d550d9a2d2a6a65b4b6ba1c625ef36">v2r</a>[m-&gt;<a class="code hl_variable" href="structMailbox.html#a0e1673cdf63976b1d148786457666f84">vcount</a>] = i;</div>
<div class="line"><span class="lineno"> 1423</span>      m-&gt;<a class="code hl_variable" href="structMailbox.html#a0e1673cdf63976b1d148786457666f84">vcount</a>++;</div>
<div class="line"><span class="lineno"> 1424</span>      vsize += e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a> + e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">offset</a> - e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ae6ebb9758689003ed9ae055272420dd9">hdr_offset</a> + padding;</div>
<div class="line"><span class="lineno"> 1425</span>    }</div>
<div class="line"><span class="lineno"> 1426</span>  }</div>
<div class="line"><span class="lineno"> 1427</span> </div>
<div class="line"><span class="lineno"> 1428</span>  <span class="keywordflow">return</span> vsize;</div>
<div class="line"><span class="lineno"> 1429</span>}</div>
<div class="ttc" id="amx_8c_html_a4721eba787445b6c9ab9a6366b5e816d"><div class="ttname"><a href="mx_8c.html#a4721eba787445b6c9ab9a6366b5e816d">mx_msg_padding_size</a></div><div class="ttdeci">int mx_msg_padding_size(struct Mailbox *m)</div><div class="ttdoc">Bytes of padding between messages - Wrapper for MxOps::msg_padding_size()</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l01510">mx.c:1510</a></div></div>
<div class="ttc" id="astructBody_html_a1969dfeb0a155ccb16153fe777a103b0"><div class="ttname"><a href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">Body::offset</a></div><div class="ttdeci">LOFF_T offset</div><div class="ttdoc">offset where the actual data begins</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00052">body.h:52</a></div></div>
<div class="ttc" id="astructBody_html_a6f92d7ec8568ca04ae07931c56dd0790"><div class="ttname"><a href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">Body::length</a></div><div class="ttdeci">LOFF_T length</div><div class="ttdoc">length (in bytes) of attachment</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00053">body.h:53</a></div></div>
<div class="ttc" id="astructBody_html_ae6ebb9758689003ed9ae055272420dd9"><div class="ttname"><a href="structBody.html#ae6ebb9758689003ed9ae055272420dd9">Body::hdr_offset</a></div><div class="ttdeci">long hdr_offset</div><div class="ttdoc">Offset in stream where the headers begin.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00081">body.h:81</a></div></div>
<div class="ttc" id="astructEmail_html_a57ad6ac618c0f685804f6f5bb390b3a6"><div class="ttname"><a href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">Email::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">List of MIME parts.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00069">email.h:69</a></div></div>
<div class="ttc" id="astructMailbox_html_a0e1673cdf63976b1d148786457666f84"><div class="ttname"><a href="structMailbox.html#a0e1673cdf63976b1d148786457666f84">Mailbox::vcount</a></div><div class="ttdeci">int vcount</div><div class="ttdoc">The number of virtual messages.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00099">mailbox.h:99</a></div></div>
<div class="ttc" id="astructMailbox_html_a29d550d9a2d2a6a65b4b6ba1c625ef36"><div class="ttname"><a href="structMailbox.html#a29d550d9a2d2a6a65b4b6ba1c625ef36">Mailbox::v2r</a></div><div class="ttdeci">int * v2r</div><div class="ttdoc">Mapping from virtual to real msgno.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00098">mailbox.h:98</a></div></div>
</div><!-- fragment --><div id="dynsection-36" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_ad208699eb4bc42837530572fbe4caf8d_cgraph.svg" width="334" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-37" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_ad208699eb4bc42837530572fbe4caf8d_icgraph.svg" width="567" height="462"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a249d2b866bc0b7a8ef5c4954fd4c33b0" name="a249d2b866bc0b7a8ef5c4954fd4c33b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a249d2b866bc0b7a8ef5c4954fd4c33b0">&#9670;&#160;</a></span>mutt_traverse_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_traverse_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e_cur</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mutt__thread_8h.html#a13d89de5f6b408671d0e624de135ea8a">MuttThreadFlags</a></td>          <td class="paramname"><span class="paramname"><em>flag</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recurse through an email thread, matching messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e_cur</td><td>Current <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">flag</td><td>Flag to set, see <a class="el" href="mutt__thread_8h.html#a13d89de5f6b408671d0e624de135ea8a" title="Flags, e.g. MUTT_THREAD_COLLAPSE.">MuttThreadFlags</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Number of matches </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01437">1437</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1438</span>{</div>
<div class="line"><span class="lineno"> 1439</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *thread = NULL, *top = NULL;</div>
<div class="line"><span class="lineno"> 1440</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e_root = NULL;</div>
<div class="line"><span class="lineno"> 1441</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6">UseThreads</a> <a class="code hl_variable" href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">threaded</a> = <a class="code hl_function" href="#aa7ffe096f2973f3d0cd486f8e8b4228b">mutt_thread_style</a>();</div>
<div class="line"><span class="lineno"> 1442</span>  <span class="keywordtype">int</span> <span class="keyword">final</span>, reverse = (<a class="code hl_variable" href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">threaded</a> == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef">UT_REVERSE</a>), minmsgno;</div>
<div class="line"><span class="lineno"> 1443</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="structEmail.html#a71f1e37390a5400b182e0724c1f61769">num_hidden</a> = 0, new_mail = 0, old_mail = 0;</div>
<div class="line"><span class="lineno"> 1444</span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1445</span>  <span class="keywordtype">int</span> min_unread_msgno = INT_MAX, min_unread = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1446</span> </div>
<div class="line"><span class="lineno"> 1447</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#a95029ac9edf984e229faefb6c8630fa9">threaded</a> == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935">UT_FLAT</a>)</div>
<div class="line"><span class="lineno"> 1448</span>  {</div>
<div class="line"><span class="lineno"> 1449</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Threading is not enabled&quot;</span>));</div>
<div class="line"><span class="lineno"> 1450</span>    <span class="keywordflow">return</span> e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1451</span>  }</div>
<div class="line"><span class="lineno"> 1452</span> </div>
<div class="line"><span class="lineno"> 1453</span>  <span class="keywordflow">if</span> (!e_cur-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>)</div>
<div class="line"><span class="lineno"> 1454</span>  {</div>
<div class="line"><span class="lineno"> 1455</span>    <span class="keywordflow">return</span> e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1456</span>  }</div>
<div class="line"><span class="lineno"> 1457</span> </div>
<div class="line"><span class="lineno"> 1458</span>  <span class="keyword">final</span> = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1459</span>  <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>;</div>
<div class="line"><span class="lineno"> 1460</span>  <span class="keywordflow">while</span> (<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno"> 1461</span>    <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno"> 1462</span>  top = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>;</div>
<div class="line"><span class="lineno"> 1463</span>  <span class="keywordflow">while</span> (!<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>)</div>
<div class="line"><span class="lineno"> 1464</span>    <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno"> 1465</span>  e_cur = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>;</div>
<div class="line"><span class="lineno"> 1466</span>  minmsgno = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a>;</div>
<div class="line"><span class="lineno"> 1467</span> </div>
<div class="line"><span class="lineno"> 1468</span>  <span class="keywordflow">if</span> (!e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a1b48457d5e16b021ada7d227b689f516">visible</a>)</div>
<div class="line"><span class="lineno"> 1469</span>  {</div>
<div class="line"><span class="lineno"> 1470</span>    <span class="keywordflow">if</span> (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a>)</div>
<div class="line"><span class="lineno"> 1471</span>      old_mail = 2;</div>
<div class="line"><span class="lineno"> 1472</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1473</span>      new_mail = 1;</div>
<div class="line"><span class="lineno"> 1474</span>    <span class="keywordflow">if</span> (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a> &lt; min_unread_msgno)</div>
<div class="line"><span class="lineno"> 1475</span>    {</div>
<div class="line"><span class="lineno"> 1476</span>      min_unread = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1477</span>      min_unread_msgno = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a>;</div>
<div class="line"><span class="lineno"> 1478</span>    }</div>
<div class="line"><span class="lineno"> 1479</span>  }</div>
<div class="line"><span class="lineno"> 1480</span> </div>
<div class="line"><span class="lineno"> 1481</span>  <span class="keywordflow">if</span> (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a> &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a1b48457d5e16b021ada7d227b689f516">visible</a>)</div>
<div class="line"><span class="lineno"> 1482</span>    <a class="code hl_variable" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1483</span> </div>
<div class="line"><span class="lineno"> 1484</span>  <span class="keywordflow">if</span> ((e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a> == -1) &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a1b48457d5e16b021ada7d227b689f516">visible</a>)</div>
<div class="line"><span class="lineno"> 1485</span>    <a class="code hl_variable" href="structEmail.html#a71f1e37390a5400b182e0724c1f61769">num_hidden</a>++;</div>
<div class="line"><span class="lineno"> 1486</span> </div>
<div class="line"><span class="lineno"> 1487</span>  <span class="keywordflow">if</span> (flag &amp; (<a class="code hl_define" href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a> | <a class="code hl_define" href="mutt__thread_8h.html#a9b9da255ba8ce2770efec5c8d0135a25">MUTT_THREAD_UNCOLLAPSE</a>))</div>
<div class="line"><span class="lineno"> 1488</span>  {</div>
<div class="line"><span class="lineno"> 1489</span>    e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a9c8537c9a4c56818c3c79cf649f50cc7">attr_color</a> = NULL; <span class="comment">/* force index entry&#39;s color to be re-evaluated */</span></div>
<div class="line"><span class="lineno"> 1490</span>    e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a511f080349cca94d2e3dd531f76351ee">collapsed</a> = flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a>;</div>
<div class="line"><span class="lineno"> 1491</span>    <span class="keywordflow">if</span> (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a> != -1)</div>
<div class="line"><span class="lineno"> 1492</span>    {</div>
<div class="line"><span class="lineno"> 1493</span>      e_root = e_cur;</div>
<div class="line"><span class="lineno"> 1494</span>      <span class="keywordflow">if</span> (flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a>)</div>
<div class="line"><span class="lineno"> 1495</span>        <span class="keyword">final</span> = e_root-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1496</span>    }</div>
<div class="line"><span class="lineno"> 1497</span>  }</div>
<div class="line"><span class="lineno"> 1498</span> </div>
<div class="line"><span class="lineno"> 1499</span>  <span class="keywordflow">if</span> ((<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> == top) &amp;&amp; !(<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>))</div>
<div class="line"><span class="lineno"> 1500</span>  {</div>
<div class="line"><span class="lineno"> 1501</span>    <span class="comment">/* return value depends on action requested */</span></div>
<div class="line"><span class="lineno"> 1502</span>    <span class="keywordflow">if</span> (flag &amp; (<a class="code hl_define" href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a> | <a class="code hl_define" href="mutt__thread_8h.html#a9b9da255ba8ce2770efec5c8d0135a25">MUTT_THREAD_UNCOLLAPSE</a>))</div>
<div class="line"><span class="lineno"> 1503</span>    {</div>
<div class="line"><span class="lineno"> 1504</span>      e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a71f1e37390a5400b182e0724c1f61769">num_hidden</a> = <a class="code hl_variable" href="structEmail.html#a71f1e37390a5400b182e0724c1f61769">num_hidden</a>;</div>
<div class="line"><span class="lineno"> 1505</span>      <span class="keywordflow">return</span> <span class="keyword">final</span>;</div>
<div class="line"><span class="lineno"> 1506</span>    }</div>
<div class="line"><span class="lineno"> 1507</span>    <span class="keywordflow">if</span> (flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#a090c2765b566eca8e7a627a6c2f5fbbb">MUTT_THREAD_UNREAD</a>)</div>
<div class="line"><span class="lineno"> 1508</span>      <span class="keywordflow">return</span> (old_mail &amp;&amp; new_mail) ? new_mail : (old_mail ? old_mail : new_mail);</div>
<div class="line"><span class="lineno"> 1509</span>    <span class="keywordflow">if</span> (flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#aa7fd1a156da623691ef4457793752f15">MUTT_THREAD_NEXT_UNREAD</a>)</div>
<div class="line"><span class="lineno"> 1510</span>      <span class="keywordflow">return</span> min_unread;</div>
<div class="line"><span class="lineno"> 1511</span>    <span class="keywordflow">if</span> (flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#ae0b1f2b690a2e8cfe4d759a30c046207">MUTT_THREAD_FLAGGED</a>)</div>
<div class="line"><span class="lineno"> 1512</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a>;</div>
<div class="line"><span class="lineno"> 1513</span>  }</div>
<div class="line"><span class="lineno"> 1514</span> </div>
<div class="line"><span class="lineno"> 1515</span>  <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno"> 1516</span>  {</div>
<div class="line"><span class="lineno"> 1517</span>    e_cur = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>;</div>
<div class="line"><span class="lineno"> 1518</span> </div>
<div class="line"><span class="lineno"> 1519</span>    <span class="keywordflow">if</span> (e_cur)</div>
<div class="line"><span class="lineno"> 1520</span>    {</div>
<div class="line"><span class="lineno"> 1521</span>      <span class="keywordflow">if</span> (flag &amp; (<a class="code hl_define" href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a> | <a class="code hl_define" href="mutt__thread_8h.html#a9b9da255ba8ce2770efec5c8d0135a25">MUTT_THREAD_UNCOLLAPSE</a>))</div>
<div class="line"><span class="lineno"> 1522</span>      {</div>
<div class="line"><span class="lineno"> 1523</span>        e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a9c8537c9a4c56818c3c79cf649f50cc7">attr_color</a> = NULL; <span class="comment">/* force index entry&#39;s color to be re-evaluated */</span></div>
<div class="line"><span class="lineno"> 1524</span>        e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a511f080349cca94d2e3dd531f76351ee">collapsed</a> = flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a>;</div>
<div class="line"><span class="lineno"> 1525</span>        <span class="keywordflow">if</span> (!e_root &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a1b48457d5e16b021ada7d227b689f516">visible</a>)</div>
<div class="line"><span class="lineno"> 1526</span>        {</div>
<div class="line"><span class="lineno"> 1527</span>          e_root = e_cur;</div>
<div class="line"><span class="lineno"> 1528</span>          <span class="keywordflow">if</span> (flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a>)</div>
<div class="line"><span class="lineno"> 1529</span>            <span class="keyword">final</span> = e_root-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1530</span>        }</div>
<div class="line"><span class="lineno"> 1531</span> </div>
<div class="line"><span class="lineno"> 1532</span>        <span class="keywordflow">if</span> (reverse &amp;&amp; (flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1533</span>            (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a> &lt; minmsgno) &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a1b48457d5e16b021ada7d227b689f516">visible</a>)</div>
<div class="line"><span class="lineno"> 1534</span>        {</div>
<div class="line"><span class="lineno"> 1535</span>          minmsgno = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a>;</div>
<div class="line"><span class="lineno"> 1536</span>          <span class="keyword">final</span> = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1537</span>        }</div>
<div class="line"><span class="lineno"> 1538</span> </div>
<div class="line"><span class="lineno"> 1539</span>        <span class="keywordflow">if</span> (flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a>)</div>
<div class="line"><span class="lineno"> 1540</span>        {</div>
<div class="line"><span class="lineno"> 1541</span>          <span class="keywordflow">if</span> (e_cur != e_root)</div>
<div class="line"><span class="lineno"> 1542</span>            e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a> = -1;</div>
<div class="line"><span class="lineno"> 1543</span>        }</div>
<div class="line"><span class="lineno"> 1544</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1545</span>        {</div>
<div class="line"><span class="lineno"> 1546</span>          <span class="keywordflow">if</span> (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a1b48457d5e16b021ada7d227b689f516">visible</a>)</div>
<div class="line"><span class="lineno"> 1547</span>            e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a> = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a>;</div>
<div class="line"><span class="lineno"> 1548</span>        }</div>
<div class="line"><span class="lineno"> 1549</span>      }</div>
<div class="line"><span class="lineno"> 1550</span> </div>
<div class="line"><span class="lineno"> 1551</span>      <span class="keywordflow">if</span> (!e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a1b48457d5e16b021ada7d227b689f516">visible</a>)</div>
<div class="line"><span class="lineno"> 1552</span>      {</div>
<div class="line"><span class="lineno"> 1553</span>        <span class="keywordflow">if</span> (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a>)</div>
<div class="line"><span class="lineno"> 1554</span>          old_mail = 2;</div>
<div class="line"><span class="lineno"> 1555</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1556</span>          new_mail = 1;</div>
<div class="line"><span class="lineno"> 1557</span>        <span class="keywordflow">if</span> (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a> &lt; min_unread_msgno)</div>
<div class="line"><span class="lineno"> 1558</span>        {</div>
<div class="line"><span class="lineno"> 1559</span>          min_unread = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a>;</div>
<div class="line"><span class="lineno"> 1560</span>          min_unread_msgno = e_cur-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a>;</div>
<div class="line"><span class="lineno"> 1561</span>        }</div>
<div class="line"><span class="lineno"> 1562</span>      }</div>
<div class="line"><span class="lineno"> 1563</span> </div>
<div class="line"><span class="lineno"> 1564</span>      <span class="keywordflow">if</span> (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a> &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a1b48457d5e16b021ada7d227b689f516">visible</a>)</div>
<div class="line"><span class="lineno"> 1565</span>        <a class="code hl_variable" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1566</span> </div>
<div class="line"><span class="lineno"> 1567</span>      <span class="keywordflow">if</span> ((e_cur-&gt;<a class="code hl_variable" href="structEmail.html#aa5e274ea0f8ce3482f226752fcccad12">vnum</a> == -1) &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a1b48457d5e16b021ada7d227b689f516">visible</a>)</div>
<div class="line"><span class="lineno"> 1568</span>        <a class="code hl_variable" href="structEmail.html#a71f1e37390a5400b182e0724c1f61769">num_hidden</a>++;</div>
<div class="line"><span class="lineno"> 1569</span>    }</div>
<div class="line"><span class="lineno"> 1570</span> </div>
<div class="line"><span class="lineno"> 1571</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>)</div>
<div class="line"><span class="lineno"> 1572</span>    {</div>
<div class="line"><span class="lineno"> 1573</span>      <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno"> 1574</span>    }</div>
<div class="line"><span class="lineno"> 1575</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno"> 1576</span>    {</div>
<div class="line"><span class="lineno"> 1577</span>      <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno"> 1578</span>    }</div>
<div class="line"><span class="lineno"> 1579</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1580</span>    {</div>
<div class="line"><span class="lineno"> 1581</span>      <span class="keywordtype">bool</span> done = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1582</span>      <span class="keywordflow">while</span> (!<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno"> 1583</span>      {</div>
<div class="line"><span class="lineno"> 1584</span>        <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno"> 1585</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> == top)</div>
<div class="line"><span class="lineno"> 1586</span>        {</div>
<div class="line"><span class="lineno"> 1587</span>          done = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1588</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1589</span>        }</div>
<div class="line"><span class="lineno"> 1590</span>      }</div>
<div class="line"><span class="lineno"> 1591</span>      <span class="keywordflow">if</span> (done)</div>
<div class="line"><span class="lineno"> 1592</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1593</span>      <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno"> 1594</span>    }</div>
<div class="line"><span class="lineno"> 1595</span>  }</div>
<div class="line"><span class="lineno"> 1596</span> </div>
<div class="line"><span class="lineno"> 1597</span>  <span class="comment">/* re-traverse the thread and store num_hidden in all headers, with or</span></div>
<div class="line"><span class="lineno"> 1598</span><span class="comment">   * without a virtual index.  this will allow ~v to match all collapsed</span></div>
<div class="line"><span class="lineno"> 1599</span><span class="comment">   * messages when switching sort order to non-threaded.  */</span></div>
<div class="line"><span class="lineno"> 1600</span>  <span class="keywordflow">if</span> (flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a>)</div>
<div class="line"><span class="lineno"> 1601</span>  {</div>
<div class="line"><span class="lineno"> 1602</span>    <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = top;</div>
<div class="line"><span class="lineno"> 1603</span>    <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno"> 1604</span>    {</div>
<div class="line"><span class="lineno"> 1605</span>      e_cur = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>;</div>
<div class="line"><span class="lineno"> 1606</span>      <span class="keywordflow">if</span> (e_cur)</div>
<div class="line"><span class="lineno"> 1607</span>        e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a71f1e37390a5400b182e0724c1f61769">num_hidden</a> = <a class="code hl_variable" href="structEmail.html#a71f1e37390a5400b182e0724c1f61769">num_hidden</a> + 1;</div>
<div class="line"><span class="lineno"> 1608</span> </div>
<div class="line"><span class="lineno"> 1609</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>)</div>
<div class="line"><span class="lineno"> 1610</span>      {</div>
<div class="line"><span class="lineno"> 1611</span>        <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno"> 1612</span>      }</div>
<div class="line"><span class="lineno"> 1613</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno"> 1614</span>      {</div>
<div class="line"><span class="lineno"> 1615</span>        <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno"> 1616</span>      }</div>
<div class="line"><span class="lineno"> 1617</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1618</span>      {</div>
<div class="line"><span class="lineno"> 1619</span>        <span class="keywordtype">bool</span> done = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1620</span>        <span class="keywordflow">while</span> (!<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>)</div>
<div class="line"><span class="lineno"> 1621</span>        {</div>
<div class="line"><span class="lineno"> 1622</span>          <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno"> 1623</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> == top)</div>
<div class="line"><span class="lineno"> 1624</span>          {</div>
<div class="line"><span class="lineno"> 1625</span>            done = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1626</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1627</span>          }</div>
<div class="line"><span class="lineno"> 1628</span>        }</div>
<div class="line"><span class="lineno"> 1629</span>        <span class="keywordflow">if</span> (done)</div>
<div class="line"><span class="lineno"> 1630</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1631</span>        <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno"> 1632</span>      }</div>
<div class="line"><span class="lineno"> 1633</span>    }</div>
<div class="line"><span class="lineno"> 1634</span>  }</div>
<div class="line"><span class="lineno"> 1635</span> </div>
<div class="line"><span class="lineno"> 1636</span>  <span class="comment">/* return value depends on action requested */</span></div>
<div class="line"><span class="lineno"> 1637</span>  <span class="keywordflow">if</span> (flag &amp; (<a class="code hl_define" href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a> | <a class="code hl_define" href="mutt__thread_8h.html#a9b9da255ba8ce2770efec5c8d0135a25">MUTT_THREAD_UNCOLLAPSE</a>))</div>
<div class="line"><span class="lineno"> 1638</span>    <span class="keywordflow">return</span> <span class="keyword">final</span>;</div>
<div class="line"><span class="lineno"> 1639</span>  <span class="keywordflow">if</span> (flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#a090c2765b566eca8e7a627a6c2f5fbbb">MUTT_THREAD_UNREAD</a>)</div>
<div class="line"><span class="lineno"> 1640</span>    <span class="keywordflow">return</span> (old_mail &amp;&amp; new_mail) ? new_mail : (old_mail ? old_mail : new_mail);</div>
<div class="line"><span class="lineno"> 1641</span>  <span class="keywordflow">if</span> (flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#aa7fd1a156da623691ef4457793752f15">MUTT_THREAD_NEXT_UNREAD</a>)</div>
<div class="line"><span class="lineno"> 1642</span>    <span class="keywordflow">return</span> min_unread;</div>
<div class="line"><span class="lineno"> 1643</span>  <span class="keywordflow">if</span> (flag &amp; <a class="code hl_define" href="mutt__thread_8h.html#ae0b1f2b690a2e8cfe4d759a30c046207">MUTT_THREAD_FLAGGED</a>)</div>
<div class="line"><span class="lineno"> 1644</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a>;</div>
<div class="line"><span class="lineno"> 1645</span> </div>
<div class="line"><span class="lineno"> 1646</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1647</span>}</div>
<div class="ttc" id="amutt__thread_8h_html_a090c2765b566eca8e7a627a6c2f5fbbb"><div class="ttname"><a href="mutt__thread_8h.html#a090c2765b566eca8e7a627a6c2f5fbbb">MUTT_THREAD_UNREAD</a></div><div class="ttdeci">#define MUTT_THREAD_UNREAD</div><div class="ttdoc">Count unread emails in a thread.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00079">mutt_thread.h:79</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_a9b9da255ba8ce2770efec5c8d0135a25"><div class="ttname"><a href="mutt__thread_8h.html#a9b9da255ba8ce2770efec5c8d0135a25">MUTT_THREAD_UNCOLLAPSE</a></div><div class="ttdeci">#define MUTT_THREAD_UNCOLLAPSE</div><div class="ttdoc">Uncollapse an email thread.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00078">mutt_thread.h:78</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_aa7fd1a156da623691ef4457793752f15"><div class="ttname"><a href="mutt__thread_8h.html#aa7fd1a156da623691ef4457793752f15">MUTT_THREAD_NEXT_UNREAD</a></div><div class="ttdeci">#define MUTT_THREAD_NEXT_UNREAD</div><div class="ttdoc">Find the next unread email.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00080">mutt_thread.h:80</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_ab40a63660eea2761a07f1c1d822ed543"><div class="ttname"><a href="mutt__thread_8h.html#ab40a63660eea2761a07f1c1d822ed543">MUTT_THREAD_COLLAPSE</a></div><div class="ttdeci">#define MUTT_THREAD_COLLAPSE</div><div class="ttdoc">Collapse an email thread.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00077">mutt_thread.h:77</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_ae0b1f2b690a2e8cfe4d759a30c046207"><div class="ttname"><a href="mutt__thread_8h.html#ae0b1f2b690a2e8cfe4d759a30c046207">MUTT_THREAD_FLAGGED</a></div><div class="ttdeci">#define MUTT_THREAD_FLAGGED</div><div class="ttdoc">Count flagged emails in a thread.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00081">mutt_thread.h:81</a></div></div>
<div class="ttc" id="astructEmail_html_a0bd79550be901d44e50953fb43614e10"><div class="ttname"><a href="structEmail.html#a0bd79550be901d44e50953fb43614e10">Email::read</a></div><div class="ttdeci">bool read</div><div class="ttdoc">Email is read.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00050">email.h:50</a></div></div>
<div class="ttc" id="astructEmail_html_a6d9062408a8c89b19cf25584dd2ffb57"><div class="ttname"><a href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">Email::old</a></div><div class="ttdeci">bool old</div><div class="ttdoc">Email is seen, but unread.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00049">email.h:49</a></div></div>
<div class="ttc" id="astructEmail_html_a71f1e37390a5400b182e0724c1f61769"><div class="ttname"><a href="structEmail.html#a71f1e37390a5400b182e0724c1f61769">Email::num_hidden</a></div><div class="ttdeci">size_t num_hidden</div><div class="ttdoc">Number of hidden messages in this view (only valid when collapsed is set)</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00123">email.h:123</a></div></div>
<div class="ttc" id="astructEmail_html_a8e810bc67ce7fea04bfe8a3739093d78"><div class="ttname"><a href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">Email::flagged</a></div><div class="ttdeci">bool flagged</div><div class="ttdoc">Marked important?</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00047">email.h:47</a></div></div>
<div class="ttc" id="astructEmail_html_a9c8537c9a4c56818c3c79cf649f50cc7"><div class="ttname"><a href="structEmail.html#a9c8537c9a4c56818c3c79cf649f50cc7">Email::attr_color</a></div><div class="ttdeci">const struct AttrColor * attr_color</div><div class="ttdoc">Color-pair to use when displaying in the index.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00112">email.h:112</a></div></div>
<div class="ttc" id="astructEmail_html_abd3d551204f4ea232a304c1c4c4c149d"><div class="ttname"><a href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">Email::msgno</a></div><div class="ttdeci">int msgno</div><div class="ttdoc">Number displayed to the user.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00111">email.h:111</a></div></div>
</div><!-- fragment --><div id="dynsection-38" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a249d2b866bc0b7a8ef5c4954fd4c33b0_cgraph.svg" width="348" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7ea1d8cc762023c88ee9152f9d0a7ce0" name="a7ea1d8cc762023c88ee9152f9d0a7ce0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ea1d8cc762023c88ee9152f9d0a7ce0">&#9670;&#160;</a></span>mutt_messages_in_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_messages_in_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="mutt__thread_8h.html#a7fd1879ba8179c12165019a4f005e1f4">MessageInThread</a></td>          <td class="paramname"><span class="paramname"><em>mit</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Count the messages in a thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">mit</td><td>Flag, e.g. <a class="el" href="mutt__thread_8h.html#a7fd1879ba8179c12165019a4f005e1f4a4f4aff892a97ab76ab1d1448a4145a49" title="How many messages are in the thread.">MIT_NUM_MESSAGES</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Number of message / Our position </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01656">1656</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1657</span>{</div>
<div class="line"><span class="lineno"> 1658</span>  <span class="keywordflow">if</span> (!m || !e)</div>
<div class="line"><span class="lineno"> 1659</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1660</span> </div>
<div class="line"><span class="lineno"> 1661</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *threads[2];</div>
<div class="line"><span class="lineno"> 1662</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno"> 1663</span> </div>
<div class="line"><span class="lineno"> 1664</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6">UseThreads</a> threaded = <a class="code hl_function" href="#aa7ffe096f2973f3d0cd486f8e8b4228b">mutt_thread_style</a>();</div>
<div class="line"><span class="lineno"> 1665</span>  <span class="keywordflow">if</span> ((threaded == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935">UT_FLAT</a>) || !e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>)</div>
<div class="line"><span class="lineno"> 1666</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1667</span> </div>
<div class="line"><span class="lineno"> 1668</span>  threads[0] = e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>;</div>
<div class="line"><span class="lineno"> 1669</span>  <span class="keywordflow">while</span> (threads[0]-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>)</div>
<div class="line"><span class="lineno"> 1670</span>    threads[0] = threads[0]-&gt;<a class="code hl_variable" href="structMuttThread.html#a39d5bb1957cb943617225ff5efb9f55c">parent</a>;</div>
<div class="line"><span class="lineno"> 1671</span> </div>
<div class="line"><span class="lineno"> 1672</span>  threads[1] = (mit == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a7fd1879ba8179c12165019a4f005e1f4a6d32c349dacb6fbee74cfff06dd3b621">MIT_POSITION</a>) ? e-&gt;<a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a> : threads[0]-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno"> 1673</span> </div>
<div class="line"><span class="lineno"> 1674</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (((mit == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a7fd1879ba8179c12165019a4f005e1f4a6d32c349dacb6fbee74cfff06dd3b621">MIT_POSITION</a>) || !threads[1]) ? 1 : 2); i++)</div>
<div class="line"><span class="lineno"> 1675</span>  {</div>
<div class="line"><span class="lineno"> 1676</span>    <span class="keywordflow">while</span> (!threads[i]-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>)</div>
<div class="line"><span class="lineno"> 1677</span>      threads[i] = threads[i]-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno"> 1678</span>  }</div>
<div class="line"><span class="lineno"> 1679</span> </div>
<div class="line"><span class="lineno"> 1680</span>  <span class="keywordflow">if</span> (threaded == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef">UT_REVERSE</a>)</div>
<div class="line"><span class="lineno"> 1681</span>  {</div>
<div class="line"><span class="lineno"> 1682</span>    rc = threads[0]-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a> - (threads[1] ? threads[1]-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a> : -1);</div>
<div class="line"><span class="lineno"> 1683</span>  }</div>
<div class="line"><span class="lineno"> 1684</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1685</span>  {</div>
<div class="line"><span class="lineno"> 1686</span>    rc = (threads[1] ? threads[1]-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a> : m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>) -</div>
<div class="line"><span class="lineno"> 1687</span>         threads[0]-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>-&gt;<a class="code hl_variable" href="structEmail.html#abd3d551204f4ea232a304c1c4c4c149d">msgno</a>;</div>
<div class="line"><span class="lineno"> 1688</span>  }</div>
<div class="line"><span class="lineno"> 1689</span> </div>
<div class="line"><span class="lineno"> 1690</span>  <span class="keywordflow">if</span> (mit == <a class="code hl_enumvalue" href="mutt__thread_8h.html#a7fd1879ba8179c12165019a4f005e1f4a6d32c349dacb6fbee74cfff06dd3b621">MIT_POSITION</a>)</div>
<div class="line"><span class="lineno"> 1691</span>    rc += 1;</div>
<div class="line"><span class="lineno"> 1692</span> </div>
<div class="line"><span class="lineno"> 1693</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1694</span>}</div>
<div class="ttc" id="amutt__thread_8h_html_a7fd1879ba8179c12165019a4f005e1f4a6d32c349dacb6fbee74cfff06dd3b621"><div class="ttname"><a href="mutt__thread_8h.html#a7fd1879ba8179c12165019a4f005e1f4a6d32c349dacb6fbee74cfff06dd3b621">MIT_POSITION</a></div><div class="ttdeci">@ MIT_POSITION</div><div class="ttdoc">Our position in the thread.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00089">mutt_thread.h:89</a></div></div>
</div><!-- fragment --><div id="dynsection-39" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a7ea1d8cc762023c88ee9152f9d0a7ce0_cgraph.svg" width="375" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-40" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-40-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-40-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-40-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a7ea1d8cc762023c88ee9152f9d0a7ce0_icgraph.svg" width="399" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae8501253bd895f865daea90b51817425" name="ae8501253bd895f865daea90b51817425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8501253bd895f865daea90b51817425">&#9670;&#160;</a></span>mutt_make_id_hash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structHashTable.html">HashTable</a> * mutt_make_id_hash </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a Hash Table for message-ids. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Newly allocated Hash Table </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01701">1701</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1702</span>{</div>
<div class="line"><span class="lineno"> 1703</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structHashTable.html">HashTable</a> *hash = <a class="code hl_function" href="hash_8c.html#a75439958fb5faf57c039faec79d19998">mutt_hash_new</a>(m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> * 2, <a class="code hl_define" href="hash_8h.html#a091c40218093334e24d80f897e76a977">MUTT_HASH_NO_FLAGS</a>);</div>
<div class="line"><span class="lineno"> 1704</span> </div>
<div class="line"><span class="lineno"> 1705</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno"> 1706</span>  {</div>
<div class="line"><span class="lineno"> 1707</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div>
<div class="line"><span class="lineno"> 1708</span>    <span class="keywordflow">if</span> (!e || !e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>)</div>
<div class="line"><span class="lineno"> 1709</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1710</span> </div>
<div class="line"><span class="lineno"> 1711</span>    <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>)</div>
<div class="line"><span class="lineno"> 1712</span>      <a class="code hl_function" href="hash_8c.html#a10bd305a8183db9829caee9ea1bac2f5">mutt_hash_insert</a>(hash, e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>, e);</div>
<div class="line"><span class="lineno"> 1713</span>  }</div>
<div class="line"><span class="lineno"> 1714</span> </div>
<div class="line"><span class="lineno"> 1715</span>  <span class="keywordflow">return</span> hash;</div>
<div class="line"><span class="lineno"> 1716</span>}</div>
<div class="ttc" id="ahash_8h_html_a091c40218093334e24d80f897e76a977"><div class="ttname"><a href="hash_8h.html#a091c40218093334e24d80f897e76a977">MUTT_HASH_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_HASH_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="hash_8h_source.html#l00111">hash.h:111</a></div></div>
</div><!-- fragment --><div id="dynsection-41" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-41-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-41-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-41-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_ae8501253bd895f865daea90b51817425_cgraph.svg" width="331" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-42" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-42-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-42-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-42-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_ae8501253bd895f865daea90b51817425_icgraph.svg" width="354" height="254"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aeb0f13585d6ee005d688ac2579fb53a9" name="aeb0f13585d6ee005d688ac2579fb53a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb0f13585d6ee005d688ac2579fb53a9">&#9670;&#160;</a></span>link_threads()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool link_threads </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>parent</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>child</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Forcibly link messages together. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>Parent <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">child</td><td>Child <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>On success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01725">1725</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1726</span>{</div>
<div class="line"><span class="lineno"> 1727</span>  <span class="keywordflow">if</span> (child == parent)</div>
<div class="line"><span class="lineno"> 1728</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1729</span> </div>
<div class="line"><span class="lineno"> 1730</span>  <a class="code hl_function" href="thread_8c.html#a8d7767d330784742799077faac576edb">mutt_break_thread</a>(child);</div>
<div class="line"><span class="lineno"> 1731</span>  <a class="code hl_function" href="list_8c.html#a5a575610af3a8c6f267924b46c95b059">mutt_list_insert_head</a>(&amp;child-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a9ae6d450b2f012c37d3350f4305fbb90">in_reply_to</a>, <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(parent-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>));</div>
<div class="line"><span class="lineno"> 1732</span>  <a class="code hl_function" href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a>(m, child, <a class="code hl_enumvalue" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a919d368fd60d2e1c19d331b78f415f3e">MUTT_TAG</a>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1733</span> </div>
<div class="line"><span class="lineno"> 1734</span>  child-&gt;<a class="code hl_variable" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1735</span>  child-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a3e2b8b426bb895a4817f9bebff11bbcc">changed</a> |= <a class="code hl_define" href="envelope_8h.html#ad132057541e708c0948e130d4dc1d19c">MUTT_ENV_CHANGED_IRT</a>;</div>
<div class="line"><span class="lineno"> 1736</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1737</span>}</div>
<div class="ttc" id="aenvelope_8h_html_ad132057541e708c0948e130d4dc1d19c"><div class="ttname"><a href="envelope_8h.html#ad132057541e708c0948e130d4dc1d19c">MUTT_ENV_CHANGED_IRT</a></div><div class="ttdeci">#define MUTT_ENV_CHANGED_IRT</div><div class="ttdoc">In-Reply-To changed to link/break threads.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00034">envelope.h:34</a></div></div>
<div class="ttc" id="aflags_8c_html_a29547b9c7c39eb22039ff4b8f1c03829"><div class="ttname"><a href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a></div><div class="ttdeci">void mutt_set_flag(struct Mailbox *m, struct Email *e, enum MessageType flag, bool bf, bool upd_mbox)</div><div class="ttdoc">Set a flag on an email.</div><div class="ttdef"><b>Definition</b> <a href="flags_8c_source.html#l00056">flags.c:56</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a3fe33d90e4814281cd57de048119c950"><div class="ttname"><a href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a></div><div class="ttdeci">char * mutt_str_dup(const char *str)</div><div class="ttdoc">Copy a string, safely.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00257">string.c:257</a></div></div>
<div class="ttc" id="amutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a919d368fd60d2e1c19d331b78f415f3e"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a919d368fd60d2e1c19d331b78f415f3e">MUTT_TAG</a></div><div class="ttdeci">@ MUTT_TAG</div><div class="ttdoc">Tagged messages.</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00080">mutt.h:80</a></div></div>
<div class="ttc" id="astructEmail_html_a8b1e186b9d388e199ba9c6239c612627"><div class="ttname"><a href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">Email::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Email has been edited.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00077">email.h:77</a></div></div>
<div class="ttc" id="astructEnvelope_html_a3e2b8b426bb895a4817f9bebff11bbcc"><div class="ttname"><a href="structEnvelope.html#a3e2b8b426bb895a4817f9bebff11bbcc">Envelope::changed</a></div><div class="ttdeci">unsigned char changed</div><div class="ttdoc">Changed fields, e.g. MUTT_ENV_CHANGED_SUBJECT.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00090">envelope.h:90</a></div></div>
<div class="ttc" id="athread_8c_html_a8d7767d330784742799077faac576edb"><div class="ttname"><a href="thread_8c.html#a8d7767d330784742799077faac576edb">mutt_break_thread</a></div><div class="ttdeci">void mutt_break_thread(struct Email *e)</div><div class="ttdoc">Break the email Thread.</div><div class="ttdef"><b>Definition</b> <a href="thread_8c_source.html#l00229">thread.c:229</a></div></div>
</div><!-- fragment --><div id="dynsection-43" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-43-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-43-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-43-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_aeb0f13585d6ee005d688ac2579fb53a9_cgraph.svg" width="308" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-44" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-44-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-44-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-44-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_aeb0f13585d6ee005d688ac2579fb53a9_icgraph.svg" width="286" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6414f40cab1603a6cdb8e6c91a6c3c84" name="a6414f40cab1603a6cdb8e6c91a6c3c84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6414f40cab1603a6cdb8e6c91a6c3c84">&#9670;&#160;</a></span>mutt_link_threads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_link_threads </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>parent</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct EmailArray *</td>          <td class="paramname"><span class="paramname"><em>children</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Forcibly link threads together. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>Parent <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">children</td><td>Array of children Emails </td></tr>
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>On success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01746">1746</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1747</span>{</div>
<div class="line"><span class="lineno"> 1748</span>  <span class="keywordflow">if</span> (!parent || !children || !m)</div>
<div class="line"><span class="lineno"> 1749</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1750</span> </div>
<div class="line"><span class="lineno"> 1751</span>  <span class="keywordtype">bool</span> changed = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1752</span> </div>
<div class="line"><span class="lineno"> 1753</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> **ep = NULL;</div>
<div class="line"><span class="lineno"> 1754</span>  <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(ep, children)</div>
<div class="line"><span class="lineno"> 1755</span>  {</div>
<div class="line"><span class="lineno"> 1756</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = *ep;</div>
<div class="line"><span class="lineno"> 1757</span>    <a class="code hl_variable" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a> |= <a class="code hl_function" href="#aeb0f13585d6ee005d688ac2579fb53a9">link_threads</a>(parent, e, m);</div>
<div class="line"><span class="lineno"> 1758</span>  }</div>
<div class="line"><span class="lineno"> 1759</span> </div>
<div class="line"><span class="lineno"> 1760</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a>;</div>
<div class="line"><span class="lineno"> 1761</span>}</div>
<div class="ttc" id="aarray_8h_html_a6b8ea5fb2f366d7716f5042b347093a6"><div class="ttname"><a href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a></div><div class="ttdeci">#define ARRAY_FOREACH(elem, head)</div><div class="ttdoc">Iterate over all elements of the array.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00214">array.h:214</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_aeb0f13585d6ee005d688ac2579fb53a9"><div class="ttname"><a href="#aeb0f13585d6ee005d688ac2579fb53a9">link_threads</a></div><div class="ttdeci">static bool link_threads(struct Email *parent, struct Email *child, struct Mailbox *m)</div><div class="ttdoc">Forcibly link messages together.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l01725">mutt_thread.c:1725</a></div></div>
</div><!-- fragment --><div id="dynsection-45" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-45-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-45-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-45-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a6414f40cab1603a6cdb8e6c91a6c3c84_cgraph.svg" width="286" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-46" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-46-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-46-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-46-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a6414f40cab1603a6cdb8e6c91a6c3c84_icgraph.svg" width="344" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4e0a2823d87a6353ff855ea5ea581342" name="a4e0a2823d87a6353ff855ea5ea581342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e0a2823d87a6353ff855ea5ea581342">&#9670;&#160;</a></span>mutt_thread_collapse_collapsed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_thread_collapse_collapsed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *</td>          <td class="paramname"><span class="paramname"><em>tctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Re-collapse threads marked as collapsed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tctx</td><td>Threading context </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01767">1767</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1768</span>{</div>
<div class="line"><span class="lineno"> 1769</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *thread = NULL;</div>
<div class="line"><span class="lineno"> 1770</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *top = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a>;</div>
<div class="line"><span class="lineno"> 1771</span>  <span class="keywordflow">while</span> ((thread = top))</div>
<div class="line"><span class="lineno"> 1772</span>  {</div>
<div class="line"><span class="lineno"> 1773</span>    <span class="keywordflow">while</span> (!thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>)</div>
<div class="line"><span class="lineno"> 1774</span>      thread = thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno"> 1775</span> </div>
<div class="line"><span class="lineno"> 1776</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>;</div>
<div class="line"><span class="lineno"> 1777</span>    <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a511f080349cca94d2e3dd531f76351ee">collapsed</a>)</div>
<div class="line"><span class="lineno"> 1778</span>      <a class="code hl_define" href="mutt__thread_8h.html#adf7b9bf7a6d119b7ead6e1c2683b8371">mutt_collapse_thread</a>(e);</div>
<div class="line"><span class="lineno"> 1779</span>    top = top-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno"> 1780</span>  }</div>
<div class="line"><span class="lineno"> 1781</span>}</div>
<div class="ttc" id="amutt__thread_8h_html_adf7b9bf7a6d119b7ead6e1c2683b8371"><div class="ttname"><a href="mutt__thread_8h.html#adf7b9bf7a6d119b7ead6e1c2683b8371">mutt_collapse_thread</a></div><div class="ttdeci">#define mutt_collapse_thread(e)</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00106">mutt_thread.h:106</a></div></div>
</div><!-- fragment --><div id="dynsection-47" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-47-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-47-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-47-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a4e0a2823d87a6353ff855ea5ea581342_icgraph.svg" width="352" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a344c76e215dd1974a684a6ed8d8e580f" name="a344c76e215dd1974a684a6ed8d8e580f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a344c76e215dd1974a684a6ed8d8e580f">&#9670;&#160;</a></span>mutt_thread_collapse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_thread_collapse </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structThreadsContext.html">ThreadsContext</a> *</td>          <td class="paramname"><span class="paramname"><em>tctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>collapse</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Toggle collapse. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tctx</td><td>Threading context </td></tr>
    <tr><td class="paramname">collapse</td><td>Collapse / uncollapse </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01788">1788</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1789</span>{</div>
<div class="line"><span class="lineno"> 1790</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *thread = NULL;</div>
<div class="line"><span class="lineno"> 1791</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttThread.html">MuttThread</a> *top = tctx-&gt;<a class="code hl_variable" href="structThreadsContext.html#a0c499ca77a266daf0af9c659fc41de9f">tree</a>;</div>
<div class="line"><span class="lineno"> 1792</span>  <span class="keywordflow">while</span> ((thread = top))</div>
<div class="line"><span class="lineno"> 1793</span>  {</div>
<div class="line"><span class="lineno"> 1794</span>    <span class="keywordflow">while</span> (!thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>)</div>
<div class="line"><span class="lineno"> 1795</span>      thread = thread-&gt;<a class="code hl_variable" href="structMuttThread.html#a7067492dadd86f81def9036474086211">child</a>;</div>
<div class="line"><span class="lineno"> 1796</span> </div>
<div class="line"><span class="lineno"> 1797</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = <a class="code hl_variable" href="structEmail.html#af7fd9d5febf878edc4b6965ec40f312e">thread</a>-&gt;<a class="code hl_variable" href="structMuttThread.html#a76cec751739177388526fb9ae65b7383">message</a>;</div>
<div class="line"><span class="lineno"> 1798</span> </div>
<div class="line"><span class="lineno"> 1799</span>    <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a511f080349cca94d2e3dd531f76351ee">collapsed</a> != collapse)</div>
<div class="line"><span class="lineno"> 1800</span>    {</div>
<div class="line"><span class="lineno"> 1801</span>      <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#a511f080349cca94d2e3dd531f76351ee">collapsed</a>)</div>
<div class="line"><span class="lineno"> 1802</span>        <a class="code hl_define" href="mutt__thread_8h.html#a6fd84fba7f90e5a429bcfe71126679cb">mutt_uncollapse_thread</a>(e);</div>
<div class="line"><span class="lineno"> 1803</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="#add8cf6c27de9c8ef451a521b535e6f60">mutt_thread_can_collapse</a>(e))</div>
<div class="line"><span class="lineno"> 1804</span>        <a class="code hl_define" href="mutt__thread_8h.html#adf7b9bf7a6d119b7ead6e1c2683b8371">mutt_collapse_thread</a>(e);</div>
<div class="line"><span class="lineno"> 1805</span>    }</div>
<div class="line"><span class="lineno"> 1806</span>    top = top-&gt;<a class="code hl_variable" href="structMuttThread.html#aee5a1652f34056b764d12844e15f4345">next</a>;</div>
<div class="line"><span class="lineno"> 1807</span>  }</div>
<div class="line"><span class="lineno"> 1808</span>}</div>
<div class="ttc" id="amutt__thread_8c_html_add8cf6c27de9c8ef451a521b535e6f60"><div class="ttname"><a href="#add8cf6c27de9c8ef451a521b535e6f60">mutt_thread_can_collapse</a></div><div class="ttdeci">bool mutt_thread_can_collapse(struct Email *e)</div><div class="ttdoc">Check whether a thread can be collapsed.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l01816">mutt_thread.c:1816</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_a6fd84fba7f90e5a429bcfe71126679cb"><div class="ttname"><a href="mutt__thread_8h.html#a6fd84fba7f90e5a429bcfe71126679cb">mutt_uncollapse_thread</a></div><div class="ttdeci">#define mutt_uncollapse_thread(e)</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00107">mutt_thread.h:107</a></div></div>
</div><!-- fragment --><div id="dynsection-48" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-48-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-48-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-48-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a344c76e215dd1974a684a6ed8d8e580f_cgraph.svg" width="392" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-49" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-49-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-49-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-49-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_a344c76e215dd1974a684a6ed8d8e580f_icgraph.svg" width="380" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="add8cf6c27de9c8ef451a521b535e6f60" name="add8cf6c27de9c8ef451a521b535e6f60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add8cf6c27de9c8ef451a521b535e6f60">&#9670;&#160;</a></span>mutt_thread_can_collapse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_thread_can_collapse </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether a thread can be collapsed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td>Head of the thread </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Can be collapsed </td></tr>
    <tr><td class="paramname">false</td><td>Cannot be collapsed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l01816">1816</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1817</span>{</div>
<div class="line"><span class="lineno"> 1818</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_collapse_flagged = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;collapse_flagged&quot;</span>);</div>
<div class="line"><span class="lineno"> 1819</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_collapse_unread = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;collapse_unread&quot;</span>);</div>
<div class="line"><span class="lineno"> 1820</span>  <span class="keywordflow">return</span> (c_collapse_unread || !<a class="code hl_define" href="mutt__thread_8h.html#ab24bca6a05e2a2ff5b79baff6f3d22c2">mutt_thread_contains_unread</a>(e)) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1821</span>         (c_collapse_flagged || !<a class="code hl_define" href="mutt__thread_8h.html#a1fc59e208b421c84cf02c848eb262f64">mutt_thread_contains_flagged</a>(e));</div>
<div class="line"><span class="lineno"> 1822</span>}</div>
<div class="ttc" id="amutt__thread_8h_html_a1fc59e208b421c84cf02c848eb262f64"><div class="ttname"><a href="mutt__thread_8h.html#a1fc59e208b421c84cf02c848eb262f64">mutt_thread_contains_flagged</a></div><div class="ttdeci">#define mutt_thread_contains_flagged(e)</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00109">mutt_thread.h:109</a></div></div>
<div class="ttc" id="amutt__thread_8h_html_ab24bca6a05e2a2ff5b79baff6f3d22c2"><div class="ttname"><a href="mutt__thread_8h.html#ab24bca6a05e2a2ff5b79baff6f3d22c2">mutt_thread_contains_unread</a></div><div class="ttdeci">#define mutt_thread_contains_unread(e)</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00108">mutt_thread.h:108</a></div></div>
</div><!-- fragment --><div id="dynsection-50" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-50-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-50-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-50-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_add8cf6c27de9c8ef451a521b535e6f60_cgraph.svg" width="352" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-51" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-51-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-51-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-51-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mutt__thread_8c_add8cf6c27de9c8ef451a521b535e6f60_icgraph.svg" width="552" height="119"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5c2a82bc1766950548a5d97a7dbd8d2a" name="a5c2a82bc1766950548a5d97a7dbd8d2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c2a82bc1766950548a5d97a7dbd8d2a">&#9670;&#160;</a></span>UseThreadsMethods</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structMapping.html">Mapping</a> UseThreadsMethods[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">  </div>
<div class="line">  { <span class="stringliteral">&quot;unset&quot;</span>,         <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a69e1ab6f934441ddba20025a3721de18">UT_UNSET</a> },</div>
<div class="line">  { <span class="stringliteral">&quot;flat&quot;</span>,          <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935">UT_FLAT</a> },</div>
<div class="line">  { <span class="stringliteral">&quot;threads&quot;</span>,       <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a7bfb9746c433e5df2aa2ac63688c31ee">UT_THREADS</a> },</div>
<div class="line">  { <span class="stringliteral">&quot;reverse&quot;</span>,       <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef">UT_REVERSE</a> },</div>
<div class="line">  </div>
<div class="line">  { <span class="stringliteral">&quot;no&quot;</span>,            <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935">UT_FLAT</a> },</div>
<div class="line">  { <span class="stringliteral">&quot;yes&quot;</span>,           <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a7bfb9746c433e5df2aa2ac63688c31ee">UT_THREADS</a> },</div>
<div class="line">  { NULL, 0 },</div>
<div class="line">  </div>
<div class="line">}</div>
<div class="ttc" id="amutt__thread_8h_html_a317428aabc925e6a974638673629ddd6a69e1ab6f934441ddba20025a3721de18"><div class="ttname"><a href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a69e1ab6f934441ddba20025a3721de18">UT_UNSET</a></div><div class="ttdeci">@ UT_UNSET</div><div class="ttdoc">Not yet set by user, stick to legacy semantics.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8h_source.html#l00097">mutt_thread.h:97</a></div></div>
</div><!-- fragment -->
<p>Choices for '$use_threads' for the index. </p>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00051">51</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   51</span>                                                  {</div>
<div class="line"><span class="lineno">   52</span>  <span class="comment">// clang-format off</span></div>
<div class="line"><span class="lineno">   53</span>  { <span class="stringliteral">&quot;unset&quot;</span>,         <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a69e1ab6f934441ddba20025a3721de18">UT_UNSET</a> },</div>
<div class="line"><span class="lineno">   54</span>  { <span class="stringliteral">&quot;flat&quot;</span>,          <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935">UT_FLAT</a> },</div>
<div class="line"><span class="lineno">   55</span>  { <span class="stringliteral">&quot;threads&quot;</span>,       <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a7bfb9746c433e5df2aa2ac63688c31ee">UT_THREADS</a> },</div>
<div class="line"><span class="lineno">   56</span>  { <span class="stringliteral">&quot;reverse&quot;</span>,       <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6ae067005ba82a03c5d5d8f5c2ef6a17ef">UT_REVERSE</a> },</div>
<div class="line"><span class="lineno">   57</span>  <span class="comment">// aliases</span></div>
<div class="line"><span class="lineno">   58</span>  { <span class="stringliteral">&quot;no&quot;</span>,            <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a0adb411bb3e8d03cc8e40ac83f869935">UT_FLAT</a> },</div>
<div class="line"><span class="lineno">   59</span>  { <span class="stringliteral">&quot;yes&quot;</span>,           <a class="code hl_enumvalue" href="mutt__thread_8h.html#a317428aabc925e6a974638673629ddd6a7bfb9746c433e5df2aa2ac63688c31ee">UT_THREADS</a> },</div>
<div class="line"><span class="lineno">   60</span>  { NULL, 0 },</div>
<div class="line"><span class="lineno">   61</span>  <span class="comment">// clang-format on</span></div>
<div class="line"><span class="lineno">   62</span>};</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad0da49fbb8f920960daef313c3fc7ee2" name="ad0da49fbb8f920960daef313c3fc7ee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0da49fbb8f920960daef313c3fc7ee2">&#9670;&#160;</a></span>UseThreadsTypeDef</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structEnumDef.html">EnumDef</a> UseThreadsTypeDef</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">  <span class="stringliteral">&quot;use_threads_type&quot;</span>,</div>
<div class="line">  4,</div>
<div class="line">  (<span class="keyword">struct </span><a class="code hl_struct" href="structMapping.html">Mapping</a> *) &amp;<a class="code hl_variable" href="#a5c2a82bc1766950548a5d97a7dbd8d2a">UseThreadsMethods</a>,</div>
<div class="line">}</div>
<div class="ttc" id="astructMapping_html"><div class="ttname"><a href="structMapping.html">Mapping</a></div><div class="ttdoc">Mapping between user-readable string and a constant.</div><div class="ttdef"><b>Definition</b> <a href="mapping_8h_source.html#l00032">mapping.h:33</a></div></div>
</div><!-- fragment -->
<p>Data for the $use_threads enumeration. </p>

<p class="definition">Definition at line <a class="el" href="mutt__thread_8c_source.html#l00065">65</a> of file <a class="el" href="mutt__thread_8c_source.html">mutt_thread.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span>                                         {</div>
<div class="line"><span class="lineno">   66</span>  <span class="stringliteral">&quot;use_threads_type&quot;</span>,</div>
<div class="line"><span class="lineno">   67</span>  4,</div>
<div class="line"><span class="lineno">   68</span>  (<span class="keyword">struct </span><a class="code hl_struct" href="structMapping.html">Mapping</a> *) &amp;<a class="code hl_variable" href="#a5c2a82bc1766950548a5d97a7dbd8d2a">UseThreadsMethods</a>,</div>
<div class="line"><span class="lineno">   69</span>};</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
