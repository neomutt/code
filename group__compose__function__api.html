<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: Compose Function API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2025-12-11-58-g09398d</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__compose__function__api.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Compose Function API<div class="ingroups"><a class="el" href="group__dispatcher__api.html">Function Dispatcher API</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Prototype for a Compose Function.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Compose Function API:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api.svg" width="388" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6e4dd1dccc295ca353152b159a8ac2f1" id="r_ga6e4dd1dccc295ca353152b159a8ac2f1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6e4dd1dccc295ca353152b159a8ac2f1">op_attachment_attach_file</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga6e4dd1dccc295ca353152b159a8ac2f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach files to this message - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga6e4dd1dccc295ca353152b159a8ac2f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4cf93219c97421c99fc30598a659ee6f" id="r_ga4cf93219c97421c99fc30598a659ee6f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4cf93219c97421c99fc30598a659ee6f">op_attachment_attach_key</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga4cf93219c97421c99fc30598a659ee6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach a PGP public key - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga4cf93219c97421c99fc30598a659ee6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4dd80b28665cd32525b3bbb2f48e761" id="r_gab4dd80b28665cd32525b3bbb2f48e761"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab4dd80b28665cd32525b3bbb2f48e761">op_attachment_attach_message</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gab4dd80b28665cd32525b3bbb2f48e761"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach messages to this message - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gab4dd80b28665cd32525b3bbb2f48e761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaebb7ebbdaa1fd9cc02ea79f731ec272d" id="r_gaebb7ebbdaa1fd9cc02ea79f731ec272d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaebb7ebbdaa1fd9cc02ea79f731ec272d">op_attachment_detach</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gaebb7ebbdaa1fd9cc02ea79f731ec272d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the current entry - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gaebb7ebbdaa1fd9cc02ea79f731ec272d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabcb9c8e736747602d590188a2583c349" id="r_gabcb9c8e736747602d590188a2583c349"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabcb9c8e736747602d590188a2583c349">op_attachment_edit_content_id</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gabcb9c8e736747602d590188a2583c349"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit the 'Content-ID' of the attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gabcb9c8e736747602d590188a2583c349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga393e7e045153dd66c353dd5eba293126" id="r_ga393e7e045153dd66c353dd5eba293126"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga393e7e045153dd66c353dd5eba293126">op_attachment_edit_description</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga393e7e045153dd66c353dd5eba293126"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit attachment description - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga393e7e045153dd66c353dd5eba293126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa02a2c84df82db6799ea7ba7d9ebf334" id="r_gaa02a2c84df82db6799ea7ba7d9ebf334"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa02a2c84df82db6799ea7ba7d9ebf334">op_attachment_edit_encoding</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gaa02a2c84df82db6799ea7ba7d9ebf334"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit attachment transfer-encoding - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gaa02a2c84df82db6799ea7ba7d9ebf334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga90dcf2b2a4cb3f0d6585f8fc4a3f5f5e" id="r_ga90dcf2b2a4cb3f0d6585f8fc4a3f5f5e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga90dcf2b2a4cb3f0d6585f8fc4a3f5f5e">op_attachment_edit_language</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga90dcf2b2a4cb3f0d6585f8fc4a3f5f5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit the 'Content-Language' of the attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga90dcf2b2a4cb3f0d6585f8fc4a3f5f5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd9d3ff6bbc3e6e0ced541b350c37a16" id="r_gadd9d3ff6bbc3e6e0ced541b350c37a16"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gadd9d3ff6bbc3e6e0ced541b350c37a16">op_attachment_edit_mime</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gadd9d3ff6bbc3e6e0ced541b350c37a16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit attachment using mailcap entry - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gadd9d3ff6bbc3e6e0ced541b350c37a16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga078aa018edf154aa25c5c454ff23cfda" id="r_ga078aa018edf154aa25c5c454ff23cfda"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga078aa018edf154aa25c5c454ff23cfda">op_attachment_edit_type</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga078aa018edf154aa25c5c454ff23cfda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit attachment content type - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga078aa018edf154aa25c5c454ff23cfda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f09409b0822ed481264a99119f48097" id="r_ga2f09409b0822ed481264a99119f48097"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2f09409b0822ed481264a99119f48097">op_attachment_filter</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga2f09409b0822ed481264a99119f48097"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter attachment through a shell command - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga2f09409b0822ed481264a99119f48097"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac9c995cc61fb0630198151698718d751" id="r_gac9c995cc61fb0630198151698718d751"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac9c995cc61fb0630198151698718d751">op_attachment_get_attachment</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gac9c995cc61fb0630198151698718d751"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a temporary copy of an attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gac9c995cc61fb0630198151698718d751"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10f90762d5fd003f822dd65f7dac74d7" id="r_ga10f90762d5fd003f822dd65f7dac74d7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga10f90762d5fd003f822dd65f7dac74d7">op_attachment_group_alts</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga10f90762d5fd003f822dd65f7dac74d7"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structGroup.html" title="A set of email addresses.">Group</a> tagged attachments as 'multipart/alternative' - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga10f90762d5fd003f822dd65f7dac74d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga085885d16b91e505d669e57d3d6037d2" id="r_ga085885d16b91e505d669e57d3d6037d2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga085885d16b91e505d669e57d3d6037d2">op_attachment_group_lingual</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga085885d16b91e505d669e57d3d6037d2"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structGroup.html" title="A set of email addresses.">Group</a> tagged attachments as 'multipart/multilingual' - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga085885d16b91e505d669e57d3d6037d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f08adde5f181891d0eae42d93306e84" id="r_ga3f08adde5f181891d0eae42d93306e84"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3f08adde5f181891d0eae42d93306e84">op_attachment_group_related</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga3f08adde5f181891d0eae42d93306e84"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structGroup.html" title="A set of email addresses.">Group</a> tagged attachments as 'multipart/related' - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga3f08adde5f181891d0eae42d93306e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga69ba2bbfd55c124fed0a6626aaec9274" id="r_ga69ba2bbfd55c124fed0a6626aaec9274"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga69ba2bbfd55c124fed0a6626aaec9274">op_attachment_move_down</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga69ba2bbfd55c124fed0a6626aaec9274"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move an attachment down in the attachment list - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga69ba2bbfd55c124fed0a6626aaec9274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80c8e393de8b586a7dda2c6d8873407f" id="r_ga80c8e393de8b586a7dda2c6d8873407f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga80c8e393de8b586a7dda2c6d8873407f">op_attachment_move_up</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga80c8e393de8b586a7dda2c6d8873407f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move an attachment up in the attachment list - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga80c8e393de8b586a7dda2c6d8873407f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafef2b933e6a807df6a8d1331575a0c87" id="r_gafef2b933e6a807df6a8d1331575a0c87"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafef2b933e6a807df6a8d1331575a0c87">op_attachment_new_mime</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gafef2b933e6a807df6a8d1331575a0c87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compose new attachment using mailcap entry - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gafef2b933e6a807df6a8d1331575a0c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae42ad4d17c888e08eb3c124f5c2fd4b" id="r_gaae42ad4d17c888e08eb3c124f5c2fd4b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaae42ad4d17c888e08eb3c124f5c2fd4b">op_attachment_print</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gaae42ad4d17c888e08eb3c124f5c2fd4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the current entry - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gaae42ad4d17c888e08eb3c124f5c2fd4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60dc2cf9c6ba99cb14d4c5dcb6a046ec" id="r_ga60dc2cf9c6ba99cb14d4c5dcb6a046ec"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga60dc2cf9c6ba99cb14d4c5dcb6a046ec">op_attachment_rename_attachment</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga60dc2cf9c6ba99cb14d4c5dcb6a046ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send attachment with a different name - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga60dc2cf9c6ba99cb14d4c5dcb6a046ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6495f84b75b13ba7468aedaf137e6128" id="r_ga6495f84b75b13ba7468aedaf137e6128"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6495f84b75b13ba7468aedaf137e6128">op_attachment_save</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga6495f84b75b13ba7468aedaf137e6128"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save message/attachment to a mailbox/file - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga6495f84b75b13ba7468aedaf137e6128"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga952ba3a4a50eecc0798a9b5e7e5462f0" id="r_ga952ba3a4a50eecc0798a9b5e7e5462f0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga952ba3a4a50eecc0798a9b5e7e5462f0">op_attachment_toggle_disposition</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga952ba3a4a50eecc0798a9b5e7e5462f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle disposition between inline/attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga952ba3a4a50eecc0798a9b5e7e5462f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga797294e9a8caf038d666443fb861c9c7" id="r_ga797294e9a8caf038d666443fb861c9c7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga797294e9a8caf038d666443fb861c9c7">op_attachment_toggle_recode</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga797294e9a8caf038d666443fb861c9c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle recoding of this attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga797294e9a8caf038d666443fb861c9c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7862f337a35717f87f3fe070eb37fb97" id="r_ga7862f337a35717f87f3fe070eb37fb97"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7862f337a35717f87f3fe070eb37fb97">op_attachment_toggle_unlink</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga7862f337a35717f87f3fe070eb37fb97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle whether to delete file after sending it - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga7862f337a35717f87f3fe070eb37fb97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaba4c534951d4cb33363ef17bcaf4c287" id="r_gaba4c534951d4cb33363ef17bcaf4c287"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaba4c534951d4cb33363ef17bcaf4c287">op_attachment_ungroup</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gaba4c534951d4cb33363ef17bcaf4c287"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ungroup a 'multipart' attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gaba4c534951d4cb33363ef17bcaf4c287"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad0602d202fffe887aef05d2edc0006d" id="r_gaad0602d202fffe887aef05d2edc0006d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaad0602d202fffe887aef05d2edc0006d">op_attachment_update_encoding</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gaad0602d202fffe887aef05d2edc0006d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update an attachment's encoding info - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gaad0602d202fffe887aef05d2edc0006d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93882bbe0d62ab80cd2e1ac10ca997bd" id="r_ga93882bbe0d62ab80cd2e1ac10ca997bd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga93882bbe0d62ab80cd2e1ac10ca997bd">op_envelope_edit_headers</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga93882bbe0d62ab80cd2e1ac10ca997bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit the message with headers - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga93882bbe0d62ab80cd2e1ac10ca997bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5840f20d584a2edf303581311bc5b029" id="r_ga5840f20d584a2edf303581311bc5b029"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5840f20d584a2edf303581311bc5b029">op_compose_edit_file</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga5840f20d584a2edf303581311bc5b029"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit the file to be attached - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga5840f20d584a2edf303581311bc5b029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4c43f426a53a5859161f38cb4c8191a" id="r_gae4c43f426a53a5859161f38cb4c8191a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae4c43f426a53a5859161f38cb4c8191a">op_compose_edit_message</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gae4c43f426a53a5859161f38cb4c8191a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit the message - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gae4c43f426a53a5859161f38cb4c8191a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga371fd4f675f6bba67d59461f0f8662bf" id="r_ga371fd4f675f6bba67d59461f0f8662bf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga371fd4f675f6bba67d59461f0f8662bf">op_compose_ispell</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga371fd4f675f6bba67d59461f0f8662bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run ispell on the message - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga371fd4f675f6bba67d59461f0f8662bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf961b4ad0ff46be6cd3d10883d4f6013" id="r_gaf961b4ad0ff46be6cd3d10883d4f6013"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf961b4ad0ff46be6cd3d10883d4f6013">op_compose_postpone_message</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gaf961b4ad0ff46be6cd3d10883d4f6013"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save this message to send later - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gaf961b4ad0ff46be6cd3d10883d4f6013"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32067b4b46a10f5a8f30ce5048bd192c" id="r_ga32067b4b46a10f5a8f30ce5048bd192c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga32067b4b46a10f5a8f30ce5048bd192c">op_compose_rename_file</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga32067b4b46a10f5a8f30ce5048bd192c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rename/move an attached file - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga32067b4b46a10f5a8f30ce5048bd192c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e13d89de4de5f21d9ff9922924bcd48" id="r_ga6e13d89de4de5f21d9ff9922924bcd48"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6e13d89de4de5f21d9ff9922924bcd48">op_compose_send_message</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga6e13d89de4de5f21d9ff9922924bcd48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the message - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga6e13d89de4de5f21d9ff9922924bcd48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad2360aa90e289f53c6e51d14546270d1" id="r_gad2360aa90e289f53c6e51d14546270d1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad2360aa90e289f53c6e51d14546270d1">op_compose_write_message</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gad2360aa90e289f53c6e51d14546270d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the message to a folder - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gad2360aa90e289f53c6e51d14546270d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga40db2202d2dafac3687eb1710650d67d" id="r_ga40db2202d2dafac3687eb1710650d67d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga40db2202d2dafac3687eb1710650d67d">op_display_headers</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga40db2202d2dafac3687eb1710650d67d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display message and toggle header weeding - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga40db2202d2dafac3687eb1710650d67d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab85ddf863dcc1794b5a889b8f25c0c6f" id="r_gab85ddf863dcc1794b5a889b8f25c0c6f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab85ddf863dcc1794b5a889b8f25c0c6f">op_exit</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:gab85ddf863dcc1794b5a889b8f25c0c6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit this menu - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:gab85ddf863dcc1794b5a889b8f25c0c6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c6443c98e75fd81427e57e377717289" id="r_ga5c6443c98e75fd81427e57e377717289"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5c6443c98e75fd81427e57e377717289">op_forget_passphrase</a> (struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *shared, int op)</td></tr>
<tr class="memdesc:ga5c6443c98e75fd81427e57e377717289"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wipe passphrases from memory - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -.  <br /></td></tr>
<tr class="separator:ga5c6443c98e75fd81427e57e377717289"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Prototype for a Compose Function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shared</td><td>Shared Compose data </td></tr>
    <tr><td class="paramname">op</td><td>Operation to perform, e.g. OP_COMPOSE_WRITE_MESSAGE </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">enum</td><td><a class="el" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414" title="Possible return values for NeoMutt functions.">FunctionRetval</a> </td></tr>
  </table>
  </dd>
</dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6e4dd1dccc295ca353152b159a8ac2f1" name="ga6e4dd1dccc295ca353152b159a8ac2f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e4dd1dccc295ca353152b159a8ac2f1">&#9670;&#160;</a></span>op_attachment_attach_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_attach_file </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attach files to this message - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l00735">735</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  736</span>{</div>
<div class="line"><span class="lineno">  737</span>  <span class="keywordtype">char</span> *prompt = <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Attach file&quot;</span>);</div>
<div class="line"><span class="lineno">  738</span>  <span class="keywordtype">int</span> numfiles = 0;</div>
<div class="line"><span class="lineno">  739</span>  <span class="keywordtype">char</span> **files = NULL;</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *fname = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  742</span>  <span class="keywordflow">if</span> ((<a class="code hl_function" href="group__gui__mw.html#ga7074d808675e21370b1cef98d55e75ca">mw_enter_fname</a>(prompt, fname, <span class="keyword">false</span>, NULL, <span class="keyword">true</span>, &amp;files, &amp;numfiles,</div>
<div class="line"><span class="lineno">  743</span>                      <a class="code hl_define" href="browser_2lib_8h.html#a3c8fc96890e5df4412f83fbc2a87cc91">MUTT_SEL_MULTI</a>) == -1) ||</div>
<div class="line"><span class="lineno">  744</span>      <a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(fname))</div>
<div class="line"><span class="lineno">  745</span>  {</div>
<div class="line"><span class="lineno">  746</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numfiles; i++)</div>
<div class="line"><span class="lineno">  747</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;files[i]);</div>
<div class="line"><span class="lineno">  748</span> </div>
<div class="line"><span class="lineno">  749</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;files);</div>
<div class="line"><span class="lineno">  750</span>    <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno">  751</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno">  752</span>  }</div>
<div class="line"><span class="lineno">  753</span> </div>
<div class="line"><span class="lineno">  754</span>  <span class="keywordtype">bool</span> error = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  755</span>  <span class="keywordtype">bool</span> added_attachment = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  756</span>  <span class="keywordflow">if</span> (numfiles &gt; 1)</div>
<div class="line"><span class="lineno">  757</span>  {</div>
<div class="line"><span class="lineno">  758</span>    <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(ngettext(<span class="stringliteral">&quot;Attaching selected file...&quot;</span>,</div>
<div class="line"><span class="lineno">  759</span>                          <span class="stringliteral">&quot;Attaching selected files...&quot;</span>, numfiles));</div>
<div class="line"><span class="lineno">  760</span>  }</div>
<div class="line"><span class="lineno">  761</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numfiles; i++)</div>
<div class="line"><span class="lineno">  762</span>  {</div>
<div class="line"><span class="lineno">  763</span>    <span class="keywordtype">char</span> *att = files[i];</div>
<div class="line"><span class="lineno">  764</span>    <span class="keywordflow">if</span> (!att)</div>
<div class="line"><span class="lineno">  765</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  766</span> </div>
<div class="line"><span class="lineno">  767</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *ap = <a class="code hl_function" href="attach_2attach_8c.html#a391fb25384a6e0c205de35fb24a1cc24">mutt_aptr_new</a>();</div>
<div class="line"><span class="lineno">  768</span>    ap-&gt;<a class="code hl_variable" href="structAttachPtr.html#a85722c8044f044e59047c3c8b12ef279">unowned</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  769</span>    ap-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a> = <a class="code hl_function" href="sendlib_8c.html#a84c896a702c00ea759c281213e454686">mutt_make_file_attach</a>(att, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>);</div>
<div class="line"><span class="lineno">  770</span>    <span class="keywordflow">if</span> (ap-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>)</div>
<div class="line"><span class="lineno">  771</span>    {</div>
<div class="line"><span class="lineno">  772</span>      added_attachment = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  773</span>      <a class="code hl_function" href="compose_2functions_8c.html#a6d6517aa9ace035c5e1449dd0bbcdeed">update_idx</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>, ap);</div>
<div class="line"><span class="lineno">  774</span>    }</div>
<div class="line"><span class="lineno">  775</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  776</span>    {</div>
<div class="line"><span class="lineno">  777</span>      error = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  778</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unable to attach %s&quot;</span>), att);</div>
<div class="line"><span class="lineno">  779</span>      <a class="code hl_function" href="attach_2attach_8c.html#a89df650a7e1c04159234f52044c82d84">mutt_aptr_free</a>(&amp;ap);</div>
<div class="line"><span class="lineno">  780</span>    }</div>
<div class="line"><span class="lineno">  781</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;files[i]);</div>
<div class="line"><span class="lineno">  782</span>  }</div>
<div class="line"><span class="lineno">  783</span> </div>
<div class="line"><span class="lineno">  784</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;files);</div>
<div class="line"><span class="lineno">  785</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno">  786</span> </div>
<div class="line"><span class="lineno">  787</span>  <span class="keywordflow">if</span> (!error)</div>
<div class="line"><span class="lineno">  788</span>    <a class="code hl_function" href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a>();</div>
<div class="line"><span class="lineno">  789</span> </div>
<div class="line"><span class="lineno">  790</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a294a94cf45be93fa7677adb7116ce60b">MENU_REDRAW_INDEX</a>);</div>
<div class="line"><span class="lineno">  791</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno">  792</span>  <span class="keywordflow">if</span> (added_attachment)</div>
<div class="line"><span class="lineno">  793</span>    <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno">  794</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  795</span>}</div>
<div class="ttc" id="aattach_2attach_8c_html_a391fb25384a6e0c205de35fb24a1cc24"><div class="ttname"><a href="attach_2attach_8c.html#a391fb25384a6e0c205de35fb24a1cc24">mutt_aptr_new</a></div><div class="ttdeci">struct AttachPtr * mutt_aptr_new(void)</div><div class="ttdoc">Create a new Attachment Pointer.</div><div class="ttdef"><b>Definition</b> <a href="attach_2attach_8c_source.html#l00040">attach.c:40</a></div></div>
<div class="ttc" id="aattach_2attach_8c_html_a89df650a7e1c04159234f52044c82d84"><div class="ttname"><a href="attach_2attach_8c.html#a89df650a7e1c04159234f52044c82d84">mutt_aptr_free</a></div><div class="ttdeci">void mutt_aptr_free(struct AttachPtr **ptr)</div><div class="ttdoc">Free an Attachment Pointer.</div><div class="ttdef"><b>Definition</b> <a href="attach_2attach_8c_source.html#l00049">attach.c:49</a></div></div>
<div class="ttc" id="abrowser_2lib_8h_html_a3c8fc96890e5df4412f83fbc2a87cc91"><div class="ttname"><a href="browser_2lib_8h.html#a3c8fc96890e5df4412f83fbc2a87cc91">MUTT_SEL_MULTI</a></div><div class="ttdeci">#define MUTT_SEL_MULTI</div><div class="ttdoc">Multi-selection is enabled.</div><div class="ttdef"><b>Definition</b> <a href="browser_2lib_8h_source.html#l00059">lib.h:59</a></div></div>
<div class="ttc" id="abuffer_8c_html_a4245e227baa2a9beb6991917404aab0d"><div class="ttname"><a href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a></div><div class="ttdeci">bool buf_is_empty(const struct Buffer *buf)</div><div class="ttdoc">Is the Buffer empty?</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00291">buffer.c:291</a></div></div>
<div class="ttc" id="acompose_2functions_8c_html_a6d6517aa9ace035c5e1449dd0bbcdeed"><div class="ttname"><a href="compose_2functions_8c.html#a6d6517aa9ace035c5e1449dd0bbcdeed">update_idx</a></div><div class="ttdeci">static void update_idx(struct Menu *menu, struct AttachCtx *actx, struct AttachPtr *ap)</div><div class="ttdoc">Add a new attachment to the message.</div><div class="ttdef"><b>Definition</b> <a href="compose_2functions_8c_source.html#l00426">functions.c:426</a></div></div>
<div class="ttc" id="adispatcher_8h_html_a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670"><div class="ttname"><a href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a></div><div class="ttdeci">@ FR_SUCCESS</div><div class="ttdoc">Valid function - successfully performed.</div><div class="ttdef"><b>Definition</b> <a href="dispatcher_8h_source.html#l00039">dispatcher.h:39</a></div></div>
<div class="ttc" id="adispatcher_8h_html_a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e"><div class="ttname"><a href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a></div><div class="ttdeci">@ FR_NO_ACTION</div><div class="ttdoc">Valid function - no action performed.</div><div class="ttdef"><b>Definition</b> <a href="dispatcher_8h_source.html#l00037">dispatcher.h:37</a></div></div>
<div class="ttc" id="aemail_8h_html_acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a"><div class="ttname"><a href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a></div><div class="ttdeci">@ NT_EMAIL_CHANGE_ATTACH</div><div class="ttdoc">Email&#39;s Attachments have changed.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00188">email.h:188</a></div></div>
<div class="ttc" id="agroup__gui__mw_html_ga7074d808675e21370b1cef98d55e75ca"><div class="ttname"><a href="group__gui__mw.html#ga7074d808675e21370b1cef98d55e75ca">mw_enter_fname</a></div><div class="ttdeci">int mw_enter_fname(const char *prompt, struct Buffer *fname, bool mailbox, struct Mailbox *m, bool multiple, char ***files, int *numfiles, SelectFileFlags flags)</div><div class="ttdoc">Ask the user to select a file -.</div><div class="ttdef"><b>Definition</b> <a href="curs__lib_8c_source.html#l00237">curs_lib.c:237</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00093">logging2.h:93</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00092">logging2.h:92</a></div></div>
<div class="ttc" id="ahook_8c_html_af487ca5e3f7da21c86e3ad61fdb55faa"><div class="ttname"><a href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a></div><div class="ttdeci">void mutt_message_hook(struct Mailbox *m, struct Email *e, HookFlags type)</div><div class="ttdoc">Perform a message hook.</div><div class="ttdef"><b>Definition</b> <a href="hook_8c_source.html#l01360">hook.c:1360</a></div></div>
<div class="ttc" id="ahook_8h_html_a709891b042fc13265a7971b2401081c9"><div class="ttname"><a href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a></div><div class="ttdeci">#define MUTT_SEND2_HOOK</div><div class="ttdoc">send2-hook: when changing fields in the compose menu</div><div class="ttdef"><b>Definition</b> <a href="hook_8h_source.html#l00048">hook.h:48</a></div></div>
<div class="ttc" id="amemory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00062">memory.h:62</a></div></div>
<div class="ttc" id="amenu_2lib_8h_html_a294a94cf45be93fa7677adb7116ce60b"><div class="ttname"><a href="menu_2lib_8h.html#a294a94cf45be93fa7677adb7116ce60b">MENU_REDRAW_INDEX</a></div><div class="ttdeci">#define MENU_REDRAW_INDEX</div><div class="ttdoc">Redraw the index.</div><div class="ttdef"><b>Definition</b> <a href="menu_2lib_8h_source.html#l00056">lib.h:56</a></div></div>
<div class="ttc" id="amenu_2lib_8h_html_a5a9733924cc01176ee916515a3683268"><div class="ttname"><a href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a></div><div class="ttdeci">void menu_queue_redraw(struct Menu *menu, MenuRedrawFlags redraw)</div><div class="ttdoc">Queue a request for a redraw.</div><div class="ttdef"><b>Definition</b> <a href="menu_8c_source.html#l00185">menu.c:185</a></div></div>
<div class="ttc" id="amutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="amutt_2notify_8c_html_ade2f42f8e0d8a843e87816300799a8e1"><div class="ttname"><a href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a></div><div class="ttdeci">bool notify_send(struct Notify *notify, enum NotifyType event_type, int event_subtype, void *event_data)</div><div class="ttdoc">Send out a notification message.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2notify_8c_source.html#l00173">notify.c:173</a></div></div>
<div class="ttc" id="amutt__logging_8c_html_af068b3f524a31fad293b2fb61dfc4534"><div class="ttname"><a href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a></div><div class="ttdeci">void mutt_clear_error(void)</div><div class="ttdoc">Clear the message line (bottom line of screen)</div><div class="ttdef"><b>Definition</b> <a href="mutt__logging_8c_source.html#l00074">mutt_logging.c:74</a></div></div>
<div class="ttc" id="anotify__type_8h_html_addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a"><div class="ttname"><a href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a></div><div class="ttdeci">@ NT_EMAIL</div><div class="ttdoc">Email has changed, NotifyEmail, EventEmail.</div><div class="ttdef"><b>Definition</b> <a href="notify__type_8h_source.html#l00044">notify_type.h:44</a></div></div>
<div class="ttc" id="apool_8c_html_a41cba27c25d33cb6822789a2856093f2"><div class="ttname"><a href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a></div><div class="ttdeci">struct Buffer * buf_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00082">pool.c:82</a></div></div>
<div class="ttc" id="apool_8c_html_a4cc6068279461cb8628219586dfa35a1"><div class="ttname"><a href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a></div><div class="ttdeci">void buf_pool_release(struct Buffer **ptr)</div><div class="ttdoc">Return a Buffer to the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00096">pool.c:96</a></div></div>
<div class="ttc" id="asendlib_8c_html_a84c896a702c00ea759c281213e454686"><div class="ttname"><a href="sendlib_8c.html#a84c896a702c00ea759c281213e454686">mutt_make_file_attach</a></div><div class="ttdeci">struct Body * mutt_make_file_attach(const char *path, struct ConfigSubset *sub)</div><div class="ttdoc">Create a file attachment.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00607">sendlib.c:607</a></div></div>
<div class="ttc" id="astructAttachPtr_html"><div class="ttname"><a href="structAttachPtr.html">AttachPtr</a></div><div class="ttdoc">An email to which things will be attached.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00034">attach.h:35</a></div></div>
<div class="ttc" id="astructAttachPtr_html_a0546c0753a6155ae9555c290b80d0356"><div class="ttname"><a href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">AttachPtr::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">Attachment.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00036">attach.h:36</a></div></div>
<div class="ttc" id="astructAttachPtr_html_a85722c8044f044e59047c3c8b12ef279"><div class="ttname"><a href="structAttachPtr.html#a85722c8044f044e59047c3c8b12ef279">AttachPtr::unowned</a></div><div class="ttdeci">bool unowned</div><div class="ttdoc">Don&#39;t unlink on detach.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00042">attach.h:42</a></div></div>
<div class="ttc" id="astructBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00035">buffer.h:36</a></div></div>
<div class="ttc" id="astructComposeAttachData_html_a6b1917b393b1f9f3abb8a3673abbe135"><div class="ttname"><a href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">ComposeAttachData::menu</a></div><div class="ttdeci">struct Menu * menu</div><div class="ttdoc">Menu displaying the attachments.</div><div class="ttdef"><b>Definition</b> <a href="attach__data_8h_source.html#l00035">attach_data.h:35</a></div></div>
<div class="ttc" id="astructComposeAttachData_html_ae079826a0fe6ae466c8b3c1a8b426639"><div class="ttname"><a href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">ComposeAttachData::actx</a></div><div class="ttdeci">struct AttachCtx * actx</div><div class="ttdoc">Set of attachments.</div><div class="ttdef"><b>Definition</b> <a href="attach__data_8h_source.html#l00034">attach_data.h:34</a></div></div>
<div class="ttc" id="astructComposeSharedData_html_a2588f4fa2f7bffbdf9efa8975ea22e74"><div class="ttname"><a href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">ComposeSharedData::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Config set to use.</div><div class="ttdef"><b>Definition</b> <a href="compose_2shared__data_8h_source.html#l00037">shared_data.h:37</a></div></div>
<div class="ttc" id="astructComposeSharedData_html_a9f626dcd000e9f0c73f24dca00d2b6f4"><div class="ttname"><a href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">ComposeSharedData::adata</a></div><div class="ttdeci">struct ComposeAttachData * adata</div><div class="ttdoc">Attachments.</div><div class="ttdef"><b>Definition</b> <a href="compose_2shared__data_8h_source.html#l00040">shared_data.h:40</a></div></div>
<div class="ttc" id="astructComposeSharedData_html_ab3378f34463d3a779f5ccc5b281ed291"><div class="ttname"><a href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">ComposeSharedData::email</a></div><div class="ttdeci">struct Email * email</div><div class="ttdoc">Email being composed.</div><div class="ttdef"><b>Definition</b> <a href="compose_2shared__data_8h_source.html#l00039">shared_data.h:39</a></div></div>
<div class="ttc" id="astructEmail_html_aacf5772e590568f9bda0373986775354"><div class="ttname"><a href="structEmail.html#aacf5772e590568f9bda0373986775354">Email::notify</a></div><div class="ttdeci">struct Notify * notify</div><div class="ttdoc">Notifications: NotifyEmail, EventEmail.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00073">email.h:73</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga6e4dd1dccc295ca353152b159a8ac2f1_cgraph.svg" width="578" height="608"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga4cf93219c97421c99fc30598a659ee6f" name="ga4cf93219c97421c99fc30598a659ee6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4cf93219c97421c99fc30598a659ee6f">&#9670;&#160;</a></span>op_attachment_attach_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_attach_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attach a PGP public key - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l00800">800</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  801</span>{</div>
<div class="line"><span class="lineno">  802</span>  <span class="keywordflow">if</span> (!(<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>))</div>
<div class="line"><span class="lineno">  803</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a72a092f633fa507866658693c77bb64b">FR_NOT_IMPL</a>;</div>
<div class="line"><span class="lineno">  804</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *ap = <a class="code hl_function" href="attach_2attach_8c.html#a391fb25384a6e0c205de35fb24a1cc24">mutt_aptr_new</a>();</div>
<div class="line"><span class="lineno">  805</span>  ap-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a> = <a class="code hl_function" href="cryptglue_8c.html#a6ff317859513ab653641114e19fb8f59">crypt_pgp_make_key_attachment</a>();</div>
<div class="line"><span class="lineno">  806</span>  <span class="keywordflow">if</span> (ap-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>)</div>
<div class="line"><span class="lineno">  807</span>  {</div>
<div class="line"><span class="lineno">  808</span>    <a class="code hl_function" href="compose_2functions_8c.html#a6d6517aa9ace035c5e1449dd0bbcdeed">update_idx</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>, ap);</div>
<div class="line"><span class="lineno">  809</span>    <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a294a94cf45be93fa7677adb7116ce60b">MENU_REDRAW_INDEX</a>);</div>
<div class="line"><span class="lineno">  810</span>    <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno">  811</span>  }</div>
<div class="line"><span class="lineno">  812</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  813</span>  {</div>
<div class="line"><span class="lineno">  814</span>    <a class="code hl_function" href="attach_2attach_8c.html#a89df650a7e1c04159234f52044c82d84">mutt_aptr_free</a>(&amp;ap);</div>
<div class="line"><span class="lineno">  815</span>  }</div>
<div class="line"><span class="lineno">  816</span> </div>
<div class="line"><span class="lineno">  817</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno">  818</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  819</span>}</div>
<div class="ttc" id="acryptglue_8c_html_a6ff317859513ab653641114e19fb8f59"><div class="ttname"><a href="cryptglue_8c.html#a6ff317859513ab653641114e19fb8f59">crypt_pgp_make_key_attachment</a></div><div class="ttdeci">struct Body * crypt_pgp_make_key_attachment(void)</div><div class="ttdoc">Wrapper for CryptModuleSpecs::pgp_make_key_attachment()</div><div class="ttdef"><b>Definition</b> <a href="cryptglue_8c_source.html#l00304">cryptglue.c:304</a></div></div>
<div class="ttc" id="adispatcher_8h_html_a491d2646f32539a82a5d8b5f2bdc3414a72a092f633fa507866658693c77bb64b"><div class="ttname"><a href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a72a092f633fa507866658693c77bb64b">FR_NOT_IMPL</a></div><div class="ttdeci">@ FR_NOT_IMPL</div><div class="ttdoc">Invalid function - feature not enabled.</div><div class="ttdef"><b>Definition</b> <a href="dispatcher_8h_source.html#l00036">dispatcher.h:36</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a587e679a4c9cc44f11f0c467bb22b0af"><div class="ttname"><a href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a></div><div class="ttdeci">#define APPLICATION_PGP</div><div class="ttdoc">Use PGP to encrypt/sign.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00096">lib.h:96</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_ad980bff69bb614893ad8e7e1c28a5023"><div class="ttname"><a href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a></div><div class="ttdeci">#define WithCrypto</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00122">lib.h:122</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga4cf93219c97421c99fc30598a659ee6f_cgraph.svg" width="396" height="379"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gab4dd80b28665cd32525b3bbb2f48e761" name="gab4dd80b28665cd32525b3bbb2f48e761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4dd80b28665cd32525b3bbb2f48e761">&#9670;&#160;</a></span>op_attachment_attach_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_attach_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attach messages to this message - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>
<p>This function handles:</p><ul>
<li>OP_ATTACHMENT_ATTACH_MESSAGE</li>
<li>OP_ATTACHMENT_ATTACH_NEWS_MESSAGE </li>
</ul>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l00828">828</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  829</span>{</div>
<div class="line"><span class="lineno">  830</span>  <span class="keywordtype">char</span> *prompt = <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Open mailbox to attach message from&quot;</span>);</div>
<div class="line"><span class="lineno">  831</span> </div>
<div class="line"><span class="lineno">  832</span>  <a class="code hl_variable" href="globals_8c.html#a0c2f0c035df413a8722b4897d5a88317">OptNews</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  833</span>  <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a> &amp;&amp; (op == OP_ATTACHMENT_ATTACH_NEWS_MESSAGE))</div>
<div class="line"><span class="lineno">  834</span>  {</div>
<div class="line"><span class="lineno">  835</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_news_server = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;news_server&quot;</span>);</div>
<div class="line"><span class="lineno">  836</span>    <a class="code hl_variable" href="nntp_2lib_8h.html#ae58e3a5dcd99b6bbd0354b133fc220ce">CurrentNewsSrv</a> = <a class="code hl_function" href="nntp_2lib_8h.html#ae9ee1cc132aa482531fdc2463200e492">nntp_select_server</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>, c_news_server, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  837</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="nntp_2lib_8h.html#ae58e3a5dcd99b6bbd0354b133fc220ce">CurrentNewsSrv</a>)</div>
<div class="line"><span class="lineno">  838</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno">  839</span> </div>
<div class="line"><span class="lineno">  840</span>    prompt = <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Open newsgroup to attach message from&quot;</span>);</div>
<div class="line"><span class="lineno">  841</span>    <a class="code hl_variable" href="globals_8c.html#a0c2f0c035df413a8722b4897d5a88317">OptNews</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  842</span>  }</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *fname = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  845</span>  <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>)</div>
<div class="line"><span class="lineno">  846</span>  {</div>
<div class="line"><span class="lineno">  847</span>    <span class="keywordflow">if</span> ((op == OP_ATTACHMENT_ATTACH_MESSAGE) ^ (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>-&gt;<a class="code hl_variable" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> == <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803">MUTT_NNTP</a>))</div>
<div class="line"><span class="lineno">  848</span>    {</div>
<div class="line"><span class="lineno">  849</span>      <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(fname, <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>));</div>
<div class="line"><span class="lineno">  850</span>      <a class="code hl_function" href="muttlib_8c.html#a777680c324667521d8c486051c22fe10">buf_pretty_mailbox</a>(fname);</div>
<div class="line"><span class="lineno">  851</span>    }</div>
<div class="line"><span class="lineno">  852</span>  }</div>
<div class="line"><span class="lineno">  853</span> </div>
<div class="line"><span class="lineno">  854</span>  <span class="keywordflow">if</span> ((<a class="code hl_function" href="group__gui__mw.html#ga7074d808675e21370b1cef98d55e75ca">mw_enter_fname</a>(prompt, fname, <span class="keyword">true</span>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>, <span class="keyword">false</span>, NULL, NULL,</div>
<div class="line"><span class="lineno">  855</span>                      <a class="code hl_define" href="browser_2lib_8h.html#aef17206dea5302001a39f3c633e731d3">MUTT_SEL_NO_FLAGS</a>) == -1) ||</div>
<div class="line"><span class="lineno">  856</span>      <a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(fname))</div>
<div class="line"><span class="lineno">  857</span>  {</div>
<div class="line"><span class="lineno">  858</span>    <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno">  859</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno">  860</span>  }</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#a0c2f0c035df413a8722b4897d5a88317">OptNews</a>)</div>
<div class="line"><span class="lineno">  863</span>    <a class="code hl_function" href="nntp_2lib_8h.html#aad55ac6624a236283f0521ebdee460eb">nntp_expand_path</a>(fname-&gt;<a class="code hl_variable" href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">data</a>, fname-&gt;<a class="code hl_variable" href="structBuffer.html#a1d9ee60bcf94de702b15ec2b5d811995">dsize</a>, &amp;<a class="code hl_variable" href="nntp_2lib_8h.html#ae58e3a5dcd99b6bbd0354b133fc220ce">CurrentNewsSrv</a>-&gt;conn-&gt;account);</div>
<div class="line"><span class="lineno">  864</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  865</span>    <a class="code hl_function" href="muttlib_8c.html#adde3990a0490dfba609fc94dbdbfd6b3">buf_expand_path</a>(fname);</div>
<div class="line"><span class="lineno">  866</span> </div>
<div class="line"><span class="lineno">  867</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="group__mx__path__probe.html#gab4f27af8eb857a20834f445be3f498de">imap_path_probe</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname), NULL) != <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da7f541a03089370b1a260e344f8d1809b">MUTT_IMAP</a>)</div>
<div class="line"><span class="lineno">  868</span>  {</div>
<div class="line"><span class="lineno">  869</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="group__mx__path__probe.html#ga5b33b7c070124e656f1a4e8c67c039ad">pop_path_probe</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname), NULL) != <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da3b55e432fcbfdbd550d0aea5b03679de">MUTT_POP</a>)</div>
<div class="line"><span class="lineno">  870</span>    {</div>
<div class="line"><span class="lineno">  871</span>      <span class="keywordflow">if</span> (!<a class="code hl_variable" href="globals_8c.html#a0c2f0c035df413a8722b4897d5a88317">OptNews</a> &amp;&amp; (<a class="code hl_function" href="group__mx__path__probe.html#ga0af5851670960cce257a6e5f9f9805ff">nntp_path_probe</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname), NULL) != <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803">MUTT_NNTP</a>))</div>
<div class="line"><span class="lineno">  872</span>      {</div>
<div class="line"><span class="lineno">  873</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="mx_8c.html#add36baf7d8410fb37158defdaebe9a5d">mx_path_probe</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname)) != <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da05c2d20da557ac5b2c45a349eec1fba6">MUTT_NOTMUCH</a>)</div>
<div class="line"><span class="lineno">  874</span>        {</div>
<div class="line"><span class="lineno">  875</span>          <span class="comment">/* check to make sure the file exists and is readable */</span></div>
<div class="line"><span class="lineno">  876</span>          <span class="keywordflow">if</span> (access(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname), R_OK) == -1)</div>
<div class="line"><span class="lineno">  877</span>          {</div>
<div class="line"><span class="lineno">  878</span>            <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname));</div>
<div class="line"><span class="lineno">  879</span>            <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno">  880</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno">  881</span>          }</div>
<div class="line"><span class="lineno">  882</span>        }</div>
<div class="line"><span class="lineno">  883</span>      }</div>
<div class="line"><span class="lineno">  884</span>    }</div>
<div class="line"><span class="lineno">  885</span>  }</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a>);</div>
<div class="line"><span class="lineno">  888</span> </div>
<div class="line"><span class="lineno">  889</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMailbox.html">Mailbox</a> *m_attach = <a class="code hl_function" href="mx_8c.html#addbeb100364d5be4dd89b74ac73ef067">mx_path_resolve</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname));</div>
<div class="line"><span class="lineno">  890</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> old_readonly = m_attach-&gt;<a class="code hl_variable" href="structMailbox.html#ae55237419d0e842cd6efeed0c41d27e8">readonly</a>;</div>
<div class="line"><span class="lineno">  891</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="mx_8c.html#a6c4f4c51fa0b086d86a8638197c40578">mx_mbox_open</a>(m_attach, <a class="code hl_define" href="mxapi_8h.html#a11b97885a0fc04bcd13572076e8a17ab">MUTT_READONLY</a>))</div>
<div class="line"><span class="lineno">  892</span>  {</div>
<div class="line"><span class="lineno">  893</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unable to open mailbox %s&quot;</span>), <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname));</div>
<div class="line"><span class="lineno">  894</span>    <a class="code hl_function" href="mx_8c.html#a4e4de522e1ca1db28736065f1499c55d">mx_fastclose_mailbox</a>(m_attach, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  895</span>    m_attach = NULL;</div>
<div class="line"><span class="lineno">  896</span>    <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno">  897</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno">  898</span>  }</div>
<div class="line"><span class="lineno">  899</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno">  900</span> </div>
<div class="line"><span class="lineno">  901</span>  <span class="keywordflow">if</span> (m_attach-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> == 0)</div>
<div class="line"><span class="lineno">  902</span>  {</div>
<div class="line"><span class="lineno">  903</span>    <a class="code hl_function" href="mx_8c.html#af9e949965d56e69eb9a6a9aa640614bb">mx_mbox_close</a>(m_attach);</div>
<div class="line"><span class="lineno">  904</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No messages in that folder&quot;</span>));</div>
<div class="line"><span class="lineno">  905</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno">  906</span>  }</div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span>  <span class="comment">/* `$sort`, `$sort_aux`, `$use_threads` could be changed in dlg_index() */</span></div>
<div class="line"><span class="lineno">  909</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4">EmailSortType</a> old_sort = <a class="code hl_function" href="config_2helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>);</div>
<div class="line"><span class="lineno">  910</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4">EmailSortType</a> old_sort_aux = <a class="code hl_function" href="config_2helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;sort_aux&quot;</span>);</div>
<div class="line"><span class="lineno">  911</span>  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> old_use_threads = <a class="code hl_function" href="config_2helpers_8c.html#a95398bb7e62a54dcce14a027a926a193">cs_subset_enum</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;use_threads&quot;</span>);</div>
<div class="line"><span class="lineno">  912</span> </div>
<div class="line"><span class="lineno">  913</span>  <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Tag the messages you want to attach&quot;</span>));</div>
<div class="line"><span class="lineno">  914</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMuttWindow.html">MuttWindow</a> *dlg = <a class="code hl_function" href="dlg__index_8c.html#af8efcd0ce3952702bc60f84abc828f3c">index_pager_init</a>();</div>
<div class="line"><span class="lineno">  915</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structIndexSharedData.html">IndexSharedData</a> *index_shared = dlg-&gt;<a class="code hl_variable" href="structMuttWindow.html#a52d65bf614794e3385e279e71ac4fcbc">wdata</a>;</div>
<div class="line"><span class="lineno">  916</span>  index_shared-&gt;<a class="code hl_variable" href="structIndexSharedData.html#aa7abab2dad25953b83db01a0b9bc07f5">attach_msg</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  917</span>  <a class="code hl_function" href="dialog_8c.html#a7c4678f81d8185d89e16e4befe94bb08">dialog_push</a>(dlg);</div>
<div class="line"><span class="lineno">  918</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMailbox.html">Mailbox</a> *m_attach_new = <a class="code hl_function" href="group__gui__dlg.html#gaf4266da82ada988b3b2482b910ddb15a">dlg_index</a>(dlg, m_attach);</div>
<div class="line"><span class="lineno">  919</span>  <a class="code hl_function" href="dialog_8c.html#a82616808183352fb315931b2bb3518c0">dialog_pop</a>();</div>
<div class="line"><span class="lineno">  920</span>  <a class="code hl_function" href="mutt__window_8c.html#a52ff022e671a7fbdec773fc2d24e0e15">mutt_window_free</a>(&amp;dlg);</div>
<div class="line"><span class="lineno">  921</span> </div>
<div class="line"><span class="lineno">  922</span>  <span class="keywordflow">if</span> (!shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>)</div>
<div class="line"><span class="lineno">  923</span>  {</div>
<div class="line"><span class="lineno">  924</span>    <span class="comment">/* Restore old $sort variables */</span></div>
<div class="line"><span class="lineno">  925</span>    <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>, old_sort, NULL);</div>
<div class="line"><span class="lineno">  926</span>    <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;sort_aux&quot;</span>, old_sort_aux, NULL);</div>
<div class="line"><span class="lineno">  927</span>    <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;use_threads&quot;</span>, old_use_threads, NULL);</div>
<div class="line"><span class="lineno">  928</span>    <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a294a94cf45be93fa7677adb7116ce60b">MENU_REDRAW_INDEX</a>);</div>
<div class="line"><span class="lineno">  929</span>    <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno">  930</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  931</span>  }</div>
<div class="line"><span class="lineno">  932</span> </div>
<div class="line"><span class="lineno">  933</span>  <span class="keywordtype">bool</span> added_attachment = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  934</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_attach_new-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno">  935</span>  {</div>
<div class="line"><span class="lineno">  936</span>    <span class="keywordflow">if</span> (!m_attach_new-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i])</div>
<div class="line"><span class="lineno">  937</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  938</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="mview_8c.html#abfba0f2643d1fa54927eb2257b7e7cd4">message_is_tagged</a>(m_attach_new-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i]))</div>
<div class="line"><span class="lineno">  939</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  940</span> </div>
<div class="line"><span class="lineno">  941</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *ap = <a class="code hl_function" href="attach_2attach_8c.html#a391fb25384a6e0c205de35fb24a1cc24">mutt_aptr_new</a>();</div>
<div class="line"><span class="lineno">  942</span>    ap-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a> = <a class="code hl_function" href="sendlib_8c.html#ac581b91b8ed18532dc94bf12335c178b">mutt_make_message_attach</a>(m_attach_new, m_attach_new-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i],</div>
<div class="line"><span class="lineno">  943</span>                                        <span class="keyword">true</span>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>);</div>
<div class="line"><span class="lineno">  944</span>    <span class="keywordflow">if</span> (ap-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>)</div>
<div class="line"><span class="lineno">  945</span>    {</div>
<div class="line"><span class="lineno">  946</span>      added_attachment = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  947</span>      <a class="code hl_function" href="compose_2functions_8c.html#a6d6517aa9ace035c5e1449dd0bbcdeed">update_idx</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>, ap);</div>
<div class="line"><span class="lineno">  948</span>    }</div>
<div class="line"><span class="lineno">  949</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  950</span>    {</div>
<div class="line"><span class="lineno">  951</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unable to attach&quot;</span>));</div>
<div class="line"><span class="lineno">  952</span>      <a class="code hl_function" href="attach_2attach_8c.html#a89df650a7e1c04159234f52044c82d84">mutt_aptr_free</a>(&amp;ap);</div>
<div class="line"><span class="lineno">  953</span>    }</div>
<div class="line"><span class="lineno">  954</span>  }</div>
<div class="line"><span class="lineno">  955</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a>);</div>
<div class="line"><span class="lineno">  956</span> </div>
<div class="line"><span class="lineno">  957</span>  <span class="keywordflow">if</span> (m_attach_new == m_attach)</div>
<div class="line"><span class="lineno">  958</span>  {</div>
<div class="line"><span class="lineno">  959</span>    m_attach-&gt;<a class="code hl_variable" href="structMailbox.html#ae55237419d0e842cd6efeed0c41d27e8">readonly</a> = old_readonly;</div>
<div class="line"><span class="lineno">  960</span>  }</div>
<div class="line"><span class="lineno">  961</span>  <a class="code hl_function" href="mx_8c.html#a4e4de522e1ca1db28736065f1499c55d">mx_fastclose_mailbox</a>(m_attach_new, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  962</span> </div>
<div class="line"><span class="lineno">  963</span>  <span class="comment">/* Restore old $sort variables */</span></div>
<div class="line"><span class="lineno">  964</span>  <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>, old_sort, NULL);</div>
<div class="line"><span class="lineno">  965</span>  <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;sort_aux&quot;</span>, old_sort_aux, NULL);</div>
<div class="line"><span class="lineno">  966</span>  <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;use_threads&quot;</span>, old_use_threads, NULL);</div>
<div class="line"><span class="lineno">  967</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno">  968</span>  <span class="keywordflow">if</span> (added_attachment)</div>
<div class="line"><span class="lineno">  969</span>    <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno">  970</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  971</span>}</div>
<div class="ttc" id="abrowser_2lib_8h_html_aef17206dea5302001a39f3c633e731d3"><div class="ttname"><a href="browser_2lib_8h.html#aef17206dea5302001a39f3c633e731d3">MUTT_SEL_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_SEL_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="browser_2lib_8h_source.html#l00057">lib.h:57</a></div></div>
<div class="ttc" id="abuffer_8c_html_ac958acbd189e463a2c3bbc2f23aaeb1e"><div class="ttname"><a href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a></div><div class="ttdeci">size_t buf_strcpy(struct Buffer *buf, const char *s)</div><div class="ttdoc">Copy a string into a Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00395">buffer.c:395</a></div></div>
<div class="ttc" id="abuffer_8h_html_a728ebc5a947b77c8d56db44ce553a7ab"><div class="ttname"><a href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a></div><div class="ttdeci">static const char * buf_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00096">buffer.h:96</a></div></div>
<div class="ttc" id="aconfig_2helpers_8c_html_a6b1589ee93ff51ef31f1d9324e138078"><div class="ttname"><a href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a></div><div class="ttdeci">const char * cs_subset_string(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00291">helpers.c:291</a></div></div>
<div class="ttc" id="aconfig_2helpers_8c_html_a95398bb7e62a54dcce14a027a926a193"><div class="ttname"><a href="config_2helpers_8c.html#a95398bb7e62a54dcce14a027a926a193">cs_subset_enum</a></div><div class="ttdeci">unsigned char cs_subset_enum(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a enumeration config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00071">helpers.c:71</a></div></div>
<div class="ttc" id="aconfig_2helpers_8c_html_af7f3de51c3c2f5b8f527f40c8397a3fc"><div class="ttname"><a href="config_2helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a></div><div class="ttdeci">short cs_subset_sort(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a sort config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00266">helpers.c:266</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_a7e9739eb3e94344633f7051c2fb9453e"><div class="ttname"><a href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&#39;s path string.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00214">mailbox.h:214</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921da05c2d20da557ac5b2c45a349eec1fba6"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da05c2d20da557ac5b2c45a349eec1fba6">MUTT_NOTMUCH</a></div><div class="ttdeci">@ MUTT_NOTMUCH</div><div class="ttdoc">&#39;Notmuch&#39; (virtual) Mailbox type</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00051">mailbox.h:51</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921da3b55e432fcbfdbd550d0aea5b03679de"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da3b55e432fcbfdbd550d0aea5b03679de">MUTT_POP</a></div><div class="ttdeci">@ MUTT_POP</div><div class="ttdoc">&#39;POP3&#39; Mailbox type</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00052">mailbox.h:52</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803">MUTT_NNTP</a></div><div class="ttdeci">@ MUTT_NNTP</div><div class="ttdoc">&#39;NNTP&#39; (Usenet) Mailbox type</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00049">mailbox.h:49</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921da7f541a03089370b1a260e344f8d1809b"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da7f541a03089370b1a260e344f8d1809b">MUTT_IMAP</a></div><div class="ttdeci">@ MUTT_IMAP</div><div class="ttdoc">&#39;IMAP&#39; Mailbox type</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00050">mailbox.h:50</a></div></div>
<div class="ttc" id="adialog_8c_html_a7c4678f81d8185d89e16e4befe94bb08"><div class="ttname"><a href="dialog_8c.html#a7c4678f81d8185d89e16e4befe94bb08">dialog_push</a></div><div class="ttdeci">void dialog_push(struct MuttWindow *dlg)</div><div class="ttdoc">Display a Window to the user.</div><div class="ttdef"><b>Definition</b> <a href="dialog_8c_source.html#l00109">dialog.c:109</a></div></div>
<div class="ttc" id="adialog_8c_html_a82616808183352fb315931b2bb3518c0"><div class="ttname"><a href="dialog_8c.html#a82616808183352fb315931b2bb3518c0">dialog_pop</a></div><div class="ttdeci">void dialog_pop(void)</div><div class="ttdoc">Hide a Window from the user.</div><div class="ttdef"><b>Definition</b> <a href="dialog_8c_source.html#l00142">dialog.c:142</a></div></div>
<div class="ttc" id="adispatcher_8h_html_a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa"><div class="ttname"><a href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a></div><div class="ttdeci">@ FR_ERROR</div><div class="ttdoc">Valid function - error occurred.</div><div class="ttdef"><b>Definition</b> <a href="dispatcher_8h_source.html#l00038">dispatcher.h:38</a></div></div>
<div class="ttc" id="adlg__index_8c_html_af8efcd0ce3952702bc60f84abc828f3c"><div class="ttname"><a href="dlg__index_8c.html#af8efcd0ce3952702bc60f84abc828f3c">index_pager_init</a></div><div class="ttdeci">struct MuttWindow * index_pager_init(void)</div><div class="ttdoc">Allocate the Windows for the Index/Pager.</div><div class="ttdef"><b>Definition</b> <a href="dlg__index_8c_source.html#l01436">dlg_index.c:1436</a></div></div>
<div class="ttc" id="aemail_2sort_8h_html_aefa89e4f16231d09e09e4693bebf6dd4"><div class="ttname"><a href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4">EmailSortType</a></div><div class="ttdeci">EmailSortType</div><div class="ttdoc">Methods for sorting Emails.</div><div class="ttdef"><b>Definition</b> <a href="email_2sort_8h_source.html#l00052">sort.h:53</a></div></div>
<div class="ttc" id="aglobals_8c_html_a0c2f0c035df413a8722b4897d5a88317"><div class="ttname"><a href="globals_8c.html#a0c2f0c035df413a8722b4897d5a88317">OptNews</a></div><div class="ttdeci">bool OptNews</div><div class="ttdoc">(pseudo) used to change reader mode</div><div class="ttdef"><b>Definition</b> <a href="globals_8c_source.html#l00064">globals.c:64</a></div></div>
<div class="ttc" id="agroup__gui__dlg_html_gaf4266da82ada988b3b2482b910ddb15a"><div class="ttname"><a href="group__gui__dlg.html#gaf4266da82ada988b3b2482b910ddb15a">dlg_index</a></div><div class="ttdeci">struct Mailbox * dlg_index(struct MuttWindow *dlg, struct Mailbox *m_init)</div><div class="ttdoc">Display a list of emails -.</div><div class="ttdef"><b>Definition</b> <a href="dlg__index_8c_source.html#l01099">dlg_index.c:1099</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00094">logging2.h:94</a></div></div>
<div class="ttc" id="agroup__mx__path__probe_html_ga0af5851670960cce257a6e5f9f9805ff"><div class="ttname"><a href="group__mx__path__probe.html#ga0af5851670960cce257a6e5f9f9805ff">nntp_path_probe</a></div><div class="ttdeci">enum MailboxType nntp_path_probe(const char *path, const struct stat *st)</div><div class="ttdoc">Is this an NNTP Mailbox?</div><div class="ttdef"><b>Definition</b> <a href="nntp_8c_source.html#l02785">nntp.c:2785</a></div></div>
<div class="ttc" id="agroup__mx__path__probe_html_ga5b33b7c070124e656f1a4e8c67c039ad"><div class="ttname"><a href="group__mx__path__probe.html#ga5b33b7c070124e656f1a4e8c67c039ad">pop_path_probe</a></div><div class="ttdeci">enum MailboxType pop_path_probe(const char *path, const struct stat *st)</div><div class="ttdoc">Is this a POP Mailbox?</div><div class="ttdef"><b>Definition</b> <a href="pop_8c_source.html#l01156">pop.c:1156</a></div></div>
<div class="ttc" id="agroup__mx__path__probe_html_gab4f27af8eb857a20834f445be3f498de"><div class="ttname"><a href="group__mx__path__probe.html#gab4f27af8eb857a20834f445be3f498de">imap_path_probe</a></div><div class="ttdeci">enum MailboxType imap_path_probe(const char *path, const struct stat *st)</div><div class="ttdoc">Is this an IMAP Mailbox?</div><div class="ttdef"><b>Definition</b> <a href="imap_8c_source.html#l02382">imap.c:2382</a></div></div>
<div class="ttc" id="amenu_2lib_8h_html_a073caf105025cd1e03e766c7e4e9ec2f"><div class="ttname"><a href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a></div><div class="ttdeci">#define MENU_REDRAW_FULL</div><div class="ttdoc">Redraw everything.</div><div class="ttdef"><b>Definition</b> <a href="menu_2lib_8h_source.html#l00059">lib.h:59</a></div></div>
<div class="ttc" id="amutt__window_8c_html_a52ff022e671a7fbdec773fc2d24e0e15"><div class="ttname"><a href="mutt__window_8c.html#a52ff022e671a7fbdec773fc2d24e0e15">mutt_window_free</a></div><div class="ttdeci">void mutt_window_free(struct MuttWindow **ptr)</div><div class="ttdoc">Free a Window and its children.</div><div class="ttdef"><b>Definition</b> <a href="mutt__window_8c_source.html#l00205">mutt_window.c:205</a></div></div>
<div class="ttc" id="amuttlib_8c_html_a777680c324667521d8c486051c22fe10"><div class="ttname"><a href="muttlib_8c.html#a777680c324667521d8c486051c22fe10">buf_pretty_mailbox</a></div><div class="ttdeci">void buf_pretty_mailbox(struct Buffer *buf)</div><div class="ttdoc">Shorten a mailbox path using &#39;~&#39; or &#39;=&#39;.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00518">muttlib.c:518</a></div></div>
<div class="ttc" id="amuttlib_8c_html_adde3990a0490dfba609fc94dbdbfd6b3"><div class="ttname"><a href="muttlib_8c.html#adde3990a0490dfba609fc94dbdbfd6b3">buf_expand_path</a></div><div class="ttdeci">void buf_expand_path(struct Buffer *buf)</div><div class="ttdoc">Create the canonical path.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00314">muttlib.c:314</a></div></div>
<div class="ttc" id="amview_8c_html_abfba0f2643d1fa54927eb2257b7e7cd4"><div class="ttname"><a href="mview_8c.html#abfba0f2643d1fa54927eb2257b7e7cd4">message_is_tagged</a></div><div class="ttdeci">bool message_is_tagged(struct Email *e)</div><div class="ttdoc">Is a message in the index tagged (and within limit)</div><div class="ttdef"><b>Definition</b> <a href="mview_8c_source.html#l00363">mview.c:363</a></div></div>
<div class="ttc" id="amx_8c_html_a4e4de522e1ca1db28736065f1499c55d"><div class="ttname"><a href="mx_8c.html#a4e4de522e1ca1db28736065f1499c55d">mx_fastclose_mailbox</a></div><div class="ttdeci">void mx_fastclose_mailbox(struct Mailbox *m, bool keep_account)</div><div class="ttdoc">Free up memory associated with the Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l00414">mx.c:414</a></div></div>
<div class="ttc" id="amx_8c_html_a6c4f4c51fa0b086d86a8638197c40578"><div class="ttname"><a href="mx_8c.html#a6c4f4c51fa0b086d86a8638197c40578">mx_mbox_open</a></div><div class="ttdeci">bool mx_mbox_open(struct Mailbox *m, OpenMailboxFlags flags)</div><div class="ttdoc">Open a mailbox and parse it.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l00288">mx.c:288</a></div></div>
<div class="ttc" id="amx_8c_html_add36baf7d8410fb37158defdaebe9a5d"><div class="ttname"><a href="mx_8c.html#add36baf7d8410fb37158defdaebe9a5d">mx_path_probe</a></div><div class="ttdeci">enum MailboxType mx_path_probe(const char *path)</div><div class="ttdoc">Find a mailbox that understands a path.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l01326">mx.c:1326</a></div></div>
<div class="ttc" id="amx_8c_html_addbeb100364d5be4dd89b74ac73ef067"><div class="ttname"><a href="mx_8c.html#addbeb100364d5be4dd89b74ac73ef067">mx_path_resolve</a></div><div class="ttdeci">struct Mailbox * mx_path_resolve(const char *path)</div><div class="ttdoc">Get a Mailbox for a path.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l01650">mx.c:1650</a></div></div>
<div class="ttc" id="amx_8c_html_af9e949965d56e69eb9a6a9aa640614bb"><div class="ttname"><a href="mx_8c.html#af9e949965d56e69eb9a6a9aa640614bb">mx_mbox_close</a></div><div class="ttdeci">enum MxStatus mx_mbox_close(struct Mailbox *m)</div><div class="ttdoc">Save changes and close mailbox.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l00598">mx.c:598</a></div></div>
<div class="ttc" id="amxapi_8h_html_a11b97885a0fc04bcd13572076e8a17ab"><div class="ttname"><a href="mxapi_8h.html#a11b97885a0fc04bcd13572076e8a17ab">MUTT_READONLY</a></div><div class="ttdeci">#define MUTT_READONLY</div><div class="ttdoc">Open in read-only mode.</div><div class="ttdef"><b>Definition</b> <a href="mxapi_8h_source.html#l00043">mxapi.h:43</a></div></div>
<div class="ttc" id="anntp_2lib_8h_html_aad55ac6624a236283f0521ebdee460eb"><div class="ttname"><a href="nntp_2lib_8h.html#aad55ac6624a236283f0521ebdee460eb">nntp_expand_path</a></div><div class="ttdeci">void nntp_expand_path(char *buf, size_t buflen, struct ConnAccount *acct)</div><div class="ttdoc">Make fully qualified url from newsgroup name.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00556">newsrc.c:556</a></div></div>
<div class="ttc" id="anntp_2lib_8h_html_ae58e3a5dcd99b6bbd0354b133fc220ce"><div class="ttname"><a href="nntp_2lib_8h.html#ae58e3a5dcd99b6bbd0354b133fc220ce">CurrentNewsSrv</a></div><div class="ttdeci">struct NntpAccountData * CurrentNewsSrv</div><div class="ttdoc">Current NNTP news server.</div><div class="ttdef"><b>Definition</b> <a href="nntp_8c_source.html#l00076">nntp.c:76</a></div></div>
<div class="ttc" id="anntp_2lib_8h_html_ae9ee1cc132aa482531fdc2463200e492"><div class="ttname"><a href="nntp_2lib_8h.html#ae9ee1cc132aa482531fdc2463200e492">nntp_select_server</a></div><div class="ttdeci">struct NntpAccountData * nntp_select_server(struct Mailbox *m, const char *server, bool leave_lock)</div><div class="ttdoc">Open a connection to an NNTP server.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00945">newsrc.c:945</a></div></div>
<div class="ttc" id="asendlib_8c_html_ac581b91b8ed18532dc94bf12335c178b"><div class="ttname"><a href="sendlib_8c.html#ac581b91b8ed18532dc94bf12335c178b">mutt_make_message_attach</a></div><div class="ttdeci">struct Body * mutt_make_message_attach(struct Mailbox *m, struct Email *e, bool attach_msg, struct ConfigSubset *sub)</div><div class="ttdoc">Create a message attachment.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00454">sendlib.c:454</a></div></div>
<div class="ttc" id="astructBuffer_html_a1d9ee60bcf94de702b15ec2b5d811995"><div class="ttname"><a href="structBuffer.html#a1d9ee60bcf94de702b15ec2b5d811995">Buffer::dsize</a></div><div class="ttdeci">size_t dsize</div><div class="ttdoc">Length of data.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00039">buffer.h:39</a></div></div>
<div class="ttc" id="astructBuffer_html_aeec1fd4af0ddf6765b0187466d4361b8"><div class="ttname"><a href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">Buffer::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">Pointer to data.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00037">buffer.h:37</a></div></div>
<div class="ttc" id="astructComposeSharedData_html_a2c07cd726149be67e01ff9fc10fe3991"><div class="ttname"><a href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">ComposeSharedData::mailbox</a></div><div class="ttdeci">struct Mailbox * mailbox</div><div class="ttdoc">Current Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="compose_2shared__data_8h_source.html#l00038">shared_data.h:38</a></div></div>
<div class="ttc" id="astructIndexSharedData_html"><div class="ttname"><a href="structIndexSharedData.html">IndexSharedData</a></div><div class="ttdoc">Data shared between Index, Pager and Sidebar.</div><div class="ttdef"><b>Definition</b> <a href="index_2shared__data_8h_source.html#l00036">shared_data.h:37</a></div></div>
<div class="ttc" id="astructIndexSharedData_html_aa7abab2dad25953b83db01a0b9bc07f5"><div class="ttname"><a href="structIndexSharedData.html#aa7abab2dad25953b83db01a0b9bc07f5">IndexSharedData::attach_msg</a></div><div class="ttdeci">bool attach_msg</div><div class="ttdoc">Are we in &quot;attach message&quot; mode?</div><div class="ttdef"><b>Definition</b> <a href="index_2shared__data_8h_source.html#l00046">shared_data.h:46</a></div></div>
<div class="ttc" id="astructMailbox_html"><div class="ttname"><a href="structMailbox.html">Mailbox</a></div><div class="ttdoc">A mailbox.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00078">mailbox.h:79</a></div></div>
<div class="ttc" id="astructMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00088">mailbox.h:88</a></div></div>
<div class="ttc" id="astructMailbox_html_a5638329fb2ebd4bbe1f4a949ec8de174"><div class="ttname"><a href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">Mailbox::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Mailbox type.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00102">mailbox.h:102</a></div></div>
<div class="ttc" id="astructMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00096">mailbox.h:96</a></div></div>
<div class="ttc" id="astructMailbox_html_ae55237419d0e842cd6efeed0c41d27e8"><div class="ttname"><a href="structMailbox.html#ae55237419d0e842cd6efeed0c41d27e8">Mailbox::readonly</a></div><div class="ttdeci">bool readonly</div><div class="ttdoc">Don&#39;t allow changes to the mailbox.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00116">mailbox.h:116</a></div></div>
<div class="ttc" id="astructMuttWindow_html"><div class="ttname"><a href="structMuttWindow.html">MuttWindow</a></div><div class="ttdef"><b>Definition</b> <a href="mutt__window_8h_source.html#l00122">mutt_window.h:123</a></div></div>
<div class="ttc" id="astructMuttWindow_html_a52d65bf614794e3385e279e71ac4fcbc"><div class="ttname"><a href="structMuttWindow.html#a52d65bf614794e3385e279e71ac4fcbc">MuttWindow::wdata</a></div><div class="ttdeci">void * wdata</div><div class="ttdoc">Private data.</div><div class="ttdef"><b>Definition</b> <a href="mutt__window_8h_source.html#l00145">mutt_window.h:145</a></div></div>
<div class="ttc" id="asubset_8c_html_a6ee598a96defed645b11cad6e6cb6512"><div class="ttname"><a href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a></div><div class="ttdeci">int cs_subset_str_native_set(const struct ConfigSubset *sub, const char *name, intptr_t value, struct Buffer *err)</div><div class="ttdoc">Natively set the value of a string config item.</div><div class="ttdef"><b>Definition</b> <a href="subset_8c_source.html#l00303">subset.c:303</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gab4dd80b28665cd32525b3bbb2f48e761_cgraph.svg" width="948" height="1891"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gaebb7ebbdaa1fd9cc02ea79f731ec272d" name="gaebb7ebbdaa1fd9cc02ea79f731ec272d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaebb7ebbdaa1fd9cc02ea79f731ec272d">&#9670;&#160;</a></span>op_attachment_detach()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_detach </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete the current entry - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l00976">976</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  977</span>{</div>
<div class="line"><span class="lineno">  978</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachCtx.html">AttachCtx</a> *actx = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>;</div>
<div class="line"><span class="lineno">  979</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(actx))</div>
<div class="line"><span class="lineno">  980</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno">  981</span> </div>
<div class="line"><span class="lineno">  982</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMenu.html">Menu</a> *menu = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>;</div>
<div class="line"><span class="lineno">  983</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(actx, menu);</div>
<div class="line"><span class="lineno">  984</span>  <span class="keywordflow">if</span> (cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a85722c8044f044e59047c3c8b12ef279">unowned</a>)</div>
<div class="line"><span class="lineno">  985</span>    cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  986</span> </div>
<div class="line"><span class="lineno">  987</span>  <span class="keywordtype">int</span> index = <a class="code hl_function" href="menu_2lib_8h.html#a67ee9260e41986eb4487124b004cff18">menu_get_index</a>(menu);</div>
<div class="line"><span class="lineno">  988</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="compose_2functions_8c.html#ae368aa194ea8e0a6b877e152c0f52eae">delete_attachment</a>(actx, index) == -1)</div>
<div class="line"><span class="lineno">  989</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno">  990</span> </div>
<div class="line"><span class="lineno">  991</span>  menu-&gt;<a class="code hl_variable" href="structMenu.html#a3b4aa1cc357ea62fec6e564ebcfe8799">num_tagged</a> = 0;</div>
<div class="line"><span class="lineno">  992</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a>; i++)</div>
<div class="line"><span class="lineno">  993</span>  {</div>
<div class="line"><span class="lineno">  994</span>    <span class="keywordflow">if</span> (actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#aaaa97781986925aa1f10f24be18243ab">tagged</a>)</div>
<div class="line"><span class="lineno">  995</span>      menu-&gt;<a class="code hl_variable" href="structMenu.html#a3b4aa1cc357ea62fec6e564ebcfe8799">num_tagged</a>++;</div>
<div class="line"><span class="lineno">  996</span>  }</div>
<div class="line"><span class="lineno">  997</span> </div>
<div class="line"><span class="lineno">  998</span>  <a class="code hl_function" href="dlg__compose_8c.html#a51ed67e9d27545c7982d196826bbc7bc">update_menu</a>(actx, menu, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  999</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1000</span> </div>
<div class="line"><span class="lineno"> 1001</span>  index = <a class="code hl_function" href="menu_2lib_8h.html#a67ee9260e41986eb4487124b004cff18">menu_get_index</a>(menu);</div>
<div class="line"><span class="lineno"> 1002</span>  <span class="keywordflow">if</span> (index == 0)</div>
<div class="line"><span class="lineno"> 1003</span>    shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[0]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>;</div>
<div class="line"><span class="lineno"> 1004</span> </div>
<div class="line"><span class="lineno"> 1005</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1006</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1007</span>}</div>
<div class="ttc" id="acompose_2functions_8c_html_a0b0529f94fccff91159e173fb58a7c64"><div class="ttname"><a href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a></div><div class="ttdeci">static bool check_count(struct AttachCtx *actx)</div><div class="ttdoc">Check if there are any attachments.</div><div class="ttdef"><b>Definition</b> <a href="compose_2functions_8c_source.html#l00220">functions.c:220</a></div></div>
<div class="ttc" id="acompose_2functions_8c_html_ae368aa194ea8e0a6b877e152c0f52eae"><div class="ttname"><a href="compose_2functions_8c.html#ae368aa194ea8e0a6b877e152c0f52eae">delete_attachment</a></div><div class="ttdeci">static int delete_attachment(struct AttachCtx *actx, int aidx)</div><div class="ttdoc">Delete an attachment.</div><div class="ttdef"><b>Definition</b> <a href="compose_2functions_8c_source.html#l00336">functions.c:336</a></div></div>
<div class="ttc" id="adlg__compose_8c_html_a51ed67e9d27545c7982d196826bbc7bc"><div class="ttname"><a href="dlg__compose_8c.html#a51ed67e9d27545c7982d196826bbc7bc">update_menu</a></div><div class="ttdeci">void update_menu(struct AttachCtx *actx, struct Menu *menu, bool init)</div><div class="ttdoc">Redraw the compose window.</div><div class="ttdef"><b>Definition</b> <a href="dlg__compose_8c_source.html#l00282">dlg_compose.c:282</a></div></div>
<div class="ttc" id="amenu_2lib_8h_html_a67ee9260e41986eb4487124b004cff18"><div class="ttname"><a href="menu_2lib_8h.html#a67ee9260e41986eb4487124b004cff18">menu_get_index</a></div><div class="ttdeci">int menu_get_index(struct Menu *menu)</div><div class="ttdoc">Get the current selection in the Menu.</div><div class="ttdef"><b>Definition</b> <a href="menu_8c_source.html#l00161">menu.c:161</a></div></div>
<div class="ttc" id="arecvattach_8c_html_a718168300f4a21fa0c1a28321aeaa6ee"><div class="ttname"><a href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a></div><div class="ttdeci">struct AttachPtr * current_attachment(struct AttachCtx *actx, struct Menu *menu)</div><div class="ttdoc">Get the current attachment.</div><div class="ttdef"><b>Definition</b> <a href="recvattach_8c_source.html#l00076">recvattach.c:76</a></div></div>
<div class="ttc" id="astructAttachCtx_html"><div class="ttname"><a href="structAttachCtx.html">AttachCtx</a></div><div class="ttdoc">A set of attachments.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00062">attach.h:63</a></div></div>
<div class="ttc" id="astructAttachCtx_html_a8954cda6f07f33628b3addf8bc2621fd"><div class="ttname"><a href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">AttachCtx::idx</a></div><div class="ttdeci">struct AttachPtr ** idx</div><div class="ttdoc">Array of attachments.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00067">attach.h:67</a></div></div>
<div class="ttc" id="astructAttachCtx_html_af02af835a67d8b3467f3a52ede4897f0"><div class="ttname"><a href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">AttachCtx::idxlen</a></div><div class="ttdeci">short idxlen</div><div class="ttdoc">Number of attachmentes.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00068">attach.h:68</a></div></div>
<div class="ttc" id="astructBody_html_a47191eabf16d34d0deb412c898ed629b"><div class="ttname"><a href="structBody.html#a47191eabf16d34d0deb412c898ed629b">Body::unlink</a></div><div class="ttdeci">bool unlink</div><div class="ttdoc">If true, filename should be unlink()ed before free()ing this structure.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00068">body.h:68</a></div></div>
<div class="ttc" id="astructBody_html_aaaa97781986925aa1f10f24be18243ab"><div class="ttname"><a href="structBody.html#aaaa97781986925aa1f10f24be18243ab">Body::tagged</a></div><div class="ttdeci">bool tagged</div><div class="ttdoc">This attachment is tagged.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00090">body.h:90</a></div></div>
<div class="ttc" id="astructEmail_html_a57ad6ac618c0f685804f6f5bb390b3a6"><div class="ttname"><a href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">Email::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">List of MIME parts.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00069">email.h:69</a></div></div>
<div class="ttc" id="astructMenu_html"><div class="ttname"><a href="structMenu.html">Menu</a></div><div class="ttdef"><b>Definition</b> <a href="menu_2lib_8h_source.html#l00078">lib.h:79</a></div></div>
<div class="ttc" id="astructMenu_html_a3b4aa1cc357ea62fec6e564ebcfe8799"><div class="ttname"><a href="structMenu.html#a3b4aa1cc357ea62fec6e564ebcfe8799">Menu::num_tagged</a></div><div class="ttdeci">int num_tagged</div><div class="ttdoc">Number of tagged entries.</div><div class="ttdef"><b>Definition</b> <a href="menu_2lib_8h_source.html#l00094">lib.h:94</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gaebb7ebbdaa1fd9cc02ea79f731ec272d_cgraph.svg" width="542" height="358"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gabcb9c8e736747602d590188a2583c349" name="gabcb9c8e736747602d590188a2583c349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabcb9c8e736747602d590188a2583c349">&#9670;&#160;</a></span>op_attachment_edit_content_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_edit_content_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit the 'Content-ID' of the attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01012">1012</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1013</span>{</div>
<div class="line"><span class="lineno"> 1014</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1015</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1016</span> </div>
<div class="line"><span class="lineno"> 1017</span>  <span class="keywordtype">int</span> rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1018</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1019</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1020</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1021</span> </div>
<div class="line"><span class="lineno"> 1022</span>  <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a04d719ada605ac008d4bf548db758480">content_id</a>;</div>
<div class="line"><span class="lineno"> 1023</span>  <span class="keywordflow">if</span> (<span class="keywordtype">id</span>)</div>
<div class="line"><span class="lineno"> 1024</span>  {</div>
<div class="line"><span class="lineno"> 1025</span>    <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(buf, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1026</span>  }</div>
<div class="line"><span class="lineno"> 1027</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1028</span>  {</div>
<div class="line"><span class="lineno"> 1029</span>    <span class="keywordtype">id</span> = <a class="code hl_function" href="compose_2functions_8c.html#a78c7433990448979005f6b6824848edd">gen_cid</a>();</div>
<div class="line"><span class="lineno"> 1030</span>    <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(buf, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1031</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1032</span>  }</div>
<div class="line"><span class="lineno"> 1033</span> </div>
<div class="line"><span class="lineno"> 1034</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<span class="stringliteral">&quot;Content-ID: &quot;</span>, buf, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a">HC_OTHER</a>, NULL, NULL) == 0)</div>
<div class="line"><span class="lineno"> 1035</span>  {</div>
<div class="line"><span class="lineno"> 1036</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(<span class="keywordtype">id</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf)))</div>
<div class="line"><span class="lineno"> 1037</span>    {</div>
<div class="line"><span class="lineno"> 1038</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="compose_2functions_8c.html#aa2b24f0cc84fe59a9a9542d307ac4e6f">check_cid</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf)))</div>
<div class="line"><span class="lineno"> 1039</span>      {</div>
<div class="line"><span class="lineno"> 1040</span>        <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a04d719ada605ac008d4bf548db758480">content_id</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno"> 1041</span>        <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a>);</div>
<div class="line"><span class="lineno"> 1042</span>        <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1043</span>        <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1044</span>        rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1045</span>      }</div>
<div class="line"><span class="lineno"> 1046</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1047</span>      {</div>
<div class="line"><span class="lineno"> 1048</span>        <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Content-ID can only contain the characters: -.0-9@A-Z_a-z&quot;</span>));</div>
<div class="line"><span class="lineno"> 1049</span>        rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1050</span>      }</div>
<div class="line"><span class="lineno"> 1051</span>    }</div>
<div class="line"><span class="lineno"> 1052</span>  }</div>
<div class="line"><span class="lineno"> 1053</span> </div>
<div class="line"><span class="lineno"> 1054</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno"> 1055</span> </div>
<div class="line"><span class="lineno"> 1056</span>  <span class="keywordflow">if</span> (rc != <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>)</div>
<div class="line"><span class="lineno"> 1057</span>    <a class="code hl_function" href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a>();</div>
<div class="line"><span class="lineno"> 1058</span> </div>
<div class="line"><span class="lineno"> 1059</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1060</span>}</div>
<div class="ttc" id="acompose_2functions_8c_html_a78c7433990448979005f6b6824848edd"><div class="ttname"><a href="compose_2functions_8c.html#a78c7433990448979005f6b6824848edd">gen_cid</a></div><div class="ttdeci">static char * gen_cid(void)</div><div class="ttdoc">Generate a random Content ID.</div><div class="ttdef"><b>Definition</b> <a href="compose_2functions_8c_source.html#l00237">functions.c:237</a></div></div>
<div class="ttc" id="acompose_2functions_8c_html_aa2b24f0cc84fe59a9a9542d307ac4e6f"><div class="ttname"><a href="compose_2functions_8c.html#aa2b24f0cc84fe59a9a9542d307ac4e6f">check_cid</a></div><div class="ttdeci">static bool check_cid(const char *cid)</div><div class="ttdoc">Check if a Content-ID is valid.</div><div class="ttdef"><b>Definition</b> <a href="compose_2functions_8c_source.html#l00253">functions.c:253</a></div></div>
<div class="ttc" id="agroup__gui__mw_html_gabcbd2498b412e9f8e9d953cafc01989c"><div class="ttname"><a href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a></div><div class="ttdeci">int mw_get_field(const char *prompt, struct Buffer *buf, CompletionFlags complete, enum HistoryClass hclass, const struct CompleteOps *comp_api, void *cdata)</div><div class="ttdoc">Ask the user for a string -.</div><div class="ttdef"><b>Definition</b> <a href="editor_2window_8c_source.html#l00272">window.c:272</a></div></div>
<div class="ttc" id="ahistory_2lib_8h_html_acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a"><div class="ttname"><a href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a">HC_OTHER</a></div><div class="ttdeci">@ HC_OTHER</div><div class="ttdoc">Miscellaneous strings.</div><div class="ttdef"><b>Definition</b> <a href="history_2lib_8h_source.html#l00059">lib.h:59</a></div></div>
<div class="ttc" id="amenu_2lib_8h_html_ada2a150b4a42da80d12b7e3be6d396f9"><div class="ttname"><a href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a></div><div class="ttdeci">#define MENU_REDRAW_CURRENT</div><div class="ttdoc">Redraw the current line of the menu.</div><div class="ttdef"><b>Definition</b> <a href="menu_2lib_8h_source.html#l00058">lib.h:58</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a6b6a50296dd2a31863a43379ef4a343d"><div class="ttname"><a href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a></div><div class="ttdeci">bool mutt_str_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00660">string.c:660</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_af8c32ffc64dd55e92001a974a4be6bbf"><div class="ttname"><a href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a></div><div class="ttdeci">char * mutt_str_replace(char **p, const char *s)</div><div class="ttdoc">Replace one string with another.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00282">string.c:282</a></div></div>
<div class="ttc" id="amutt_8h_html_ab0d3fda521b45dec654ff46bac59c8c2"><div class="ttname"><a href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_COMP_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00056">mutt.h:56</a></div></div>
<div class="ttc" id="astructBody_html_a04d719ada605ac008d4bf548db758480"><div class="ttname"><a href="structBody.html#a04d719ada605ac008d4bf548db758480">Body::content_id</a></div><div class="ttdeci">char * content_id</div><div class="ttdoc">Content-Id (RFC2392)</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00058">body.h:58</a></div></div>
</div><!-- fragment --><div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gabcb9c8e736747602d590188a2583c349_cgraph.svg" width="530" height="774"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga393e7e045153dd66c353dd5eba293126" name="ga393e7e045153dd66c353dd5eba293126"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga393e7e045153dd66c353dd5eba293126">&#9670;&#160;</a></span>op_attachment_edit_description()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_edit_description </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit attachment description - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01065">1065</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1066</span>{</div>
<div class="line"><span class="lineno"> 1067</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1068</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1069</span> </div>
<div class="line"><span class="lineno"> 1070</span>  <span class="keywordtype">int</span> rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1071</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1072</span> </div>
<div class="line"><span class="lineno"> 1073</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1074</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1075</span>  <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(buf, cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a>);</div>
<div class="line"><span class="lineno"> 1076</span> </div>
<div class="line"><span class="lineno"> 1077</span>  <span class="comment">/* header names should not be translated */</span></div>
<div class="line"><span class="lineno"> 1078</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<span class="stringliteral">&quot;Description: &quot;</span>, buf, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a">HC_OTHER</a>, NULL, NULL) == 0)</div>
<div class="line"><span class="lineno"> 1079</span>  {</div>
<div class="line"><span class="lineno"> 1080</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf)))</div>
<div class="line"><span class="lineno"> 1081</span>    {</div>
<div class="line"><span class="lineno"> 1082</span>      <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a90db5151872e23e56a8f31d68925c121">description</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno"> 1083</span>      <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a>);</div>
<div class="line"><span class="lineno"> 1084</span>      <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1085</span>      rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1086</span>    }</div>
<div class="line"><span class="lineno"> 1087</span>  }</div>
<div class="line"><span class="lineno"> 1088</span> </div>
<div class="line"><span class="lineno"> 1089</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno"> 1090</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1091</span>}</div>
<div class="ttc" id="astructBody_html_a90db5151872e23e56a8f31d68925c121"><div class="ttname"><a href="structBody.html#a90db5151872e23e56a8f31d68925c121">Body::description</a></div><div class="ttdeci">char * description</div><div class="ttdoc">content-description</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00055">body.h:55</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga393e7e045153dd66c353dd5eba293126_cgraph.svg" width="530" height="560"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gaa02a2c84df82db6799ea7ba7d9ebf334" name="gaa02a2c84df82db6799ea7ba7d9ebf334"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa02a2c84df82db6799ea7ba7d9ebf334">&#9670;&#160;</a></span>op_attachment_edit_encoding()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_edit_encoding </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit attachment transfer-encoding - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01096">1096</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1097</span>{</div>
<div class="line"><span class="lineno"> 1098</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1099</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1100</span> </div>
<div class="line"><span class="lineno"> 1101</span>  <span class="keywordtype">int</span> rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1102</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1103</span> </div>
<div class="line"><span class="lineno"> 1104</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1105</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1106</span>  <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(buf, <a class="code hl_define" href="mime_8h.html#a94255dc776bc865448f83758d3176aa6">ENCODING</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a>));</div>
<div class="line"><span class="lineno"> 1107</span> </div>
<div class="line"><span class="lineno"> 1108</span>  <span class="keywordflow">if</span> ((<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<span class="stringliteral">&quot;Content-Transfer-Encoding: &quot;</span>, buf, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>,</div>
<div class="line"><span class="lineno"> 1109</span>                    <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a">HC_OTHER</a>, NULL, NULL) == 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1110</span>      !<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(buf))</div>
<div class="line"><span class="lineno"> 1111</span>  {</div>
<div class="line"><span class="lineno"> 1112</span>    <span class="keywordtype">int</span> enc = <a class="code hl_function" href="email_2parse_8c.html#a8692f01c25d10e357dbeee470ba26c2c">mutt_check_encoding</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno"> 1113</span>    <span class="keywordflow">if</span> ((enc != <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a18d61a8aef64facb444f1987ee81c5c9">ENC_OTHER</a>) &amp;&amp; (enc != <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a17c00808bfbeb61dc2a001baf0aac5bd">ENC_UUENCODED</a>))</div>
<div class="line"><span class="lineno"> 1114</span>    {</div>
<div class="line"><span class="lineno"> 1115</span>      <span class="keywordflow">if</span> (enc != cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a>)</div>
<div class="line"><span class="lineno"> 1116</span>      {</div>
<div class="line"><span class="lineno"> 1117</span>        cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> = enc;</div>
<div class="line"><span class="lineno"> 1118</span>        <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a>);</div>
<div class="line"><span class="lineno"> 1119</span>        <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1120</span>        <a class="code hl_function" href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a>();</div>
<div class="line"><span class="lineno"> 1121</span>        <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1122</span>        rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1123</span>      }</div>
<div class="line"><span class="lineno"> 1124</span>    }</div>
<div class="line"><span class="lineno"> 1125</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1126</span>    {</div>
<div class="line"><span class="lineno"> 1127</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Invalid encoding&quot;</span>));</div>
<div class="line"><span class="lineno"> 1128</span>      rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1129</span>    }</div>
<div class="line"><span class="lineno"> 1130</span>  }</div>
<div class="line"><span class="lineno"> 1131</span> </div>
<div class="line"><span class="lineno"> 1132</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno"> 1133</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1134</span>}</div>
<div class="ttc" id="aemail_2parse_8c_html_a8692f01c25d10e357dbeee470ba26c2c"><div class="ttname"><a href="email_2parse_8c.html#a8692f01c25d10e357dbeee470ba26c2c">mutt_check_encoding</a></div><div class="ttdeci">int mutt_check_encoding(const char *c)</div><div class="ttdoc">Check the encoding type.</div><div class="ttdef"><b>Definition</b> <a href="email_2parse_8c_source.html#l00436">parse.c:436</a></div></div>
<div class="ttc" id="amime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61a17c00808bfbeb61dc2a001baf0aac5bd"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a17c00808bfbeb61dc2a001baf0aac5bd">ENC_UUENCODED</a></div><div class="ttdeci">@ ENC_UUENCODED</div><div class="ttdoc">UUEncoded text.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00054">mime.h:54</a></div></div>
<div class="ttc" id="amime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61a18d61a8aef64facb444f1987ee81c5c9"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a18d61a8aef64facb444f1987ee81c5c9">ENC_OTHER</a></div><div class="ttdeci">@ ENC_OTHER</div><div class="ttdoc">Encoding unknown.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00048">mime.h:48</a></div></div>
<div class="ttc" id="amime_8h_html_a94255dc776bc865448f83758d3176aa6"><div class="ttname"><a href="mime_8h.html#a94255dc776bc865448f83758d3176aa6">ENCODING</a></div><div class="ttdeci">#define ENCODING(x)</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00092">mime.h:92</a></div></div>
<div class="ttc" id="astructBody_html_ad2f05b8ff24813de41988e63de5d6a31"><div class="ttname"><a href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">Body::encoding</a></div><div class="ttdeci">unsigned int encoding</div><div class="ttdoc">content-transfer-encoding, ContentEncoding</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00041">body.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gaa02a2c84df82db6799ea7ba7d9ebf334_cgraph.svg" width="534" height="672"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga90dcf2b2a4cb3f0d6585f8fc4a3f5f5e" name="ga90dcf2b2a4cb3f0d6585f8fc4a3f5f5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga90dcf2b2a4cb3f0d6585f8fc4a3f5f5e">&#9670;&#160;</a></span>op_attachment_edit_language()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_edit_language </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit the 'Content-Language' of the attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01139">1139</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1140</span>{</div>
<div class="line"><span class="lineno"> 1141</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1142</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1143</span> </div>
<div class="line"><span class="lineno"> 1144</span>  <span class="keywordtype">int</span> rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1145</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1146</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1147</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1148</span> </div>
<div class="line"><span class="lineno"> 1149</span>  <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(buf, cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a043f55e8f15bc6f1324d35cb5d7f061c">language</a>);</div>
<div class="line"><span class="lineno"> 1150</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<span class="stringliteral">&quot;Content-Language: &quot;</span>, buf, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a">HC_OTHER</a>, NULL, NULL) == 0)</div>
<div class="line"><span class="lineno"> 1151</span>  {</div>
<div class="line"><span class="lineno"> 1152</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a043f55e8f15bc6f1324d35cb5d7f061c">language</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf)))</div>
<div class="line"><span class="lineno"> 1153</span>    {</div>
<div class="line"><span class="lineno"> 1154</span>      <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a043f55e8f15bc6f1324d35cb5d7f061c">language</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno"> 1155</span>      <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a>);</div>
<div class="line"><span class="lineno"> 1156</span>      <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1157</span>      <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1158</span>      rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1159</span>    }</div>
<div class="line"><span class="lineno"> 1160</span>    <a class="code hl_function" href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a>();</div>
<div class="line"><span class="lineno"> 1161</span>  }</div>
<div class="line"><span class="lineno"> 1162</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1163</span>  {</div>
<div class="line"><span class="lineno"> 1164</span>    <a class="code hl_define" href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Empty &#39;Content-Language&#39;&quot;</span>));</div>
<div class="line"><span class="lineno"> 1165</span>    rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1166</span>  }</div>
<div class="line"><span class="lineno"> 1167</span> </div>
<div class="line"><span class="lineno"> 1168</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno"> 1169</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1170</span>}</div>
<div class="ttc" id="agroup__logging__api_html_ga377d6ae04687e3cac3da87e05bc7de5d"><div class="ttname"><a href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a></div><div class="ttdeci">#define mutt_warning(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00091">logging2.h:91</a></div></div>
<div class="ttc" id="astructBody_html_a043f55e8f15bc6f1324d35cb5d7f061c"><div class="ttname"><a href="structBody.html#a043f55e8f15bc6f1324d35cb5d7f061c">Body::language</a></div><div class="ttdeci">char * language</div><div class="ttdoc">content-language (RFC8255)</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00078">body.h:78</a></div></div>
</div><!-- fragment --><div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga90dcf2b2a4cb3f0d6585f8fc4a3f5f5e_cgraph.svg" width="530" height="667"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gadd9d3ff6bbc3e6e0ced541b350c37a16" name="gadd9d3ff6bbc3e6e0ced541b350c37a16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadd9d3ff6bbc3e6e0ced541b350c37a16">&#9670;&#160;</a></span>op_attachment_edit_mime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_edit_mime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit attachment using mailcap entry - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01175">1175</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1176</span>{</div>
<div class="line"><span class="lineno"> 1177</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1178</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1179</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1180</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1181</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt__attach_8c.html#a0b2292184984705d60be088b9dbbecfb">mutt_edit_attachment</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>))</div>
<div class="line"><span class="lineno"> 1182</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1183</span> </div>
<div class="line"><span class="lineno"> 1184</span>  <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>);</div>
<div class="line"><span class="lineno"> 1185</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a>);</div>
<div class="line"><span class="lineno"> 1186</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1187</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1188</span>}</div>
<div class="ttc" id="amutt__attach_8c_html_a0b2292184984705d60be088b9dbbecfb"><div class="ttname"><a href="mutt__attach_8c.html#a0b2292184984705d60be088b9dbbecfb">mutt_edit_attachment</a></div><div class="ttdeci">bool mutt_edit_attachment(struct Body *b)</div><div class="ttdoc">Edit an attachment.</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8c_source.html#l00265">mutt_attach.c:265</a></div></div>
<div class="ttc" id="asendlib_8c_html_a3360a74ad39f0bb8e7ae4f84cc52f3be"><div class="ttname"><a href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a></div><div class="ttdeci">void mutt_update_encoding(struct Body *b, struct ConfigSubset *sub)</div><div class="ttdoc">Update the encoding type.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00422">sendlib.c:422</a></div></div>
</div><!-- fragment --><div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gadd9d3ff6bbc3e6e0ced541b350c37a16_cgraph.svg" width="408" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga078aa018edf154aa25c5c454ff23cfda" name="ga078aa018edf154aa25c5c454ff23cfda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga078aa018edf154aa25c5c454ff23cfda">&#9670;&#160;</a></span>op_attachment_edit_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_edit_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit attachment content type - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01193">1193</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1194</span>{</div>
<div class="line"><span class="lineno"> 1195</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1196</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1197</span> </div>
<div class="line"><span class="lineno"> 1198</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1199</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1200</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="external_8c.html#a9b5874c3558cb300404bb50f60fc6a31">mutt_edit_content_type</a>(NULL, cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>, NULL))</div>
<div class="line"><span class="lineno"> 1201</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1202</span> </div>
<div class="line"><span class="lineno"> 1203</span>  <span class="comment">/* this may have been a change to text/something */</span></div>
<div class="line"><span class="lineno"> 1204</span>  <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>);</div>
<div class="line"><span class="lineno"> 1205</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a>);</div>
<div class="line"><span class="lineno"> 1206</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1207</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1208</span>}</div>
<div class="ttc" id="aexternal_8c_html_a9b5874c3558cb300404bb50f60fc6a31"><div class="ttname"><a href="external_8c.html#a9b5874c3558cb300404bb50f60fc6a31">mutt_edit_content_type</a></div><div class="ttdeci">bool mutt_edit_content_type(struct Email *e, struct Body *b, FILE *fp)</div><div class="ttdoc">Edit the content type of an attachment.</div><div class="ttdef"><b>Definition</b> <a href="external_8c_source.html#l01073">external.c:1073</a></div></div>
</div><!-- fragment --><div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga078aa018edf154aa25c5c454ff23cfda_cgraph.svg" width="407" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga2f09409b0822ed481264a99119f48097" name="ga2f09409b0822ed481264a99119f48097"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2f09409b0822ed481264a99119f48097">&#9670;&#160;</a></span>op_attachment_filter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_filter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Filter attachment through a shell command - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>
<p>This function handles:</p><ul>
<li>OP_ATTACHMENT_FILTER</li>
<li>OP_PIPE </li>
</ul>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01217">1217</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1218</span>{</div>
<div class="line"><span class="lineno"> 1219</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachCtx.html">AttachCtx</a> *actx = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>;</div>
<div class="line"><span class="lineno"> 1220</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(actx))</div>
<div class="line"><span class="lineno"> 1221</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1222</span> </div>
<div class="line"><span class="lineno"> 1223</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMenu.html">Menu</a> *menu = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>;</div>
<div class="line"><span class="lineno"> 1224</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(actx, menu);</div>
<div class="line"><span class="lineno"> 1225</span>  <span class="keywordflow">if</span> (cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)</div>
<div class="line"><span class="lineno"> 1226</span>  {</div>
<div class="line"><span class="lineno"> 1227</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t filter multipart attachments&quot;</span>));</div>
<div class="line"><span class="lineno"> 1228</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1229</span>  }</div>
<div class="line"><span class="lineno"> 1230</span>  <a class="code hl_function" href="mutt__attach_8h.html#a864d3327398fde25536c45736abde530">mutt_pipe_attachment_list</a>(actx, NULL, menu-&gt;<a class="code hl_variable" href="structMenu.html#ae3e67808ddefbe6fb0052de6c3019882">tag_prefix</a>, cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>,</div>
<div class="line"><span class="lineno"> 1231</span>                            (op == OP_ATTACHMENT_FILTER));</div>
<div class="line"><span class="lineno"> 1232</span>  <span class="keywordflow">if</span> (op == OP_ATTACHMENT_FILTER) <span class="comment">/* cte might have changed */</span></div>
<div class="line"><span class="lineno"> 1233</span>  {</div>
<div class="line"><span class="lineno"> 1234</span>    <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(menu, menu-&gt;<a class="code hl_variable" href="structMenu.html#ae3e67808ddefbe6fb0052de6c3019882">tag_prefix</a> ? <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a> : <a class="code hl_define" href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a>);</div>
<div class="line"><span class="lineno"> 1235</span>  }</div>
<div class="line"><span class="lineno"> 1236</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1237</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1238</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1239</span>}</div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a></div><div class="ttdeci">@ TYPE_MULTIPART</div><div class="ttdoc">Type: &#39;multipart/*&#39;.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00037">mime.h:37</a></div></div>
<div class="ttc" id="amutt__attach_8h_html_a864d3327398fde25536c45736abde530"><div class="ttname"><a href="mutt__attach_8h.html#a864d3327398fde25536c45736abde530">mutt_pipe_attachment_list</a></div><div class="ttdeci">void mutt_pipe_attachment_list(struct AttachCtx *actx, FILE *fp, bool tag, struct Body *b, bool filter)</div><div class="ttdoc">Pipe a list of attachments to a command.</div><div class="ttdef"><b>Definition</b> <a href="recvattach_8c_source.html#l00723">recvattach.c:723</a></div></div>
<div class="ttc" id="astructBody_html_af77d79aadb278bef8f2829c268f2486f"><div class="ttname"><a href="structBody.html#af77d79aadb278bef8f2829c268f2486f">Body::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdoc">content-type primary type, ContentType</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00040">body.h:40</a></div></div>
<div class="ttc" id="astructMenu_html_ae3e67808ddefbe6fb0052de6c3019882"><div class="ttname"><a href="structMenu.html#ae3e67808ddefbe6fb0052de6c3019882">Menu::tag_prefix</a></div><div class="ttdeci">bool tag_prefix</div><div class="ttdoc">User has pressed &lt;tag-prefix&gt;</div><div class="ttdef"><b>Definition</b> <a href="menu_2lib_8h_source.html#l00085">lib.h:85</a></div></div>
</div><!-- fragment --><div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga2f09409b0822ed481264a99119f48097_cgraph.svg" width="394" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gac9c995cc61fb0630198151698718d751" name="gac9c995cc61fb0630198151698718d751"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac9c995cc61fb0630198151698718d751">&#9670;&#160;</a></span>op_attachment_get_attachment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_get_attachment </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a temporary copy of an attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01244">1244</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1245</span>{</div>
<div class="line"><span class="lineno"> 1246</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachCtx.html">AttachCtx</a> *actx = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>;</div>
<div class="line"><span class="lineno"> 1247</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(actx))</div>
<div class="line"><span class="lineno"> 1248</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1249</span> </div>
<div class="line"><span class="lineno"> 1250</span>  <span class="keywordtype">int</span> rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1251</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMenu.html">Menu</a> *menu = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>;</div>
<div class="line"><span class="lineno"> 1252</span>  <span class="keyword">struct </span>BodyArray ba = <a class="code hl_define" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div>
<div class="line"><span class="lineno"> 1253</span>  <a class="code hl_function" href="recvattach_8c.html#afe651b768f8b166c7f6386a49f31bc25">ba_add_tagged</a>(&amp;ba, actx, menu);</div>
<div class="line"><span class="lineno"> 1254</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="array_8h.html#a748cb2df8cbe952b6fff91d62811a20a">ARRAY_EMPTY</a>(&amp;ba))</div>
<div class="line"><span class="lineno"> 1255</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1256</span> </div>
<div class="line"><span class="lineno"> 1257</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> **bp = NULL;</div>
<div class="line"><span class="lineno"> 1258</span>  <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(bp, &amp;ba)</div>
<div class="line"><span class="lineno"> 1259</span>  {</div>
<div class="line"><span class="lineno"> 1260</span>    <span class="keywordflow">if</span> ((*bp)-&gt;type == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)</div>
<div class="line"><span class="lineno"> 1261</span>    {</div>
<div class="line"><span class="lineno"> 1262</span>      <a class="code hl_define" href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t get multipart attachments&quot;</span>));</div>
<div class="line"><span class="lineno"> 1263</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1264</span>    }</div>
<div class="line"><span class="lineno"> 1265</span>    <a class="code hl_function" href="mutt__attach_8c.html#a27dfd377ebe2a1b6f3cff2b1acae472d">mutt_get_tmp_attachment</a>(*bp);</div>
<div class="line"><span class="lineno"> 1266</span>  }</div>
<div class="line"><span class="lineno"> 1267</span> </div>
<div class="line"><span class="lineno"> 1268</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(menu, <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a>);</div>
<div class="line"><span class="lineno"> 1269</span>  rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1270</span> </div>
<div class="line"><span class="lineno"> 1271</span>done:</div>
<div class="line"><span class="lineno"> 1272</span>  <a class="code hl_define" href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a>(&amp;ba);</div>
<div class="line"><span class="lineno"> 1273</span>  <span class="comment">/* No send2hook since this doesn&#39;t change the message. */</span></div>
<div class="line"><span class="lineno"> 1274</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1275</span>}</div>
<div class="ttc" id="aarray_8h_html_a6b8ea5fb2f366d7716f5042b347093a6"><div class="ttname"><a href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a></div><div class="ttdeci">#define ARRAY_FOREACH(elem, head)</div><div class="ttdoc">Iterate over all elements of the array.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00214">array.h:214</a></div></div>
<div class="ttc" id="aarray_8h_html_a748cb2df8cbe952b6fff91d62811a20a"><div class="ttname"><a href="array_8h.html#a748cb2df8cbe952b6fff91d62811a20a">ARRAY_EMPTY</a></div><div class="ttdeci">#define ARRAY_EMPTY(head)</div><div class="ttdoc">Check if an array is empty.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00074">array.h:74</a></div></div>
<div class="ttc" id="aarray_8h_html_aaa8805bd90a2015d8f5eb0fe3bb13b3f"><div class="ttname"><a href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a></div><div class="ttdeci">#define ARRAY_FREE(head)</div><div class="ttdoc">Release all memory.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00204">array.h:204</a></div></div>
<div class="ttc" id="aarray_8h_html_af50a4967d27a0531a1b10a23fc22fe05"><div class="ttname"><a href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a></div><div class="ttdeci">#define ARRAY_HEAD_INITIALIZER</div><div class="ttdoc">Static initializer for arrays.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00058">array.h:58</a></div></div>
<div class="ttc" id="amutt__attach_8c_html_a27dfd377ebe2a1b6f3cff2b1acae472d"><div class="ttname"><a href="mutt__attach_8c.html#a27dfd377ebe2a1b6f3cff2b1acae472d">mutt_get_tmp_attachment</a></div><div class="ttdeci">int mutt_get_tmp_attachment(struct Body *b)</div><div class="ttdoc">Get a temporary copy of an attachment.</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8c_source.html#l00072">mutt_attach.c:72</a></div></div>
<div class="ttc" id="arecvattach_8c_html_afe651b768f8b166c7f6386a49f31bc25"><div class="ttname"><a href="recvattach_8c.html#afe651b768f8b166c7f6386a49f31bc25">ba_add_tagged</a></div><div class="ttdeci">int ba_add_tagged(struct BodyArray *ba, struct AttachCtx *actx, struct Menu *menu)</div><div class="ttdoc">Get an array of tagged Attachments.</div><div class="ttdef"><b>Definition</b> <a href="recvattach_8c_source.html#l01241">recvattach.c:1241</a></div></div>
<div class="ttc" id="astructBody_html"><div class="ttname"><a href="structBody.html">Body</a></div><div class="ttdoc">The body of an email.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00035">body.h:36</a></div></div>
</div><!-- fragment --><div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gac9c995cc61fb0630198151698718d751_cgraph.svg" width="464" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga10f90762d5fd003f822dd65f7dac74d7" name="ga10f90762d5fd003f822dd65f7dac74d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga10f90762d5fd003f822dd65f7dac74d7">&#9670;&#160;</a></span>op_attachment_group_alts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_group_alts </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="structGroup.html" title="A set of email addresses.">Group</a> tagged attachments as 'multipart/alternative' - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01280">1280</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1281</span>{</div>
<div class="line"><span class="lineno"> 1282</span>  <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>-&gt;<a class="code hl_variable" href="structMenu.html#a3b4aa1cc357ea62fec6e564ebcfe8799">num_tagged</a> &lt; 2)</div>
<div class="line"><span class="lineno"> 1283</span>  {</div>
<div class="line"><span class="lineno"> 1284</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Grouping &#39;alternatives&#39; requires at least 2 tagged messages&quot;</span>));</div>
<div class="line"><span class="lineno"> 1285</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1286</span>  }</div>
<div class="line"><span class="lineno"> 1287</span> </div>
<div class="line"><span class="lineno"> 1288</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="compose_2functions_8c.html#a468c081187199453be2b5f3d55532449">group_attachments</a>(shared, <span class="stringliteral">&quot;alternative&quot;</span>);</div>
<div class="line"><span class="lineno"> 1289</span>}</div>
<div class="ttc" id="acompose_2functions_8c_html_a468c081187199453be2b5f3d55532449"><div class="ttname"><a href="compose_2functions_8c.html#a468c081187199453be2b5f3d55532449">group_attachments</a></div><div class="ttdeci">static int group_attachments(struct ComposeSharedData *shared, char *subtype)</div><div class="ttdoc">Group tagged attachments into a multipart group.</div><div class="ttdef"><b>Definition</b> <a href="compose_2functions_8c_source.html#l00517">functions.c:517</a></div></div>
</div><!-- fragment --><div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga10f90762d5fd003f822dd65f7dac74d7_cgraph.svg" width="384" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga085885d16b91e505d669e57d3d6037d2" name="ga085885d16b91e505d669e57d3d6037d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga085885d16b91e505d669e57d3d6037d2">&#9670;&#160;</a></span>op_attachment_group_lingual()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_group_lingual </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="structGroup.html" title="A set of email addresses.">Group</a> tagged attachments as 'multipart/multilingual' - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01294">1294</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1295</span>{</div>
<div class="line"><span class="lineno"> 1296</span>  <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>-&gt;<a class="code hl_variable" href="structMenu.html#a3b4aa1cc357ea62fec6e564ebcfe8799">num_tagged</a> &lt; 2)</div>
<div class="line"><span class="lineno"> 1297</span>  {</div>
<div class="line"><span class="lineno"> 1298</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Grouping &#39;multilingual&#39; requires at least 2 tagged messages&quot;</span>));</div>
<div class="line"><span class="lineno"> 1299</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1300</span>  }</div>
<div class="line"><span class="lineno"> 1301</span> </div>
<div class="line"><span class="lineno"> 1302</span>  <span class="comment">/* traverse to see whether all the parts have Content-Language: set */</span></div>
<div class="line"><span class="lineno"> 1303</span>  <span class="keywordtype">int</span> tagged_with_lang_num = 0;</div>
<div class="line"><span class="lineno"> 1304</span>  <span class="keywordflow">for</span> (<span class="keyword">struct</span> <a class="code hl_struct" href="structBody.html">Body</a> *b = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>; b; b = b-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1305</span>    <span class="keywordflow">if</span> (b-&gt;tagged &amp;&amp; b-&gt;language &amp;&amp; *b-&gt;language)</div>
<div class="line"><span class="lineno"> 1306</span>      tagged_with_lang_num++;</div>
<div class="line"><span class="lineno"> 1307</span> </div>
<div class="line"><span class="lineno"> 1308</span>  <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>-&gt;<a class="code hl_variable" href="structMenu.html#a3b4aa1cc357ea62fec6e564ebcfe8799">num_tagged</a> != tagged_with_lang_num)</div>
<div class="line"><span class="lineno"> 1309</span>  {</div>
<div class="line"><span class="lineno"> 1310</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="question_2lib_8h.html#ae359ab94312d9ae6bcad5ab5b52bd529">query_yesorno</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Not all parts have &#39;Content-Language&#39; set, continue?&quot;</span>),</div>
<div class="line"><span class="lineno"> 1311</span>                      <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>) != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div>
<div class="line"><span class="lineno"> 1312</span>    {</div>
<div class="line"><span class="lineno"> 1313</span>      <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Not sending this message&quot;</span>));</div>
<div class="line"><span class="lineno"> 1314</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1315</span>    }</div>
<div class="line"><span class="lineno"> 1316</span>  }</div>
<div class="line"><span class="lineno"> 1317</span> </div>
<div class="line"><span class="lineno"> 1318</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="compose_2functions_8c.html#a468c081187199453be2b5f3d55532449">group_attachments</a>(shared, <span class="stringliteral">&quot;multilingual&quot;</span>);</div>
<div class="line"><span class="lineno"> 1319</span>}</div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a></div><div class="ttdeci">@ MUTT_YES</div><div class="ttdoc">User answered &#39;Yes&#39;, or assume &#39;Yes&#39;.</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00039">quad.h:39</a></div></div>
<div class="ttc" id="aquestion_2lib_8h_html_ae359ab94312d9ae6bcad5ab5b52bd529"><div class="ttname"><a href="question_2lib_8h.html#ae359ab94312d9ae6bcad5ab5b52bd529">query_yesorno</a></div><div class="ttdeci">enum QuadOption query_yesorno(const char *prompt, enum QuadOption def)</div><div class="ttdoc">Ask the user a Yes/No question.</div><div class="ttdef"><b>Definition</b> <a href="question_8c_source.html#l00325">question.c:325</a></div></div>
<div class="ttc" id="astructBody_html_ac55cdfce46eed13151dcfe9b329d254c"><div class="ttname"><a href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">Body::next</a></div><div class="ttdeci">struct Body * next</div><div class="ttdoc">next attachment in the list</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00072">body.h:72</a></div></div>
</div><!-- fragment --><div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga085885d16b91e505d669e57d3d6037d2_cgraph.svg" width="358" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga3f08adde5f181891d0eae42d93306e84" name="ga3f08adde5f181891d0eae42d93306e84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3f08adde5f181891d0eae42d93306e84">&#9670;&#160;</a></span>op_attachment_group_related()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_group_related </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="structGroup.html" title="A set of email addresses.">Group</a> tagged attachments as 'multipart/related' - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01324">1324</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1325</span>{</div>
<div class="line"><span class="lineno"> 1326</span>  <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>-&gt;<a class="code hl_variable" href="structMenu.html#a3b4aa1cc357ea62fec6e564ebcfe8799">num_tagged</a> &lt; 2)</div>
<div class="line"><span class="lineno"> 1327</span>  {</div>
<div class="line"><span class="lineno"> 1328</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Grouping &#39;related&#39; requires at least 2 tagged messages&quot;</span>));</div>
<div class="line"><span class="lineno"> 1329</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1330</span>  }</div>
<div class="line"><span class="lineno"> 1331</span> </div>
<div class="line"><span class="lineno"> 1332</span>  <span class="comment">// ensure Content-ID is set for tagged attachments</span></div>
<div class="line"><span class="lineno"> 1333</span>  <span class="keywordflow">for</span> (<span class="keyword">struct</span> <a class="code hl_struct" href="structBody.html">Body</a> *b = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>; b; b = b-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1334</span>  {</div>
<div class="line"><span class="lineno"> 1335</span>    <span class="keywordflow">if</span> (!b-&gt;tagged || (b-&gt;type == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>))</div>
<div class="line"><span class="lineno"> 1336</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1337</span> </div>
<div class="line"><span class="lineno"> 1338</span>    <span class="keywordflow">if</span> (!b-&gt;content_id)</div>
<div class="line"><span class="lineno"> 1339</span>    {</div>
<div class="line"><span class="lineno"> 1340</span>      b-&gt;content_id = <a class="code hl_function" href="compose_2functions_8c.html#a78c7433990448979005f6b6824848edd">gen_cid</a>();</div>
<div class="line"><span class="lineno"> 1341</span>    }</div>
<div class="line"><span class="lineno"> 1342</span>  }</div>
<div class="line"><span class="lineno"> 1343</span> </div>
<div class="line"><span class="lineno"> 1344</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="compose_2functions_8c.html#a468c081187199453be2b5f3d55532449">group_attachments</a>(shared, <span class="stringliteral">&quot;related&quot;</span>);</div>
<div class="line"><span class="lineno"> 1345</span>}</div>
</div><!-- fragment --><div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga3f08adde5f181891d0eae42d93306e84_cgraph.svg" width="358" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga69ba2bbfd55c124fed0a6626aaec9274" name="ga69ba2bbfd55c124fed0a6626aaec9274"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga69ba2bbfd55c124fed0a6626aaec9274">&#9670;&#160;</a></span>op_attachment_move_down()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_move_down </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move an attachment down in the attachment list - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01350">1350</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1351</span>{</div>
<div class="line"><span class="lineno"> 1352</span>  <span class="keywordtype">int</span> index = <a class="code hl_function" href="menu_2lib_8h.html#a67ee9260e41986eb4487124b004cff18">menu_get_index</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1353</span> </div>
<div class="line"><span class="lineno"> 1354</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachCtx.html">AttachCtx</a> *actx = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>;</div>
<div class="line"><span class="lineno"> 1355</span> </div>
<div class="line"><span class="lineno"> 1356</span>  <span class="keywordflow">if</span> (index &lt; 0)</div>
<div class="line"><span class="lineno"> 1357</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1358</span> </div>
<div class="line"><span class="lineno"> 1359</span>  <span class="keywordflow">if</span> (index == (actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a> - 1))</div>
<div class="line"><span class="lineno"> 1360</span>  {</div>
<div class="line"><span class="lineno"> 1361</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Attachment is already at bottom&quot;</span>));</div>
<div class="line"><span class="lineno"> 1362</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1363</span>  }</div>
<div class="line"><span class="lineno"> 1364</span>  <span class="keywordflow">if</span> ((actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[index]-&gt;<a class="code hl_variable" href="structAttachPtr.html#acf17bc64e657348fe6b5fdcdf69880f4">parent_type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1365</span>      !actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[index]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1366</span>  {</div>
<div class="line"><span class="lineno"> 1367</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Attachment can&#39;t be moved out of group&quot;</span>));</div>
<div class="line"><span class="lineno"> 1368</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1369</span>  }</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>  <span class="comment">// find next attachment at current level</span></div>
<div class="line"><span class="lineno"> 1372</span>  <span class="keywordtype">int</span> nextidx = index + 1;</div>
<div class="line"><span class="lineno"> 1373</span>  <span class="keywordflow">while</span> ((nextidx &lt; actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1374</span>         (actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[nextidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a> &gt; actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[index]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a>))</div>
<div class="line"><span class="lineno"> 1375</span>  {</div>
<div class="line"><span class="lineno"> 1376</span>    nextidx++;</div>
<div class="line"><span class="lineno"> 1377</span>  }</div>
<div class="line"><span class="lineno"> 1378</span>  <span class="keywordflow">if</span> (nextidx == actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a>)</div>
<div class="line"><span class="lineno"> 1379</span>  {</div>
<div class="line"><span class="lineno"> 1380</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Attachment is already at bottom&quot;</span>));</div>
<div class="line"><span class="lineno"> 1381</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1382</span>  }</div>
<div class="line"><span class="lineno"> 1383</span> </div>
<div class="line"><span class="lineno"> 1384</span>  <span class="comment">// find final position</span></div>
<div class="line"><span class="lineno"> 1385</span>  <span class="keywordtype">int</span> finalidx = index + 1;</div>
<div class="line"><span class="lineno"> 1386</span>  <span class="keywordflow">if</span> (nextidx &lt; actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a> - 1)</div>
<div class="line"><span class="lineno"> 1387</span>  {</div>
<div class="line"><span class="lineno"> 1388</span>    <span class="keywordflow">if</span> ((actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[nextidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1389</span>        (actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[nextidx + 1]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a> &gt; actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[nextidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a>))</div>
<div class="line"><span class="lineno"> 1390</span>    {</div>
<div class="line"><span class="lineno"> 1391</span>      finalidx += <a class="code hl_function" href="attach_2lib_8c.html#ab7095744eddadbe88894b8597c6295b6">attach_body_count</a>(actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[nextidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1392</span>    }</div>
<div class="line"><span class="lineno"> 1393</span>  }</div>
<div class="line"><span class="lineno"> 1394</span> </div>
<div class="line"><span class="lineno"> 1395</span>  <a class="code hl_function" href="compose_2functions_8c.html#a8a2d51a650f4a0f60dc67a5ac2cc5d89">compose_attach_swap</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>, index, nextidx);</div>
<div class="line"><span class="lineno"> 1396</span>  <a class="code hl_function" href="recvattach_8c.html#aa9845701586d190b83e575e9e1f89303">mutt_update_tree</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>);</div>
<div class="line"><span class="lineno"> 1397</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a294a94cf45be93fa7677adb7116ce60b">MENU_REDRAW_INDEX</a>);</div>
<div class="line"><span class="lineno"> 1398</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1399</span>  <a class="code hl_function" href="menu_2lib_8h.html#ae279bb826b97fcc88c0714b2a6383851">menu_set_index</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, finalidx);</div>
<div class="line"><span class="lineno"> 1400</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1401</span>}</div>
<div class="ttc" id="aattach_2lib_8c_html_ab7095744eddadbe88894b8597c6295b6"><div class="ttname"><a href="attach_2lib_8c.html#ab7095744eddadbe88894b8597c6295b6">attach_body_count</a></div><div class="ttdeci">int attach_body_count(struct Body *body, bool recurse)</div><div class="ttdoc">Count bodies.</div><div class="ttdef"><b>Definition</b> <a href="attach_2lib_8c_source.html#l00042">lib.c:42</a></div></div>
<div class="ttc" id="acompose_2functions_8c_html_a8a2d51a650f4a0f60dc67a5ac2cc5d89"><div class="ttname"><a href="compose_2functions_8c.html#a8a2d51a650f4a0f60dc67a5ac2cc5d89">compose_attach_swap</a></div><div class="ttdeci">static void compose_attach_swap(struct Email *e, struct AttachCtx *actx, int first, int second)</div><div class="ttdoc">Swap two adjacent entries in the attachment list.</div><div class="ttdef"><b>Definition</b> <a href="compose_2functions_8c_source.html#l00451">functions.c:451</a></div></div>
<div class="ttc" id="amenu_2lib_8h_html_ae279bb826b97fcc88c0714b2a6383851"><div class="ttname"><a href="menu_2lib_8h.html#ae279bb826b97fcc88c0714b2a6383851">menu_set_index</a></div><div class="ttdeci">MenuRedrawFlags menu_set_index(struct Menu *menu, int index)</div><div class="ttdoc">Set the current selection in the Menu.</div><div class="ttdef"><b>Definition</b> <a href="menu_8c_source.html#l00175">menu.c:175</a></div></div>
<div class="ttc" id="arecvattach_8c_html_aa9845701586d190b83e575e9e1f89303"><div class="ttname"><a href="recvattach_8c.html#aa9845701586d190b83e575e9e1f89303">mutt_update_tree</a></div><div class="ttdeci">void mutt_update_tree(struct AttachCtx *actx)</div><div class="ttdoc">Refresh the list of attachments.</div><div class="ttdef"><b>Definition</b> <a href="recvattach_8c_source.html#l00121">recvattach.c:121</a></div></div>
<div class="ttc" id="astructAttachPtr_html_a73acc0edc4e77cd9c64ea0064dcf49a3"><div class="ttname"><a href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">AttachPtr::level</a></div><div class="ttdeci">int level</div><div class="ttdoc">Nesting depth of attachment.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00040">attach.h:40</a></div></div>
<div class="ttc" id="astructAttachPtr_html_acf17bc64e657348fe6b5fdcdf69880f4"><div class="ttname"><a href="structAttachPtr.html#acf17bc64e657348fe6b5fdcdf69880f4">AttachPtr::parent_type</a></div><div class="ttdeci">int parent_type</div><div class="ttdoc">Type of parent attachment, e.g. TYPE_MULTIPART.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00038">attach.h:38</a></div></div>
<div class="ttc" id="astructBody_html_a0b87b7bdb6faef44d9aac4854975f805"><div class="ttname"><a href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">Body::parts</a></div><div class="ttdeci">struct Body * parts</div><div class="ttdoc">parts of a multipart or message/rfc822</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00073">body.h:73</a></div></div>
</div><!-- fragment --><div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga69ba2bbfd55c124fed0a6626aaec9274_cgraph.svg" width="412" height="384"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga80c8e393de8b586a7dda2c6d8873407f" name="ga80c8e393de8b586a7dda2c6d8873407f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga80c8e393de8b586a7dda2c6d8873407f">&#9670;&#160;</a></span>op_attachment_move_up()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_move_up </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move an attachment up in the attachment list - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01406">1406</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1407</span>{</div>
<div class="line"><span class="lineno"> 1408</span>  <span class="keywordtype">int</span> index = <a class="code hl_function" href="menu_2lib_8h.html#a67ee9260e41986eb4487124b004cff18">menu_get_index</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1409</span>  <span class="keywordflow">if</span> (index &lt; 0)</div>
<div class="line"><span class="lineno"> 1410</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1411</span> </div>
<div class="line"><span class="lineno"> 1412</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachCtx.html">AttachCtx</a> *actx = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>;</div>
<div class="line"><span class="lineno"> 1413</span> </div>
<div class="line"><span class="lineno"> 1414</span>  <span class="keywordflow">if</span> (index == 0)</div>
<div class="line"><span class="lineno"> 1415</span>  {</div>
<div class="line"><span class="lineno"> 1416</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Attachment is already at top&quot;</span>));</div>
<div class="line"><span class="lineno"> 1417</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1418</span>  }</div>
<div class="line"><span class="lineno"> 1419</span>  <span class="keywordflow">if</span> (actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[index - 1]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a> &lt; actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[index]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a>)</div>
<div class="line"><span class="lineno"> 1420</span>  {</div>
<div class="line"><span class="lineno"> 1421</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Attachment can&#39;t be moved out of group&quot;</span>));</div>
<div class="line"><span class="lineno"> 1422</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1423</span>  }</div>
<div class="line"><span class="lineno"> 1424</span> </div>
<div class="line"><span class="lineno"> 1425</span>  <span class="comment">// find previous attachment at current level</span></div>
<div class="line"><span class="lineno"> 1426</span>  <span class="keywordtype">int</span> previdx = index - 1;</div>
<div class="line"><span class="lineno"> 1427</span>  <span class="keywordflow">while</span> ((previdx &gt; 0) &amp;&amp; (actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[previdx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a> &gt; actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[index]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a>))</div>
<div class="line"><span class="lineno"> 1428</span>    previdx--;</div>
<div class="line"><span class="lineno"> 1429</span> </div>
<div class="line"><span class="lineno"> 1430</span>  <a class="code hl_function" href="compose_2functions_8c.html#a8a2d51a650f4a0f60dc67a5ac2cc5d89">compose_attach_swap</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, actx, previdx, index);</div>
<div class="line"><span class="lineno"> 1431</span>  <a class="code hl_function" href="recvattach_8c.html#aa9845701586d190b83e575e9e1f89303">mutt_update_tree</a>(actx);</div>
<div class="line"><span class="lineno"> 1432</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a294a94cf45be93fa7677adb7116ce60b">MENU_REDRAW_INDEX</a>);</div>
<div class="line"><span class="lineno"> 1433</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1434</span>  <a class="code hl_function" href="menu_2lib_8h.html#ae279bb826b97fcc88c0714b2a6383851">menu_set_index</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, previdx);</div>
<div class="line"><span class="lineno"> 1435</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1436</span>}</div>
</div><!-- fragment --><div id="dynsection-17" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga80c8e393de8b586a7dda2c6d8873407f_cgraph.svg" width="395" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gafef2b933e6a807df6a8d1331575a0c87" name="gafef2b933e6a807df6a8d1331575a0c87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafef2b933e6a807df6a8d1331575a0c87">&#9670;&#160;</a></span>op_attachment_new_mime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_new_mime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compose new attachment using mailcap entry - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01441">1441</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1442</span>{</div>
<div class="line"><span class="lineno"> 1443</span>  <span class="keywordtype">int</span> rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1444</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *fname = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1445</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *type = NULL;</div>
<div class="line"><span class="lineno"> 1446</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *ap = NULL;</div>
<div class="line"><span class="lineno"> 1447</span> </div>
<div class="line"><span class="lineno"> 1448</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structFileCompletionData.html">FileCompletionData</a> cdata = { <span class="keyword">false</span>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>, NULL, NULL, NULL };</div>
<div class="line"><span class="lineno"> 1449</span>  <span class="keywordflow">if</span> ((<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;New file: &quot;</span>), fname, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234a313ffe25b1e9a86bb1f9afb44e15925c">HC_FILE</a>,</div>
<div class="line"><span class="lineno"> 1450</span>                    &amp;<a class="code hl_variable" href="browser_2complete_8c.html#a6bd4da54e7d75404519878f3ef32c87e">CompleteFileOps</a>, &amp;cdata) != 0) ||</div>
<div class="line"><span class="lineno"> 1451</span>      <a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(fname))</div>
<div class="line"><span class="lineno"> 1452</span>  {</div>
<div class="line"><span class="lineno"> 1453</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1454</span>  }</div>
<div class="line"><span class="lineno"> 1455</span>  <a class="code hl_function" href="muttlib_8c.html#adde3990a0490dfba609fc94dbdbfd6b3">buf_expand_path</a>(fname);</div>
<div class="line"><span class="lineno"> 1456</span> </div>
<div class="line"><span class="lineno"> 1457</span>  <span class="comment">/* Call to lookup_mime_type () ?  maybe later */</span></div>
<div class="line"><span class="lineno"> 1458</span>  type = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1459</span>  <span class="keywordflow">if</span> ((<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<span class="stringliteral">&quot;Content-Type: &quot;</span>, type, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234aee9379d265cad600929abe5cc271019a">HC_OTHER</a>, NULL, NULL) != 0) ||</div>
<div class="line"><span class="lineno"> 1460</span>      <a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(type))</div>
<div class="line"><span class="lineno"> 1461</span>  {</div>
<div class="line"><span class="lineno"> 1462</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1463</span>  }</div>
<div class="line"><span class="lineno"> 1464</span> </div>
<div class="line"><span class="lineno"> 1465</span>  rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1466</span>  <span class="keywordtype">char</span> *p = strchr(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(type), <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><span class="lineno"> 1467</span>  <span class="keywordflow">if</span> (!p)</div>
<div class="line"><span class="lineno"> 1468</span>  {</div>
<div class="line"><span class="lineno"> 1469</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Content-Type is of the form base/sub&quot;</span>));</div>
<div class="line"><span class="lineno"> 1470</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1471</span>  }</div>
<div class="line"><span class="lineno"> 1472</span>  *p++ = 0;</div>
<div class="line"><span class="lineno"> 1473</span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79">ContentType</a> itype = <a class="code hl_function" href="email_2parse_8c.html#a6c22ec026399e230ecedab86f831a754">mutt_check_mime_type</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(type));</div>
<div class="line"><span class="lineno"> 1474</span>  <span class="keywordflow">if</span> (itype == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a2c4c96a2b998731adad0506fabeb9c17">TYPE_OTHER</a>)</div>
<div class="line"><span class="lineno"> 1475</span>  {</div>
<div class="line"><span class="lineno"> 1476</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unknown Content-Type %s&quot;</span>), <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(type));</div>
<div class="line"><span class="lineno"> 1477</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1478</span>  }</div>
<div class="line"><span class="lineno"> 1479</span> </div>
<div class="line"><span class="lineno"> 1480</span>  ap = <a class="code hl_function" href="attach_2attach_8c.html#a391fb25384a6e0c205de35fb24a1cc24">mutt_aptr_new</a>();</div>
<div class="line"><span class="lineno"> 1481</span>  <span class="comment">/* Touch the file */</span></div>
<div class="line"><span class="lineno"> 1482</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="file_8c.html#a004c6c512fd985a8e230e7fff6dfff33">mutt_file_touch</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname)))</div>
<div class="line"><span class="lineno"> 1483</span>  {</div>
<div class="line"><span class="lineno"> 1484</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t create file %s&quot;</span>), <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname));</div>
<div class="line"><span class="lineno"> 1485</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1486</span>  }</div>
<div class="line"><span class="lineno"> 1487</span> </div>
<div class="line"><span class="lineno"> 1488</span>  ap-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a> = <a class="code hl_function" href="sendlib_8c.html#a84c896a702c00ea759c281213e454686">mutt_make_file_attach</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname), shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>);</div>
<div class="line"><span class="lineno"> 1489</span>  <span class="keywordflow">if</span> (!ap-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>)</div>
<div class="line"><span class="lineno"> 1490</span>  {</div>
<div class="line"><span class="lineno"> 1491</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error attaching file&quot;</span>));</div>
<div class="line"><span class="lineno"> 1492</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1493</span>  }</div>
<div class="line"><span class="lineno"> 1494</span>  <a class="code hl_function" href="compose_2functions_8c.html#a6d6517aa9ace035c5e1449dd0bbcdeed">update_idx</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>, ap);</div>
<div class="line"><span class="lineno"> 1495</span>  ap = NULL; <span class="comment">// shared-&gt;adata-&gt;actx has taken ownership</span></div>
<div class="line"><span class="lineno"> 1496</span> </div>
<div class="line"><span class="lineno"> 1497</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1498</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1499</span>  cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> = itype;</div>
<div class="line"><span class="lineno"> 1500</span>  <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, p);</div>
<div class="line"><span class="lineno"> 1501</span>  cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1502</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a294a94cf45be93fa7677adb7116ce60b">MENU_REDRAW_INDEX</a>);</div>
<div class="line"><span class="lineno"> 1503</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1504</span> </div>
<div class="line"><span class="lineno"> 1505</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt__attach_8c.html#a492006c267947f1d6466f2c32f17aa55">mutt_compose_attachment</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>))</div>
<div class="line"><span class="lineno"> 1506</span>  {</div>
<div class="line"><span class="lineno"> 1507</span>    <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>);</div>
<div class="line"><span class="lineno"> 1508</span>    <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a>);</div>
<div class="line"><span class="lineno"> 1509</span>  }</div>
<div class="line"><span class="lineno"> 1510</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1511</span>  rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1512</span> </div>
<div class="line"><span class="lineno"> 1513</span>done:</div>
<div class="line"><span class="lineno"> 1514</span>  <a class="code hl_function" href="attach_2attach_8c.html#a89df650a7e1c04159234f52044c82d84">mutt_aptr_free</a>(&amp;ap);</div>
<div class="line"><span class="lineno"> 1515</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;type);</div>
<div class="line"><span class="lineno"> 1516</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno"> 1517</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1518</span>}</div>
<div class="ttc" id="abrowser_2complete_8c_html_a6bd4da54e7d75404519878f3ef32c87e"><div class="ttname"><a href="browser_2complete_8c.html#a6bd4da54e7d75404519878f3ef32c87e">CompleteFileOps</a></div><div class="ttdeci">const struct CompleteOps CompleteFileOps</div><div class="ttdoc">Auto-Completion of Files.</div><div class="ttdef"><b>Definition</b> <a href="browser_2complete_8c_source.html#l00152">complete.c:152</a></div></div>
<div class="ttc" id="aemail_2parse_8c_html_a6c22ec026399e230ecedab86f831a754"><div class="ttname"><a href="email_2parse_8c.html#a6c22ec026399e230ecedab86f831a754">mutt_check_mime_type</a></div><div class="ttdeci">enum ContentType mutt_check_mime_type(const char *s)</div><div class="ttdoc">Check a MIME type string.</div><div class="ttdef"><b>Definition</b> <a href="email_2parse_8c_source.html#l00365">parse.c:365</a></div></div>
<div class="ttc" id="afile_8c_html_a004c6c512fd985a8e230e7fff6dfff33"><div class="ttname"><a href="file_8c.html#a004c6c512fd985a8e230e7fff6dfff33">mutt_file_touch</a></div><div class="ttdeci">bool mutt_file_touch(const char *path)</div><div class="ttdoc">Make sure a file exists.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l00981">file.c:981</a></div></div>
<div class="ttc" id="ahistory_2lib_8h_html_acb0a49d94e5b4fe512c30e2c12621234a313ffe25b1e9a86bb1f9afb44e15925c"><div class="ttname"><a href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234a313ffe25b1e9a86bb1f9afb44e15925c">HC_FILE</a></div><div class="ttdeci">@ HC_FILE</div><div class="ttdoc">Files.</div><div class="ttdef"><b>Definition</b> <a href="history_2lib_8h_source.html#l00057">lib.h:57</a></div></div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79">ContentType</a></div><div class="ttdeci">ContentType</div><div class="ttdoc">Content-Type.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00029">mime.h:30</a></div></div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79a2c4c96a2b998731adad0506fabeb9c17"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a2c4c96a2b998731adad0506fabeb9c17">TYPE_OTHER</a></div><div class="ttdeci">@ TYPE_OTHER</div><div class="ttdoc">Unknown Content-Type.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00031">mime.h:31</a></div></div>
<div class="ttc" id="amutt__attach_8c_html_a492006c267947f1d6466f2c32f17aa55"><div class="ttname"><a href="mutt__attach_8c.html#a492006c267947f1d6466f2c32f17aa55">mutt_compose_attachment</a></div><div class="ttdeci">int mutt_compose_attachment(struct Body *b)</div><div class="ttdoc">Create an attachment.</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8c_source.html#l00120">mutt_attach.c:120</a></div></div>
<div class="ttc" id="astructBody_html_ace00f9cba9b46a2d434764335d2fa43a"><div class="ttname"><a href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">Body::subtype</a></div><div class="ttdeci">char * subtype</div><div class="ttdoc">content-type subtype</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00061">body.h:61</a></div></div>
<div class="ttc" id="astructFileCompletionData_html"><div class="ttname"><a href="structFileCompletionData.html">FileCompletionData</a></div><div class="ttdoc">Input for the file completion function.</div><div class="ttdef"><b>Definition</b> <a href="curs__lib_8h_source.html#l00038">curs_lib.h:39</a></div></div>
</div><!-- fragment --><div id="dynsection-18" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gafef2b933e6a807df6a8d1331575a0c87_cgraph.svg" width="648" height="990"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gaae42ad4d17c888e08eb3c124f5c2fd4b" name="gaae42ad4d17c888e08eb3c124f5c2fd4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae42ad4d17c888e08eb3c124f5c2fd4b">&#9670;&#160;</a></span>op_attachment_print()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_print </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print the current entry - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01523">1523</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1524</span>{</div>
<div class="line"><span class="lineno"> 1525</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachCtx.html">AttachCtx</a> *actx = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>;</div>
<div class="line"><span class="lineno"> 1526</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(actx))</div>
<div class="line"><span class="lineno"> 1527</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1528</span> </div>
<div class="line"><span class="lineno"> 1529</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMenu.html">Menu</a> *menu = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>;</div>
<div class="line"><span class="lineno"> 1530</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(actx, menu);</div>
<div class="line"><span class="lineno"> 1531</span>  <span class="keywordflow">if</span> (cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)</div>
<div class="line"><span class="lineno"> 1532</span>  {</div>
<div class="line"><span class="lineno"> 1533</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t print multipart attachments&quot;</span>));</div>
<div class="line"><span class="lineno"> 1534</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1535</span>  }</div>
<div class="line"><span class="lineno"> 1536</span> </div>
<div class="line"><span class="lineno"> 1537</span>  <a class="code hl_function" href="mutt__attach_8h.html#ac869ec7f92735053d33d3143d9866af5">mutt_print_attachment_list</a>(actx, NULL, menu-&gt;<a class="code hl_variable" href="structMenu.html#ae3e67808ddefbe6fb0052de6c3019882">tag_prefix</a>, cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>);</div>
<div class="line"><span class="lineno"> 1538</span>  <span class="comment">/* no send2hook, since this doesn&#39;t modify the message */</span></div>
<div class="line"><span class="lineno"> 1539</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1540</span>}</div>
<div class="ttc" id="amutt__attach_8h_html_ac869ec7f92735053d33d3143d9866af5"><div class="ttname"><a href="mutt__attach_8h.html#ac869ec7f92735053d33d3143d9866af5">mutt_print_attachment_list</a></div><div class="ttdeci">void mutt_print_attachment_list(struct AttachCtx *actx, FILE *fp, bool tag, struct Body *b)</div><div class="ttdoc">Print a list of Attachments.</div><div class="ttdef"><b>Definition</b> <a href="recvattach_8c_source.html#l00887">recvattach.c:887</a></div></div>
</div><!-- fragment --><div id="dynsection-19" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gaae42ad4d17c888e08eb3c124f5c2fd4b_cgraph.svg" width="396" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga60dc2cf9c6ba99cb14d4c5dcb6a046ec" name="ga60dc2cf9c6ba99cb14d4c5dcb6a046ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga60dc2cf9c6ba99cb14d4c5dcb6a046ec">&#9670;&#160;</a></span>op_attachment_rename_attachment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_rename_attachment </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send attachment with a different name - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01545">1545</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1546</span>{</div>
<div class="line"><span class="lineno"> 1547</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1548</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1549</span>  <span class="keywordtype">char</span> *src = NULL;</div>
<div class="line"><span class="lineno"> 1550</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1551</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1552</span>  <span class="keywordflow">if</span> (cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0a77f105609a64f37c359b9c81d1f263">d_filename</a>)</div>
<div class="line"><span class="lineno"> 1553</span>    src = cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0a77f105609a64f37c359b9c81d1f263">d_filename</a>;</div>
<div class="line"><span class="lineno"> 1554</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1555</span>    src = cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>;</div>
<div class="line"><span class="lineno"> 1556</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *fname = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1557</span>  <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(fname, <a class="code hl_function" href="mutt_2path_8c.html#a3868ea49aae027f4fc188e2c9b933a31">mutt_path_basename</a>(<a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(src)));</div>
<div class="line"><span class="lineno"> 1558</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structFileCompletionData.html">FileCompletionData</a> cdata = { <span class="keyword">false</span>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>, NULL, NULL, NULL };</div>
<div class="line"><span class="lineno"> 1559</span>  <span class="keywordtype">int</span> rc = <a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Send attachment with name: &quot;</span>), fname,</div>
<div class="line"><span class="lineno"> 1560</span>                        <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234a313ffe25b1e9a86bb1f9afb44e15925c">HC_FILE</a>, &amp;<a class="code hl_variable" href="browser_2complete_8c.html#a6bd4da54e7d75404519878f3ef32c87e">CompleteFileOps</a>, &amp;cdata);</div>
<div class="line"><span class="lineno"> 1561</span>  <span class="keywordflow">if</span> (rc == 0)</div>
<div class="line"><span class="lineno"> 1562</span>  {</div>
<div class="line"><span class="lineno"> 1563</span>    <span class="comment">// It&#39;s valid to set an empty string here, to erase what was set</span></div>
<div class="line"><span class="lineno"> 1564</span>    <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0a77f105609a64f37c359b9c81d1f263">d_filename</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname));</div>
<div class="line"><span class="lineno"> 1565</span>    <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a>);</div>
<div class="line"><span class="lineno"> 1566</span>  }</div>
<div class="line"><span class="lineno"> 1567</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno"> 1568</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1569</span>}</div>
<div class="ttc" id="amutt_2path_8c_html_a3868ea49aae027f4fc188e2c9b933a31"><div class="ttname"><a href="mutt_2path_8c.html#a3868ea49aae027f4fc188e2c9b933a31">mutt_path_basename</a></div><div class="ttdeci">const char * mutt_path_basename(const char *path)</div><div class="ttdoc">Find the last component for a pathname.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2path_8c_source.html#l00282">path.c:282</a></div></div>
<div class="ttc" id="astring2_8h_html_a7e0481bed27661ea2679f256b24e0283"><div class="ttname"><a href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a></div><div class="ttdeci">#define NONULL(x)</div><div class="ttdef"><b>Definition</b> <a href="string2_8h_source.html#l00043">string2.h:43</a></div></div>
<div class="ttc" id="astructBody_html_a0a77f105609a64f37c359b9c81d1f263"><div class="ttname"><a href="structBody.html#a0a77f105609a64f37c359b9c81d1f263">Body::d_filename</a></div><div class="ttdeci">char * d_filename</div><div class="ttdoc">filename to be used for the content-disposition header If NULL, filename is used instead.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00056">body.h:56</a></div></div>
<div class="ttc" id="astructBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">When sending a message, this is the file to which this structure refers.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00059">body.h:59</a></div></div>
</div><!-- fragment --><div id="dynsection-20" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga60dc2cf9c6ba99cb14d4c5dcb6a046ec_cgraph.svg" width="515" height="518"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga6495f84b75b13ba7468aedaf137e6128" name="ga6495f84b75b13ba7468aedaf137e6128"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6495f84b75b13ba7468aedaf137e6128">&#9670;&#160;</a></span>op_attachment_save()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_save </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save message/attachment to a mailbox/file - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01574">1574</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1575</span>{</div>
<div class="line"><span class="lineno"> 1576</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachCtx.html">AttachCtx</a> *actx = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>;</div>
<div class="line"><span class="lineno"> 1577</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(actx))</div>
<div class="line"><span class="lineno"> 1578</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1579</span> </div>
<div class="line"><span class="lineno"> 1580</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMenu.html">Menu</a> *menu = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>;</div>
<div class="line"><span class="lineno"> 1581</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(actx, menu);</div>
<div class="line"><span class="lineno"> 1582</span>  <span class="keywordflow">if</span> (cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)</div>
<div class="line"><span class="lineno"> 1583</span>  {</div>
<div class="line"><span class="lineno"> 1584</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t save multipart attachments&quot;</span>));</div>
<div class="line"><span class="lineno"> 1585</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1586</span>  }</div>
<div class="line"><span class="lineno"> 1587</span> </div>
<div class="line"><span class="lineno"> 1588</span>  <a class="code hl_function" href="mutt__attach_8h.html#a588a5719b699c5d062f263711598836e">mutt_save_attachment_list</a>(actx, NULL, menu-&gt;<a class="code hl_variable" href="structMenu.html#ae3e67808ddefbe6fb0052de6c3019882">tag_prefix</a>, cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>, NULL, menu);</div>
<div class="line"><span class="lineno"> 1589</span>  <span class="comment">/* no send2hook, since this doesn&#39;t modify the message */</span></div>
<div class="line"><span class="lineno"> 1590</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1591</span>}</div>
<div class="ttc" id="amutt__attach_8h_html_a588a5719b699c5d062f263711598836e"><div class="ttname"><a href="mutt__attach_8h.html#a588a5719b699c5d062f263711598836e">mutt_save_attachment_list</a></div><div class="ttdeci">void mutt_save_attachment_list(struct AttachCtx *actx, FILE *fp, bool tag, struct Body *b, struct Email *e, struct Menu *menu)</div><div class="ttdoc">Save a list of attachments.</div><div class="ttdef"><b>Definition</b> <a href="recvattach_8c_source.html#l00431">recvattach.c:431</a></div></div>
</div><!-- fragment --><div id="dynsection-21" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga6495f84b75b13ba7468aedaf137e6128_cgraph.svg" width="392" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga952ba3a4a50eecc0798a9b5e7e5462f0" name="ga952ba3a4a50eecc0798a9b5e7e5462f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga952ba3a4a50eecc0798a9b5e7e5462f0">&#9670;&#160;</a></span>op_attachment_toggle_disposition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_toggle_disposition </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Toggle disposition between inline/attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01596">1596</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1597</span>{</div>
<div class="line"><span class="lineno"> 1598</span>  <span class="comment">/* toggle the content-disposition between inline/attachment */</span></div>
<div class="line"><span class="lineno"> 1599</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1600</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1601</span>  cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a99aff302b287a47c407a7412a99630f5">disposition</a> = (cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a99aff302b287a47c407a7412a99630f5">disposition</a> == <a class="code hl_enumvalue" href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073">DISP_INLINE</a>) ?</div>
<div class="line"><span class="lineno"> 1602</span>                                   <a class="code hl_enumvalue" href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a3c5d26739343bc8cc2934a4dee403417">DISP_ATTACH</a> :</div>
<div class="line"><span class="lineno"> 1603</span>                                   <a class="code hl_enumvalue" href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073">DISP_INLINE</a>;</div>
<div class="line"><span class="lineno"> 1604</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a>);</div>
<div class="line"><span class="lineno"> 1605</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1606</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1607</span>}</div>
<div class="ttc" id="amime_8h_html_a5f93dab7807282e699a6bc1b2d18a2d8a3c5d26739343bc8cc2934a4dee403417"><div class="ttname"><a href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a3c5d26739343bc8cc2934a4dee403417">DISP_ATTACH</a></div><div class="ttdeci">@ DISP_ATTACH</div><div class="ttdoc">Content is attached.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00063">mime.h:63</a></div></div>
<div class="ttc" id="amime_8h_html_a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073"><div class="ttname"><a href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073">DISP_INLINE</a></div><div class="ttdeci">@ DISP_INLINE</div><div class="ttdoc">Content is inline.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00062">mime.h:62</a></div></div>
<div class="ttc" id="astructBody_html_a99aff302b287a47c407a7412a99630f5"><div class="ttname"><a href="structBody.html#a99aff302b287a47c407a7412a99630f5">Body::disposition</a></div><div class="ttdeci">unsigned int disposition</div><div class="ttdoc">content-disposition, ContentDisposition</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00042">body.h:42</a></div></div>
</div><!-- fragment --><div id="dynsection-22" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga952ba3a4a50eecc0798a9b5e7e5462f0_cgraph.svg" width="372" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga797294e9a8caf038d666443fb861c9c7" name="ga797294e9a8caf038d666443fb861c9c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga797294e9a8caf038d666443fb861c9c7">&#9670;&#160;</a></span>op_attachment_toggle_recode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_toggle_recode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Toggle recoding of this attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01612">1612</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1613</span>{</div>
<div class="line"><span class="lineno"> 1614</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1615</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1616</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1617</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1618</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="muttlib_8c.html#a712bb5e0a580467b5aedc08afea40b92">mutt_is_text_part</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>))</div>
<div class="line"><span class="lineno"> 1619</span>  {</div>
<div class="line"><span class="lineno"> 1620</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Recoding only affects text attachments&quot;</span>));</div>
<div class="line"><span class="lineno"> 1621</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1622</span>  }</div>
<div class="line"><span class="lineno"> 1623</span>  cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a2f795dc4337b500fbf2ae6682dc5360b">noconv</a> = !cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a2f795dc4337b500fbf2ae6682dc5360b">noconv</a>;</div>
<div class="line"><span class="lineno"> 1624</span>  <span class="keywordflow">if</span> (cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a2f795dc4337b500fbf2ae6682dc5360b">noconv</a>)</div>
<div class="line"><span class="lineno"> 1625</span>    <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;The current attachment won&#39;t be converted&quot;</span>));</div>
<div class="line"><span class="lineno"> 1626</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1627</span>    <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;The current attachment will be converted&quot;</span>));</div>
<div class="line"><span class="lineno"> 1628</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a>);</div>
<div class="line"><span class="lineno"> 1629</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1630</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1631</span>}</div>
<div class="ttc" id="amuttlib_8c_html_a712bb5e0a580467b5aedc08afea40b92"><div class="ttname"><a href="muttlib_8c.html#a712bb5e0a580467b5aedc08afea40b92">mutt_is_text_part</a></div><div class="ttdeci">bool mutt_is_text_part(const struct Body *b)</div><div class="ttdoc">Is this part of an email in plain text?</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00406">muttlib.c:406</a></div></div>
<div class="ttc" id="astructBody_html_a2f795dc4337b500fbf2ae6682dc5360b"><div class="ttname"><a href="structBody.html#a2f795dc4337b500fbf2ae6682dc5360b">Body::noconv</a></div><div class="ttdeci">bool noconv</div><div class="ttdoc">Don&#39;t do character set conversion.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00046">body.h:46</a></div></div>
</div><!-- fragment --><div id="dynsection-23" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga797294e9a8caf038d666443fb861c9c7_cgraph.svg" width="372" height="254"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga7862f337a35717f87f3fe070eb37fb97" name="ga7862f337a35717f87f3fe070eb37fb97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7862f337a35717f87f3fe070eb37fb97">&#9670;&#160;</a></span>op_attachment_toggle_unlink()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_toggle_unlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Toggle whether to delete file after sending it - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01636">1636</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1637</span>{</div>
<div class="line"><span class="lineno"> 1638</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1639</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1640</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1641</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1642</span>  cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a> = !cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a>;</div>
<div class="line"><span class="lineno"> 1643</span> </div>
<div class="line"><span class="lineno"> 1644</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a294a94cf45be93fa7677adb7116ce60b">MENU_REDRAW_INDEX</a>);</div>
<div class="line"><span class="lineno"> 1645</span>  <span class="comment">/* No send2hook since this doesn&#39;t change the message. */</span></div>
<div class="line"><span class="lineno"> 1646</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1647</span>}</div>
</div><!-- fragment --><div id="dynsection-24" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga7862f337a35717f87f3fe070eb37fb97_cgraph.svg" width="372" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gaba4c534951d4cb33363ef17bcaf4c287" name="gaba4c534951d4cb33363ef17bcaf4c287"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaba4c534951d4cb33363ef17bcaf4c287">&#9670;&#160;</a></span>op_attachment_ungroup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_ungroup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ungroup a 'multipart' attachment - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01652">1652</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1653</span>{</div>
<div class="line"><span class="lineno"> 1654</span>  <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>-&gt;<a class="code hl_variable" href="structMenu.html#a289b71aff9e001a96d4a4a0ebd5280e1">current</a>]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> != <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)</div>
<div class="line"><span class="lineno"> 1655</span>  {</div>
<div class="line"><span class="lineno"> 1656</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Attachment is not &#39;multipart&#39;&quot;</span>));</div>
<div class="line"><span class="lineno"> 1657</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1658</span>  }</div>
<div class="line"><span class="lineno"> 1659</span> </div>
<div class="line"><span class="lineno"> 1660</span>  <span class="keywordtype">int</span> aidx = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>-&gt;<a class="code hl_variable" href="structMenu.html#a289b71aff9e001a96d4a4a0ebd5280e1">current</a>;</div>
<div class="line"><span class="lineno"> 1661</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachCtx.html">AttachCtx</a> *actx = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>;</div>
<div class="line"><span class="lineno"> 1662</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b = actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[aidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>;</div>
<div class="line"><span class="lineno"> 1663</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b_next = b-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>;</div>
<div class="line"><span class="lineno"> 1664</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b_previous = NULL;</div>
<div class="line"><span class="lineno"> 1665</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b_parent = NULL;</div>
<div class="line"><span class="lineno"> 1666</span>  <span class="keywordtype">int</span> parent_type = actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[aidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#acf17bc64e657348fe6b5fdcdf69880f4">parent_type</a>;</div>
<div class="line"><span class="lineno"> 1667</span>  <span class="keywordtype">int</span> level = actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[aidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a>;</div>
<div class="line"><span class="lineno"> 1668</span> </div>
<div class="line"><span class="lineno"> 1669</span>  <span class="comment">// reorder body pointers</span></div>
<div class="line"><span class="lineno"> 1670</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="attach_2lib_8c.html#af05337416de845ffb859c40809fba19a">attach_body_previous</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, b, &amp;b_previous))</div>
<div class="line"><span class="lineno"> 1671</span>    b_previous-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 1672</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="attach_2lib_8c.html#a66fd8fd268bcf138333a995f1cca3355">attach_body_parent</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, NULL, b, &amp;b_parent))</div>
<div class="line"><span class="lineno"> 1673</span>    b_parent-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a> = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 1674</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1675</span>    shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 1676</span> </div>
<div class="line"><span class="lineno"> 1677</span>  <span class="comment">// update attachment list</span></div>
<div class="line"><span class="lineno"> 1678</span>  <span class="keywordtype">int</span> i = aidx + 1;</div>
<div class="line"><span class="lineno"> 1679</span>  <span class="keywordflow">while</span> (actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a> &gt; level)</div>
<div class="line"><span class="lineno"> 1680</span>  {</div>
<div class="line"><span class="lineno"> 1681</span>    actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a>--;</div>
<div class="line"><span class="lineno"> 1682</span>    <span class="keywordflow">if</span> (actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a73acc0edc4e77cd9c64ea0064dcf49a3">level</a> == level)</div>
<div class="line"><span class="lineno"> 1683</span>    {</div>
<div class="line"><span class="lineno"> 1684</span>      actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#acf17bc64e657348fe6b5fdcdf69880f4">parent_type</a> = parent_type;</div>
<div class="line"><span class="lineno"> 1685</span>      <span class="comment">// set body-&gt;next for final attachment in group</span></div>
<div class="line"><span class="lineno"> 1686</span>      <span class="keywordflow">if</span> (!actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1687</span>        actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> = b_next;</div>
<div class="line"><span class="lineno"> 1688</span>    }</div>
<div class="line"><span class="lineno"> 1689</span>    i++;</div>
<div class="line"><span class="lineno"> 1690</span>    <span class="keywordflow">if</span> (i == actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a>)</div>
<div class="line"><span class="lineno"> 1691</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1692</span>  }</div>
<div class="line"><span class="lineno"> 1693</span> </div>
<div class="line"><span class="lineno"> 1694</span>  <span class="comment">// free memory</span></div>
<div class="line"><span class="lineno"> 1695</span>  actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[aidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a> = NULL;</div>
<div class="line"><span class="lineno"> 1696</span>  actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[aidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> = NULL;</div>
<div class="line"><span class="lineno"> 1697</span>  actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[aidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">email</a> = NULL;</div>
<div class="line"><span class="lineno"> 1698</span>  <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[aidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>);</div>
<div class="line"><span class="lineno"> 1699</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[aidx]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a675e3442ea87e4479649a58c20f68aa7">tree</a>);</div>
<div class="line"><span class="lineno"> 1700</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[aidx]);</div>
<div class="line"><span class="lineno"> 1701</span> </div>
<div class="line"><span class="lineno"> 1702</span>  <span class="comment">// reorder attachment list</span></div>
<div class="line"><span class="lineno"> 1703</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = aidx; j &lt; (actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a> - 1); j++)</div>
<div class="line"><span class="lineno"> 1704</span>    actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[j] = actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[j + 1];</div>
<div class="line"><span class="lineno"> 1705</span>  actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a> - 1] = NULL;</div>
<div class="line"><span class="lineno"> 1706</span>  actx-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a>--;</div>
<div class="line"><span class="lineno"> 1707</span>  <a class="code hl_function" href="dlg__compose_8c.html#a51ed67e9d27545c7982d196826bbc7bc">update_menu</a>(actx, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1708</span> </div>
<div class="line"><span class="lineno"> 1709</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1710</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1711</span>}</div>
<div class="ttc" id="aattach_2lib_8c_html_a66fd8fd268bcf138333a995f1cca3355"><div class="ttname"><a href="attach_2lib_8c.html#a66fd8fd268bcf138333a995f1cca3355">attach_body_parent</a></div><div class="ttdeci">bool attach_body_parent(struct Body *start, struct Body *start_parent, struct Body *body, struct Body **body_parent)</div><div class="ttdoc">Find the parent of a body.</div><div class="ttdef"><b>Definition</b> <a href="attach_2lib_8c_source.html#l00071">lib.c:71</a></div></div>
<div class="ttc" id="aattach_2lib_8c_html_af05337416de845ffb859c40809fba19a"><div class="ttname"><a href="attach_2lib_8c.html#af05337416de845ffb859c40809fba19a">attach_body_previous</a></div><div class="ttdeci">bool attach_body_previous(struct Body *start, struct Body *body, struct Body **previous)</div><div class="ttdoc">Find the previous body of a body.</div><div class="ttdef"><b>Definition</b> <a href="attach_2lib_8c_source.html#l00142">lib.c:142</a></div></div>
<div class="ttc" id="aemail_2body_8c_html_a129af1c316fcbc26b55fb48957bab2cb"><div class="ttname"><a href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a></div><div class="ttdeci">void mutt_body_free(struct Body **ptr)</div><div class="ttdoc">Free a Body.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8c_source.html#l00058">body.c:58</a></div></div>
<div class="ttc" id="astructAttachPtr_html_a675e3442ea87e4479649a58c20f68aa7"><div class="ttname"><a href="structAttachPtr.html#a675e3442ea87e4479649a58c20f68aa7">AttachPtr::tree</a></div><div class="ttdeci">char * tree</div><div class="ttdoc">Tree characters to display.</div><div class="ttdef"><b>Definition</b> <a href="attach_8h_source.html#l00039">attach.h:39</a></div></div>
<div class="ttc" id="astructBody_html_a8e10ba22522218bd12bd3cb38dd3fcc9"><div class="ttname"><a href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">Body::email</a></div><div class="ttdeci">struct Email * email</div><div class="ttdoc">header information for message/rfc822</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00074">body.h:74</a></div></div>
<div class="ttc" id="astructMenu_html_a289b71aff9e001a96d4a4a0ebd5280e1"><div class="ttname"><a href="structMenu.html#a289b71aff9e001a96d4a4a0ebd5280e1">Menu::current</a></div><div class="ttdeci">int current</div><div class="ttdoc">Current entry.</div><div class="ttdef"><b>Definition</b> <a href="menu_2lib_8h_source.html#l00080">lib.h:80</a></div></div>
</div><!-- fragment --><div id="dynsection-25" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gaba4c534951d4cb33363ef17bcaf4c287_cgraph.svg" width="387" height="326"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gaad0602d202fffe887aef05d2edc0006d" name="gaad0602d202fffe887aef05d2edc0006d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaad0602d202fffe887aef05d2edc0006d">&#9670;&#160;</a></span>op_attachment_update_encoding()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_attachment_update_encoding </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update an attachment's encoding info - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01716">1716</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1717</span>{</div>
<div class="line"><span class="lineno"> 1718</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachCtx.html">AttachCtx</a> *actx = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>;</div>
<div class="line"><span class="lineno"> 1719</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(actx))</div>
<div class="line"><span class="lineno"> 1720</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1721</span> </div>
<div class="line"><span class="lineno"> 1722</span>  <span class="keywordtype">int</span> rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1723</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMenu.html">Menu</a> *menu = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>;</div>
<div class="line"><span class="lineno"> 1724</span>  <span class="keyword">struct </span>BodyArray ba = <a class="code hl_define" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div>
<div class="line"><span class="lineno"> 1725</span>  <a class="code hl_function" href="recvattach_8c.html#afe651b768f8b166c7f6386a49f31bc25">ba_add_tagged</a>(&amp;ba, actx, menu);</div>
<div class="line"><span class="lineno"> 1726</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="array_8h.html#a748cb2df8cbe952b6fff91d62811a20a">ARRAY_EMPTY</a>(&amp;ba))</div>
<div class="line"><span class="lineno"> 1727</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1728</span> </div>
<div class="line"><span class="lineno"> 1729</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> **bp = NULL;</div>
<div class="line"><span class="lineno"> 1730</span>  <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(bp, &amp;ba)</div>
<div class="line"><span class="lineno"> 1731</span>  {</div>
<div class="line"><span class="lineno"> 1732</span>    <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(*bp, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>);</div>
<div class="line"><span class="lineno"> 1733</span>  }</div>
<div class="line"><span class="lineno"> 1734</span> </div>
<div class="line"><span class="lineno"> 1735</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(menu, <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a>);</div>
<div class="line"><span class="lineno"> 1736</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1737</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1738</span>  rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1739</span> </div>
<div class="line"><span class="lineno"> 1740</span>done:</div>
<div class="line"><span class="lineno"> 1741</span>  <a class="code hl_define" href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a>(&amp;ba);</div>
<div class="line"><span class="lineno"> 1742</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1743</span>}</div>
</div><!-- fragment --><div id="dynsection-26" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gaad0602d202fffe887aef05d2edc0006d_cgraph.svg" width="388" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga93882bbe0d62ab80cd2e1ac10ca997bd" name="ga93882bbe0d62ab80cd2e1ac10ca997bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga93882bbe0d62ab80cd2e1ac10ca997bd">&#9670;&#160;</a></span>op_envelope_edit_headers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_envelope_edit_headers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit the message with headers - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01750">1750</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1751</span>{</div>
<div class="line"><span class="lineno"> 1752</span>  <a class="code hl_function" href="rfc3676_8c.html#a47bfc67ef302e9b51cee14c713a70f35">mutt_rfc3676_space_unstuff</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>);</div>
<div class="line"><span class="lineno"> 1753</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *tag = NULL;</div>
<div class="line"><span class="lineno"> 1754</span>  <span class="keywordtype">char</span> *err = NULL;</div>
<div class="line"><span class="lineno"> 1755</span>  <a class="code hl_function" href="envelope_8c.html#afd00cc8d84947cbd55e082420b5732f1">mutt_env_to_local</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 1756</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_editor = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;editor&quot;</span>);</div>
<div class="line"><span class="lineno"> 1757</span>  <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)</div>
<div class="line"><span class="lineno"> 1758</span>  {</div>
<div class="line"><span class="lineno"> 1759</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 1760</span>    <span class="keywordflow">while</span> (b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>)</div>
<div class="line"><span class="lineno"> 1761</span>      b = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 1762</span>    <a class="code hl_function" href="mutt__header_8c.html#add6fa85ce7ef8dcad27d465fbbc27708">mutt_edit_headers</a>(<a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_editor), b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ac61b3f5c9c303e5b6f6cbc7b52ce181c">fcc</a>);</div>
<div class="line"><span class="lineno"> 1763</span>  }</div>
<div class="line"><span class="lineno"> 1764</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1765</span>  {</div>
<div class="line"><span class="lineno"> 1766</span>    <a class="code hl_function" href="mutt__header_8c.html#add6fa85ce7ef8dcad27d465fbbc27708">mutt_edit_headers</a>(<a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_editor), shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>,</div>
<div class="line"><span class="lineno"> 1767</span>                      shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ac61b3f5c9c303e5b6f6cbc7b52ce181c">fcc</a>);</div>
<div class="line"><span class="lineno"> 1768</span>  }</div>
<div class="line"><span class="lineno"> 1769</span> </div>
<div class="line"><span class="lineno"> 1770</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="envelope_8c.html#a0108f989ca58622df272cf31b610395e">mutt_env_to_intl</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, &amp;tag, &amp;err))</div>
<div class="line"><span class="lineno"> 1771</span>  {</div>
<div class="line"><span class="lineno"> 1772</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Bad IDN in &#39;%s&#39;: &#39;%s&#39;&quot;</span>), tag, err);</div>
<div class="line"><span class="lineno"> 1773</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;err);</div>
<div class="line"><span class="lineno"> 1774</span>  }</div>
<div class="line"><span class="lineno"> 1775</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17af3637dcb26161cafc5b850eca390acd6">NT_EMAIL_CHANGE_ENVELOPE</a>, NULL);</div>
<div class="line"><span class="lineno"> 1776</span> </div>
<div class="line"><span class="lineno"> 1777</span>  <a class="code hl_function" href="rfc3676_8c.html#ae80c6b55541960f57f67f4ea3e4467e8">mutt_rfc3676_space_stuff</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>);</div>
<div class="line"><span class="lineno"> 1778</span>  <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>);</div>
<div class="line"><span class="lineno"> 1779</span> </div>
<div class="line"><span class="lineno"> 1780</span>  <span class="comment">/* attachments may have been added */</span></div>
<div class="line"><span class="lineno"> 1781</span>  <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 1782</span>      shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a> - 1]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1783</span>  {</div>
<div class="line"><span class="lineno"> 1784</span>    <a class="code hl_function" href="attach_2attach_8c.html#a773158419b51bd96d4a7249422d21f73">mutt_actx_entries_free</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>);</div>
<div class="line"><span class="lineno"> 1785</span>    <a class="code hl_function" href="dlg__compose_8c.html#a51ed67e9d27545c7982d196826bbc7bc">update_menu</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1786</span>  }</div>
<div class="line"><span class="lineno"> 1787</span> </div>
<div class="line"><span class="lineno"> 1788</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a>);</div>
<div class="line"><span class="lineno"> 1789</span>  <span class="comment">/* Unconditional hook since editor was invoked */</span></div>
<div class="line"><span class="lineno"> 1790</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1791</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1792</span>}</div>
<div class="ttc" id="aattach_2attach_8c_html_a773158419b51bd96d4a7249422d21f73"><div class="ttname"><a href="attach_2attach_8c.html#a773158419b51bd96d4a7249422d21f73">mutt_actx_entries_free</a></div><div class="ttdeci">void mutt_actx_entries_free(struct AttachCtx *actx)</div><div class="ttdoc">Free entries in an Attachment Context.</div><div class="ttdef"><b>Definition</b> <a href="attach_2attach_8c_source.html#l00162">attach.c:162</a></div></div>
<div class="ttc" id="aemail_8h_html_acc016ba3017237be6db0130216742d17af3637dcb26161cafc5b850eca390acd6"><div class="ttname"><a href="email_8h.html#acc016ba3017237be6db0130216742d17af3637dcb26161cafc5b850eca390acd6">NT_EMAIL_CHANGE_ENVELOPE</a></div><div class="ttdeci">@ NT_EMAIL_CHANGE_ENVELOPE</div><div class="ttdoc">Email&#39;s Envelope has changed.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00187">email.h:187</a></div></div>
<div class="ttc" id="aenvelope_8c_html_a0108f989ca58622df272cf31b610395e"><div class="ttname"><a href="envelope_8c.html#a0108f989ca58622df272cf31b610395e">mutt_env_to_intl</a></div><div class="ttdeci">int mutt_env_to_intl(struct Envelope *env, const char **tag, char **err)</div><div class="ttdoc">Convert an Envelope&#39;s Address fields to Punycode format.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00354">envelope.c:354</a></div></div>
<div class="ttc" id="aenvelope_8c_html_afd00cc8d84947cbd55e082420b5732f1"><div class="ttname"><a href="envelope_8c.html#afd00cc8d84947cbd55e082420b5732f1">mutt_env_to_local</a></div><div class="ttdeci">void mutt_env_to_local(struct Envelope *env)</div><div class="ttdoc">Convert an Envelope&#39;s Address fields to local format.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00316">envelope.c:316</a></div></div>
<div class="ttc" id="amutt__header_8c_html_add6fa85ce7ef8dcad27d465fbbc27708"><div class="ttname"><a href="mutt__header_8c.html#add6fa85ce7ef8dcad27d465fbbc27708">mutt_edit_headers</a></div><div class="ttdeci">void mutt_edit_headers(const char *editor, const char *body, struct Email *e, struct Buffer *fcc)</div><div class="ttdoc">Let the user edit the message header and body.</div><div class="ttdef"><b>Definition</b> <a href="mutt__header_8c_source.html#l00180">mutt_header.c:180</a></div></div>
<div class="ttc" id="arfc3676_8c_html_a47bfc67ef302e9b51cee14c713a70f35"><div class="ttname"><a href="rfc3676_8c.html#a47bfc67ef302e9b51cee14c713a70f35">mutt_rfc3676_space_unstuff</a></div><div class="ttdeci">void mutt_rfc3676_space_unstuff(struct Email *e)</div><div class="ttdoc">Remove RFC3676 space stuffing.</div><div class="ttdef"><b>Definition</b> <a href="rfc3676_8c_source.html#l00499">rfc3676.c:499</a></div></div>
<div class="ttc" id="arfc3676_8c_html_ae80c6b55541960f57f67f4ea3e4467e8"><div class="ttname"><a href="rfc3676_8c.html#ae80c6b55541960f57f67f4ea3e4467e8">mutt_rfc3676_space_stuff</a></div><div class="ttdeci">void mutt_rfc3676_space_stuff(struct Email *e)</div><div class="ttdoc">Perform RFC3676 space stuffing on an Email.</div><div class="ttdef"><b>Definition</b> <a href="rfc3676_8c_source.html#l00486">rfc3676.c:486</a></div></div>
<div class="ttc" id="astructComposeSharedData_html_ac61b3f5c9c303e5b6f6cbc7b52ce181c"><div class="ttname"><a href="structComposeSharedData.html#ac61b3f5c9c303e5b6f6cbc7b52ce181c">ComposeSharedData::fcc</a></div><div class="ttdeci">struct Buffer * fcc</div><div class="ttdoc">Buffer to save FCC.</div><div class="ttdef"><b>Definition</b> <a href="compose_2shared__data_8h_source.html#l00045">shared_data.h:45</a></div></div>
<div class="ttc" id="astructEmail_html_a34cc4493729d7a3b1f4ed783e739a9ec"><div class="ttname"><a href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">Email::env</a></div><div class="ttdeci">struct Envelope * env</div><div class="ttdoc">Envelope information.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00068">email.h:68</a></div></div>
</div><!-- fragment --><div id="dynsection-27" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga93882bbe0d62ab80cd2e1ac10ca997bd_cgraph.svg" width="612" height="647"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-28" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga93882bbe0d62ab80cd2e1ac10ca997bd_icgraph.svg" width="438" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga5840f20d584a2edf303581311bc5b029" name="ga5840f20d584a2edf303581311bc5b029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5840f20d584a2edf303581311bc5b029">&#9670;&#160;</a></span>op_compose_edit_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_compose_edit_file </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit the file to be attached - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01797">1797</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1798</span>{</div>
<div class="line"><span class="lineno"> 1799</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1800</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1801</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1802</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1803</span>  <span class="keywordflow">if</span> (cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)</div>
<div class="line"><span class="lineno"> 1804</span>  {</div>
<div class="line"><span class="lineno"> 1805</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t edit multipart attachments&quot;</span>));</div>
<div class="line"><span class="lineno"> 1806</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1807</span>  }</div>
<div class="line"><span class="lineno"> 1808</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_editor = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;editor&quot;</span>);</div>
<div class="line"><span class="lineno"> 1809</span>  <a class="code hl_function" href="curs__lib_8c.html#a0590f11f42a6242002ea4c842438231b">mutt_edit_file</a>(<a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_editor), cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 1810</span>  <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>);</div>
<div class="line"><span class="lineno"> 1811</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a>);</div>
<div class="line"><span class="lineno"> 1812</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1813</span>  <span class="comment">/* Unconditional hook since editor was invoked */</span></div>
<div class="line"><span class="lineno"> 1814</span>  <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1815</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1816</span>}</div>
<div class="ttc" id="acurs__lib_8c_html_a0590f11f42a6242002ea4c842438231b"><div class="ttname"><a href="curs__lib_8c.html#a0590f11f42a6242002ea4c842438231b">mutt_edit_file</a></div><div class="ttdeci">void mutt_edit_file(const char *editor, const char *file)</div><div class="ttdoc">Let the user edit a file.</div><div class="ttdef"><b>Definition</b> <a href="curs__lib_8c_source.html#l00117">curs_lib.c:117</a></div></div>
</div><!-- fragment --><div id="dynsection-29" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga5840f20d584a2edf303581311bc5b029_cgraph.svg" width="378" height="414"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gae4c43f426a53a5859161f38cb4c8191a" name="gae4c43f426a53a5859161f38cb4c8191a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae4c43f426a53a5859161f38cb4c8191a">&#9670;&#160;</a></span>op_compose_edit_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_compose_edit_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit the message - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01821">1821</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1822</span>{</div>
<div class="line"><span class="lineno"> 1823</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_edit_headers = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;edit_headers&quot;</span>);</div>
<div class="line"><span class="lineno"> 1824</span>  <span class="keywordflow">if</span> (!c_edit_headers)</div>
<div class="line"><span class="lineno"> 1825</span>  {</div>
<div class="line"><span class="lineno"> 1826</span>    <a class="code hl_function" href="rfc3676_8c.html#a47bfc67ef302e9b51cee14c713a70f35">mutt_rfc3676_space_unstuff</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>);</div>
<div class="line"><span class="lineno"> 1827</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_editor = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;editor&quot;</span>);</div>
<div class="line"><span class="lineno"> 1828</span>    <a class="code hl_function" href="curs__lib_8c.html#a0590f11f42a6242002ea4c842438231b">mutt_edit_file</a>(c_editor, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 1829</span>    <a class="code hl_function" href="rfc3676_8c.html#ae80c6b55541960f57f67f4ea3e4467e8">mutt_rfc3676_space_stuff</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>);</div>
<div class="line"><span class="lineno"> 1830</span>    <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>);</div>
<div class="line"><span class="lineno"> 1831</span>    <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a>);</div>
<div class="line"><span class="lineno"> 1832</span>    <span class="comment">/* Unconditional hook since editor was invoked */</span></div>
<div class="line"><span class="lineno"> 1833</span>    <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1834</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1835</span>  }</div>
<div class="line"><span class="lineno"> 1836</span> </div>
<div class="line"><span class="lineno"> 1837</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="#ga93882bbe0d62ab80cd2e1ac10ca997bd">op_envelope_edit_headers</a>(shared, op);</div>
<div class="line"><span class="lineno"> 1838</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00047">helpers.c:47</a></div></div>
<div class="ttc" id="agroup__compose__function__api_html_ga93882bbe0d62ab80cd2e1ac10ca997bd"><div class="ttname"><a href="#ga93882bbe0d62ab80cd2e1ac10ca997bd">op_envelope_edit_headers</a></div><div class="ttdeci">static int op_envelope_edit_headers(struct ComposeSharedData *shared, int op)</div><div class="ttdoc">Edit the message with headers - Implements compose_function_t -.</div><div class="ttdef"><b>Definition</b> <a href="compose_2functions_8c_source.html#l01750">functions.c:1750</a></div></div>
</div><!-- fragment --><div id="dynsection-30" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gae4c43f426a53a5859161f38cb4c8191a_cgraph.svg" width="650" height="451"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga371fd4f675f6bba67d59461f0f8662bf" name="ga371fd4f675f6bba67d59461f0f8662bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga371fd4f675f6bba67d59461f0f8662bf">&#9670;&#160;</a></span>op_compose_ispell()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_compose_ispell </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run ispell on the message - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01843">1843</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1844</span>{</div>
<div class="line"><span class="lineno"> 1845</span>  <a class="code hl_function" href="signal_8c.html#a98b4f102294daf38e646dba8b7f4f9e0">endwin</a>();</div>
<div class="line"><span class="lineno"> 1846</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_ispell = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;ispell&quot;</span>);</div>
<div class="line"><span class="lineno"> 1847</span>  <span class="keywordtype">char</span> buf[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno"> 1848</span>  snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s -x %s&quot;</span>, <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_ispell), shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 1849</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a>(buf) == -1)</div>
<div class="line"><span class="lineno"> 1850</span>  {</div>
<div class="line"><span class="lineno"> 1851</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error running \&quot;%s\&quot;&quot;</span>), buf);</div>
<div class="line"><span class="lineno"> 1852</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1853</span>  }</div>
<div class="line"><span class="lineno"> 1854</span> </div>
<div class="line"><span class="lineno"> 1855</span>  <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>);</div>
<div class="line"><span class="lineno"> 1856</span>  <a class="code hl_function" href="mutt_2notify_8c.html#ade2f42f8e0d8a843e87816300799a8e1">notify_send</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aacf5772e590568f9bda0373986775354">notify</a>, <a class="code hl_enumvalue" href="notify__type_8h.html#addc4b6302e217e9dffab38d9dd5c02f8a42f0ca49f1334c4edded574f4267b34a">NT_EMAIL</a>, <a class="code hl_enumvalue" href="email_8h.html#acc016ba3017237be6db0130216742d17ae98e64168a66213241e99dc7a484628a">NT_EMAIL_CHANGE_ATTACH</a>, NULL);</div>
<div class="line"><span class="lineno"> 1857</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1858</span>}</div>
<div class="ttc" id="amutt_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00042">mutt.h:42</a></div></div>
<div class="ttc" id="aprotos_8h_html_aa1d4ad04b000036513ca3f741059942c"><div class="ttname"><a href="protos_8h.html#aa1d4ad04b000036513ca3f741059942c">mutt_system</a></div><div class="ttdeci">int mutt_system(const char *cmd)</div><div class="ttdoc">Run an external command.</div><div class="ttdef"><b>Definition</b> <a href="system_8c_source.html#l00052">system.c:52</a></div></div>
<div class="ttc" id="asignal_8c_html_a98b4f102294daf38e646dba8b7f4f9e0"><div class="ttname"><a href="signal_8c.html#a98b4f102294daf38e646dba8b7f4f9e0">endwin</a></div><div class="ttdeci">int endwin(void)</div></div>
</div><!-- fragment --><div id="dynsection-31" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga371fd4f675f6bba67d59461f0f8662bf_cgraph.svg" width="360" height="254"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gaf961b4ad0ff46be6cd3d10883d4f6013" name="gaf961b4ad0ff46be6cd3d10883d4f6013"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf961b4ad0ff46be6cd3d10883d4f6013">&#9670;&#160;</a></span>op_compose_postpone_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_compose_postpone_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save this message to send later - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01863">1863</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1864</span>{</div>
<div class="line"><span class="lineno"> 1865</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="compose_2functions_8c.html#ab888d10bda8b3f792707eb614bc9d7b1">check_attachments</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>) != 0)</div>
<div class="line"><span class="lineno"> 1866</span>  {</div>
<div class="line"><span class="lineno"> 1867</span>    <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a>);</div>
<div class="line"><span class="lineno"> 1868</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1869</span>  }</div>
<div class="line"><span class="lineno"> 1870</span> </div>
<div class="line"><span class="lineno"> 1871</span>  shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a900f6971bf89850d537505f82d9db16a">rc</a> = 1;</div>
<div class="line"><span class="lineno"> 1872</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a179661f6d9dbe6d6ded597b3b39ae810">FR_DONE</a>;</div>
<div class="line"><span class="lineno"> 1873</span>}</div>
<div class="ttc" id="acompose_2functions_8c_html_ab888d10bda8b3f792707eb614bc9d7b1"><div class="ttname"><a href="compose_2functions_8c.html#ab888d10bda8b3f792707eb614bc9d7b1">check_attachments</a></div><div class="ttdeci">static int check_attachments(struct AttachCtx *actx, struct ConfigSubset *sub)</div><div class="ttdoc">Check if any attachments have changed or been deleted.</div><div class="ttdef"><b>Definition</b> <a href="compose_2functions_8c_source.html#l00273">functions.c:273</a></div></div>
<div class="ttc" id="adispatcher_8h_html_a491d2646f32539a82a5d8b5f2bdc3414a179661f6d9dbe6d6ded597b3b39ae810"><div class="ttname"><a href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a179661f6d9dbe6d6ded597b3b39ae810">FR_DONE</a></div><div class="ttdeci">@ FR_DONE</div><div class="ttdoc">Exit the Dialog.</div><div class="ttdef"><b>Definition</b> <a href="dispatcher_8h_source.html#l00035">dispatcher.h:35</a></div></div>
<div class="ttc" id="astructComposeSharedData_html_a900f6971bf89850d537505f82d9db16a"><div class="ttname"><a href="structComposeSharedData.html#a900f6971bf89850d537505f82d9db16a">ComposeSharedData::rc</a></div><div class="ttdeci">int rc</div><div class="ttdoc">Return code to leave compose.</div><div class="ttdef"><b>Definition</b> <a href="compose_2shared__data_8h_source.html#l00048">shared_data.h:48</a></div></div>
</div><!-- fragment --><div id="dynsection-32" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gaf961b4ad0ff46be6cd3d10883d4f6013_cgraph.svg" width="376" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-33" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gaf961b4ad0ff46be6cd3d10883d4f6013_icgraph.svg" width="288" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga32067b4b46a10f5a8f30ce5048bd192c" name="ga32067b4b46a10f5a8f30ce5048bd192c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32067b4b46a10f5a8f30ce5048bd192c">&#9670;&#160;</a></span>op_compose_rename_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_compose_rename_file </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rename/move an attached file - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01878">1878</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1879</span>{</div>
<div class="line"><span class="lineno"> 1880</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1881</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1882</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 1883</span>                                                 shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 1884</span>  <span class="keywordflow">if</span> (cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)</div>
<div class="line"><span class="lineno"> 1885</span>  {</div>
<div class="line"><span class="lineno"> 1886</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t rename multipart attachments&quot;</span>));</div>
<div class="line"><span class="lineno"> 1887</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1888</span>  }</div>
<div class="line"><span class="lineno"> 1889</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *fname = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1890</span>  <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(fname, cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 1891</span>  <a class="code hl_function" href="muttlib_8c.html#a777680c324667521d8c486051c22fe10">buf_pretty_mailbox</a>(fname);</div>
<div class="line"><span class="lineno"> 1892</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structFileCompletionData.html">FileCompletionData</a> cdata = { <span class="keyword">false</span>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>, NULL, NULL, NULL };</div>
<div class="line"><span class="lineno"> 1893</span>  <span class="keywordflow">if</span> ((<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Rename to: &quot;</span>), fname, <a class="code hl_define" href="mutt_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234a313ffe25b1e9a86bb1f9afb44e15925c">HC_FILE</a>,</div>
<div class="line"><span class="lineno"> 1894</span>                    &amp;<a class="code hl_variable" href="browser_2complete_8c.html#a6bd4da54e7d75404519878f3ef32c87e">CompleteFileOps</a>, &amp;cdata) == 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1895</span>      !<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(fname))</div>
<div class="line"><span class="lineno"> 1896</span>  {</div>
<div class="line"><span class="lineno"> 1897</span>    <span class="keyword">struct </span>stat st = { 0 };</div>
<div class="line"><span class="lineno"> 1898</span>    <span class="keywordflow">if</span> (stat(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, &amp;st) == -1)</div>
<div class="line"><span class="lineno"> 1899</span>    {</div>
<div class="line"><span class="lineno"> 1900</span>      <span class="comment">/* L10N: &quot;stat&quot; is a system call. Do &quot;man 2 stat&quot; for more information. */</span></div>
<div class="line"><span class="lineno"> 1901</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t stat %s: %s&quot;</span>), <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname), strerror(errno));</div>
<div class="line"><span class="lineno"> 1902</span>      <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno"> 1903</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1904</span>    }</div>
<div class="line"><span class="lineno"> 1905</span> </div>
<div class="line"><span class="lineno"> 1906</span>    <a class="code hl_function" href="muttlib_8c.html#adde3990a0490dfba609fc94dbdbfd6b3">buf_expand_path</a>(fname);</div>
<div class="line"><span class="lineno"> 1907</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="file_8c.html#a8154bfd014904ca57b0ba2cfb31e26bc">mutt_file_rename</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname)))</div>
<div class="line"><span class="lineno"> 1908</span>    {</div>
<div class="line"><span class="lineno"> 1909</span>      <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno"> 1910</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a586007e11e4fad5edc2990e69650f8aa">FR_ERROR</a>;</div>
<div class="line"><span class="lineno"> 1911</span>    }</div>
<div class="line"><span class="lineno"> 1912</span> </div>
<div class="line"><span class="lineno"> 1913</span>    <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname));</div>
<div class="line"><span class="lineno"> 1914</span>    <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#ada2a150b4a42da80d12b7e3be6d396f9">MENU_REDRAW_CURRENT</a>);</div>
<div class="line"><span class="lineno"> 1915</span> </div>
<div class="line"><span class="lineno"> 1916</span>    <span class="keywordflow">if</span> (cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a4fb2c1a3bc453c5451720c0ddcc99c5b">stamp</a> &gt;= st.st_mtime)</div>
<div class="line"><span class="lineno"> 1917</span>      <a class="code hl_function" href="sendlib_8c.html#ae75843a591a8292e4f4e42df29c8b2d0">mutt_stamp_attachment</a>(cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>);</div>
<div class="line"><span class="lineno"> 1918</span>    <a class="code hl_function" href="hook_8c.html#af487ca5e3f7da21c86e3ad61fdb55faa">mutt_message_hook</a>(NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, <a class="code hl_define" href="hook_8h.html#a709891b042fc13265a7971b2401081c9">MUTT_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 1919</span>  }</div>
<div class="line"><span class="lineno"> 1920</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno"> 1921</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1922</span>}</div>
<div class="ttc" id="afile_8c_html_a8154bfd014904ca57b0ba2cfb31e26bc"><div class="ttname"><a href="file_8c.html#a8154bfd014904ca57b0ba2cfb31e26bc">mutt_file_rename</a></div><div class="ttdeci">int mutt_file_rename(const char *oldfile, const char *newfile)</div><div class="ttdoc">Rename a file.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l01264">file.c:1264</a></div></div>
<div class="ttc" id="asendlib_8c_html_ae75843a591a8292e4f4e42df29c8b2d0"><div class="ttname"><a href="sendlib_8c.html#ae75843a591a8292e4f4e42df29c8b2d0">mutt_stamp_attachment</a></div><div class="ttdeci">void mutt_stamp_attachment(struct Body *b)</div><div class="ttdoc">Timestamp an Attachment.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00410">sendlib.c:410</a></div></div>
<div class="ttc" id="astructBody_html_a4fb2c1a3bc453c5451720c0ddcc99c5b"><div class="ttname"><a href="structBody.html#a4fb2c1a3bc453c5451720c0ddcc99c5b">Body::stamp</a></div><div class="ttdeci">time_t stamp</div><div class="ttdoc">Time stamp of last encoding update.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00077">body.h:77</a></div></div>
</div><!-- fragment --><div id="dynsection-34" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga32067b4b46a10f5a8f30ce5048bd192c_cgraph.svg" width="584" height="779"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga6e13d89de4de5f21d9ff9922924bcd48" name="ga6e13d89de4de5f21d9ff9922924bcd48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e13d89de4de5f21d9ff9922924bcd48">&#9670;&#160;</a></span>op_compose_send_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_compose_send_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send the message - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01927">1927</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1928</span>{</div>
<div class="line"><span class="lineno"> 1929</span>  <span class="comment">/* Note: We don&#39;t invoke send2-hook here, since we want to leave</span></div>
<div class="line"><span class="lineno"> 1930</span><span class="comment">   * users an opportunity to change settings from the &quot;:&quot; prompt.  */</span></div>
<div class="line"><span class="lineno"> 1931</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="compose_2functions_8c.html#ab888d10bda8b3f792707eb614bc9d7b1">check_attachments</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>) != 0)</div>
<div class="line"><span class="lineno"> 1932</span>  {</div>
<div class="line"><span class="lineno"> 1933</span>    <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a>);</div>
<div class="line"><span class="lineno"> 1934</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1935</span>  }</div>
<div class="line"><span class="lineno"> 1936</span> </div>
<div class="line"><span class="lineno"> 1937</span>  <span class="keywordflow">if</span> (!shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a6736c2130d450d730b43059fddc54d89">fcc_set</a> &amp;&amp; !<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ac61b3f5c9c303e5b6f6cbc7b52ce181c">fcc</a>))</div>
<div class="line"><span class="lineno"> 1938</span>  {</div>
<div class="line"><span class="lineno"> 1939</span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> ans = <a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Save a copy of this message?&quot;</span>),</div>
<div class="line"><span class="lineno"> 1940</span>                                           shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;copy&quot;</span>);</div>
<div class="line"><span class="lineno"> 1941</span>    <span class="keywordflow">if</span> (ans == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>)</div>
<div class="line"><span class="lineno"> 1942</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1943</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ans == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>)</div>
<div class="line"><span class="lineno"> 1944</span>      <a class="code hl_function" href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ac61b3f5c9c303e5b6f6cbc7b52ce181c">fcc</a>);</div>
<div class="line"><span class="lineno"> 1945</span>  }</div>
<div class="line"><span class="lineno"> 1946</span> </div>
<div class="line"><span class="lineno"> 1947</span>  shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a900f6971bf89850d537505f82d9db16a">rc</a> = 0;</div>
<div class="line"><span class="lineno"> 1948</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a179661f6d9dbe6d6ded597b3b39ae810">FR_DONE</a>;</div>
<div class="line"><span class="lineno"> 1949</span>}</div>
<div class="ttc" id="abuffer_8c_html_a3b1f80652b37dc26046f9acdd85a0b05"><div class="ttname"><a href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a></div><div class="ttdeci">void buf_reset(struct Buffer *buf)</div><div class="ttdoc">Reset an existing Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00076">buffer.c:76</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35db"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a></div><div class="ttdeci">QuadOption</div><div class="ttdoc">Possible values for a quad-option.</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00035">quad.h:36</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a></div><div class="ttdeci">@ MUTT_ABORT</div><div class="ttdoc">User aborted the question (with Ctrl-G)</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00037">quad.h:37</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a></div><div class="ttdeci">@ MUTT_NO</div><div class="ttdoc">User answered &#39;No&#39;, or assume &#39;No&#39;.</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00038">quad.h:38</a></div></div>
<div class="ttc" id="aquestion_2lib_8h_html_a8ba883bf53e8ab425a03d17368de84b4"><div class="ttname"><a href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a></div><div class="ttdeci">enum QuadOption query_quadoption(const char *prompt, struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Ask the user a quad-question.</div><div class="ttdef"><b>Definition</b> <a href="question_8c_source.html#l00377">question.c:377</a></div></div>
<div class="ttc" id="astructComposeSharedData_html_a6736c2130d450d730b43059fddc54d89"><div class="ttname"><a href="structComposeSharedData.html#a6736c2130d450d730b43059fddc54d89">ComposeSharedData::fcc_set</a></div><div class="ttdeci">bool fcc_set</div><div class="ttdoc">User has edited the Fcc: field.</div><div class="ttdef"><b>Definition</b> <a href="compose_2shared__data_8h_source.html#l00047">shared_data.h:47</a></div></div>
</div><!-- fragment --><div id="dynsection-35" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga6e13d89de4de5f21d9ff9922924bcd48_cgraph.svg" width="408" height="254"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gad2360aa90e289f53c6e51d14546270d1" name="gad2360aa90e289f53c6e51d14546270d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad2360aa90e289f53c6e51d14546270d1">&#9670;&#160;</a></span>op_compose_write_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_compose_write_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write the message to a folder - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01954">1954</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1955</span>{</div>
<div class="line"><span class="lineno"> 1956</span>  <span class="keywordtype">int</span> rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 1957</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *fname = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1958</span>  <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>)</div>
<div class="line"><span class="lineno"> 1959</span>  {</div>
<div class="line"><span class="lineno"> 1960</span>    <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(fname, <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>));</div>
<div class="line"><span class="lineno"> 1961</span>    <a class="code hl_function" href="muttlib_8c.html#a777680c324667521d8c486051c22fe10">buf_pretty_mailbox</a>(fname);</div>
<div class="line"><span class="lineno"> 1962</span>  }</div>
<div class="line"><span class="lineno"> 1963</span>  <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a>)</div>
<div class="line"><span class="lineno"> 1964</span>    shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[0]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>;</div>
<div class="line"><span class="lineno"> 1965</span>  <span class="keywordflow">if</span> ((<a class="code hl_function" href="group__gui__mw.html#ga7074d808675e21370b1cef98d55e75ca">mw_enter_fname</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Write message to mailbox&quot;</span>), fname, <span class="keyword">true</span>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2c07cd726149be67e01ff9fc10fe3991">mailbox</a>,</div>
<div class="line"><span class="lineno"> 1966</span>                      <span class="keyword">false</span>, NULL, NULL, <a class="code hl_define" href="browser_2lib_8h.html#aef17206dea5302001a39f3c633e731d3">MUTT_SEL_NO_FLAGS</a>) != -1) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1967</span>      !<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(fname))</div>
<div class="line"><span class="lineno"> 1968</span>  {</div>
<div class="line"><span class="lineno"> 1969</span>    <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Writing message to %s ...&quot;</span>), <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname));</div>
<div class="line"><span class="lineno"> 1970</span>    <a class="code hl_function" href="muttlib_8c.html#adde3990a0490dfba609fc94dbdbfd6b3">buf_expand_path</a>(fname);</div>
<div class="line"><span class="lineno"> 1971</span> </div>
<div class="line"><span class="lineno"> 1972</span>    <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1973</span>      shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a9700f763b34719d97a56b5f9b032d97a">mutt_make_multipart</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 1974</span> </div>
<div class="line"><span class="lineno"> 1975</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="sendlib_8c.html#acd4f22db21ca81a6a845ffe6888d141f">mutt_write_fcc</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fname), shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, NULL, <span class="keyword">false</span>, NULL,</div>
<div class="line"><span class="lineno"> 1976</span>                       NULL, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>) == 0)</div>
<div class="line"><span class="lineno"> 1977</span>      <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Message written&quot;</span>));</div>
<div class="line"><span class="lineno"> 1978</span> </div>
<div class="line"><span class="lineno"> 1979</span>    shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 1980</span>    rc = <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1981</span>  }</div>
<div class="line"><span class="lineno"> 1982</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fname);</div>
<div class="line"><span class="lineno"> 1983</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1984</span>}</div>
<div class="ttc" id="amultipart_8c_html_a294249634f22cab1bce592ca8602c5ec"><div class="ttname"><a href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a></div><div class="ttdeci">struct Body * mutt_remove_multipart(struct Body *b)</div><div class="ttdoc">Extract the multipart body if it exists.</div><div class="ttdef"><b>Definition</b> <a href="multipart_8c_source.html#l00126">multipart.c:126</a></div></div>
<div class="ttc" id="amultipart_8c_html_a9700f763b34719d97a56b5f9b032d97a"><div class="ttname"><a href="multipart_8c.html#a9700f763b34719d97a56b5f9b032d97a">mutt_make_multipart</a></div><div class="ttdeci">struct Body * mutt_make_multipart(struct Body *b)</div><div class="ttdoc">Create a multipart email.</div><div class="ttdef"><b>Definition</b> <a href="multipart_8c_source.html#l00100">multipart.c:100</a></div></div>
<div class="ttc" id="asendlib_8c_html_acd4f22db21ca81a6a845ffe6888d141f"><div class="ttname"><a href="sendlib_8c.html#acd4f22db21ca81a6a845ffe6888d141f">mutt_write_fcc</a></div><div class="ttdeci">int mutt_write_fcc(const char *path, struct Email *e, const char *msgid, bool post, const char *fcc, char **finalpath, struct ConfigSubset *sub)</div><div class="ttdoc">Write email to FCC mailbox.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l01018">sendlib.c:1018</a></div></div>
</div><!-- fragment --><div id="dynsection-36" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gad2360aa90e289f53c6e51d14546270d1_cgraph.svg" width="600" height="616"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga40db2202d2dafac3687eb1710650d67d" name="ga40db2202d2dafac3687eb1710650d67d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga40db2202d2dafac3687eb1710650d67d">&#9670;&#160;</a></span>op_display_headers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_display_headers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Display message and toggle header weeding - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>
<p>This function handles:</p><ul>
<li>OP_ATTACHMENT_VIEW</li>
<li>OP_ATTACHMENT_VIEW_MAILCAP</li>
<li>OP_ATTACHMENT_VIEW_PAGER</li>
<li>OP_ATTACHMENT_VIEW_TEXT</li>
<li>OP_DISPLAY_HEADERS </li>
</ul>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l01996">1996</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1997</span>{</div>
<div class="line"><span class="lineno"> 1998</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="compose_2functions_8c.html#a0b0529f94fccff91159e173fb58a7c64">check_count</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>))</div>
<div class="line"><span class="lineno"> 1999</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 2000</span> </div>
<div class="line"><span class="lineno"> 2001</span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946">ViewAttachMode</a> mode = <a class="code hl_enumvalue" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b">MUTT_VA_REGULAR</a>;</div>
<div class="line"><span class="lineno"> 2002</span> </div>
<div class="line"><span class="lineno"> 2003</span>  <span class="keywordflow">switch</span> (op)</div>
<div class="line"><span class="lineno"> 2004</span>  {</div>
<div class="line"><span class="lineno"> 2005</span>    <span class="keywordflow">case</span> OP_ATTACHMENT_VIEW:</div>
<div class="line"><span class="lineno"> 2006</span>    <span class="keywordflow">case</span> OP_DISPLAY_HEADERS:</div>
<div class="line"><span class="lineno"> 2007</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2008</span> </div>
<div class="line"><span class="lineno"> 2009</span>    <span class="keywordflow">case</span> OP_ATTACHMENT_VIEW_MAILCAP:</div>
<div class="line"><span class="lineno"> 2010</span>      mode = <a class="code hl_enumvalue" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a0dcfd8a67792775ae3506d2a99bf1b67">MUTT_VA_MAILCAP</a>;</div>
<div class="line"><span class="lineno"> 2011</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2012</span> </div>
<div class="line"><span class="lineno"> 2013</span>    <span class="keywordflow">case</span> OP_ATTACHMENT_VIEW_PAGER:</div>
<div class="line"><span class="lineno"> 2014</span>      mode = <a class="code hl_enumvalue" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc">MUTT_VA_PAGER</a>;</div>
<div class="line"><span class="lineno"> 2015</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2016</span> </div>
<div class="line"><span class="lineno"> 2017</span>    <span class="keywordflow">case</span> OP_ATTACHMENT_VIEW_TEXT:</div>
<div class="line"><span class="lineno"> 2018</span>      mode = <a class="code hl_enumvalue" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79">MUTT_VA_AS_TEXT</a>;</div>
<div class="line"><span class="lineno"> 2019</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2020</span>  }</div>
<div class="line"><span class="lineno"> 2021</span> </div>
<div class="line"><span class="lineno"> 2022</span>  <span class="keywordflow">if</span> (mode == <a class="code hl_enumvalue" href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b">MUTT_VA_REGULAR</a>)</div>
<div class="line"><span class="lineno"> 2023</span>  {</div>
<div class="line"><span class="lineno"> 2024</span>    <a class="code hl_function" href="mutt__attach_8h.html#a72c9e19b893d8d4afc5593d9d2b399ff">mutt_attach_display_loop</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, op,</div>
<div class="line"><span class="lineno"> 2025</span>                             shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 2026</span>  }</div>
<div class="line"><span class="lineno"> 2027</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2028</span>  {</div>
<div class="line"><span class="lineno"> 2029</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structAttachPtr.html">AttachPtr</a> *cur_att = <a class="code hl_function" href="recvattach_8c.html#a718168300f4a21fa0c1a28321aeaa6ee">current_attachment</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>,</div>
<div class="line"><span class="lineno"> 2030</span>                                                   shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>);</div>
<div class="line"><span class="lineno"> 2031</span>    <a class="code hl_function" href="mutt__attach_8c.html#ab2e07f4628b9c8e41529a62c27d1b51a">mutt_view_attachment</a>(NULL, cur_att-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>, mode, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#ab3378f34463d3a779f5ccc5b281ed291">email</a>,</div>
<div class="line"><span class="lineno"> 2032</span>                         shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>, shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>-&gt;<a class="code hl_variable" href="structMenu.html#a03edef68cc4422dea828bc89332f3020">win</a>);</div>
<div class="line"><span class="lineno"> 2033</span>  }</div>
<div class="line"><span class="lineno"> 2034</span> </div>
<div class="line"><span class="lineno"> 2035</span>  <a class="code hl_function" href="menu_2lib_8h.html#a5a9733924cc01176ee916515a3683268">menu_queue_redraw</a>(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#a6b1917b393b1f9f3abb8a3673abbe135">menu</a>, <a class="code hl_define" href="menu_2lib_8h.html#a073caf105025cd1e03e766c7e4e9ec2f">MENU_REDRAW_FULL</a>);</div>
<div class="line"><span class="lineno"> 2036</span>  <span class="comment">/* no send2hook, since this doesn&#39;t modify the message */</span></div>
<div class="line"><span class="lineno"> 2037</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 2038</span>}</div>
<div class="ttc" id="amutt__attach_8c_html_ab2e07f4628b9c8e41529a62c27d1b51a"><div class="ttname"><a href="mutt__attach_8c.html#ab2e07f4628b9c8e41529a62c27d1b51a">mutt_view_attachment</a></div><div class="ttdeci">int mutt_view_attachment(FILE *fp, struct Body *b, enum ViewAttachMode mode, struct Email *e, struct AttachCtx *actx, struct MuttWindow *win)</div><div class="ttdoc">View an attachment.</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8c_source.html#l00419">mutt_attach.c:419</a></div></div>
<div class="ttc" id="amutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946">ViewAttachMode</a></div><div class="ttdeci">ViewAttachMode</div><div class="ttdoc">Options for mutt_view_attachment()</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8h_source.html#l00042">mutt_attach.h:43</a></div></div>
<div class="ttc" id="amutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946a0dcfd8a67792775ae3506d2a99bf1b67"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a0dcfd8a67792775ae3506d2a99bf1b67">MUTT_VA_MAILCAP</a></div><div class="ttdeci">@ MUTT_VA_MAILCAP</div><div class="ttdoc">Force viewing using mailcap entry.</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8h_source.html#l00045">mutt_attach.h:45</a></div></div>
<div class="ttc" id="amutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946a805f2934d475a513bb1294baa8e5d00b">MUTT_VA_REGULAR</a></div><div class="ttdeci">@ MUTT_VA_REGULAR</div><div class="ttdoc">View using default method.</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8h_source.html#l00044">mutt_attach.h:44</a></div></div>
<div class="ttc" id="amutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ab4f9fd68dbd70c2bd8f4e3795bed15cc">MUTT_VA_PAGER</a></div><div class="ttdeci">@ MUTT_VA_PAGER</div><div class="ttdoc">View attachment in pager using copiousoutput mailcap.</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8h_source.html#l00047">mutt_attach.h:47</a></div></div>
<div class="ttc" id="amutt__attach_8h_html_a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79"><div class="ttname"><a href="mutt__attach_8h.html#a5dd95d385576ba1b957d7e9c523ec946ae2885fe7d47c03a1f0246d054739da79">MUTT_VA_AS_TEXT</a></div><div class="ttdeci">@ MUTT_VA_AS_TEXT</div><div class="ttdoc">Force viewing as text.</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8h_source.html#l00046">mutt_attach.h:46</a></div></div>
<div class="ttc" id="amutt__attach_8h_html_a72c9e19b893d8d4afc5593d9d2b399ff"><div class="ttname"><a href="mutt__attach_8h.html#a72c9e19b893d8d4afc5593d9d2b399ff">mutt_attach_display_loop</a></div><div class="ttdeci">int mutt_attach_display_loop(struct ConfigSubset *sub, struct Menu *menu, int op, struct Email *e, struct AttachCtx *actx, bool recv)</div><div class="ttdoc">Event loop for the Attachment menu.</div><div class="ttdef"><b>Definition</b> <a href="recvattach_8c_source.html#l00962">recvattach.c:962</a></div></div>
<div class="ttc" id="astructMenu_html_a03edef68cc4422dea828bc89332f3020"><div class="ttname"><a href="structMenu.html#a03edef68cc4422dea828bc89332f3020">Menu::win</a></div><div class="ttdeci">struct MuttWindow * win</div><div class="ttdoc">Window holding the Menu.</div><div class="ttdef"><b>Definition</b> <a href="menu_2lib_8h_source.html#l00087">lib.h:87</a></div></div>
</div><!-- fragment --><div id="dynsection-37" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga40db2202d2dafac3687eb1710650d67d_cgraph.svg" width="587" height="226"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gab85ddf863dcc1794b5a889b8f25c0c6f" name="gab85ddf863dcc1794b5a889b8f25c0c6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab85ddf863dcc1794b5a889b8f25c0c6f">&#9670;&#160;</a></span>op_exit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_exit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Exit this menu - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l02043">2043</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2044</span>{</div>
<div class="line"><span class="lineno"> 2045</span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> ans = <a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Save (postpone) draft message?&quot;</span>),</div>
<div class="line"><span class="lineno"> 2046</span>                                         shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a2588f4fa2f7bffbdf9efa8975ea22e74">sub</a>, <span class="stringliteral">&quot;postpone&quot;</span>);</div>
<div class="line"><span class="lineno"> 2047</span>  <span class="keywordflow">if</span> (ans == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>)</div>
<div class="line"><span class="lineno"> 2048</span>  {</div>
<div class="line"><span class="lineno"> 2049</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a>; i++)</div>
<div class="line"><span class="lineno"> 2050</span>      <span class="keywordflow">if</span> (shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a85722c8044f044e59047c3c8b12ef279">unowned</a>)</div>
<div class="line"><span class="lineno"> 2051</span>        shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2052</span> </div>
<div class="line"><span class="lineno"> 2053</span>    <span class="keywordflow">if</span> (!(shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a3f5fccb990e70469ff4d6a609987ea1d">flags</a> &amp; <a class="code hl_define" href="compose_2lib_8h.html#adf568d592758fae1758bbb4dc4e3e554">MUTT_COMPOSE_NOFREEHEADER</a>))</div>
<div class="line"><span class="lineno"> 2054</span>    {</div>
<div class="line"><span class="lineno"> 2055</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#af02af835a67d8b3467f3a52ede4897f0">idxlen</a>; i++)</div>
<div class="line"><span class="lineno"> 2056</span>      {</div>
<div class="line"><span class="lineno"> 2057</span>        <span class="comment">/* avoid freeing other attachments */</span></div>
<div class="line"><span class="lineno"> 2058</span>        shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> = NULL;</div>
<div class="line"><span class="lineno"> 2059</span>        <span class="keywordflow">if</span> (!shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a8e10ba22522218bd12bd3cb38dd3fcc9">email</a>)</div>
<div class="line"><span class="lineno"> 2060</span>          shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a> = NULL;</div>
<div class="line"><span class="lineno"> 2061</span>        <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a9f626dcd000e9f0c73f24dca00d2b6f4">adata</a>-&gt;<a class="code hl_variable" href="structComposeAttachData.html#ae079826a0fe6ae466c8b3c1a8b426639">actx</a>-&gt;<a class="code hl_variable" href="structAttachCtx.html#a8954cda6f07f33628b3addf8bc2621fd">idx</a>[i]-&gt;<a class="code hl_variable" href="structAttachPtr.html#a0546c0753a6155ae9555c290b80d0356">body</a>);</div>
<div class="line"><span class="lineno"> 2062</span>      }</div>
<div class="line"><span class="lineno"> 2063</span>    }</div>
<div class="line"><span class="lineno"> 2064</span>    shared-&gt;<a class="code hl_variable" href="structComposeSharedData.html#a900f6971bf89850d537505f82d9db16a">rc</a> = -1;</div>
<div class="line"><span class="lineno"> 2065</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a179661f6d9dbe6d6ded597b3b39ae810">FR_DONE</a>;</div>
<div class="line"><span class="lineno"> 2066</span>  }</div>
<div class="line"><span class="lineno"> 2067</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ans == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>)</div>
<div class="line"><span class="lineno"> 2068</span>  {</div>
<div class="line"><span class="lineno"> 2069</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414adf6f64b4deecf224277b3183e4223b3e">FR_NO_ACTION</a>;</div>
<div class="line"><span class="lineno"> 2070</span>  }</div>
<div class="line"><span class="lineno"> 2071</span> </div>
<div class="line"><span class="lineno"> 2072</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="#gaf961b4ad0ff46be6cd3d10883d4f6013">op_compose_postpone_message</a>(shared, op);</div>
<div class="line"><span class="lineno"> 2073</span>}</div>
<div class="ttc" id="acompose_2lib_8h_html_adf568d592758fae1758bbb4dc4e3e554"><div class="ttname"><a href="compose_2lib_8h.html#adf568d592758fae1758bbb4dc4e3e554">MUTT_COMPOSE_NOFREEHEADER</a></div><div class="ttdeci">#define MUTT_COMPOSE_NOFREEHEADER</div><div class="ttdef"><b>Definition</b> <a href="compose_2lib_8h_source.html#l00052">lib.h:52</a></div></div>
<div class="ttc" id="agroup__compose__function__api_html_gaf961b4ad0ff46be6cd3d10883d4f6013"><div class="ttname"><a href="#gaf961b4ad0ff46be6cd3d10883d4f6013">op_compose_postpone_message</a></div><div class="ttdeci">static int op_compose_postpone_message(struct ComposeSharedData *shared, int op)</div><div class="ttdoc">Save this message to send later - Implements compose_function_t -.</div><div class="ttdef"><b>Definition</b> <a href="compose_2functions_8c_source.html#l01863">functions.c:1863</a></div></div>
<div class="ttc" id="astructComposeSharedData_html_a3f5fccb990e70469ff4d6a609987ea1d"><div class="ttname"><a href="structComposeSharedData.html#a3f5fccb990e70469ff4d6a609987ea1d">ComposeSharedData::flags</a></div><div class="ttdeci">int flags</div><div class="ttdoc">Flags, e.g. MUTT_COMPOSE_NOFREEHEADER.</div><div class="ttdef"><b>Definition</b> <a href="compose_2shared__data_8h_source.html#l00046">shared_data.h:46</a></div></div>
</div><!-- fragment --><div id="dynsection-38" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_gab85ddf863dcc1794b5a889b8f25c0c6f_cgraph.svg" width="288" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga5c6443c98e75fd81427e57e377717289" name="ga5c6443c98e75fd81427e57e377717289"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5c6443c98e75fd81427e57e377717289">&#9670;&#160;</a></span>op_forget_passphrase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int op_forget_passphrase </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structComposeSharedData.html">ComposeSharedData</a> *</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wipe passphrases from memory - Implements <a class="el" href="compose_2functions_8h.html#a0252411a8be6a975ff178864a70f4fad">compose_function_t</a> -. </p>

<p class="definition">Definition at line <a class="el" href="compose_2functions_8c_source.html#l02078">2078</a> of file <a class="el" href="compose_2functions_8c_source.html">functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2079</span>{</div>
<div class="line"><span class="lineno"> 2080</span>  <a class="code hl_function" href="crypt_8c.html#a8a09719065d14c27701c998b48883ac4">crypt_forget_passphrase</a>();</div>
<div class="line"><span class="lineno"> 2081</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="dispatcher_8h.html#a491d2646f32539a82a5d8b5f2bdc3414a0c300f5e79d1b41af8f158a457508670">FR_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 2082</span>}</div>
<div class="ttc" id="acrypt_8c_html_a8a09719065d14c27701c998b48883ac4"><div class="ttname"><a href="crypt_8c.html#a8a09719065d14c27701c998b48883ac4">crypt_forget_passphrase</a></div><div class="ttdeci">void crypt_forget_passphrase(void)</div><div class="ttdoc">Forget a passphrase and display a message.</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l00089">crypt.c:89</a></div></div>
</div><!-- fragment --><div id="dynsection-39" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__compose__function__api_ga5c6443c98e75fd81427e57e377717289_cgraph.svg" width="390" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
