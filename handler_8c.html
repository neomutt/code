<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: email/handler.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2025-12-11-177-g48e272</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('handler_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">handler.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Decide how to display email content.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;iconv.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mutt_2lib_8h_source.html">mutt/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_2lib_8h_source.html">config/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="core_2lib_8h_source.html">core/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gui_2lib_8h_source.html">gui/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt_8h_source.html">mutt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="handler_8h_source.html">handler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="attach_2lib_8h_source.html">attach/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="key_2lib_8h_source.html">key/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="menu_2lib_8h_source.html">menu/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ncrypt_2lib_8h_source.html">ncrypt/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pager_2lib_8h_source.html">pager/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="email_2body_8h_source.html">body.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="copy__email_8h_source.html">copy_email.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="enriched_8h_source.html">enriched.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="envelope_8h_source.html">envelope.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mailcap_8h_source.html">mailcap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mime_8h_source.html">mime.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__logging_8h_source.html">mutt_logging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="muttlib_8h_source.html">muttlib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="parameter_8h_source.html">parameter.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="email_2parse_8h_source.html">parse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rfc3676_8h_source.html">rfc3676.h</a>&quot;</code><br />
<code>#include &lt;libintl.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for handler.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c__incl.svg" width="2811" height="351"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="handler_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a238627be6fe9590ff73fcc08ae6a10b3" id="r_a238627be6fe9590ff73fcc08ae6a10b3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a238627be6fe9590ff73fcc08ae6a10b3">BUFI_SIZE</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:a238627be6fe9590ff73fcc08ae6a10b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad826a02aca1883b9747a603a5c0b54d" id="r_aad826a02aca1883b9747a603a5c0b54d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad826a02aca1883b9747a603a5c0b54d">BUFO_SIZE</a>&#160;&#160;&#160;2000</td></tr>
<tr class="separator:aad826a02aca1883b9747a603a5c0b54d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a984562cb651e984a5b587170dee57a89" id="r_a984562cb651e984a5b587170dee57a89"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a984562cb651e984a5b587170dee57a89">TXT_HTML</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a984562cb651e984a5b587170dee57a89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83d9765384489e5b98d948f610c4af38" id="r_a83d9765384489e5b98d948f610c4af38"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83d9765384489e5b98d948f610c4af38">TXT_PLAIN</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a83d9765384489e5b98d948f610c4af38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac25f3e996b8633b1ee447360b4f4398" id="r_aac25f3e996b8633b1ee447360b4f4398"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aac25f3e996b8633b1ee447360b4f4398">TXT_ENRICHED</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:aac25f3e996b8633b1ee447360b4f4398"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a72454e2cd50fcfe2124f5a923dcda538" id="r_a72454e2cd50fcfe2124f5a923dcda538"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a>) (struct <a class="el" href="structBody.html">Body</a> *b_email, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="separator:a72454e2cd50fcfe2124f5a923dcda538"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8192c0ff2c40550af9c2ccdca02276e3" id="r_a8192c0ff2c40550af9c2ccdca02276e3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8192c0ff2c40550af9c2ccdca02276e3">print_part_line</a> (struct <a class="el" href="structState.html">State</a> *state, struct <a class="el" href="structBody.html">Body</a> *b_email, int n)</td></tr>
<tr class="memdesc:a8192c0ff2c40550af9c2ccdca02276e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a separator for the Mime part.  <br /></td></tr>
<tr class="separator:a8192c0ff2c40550af9c2ccdca02276e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bb2ea87bd5c2324f5e7aea78609ad2b" id="r_a3bb2ea87bd5c2324f5e7aea78609ad2b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a> (iconv_t cd, char *bufi, size_t *l, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:a3bb2ea87bd5c2324f5e7aea78609ad2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert text and write it to a file.  <br /></td></tr>
<tr class="separator:a3bb2ea87bd5c2324f5e7aea78609ad2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae05b9d67c488b0b7da0c946688ff9b68" id="r_ae05b9d67c488b0b7da0c946688ff9b68"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae05b9d67c488b0b7da0c946688ff9b68">decode_xbit</a> (struct <a class="el" href="structState.html">State</a> *state, long len, bool istext, iconv_t cd)</td></tr>
<tr class="memdesc:ae05b9d67c488b0b7da0c946688ff9b68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode xbit-encoded text.  <br /></td></tr>
<tr class="separator:ae05b9d67c488b0b7da0c946688ff9b68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af95ca3b052e2bba361d247bcf658f58b" id="r_af95ca3b052e2bba361d247bcf658f58b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af95ca3b052e2bba361d247bcf658f58b">qp_decode_triple</a> (char *s, char *d)</td></tr>
<tr class="memdesc:af95ca3b052e2bba361d247bcf658f58b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode a quoted-printable triplet.  <br /></td></tr>
<tr class="separator:af95ca3b052e2bba361d247bcf658f58b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9dfa15d279adb0b36f48b69960b73f0" id="r_ad9dfa15d279adb0b36f48b69960b73f0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad9dfa15d279adb0b36f48b69960b73f0">qp_decode_line</a> (char *dest, char *src, size_t *l, int last)</td></tr>
<tr class="memdesc:ad9dfa15d279adb0b36f48b69960b73f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode a line of quoted-printable text.  <br /></td></tr>
<tr class="separator:ad9dfa15d279adb0b36f48b69960b73f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada2d5290a26fe0a595f7c0560c291a58" id="r_ada2d5290a26fe0a595f7c0560c291a58"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada2d5290a26fe0a595f7c0560c291a58">decode_quoted</a> (struct <a class="el" href="structState.html">State</a> *state, long len, bool istext, iconv_t cd)</td></tr>
<tr class="memdesc:ada2d5290a26fe0a595f7c0560c291a58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode an attachment encoded with quoted-printable.  <br /></td></tr>
<tr class="separator:ada2d5290a26fe0a595f7c0560c291a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad22fd154121f61ea75ac8bd4946eac7d" id="r_ad22fd154121f61ea75ac8bd4946eac7d"><td class="memItemLeft" align="right" valign="top">static unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad22fd154121f61ea75ac8bd4946eac7d">decode_byte</a> (char ch)</td></tr>
<tr class="memdesc:ad22fd154121f61ea75ac8bd4946eac7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode a uuencoded byte.  <br /></td></tr>
<tr class="separator:ad22fd154121f61ea75ac8bd4946eac7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8cdaad76dd45015a29224b1f93ab56" id="r_a2f8cdaad76dd45015a29224b1f93ab56"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2f8cdaad76dd45015a29224b1f93ab56">decode_uuencoded</a> (struct <a class="el" href="structState.html">State</a> *state, long len, bool istext, iconv_t cd)</td></tr>
<tr class="memdesc:a2f8cdaad76dd45015a29224b1f93ab56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode uuencoded text.  <br /></td></tr>
<tr class="separator:a2f8cdaad76dd45015a29224b1f93ab56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5f495f5053bf85394ccb3499315d2fb" id="r_af5f495f5053bf85394ccb3499315d2fb"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5f495f5053bf85394ccb3499315d2fb">is_mmnoask</a> (const char *buf)</td></tr>
<tr class="memdesc:af5f495f5053bf85394ccb3499315d2fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Metamail compatibility: should the attachment be autoviewed?  <br /></td></tr>
<tr class="separator:af5f495f5053bf85394ccb3499315d2fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09f27e2821153040ea4cad0b9ade6153" id="r_a09f27e2821153040ea4cad0b9ade6153"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09f27e2821153040ea4cad0b9ade6153">is_autoview</a> (struct <a class="el" href="structBody.html">Body</a> *b)</td></tr>
<tr class="memdesc:a09f27e2821153040ea4cad0b9ade6153"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should email body be filtered by mailcap.  <br /></td></tr>
<tr class="separator:a09f27e2821153040ea4cad0b9ade6153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d9d9125a5e89f59e0bdc7dfe1da915f" id="r_ga6d9d9125a5e89f59e0bdc7dfe1da915f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handler__api.html#ga6d9d9125a5e89f59e0bdc7dfe1da915f">autoview_handler</a> (struct <a class="el" href="structBody.html">Body</a> *b_email, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:ga6d9d9125a5e89f59e0bdc7dfe1da915f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for autoviewable attachments - Implements <a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> -.  <br /></td></tr>
<tr class="separator:ga6d9d9125a5e89f59e0bdc7dfe1da915f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5552ea70deb1b5c9d5eed357948915d6" id="r_ga5552ea70deb1b5c9d5eed357948915d6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handler__api.html#ga5552ea70deb1b5c9d5eed357948915d6">text_plain_handler</a> (struct <a class="el" href="structBody.html">Body</a> *b_email, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:ga5552ea70deb1b5c9d5eed357948915d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for plain text - Implements <a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> -.  <br /></td></tr>
<tr class="separator:ga5552ea70deb1b5c9d5eed357948915d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb6e3be5f79882648b38690c851c6587" id="r_gabb6e3be5f79882648b38690c851c6587"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handler__api.html#gabb6e3be5f79882648b38690c851c6587">message_handler</a> (struct <a class="el" href="structBody.html">Body</a> *b_email, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:gabb6e3be5f79882648b38690c851c6587"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for message/rfc822 body parts - Implements <a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> -.  <br /></td></tr>
<tr class="separator:gabb6e3be5f79882648b38690c851c6587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a838ae7b50e8ffa147203c5cfaa3272" id="r_ga8a838ae7b50e8ffa147203c5cfaa3272"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handler__api.html#ga8a838ae7b50e8ffa147203c5cfaa3272">external_body_handler</a> (struct <a class="el" href="structBody.html">Body</a> *b_email, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:ga8a838ae7b50e8ffa147203c5cfaa3272"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for external-body emails - Implements <a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> -.  <br /></td></tr>
<tr class="separator:ga8a838ae7b50e8ffa147203c5cfaa3272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4ff5374eaa24ed80f864aa4caeb54a46" id="r_ga4ff5374eaa24ed80f864aa4caeb54a46"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handler__api.html#ga4ff5374eaa24ed80f864aa4caeb54a46">alternative_handler</a> (struct <a class="el" href="structBody.html">Body</a> *b_email, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:ga4ff5374eaa24ed80f864aa4caeb54a46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for multipart alternative emails - Implements <a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> -.  <br /></td></tr>
<tr class="separator:ga4ff5374eaa24ed80f864aa4caeb54a46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad678bde50d3eb6367c65e9ed646939bc" id="r_gad678bde50d3eb6367c65e9ed646939bc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handler__api.html#gad678bde50d3eb6367c65e9ed646939bc">multilingual_handler</a> (struct <a class="el" href="structBody.html">Body</a> *b_email, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:gad678bde50d3eb6367c65e9ed646939bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for multi-lingual emails - Implements <a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> -.  <br /></td></tr>
<tr class="separator:gad678bde50d3eb6367c65e9ed646939bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1b8e821ab05eee2180e82f0ae4c7421" id="r_gac1b8e821ab05eee2180e82f0ae4c7421"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handler__api.html#gac1b8e821ab05eee2180e82f0ae4c7421">multipart_handler</a> (struct <a class="el" href="structBody.html">Body</a> *b_email, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:gac1b8e821ab05eee2180e82f0ae4c7421"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for multipart emails - Implements <a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> -.  <br /></td></tr>
<tr class="separator:gac1b8e821ab05eee2180e82f0ae4c7421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88df4ca81c59bfc2464df374863edfd9" id="r_a88df4ca81c59bfc2464df374863edfd9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a88df4ca81c59bfc2464df374863edfd9">run_decode_and_handler</a> (struct <a class="el" href="structBody.html">Body</a> *b, struct <a class="el" href="structState.html">State</a> *state, <a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> handler, bool plaintext)</td></tr>
<tr class="memdesc:a88df4ca81c59bfc2464df374863edfd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run an appropriate decoder for an email.  <br /></td></tr>
<tr class="separator:a88df4ca81c59bfc2464df374863edfd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaef1af1685b1d85753ac8ab8c1fc9339" id="r_gaaef1af1685b1d85753ac8ab8c1fc9339"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handler__api.html#gaaef1af1685b1d85753ac8ab8c1fc9339">valid_pgp_encrypted_handler</a> (struct <a class="el" href="structBody.html">Body</a> *b_email, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:gaaef1af1685b1d85753ac8ab8c1fc9339"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for valid pgp-encrypted emails - Implements <a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> -.  <br /></td></tr>
<tr class="separator:gaaef1af1685b1d85753ac8ab8c1fc9339"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaadf7c637f58f34e7a58ac5b2c2b0f42f" id="r_gaadf7c637f58f34e7a58ac5b2c2b0f42f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handler__api.html#gaadf7c637f58f34e7a58ac5b2c2b0f42f">malformed_pgp_encrypted_handler</a> (struct <a class="el" href="structBody.html">Body</a> *b_email, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:gaadf7c637f58f34e7a58ac5b2c2b0f42f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for invalid pgp-encrypted emails - Implements <a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> -.  <br /></td></tr>
<tr class="separator:gaadf7c637f58f34e7a58ac5b2c2b0f42f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7834668eb7e41062c0d6aa80589de5be" id="r_a7834668eb7e41062c0d6aa80589de5be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7834668eb7e41062c0d6aa80589de5be">mutt_decode_base64</a> (struct <a class="el" href="structState.html">State</a> *state, size_t len, bool istext, iconv_t cd)</td></tr>
<tr class="memdesc:a7834668eb7e41062c0d6aa80589de5be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode base64-encoded text.  <br /></td></tr>
<tr class="separator:a7834668eb7e41062c0d6aa80589de5be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e520d3004995a6c0cf0696edfd209fb" id="r_a3e520d3004995a6c0cf0696edfd209fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e520d3004995a6c0cf0696edfd209fb">mutt_body_handler</a> (struct <a class="el" href="structBody.html">Body</a> *b, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:a3e520d3004995a6c0cf0696edfd209fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for the <a class="el" href="structBody.html" title="The body of an email.">Body</a> of an email.  <br /></td></tr>
<tr class="separator:a3e520d3004995a6c0cf0696edfd209fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f1d59623c3dea670f7f5b4c17bf24a8" id="r_a0f1d59623c3dea670f7f5b4c17bf24a8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0f1d59623c3dea670f7f5b4c17bf24a8">mutt_prefer_as_attachment</a> (struct <a class="el" href="structBody.html">Body</a> *b)</td></tr>
<tr class="memdesc:a0f1d59623c3dea670f7f5b4c17bf24a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do we want this part as an attachment?  <br /></td></tr>
<tr class="separator:a0f1d59623c3dea670f7f5b4c17bf24a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cc6312b687436c5023e476461662e8e" id="r_a3cc6312b687436c5023e476461662e8e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3cc6312b687436c5023e476461662e8e">mutt_can_decode</a> (struct <a class="el" href="structBody.html">Body</a> *b)</td></tr>
<tr class="memdesc:a3cc6312b687436c5023e476461662e8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will decoding the attachment produce any output.  <br /></td></tr>
<tr class="separator:a3cc6312b687436c5023e476461662e8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6e9c66285fee73e4d9553c565e10fa2" id="r_ad6e9c66285fee73e4d9553c565e10fa2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6e9c66285fee73e4d9553c565e10fa2">mutt_decode_attachment</a> (const struct <a class="el" href="structBody.html">Body</a> *b, struct <a class="el" href="structState.html">State</a> *state)</td></tr>
<tr class="memdesc:ad6e9c66285fee73e4d9553c565e10fa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode an email's attachment.  <br /></td></tr>
<tr class="separator:ad6e9c66285fee73e4d9553c565e10fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Decide how to display email content. </p>
<dl class="section author"><dt>Authors</dt><dd><ul>
<li>Michael R. Elkins</li>
<li>Pietro Cerutti</li>
<li>Richard Russon</li>
<li>Federico Kircheis</li>
<li>Reis Radomil</li>
<li>Ian Zimmerman</li>
<li>David Purton</li>
<li>Dennis Sch√∂n</li>
<li>Thomas Klausner</li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</dd></dl>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p class="definition">Definition in file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a238627be6fe9590ff73fcc08ae6a10b3" name="a238627be6fe9590ff73fcc08ae6a10b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a238627be6fe9590ff73fcc08ae6a10b3">&#9670;&#160;</a></span>BUFI_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUFI_SIZE&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00072">72</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>

</div>
</div>
<a id="aad826a02aca1883b9747a603a5c0b54d" name="aad826a02aca1883b9747a603a5c0b54d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad826a02aca1883b9747a603a5c0b54d">&#9670;&#160;</a></span>BUFO_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUFO_SIZE&#160;&#160;&#160;2000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00073">73</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>

</div>
</div>
<a id="a984562cb651e984a5b587170dee57a89" name="a984562cb651e984a5b587170dee57a89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a984562cb651e984a5b587170dee57a89">&#9670;&#160;</a></span>TXT_HTML</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TXT_HTML&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00075">75</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>

</div>
</div>
<a id="a83d9765384489e5b98d948f610c4af38" name="a83d9765384489e5b98d948f610c4af38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83d9765384489e5b98d948f610c4af38">&#9670;&#160;</a></span>TXT_PLAIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TXT_PLAIN&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00076">76</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>

</div>
</div>
<a id="aac25f3e996b8633b1ee447360b4f4398" name="aac25f3e996b8633b1ee447360b4f4398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac25f3e996b8633b1ee447360b4f4398">&#9670;&#160;</a></span>TXT_ENRICHED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TXT_ENRICHED&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00077">77</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a72454e2cd50fcfe2124f5a923dcda538" name="a72454e2cd50fcfe2124f5a923dcda538"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72454e2cd50fcfe2124f5a923dcda538">&#9670;&#160;</a></span>handler_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* handler_t) (struct <a class="el" href="structBody.html">Body</a> *b_email, struct <a class="el" href="structState.html">State</a> *state)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00089">89</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8192c0ff2c40550af9c2ccdca02276e3" name="a8192c0ff2c40550af9c2ccdca02276e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8192c0ff2c40550af9c2ccdca02276e3">&#9670;&#160;</a></span>print_part_line()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void print_part_line </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structState.html">State</a> *</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b_email</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>n</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print a separator for the Mime part. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td><a class="el" href="structState.html" title="Keep track when processing files.">State</a> of text being processed </td></tr>
    <tr><td class="paramname">b_email</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> of the email </td></tr>
    <tr><td class="paramname">n</td><td>Part number for multipart emails (0 otherwise) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00097">97</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   98</span>{</div>
<div class="line"><span class="lineno">   99</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *length = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  100</span>  <a class="code hl_function" href="muttlib_8c.html#a68a20bb1a92b933179acfe8157e423b1">mutt_str_pretty_size</a>(length, b_email-&gt;<a class="code hl_variable" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a>);</div>
<div class="line"><span class="lineno">  101</span>  <a class="code hl_function" href="mutt_2state_8c.html#a549e8896ba39ea5006be8905349a6782">state_mark_attach</a>(state);</div>
<div class="line"><span class="lineno">  102</span>  <span class="keywordtype">char</span> *charset = <a class="code hl_function" href="parameter_8c.html#a31d10561ad6b3637e7591569b903aa33">mutt_param_get</a>(&amp;b_email-&gt;<a class="code hl_variable" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>, <span class="stringliteral">&quot;charset&quot;</span>);</div>
<div class="line"><span class="lineno">  103</span>  <span class="keywordflow">if</span> (n == 0)</div>
<div class="line"><span class="lineno">  104</span>  {</div>
<div class="line"><span class="lineno">  105</span>    <a class="code hl_function" href="mutt_2state_8c.html#a7566d1f9e015cd673fd8744bf5ad2f06">state_printf</a>(state, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;[-- Type: %s/%s%s%s, Encoding: %s, Size: %s --]\n&quot;</span>),</div>
<div class="line"><span class="lineno">  106</span>                 <a class="code hl_define" href="mime_8h.html#a3e568918dd102d7bfd39661c82ff6c3f">BODY_TYPE</a>(b_email), b_email-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, charset ? <span class="stringliteral">&quot;; charset=&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><span class="lineno">  107</span>                 charset ? charset : <span class="stringliteral">&quot;&quot;</span>, <a class="code hl_define" href="mime_8h.html#a94255dc776bc865448f83758d3176aa6">ENCODING</a>(b_email-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a>), <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(length));</div>
<div class="line"><span class="lineno">  108</span>  }</div>
<div class="line"><span class="lineno">  109</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  110</span>  {</div>
<div class="line"><span class="lineno">  111</span>    <a class="code hl_function" href="mutt_2state_8c.html#a7566d1f9e015cd673fd8744bf5ad2f06">state_printf</a>(state, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;[-- Alternative Type #%d: %s/%s%s%s, Encoding: %s, Size: %s --]\n&quot;</span>),</div>
<div class="line"><span class="lineno">  112</span>                 n, <a class="code hl_define" href="mime_8h.html#a3e568918dd102d7bfd39661c82ff6c3f">BODY_TYPE</a>(b_email), b_email-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>,</div>
<div class="line"><span class="lineno">  113</span>                 charset ? <span class="stringliteral">&quot;; charset=&quot;</span> : <span class="stringliteral">&quot;&quot;</span>, charset ? charset : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><span class="lineno">  114</span>                 <a class="code hl_define" href="mime_8h.html#a94255dc776bc865448f83758d3176aa6">ENCODING</a>(b_email-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a>), <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(length));</div>
<div class="line"><span class="lineno">  115</span>  }</div>
<div class="line"><span class="lineno">  116</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;length);</div>
<div class="line"><span class="lineno">  117</span>}</div>
<div class="ttc" id="abuffer_8h_html_a728ebc5a947b77c8d56db44ce553a7ab"><div class="ttname"><a href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a></div><div class="ttdeci">static const char * buf_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00096">buffer.h:96</a></div></div>
<div class="ttc" id="amime_8h_html_a3e568918dd102d7bfd39661c82ff6c3f"><div class="ttname"><a href="mime_8h.html#a3e568918dd102d7bfd39661c82ff6c3f">BODY_TYPE</a></div><div class="ttdeci">#define BODY_TYPE(body)</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00089">mime.h:89</a></div></div>
<div class="ttc" id="amime_8h_html_a94255dc776bc865448f83758d3176aa6"><div class="ttname"><a href="mime_8h.html#a94255dc776bc865448f83758d3176aa6">ENCODING</a></div><div class="ttdeci">#define ENCODING(x)</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00092">mime.h:92</a></div></div>
<div class="ttc" id="amutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="amutt_2state_8c_html_a549e8896ba39ea5006be8905349a6782"><div class="ttname"><a href="mutt_2state_8c.html#a549e8896ba39ea5006be8905349a6782">state_mark_attach</a></div><div class="ttdeci">void state_mark_attach(struct State *state)</div><div class="ttdoc">Write a unique marker around content.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8c_source.html#l00073">state.c:73</a></div></div>
<div class="ttc" id="amutt_2state_8c_html_a7566d1f9e015cd673fd8744bf5ad2f06"><div class="ttname"><a href="mutt_2state_8c.html#a7566d1f9e015cd673fd8744bf5ad2f06">state_printf</a></div><div class="ttdeci">int state_printf(struct State *state, const char *fmt,...)</div><div class="ttdoc">Write a formatted string to the State.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8c_source.html#l00187">state.c:187</a></div></div>
<div class="ttc" id="amuttlib_8c_html_a68a20bb1a92b933179acfe8157e423b1"><div class="ttname"><a href="muttlib_8c.html#a68a20bb1a92b933179acfe8157e423b1">mutt_str_pretty_size</a></div><div class="ttdeci">int mutt_str_pretty_size(struct Buffer *buf, size_t num)</div><div class="ttdoc">Display an abbreviated size, like 3.4K.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00989">muttlib.c:989</a></div></div>
<div class="ttc" id="aparameter_8c_html_a31d10561ad6b3637e7591569b903aa33"><div class="ttname"><a href="parameter_8c.html#a31d10561ad6b3637e7591569b903aa33">mutt_param_get</a></div><div class="ttdeci">char * mutt_param_get(const struct ParameterList *pl, const char *s)</div><div class="ttdoc">Find a matching Parameter.</div><div class="ttdef"><b>Definition</b> <a href="parameter_8c_source.html#l00085">parameter.c:85</a></div></div>
<div class="ttc" id="apool_8c_html_a41cba27c25d33cb6822789a2856093f2"><div class="ttname"><a href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a></div><div class="ttdeci">struct Buffer * buf_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00082">pool.c:82</a></div></div>
<div class="ttc" id="apool_8c_html_a4cc6068279461cb8628219586dfa35a1"><div class="ttname"><a href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a></div><div class="ttdeci">void buf_pool_release(struct Buffer **ptr)</div><div class="ttdoc">Return a Buffer to the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00096">pool.c:96</a></div></div>
<div class="ttc" id="astructBody_html_a6f92d7ec8568ca04ae07931c56dd0790"><div class="ttname"><a href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">Body::length</a></div><div class="ttdeci">LOFF_T length</div><div class="ttdoc">length (in bytes) of attachment</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00053">body.h:53</a></div></div>
<div class="ttc" id="astructBody_html_a782cee95e0064e3895b88248bdfc781a"><div class="ttname"><a href="structBody.html#a782cee95e0064e3895b88248bdfc781a">Body::parameter</a></div><div class="ttdeci">struct ParameterList parameter</div><div class="ttdoc">Parameters of the content-type.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00063">body.h:63</a></div></div>
<div class="ttc" id="astructBody_html_ace00f9cba9b46a2d434764335d2fa43a"><div class="ttname"><a href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">Body::subtype</a></div><div class="ttdeci">char * subtype</div><div class="ttdoc">content-type subtype</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00061">body.h:61</a></div></div>
<div class="ttc" id="astructBody_html_ad2f05b8ff24813de41988e63de5d6a31"><div class="ttname"><a href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">Body::encoding</a></div><div class="ttdeci">unsigned int encoding</div><div class="ttdoc">content-transfer-encoding, ContentEncoding</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00041">body.h:41</a></div></div>
<div class="ttc" id="astructBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00035">buffer.h:36</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a8192c0ff2c40550af9c2ccdca02276e3_cgraph.svg" width="318" height="384"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a8192c0ff2c40550af9c2ccdca02276e3_icgraph.svg" width="312" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3bb2ea87bd5c2324f5e7aea78609ad2b" name="a3bb2ea87bd5c2324f5e7aea78609ad2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">&#9670;&#160;</a></span>convert_to_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void convert_to_state </td>
          <td>(</td>
          <td class="paramtype">iconv_t</td>          <td class="paramname"><span class="paramname"><em>cd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>bufi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>l</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structState.html">State</a> *</td>          <td class="paramname"><span class="paramname"><em>state</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert text and write it to a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>Iconv conversion descriptor </td></tr>
    <tr><td class="paramname">bufi</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer.">Buffer</a> with text to convert </td></tr>
    <tr><td class="paramname">l</td><td>Length of buffer </td></tr>
    <tr><td class="paramname">state</td><td><a class="el" href="structState.html" title="Keep track when processing files.">State</a> to write to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00126">126</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  127</span>{</div>
<div class="line"><span class="lineno">  128</span>  <span class="keywordtype">char</span> bufo[<a class="code hl_define" href="#aad826a02aca1883b9747a603a5c0b54d">BUFO_SIZE</a>] = { 0 };</div>
<div class="line"><span class="lineno">  129</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *ib = NULL;</div>
<div class="line"><span class="lineno">  130</span>  <span class="keywordtype">char</span> *ob = NULL;</div>
<div class="line"><span class="lineno">  131</span>  <span class="keywordtype">size_t</span> ibl, obl;</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>  <span class="keywordflow">if</span> (!bufi)</div>
<div class="line"><span class="lineno">  134</span>  {</div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2charset_8h.html#af99f0dca1b479b94f1287bc8aa050e4c">iconv_t_valid</a>(cd))</div>
<div class="line"><span class="lineno">  136</span>    {</div>
<div class="line"><span class="lineno">  137</span>      ob = bufo;</div>
<div class="line"><span class="lineno">  138</span>      obl = <span class="keyword">sizeof</span>(bufo);</div>
<div class="line"><span class="lineno">  139</span>      iconv(cd, NULL, NULL, &amp;ob, &amp;obl);</div>
<div class="line"><span class="lineno">  140</span>      <span class="keywordflow">if</span> (ob != bufo)</div>
<div class="line"><span class="lineno">  141</span>        <a class="code hl_function" href="mutt_2state_8c.html#a9f417a65ac6aedd6a23894561c6821c9">state_prefix_put</a>(state, bufo, ob - bufo);</div>
<div class="line"><span class="lineno">  142</span>    }</div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  144</span>  }</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt_2charset_8h.html#af99f0dca1b479b94f1287bc8aa050e4c">iconv_t_valid</a>(cd))</div>
<div class="line"><span class="lineno">  147</span>  {</div>
<div class="line"><span class="lineno">  148</span>    <a class="code hl_function" href="mutt_2state_8c.html#a9f417a65ac6aedd6a23894561c6821c9">state_prefix_put</a>(state, bufi, *l);</div>
<div class="line"><span class="lineno">  149</span>    *l = 0;</div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  151</span>  }</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>  ib = bufi;</div>
<div class="line"><span class="lineno">  154</span>  ibl = *l;</div>
<div class="line"><span class="lineno">  155</span>  <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  156</span>  {</div>
<div class="line"><span class="lineno">  157</span>    ob = bufo;</div>
<div class="line"><span class="lineno">  158</span>    obl = <span class="keyword">sizeof</span>(bufo);</div>
<div class="line"><span class="lineno">  159</span>    <a class="code hl_function" href="mutt_2charset_8c.html#a161c342ed0b417b1f931b15463fe091b">mutt_ch_iconv</a>(cd, &amp;ib, &amp;ibl, &amp;ob, &amp;obl, 0, <span class="stringliteral">&quot;?&quot;</span>, NULL);</div>
<div class="line"><span class="lineno">  160</span>    <span class="keywordflow">if</span> (ob == bufo)</div>
<div class="line"><span class="lineno">  161</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  162</span>    <a class="code hl_function" href="mutt_2state_8c.html#a9f417a65ac6aedd6a23894561c6821c9">state_prefix_put</a>(state, bufo, ob - bufo);</div>
<div class="line"><span class="lineno">  163</span>  }</div>
<div class="line"><span class="lineno">  164</span>  memmove(bufi, ib, ibl);</div>
<div class="line"><span class="lineno">  165</span>  *l = ibl;</div>
<div class="line"><span class="lineno">  166</span>}</div>
<div class="ttc" id="ahandler_8c_html_aad826a02aca1883b9747a603a5c0b54d"><div class="ttname"><a href="#aad826a02aca1883b9747a603a5c0b54d">BUFO_SIZE</a></div><div class="ttdeci">#define BUFO_SIZE</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00073">handler.c:73</a></div></div>
<div class="ttc" id="amutt_2charset_8c_html_a161c342ed0b417b1f931b15463fe091b"><div class="ttname"><a href="mutt_2charset_8c.html#a161c342ed0b417b1f931b15463fe091b">mutt_ch_iconv</a></div><div class="ttdeci">size_t mutt_ch_iconv(iconv_t cd, const char **inbuf, size_t *inbytesleft, char **outbuf, size_t *outbytesleft, const char **inrepls, const char *outrepl, int *iconverrno)</div><div class="ttdoc">Change the encoding of a string.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2charset_8c_source.html#l00683">charset.c:683</a></div></div>
<div class="ttc" id="amutt_2charset_8h_html_af99f0dca1b479b94f1287bc8aa050e4c"><div class="ttname"><a href="mutt_2charset_8h.html#af99f0dca1b479b94f1287bc8aa050e4c">iconv_t_valid</a></div><div class="ttdeci">static bool iconv_t_valid(const iconv_t cd)</div><div class="ttdoc">Is the conversion descriptor valid?</div><div class="ttdef"><b>Definition</b> <a href="mutt_2charset_8h_source.html#l00123">charset.h:123</a></div></div>
<div class="ttc" id="amutt_2state_8c_html_a9f417a65ac6aedd6a23894561c6821c9"><div class="ttname"><a href="mutt_2state_8c.html#a9f417a65ac6aedd6a23894561c6821c9">state_prefix_put</a></div><div class="ttdeci">void state_prefix_put(struct State *state, const char *buf, size_t buflen)</div><div class="ttdoc">Write a prefixed fixed-string to the State.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8c_source.html#l00205">state.c:205</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a3bb2ea87bd5c2324f5e7aea78609ad2b_cgraph.svg" width="306" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a3bb2ea87bd5c2324f5e7aea78609ad2b_icgraph.svg" width="339" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae05b9d67c488b0b7da0c946688ff9b68" name="ae05b9d67c488b0b7da0c946688ff9b68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae05b9d67c488b0b7da0c946688ff9b68">&#9670;&#160;</a></span>decode_xbit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void decode_xbit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structState.html">State</a> *</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>istext</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">iconv_t</td>          <td class="paramname"><span class="paramname"><em>cd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decode xbit-encoded text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td><a class="el" href="structState.html" title="Keep track when processing files.">State</a> to work with </td></tr>
    <tr><td class="paramname">len</td><td>Length of text to decode </td></tr>
    <tr><td class="paramname">istext</td><td>Mime part is plain text </td></tr>
    <tr><td class="paramname">cd</td><td>Iconv conversion descriptor </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00175">175</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  176</span>{</div>
<div class="line"><span class="lineno">  177</span>  <span class="keywordflow">if</span> (!istext)</div>
<div class="line"><span class="lineno">  178</span>  {</div>
<div class="line"><span class="lineno">  179</span>    <a class="code hl_function" href="file_8c.html#a2bafa45ca3c8ce7d96303377d860e2db">mutt_file_copy_bytes</a>(state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>, state-&gt;<a class="code hl_variable" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>, len);</div>
<div class="line"><span class="lineno">  180</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  181</span>  }</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>  <a class="code hl_define" href="mutt_2state_8h.html#a0f20589a346d8b214575ba401aa29015">state_set_prefix</a>(state);</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>  <span class="keywordtype">int</span> c;</div>
<div class="line"><span class="lineno">  186</span>  <span class="keywordtype">char</span> bufi[<a class="code hl_define" href="#a238627be6fe9590ff73fcc08ae6a10b3">BUFI_SIZE</a>] = { 0 };</div>
<div class="line"><span class="lineno">  187</span>  <span class="keywordtype">size_t</span> l = 0;</div>
<div class="line"><span class="lineno">  188</span>  <span class="keywordflow">while</span> (((c = fgetc(state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>)) != EOF) &amp;&amp; len--)</div>
<div class="line"><span class="lineno">  189</span>  {</div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordflow">if</span> ((c == <span class="charliteral">&#39;\r&#39;</span>) &amp;&amp; len)</div>
<div class="line"><span class="lineno">  191</span>    {</div>
<div class="line"><span class="lineno">  192</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> ch = fgetc(state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>);</div>
<div class="line"><span class="lineno">  193</span>      <span class="keywordflow">if</span> (ch == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><span class="lineno">  194</span>      {</div>
<div class="line"><span class="lineno">  195</span>        c = ch;</div>
<div class="line"><span class="lineno">  196</span>        len--;</div>
<div class="line"><span class="lineno">  197</span>      }</div>
<div class="line"><span class="lineno">  198</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  199</span>      {</div>
<div class="line"><span class="lineno">  200</span>        ungetc(ch, state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>);</div>
<div class="line"><span class="lineno">  201</span>      }</div>
<div class="line"><span class="lineno">  202</span>    }</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>    bufi[l++] = c;</div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordflow">if</span> (l == <span class="keyword">sizeof</span>(bufi))</div>
<div class="line"><span class="lineno">  206</span>      <a class="code hl_function" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a>(cd, bufi, &amp;l, state);</div>
<div class="line"><span class="lineno">  207</span>  }</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>  <a class="code hl_function" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a>(cd, bufi, &amp;l, state);</div>
<div class="line"><span class="lineno">  210</span>  <a class="code hl_function" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a>(cd, 0, 0, state);</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>  <a class="code hl_define" href="mutt_2state_8h.html#a4437cf67431f33cd4497b5a8c276decd">state_reset_prefix</a>(state);</div>
<div class="line"><span class="lineno">  213</span>}</div>
<div class="ttc" id="afile_8c_html_a2bafa45ca3c8ce7d96303377d860e2db"><div class="ttname"><a href="file_8c.html#a2bafa45ca3c8ce7d96303377d860e2db">mutt_file_copy_bytes</a></div><div class="ttdeci">int mutt_file_copy_bytes(FILE *fp_in, FILE *fp_out, size_t size)</div><div class="ttdoc">Copy some content from one file to another.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l00196">file.c:196</a></div></div>
<div class="ttc" id="ahandler_8c_html_a238627be6fe9590ff73fcc08ae6a10b3"><div class="ttname"><a href="#a238627be6fe9590ff73fcc08ae6a10b3">BUFI_SIZE</a></div><div class="ttdeci">#define BUFI_SIZE</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00072">handler.c:72</a></div></div>
<div class="ttc" id="ahandler_8c_html_a3bb2ea87bd5c2324f5e7aea78609ad2b"><div class="ttname"><a href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a></div><div class="ttdeci">static void convert_to_state(iconv_t cd, char *bufi, size_t *l, struct State *state)</div><div class="ttdoc">Convert text and write it to a file.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00126">handler.c:126</a></div></div>
<div class="ttc" id="amutt_2state_8h_html_a0f20589a346d8b214575ba401aa29015"><div class="ttname"><a href="mutt_2state_8h.html#a0f20589a346d8b214575ba401aa29015">state_set_prefix</a></div><div class="ttdeci">#define state_set_prefix(state)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00056">state.h:56</a></div></div>
<div class="ttc" id="amutt_2state_8h_html_a4437cf67431f33cd4497b5a8c276decd"><div class="ttname"><a href="mutt_2state_8h.html#a4437cf67431f33cd4497b5a8c276decd">state_reset_prefix</a></div><div class="ttdeci">#define state_reset_prefix(state)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00057">state.h:57</a></div></div>
<div class="ttc" id="astructState_html_a88fc722d3012ebf69d3a061cbf6bc296"><div class="ttname"><a href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">State::fp_out</a></div><div class="ttdeci">FILE * fp_out</div><div class="ttdoc">File to write to.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00050">state.h:50</a></div></div>
<div class="ttc" id="astructState_html_a9cf7e1f0c5c12399def5ca38b13054ae"><div class="ttname"><a href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">State::fp_in</a></div><div class="ttdeci">FILE * fp_in</div><div class="ttdoc">File to read from.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00049">state.h:49</a></div></div>
</div><!-- fragment --><div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_ae05b9d67c488b0b7da0c946688ff9b68_cgraph.svg" width="307" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_ae05b9d67c488b0b7da0c946688ff9b68_icgraph.svg" width="336" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af95ca3b052e2bba361d247bcf658f58b" name="af95ca3b052e2bba361d247bcf658f58b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af95ca3b052e2bba361d247bcf658f58b">&#9670;&#160;</a></span>qp_decode_triple()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int qp_decode_triple </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>s</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>d</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decode a quoted-printable triplet. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td><a class="el" href="structState.html" title="Keep track when processing files.">State</a> to work with </td></tr>
    <tr><td class="paramname">d</td><td>Decoded character </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00222">222</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  223</span>{</div>
<div class="line"><span class="lineno">  224</span>  <span class="comment">/* soft line break */</span></div>
<div class="line"><span class="lineno">  225</span>  <span class="keywordflow">if</span> ((s[0] == <span class="charliteral">&#39;=&#39;</span>) &amp;&amp; (s[1] == <span class="charliteral">&#39;\0&#39;</span>))</div>
<div class="line"><span class="lineno">  226</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>  <span class="comment">/* quoted-printable triple */</span></div>
<div class="line"><span class="lineno">  229</span>  <span class="keywordflow">if</span> ((s[0] == <span class="charliteral">&#39;=&#39;</span>) &amp;&amp; <a class="code hl_function" href="ctype_8c.html#a97d3f378a406a46a3e8707cada7bbbb3">mutt_isxdigit</a>(s[1]) &amp;&amp; <a class="code hl_function" href="ctype_8c.html#a97d3f378a406a46a3e8707cada7bbbb3">mutt_isxdigit</a>(s[2]))</div>
<div class="line"><span class="lineno">  230</span>  {</div>
<div class="line"><span class="lineno">  231</span>    *d = (<a class="code hl_define" href="mime_8h.html#ac212ee80d510d8f8af8fde1675b910a3">hexval</a>(s[1]) &lt;&lt; 4) | <a class="code hl_define" href="mime_8h.html#ac212ee80d510d8f8af8fde1675b910a3">hexval</a>(s[2]);</div>
<div class="line"><span class="lineno">  232</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  233</span>  }</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>  <span class="comment">/* something else */</span></div>
<div class="line"><span class="lineno">  236</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  237</span>}</div>
<div class="ttc" id="actype_8c_html_a97d3f378a406a46a3e8707cada7bbbb3"><div class="ttname"><a href="ctype_8c.html#a97d3f378a406a46a3e8707cada7bbbb3">mutt_isxdigit</a></div><div class="ttdeci">bool mutt_isxdigit(int arg)</div><div class="ttdoc">Wrapper for isxdigit(3)</div><div class="ttdef"><b>Definition</b> <a href="ctype_8c_source.html#l00111">ctype.c:111</a></div></div>
<div class="ttc" id="amime_8h_html_ac212ee80d510d8f8af8fde1675b910a3"><div class="ttname"><a href="mime_8h.html#ac212ee80d510d8f8af8fde1675b910a3">hexval</a></div><div class="ttdeci">#define hexval(ch)</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00080">mime.h:80</a></div></div>
</div><!-- fragment --><div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_af95ca3b052e2bba361d247bcf658f58b_cgraph.svg" width="288" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_af95ca3b052e2bba361d247bcf658f58b_icgraph.svg" width="304" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad9dfa15d279adb0b36f48b69960b73f0" name="ad9dfa15d279adb0b36f48b69960b73f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9dfa15d279adb0b36f48b69960b73f0">&#9670;&#160;</a></span>qp_decode_line()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void qp_decode_line </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>dest</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>src</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>l</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>last</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decode a line of quoted-printable text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer.">Buffer</a> for result </td></tr>
    <tr><td class="paramname">src</td><td>Text to decode </td></tr>
    <tr><td class="paramname">l</td><td>Bytes written to buffer </td></tr>
    <tr><td class="paramname">last</td><td>Last character of the line </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00246">246</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  247</span>{</div>
<div class="line"><span class="lineno">  248</span>  <span class="keywordtype">char</span> *d = NULL, *s = NULL;</div>
<div class="line"><span class="lineno">  249</span>  <span class="keywordtype">char</span> c = 0;</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>  <span class="keywordtype">int</span> kind = -1;</div>
<div class="line"><span class="lineno">  252</span>  <span class="keywordtype">bool</span> soft = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>  <span class="comment">/* decode the line */</span></div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>  <span class="keywordflow">for</span> (d = dest, s = src; *s;)</div>
<div class="line"><span class="lineno">  257</span>  {</div>
<div class="line"><span class="lineno">  258</span>    <span class="keywordflow">switch</span> ((kind = <a class="code hl_function" href="#af95ca3b052e2bba361d247bcf658f58b">qp_decode_triple</a>(s, &amp;c)))</div>
<div class="line"><span class="lineno">  259</span>    {</div>
<div class="line"><span class="lineno">  260</span>      <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">  261</span>        *d++ = c;</div>
<div class="line"><span class="lineno">  262</span>        s += 3;</div>
<div class="line"><span class="lineno">  263</span>        <span class="keywordflow">break</span>; <span class="comment">/* qp triple */</span></div>
<div class="line"><span class="lineno">  264</span>      <span class="keywordflow">case</span> -1:</div>
<div class="line"><span class="lineno">  265</span>        *d++ = *s++;</div>
<div class="line"><span class="lineno">  266</span>        <span class="keywordflow">break</span>; <span class="comment">/* single character */</span></div>
<div class="line"><span class="lineno">  267</span>      <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">  268</span>        soft = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  269</span>        s++;</div>
<div class="line"><span class="lineno">  270</span>        <span class="keywordflow">break</span>; <span class="comment">/* soft line break */</span></div>
<div class="line"><span class="lineno">  271</span>    }</div>
<div class="line"><span class="lineno">  272</span>  }</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>  <span class="keywordflow">if</span> (!soft &amp;&amp; (last == <span class="charliteral">&#39;\n&#39;</span>))</div>
<div class="line"><span class="lineno">  275</span>  {</div>
<div class="line"><span class="lineno">  276</span>    <span class="comment">/* neither \r nor \n as part of line-terminating CRLF</span></div>
<div class="line"><span class="lineno">  277</span><span class="comment">     * may be qp-encoded, so remove \r and \n-terminate;</span></div>
<div class="line"><span class="lineno">  278</span><span class="comment">     * see RFC2045, sect. 6.7, (1): General 8bit representation */</span></div>
<div class="line"><span class="lineno">  279</span>    <span class="keywordflow">if</span> ((kind == 0) &amp;&amp; (c == <span class="charliteral">&#39;\r&#39;</span>))</div>
<div class="line"><span class="lineno">  280</span>      *(d - 1) = <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><span class="lineno">  281</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  282</span>      *d++ = <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><span class="lineno">  283</span>  }</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>  *d = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  286</span>  *l = d - dest;</div>
<div class="line"><span class="lineno">  287</span>}</div>
<div class="ttc" id="ahandler_8c_html_af95ca3b052e2bba361d247bcf658f58b"><div class="ttname"><a href="#af95ca3b052e2bba361d247bcf658f58b">qp_decode_triple</a></div><div class="ttdeci">static int qp_decode_triple(char *s, char *d)</div><div class="ttdoc">Decode a quoted-printable triplet.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00222">handler.c:222</a></div></div>
</div><!-- fragment --><div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_ad9dfa15d279adb0b36f48b69960b73f0_cgraph.svg" width="304" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_ad9dfa15d279adb0b36f48b69960b73f0_icgraph.svg" width="295" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ada2d5290a26fe0a595f7c0560c291a58" name="ada2d5290a26fe0a595f7c0560c291a58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada2d5290a26fe0a595f7c0560c291a58">&#9670;&#160;</a></span>decode_quoted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void decode_quoted </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structState.html">State</a> *</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>istext</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">iconv_t</td>          <td class="paramname"><span class="paramname"><em>cd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decode an attachment encoded with quoted-printable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td><a class="el" href="structState.html" title="Keep track when processing files.">State</a> to work with </td></tr>
    <tr><td class="paramname">len</td><td>Length of text to decode </td></tr>
    <tr><td class="paramname">istext</td><td>Mime part is plain text </td></tr>
    <tr><td class="paramname">cd</td><td>Iconv conversion descriptor</td></tr>
  </table>
  </dd>
</dl>
<p>Why doesn't this overflow any buffers? First, it's guaranteed that the length of a line grows when you <em>en</em>-code it to quoted-printable. That means that we always can store the result in a buffer of at most the <em>same</em> size.</p>
<p>Now, we don't special-case if the line we read with fgets() isn't terminated. We don't care about this, since 256 &gt; 78, so corrupted input will just be corrupted a bit more. That implies that 256+1 bytes are always sufficient to store the result of qp_decode_line.</p>
<p>Finally, at soft line breaks, some part of a multibyte character may have been left over by <a class="el" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b" title="Convert text and write it to a file.">convert_to_state()</a>. This shouldn't be more than 6 characters, so 256+7 should be sufficient memory to store the decoded data.</p>
<p>Just to make sure that I didn't make some off-by-one error above, we just use 512 for the target buffer's size. </p>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00314">314</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  315</span>{</div>
<div class="line"><span class="lineno">  316</span>  <span class="keywordtype">char</span> line[256] = { 0 };</div>
<div class="line"><span class="lineno">  317</span>  <span class="keywordtype">char</span> decline[512] = { 0 };</div>
<div class="line"><span class="lineno">  318</span>  <span class="keywordtype">size_t</span> l = 0;</div>
<div class="line"><span class="lineno">  319</span>  <span class="keywordtype">size_t</span> l3;</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>  <span class="keywordflow">if</span> (istext)</div>
<div class="line"><span class="lineno">  322</span>    <a class="code hl_define" href="mutt_2state_8h.html#a0f20589a346d8b214575ba401aa29015">state_set_prefix</a>(state);</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>  <span class="keywordflow">while</span> (len &gt; 0)</div>
<div class="line"><span class="lineno">  325</span>  {</div>
<div class="line"><span class="lineno">  326</span>    <span class="comment">/* It&#39;s ok to use a fixed size buffer for input, even if the line turns</span></div>
<div class="line"><span class="lineno">  327</span><span class="comment">     * out to be longer than this.  Just process the line in chunks.  This</span></div>
<div class="line"><span class="lineno">  328</span><span class="comment">     * really shouldn&#39;t happen according the MIME spec, since Q-P encoded</span></div>
<div class="line"><span class="lineno">  329</span><span class="comment">     * lines are at most 76 characters, but we should be liberal about what</span></div>
<div class="line"><span class="lineno">  330</span><span class="comment">     * we accept.  */</span></div>
<div class="line"><span class="lineno">  331</span>    <span class="keywordflow">if</span> (!fgets(line, <a class="code hl_define" href="memory_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>((ssize_t) <span class="keyword">sizeof</span>(line), len + 1), state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>))</div>
<div class="line"><span class="lineno">  332</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>    <span class="keywordtype">size_t</span> linelen = strlen(line);</div>
<div class="line"><span class="lineno">  335</span>    len -= linelen;</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>    <span class="comment">/* inspect the last character we read so we can tell if we got the</span></div>
<div class="line"><span class="lineno">  338</span><span class="comment">     * entire line.  */</span></div>
<div class="line"><span class="lineno">  339</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> last = (linelen != 0) ? line[linelen - 1] : 0;</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>    <span class="comment">/* chop trailing whitespace if we got the full line */</span></div>
<div class="line"><span class="lineno">  342</span>    <span class="keywordflow">if</span> (last == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><span class="lineno">  343</span>    {</div>
<div class="line"><span class="lineno">  344</span>      <span class="keywordflow">while</span> ((linelen &gt; 0) &amp;&amp; <a class="code hl_function" href="ctype_8c.html#a16dd3da88a22f7e3ea99e3474fc46fda">mutt_isspace</a>(line[linelen - 1]))</div>
<div class="line"><span class="lineno">  345</span>        linelen--;</div>
<div class="line"><span class="lineno">  346</span>      line[linelen] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  347</span>    }</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>    <span class="comment">/* decode and do character set conversion */</span></div>
<div class="line"><span class="lineno">  350</span>    <a class="code hl_function" href="#ad9dfa15d279adb0b36f48b69960b73f0">qp_decode_line</a>(decline + l, line, &amp;l3, last);</div>
<div class="line"><span class="lineno">  351</span>    l += l3;</div>
<div class="line"><span class="lineno">  352</span>    <a class="code hl_function" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a>(cd, decline, &amp;l, state);</div>
<div class="line"><span class="lineno">  353</span>  }</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>  <a class="code hl_function" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a>(cd, 0, 0, state);</div>
<div class="line"><span class="lineno">  356</span>  <a class="code hl_define" href="mutt_2state_8h.html#a4437cf67431f33cd4497b5a8c276decd">state_reset_prefix</a>(state);</div>
<div class="line"><span class="lineno">  357</span>}</div>
<div class="ttc" id="actype_8c_html_a16dd3da88a22f7e3ea99e3474fc46fda"><div class="ttname"><a href="ctype_8c.html#a16dd3da88a22f7e3ea99e3474fc46fda">mutt_isspace</a></div><div class="ttdeci">bool mutt_isspace(int arg)</div><div class="ttdoc">Wrapper for isspace(3)</div><div class="ttdef"><b>Definition</b> <a href="ctype_8c_source.html#l00096">ctype.c:96</a></div></div>
<div class="ttc" id="ahandler_8c_html_ad9dfa15d279adb0b36f48b69960b73f0"><div class="ttname"><a href="#ad9dfa15d279adb0b36f48b69960b73f0">qp_decode_line</a></div><div class="ttdeci">static void qp_decode_line(char *dest, char *src, size_t *l, int last)</div><div class="ttdoc">Decode a line of quoted-printable text.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00246">handler.c:246</a></div></div>
<div class="ttc" id="amemory_8h_html_a3acffbd305ee72dcd4593c0d8af64a4f"><div class="ttname"><a href="memory_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a></div><div class="ttdeci">#define MIN(a, b)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00038">memory.h:38</a></div></div>
</div><!-- fragment --><div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_ada2d5290a26fe0a595f7c0560c291a58_cgraph.svg" width="303" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_ada2d5290a26fe0a595f7c0560c291a58_icgraph.svg" width="358" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad22fd154121f61ea75ac8bd4946eac7d" name="ad22fd154121f61ea75ac8bd4946eac7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad22fd154121f61ea75ac8bd4946eac7d">&#9670;&#160;</a></span>decode_byte()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned char decode_byte </td>
          <td>(</td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decode a uuencoded byte. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Character to decode </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Decoded value </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00364">364</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  365</span>{</div>
<div class="line"><span class="lineno">  366</span>  <span class="keywordflow">if</span> ((ch &lt; 32) || (ch &gt; 95))</div>
<div class="line"><span class="lineno">  367</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  368</span>  <span class="keywordflow">return</span> ch - 32;</div>
<div class="line"><span class="lineno">  369</span>}</div>
</div><!-- fragment --><div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_ad22fd154121f61ea75ac8bd4946eac7d_icgraph.svg" width="304" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2f8cdaad76dd45015a29224b1f93ab56" name="a2f8cdaad76dd45015a29224b1f93ab56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f8cdaad76dd45015a29224b1f93ab56">&#9670;&#160;</a></span>decode_uuencoded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void decode_uuencoded </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structState.html">State</a> *</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>istext</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">iconv_t</td>          <td class="paramname"><span class="paramname"><em>cd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decode uuencoded text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td><a class="el" href="structState.html" title="Keep track when processing files.">State</a> to work with </td></tr>
    <tr><td class="paramname">len</td><td>Length of text to decode </td></tr>
    <tr><td class="paramname">istext</td><td>Mime part is plain text </td></tr>
    <tr><td class="paramname">cd</td><td>Iconv conversion descriptor </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00378">378</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  379</span>{</div>
<div class="line"><span class="lineno">  380</span>  <span class="keywordtype">char</span> tmps[128] = { 0 };</div>
<div class="line"><span class="lineno">  381</span>  <span class="keywordtype">char</span> *pt = NULL;</div>
<div class="line"><span class="lineno">  382</span>  <span class="keywordtype">char</span> bufi[<a class="code hl_define" href="#a238627be6fe9590ff73fcc08ae6a10b3">BUFI_SIZE</a>] = { 0 };</div>
<div class="line"><span class="lineno">  383</span>  <span class="keywordtype">size_t</span> k = 0;</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>  <span class="keywordflow">if</span> (istext)</div>
<div class="line"><span class="lineno">  386</span>    <a class="code hl_define" href="mutt_2state_8h.html#a0f20589a346d8b214575ba401aa29015">state_set_prefix</a>(state);</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>  <span class="keywordflow">while</span> (len &gt; 0)</div>
<div class="line"><span class="lineno">  389</span>  {</div>
<div class="line"><span class="lineno">  390</span>    <span class="keywordflow">if</span> (!fgets(tmps, <span class="keyword">sizeof</span>(tmps), state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>))</div>
<div class="line"><span class="lineno">  391</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno">  392</span>    len -= <a class="code hl_function" href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a>(tmps);</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a>(tmps, <span class="stringliteral">&quot;begin &quot;</span>))</div>
<div class="line"><span class="lineno">  394</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  395</span>  }</div>
<div class="line"><span class="lineno">  396</span>  <span class="keywordflow">while</span> (len &gt; 0)</div>
<div class="line"><span class="lineno">  397</span>  {</div>
<div class="line"><span class="lineno">  398</span>    <span class="keywordflow">if</span> (!fgets(tmps, <span class="keyword">sizeof</span>(tmps), state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>))</div>
<div class="line"><span class="lineno">  399</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno">  400</span>    len -= <a class="code hl_function" href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a>(tmps);</div>
<div class="line"><span class="lineno">  401</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a>(tmps, <span class="stringliteral">&quot;end&quot;</span>))</div>
<div class="line"><span class="lineno">  402</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  403</span>    pt = tmps;</div>
<div class="line"><span class="lineno">  404</span>    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> linelen = <a class="code hl_function" href="#ad22fd154121f61ea75ac8bd4946eac7d">decode_byte</a>(*pt);</div>
<div class="line"><span class="lineno">  405</span>    pt++;</div>
<div class="line"><span class="lineno">  406</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c = 0; (c &lt; linelen) &amp;&amp; *pt;)</div>
<div class="line"><span class="lineno">  407</span>    {</div>
<div class="line"><span class="lineno">  408</span>      <span class="keywordflow">for</span> (<span class="keywordtype">char</span> l = 2; (l &lt;= 6) &amp;&amp; pt[0] &amp;&amp; pt[1]; l += 2)</div>
<div class="line"><span class="lineno">  409</span>      {</div>
<div class="line"><span class="lineno">  410</span>        <span class="keywordtype">char</span> out = <a class="code hl_function" href="#ad22fd154121f61ea75ac8bd4946eac7d">decode_byte</a>(*pt) &lt;&lt; l;</div>
<div class="line"><span class="lineno">  411</span>        pt++;</div>
<div class="line"><span class="lineno">  412</span>        out |= (<a class="code hl_function" href="#ad22fd154121f61ea75ac8bd4946eac7d">decode_byte</a>(*pt) &gt;&gt; (6 - l));</div>
<div class="line"><span class="lineno">  413</span>        bufi[k++] = out;</div>
<div class="line"><span class="lineno">  414</span>        c++;</div>
<div class="line"><span class="lineno">  415</span>        <span class="keywordflow">if</span> (c == linelen)</div>
<div class="line"><span class="lineno">  416</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  417</span>      }</div>
<div class="line"><span class="lineno">  418</span>      <a class="code hl_function" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a>(cd, bufi, &amp;k, state);</div>
<div class="line"><span class="lineno">  419</span>      pt++;</div>
<div class="line"><span class="lineno">  420</span>    }</div>
<div class="line"><span class="lineno">  421</span>  }</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>cleanup:</div>
<div class="line"><span class="lineno">  424</span>  <a class="code hl_function" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a>(cd, bufi, &amp;k, state);</div>
<div class="line"><span class="lineno">  425</span>  <a class="code hl_function" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a>(cd, 0, 0, state);</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>  <a class="code hl_define" href="mutt_2state_8h.html#a4437cf67431f33cd4497b5a8c276decd">state_reset_prefix</a>(state);</div>
<div class="line"><span class="lineno">  428</span>}</div>
<div class="ttc" id="ahandler_8c_html_ad22fd154121f61ea75ac8bd4946eac7d"><div class="ttname"><a href="#ad22fd154121f61ea75ac8bd4946eac7d">decode_byte</a></div><div class="ttdeci">static unsigned char decode_byte(char ch)</div><div class="ttdoc">Decode a uuencoded byte.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00364">handler.c:364</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a9bf968304f4f9b49e24215cb2e28d22d"><div class="ttname"><a href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a></div><div class="ttdeci">size_t mutt_str_startswith(const char *str, const char *prefix)</div><div class="ttdoc">Check whether a string starts with a prefix.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00234">string.c:234</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_acca6786b903b22a5924219f9db96e10d"><div class="ttname"><a href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a></div><div class="ttdeci">size_t mutt_str_len(const char *a)</div><div class="ttdoc">Calculate the length of a string, safely.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00500">string.c:500</a></div></div>
</div><!-- fragment --><div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a2f8cdaad76dd45015a29224b1f93ab56_cgraph.svg" width="344" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a2f8cdaad76dd45015a29224b1f93ab56_icgraph.svg" width="383" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af5f495f5053bf85394ccb3499315d2fb" name="af5f495f5053bf85394ccb3499315d2fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5f495f5053bf85394ccb3499315d2fb">&#9670;&#160;</a></span>is_mmnoask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_mmnoask </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Metamail compatibility: should the attachment be autoviewed? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Mime type, e.g. 'text/plain' </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Metamail "no ask" is true</td></tr>
  </table>
  </dd>
</dl>
<p>Test if the <code>MM_NOASK</code> environment variable should allow autoviewing of the attachment.</p>
<dl class="section note"><dt>Note</dt><dd>If <code>MM_NOASK=1</code> then the function will automatically return true. </dd></dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00440">440</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  441</span>{</div>
<div class="line"><span class="lineno">  442</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *val = <a class="code hl_function" href="mutt_2string_8c.html#a954e319c94dafe57f48ea9b847269127">mutt_str_getenv</a>(<span class="stringliteral">&quot;MM_NOASK&quot;</span>);</div>
<div class="line"><span class="lineno">  443</span>  <span class="keywordflow">if</span> (!val)</div>
<div class="line"><span class="lineno">  444</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>  <span class="keywordtype">char</span> *p = NULL;</div>
<div class="line"><span class="lineno">  447</span>  <span class="keywordtype">char</span> tmp[1024] = { 0 };</div>
<div class="line"><span class="lineno">  448</span>  <span class="keywordtype">char</span> *q = NULL;</div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(val, <span class="stringliteral">&quot;1&quot;</span>))</div>
<div class="line"><span class="lineno">  451</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>  <a class="code hl_function" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(tmp, val, <span class="keyword">sizeof</span>(tmp));</div>
<div class="line"><span class="lineno">  454</span>  p = tmp;</div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>  <span class="keywordflow">while</span> ((p = strtok(p, <span class="stringliteral">&quot;,&quot;</span>)))</div>
<div class="line"><span class="lineno">  457</span>  {</div>
<div class="line"><span class="lineno">  458</span>    q = strrchr(p, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">if</span> (q)</div>
<div class="line"><span class="lineno">  460</span>    {</div>
<div class="line"><span class="lineno">  461</span>      <span class="keywordflow">if</span> (q[1] == <span class="charliteral">&#39;*&#39;</span>)</div>
<div class="line"><span class="lineno">  462</span>      {</div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#aefa17bf84a5a1cb4b41afb08cd91ceff">mutt_istrn_equal</a>(buf, p, q - p))</div>
<div class="line"><span class="lineno">  464</span>          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  465</span>      }</div>
<div class="line"><span class="lineno">  466</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  467</span>      {</div>
<div class="line"><span class="lineno">  468</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(buf, p))</div>
<div class="line"><span class="lineno">  469</span>          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  470</span>      }</div>
<div class="line"><span class="lineno">  471</span>    }</div>
<div class="line"><span class="lineno">  472</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  473</span>    {</div>
<div class="line"><span class="lineno">  474</span>      <span class="keyword">const</span> <span class="keywordtype">size_t</span> plen = <a class="code hl_function" href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a>(buf, p);</div>
<div class="line"><span class="lineno">  475</span>      <span class="keywordflow">if</span> ((plen != 0) &amp;&amp; (buf[plen] == <span class="charliteral">&#39;/&#39;</span>))</div>
<div class="line"><span class="lineno">  476</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  477</span>    }</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span>    p = NULL;</div>
<div class="line"><span class="lineno">  480</span>  }</div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  483</span>}</div>
<div class="ttc" id="amutt_2string_8c_html_a29db81d6f5a7dd216cbea75ecf8a5885"><div class="ttname"><a href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a></div><div class="ttdeci">bool mutt_istr_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings, ignoring case.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00674">string.c:674</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a6b6a50296dd2a31863a43379ef4a343d"><div class="ttname"><a href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a></div><div class="ttdeci">bool mutt_str_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00662">string.c:662</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a954e319c94dafe57f48ea9b847269127"><div class="ttname"><a href="mutt_2string_8c.html#a954e319c94dafe57f48ea9b847269127">mutt_str_getenv</a></div><div class="ttdeci">const char * mutt_str_getenv(const char *name)</div><div class="ttdoc">Get an environment variable.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00728">string.c:728</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_ad20e00309de897a1e882fc7400335b83"><div class="ttname"><a href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a></div><div class="ttdeci">size_t mutt_str_copy(char *dest, const char *src, size_t dsize)</div><div class="ttdoc">Copy a string into a buffer (guaranteeing NUL-termination)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00583">string.c:583</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_aebd2a8a3f8a30062c31fa1474d87cc41"><div class="ttname"><a href="mutt_2string_8c.html#aebd2a8a3f8a30062c31fa1474d87cc41">mutt_istr_startswith</a></div><div class="ttdeci">size_t mutt_istr_startswith(const char *str, const char *prefix)</div><div class="ttdoc">Check whether a string starts with a prefix, ignoring case.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00246">string.c:246</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_aefa17bf84a5a1cb4b41afb08cd91ceff"><div class="ttname"><a href="mutt_2string_8c.html#aefa17bf84a5a1cb4b41afb08cd91ceff">mutt_istrn_equal</a></div><div class="ttdeci">bool mutt_istrn_equal(const char *a, const char *b, size_t num)</div><div class="ttdoc">Check for equality of two strings ignoring case (to a maximum), safely.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00457">string.c:457</a></div></div>
</div><!-- fragment --><div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_af5f495f5053bf85394ccb3499315d2fb_cgraph.svg" width="300" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-17" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_af5f495f5053bf85394ccb3499315d2fb_icgraph.svg" width="247" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a09f27e2821153040ea4cad0b9ade6153" name="a09f27e2821153040ea4cad0b9ade6153"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09f27e2821153040ea4cad0b9ade6153">&#9670;&#160;</a></span>is_autoview()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_autoview </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should email body be filtered by mailcap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> of the email </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>body part should be filtered by a mailcap entry prior to viewing inline </td></tr>
    <tr><td class="paramname">0</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l00491">491</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  492</span>{</div>
<div class="line"><span class="lineno">  493</span>  <span class="keywordtype">char</span> type[256] = { 0 };</div>
<div class="line"><span class="lineno">  494</span>  <span class="keywordtype">bool</span> is_av = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>  snprintf(type, <span class="keyword">sizeof</span>(type), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code hl_define" href="mime_8h.html#a3e568918dd102d7bfd39661c82ff6c3f">BODY_TYPE</a>(b), b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>);</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_implicit_auto_view = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;implicit_auto_view&quot;</span>);</div>
<div class="line"><span class="lineno">  499</span>  <span class="keywordflow">if</span> (c_implicit_auto_view)</div>
<div class="line"><span class="lineno">  500</span>  {</div>
<div class="line"><span class="lineno">  501</span>    <span class="comment">/* $implicit_auto_view is essentially the same as &quot;auto-view *&quot; */</span></div>
<div class="line"><span class="lineno">  502</span>    is_av = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  503</span>  }</div>
<div class="line"><span class="lineno">  504</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  505</span>  {</div>
<div class="line"><span class="lineno">  506</span>    <span class="comment">/* determine if this type is on the user&#39;s auto-view list */</span></div>
<div class="line"><span class="lineno">  507</span>    <a class="code hl_function" href="mutt__attach_8c.html#a1a97d711180c816108d8866ef7b120cc">mutt_check_lookup_list</a>(b, type, <span class="keyword">sizeof</span>(type));</div>
<div class="line"><span class="lineno">  508</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structListNode.html">ListNode</a> *np = NULL;</div>
<div class="line"><span class="lineno">  509</span>    <a class="code hl_define" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(np, &amp;<a class="code hl_variable" href="globals_8c.html#a6972067b736a0ea1e2855cd1e9dfb0a3">AutoViewList</a>, entries)</div>
<div class="line"><span class="lineno">  510</span>    {</div>
<div class="line"><span class="lineno">  511</span>      <span class="keywordtype">int</span> i = <a class="code hl_function" href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a>(np-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>);</div>
<div class="line"><span class="lineno">  512</span>      i--;</div>
<div class="line"><span class="lineno">  513</span>      <span class="keywordflow">if</span> (((i &gt; 0) &amp;&amp; (np-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>[i - 1] == <span class="charliteral">&#39;/&#39;</span>) &amp;&amp; (np-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>[i] == <span class="charliteral">&#39;*&#39;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  514</span>           <a class="code hl_function" href="mutt_2string_8c.html#aefa17bf84a5a1cb4b41afb08cd91ceff">mutt_istrn_equal</a>(type, np-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>, i)) ||</div>
<div class="line"><span class="lineno">  515</span>          <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(type, np-&gt;<a class="code hl_variable" href="structListNode.html#aafe688d670318196766392d8235d00a7">data</a>))</div>
<div class="line"><span class="lineno">  516</span>      {</div>
<div class="line"><span class="lineno">  517</span>        is_av = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  518</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  519</span>      }</div>
<div class="line"><span class="lineno">  520</span>    }</div>
<div class="line"><span class="lineno">  521</span> </div>
<div class="line"><span class="lineno">  522</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#af5f495f5053bf85394ccb3499315d2fb">is_mmnoask</a>(type))</div>
<div class="line"><span class="lineno">  523</span>      is_av = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  524</span>  }</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>  <span class="comment">/* determine if there is a mailcap entry suitable for auto-view</span></div>
<div class="line"><span class="lineno">  527</span><span class="comment">   *</span></div>
<div class="line"><span class="lineno">  528</span><span class="comment">   * @warning type is altered by this call as a result of &#39;mime-lookup&#39; support */</span></div>
<div class="line"><span class="lineno">  529</span>  <span class="keywordflow">if</span> (is_av)</div>
<div class="line"><span class="lineno">  530</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="mailcap_8c.html#af76f3b2c5819c22f1470723cc30a9ad1">mailcap_lookup</a>(b, type, <span class="keyword">sizeof</span>(type), NULL, <a class="code hl_enumvalue" href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1a685052e871afa17028f0e1c11e056a60">MUTT_MC_AUTOVIEW</a>);</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  533</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00047">helpers.c:47</a></div></div>
<div class="ttc" id="aglobals_8c_html_a6972067b736a0ea1e2855cd1e9dfb0a3"><div class="ttname"><a href="globals_8c.html#a6972067b736a0ea1e2855cd1e9dfb0a3">AutoViewList</a></div><div class="ttdeci">struct ListHead AutoViewList</div><div class="ttdoc">List of mime types to auto view.</div><div class="ttdef"><b>Definition</b> <a href="globals_8c_source.html#l00045">globals.c:45</a></div></div>
<div class="ttc" id="ahandler_8c_html_af5f495f5053bf85394ccb3499315d2fb"><div class="ttname"><a href="#af5f495f5053bf85394ccb3499315d2fb">is_mmnoask</a></div><div class="ttdeci">static bool is_mmnoask(const char *buf)</div><div class="ttdoc">Metamail compatibility: should the attachment be autoviewed?</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00440">handler.c:440</a></div></div>
<div class="ttc" id="amailcap_8c_html_af76f3b2c5819c22f1470723cc30a9ad1"><div class="ttname"><a href="mailcap_8c.html#af76f3b2c5819c22f1470723cc30a9ad1">mailcap_lookup</a></div><div class="ttdeci">bool mailcap_lookup(struct Body *b, char *type, size_t typelen, struct MailcapEntry *entry, enum MailcapLookup opt)</div><div class="ttdoc">Find given type in the list of mailcap files.</div><div class="ttdef"><b>Definition</b> <a href="mailcap_8c_source.html#l00484">mailcap.c:484</a></div></div>
<div class="ttc" id="amailcap_8h_html_a0716f6351a9229990024889ec22b33c1a685052e871afa17028f0e1c11e056a60"><div class="ttname"><a href="mailcap_8h.html#a0716f6351a9229990024889ec22b33c1a685052e871afa17028f0e1c11e056a60">MUTT_MC_AUTOVIEW</a></div><div class="ttdeci">@ MUTT_MC_AUTOVIEW</div><div class="ttdoc">Mailcap autoview field.</div><div class="ttdef"><b>Definition</b> <a href="mailcap_8h_source.html#l00061">mailcap.h:61</a></div></div>
<div class="ttc" id="amutt__attach_8c_html_a1a97d711180c816108d8866ef7b120cc"><div class="ttname"><a href="mutt__attach_8c.html#a1a97d711180c816108d8866ef7b120cc">mutt_check_lookup_list</a></div><div class="ttdeci">void mutt_check_lookup_list(struct Body *b, char *type, size_t len)</div><div class="ttdoc">Update the mime type.</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8c_source.html#l00339">mutt_attach.c:339</a></div></div>
<div class="ttc" id="aqueue_8h_html_a77999ebdf5aaf7af8b8ea22bf208c432"><div class="ttname"><a href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a></div><div class="ttdeci">#define STAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00390">queue.h:390</a></div></div>
<div class="ttc" id="astructListNode_html"><div class="ttname"><a href="structListNode.html">ListNode</a></div><div class="ttdoc">A List node for strings.</div><div class="ttdef"><b>Definition</b> <a href="list_8h_source.html#l00036">list.h:37</a></div></div>
<div class="ttc" id="astructListNode_html_aafe688d670318196766392d8235d00a7"><div class="ttname"><a href="structListNode.html#aafe688d670318196766392d8235d00a7">ListNode::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">String.</div><div class="ttdef"><b>Definition</b> <a href="list_8h_source.html#l00038">list.h:38</a></div></div>
<div class="ttc" id="astructNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00127">neomutt.h:128</a></div></div>
<div class="ttc" id="astructNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00134">neomutt.h:134</a></div></div>
</div><!-- fragment --><div id="dynsection-18" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a09f27e2821153040ea4cad0b9ade6153_cgraph.svg" width="651" height="314"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-19" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a09f27e2821153040ea4cad0b9ade6153_icgraph.svg" width="662" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a88df4ca81c59bfc2464df374863edfd9" name="a88df4ca81c59bfc2464df374863edfd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88df4ca81c59bfc2464df374863edfd9">&#9670;&#160;</a></span>run_decode_and_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int run_decode_and_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structState.html">State</a> *</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a></td>          <td class="paramname"><span class="paramname"><em>handler</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>plaintext</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run an appropriate decoder for an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> of the email </td></tr>
    <tr><td class="paramname">state</td><td><a class="el" href="structState.html" title="Keep track when processing files.">State</a> to work with </td></tr>
    <tr><td class="paramname">handler</td><td>Callback function to process the content - Implements <a class="el" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> </td></tr>
    <tr><td class="paramname">plaintext</td><td>Is the content in plain text </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l01332">1332</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1334</span>{</div>
<div class="line"><span class="lineno"> 1335</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *save_prefix = NULL;</div>
<div class="line"><span class="lineno"> 1336</span>  FILE *fp = NULL;</div>
<div class="line"><span class="lineno"> 1337</span>  <span class="keywordtype">size_t</span> tmplength = 0;</div>
<div class="line"><span class="lineno"> 1338</span>  LOFF_T tmpoffset = 0;</div>
<div class="line"><span class="lineno"> 1339</span>  <span class="keywordtype">int</span> decode = 0;</div>
<div class="line"><span class="lineno"> 1340</span>  <span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><span class="lineno"> 1341</span><span class="preprocessor">#ifndef USE_FMEMOPEN</span></div>
<div class="line"><span class="lineno"> 1342</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *tempfile = NULL;</div>
<div class="line"><span class="lineno"> 1343</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1344</span> </div>
<div class="line"><span class="lineno"> 1345</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="file_8c.html#a6b60cb2044041374689e6e6641c5cc05">mutt_file_seek</a>(state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>, b-&gt;<a class="code hl_variable" href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">offset</a>, SEEK_SET))</div>
<div class="line"><span class="lineno"> 1346</span>  {</div>
<div class="line"><span class="lineno"> 1347</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1348</span>  }</div>
<div class="line"><span class="lineno"> 1349</span> </div>
<div class="line"><span class="lineno"> 1350</span><span class="preprocessor">#ifdef USE_FMEMOPEN</span></div>
<div class="line"><span class="lineno"> 1351</span>  <span class="keywordtype">char</span> *temp = NULL;</div>
<div class="line"><span class="lineno"> 1352</span>  <span class="keywordtype">size_t</span> tempsize = 0;</div>
<div class="line"><span class="lineno"> 1353</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1354</span> </div>
<div class="line"><span class="lineno"> 1355</span>  <span class="comment">/* see if we need to decode this part before processing it */</span></div>
<div class="line"><span class="lineno"> 1356</span>  <span class="keywordflow">if</span> ((b-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> == <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a5c90b21fa3f41a7c98c862cb39d4370d">ENC_BASE64</a>) || (b-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> == <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61af96d66ee7716e523971a7b5161f04ded">ENC_QUOTED_PRINTABLE</a>) ||</div>
<div class="line"><span class="lineno"> 1357</span>      (b-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> == <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a17c00808bfbeb61dc2a001baf0aac5bd">ENC_UUENCODED</a>) || (plaintext || <a class="code hl_function" href="muttlib_8c.html#a712bb5e0a580467b5aedc08afea40b92">mutt_is_text_part</a>(b)))</div>
<div class="line"><span class="lineno"> 1358</span>  <span class="comment">/* text subtypes may require character set conversion even with 8bit encoding */</span></div>
<div class="line"><span class="lineno"> 1359</span>  {</div>
<div class="line"><span class="lineno"> 1360</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> orig_type = b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a>;</div>
<div class="line"><span class="lineno"> 1361</span>    <span class="keywordflow">if</span> (plaintext)</div>
<div class="line"><span class="lineno"> 1362</span>    {</div>
<div class="line"><span class="lineno"> 1363</span>      b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> = <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167">TYPE_TEXT</a>;</div>
<div class="line"><span class="lineno"> 1364</span>    }</div>
<div class="line"><span class="lineno"> 1365</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1366</span>    {</div>
<div class="line"><span class="lineno"> 1367</span>      <span class="comment">/* decode to a tempfile, saving the original destination */</span></div>
<div class="line"><span class="lineno"> 1368</span>      fp = state-&gt;<a class="code hl_variable" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>;</div>
<div class="line"><span class="lineno"> 1369</span><span class="preprocessor">#ifdef USE_FMEMOPEN</span></div>
<div class="line"><span class="lineno"> 1370</span>      state-&gt;<a class="code hl_variable" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a> = open_memstream(&amp;temp, &amp;tempsize);</div>
<div class="line"><span class="lineno"> 1371</span>      <span class="keywordflow">if</span> (!state-&gt;<a class="code hl_variable" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>)</div>
<div class="line"><span class="lineno"> 1372</span>      {</div>
<div class="line"><span class="lineno"> 1373</span>        <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unable to open &#39;memory stream&#39;&quot;</span>));</div>
<div class="line"><span class="lineno"> 1374</span>        <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Can&#39;t open &#39;memory stream&#39;\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1375</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1376</span>      }</div>
<div class="line"><span class="lineno"> 1377</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1378</span>      tempfile = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1379</span>      <a class="code hl_define" href="tmp_8h.html#a271a7828888985955df49205d7846a45">buf_mktemp</a>(tempfile);</div>
<div class="line"><span class="lineno"> 1380</span>      state-&gt;<a class="code hl_variable" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a> = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tempfile), <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"><span class="lineno"> 1381</span>      <span class="keywordflow">if</span> (!state-&gt;<a class="code hl_variable" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>)</div>
<div class="line"><span class="lineno"> 1382</span>      {</div>
<div class="line"><span class="lineno"> 1383</span>        <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Unable to open temporary file&quot;</span>));</div>
<div class="line"><span class="lineno"> 1384</span>        <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Can&#39;t open %s\n&quot;</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tempfile));</div>
<div class="line"><span class="lineno"> 1385</span>        <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;tempfile);</div>
<div class="line"><span class="lineno"> 1386</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1387</span>      }</div>
<div class="line"><span class="lineno"> 1388</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1389</span>      <span class="comment">/* decoding the attachment changes the size and offset, so save a copy</span></div>
<div class="line"><span class="lineno"> 1390</span><span class="comment">       * of the &quot;real&quot; values now, and restore them after processing */</span></div>
<div class="line"><span class="lineno"> 1391</span>      tmplength = b-&gt;<a class="code hl_variable" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a>;</div>
<div class="line"><span class="lineno"> 1392</span>      tmpoffset = b-&gt;<a class="code hl_variable" href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">offset</a>;</div>
<div class="line"><span class="lineno"> 1393</span> </div>
<div class="line"><span class="lineno"> 1394</span>      <span class="comment">/* if we are decoding binary bodies, we don&#39;t want to prefix each</span></div>
<div class="line"><span class="lineno"> 1395</span><span class="comment">       * line with the prefix or else the data will get corrupted.  */</span></div>
<div class="line"><span class="lineno"> 1396</span>      save_prefix = state-&gt;<a class="code hl_variable" href="structState.html#ac92c06846530ad9f3cde7e23d5789d76">prefix</a>;</div>
<div class="line"><span class="lineno"> 1397</span>      state-&gt;<a class="code hl_variable" href="structState.html#ac92c06846530ad9f3cde7e23d5789d76">prefix</a> = NULL;</div>
<div class="line"><span class="lineno"> 1398</span> </div>
<div class="line"><span class="lineno"> 1399</span>      decode = 1;</div>
<div class="line"><span class="lineno"> 1400</span>    }</div>
<div class="line"><span class="lineno"> 1401</span> </div>
<div class="line"><span class="lineno"> 1402</span>    <a class="code hl_function" href="#ad6e9c66285fee73e4d9553c565e10fa2">mutt_decode_attachment</a>(b, state);</div>
<div class="line"><span class="lineno"> 1403</span> </div>
<div class="line"><span class="lineno"> 1404</span>    <span class="keywordflow">if</span> (decode)</div>
<div class="line"><span class="lineno"> 1405</span>    {</div>
<div class="line"><span class="lineno"> 1406</span>      b-&gt;<a class="code hl_variable" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a> = ftello(state-&gt;<a class="code hl_variable" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>);</div>
<div class="line"><span class="lineno"> 1407</span>      b-&gt;<a class="code hl_variable" href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">offset</a> = 0;</div>
<div class="line"><span class="lineno"> 1408</span><span class="preprocessor">#ifdef USE_FMEMOPEN</span></div>
<div class="line"><span class="lineno"> 1409</span>      <span class="comment">/* When running under torify, mutt_file_fclose(&amp;state-&gt;fp_out) does not seem to</span></div>
<div class="line"><span class="lineno"> 1410</span><span class="comment">       * update tempsize. On the other hand, fflush does.  See</span></div>
<div class="line"><span class="lineno"> 1411</span><span class="comment">       * https://github.com/neomutt/neomutt/issues/440 */</span></div>
<div class="line"><span class="lineno"> 1412</span>      fflush(state-&gt;<a class="code hl_variable" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>);</div>
<div class="line"><span class="lineno"> 1413</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1414</span>      <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;state-&gt;<a class="code hl_variable" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a>);</div>
<div class="line"><span class="lineno"> 1415</span> </div>
<div class="line"><span class="lineno"> 1416</span>      <span class="comment">/* restore final destination and substitute the tempfile for input */</span></div>
<div class="line"><span class="lineno"> 1417</span>      state-&gt;<a class="code hl_variable" href="structState.html#a88fc722d3012ebf69d3a061cbf6bc296">fp_out</a> = fp;</div>
<div class="line"><span class="lineno"> 1418</span>      fp = state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>;</div>
<div class="line"><span class="lineno"> 1419</span><span class="preprocessor">#ifdef USE_FMEMOPEN</span></div>
<div class="line"><span class="lineno"> 1420</span>      <span class="keywordflow">if</span> (tempsize)</div>
<div class="line"><span class="lineno"> 1421</span>      {</div>
<div class="line"><span class="lineno"> 1422</span>        state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a> = fmemopen(temp, tempsize, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno"> 1423</span>      }</div>
<div class="line"><span class="lineno"> 1424</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1425</span>      { <span class="comment">/* fmemopen can&#39;t handle zero-length buffers */</span></div>
<div class="line"><span class="lineno"> 1426</span>        state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a> = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(<span class="stringliteral">&quot;/dev/null&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno"> 1427</span>      }</div>
<div class="line"><span class="lineno"> 1428</span>      <span class="keywordflow">if</span> (!state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>)</div>
<div class="line"><span class="lineno"> 1429</span>      {</div>
<div class="line"><span class="lineno"> 1430</span>        <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;failed to re-open &#39;memory stream&#39;&quot;</span>));</div>
<div class="line"><span class="lineno"> 1431</span>        <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;temp);</div>
<div class="line"><span class="lineno"> 1432</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1433</span>      }</div>
<div class="line"><span class="lineno"> 1434</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1435</span>      state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a> = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tempfile), <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno"> 1436</span>      unlink(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tempfile));</div>
<div class="line"><span class="lineno"> 1437</span>      <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;tempfile);</div>
<div class="line"><span class="lineno"> 1438</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1439</span>      <span class="comment">/* restore the prefix */</span></div>
<div class="line"><span class="lineno"> 1440</span>      state-&gt;<a class="code hl_variable" href="structState.html#ac92c06846530ad9f3cde7e23d5789d76">prefix</a> = save_prefix;</div>
<div class="line"><span class="lineno"> 1441</span>    }</div>
<div class="line"><span class="lineno"> 1442</span> </div>
<div class="line"><span class="lineno"> 1443</span>    b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> = orig_type;</div>
<div class="line"><span class="lineno"> 1444</span>  }</div>
<div class="line"><span class="lineno"> 1445</span> </div>
<div class="line"><span class="lineno"> 1446</span>  <span class="comment">/* process the (decoded) body part */</span></div>
<div class="line"><span class="lineno"> 1447</span>  <span class="keywordflow">if</span> (handler)</div>
<div class="line"><span class="lineno"> 1448</span>  {</div>
<div class="line"><span class="lineno"> 1449</span>    rc = handler(b, state);</div>
<div class="line"><span class="lineno"> 1450</span>    <span class="keywordflow">if</span> (rc != 0)</div>
<div class="line"><span class="lineno"> 1451</span>    {</div>
<div class="line"><span class="lineno"> 1452</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Failed on attachment of type %s/%s\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1453</span>                 <a class="code hl_define" href="mime_8h.html#a3e568918dd102d7bfd39661c82ff6c3f">BODY_TYPE</a>(b), <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>));</div>
<div class="line"><span class="lineno"> 1454</span>    }</div>
<div class="line"><span class="lineno"> 1455</span> </div>
<div class="line"><span class="lineno"> 1456</span>    <span class="keywordflow">if</span> (decode)</div>
<div class="line"><span class="lineno"> 1457</span>    {</div>
<div class="line"><span class="lineno"> 1458</span>      b-&gt;<a class="code hl_variable" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a> = tmplength;</div>
<div class="line"><span class="lineno"> 1459</span>      b-&gt;<a class="code hl_variable" href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">offset</a> = tmpoffset;</div>
<div class="line"><span class="lineno"> 1460</span> </div>
<div class="line"><span class="lineno"> 1461</span>      <span class="comment">/* restore the original source stream */</span></div>
<div class="line"><span class="lineno"> 1462</span>      <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>);</div>
<div class="line"><span class="lineno"> 1463</span>      state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a> = fp;</div>
<div class="line"><span class="lineno"> 1464</span>    }</div>
<div class="line"><span class="lineno"> 1465</span>  }</div>
<div class="line"><span class="lineno"> 1466</span>  state-&gt;<a class="code hl_variable" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> |= <a class="code hl_define" href="mutt_2state_8h.html#a3747adb496e21b20abbcf8d3b1db92ce">STATE_FIRSTDONE</a>;</div>
<div class="line"><span class="lineno"> 1467</span><span class="preprocessor">#ifdef USE_FMEMOPEN</span></div>
<div class="line"><span class="lineno"> 1468</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;temp);</div>
<div class="line"><span class="lineno"> 1469</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1470</span> </div>
<div class="line"><span class="lineno"> 1471</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1472</span>}</div>
<div class="ttc" id="afile_8c_html_a6b60cb2044041374689e6e6641c5cc05"><div class="ttname"><a href="file_8c.html#a6b60cb2044041374689e6e6641c5cc05">mutt_file_seek</a></div><div class="ttdeci">bool mutt_file_seek(FILE *fp, LOFF_T offset, int whence)</div><div class="ttdoc">Wrapper for fseeko with error handling.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l00656">file.c:656</a></div></div>
<div class="ttc" id="afile_8h_html_a9b519e795f098be88b93cd72c49a35ec"><div class="ttname"><a href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a></div><div class="ttdeci">#define mutt_file_fclose(FP)</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00139">file.h:139</a></div></div>
<div class="ttc" id="afile_8h_html_a9fa358d76519cb6bc8ffca5850976d46"><div class="ttname"><a href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a></div><div class="ttdeci">#define mutt_file_fopen(PATH, MODE)</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00138">file.h:138</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00094">logging2.h:94</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00091">logging2.h:91</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00095">logging2.h:95</a></div></div>
<div class="ttc" id="ahandler_8c_html_ad6e9c66285fee73e4d9553c565e10fa2"><div class="ttname"><a href="#ad6e9c66285fee73e4d9553c565e10fa2">mutt_decode_attachment</a></div><div class="ttdeci">void mutt_decode_attachment(const struct Body *b, struct State *state)</div><div class="ttdoc">Decode an email&#39;s attachment.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l01911">handler.c:1911</a></div></div>
<div class="ttc" id="alogging2_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdeci">@ LL_DEBUG1</div><div class="ttdoc">Log at debug level 1.</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00045">logging2.h:45</a></div></div>
<div class="ttc" id="amemory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00063">memory.h:63</a></div></div>
<div class="ttc" id="amime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61a17c00808bfbeb61dc2a001baf0aac5bd"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a17c00808bfbeb61dc2a001baf0aac5bd">ENC_UUENCODED</a></div><div class="ttdeci">@ ENC_UUENCODED</div><div class="ttdoc">UUEncoded text.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00054">mime.h:54</a></div></div>
<div class="ttc" id="amime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61a5c90b21fa3f41a7c98c862cb39d4370d"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a5c90b21fa3f41a7c98c862cb39d4370d">ENC_BASE64</a></div><div class="ttdeci">@ ENC_BASE64</div><div class="ttdoc">Base-64 encoded text.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00052">mime.h:52</a></div></div>
<div class="ttc" id="amime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61af96d66ee7716e523971a7b5161f04ded"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61af96d66ee7716e523971a7b5161f04ded">ENC_QUOTED_PRINTABLE</a></div><div class="ttdeci">@ ENC_QUOTED_PRINTABLE</div><div class="ttdoc">Quoted-printable text.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00051">mime.h:51</a></div></div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167">TYPE_TEXT</a></div><div class="ttdeci">@ TYPE_TEXT</div><div class="ttdoc">Type: &#39;text/*&#39;.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00038">mime.h:38</a></div></div>
<div class="ttc" id="amutt_2state_8h_html_a3747adb496e21b20abbcf8d3b1db92ce"><div class="ttname"><a href="mutt_2state_8h.html#a3747adb496e21b20abbcf8d3b1db92ce">STATE_FIRSTDONE</a></div><div class="ttdeci">#define STATE_FIRSTDONE</div><div class="ttdoc">The first attachment has been done.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00040">state.h:40</a></div></div>
<div class="ttc" id="amuttlib_8c_html_a712bb5e0a580467b5aedc08afea40b92"><div class="ttname"><a href="muttlib_8c.html#a712bb5e0a580467b5aedc08afea40b92">mutt_is_text_part</a></div><div class="ttdeci">bool mutt_is_text_part(const struct Body *b)</div><div class="ttdoc">Is this part of an email in plain text?</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00406">muttlib.c:406</a></div></div>
<div class="ttc" id="astring2_8h_html_a7e0481bed27661ea2679f256b24e0283"><div class="ttname"><a href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a></div><div class="ttdeci">#define NONULL(x)</div><div class="ttdef"><b>Definition</b> <a href="string2_8h_source.html#l00044">string2.h:44</a></div></div>
<div class="ttc" id="astructBody_html_a1969dfeb0a155ccb16153fe777a103b0"><div class="ttname"><a href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">Body::offset</a></div><div class="ttdeci">LOFF_T offset</div><div class="ttdoc">offset where the actual data begins</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00052">body.h:52</a></div></div>
<div class="ttc" id="astructBody_html_af77d79aadb278bef8f2829c268f2486f"><div class="ttname"><a href="structBody.html#af77d79aadb278bef8f2829c268f2486f">Body::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdoc">content-type primary type, ContentType</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00040">body.h:40</a></div></div>
<div class="ttc" id="astructState_html_a5d855f7d518fde2ac4e8e409cbb24ad3"><div class="ttname"><a href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">State::flags</a></div><div class="ttdeci">StateFlags flags</div><div class="ttdoc">Flags, e.g. STATE_DISPLAY.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00052">state.h:52</a></div></div>
<div class="ttc" id="astructState_html_ac92c06846530ad9f3cde7e23d5789d76"><div class="ttname"><a href="structState.html#ac92c06846530ad9f3cde7e23d5789d76">State::prefix</a></div><div class="ttdeci">const char * prefix</div><div class="ttdoc">String to add to the beginning of each output line.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00051">state.h:51</a></div></div>
<div class="ttc" id="atmp_8h_html_a271a7828888985955df49205d7846a45"><div class="ttname"><a href="tmp_8h.html#a271a7828888985955df49205d7846a45">buf_mktemp</a></div><div class="ttdeci">#define buf_mktemp(buf)</div><div class="ttdef"><b>Definition</b> <a href="tmp_8h_source.html#l00033">tmp.h:33</a></div></div>
</div><!-- fragment --><div id="dynsection-20" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a88df4ca81c59bfc2464df374863edfd9_cgraph.svg" width="594" height="306"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-21" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a88df4ca81c59bfc2464df374863edfd9_icgraph.svg" width="618" height="183"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7834668eb7e41062c0d6aa80589de5be" name="a7834668eb7e41062c0d6aa80589de5be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7834668eb7e41062c0d6aa80589de5be">&#9670;&#160;</a></span>mutt_decode_base64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_decode_base64 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structState.html">State</a> *</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>istext</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">iconv_t</td>          <td class="paramname"><span class="paramname"><em>cd</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode base64-encoded text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td><a class="el" href="structState.html" title="Keep track when processing files.">State</a> to work with </td></tr>
    <tr><td class="paramname">len</td><td>Length of text to decode </td></tr>
    <tr><td class="paramname">istext</td><td>Mime part is plain text </td></tr>
    <tr><td class="paramname">cd</td><td>Iconv conversion descriptor </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l01538">1538</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1539</span>{</div>
<div class="line"><span class="lineno"> 1540</span>  <span class="keywordtype">char</span> buf[5] = { 0 };</div>
<div class="line"><span class="lineno"> 1541</span>  <span class="keywordtype">int</span> ch, i;</div>
<div class="line"><span class="lineno"> 1542</span>  <span class="keywordtype">bool</span> cr = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1543</span>  <span class="keywordtype">char</span> bufi[<a class="code hl_define" href="#a238627be6fe9590ff73fcc08ae6a10b3">BUFI_SIZE</a>] = { 0 };</div>
<div class="line"><span class="lineno"> 1544</span>  <span class="keywordtype">size_t</span> l = 0;</div>
<div class="line"><span class="lineno"> 1545</span> </div>
<div class="line"><span class="lineno"> 1546</span>  buf[4] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1547</span> </div>
<div class="line"><span class="lineno"> 1548</span>  <span class="keywordflow">if</span> (istext)</div>
<div class="line"><span class="lineno"> 1549</span>    <a class="code hl_define" href="mutt_2state_8h.html#a0f20589a346d8b214575ba401aa29015">state_set_prefix</a>(state);</div>
<div class="line"><span class="lineno"> 1550</span> </div>
<div class="line"><span class="lineno"> 1551</span>  <span class="keywordflow">while</span> (len &gt; 0)</div>
<div class="line"><span class="lineno"> 1552</span>  {</div>
<div class="line"><span class="lineno"> 1553</span>    <span class="keywordflow">for</span> (i = 0; (i &lt; 4) &amp;&amp; (len &gt; 0); len--)</div>
<div class="line"><span class="lineno"> 1554</span>    {</div>
<div class="line"><span class="lineno"> 1555</span>      ch = fgetc(state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>);</div>
<div class="line"><span class="lineno"> 1556</span>      <span class="keywordflow">if</span> (ch == EOF)</div>
<div class="line"><span class="lineno"> 1557</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1558</span>      <span class="keywordflow">if</span> ((ch &gt;= 0) &amp;&amp; (ch &lt; 128) &amp;&amp; ((<a class="code hl_define" href="base64_8h.html#a7d7ae4dd0a9d6cbb528295fb24b91a9d">base64val</a>(ch) != -1) || (ch == <span class="charliteral">&#39;=&#39;</span>)))</div>
<div class="line"><span class="lineno"> 1559</span>        buf[i++] = ch;</div>
<div class="line"><span class="lineno"> 1560</span>    }</div>
<div class="line"><span class="lineno"> 1561</span>    <span class="keywordflow">if</span> (i != 4)</div>
<div class="line"><span class="lineno"> 1562</span>    {</div>
<div class="line"><span class="lineno"> 1563</span>      <span class="comment">/* &quot;i&quot; may be zero if there is trailing whitespace, which is not an error */</span></div>
<div class="line"><span class="lineno"> 1564</span>      <span class="keywordflow">if</span> (i != 0)</div>
<div class="line"><span class="lineno"> 1565</span>        <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;didn&#39;t get a multiple of 4 chars\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1566</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1567</span>    }</div>
<div class="line"><span class="lineno"> 1568</span> </div>
<div class="line"><span class="lineno"> 1569</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> c1 = <a class="code hl_define" href="base64_8h.html#a7d7ae4dd0a9d6cbb528295fb24b91a9d">base64val</a>(buf[0]);</div>
<div class="line"><span class="lineno"> 1570</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> c2 = <a class="code hl_define" href="base64_8h.html#a7d7ae4dd0a9d6cbb528295fb24b91a9d">base64val</a>(buf[1]);</div>
<div class="line"><span class="lineno"> 1571</span> </div>
<div class="line"><span class="lineno"> 1572</span>    <span class="comment">/* first char */</span></div>
<div class="line"><span class="lineno"> 1573</span>    ch = (c1 &lt;&lt; 2) | (c2 &gt;&gt; 4);</div>
<div class="line"><span class="lineno"> 1574</span> </div>
<div class="line"><span class="lineno"> 1575</span>    <span class="keywordflow">if</span> (cr &amp;&amp; (ch != <span class="charliteral">&#39;\n&#39;</span>))</div>
<div class="line"><span class="lineno"> 1576</span>      bufi[l++] = <span class="charliteral">&#39;\r&#39;</span>;</div>
<div class="line"><span class="lineno"> 1577</span> </div>
<div class="line"><span class="lineno"> 1578</span>    cr = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1579</span> </div>
<div class="line"><span class="lineno"> 1580</span>    <span class="keywordflow">if</span> (istext &amp;&amp; (ch == <span class="charliteral">&#39;\r&#39;</span>))</div>
<div class="line"><span class="lineno"> 1581</span>      cr = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1582</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1583</span>      bufi[l++] = ch;</div>
<div class="line"><span class="lineno"> 1584</span> </div>
<div class="line"><span class="lineno"> 1585</span>    <span class="comment">/* second char */</span></div>
<div class="line"><span class="lineno"> 1586</span>    <span class="keywordflow">if</span> (buf[2] == <span class="charliteral">&#39;=&#39;</span>)</div>
<div class="line"><span class="lineno"> 1587</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1588</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> c3 = <a class="code hl_define" href="base64_8h.html#a7d7ae4dd0a9d6cbb528295fb24b91a9d">base64val</a>(buf[2]);</div>
<div class="line"><span class="lineno"> 1589</span>    ch = ((c2 &amp; 0xf) &lt;&lt; 4) | (c3 &gt;&gt; 2);</div>
<div class="line"><span class="lineno"> 1590</span> </div>
<div class="line"><span class="lineno"> 1591</span>    <span class="keywordflow">if</span> (cr &amp;&amp; (ch != <span class="charliteral">&#39;\n&#39;</span>))</div>
<div class="line"><span class="lineno"> 1592</span>      bufi[l++] = <span class="charliteral">&#39;\r&#39;</span>;</div>
<div class="line"><span class="lineno"> 1593</span> </div>
<div class="line"><span class="lineno"> 1594</span>    cr = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1595</span> </div>
<div class="line"><span class="lineno"> 1596</span>    <span class="keywordflow">if</span> (istext &amp;&amp; (ch == <span class="charliteral">&#39;\r&#39;</span>))</div>
<div class="line"><span class="lineno"> 1597</span>      cr = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1598</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1599</span>      bufi[l++] = ch;</div>
<div class="line"><span class="lineno"> 1600</span> </div>
<div class="line"><span class="lineno"> 1601</span>    <span class="comment">/* third char */</span></div>
<div class="line"><span class="lineno"> 1602</span>    <span class="keywordflow">if</span> (buf[3] == <span class="charliteral">&#39;=&#39;</span>)</div>
<div class="line"><span class="lineno"> 1603</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1604</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> c4 = <a class="code hl_define" href="base64_8h.html#a7d7ae4dd0a9d6cbb528295fb24b91a9d">base64val</a>(buf[3]);</div>
<div class="line"><span class="lineno"> 1605</span>    ch = ((c3 &amp; 0x3) &lt;&lt; 6) | c4;</div>
<div class="line"><span class="lineno"> 1606</span> </div>
<div class="line"><span class="lineno"> 1607</span>    <span class="keywordflow">if</span> (cr &amp;&amp; (ch != <span class="charliteral">&#39;\n&#39;</span>))</div>
<div class="line"><span class="lineno"> 1608</span>      bufi[l++] = <span class="charliteral">&#39;\r&#39;</span>;</div>
<div class="line"><span class="lineno"> 1609</span> </div>
<div class="line"><span class="lineno"> 1610</span>    cr = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1611</span> </div>
<div class="line"><span class="lineno"> 1612</span>    <span class="keywordflow">if</span> (istext &amp;&amp; (ch == <span class="charliteral">&#39;\r&#39;</span>))</div>
<div class="line"><span class="lineno"> 1613</span>      cr = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1614</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1615</span>      bufi[l++] = ch;</div>
<div class="line"><span class="lineno"> 1616</span> </div>
<div class="line"><span class="lineno"> 1617</span>    <span class="keywordflow">if</span> ((l + 8) &gt;= <span class="keyword">sizeof</span>(bufi))</div>
<div class="line"><span class="lineno"> 1618</span>      <a class="code hl_function" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a>(cd, bufi, &amp;l, state);</div>
<div class="line"><span class="lineno"> 1619</span>  }</div>
<div class="line"><span class="lineno"> 1620</span> </div>
<div class="line"><span class="lineno"> 1621</span>  <span class="keywordflow">if</span> (cr)</div>
<div class="line"><span class="lineno"> 1622</span>    bufi[l++] = <span class="charliteral">&#39;\r&#39;</span>;</div>
<div class="line"><span class="lineno"> 1623</span> </div>
<div class="line"><span class="lineno"> 1624</span>  <a class="code hl_function" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a>(cd, bufi, &amp;l, state);</div>
<div class="line"><span class="lineno"> 1625</span>  <a class="code hl_function" href="#a3bb2ea87bd5c2324f5e7aea78609ad2b">convert_to_state</a>(cd, 0, 0, state);</div>
<div class="line"><span class="lineno"> 1626</span> </div>
<div class="line"><span class="lineno"> 1627</span>  <a class="code hl_define" href="mutt_2state_8h.html#a4437cf67431f33cd4497b5a8c276decd">state_reset_prefix</a>(state);</div>
<div class="line"><span class="lineno"> 1628</span>}</div>
<div class="ttc" id="abase64_8h_html_a7d7ae4dd0a9d6cbb528295fb24b91a9d"><div class="ttname"><a href="base64_8h.html#a7d7ae4dd0a9d6cbb528295fb24b91a9d">base64val</a></div><div class="ttdeci">#define base64val(ch)</div><div class="ttdef"><b>Definition</b> <a href="base64_8h_source.html#l00032">base64.h:32</a></div></div>
<div class="ttc" id="alogging2_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3"><div class="ttname"><a href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a></div><div class="ttdeci">@ LL_DEBUG2</div><div class="ttdoc">Log at debug level 2.</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00046">logging2.h:46</a></div></div>
</div><!-- fragment --><div id="dynsection-22" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a7834668eb7e41062c0d6aa80589de5be_cgraph.svg" width="339" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-23" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a7834668eb7e41062c0d6aa80589de5be_icgraph.svg" width="394" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3e520d3004995a6c0cf0696edfd209fb" name="a3e520d3004995a6c0cf0696edfd209fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e520d3004995a6c0cf0696edfd209fb">&#9670;&#160;</a></span>mutt_body_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_body_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structState.html">State</a> *</td>          <td class="paramname"><span class="paramname"><em>state</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handler for the <a class="el" href="structBody.html" title="The body of an email.">Body</a> of an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> of the email </td></tr>
    <tr><td class="paramname">state</td><td><a class="el" href="structState.html" title="Keep track when processing files.">State</a> to work with </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l01637">1637</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1638</span>{</div>
<div class="line"><span class="lineno"> 1639</span>  <span class="keywordflow">if</span> (!b || !state)</div>
<div class="line"><span class="lineno"> 1640</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1641</span> </div>
<div class="line"><span class="lineno"> 1642</span>  <span class="keywordtype">bool</span> plaintext = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1643</span>  <a class="code hl_typedef" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> handler = NULL;</div>
<div class="line"><span class="lineno"> 1644</span>  <a class="code hl_typedef" href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a> encrypted_handler = NULL;</div>
<div class="line"><span class="lineno"> 1645</span>  <span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><span class="lineno"> 1646</span>  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> recurse_level = 0;</div>
<div class="line"><span class="lineno"> 1647</span> </div>
<div class="line"><span class="lineno"> 1648</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> oflags = state-&gt;<a class="code hl_variable" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a>;</div>
<div class="line"><span class="lineno"> 1649</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> is_attachment_display = (oflags &amp; <a class="code hl_define" href="mutt_2state_8h.html#a3171fa8309d985818811324b9f865934">STATE_DISPLAY_ATTACH</a>);</div>
<div class="line"><span class="lineno"> 1650</span> </div>
<div class="line"><span class="lineno"> 1651</span>  <span class="keywordflow">if</span> (recurse_level &gt;= <a class="code hl_define" href="mime_8h.html#a37d78827e3cbfabf93b6341b5da8cdc1">MUTT_MIME_MAX_DEPTH</a>)</div>
<div class="line"><span class="lineno"> 1652</span>  {</div>
<div class="line"><span class="lineno"> 1653</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;recurse level too deep. giving up\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1654</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1655</span>  }</div>
<div class="line"><span class="lineno"> 1656</span>  recurse_level++;</div>
<div class="line"><span class="lineno"> 1657</span> </div>
<div class="line"><span class="lineno"> 1658</span>  <span class="comment">/* first determine which handler to use to process this part */</span></div>
<div class="line"><span class="lineno"> 1659</span> </div>
<div class="line"><span class="lineno"> 1660</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="#a09f27e2821153040ea4cad0b9ade6153">is_autoview</a>(b))</div>
<div class="line"><span class="lineno"> 1661</span>  {</div>
<div class="line"><span class="lineno"> 1662</span>    handler = <a class="code hl_function" href="group__handler__api.html#ga6d9d9125a5e89f59e0bdc7dfe1da915f">autoview_handler</a>;</div>
<div class="line"><span class="lineno"> 1663</span>    state-&gt;<a class="code hl_variable" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> &amp;= <a class="code hl_define" href="mutt_2state_8h.html#abff873a2f7f4f3e664c8c4f90a11f44a">~STATE_CHARCONV</a>;</div>
<div class="line"><span class="lineno"> 1664</span>  }</div>
<div class="line"><span class="lineno"> 1665</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167">TYPE_TEXT</a>)</div>
<div class="line"><span class="lineno"> 1666</span>  {</div>
<div class="line"><span class="lineno"> 1667</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(<span class="stringliteral">&quot;plain&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>))</div>
<div class="line"><span class="lineno"> 1668</span>    {</div>
<div class="line"><span class="lineno"> 1669</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_reflow_text = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;reflow_text&quot;</span>);</div>
<div class="line"><span class="lineno"> 1670</span>      <span class="comment">/* avoid copying this part twice since removing the transfer-encoding is</span></div>
<div class="line"><span class="lineno"> 1671</span><span class="comment">       * the only operation needed.  */</span></div>
<div class="line"><span class="lineno"> 1672</span>      <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; <a class="code hl_function" href="crypt_8c.html#ad5ae8b8d4fea0b6aa61dc38312e99d15">mutt_is_application_pgp</a>(b))</div>
<div class="line"><span class="lineno"> 1673</span>      {</div>
<div class="line"><span class="lineno"> 1674</span>        encrypted_handler = <a class="code hl_function" href="group__handler__api.html#ga2de61c155f3d4ff8b010e2e4f615ea94">crypt_pgp_application_handler</a>;</div>
<div class="line"><span class="lineno"> 1675</span>        handler = encrypted_handler;</div>
<div class="line"><span class="lineno"> 1676</span>      }</div>
<div class="line"><span class="lineno"> 1677</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c_reflow_text &amp;&amp;</div>
<div class="line"><span class="lineno"> 1678</span>               <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(<span class="stringliteral">&quot;flowed&quot;</span>, <a class="code hl_function" href="parameter_8c.html#a31d10561ad6b3637e7591569b903aa33">mutt_param_get</a>(&amp;b-&gt;<a class="code hl_variable" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>, <span class="stringliteral">&quot;format&quot;</span>)))</div>
<div class="line"><span class="lineno"> 1679</span>      {</div>
<div class="line"><span class="lineno"> 1680</span>        handler = <a class="code hl_function" href="group__handler__api.html#gaadbb7eb9de333071b51c4ff88b45315b">rfc3676_handler</a>;</div>
<div class="line"><span class="lineno"> 1681</span>      }</div>
<div class="line"><span class="lineno"> 1682</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1683</span>      {</div>
<div class="line"><span class="lineno"> 1684</span>        handler = <a class="code hl_function" href="group__handler__api.html#ga5552ea70deb1b5c9d5eed357948915d6">text_plain_handler</a>;</div>
<div class="line"><span class="lineno"> 1685</span>      }</div>
<div class="line"><span class="lineno"> 1686</span>    }</div>
<div class="line"><span class="lineno"> 1687</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(<span class="stringliteral">&quot;enriched&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>))</div>
<div class="line"><span class="lineno"> 1688</span>    {</div>
<div class="line"><span class="lineno"> 1689</span>      handler = <a class="code hl_function" href="group__handler__api.html#ga52988b26b8120b105355accebe501bee">text_enriched_handler</a>;</div>
<div class="line"><span class="lineno"> 1690</span>    }</div>
<div class="line"><span class="lineno"> 1691</span>    <span class="keywordflow">else</span> <span class="comment">/* text body type without a handler */</span></div>
<div class="line"><span class="lineno"> 1692</span>    {</div>
<div class="line"><span class="lineno"> 1693</span>      plaintext = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1694</span>    }</div>
<div class="line"><span class="lineno"> 1695</span>  }</div>
<div class="line"><span class="lineno"> 1696</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a2cbb8dddd761b8bfba754d933a979c1b">TYPE_MESSAGE</a>)</div>
<div class="line"><span class="lineno"> 1697</span>  {</div>
<div class="line"><span class="lineno"> 1698</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="email_2parse_8c.html#adcc90fb584fec1be116777c533e9b3d4">mutt_is_message_type</a>(b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a>, b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>))</div>
<div class="line"><span class="lineno"> 1699</span>      handler = <a class="code hl_function" href="group__handler__api.html#gabb6e3be5f79882648b38690c851c6587">message_handler</a>;</div>
<div class="line"><span class="lineno"> 1700</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(<span class="stringliteral">&quot;delivery-status&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>))</div>
<div class="line"><span class="lineno"> 1701</span>      plaintext = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1702</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(<span class="stringliteral">&quot;external-body&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>))</div>
<div class="line"><span class="lineno"> 1703</span>      handler = <a class="code hl_function" href="group__handler__api.html#ga8a838ae7b50e8ffa147203c5cfaa3272">external_body_handler</a>;</div>
<div class="line"><span class="lineno"> 1704</span>  }</div>
<div class="line"><span class="lineno"> 1705</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)</div>
<div class="line"><span class="lineno"> 1706</span>  {</div>
<div class="line"><span class="lineno"> 1707</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_show_multipart_alternative = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;show_multipart_alternative&quot;</span>);</div>
<div class="line"><span class="lineno"> 1708</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(<span class="stringliteral">&quot;inline&quot;</span>, c_show_multipart_alternative) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1709</span>        <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(<span class="stringliteral">&quot;alternative&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>))</div>
<div class="line"><span class="lineno"> 1710</span>    {</div>
<div class="line"><span class="lineno"> 1711</span>      handler = <a class="code hl_function" href="group__handler__api.html#ga4ff5374eaa24ed80f864aa4caeb54a46">alternative_handler</a>;</div>
<div class="line"><span class="lineno"> 1712</span>    }</div>
<div class="line"><span class="lineno"> 1713</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(<span class="stringliteral">&quot;inline&quot;</span>, c_show_multipart_alternative) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1714</span>             <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(<span class="stringliteral">&quot;multilingual&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>))</div>
<div class="line"><span class="lineno"> 1715</span>    {</div>
<div class="line"><span class="lineno"> 1716</span>      handler = <a class="code hl_function" href="group__handler__api.html#gad678bde50d3eb6367c65e9ed646939bc">multilingual_handler</a>;</div>
<div class="line"><span class="lineno"> 1717</span>    }</div>
<div class="line"><span class="lineno"> 1718</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(<span class="stringliteral">&quot;signed&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>))</div>
<div class="line"><span class="lineno"> 1719</span>    {</div>
<div class="line"><span class="lineno"> 1720</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="parameter_8c.html#a31d10561ad6b3637e7591569b903aa33">mutt_param_get</a>(&amp;b-&gt;<a class="code hl_variable" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>, <span class="stringliteral">&quot;protocol&quot;</span>))</div>
<div class="line"><span class="lineno"> 1721</span>        <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error: multipart/signed has no protocol&quot;</span>));</div>
<div class="line"><span class="lineno"> 1722</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state-&gt;<a class="code hl_variable" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> &amp; <a class="code hl_define" href="mutt_2state_8h.html#abfcaf3ae3b8541263634aec97ee65aeb">STATE_VERIFY</a>)</div>
<div class="line"><span class="lineno"> 1723</span>        handler = <a class="code hl_function" href="group__handler__api.html#gad8f7563b8c9aba96de145d0e17e58437">mutt_signed_handler</a>;</div>
<div class="line"><span class="lineno"> 1724</span>    }</div>
<div class="line"><span class="lineno"> 1725</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="crypt_8c.html#a51806f872069460bb7f4fa16d1d92710">mutt_is_valid_multipart_pgp_encrypted</a>(b))</div>
<div class="line"><span class="lineno"> 1726</span>    {</div>
<div class="line"><span class="lineno"> 1727</span>      encrypted_handler = <a class="code hl_function" href="group__handler__api.html#gaaef1af1685b1d85753ac8ab8c1fc9339">valid_pgp_encrypted_handler</a>;</div>
<div class="line"><span class="lineno"> 1728</span>      handler = encrypted_handler;</div>
<div class="line"><span class="lineno"> 1729</span>    }</div>
<div class="line"><span class="lineno"> 1730</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="crypt_8c.html#a9edb0262eaed7c522977a75b76c15770">mutt_is_malformed_multipart_pgp_encrypted</a>(b))</div>
<div class="line"><span class="lineno"> 1731</span>    {</div>
<div class="line"><span class="lineno"> 1732</span>      encrypted_handler = <a class="code hl_function" href="group__handler__api.html#gaadf7c637f58f34e7a58ac5b2c2b0f42f">malformed_pgp_encrypted_handler</a>;</div>
<div class="line"><span class="lineno"> 1733</span>      handler = encrypted_handler;</div>
<div class="line"><span class="lineno"> 1734</span>    }</div>
<div class="line"><span class="lineno"> 1735</span> </div>
<div class="line"><span class="lineno"> 1736</span>    <span class="keywordflow">if</span> (!handler)</div>
<div class="line"><span class="lineno"> 1737</span>      handler = <a class="code hl_function" href="group__handler__api.html#gac1b8e821ab05eee2180e82f0ae4c7421">multipart_handler</a>;</div>
<div class="line"><span class="lineno"> 1738</span> </div>
<div class="line"><span class="lineno"> 1739</span>    <span class="keywordflow">if</span> ((b-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> != <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a0bc13f416d890a95b7d7e7c77b155f8e">ENC_7BIT</a>) &amp;&amp; (b-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> != <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a7c05065f79f9ed33904677a211ec3466">ENC_8BIT</a>) &amp;&amp; (b-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> != <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a33a486b063e032293f7615de05f3cfa8">ENC_BINARY</a>))</div>
<div class="line"><span class="lineno"> 1740</span>    {</div>
<div class="line"><span class="lineno"> 1741</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Bad encoding type %d for multipart entity, assuming 7 bit\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1742</span>                 b-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a>);</div>
<div class="line"><span class="lineno"> 1743</span>      b-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a> = <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a0bc13f416d890a95b7d7e7c77b155f8e">ENC_7BIT</a>;</div>
<div class="line"><span class="lineno"> 1744</span>    }</div>
<div class="line"><span class="lineno"> 1745</span>  }</div>
<div class="line"><span class="lineno"> 1746</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; (b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e">TYPE_APPLICATION</a>))</div>
<div class="line"><span class="lineno"> 1747</span>  {</div>
<div class="line"><span class="lineno"> 1748</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#a06fbffcecad5ed6656ea2948927b26b8">OptDontHandlePgpKeys</a> &amp;&amp; <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(<span class="stringliteral">&quot;pgp-keys&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>))</div>
<div class="line"><span class="lineno"> 1749</span>    {</div>
<div class="line"><span class="lineno"> 1750</span>      <span class="comment">/* pass raw part through for key extraction */</span></div>
<div class="line"><span class="lineno"> 1751</span>      plaintext = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1752</span>    }</div>
<div class="line"><span class="lineno"> 1753</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; <a class="code hl_function" href="crypt_8c.html#ad5ae8b8d4fea0b6aa61dc38312e99d15">mutt_is_application_pgp</a>(b))</div>
<div class="line"><span class="lineno"> 1754</span>    {</div>
<div class="line"><span class="lineno"> 1755</span>      encrypted_handler = <a class="code hl_function" href="group__handler__api.html#ga2de61c155f3d4ff8b010e2e4f615ea94">crypt_pgp_application_handler</a>;</div>
<div class="line"><span class="lineno"> 1756</span>      handler = encrypted_handler;</div>
<div class="line"><span class="lineno"> 1757</span>    }</div>
<div class="line"><span class="lineno"> 1758</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>) != 0) &amp;&amp; <a class="code hl_function" href="crypt_8c.html#a4073ce5b5fcec6e245dbfa9369016b8e">mutt_is_application_smime</a>(b))</div>
<div class="line"><span class="lineno"> 1759</span>    {</div>
<div class="line"><span class="lineno"> 1760</span>      encrypted_handler = <a class="code hl_function" href="group__handler__api.html#ga570796cc91abc82fbc16bcd285137688">crypt_smime_application_handler</a>;</div>
<div class="line"><span class="lineno"> 1761</span>      handler = encrypted_handler;</div>
<div class="line"><span class="lineno"> 1762</span>    }</div>
<div class="line"><span class="lineno"> 1763</span>  }</div>
<div class="line"><span class="lineno"> 1764</span> </div>
<div class="line"><span class="lineno"> 1765</span>  <span class="keywordflow">if</span> ((plaintext || handler) &amp;&amp; (is_attachment_display || !<a class="code hl_function" href="#a0f1d59623c3dea670f7f5b4c17bf24a8">mutt_prefer_as_attachment</a>(b)))</div>
<div class="line"><span class="lineno"> 1766</span>  {</div>
<div class="line"><span class="lineno"> 1767</span>    <span class="comment">/* only respect disposition == attachment if we&#39;re not</span></div>
<div class="line"><span class="lineno"> 1768</span><span class="comment">     * displaying from the attachment menu (i.e. pager) */</span></div>
<div class="line"><span class="lineno"> 1769</span>    <span class="comment">/* Prevent encrypted attachments from being included in replies</span></div>
<div class="line"><span class="lineno"> 1770</span><span class="comment">     * unless $include_encrypted is set. */</span></div>
<div class="line"><span class="lineno"> 1771</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_include_encrypted = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;include_encrypted&quot;</span>);</div>
<div class="line"><span class="lineno"> 1772</span>    <span class="keywordflow">if</span> ((state-&gt;<a class="code hl_variable" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> &amp; <a class="code hl_define" href="mutt_2state_8h.html#a77951e3f170a44a6e89c2261a6cf0f75">STATE_REPLYING</a>) &amp;&amp; (state-&gt;<a class="code hl_variable" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> &amp; <a class="code hl_define" href="mutt_2state_8h.html#a3747adb496e21b20abbcf8d3b1db92ce">STATE_FIRSTDONE</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1773</span>        encrypted_handler &amp;&amp; !c_include_encrypted)</div>
<div class="line"><span class="lineno"> 1774</span>    {</div>
<div class="line"><span class="lineno"> 1775</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 1776</span>    }</div>
<div class="line"><span class="lineno"> 1777</span> </div>
<div class="line"><span class="lineno"> 1778</span>    rc = <a class="code hl_function" href="#a88df4ca81c59bfc2464df374863edfd9">run_decode_and_handler</a>(b, state, handler, plaintext);</div>
<div class="line"><span class="lineno"> 1779</span>  }</div>
<div class="line"><span class="lineno"> 1780</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state-&gt;<a class="code hl_variable" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> &amp; <a class="code hl_define" href="mutt_2state_8h.html#a2a4ce653367a744f47960bc30b42f3a7">STATE_DISPLAY</a>)</div>
<div class="line"><span class="lineno"> 1781</span>  {</div>
<div class="line"><span class="lineno"> 1782</span>    <span class="comment">/* print hint to use attachment menu for disposition == attachment</span></div>
<div class="line"><span class="lineno"> 1783</span><span class="comment">     * if we&#39;re not already being called from there */</span></div>
<div class="line"><span class="lineno"> 1784</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_honor_disposition = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;honor_disposition&quot;</span>);</div>
<div class="line"><span class="lineno"> 1785</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *msg = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1786</span> </div>
<div class="line"><span class="lineno"> 1787</span>    <span class="keywordflow">if</span> (is_attachment_display)</div>
<div class="line"><span class="lineno"> 1788</span>    {</div>
<div class="line"><span class="lineno"> 1789</span>      <span class="keywordflow">if</span> (c_honor_disposition &amp;&amp; (b-&gt;<a class="code hl_variable" href="structBody.html#a99aff302b287a47c407a7412a99630f5">disposition</a> == <a class="code hl_enumvalue" href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a3c5d26739343bc8cc2934a4dee403417">DISP_ATTACH</a>))</div>
<div class="line"><span class="lineno"> 1790</span>      {</div>
<div class="line"><span class="lineno"> 1791</span>        <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(msg, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;[-- This is an attachment --]\n&quot;</span>));</div>
<div class="line"><span class="lineno"> 1792</span>      }</div>
<div class="line"><span class="lineno"> 1793</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1794</span>      {</div>
<div class="line"><span class="lineno"> 1795</span>        <span class="comment">/* L10N: %s/%s is a MIME type, e.g. &quot;text/plain&quot;. */</span></div>
<div class="line"><span class="lineno"> 1796</span>        <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(msg, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;[-- %s/%s is unsupported --]\n&quot;</span>), <a class="code hl_define" href="mime_8h.html#a3e568918dd102d7bfd39661c82ff6c3f">BODY_TYPE</a>(b), b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>);</div>
<div class="line"><span class="lineno"> 1797</span>      }</div>
<div class="line"><span class="lineno"> 1798</span>    }</div>
<div class="line"><span class="lineno"> 1799</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1800</span>    {</div>
<div class="line"><span class="lineno"> 1801</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *keystroke = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1802</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="key_2keymap_8c.html#a7c5f5998482b8ee8d7ef92724c559877">keymap_expand_key</a>(<a class="code hl_function" href="key_2menu_8c.html#a11136cc3c6e52a9a3db85d1887f4fe1c">km_find_func</a>(<a class="code hl_enumvalue" href="type_8h.html#ae5c7b6b4f6e696391cd7faaea6571bb4ad2dbad14a5308b356d33192607ee4929">MENU_PAGER</a>, OP_VIEW_ATTACHMENTS), keystroke))</div>
<div class="line"><span class="lineno"> 1803</span>      {</div>
<div class="line"><span class="lineno"> 1804</span>        <span class="keywordflow">if</span> (c_honor_disposition &amp;&amp; (b-&gt;<a class="code hl_variable" href="structBody.html#a99aff302b287a47c407a7412a99630f5">disposition</a> == <a class="code hl_enumvalue" href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a3c5d26739343bc8cc2934a4dee403417">DISP_ATTACH</a>))</div>
<div class="line"><span class="lineno"> 1805</span>        {</div>
<div class="line"><span class="lineno"> 1806</span>          <span class="comment">/* L10N: %s expands to a keystroke/key binding, e.g. &#39;v&#39;.  */</span></div>
<div class="line"><span class="lineno"> 1807</span>          <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(msg, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;[-- This is an attachment (use &#39;%s&#39; to view this part) --]\n&quot;</span>),</div>
<div class="line"><span class="lineno"> 1808</span>                     <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(keystroke));</div>
<div class="line"><span class="lineno"> 1809</span>        }</div>
<div class="line"><span class="lineno"> 1810</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1811</span>        {</div>
<div class="line"><span class="lineno"> 1812</span>          <span class="comment">/* L10N: %s/%s is a MIME type, e.g. &quot;text/plain&quot;.</span></div>
<div class="line"><span class="lineno"> 1813</span><span class="comment">             The last %s expands to a keystroke/key binding, e.g. &#39;v&#39;. */</span></div>
<div class="line"><span class="lineno"> 1814</span>          <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(msg, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;[-- %s/%s is unsupported (use &#39;%s&#39; to view this part) --]\n&quot;</span>),</div>
<div class="line"><span class="lineno"> 1815</span>                     <a class="code hl_define" href="mime_8h.html#a3e568918dd102d7bfd39661c82ff6c3f">BODY_TYPE</a>(b), b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(keystroke));</div>
<div class="line"><span class="lineno"> 1816</span>        }</div>
<div class="line"><span class="lineno"> 1817</span>      }</div>
<div class="line"><span class="lineno"> 1818</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1819</span>      {</div>
<div class="line"><span class="lineno"> 1820</span>        <span class="keywordflow">if</span> (c_honor_disposition &amp;&amp; (b-&gt;<a class="code hl_variable" href="structBody.html#a99aff302b287a47c407a7412a99630f5">disposition</a> == <a class="code hl_enumvalue" href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a3c5d26739343bc8cc2934a4dee403417">DISP_ATTACH</a>))</div>
<div class="line"><span class="lineno"> 1821</span>        {</div>
<div class="line"><span class="lineno"> 1822</span>          <a class="code hl_function" href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a>(msg, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;[-- This is an attachment (need &#39;view-attachments&#39; bound to key) --]\n&quot;</span>));</div>
<div class="line"><span class="lineno"> 1823</span>        }</div>
<div class="line"><span class="lineno"> 1824</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1825</span>        {</div>
<div class="line"><span class="lineno"> 1826</span>          <span class="comment">/* L10N: %s/%s is a MIME type, e.g. &quot;text/plain&quot;. */</span></div>
<div class="line"><span class="lineno"> 1827</span>          <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(msg, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;[-- %s/%s is unsupported (need &#39;view-attachments&#39; bound to key) --]\n&quot;</span>),</div>
<div class="line"><span class="lineno"> 1828</span>                     <a class="code hl_define" href="mime_8h.html#a3e568918dd102d7bfd39661c82ff6c3f">BODY_TYPE</a>(b), b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>);</div>
<div class="line"><span class="lineno"> 1829</span>        }</div>
<div class="line"><span class="lineno"> 1830</span>      }</div>
<div class="line"><span class="lineno"> 1831</span>      <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;keystroke);</div>
<div class="line"><span class="lineno"> 1832</span>    }</div>
<div class="line"><span class="lineno"> 1833</span>    <a class="code hl_function" href="mutt_2state_8c.html#a549e8896ba39ea5006be8905349a6782">state_mark_attach</a>(state);</div>
<div class="line"><span class="lineno"> 1834</span>    <a class="code hl_function" href="mutt_2state_8c.html#a7566d1f9e015cd673fd8744bf5ad2f06">state_printf</a>(state, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(msg));</div>
<div class="line"><span class="lineno"> 1835</span>    <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;msg);</div>
<div class="line"><span class="lineno"> 1836</span>  }</div>
<div class="line"><span class="lineno"> 1837</span> </div>
<div class="line"><span class="lineno"> 1838</span>cleanup:</div>
<div class="line"><span class="lineno"> 1839</span>  recurse_level--;</div>
<div class="line"><span class="lineno"> 1840</span>  state-&gt;<a class="code hl_variable" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> = oflags | (state-&gt;<a class="code hl_variable" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> &amp; <a class="code hl_define" href="mutt_2state_8h.html#a3747adb496e21b20abbcf8d3b1db92ce">STATE_FIRSTDONE</a>);</div>
<div class="line"><span class="lineno"> 1841</span>  <span class="keywordflow">if</span> (rc != 0)</div>
<div class="line"><span class="lineno"> 1842</span>  {</div>
<div class="line"><span class="lineno"> 1843</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Bailing on attachment of type %s/%s\n&quot;</span>, <a class="code hl_define" href="mime_8h.html#a3e568918dd102d7bfd39661c82ff6c3f">BODY_TYPE</a>(b),</div>
<div class="line"><span class="lineno"> 1844</span>               <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>));</div>
<div class="line"><span class="lineno"> 1845</span>  }</div>
<div class="line"><span class="lineno"> 1846</span> </div>
<div class="line"><span class="lineno"> 1847</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1848</span>}</div>
<div class="ttc" id="abuffer_8c_html_a02123807d31181ac701b566226e93b33"><div class="ttname"><a href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a></div><div class="ttdeci">int buf_printf(struct Buffer *buf, const char *fmt,...)</div><div class="ttdoc">Format a string overwriting a Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00161">buffer.c:161</a></div></div>
<div class="ttc" id="abuffer_8c_html_ac958acbd189e463a2c3bbc2f23aaeb1e"><div class="ttname"><a href="buffer_8c.html#ac958acbd189e463a2c3bbc2f23aaeb1e">buf_strcpy</a></div><div class="ttdeci">size_t buf_strcpy(struct Buffer *buf, const char *s)</div><div class="ttdoc">Copy a string into a Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00395">buffer.c:395</a></div></div>
<div class="ttc" id="aconfig_2helpers_8c_html_a6b1589ee93ff51ef31f1d9324e138078"><div class="ttname"><a href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a></div><div class="ttdeci">const char * cs_subset_string(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00291">helpers.c:291</a></div></div>
<div class="ttc" id="acrypt_8c_html_a4073ce5b5fcec6e245dbfa9369016b8e"><div class="ttname"><a href="crypt_8c.html#a4073ce5b5fcec6e245dbfa9369016b8e">mutt_is_application_smime</a></div><div class="ttdeci">SecurityFlags mutt_is_application_smime(struct Body *b)</div><div class="ttdoc">Does the message use S/MIME?</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l00609">crypt.c:609</a></div></div>
<div class="ttc" id="acrypt_8c_html_a51806f872069460bb7f4fa16d1d92710"><div class="ttname"><a href="crypt_8c.html#a51806f872069460bb7f4fa16d1d92710">mutt_is_valid_multipart_pgp_encrypted</a></div><div class="ttdeci">int mutt_is_valid_multipart_pgp_encrypted(struct Body *b)</div><div class="ttdoc">Is this a valid multi-part encrypted message?</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l00467">crypt.c:467</a></div></div>
<div class="ttc" id="acrypt_8c_html_a9edb0262eaed7c522977a75b76c15770"><div class="ttname"><a href="crypt_8c.html#a9edb0262eaed7c522977a75b76c15770">mutt_is_malformed_multipart_pgp_encrypted</a></div><div class="ttdeci">SecurityFlags mutt_is_malformed_multipart_pgp_encrypted(struct Body *b)</div><div class="ttdoc">Check for malformed layout.</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l00504">crypt.c:504</a></div></div>
<div class="ttc" id="acrypt_8c_html_ad5ae8b8d4fea0b6aa61dc38312e99d15"><div class="ttname"><a href="crypt_8c.html#ad5ae8b8d4fea0b6aa61dc38312e99d15">mutt_is_application_pgp</a></div><div class="ttdeci">SecurityFlags mutt_is_application_pgp(const struct Body *b)</div><div class="ttdoc">Does the message use PGP?</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l00548">crypt.c:548</a></div></div>
<div class="ttc" id="aemail_2parse_8c_html_adcc90fb584fec1be116777c533e9b3d4"><div class="ttname"><a href="email_2parse_8c.html#adcc90fb584fec1be116777c533e9b3d4">mutt_is_message_type</a></div><div class="ttdeci">bool mutt_is_message_type(int type, const char *subtype)</div><div class="ttdoc">Determine if a mime type matches a message or not.</div><div class="ttdef"><b>Definition</b> <a href="email_2parse_8c_source.html#l01498">parse.c:1498</a></div></div>
<div class="ttc" id="aglobals_8c_html_a06fbffcecad5ed6656ea2948927b26b8"><div class="ttname"><a href="globals_8c.html#a06fbffcecad5ed6656ea2948927b26b8">OptDontHandlePgpKeys</a></div><div class="ttdeci">bool OptDontHandlePgpKeys</div><div class="ttdoc">(pseudo) used to extract PGP keys</div><div class="ttdef"><b>Definition</b> <a href="globals_8c_source.html#l00057">globals.c:57</a></div></div>
<div class="ttc" id="agroup__handler__api_html_ga2de61c155f3d4ff8b010e2e4f615ea94"><div class="ttname"><a href="group__handler__api.html#ga2de61c155f3d4ff8b010e2e4f615ea94">crypt_pgp_application_handler</a></div><div class="ttdeci">int crypt_pgp_application_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Wrapper for CryptModuleSpecs::application_handler() - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="cryptglue_8c_source.html#l00236">cryptglue.c:236</a></div></div>
<div class="ttc" id="agroup__handler__api_html_ga4ff5374eaa24ed80f864aa4caeb54a46"><div class="ttname"><a href="group__handler__api.html#ga4ff5374eaa24ed80f864aa4caeb54a46">alternative_handler</a></div><div class="ttdeci">static int alternative_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for multipart alternative emails - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00947">handler.c:947</a></div></div>
<div class="ttc" id="agroup__handler__api_html_ga52988b26b8120b105355accebe501bee"><div class="ttname"><a href="group__handler__api.html#ga52988b26b8120b105355accebe501bee">text_enriched_handler</a></div><div class="ttdeci">int text_enriched_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for enriched text - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="enriched_8c_source.html#l00468">enriched.c:468</a></div></div>
<div class="ttc" id="agroup__handler__api_html_ga5552ea70deb1b5c9d5eed357948915d6"><div class="ttname"><a href="group__handler__api.html#ga5552ea70deb1b5c9d5eed357948915d6">text_plain_handler</a></div><div class="ttdeci">static int text_plain_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for plain text - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00691">handler.c:691</a></div></div>
<div class="ttc" id="agroup__handler__api_html_ga570796cc91abc82fbc16bcd285137688"><div class="ttname"><a href="group__handler__api.html#ga570796cc91abc82fbc16bcd285137688">crypt_smime_application_handler</a></div><div class="ttdeci">int crypt_smime_application_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Wrapper for CryptModuleSpecs::application_handler() - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="cryptglue_8c_source.html#l00443">cryptglue.c:443</a></div></div>
<div class="ttc" id="agroup__handler__api_html_ga6d9d9125a5e89f59e0bdc7dfe1da915f"><div class="ttname"><a href="group__handler__api.html#ga6d9d9125a5e89f59e0bdc7dfe1da915f">autoview_handler</a></div><div class="ttdeci">static int autoview_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for autoviewable attachments - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00538">handler.c:538</a></div></div>
<div class="ttc" id="agroup__handler__api_html_ga8a838ae7b50e8ffa147203c5cfaa3272"><div class="ttname"><a href="group__handler__api.html#ga8a838ae7b50e8ffa147203c5cfaa3272">external_body_handler</a></div><div class="ttdeci">static int external_body_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for external-body emails - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00776">handler.c:776</a></div></div>
<div class="ttc" id="agroup__handler__api_html_gaadbb7eb9de333071b51c4ff88b45315b"><div class="ttname"><a href="group__handler__api.html#gaadbb7eb9de333071b51c4ff88b45315b">rfc3676_handler</a></div><div class="ttdeci">int rfc3676_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for format=flowed - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="rfc3676_8c_source.html#l00326">rfc3676.c:326</a></div></div>
<div class="ttc" id="agroup__handler__api_html_gaadf7c637f58f34e7a58ac5b2c2b0f42f"><div class="ttname"><a href="group__handler__api.html#gaadf7c637f58f34e7a58ac5b2c2b0f42f">malformed_pgp_encrypted_handler</a></div><div class="ttdeci">static int malformed_pgp_encrypted_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for invalid pgp-encrypted emails - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l01506">handler.c:1506</a></div></div>
<div class="ttc" id="agroup__handler__api_html_gaaef1af1685b1d85753ac8ab8c1fc9339"><div class="ttname"><a href="group__handler__api.html#gaaef1af1685b1d85753ac8ab8c1fc9339">valid_pgp_encrypted_handler</a></div><div class="ttdeci">static int valid_pgp_encrypted_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for valid pgp-encrypted emails - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l01477">handler.c:1477</a></div></div>
<div class="ttc" id="agroup__handler__api_html_gabb6e3be5f79882648b38690c851c6587"><div class="ttname"><a href="group__handler__api.html#gabb6e3be5f79882648b38690c851c6587">message_handler</a></div><div class="ttdeci">static int message_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for message/rfc822 body parts - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00718">handler.c:718</a></div></div>
<div class="ttc" id="agroup__handler__api_html_gac1b8e821ab05eee2180e82f0ae4c7421"><div class="ttname"><a href="group__handler__api.html#gac1b8e821ab05eee2180e82f0ae4c7421">multipart_handler</a></div><div class="ttdeci">static int multipart_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for multipart emails - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l01243">handler.c:1243</a></div></div>
<div class="ttc" id="agroup__handler__api_html_gad678bde50d3eb6367c65e9ed646939bc"><div class="ttname"><a href="group__handler__api.html#gad678bde50d3eb6367c65e9ed646939bc">multilingual_handler</a></div><div class="ttdeci">static int multilingual_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for multi-lingual emails - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l01135">handler.c:1135</a></div></div>
<div class="ttc" id="agroup__handler__api_html_gad8f7563b8c9aba96de145d0e17e58437"><div class="ttname"><a href="group__handler__api.html#gad8f7563b8c9aba96de145d0e17e58437">mutt_signed_handler</a></div><div class="ttdeci">int mutt_signed_handler(struct Body *b_email, struct State *state)</div><div class="ttdoc">Handler for &quot;multipart/signed&quot; - Implements handler_t -.</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l01241">crypt.c:1241</a></div></div>
<div class="ttc" id="ahandler_8c_html_a09f27e2821153040ea4cad0b9ade6153"><div class="ttname"><a href="#a09f27e2821153040ea4cad0b9ade6153">is_autoview</a></div><div class="ttdeci">static bool is_autoview(struct Body *b)</div><div class="ttdoc">Should email body be filtered by mailcap.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00491">handler.c:491</a></div></div>
<div class="ttc" id="ahandler_8c_html_a0f1d59623c3dea670f7f5b4c17bf24a8"><div class="ttname"><a href="#a0f1d59623c3dea670f7f5b4c17bf24a8">mutt_prefer_as_attachment</a></div><div class="ttdeci">bool mutt_prefer_as_attachment(struct Body *b)</div><div class="ttdoc">Do we want this part as an attachment?</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l01855">handler.c:1855</a></div></div>
<div class="ttc" id="ahandler_8c_html_a72454e2cd50fcfe2124f5a923dcda538"><div class="ttname"><a href="#a72454e2cd50fcfe2124f5a923dcda538">handler_t</a></div><div class="ttdeci">int(* handler_t)(struct Body *b_email, struct State *state)</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00089">handler.c:89</a></div></div>
<div class="ttc" id="ahandler_8c_html_a88df4ca81c59bfc2464df374863edfd9"><div class="ttname"><a href="#a88df4ca81c59bfc2464df374863edfd9">run_decode_and_handler</a></div><div class="ttdeci">static int run_decode_and_handler(struct Body *b, struct State *state, handler_t handler, bool plaintext)</div><div class="ttdoc">Run an appropriate decoder for an email.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l01332">handler.c:1332</a></div></div>
<div class="ttc" id="akey_2keymap_8c_html_a7c5f5998482b8ee8d7ef92724c559877"><div class="ttname"><a href="key_2keymap_8c.html#a7c5f5998482b8ee8d7ef92724c559877">keymap_expand_key</a></div><div class="ttdeci">bool keymap_expand_key(struct Keymap *km, struct Buffer *buf)</div><div class="ttdoc">Get the key string bound to a Keymap.</div><div class="ttdef"><b>Definition</b> <a href="key_2keymap_8c_source.html#l00229">keymap.c:229</a></div></div>
<div class="ttc" id="akey_2menu_8c_html_a11136cc3c6e52a9a3db85d1887f4fe1c"><div class="ttname"><a href="key_2menu_8c.html#a11136cc3c6e52a9a3db85d1887f4fe1c">km_find_func</a></div><div class="ttdeci">struct Keymap * km_find_func(enum MenuType mtype, int func)</div><div class="ttdoc">Find a function&#39;s mapping in a Menu.</div><div class="ttdef"><b>Definition</b> <a href="key_2menu_8c_source.html#l00164">menu.c:164</a></div></div>
<div class="ttc" id="amime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61a0bc13f416d890a95b7d7e7c77b155f8e"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a0bc13f416d890a95b7d7e7c77b155f8e">ENC_7BIT</a></div><div class="ttdeci">@ ENC_7BIT</div><div class="ttdoc">7-bit text</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00049">mime.h:49</a></div></div>
<div class="ttc" id="amime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61a33a486b063e032293f7615de05f3cfa8"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a33a486b063e032293f7615de05f3cfa8">ENC_BINARY</a></div><div class="ttdeci">@ ENC_BINARY</div><div class="ttdoc">Binary.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00053">mime.h:53</a></div></div>
<div class="ttc" id="amime_8h_html_a1757cddbe4d3d273bf8fbffde3489a61a7c05065f79f9ed33904677a211ec3466"><div class="ttname"><a href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a7c05065f79f9ed33904677a211ec3466">ENC_8BIT</a></div><div class="ttdeci">@ ENC_8BIT</div><div class="ttdoc">8-bit text</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00050">mime.h:50</a></div></div>
<div class="ttc" id="amime_8h_html_a37d78827e3cbfabf93b6341b5da8cdc1"><div class="ttname"><a href="mime_8h.html#a37d78827e3cbfabf93b6341b5da8cdc1">MUTT_MIME_MAX_DEPTH</a></div><div class="ttdeci">#define MUTT_MIME_MAX_DEPTH</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00069">mime.h:69</a></div></div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79a2cbb8dddd761b8bfba754d933a979c1b"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a2cbb8dddd761b8bfba754d933a979c1b">TYPE_MESSAGE</a></div><div class="ttdeci">@ TYPE_MESSAGE</div><div class="ttdoc">Type: &#39;message/*&#39;.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00035">mime.h:35</a></div></div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a></div><div class="ttdeci">@ TYPE_MULTIPART</div><div class="ttdoc">Type: &#39;multipart/*&#39;.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00037">mime.h:37</a></div></div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e">TYPE_APPLICATION</a></div><div class="ttdeci">@ TYPE_APPLICATION</div><div class="ttdoc">Type: &#39;application/*&#39;.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00033">mime.h:33</a></div></div>
<div class="ttc" id="amime_8h_html_a5f93dab7807282e699a6bc1b2d18a2d8a3c5d26739343bc8cc2934a4dee403417"><div class="ttname"><a href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a3c5d26739343bc8cc2934a4dee403417">DISP_ATTACH</a></div><div class="ttdeci">@ DISP_ATTACH</div><div class="ttdoc">Content is attached.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00063">mime.h:63</a></div></div>
<div class="ttc" id="amutt_2state_8h_html_a2a4ce653367a744f47960bc30b42f3a7"><div class="ttname"><a href="mutt_2state_8h.html#a2a4ce653367a744f47960bc30b42f3a7">STATE_DISPLAY</a></div><div class="ttdeci">#define STATE_DISPLAY</div><div class="ttdoc">Output is displayed to the user.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00033">state.h:33</a></div></div>
<div class="ttc" id="amutt_2state_8h_html_a3171fa8309d985818811324b9f865934"><div class="ttname"><a href="mutt_2state_8h.html#a3171fa8309d985818811324b9f865934">STATE_DISPLAY_ATTACH</a></div><div class="ttdeci">#define STATE_DISPLAY_ATTACH</div><div class="ttdoc">We are displaying an attachment.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00041">state.h:41</a></div></div>
<div class="ttc" id="amutt_2state_8h_html_a77951e3f170a44a6e89c2261a6cf0f75"><div class="ttname"><a href="mutt_2state_8h.html#a77951e3f170a44a6e89c2261a6cf0f75">STATE_REPLYING</a></div><div class="ttdeci">#define STATE_REPLYING</div><div class="ttdoc">Are we replying?</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00039">state.h:39</a></div></div>
<div class="ttc" id="amutt_2state_8h_html_abfcaf3ae3b8541263634aec97ee65aeb"><div class="ttname"><a href="mutt_2state_8h.html#abfcaf3ae3b8541263634aec97ee65aeb">STATE_VERIFY</a></div><div class="ttdeci">#define STATE_VERIFY</div><div class="ttdoc">Perform signature verification.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00034">state.h:34</a></div></div>
<div class="ttc" id="amutt_2state_8h_html_abff873a2f7f4f3e664c8c4f90a11f44a"><div class="ttname"><a href="mutt_2state_8h.html#abff873a2f7f4f3e664c8c4f90a11f44a">STATE_CHARCONV</a></div><div class="ttdeci">#define STATE_CHARCONV</div><div class="ttdoc">Do character set conversions.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2state_8h_source.html#l00037">state.h:37</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a587e679a4c9cc44f11f0c467bb22b0af"><div class="ttname"><a href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a></div><div class="ttdeci">#define APPLICATION_PGP</div><div class="ttdoc">Use PGP to encrypt/sign.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00098">lib.h:98</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a798dfac1e8839ca89375b4ec62b3eff2"><div class="ttname"><a href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a></div><div class="ttdeci">#define APPLICATION_SMIME</div><div class="ttdoc">Use SMIME to encrypt/sign.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00099">lib.h:99</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_ad980bff69bb614893ad8e7e1c28a5023"><div class="ttname"><a href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a></div><div class="ttdeci">#define WithCrypto</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00124">lib.h:124</a></div></div>
<div class="ttc" id="astructBody_html_a99aff302b287a47c407a7412a99630f5"><div class="ttname"><a href="structBody.html#a99aff302b287a47c407a7412a99630f5">Body::disposition</a></div><div class="ttdeci">unsigned int disposition</div><div class="ttdoc">content-disposition, ContentDisposition</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00042">body.h:42</a></div></div>
<div class="ttc" id="atype_8h_html_ae5c7b6b4f6e696391cd7faaea6571bb4ad2dbad14a5308b356d33192607ee4929"><div class="ttname"><a href="type_8h.html#ae5c7b6b4f6e696391cd7faaea6571bb4ad2dbad14a5308b356d33192607ee4929">MENU_PAGER</a></div><div class="ttdeci">@ MENU_PAGER</div><div class="ttdoc">Pager pager (email viewer)</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00045">type.h:45</a></div></div>
</div><!-- fragment --><div id="dynsection-24" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a3e520d3004995a6c0cf0696edfd209fb_cgraph.svg" width="819" height="2546"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-25" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a3e520d3004995a6c0cf0696edfd209fb_icgraph.svg" width="416" height="962"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0f1d59623c3dea670f7f5b4c17bf24a8" name="a0f1d59623c3dea670f7f5b4c17bf24a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f1d59623c3dea670f7f5b4c17bf24a8">&#9670;&#160;</a></span>mutt_prefer_as_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_prefer_as_attachment </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do we want this part as an attachment? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> of email to test </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>We want this part as an attachment </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l01855">1855</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1856</span>{</div>
<div class="line"><span class="lineno"> 1857</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a3cc6312b687436c5023e476461662e8e">mutt_can_decode</a>(b))</div>
<div class="line"><span class="lineno"> 1858</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1859</span> </div>
<div class="line"><span class="lineno"> 1860</span>  <span class="keywordflow">if</span> (b-&gt;<a class="code hl_variable" href="structBody.html#a99aff302b287a47c407a7412a99630f5">disposition</a> != <a class="code hl_enumvalue" href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a3c5d26739343bc8cc2934a4dee403417">DISP_ATTACH</a>)</div>
<div class="line"><span class="lineno"> 1861</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1862</span> </div>
<div class="line"><span class="lineno"> 1863</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;honor_disposition&quot;</span>);</div>
<div class="line"><span class="lineno"> 1864</span>}</div>
<div class="ttc" id="ahandler_8c_html_a3cc6312b687436c5023e476461662e8e"><div class="ttname"><a href="#a3cc6312b687436c5023e476461662e8e">mutt_can_decode</a></div><div class="ttdeci">bool mutt_can_decode(struct Body *b)</div><div class="ttdoc">Will decoding the attachment produce any output.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l01871">handler.c:1871</a></div></div>
</div><!-- fragment --><div id="dynsection-26" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a0f1d59623c3dea670f7f5b4c17bf24a8_cgraph.svg" width="383" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-27" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a0f1d59623c3dea670f7f5b4c17bf24a8_icgraph.svg" width="444" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3cc6312b687436c5023e476461662e8e" name="a3cc6312b687436c5023e476461662e8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cc6312b687436c5023e476461662e8e">&#9670;&#160;</a></span>mutt_can_decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_can_decode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will decoding the attachment produce any output. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> of email to test </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Decoding the attachment will produce output </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l01871">1871</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1872</span>{</div>
<div class="line"><span class="lineno"> 1873</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="#a09f27e2821153040ea4cad0b9ade6153">is_autoview</a>(b))</div>
<div class="line"><span class="lineno"> 1874</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1875</span>  <span class="keywordflow">if</span> (b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ad88e88afaec507209421bba20aeeb167">TYPE_TEXT</a>)</div>
<div class="line"><span class="lineno"> 1876</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1877</span>  <span class="keywordflow">if</span> (b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a2cbb8dddd761b8bfba754d933a979c1b">TYPE_MESSAGE</a>)</div>
<div class="line"><span class="lineno"> 1878</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1879</span>  <span class="keywordflow">if</span> (b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>)</div>
<div class="line"><span class="lineno"> 1880</span>  {</div>
<div class="line"><span class="lineno"> 1881</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a>)</div>
<div class="line"><span class="lineno"> 1882</span>    {</div>
<div class="line"><span class="lineno"> 1883</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;signed&quot;</span>) || <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(b-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;encrypted&quot;</span>))</div>
<div class="line"><span class="lineno"> 1884</span>      {</div>
<div class="line"><span class="lineno"> 1885</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1886</span>      }</div>
<div class="line"><span class="lineno"> 1887</span>    }</div>
<div class="line"><span class="lineno"> 1888</span> </div>
<div class="line"><span class="lineno"> 1889</span>    <span class="keywordflow">for</span> (<span class="keyword">struct</span> <a class="code hl_struct" href="structBody.html">Body</a> *part = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>; part; part = part-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1890</span>    {</div>
<div class="line"><span class="lineno"> 1891</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="#a3cc6312b687436c5023e476461662e8e">mutt_can_decode</a>(part))</div>
<div class="line"><span class="lineno"> 1892</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1893</span>    }</div>
<div class="line"><span class="lineno"> 1894</span>  }</div>
<div class="line"><span class="lineno"> 1895</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; (b-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e">TYPE_APPLICATION</a>))</div>
<div class="line"><span class="lineno"> 1896</span>  {</div>
<div class="line"><span class="lineno"> 1897</span>    <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; <a class="code hl_function" href="crypt_8c.html#ad5ae8b8d4fea0b6aa61dc38312e99d15">mutt_is_application_pgp</a>(b))</div>
<div class="line"><span class="lineno"> 1898</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1899</span>    <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>) != 0) &amp;&amp; <a class="code hl_function" href="crypt_8c.html#a4073ce5b5fcec6e245dbfa9369016b8e">mutt_is_application_smime</a>(b))</div>
<div class="line"><span class="lineno"> 1900</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1901</span>  }</div>
<div class="line"><span class="lineno"> 1902</span> </div>
<div class="line"><span class="lineno"> 1903</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1904</span>}</div>
<div class="ttc" id="astructBody_html"><div class="ttname"><a href="structBody.html">Body</a></div><div class="ttdoc">The body of an email.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00035">body.h:36</a></div></div>
<div class="ttc" id="astructBody_html_a0b87b7bdb6faef44d9aac4854975f805"><div class="ttname"><a href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">Body::parts</a></div><div class="ttdeci">struct Body * parts</div><div class="ttdoc">parts of a multipart or message/rfc822</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00073">body.h:73</a></div></div>
<div class="ttc" id="astructBody_html_ac55cdfce46eed13151dcfe9b329d254c"><div class="ttname"><a href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">Body::next</a></div><div class="ttdeci">struct Body * next</div><div class="ttdoc">next attachment in the list</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00072">body.h:72</a></div></div>
</div><!-- fragment --><div id="dynsection-28" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a3cc6312b687436c5023e476461662e8e_cgraph.svg" width="523" height="216"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-29" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_a3cc6312b687436c5023e476461662e8e_icgraph.svg" width="611" height="512"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad6e9c66285fee73e4d9553c565e10fa2" name="ad6e9c66285fee73e4d9553c565e10fa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6e9c66285fee73e4d9553c565e10fa2">&#9670;&#160;</a></span>mutt_decode_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_decode_attachment </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structState.html">State</a> *</td>          <td class="paramname"><span class="paramname"><em>state</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode an email's attachment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> of the email </td></tr>
    <tr><td class="paramname">state</td><td><a class="el" href="structState.html" title="Keep track when processing files.">State</a> of text being processed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="handler_8c_source.html#l01911">1911</a> of file <a class="el" href="handler_8c_source.html">handler.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1912</span>{</div>
<div class="line"><span class="lineno"> 1913</span>  <span class="keywordtype">int</span> istext = <a class="code hl_function" href="muttlib_8c.html#a712bb5e0a580467b5aedc08afea40b92">mutt_is_text_part</a>(b) &amp;&amp; (b-&gt;<a class="code hl_variable" href="structBody.html#a99aff302b287a47c407a7412a99630f5">disposition</a> == <a class="code hl_enumvalue" href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073">DISP_INLINE</a>);</div>
<div class="line"><span class="lineno"> 1914</span>  iconv_t cd = <a class="code hl_define" href="mutt_2charset_8h.html#a343b22f930dd486990858724937bb6cd">ICONV_T_INVALID</a>;</div>
<div class="line"><span class="lineno"> 1915</span> </div>
<div class="line"><span class="lineno"> 1916</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="file_8c.html#a6b60cb2044041374689e6e6641c5cc05">mutt_file_seek</a>(state-&gt;<a class="code hl_variable" href="structState.html#a9cf7e1f0c5c12399def5ca38b13054ae">fp_in</a>, b-&gt;<a class="code hl_variable" href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">offset</a>, SEEK_SET))</div>
<div class="line"><span class="lineno"> 1917</span>  {</div>
<div class="line"><span class="lineno"> 1918</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1919</span>  }</div>
<div class="line"><span class="lineno"> 1920</span> </div>
<div class="line"><span class="lineno"> 1921</span>  <span class="keywordflow">if</span> (istext &amp;&amp; (b-&gt;<a class="code hl_variable" href="structBody.html#a70436d272fe1e795057f48a508db3397">charset</a> || (state-&gt;<a class="code hl_variable" href="structState.html#a5d855f7d518fde2ac4e8e409cbb24ad3">flags</a> &amp; <a class="code hl_define" href="mutt_2state_8h.html#abff873a2f7f4f3e664c8c4f90a11f44a">STATE_CHARCONV</a>)))</div>
<div class="line"><span class="lineno"> 1922</span>  {</div>
<div class="line"><span class="lineno"> 1923</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *charset = b-&gt;<a class="code hl_variable" href="structBody.html#a70436d272fe1e795057f48a508db3397">charset</a>;</div>
<div class="line"><span class="lineno"> 1924</span>    <span class="keywordflow">if</span> (!charset)</div>
<div class="line"><span class="lineno"> 1925</span>    {</div>
<div class="line"><span class="lineno"> 1926</span>      charset = <a class="code hl_function" href="parameter_8c.html#a31d10561ad6b3637e7591569b903aa33">mutt_param_get</a>(&amp;b-&gt;<a class="code hl_variable" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>, <span class="stringliteral">&quot;charset&quot;</span>);</div>
<div class="line"><span class="lineno"> 1927</span>      <span class="keywordflow">if</span> (!charset &amp;&amp; !<a class="code hl_function" href="mutt_2slist_8c.html#a4811cefce245ed4de9d8aacd8b4ab43f">slist_is_empty</a>(<a class="code hl_function" href="config__cache_8c.html#addc06d02c91cce26bfe7c3692ddf0046">cc_assumed_charset</a>()))</div>
<div class="line"><span class="lineno"> 1928</span>        charset = <a class="code hl_function" href="mutt_2charset_8c.html#af919f6cab94a1ff6ba6fa6b9b9c2f8f8">mutt_ch_get_default_charset</a>(<a class="code hl_function" href="config__cache_8c.html#addc06d02c91cce26bfe7c3692ddf0046">cc_assumed_charset</a>());</div>
<div class="line"><span class="lineno"> 1929</span>    }</div>
<div class="line"><span class="lineno"> 1930</span>    <span class="keywordflow">if</span> (charset &amp;&amp; <a class="code hl_function" href="config__cache_8c.html#a03027fb835011539c3cbfeb1b0fa8811">cc_charset</a>())</div>
<div class="line"><span class="lineno"> 1931</span>      cd = <a class="code hl_function" href="mutt_2charset_8c.html#af7380ef31de4a56ab644b71f0a010ed9">mutt_ch_iconv_open</a>(<a class="code hl_function" href="config__cache_8c.html#a03027fb835011539c3cbfeb1b0fa8811">cc_charset</a>(), charset, <a class="code hl_define" href="mutt_2charset_8h.html#a1807a22585916adccafa5e09bda9b6a7">MUTT_ICONV_HOOK_FROM</a>);</div>
<div class="line"><span class="lineno"> 1932</span>  }</div>
<div class="line"><span class="lineno"> 1933</span> </div>
<div class="line"><span class="lineno"> 1934</span>  <span class="keywordflow">switch</span> (b-&gt;<a class="code hl_variable" href="structBody.html#ad2f05b8ff24813de41988e63de5d6a31">encoding</a>)</div>
<div class="line"><span class="lineno"> 1935</span>  {</div>
<div class="line"><span class="lineno"> 1936</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61af96d66ee7716e523971a7b5161f04ded">ENC_QUOTED_PRINTABLE</a>:</div>
<div class="line"><span class="lineno"> 1937</span>      <a class="code hl_function" href="#ada2d5290a26fe0a595f7c0560c291a58">decode_quoted</a>(state, b-&gt;<a class="code hl_variable" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a>,</div>
<div class="line"><span class="lineno"> 1938</span>                    istext || (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1939</span>                               <a class="code hl_function" href="crypt_8c.html#ad5ae8b8d4fea0b6aa61dc38312e99d15">mutt_is_application_pgp</a>(b)),</div>
<div class="line"><span class="lineno"> 1940</span>                    cd);</div>
<div class="line"><span class="lineno"> 1941</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1942</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a5c90b21fa3f41a7c98c862cb39d4370d">ENC_BASE64</a>:</div>
<div class="line"><span class="lineno"> 1943</span>      <a class="code hl_function" href="#a7834668eb7e41062c0d6aa80589de5be">mutt_decode_base64</a>(state, b-&gt;<a class="code hl_variable" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a>,</div>
<div class="line"><span class="lineno"> 1944</span>                         istext || (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1945</span>                                    <a class="code hl_function" href="crypt_8c.html#ad5ae8b8d4fea0b6aa61dc38312e99d15">mutt_is_application_pgp</a>(b)),</div>
<div class="line"><span class="lineno"> 1946</span>                         cd);</div>
<div class="line"><span class="lineno"> 1947</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1948</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="mime_8h.html#a1757cddbe4d3d273bf8fbffde3489a61a17c00808bfbeb61dc2a001baf0aac5bd">ENC_UUENCODED</a>:</div>
<div class="line"><span class="lineno"> 1949</span>      <a class="code hl_function" href="#a2f8cdaad76dd45015a29224b1f93ab56">decode_uuencoded</a>(state, b-&gt;<a class="code hl_variable" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a>,</div>
<div class="line"><span class="lineno"> 1950</span>                       istext || (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1951</span>                                  <a class="code hl_function" href="crypt_8c.html#ad5ae8b8d4fea0b6aa61dc38312e99d15">mutt_is_application_pgp</a>(b)),</div>
<div class="line"><span class="lineno"> 1952</span>                       cd);</div>
<div class="line"><span class="lineno"> 1953</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1954</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1955</span>      <a class="code hl_function" href="#ae05b9d67c488b0b7da0c946688ff9b68">decode_xbit</a>(state, b-&gt;<a class="code hl_variable" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a>,</div>
<div class="line"><span class="lineno"> 1956</span>                  istext || (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1957</span>                             <a class="code hl_function" href="crypt_8c.html#ad5ae8b8d4fea0b6aa61dc38312e99d15">mutt_is_application_pgp</a>(b)),</div>
<div class="line"><span class="lineno"> 1958</span>                  cd);</div>
<div class="line"><span class="lineno"> 1959</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1960</span>  }</div>
<div class="line"><span class="lineno"> 1961</span>}</div>
<div class="ttc" id="aconfig__cache_8c_html_a03027fb835011539c3cbfeb1b0fa8811"><div class="ttname"><a href="config__cache_8c.html#a03027fb835011539c3cbfeb1b0fa8811">cc_charset</a></div><div class="ttdeci">const char * cc_charset(void)</div><div class="ttdoc">Get the cached value of $charset.</div><div class="ttdef"><b>Definition</b> <a href="config__cache_8c_source.html#l00116">config_cache.c:116</a></div></div>
<div class="ttc" id="aconfig__cache_8c_html_addc06d02c91cce26bfe7c3692ddf0046"><div class="ttname"><a href="config__cache_8c.html#addc06d02c91cce26bfe7c3692ddf0046">cc_assumed_charset</a></div><div class="ttdeci">const struct Slist * cc_assumed_charset(void)</div><div class="ttdoc">Get the cached value of $assumed_charset.</div><div class="ttdef"><b>Definition</b> <a href="config__cache_8c_source.html#l00101">config_cache.c:101</a></div></div>
<div class="ttc" id="ahandler_8c_html_a2f8cdaad76dd45015a29224b1f93ab56"><div class="ttname"><a href="#a2f8cdaad76dd45015a29224b1f93ab56">decode_uuencoded</a></div><div class="ttdeci">static void decode_uuencoded(struct State *state, long len, bool istext, iconv_t cd)</div><div class="ttdoc">Decode uuencoded text.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00378">handler.c:378</a></div></div>
<div class="ttc" id="ahandler_8c_html_a7834668eb7e41062c0d6aa80589de5be"><div class="ttname"><a href="#a7834668eb7e41062c0d6aa80589de5be">mutt_decode_base64</a></div><div class="ttdeci">void mutt_decode_base64(struct State *state, size_t len, bool istext, iconv_t cd)</div><div class="ttdoc">Decode base64-encoded text.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l01538">handler.c:1538</a></div></div>
<div class="ttc" id="ahandler_8c_html_ada2d5290a26fe0a595f7c0560c291a58"><div class="ttname"><a href="#ada2d5290a26fe0a595f7c0560c291a58">decode_quoted</a></div><div class="ttdeci">static void decode_quoted(struct State *state, long len, bool istext, iconv_t cd)</div><div class="ttdoc">Decode an attachment encoded with quoted-printable.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00314">handler.c:314</a></div></div>
<div class="ttc" id="ahandler_8c_html_ae05b9d67c488b0b7da0c946688ff9b68"><div class="ttname"><a href="#ae05b9d67c488b0b7da0c946688ff9b68">decode_xbit</a></div><div class="ttdeci">static void decode_xbit(struct State *state, long len, bool istext, iconv_t cd)</div><div class="ttdoc">Decode xbit-encoded text.</div><div class="ttdef"><b>Definition</b> <a href="handler_8c_source.html#l00175">handler.c:175</a></div></div>
<div class="ttc" id="amime_8h_html_a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073"><div class="ttname"><a href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073">DISP_INLINE</a></div><div class="ttdeci">@ DISP_INLINE</div><div class="ttdoc">Content is inline.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00062">mime.h:62</a></div></div>
<div class="ttc" id="amutt_2charset_8c_html_af7380ef31de4a56ab644b71f0a010ed9"><div class="ttname"><a href="mutt_2charset_8c.html#af7380ef31de4a56ab644b71f0a010ed9">mutt_ch_iconv_open</a></div><div class="ttdeci">iconv_t mutt_ch_iconv_open(const char *tocode, const char *fromcode, uint8_t flags)</div><div class="ttdoc">Set up iconv for conversions.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2charset_8c_source.html#l00580">charset.c:580</a></div></div>
<div class="ttc" id="amutt_2charset_8c_html_af919f6cab94a1ff6ba6fa6b9b9c2f8f8"><div class="ttname"><a href="mutt_2charset_8c.html#af919f6cab94a1ff6ba6fa6b9b9c2f8f8">mutt_ch_get_default_charset</a></div><div class="ttdeci">const char * mutt_ch_get_default_charset(const struct Slist *const assumed_charset)</div><div class="ttdoc">Get the default character set.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2charset_8c_source.html#l00451">charset.c:451</a></div></div>
<div class="ttc" id="amutt_2charset_8h_html_a1807a22585916adccafa5e09bda9b6a7"><div class="ttname"><a href="mutt_2charset_8h.html#a1807a22585916adccafa5e09bda9b6a7">MUTT_ICONV_HOOK_FROM</a></div><div class="ttdeci">#define MUTT_ICONV_HOOK_FROM</div><div class="ttdoc">apply charset-hooks to fromcode</div><div class="ttdef"><b>Definition</b> <a href="mutt_2charset_8h_source.html#l00067">charset.h:67</a></div></div>
<div class="ttc" id="amutt_2charset_8h_html_a343b22f930dd486990858724937bb6cd"><div class="ttname"><a href="mutt_2charset_8h.html#a343b22f930dd486990858724937bb6cd">ICONV_T_INVALID</a></div><div class="ttdeci">#define ICONV_T_INVALID</div><div class="ttdoc">Error value for iconv functions.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2charset_8h_source.html#l00111">charset.h:111</a></div></div>
<div class="ttc" id="amutt_2slist_8c_html_a4811cefce245ed4de9d8aacd8b4ab43f"><div class="ttname"><a href="mutt_2slist_8c.html#a4811cefce245ed4de9d8aacd8b4ab43f">slist_is_empty</a></div><div class="ttdeci">bool slist_is_empty(const struct Slist *list)</div><div class="ttdoc">Is the slist empty?</div><div class="ttdef"><b>Definition</b> <a href="mutt_2slist_8c_source.html#l00140">slist.c:140</a></div></div>
<div class="ttc" id="astructBody_html_a70436d272fe1e795057f48a508db3397"><div class="ttname"><a href="structBody.html#a70436d272fe1e795057f48a508db3397">Body::charset</a></div><div class="ttdeci">char * charset</div><div class="ttdoc">Send mode: charset of attached file as stored on disk.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00079">body.h:79</a></div></div>
</div><!-- fragment --><div id="dynsection-30" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_ad6e9c66285fee73e4d9553c565e10fa2_cgraph.svg" width="782" height="694"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-31" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="handler_8c_ad6e9c66285fee73e4d9553c565e10fa2_icgraph.svg" width="656" height="686"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
