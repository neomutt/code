<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: nntp/newsrc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2025-09-05-55-g97fc89</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('newsrc_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">newsrc.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Read/parse/write an NNTP config file of subscribed newsgroups.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="nntp_2private_8h_source.html">private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt_2lib_8h_source.html">mutt/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_2lib_8h_source.html">config/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="email_2lib_8h_source.html">email/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="core_2lib_8h_source.html">core/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="conn_2lib_8h_source.html">conn/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt_8h_source.html">mutt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nntp_2lib_8h_source.html">lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="bcache_2lib_8h_source.html">bcache/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="expando_2lib_8h_source.html">expando/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nntp_2adata_8h_source.html">adata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nntp_2edata_8h_source.html">edata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="expando__newsrc_8h_source.html">expando_newsrc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nntp_2mdata_8h_source.html">mdata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__logging_8h_source.html">mutt_logging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__socket_8h_source.html">mutt_socket.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="muttlib_8h_source.html">muttlib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="protos_8h_source.html">protos.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hcache_2lib_8h_source.html">hcache/lib.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for newsrc.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c__incl.svg" width="2275" height="274"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="newsrc_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9f33e774091672b52c32fcdf3a96b05c" id="r_a9f33e774091672b52c32fcdf3a96b05c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f33e774091672b52c32fcdf3a96b05c">mdata_find</a> (struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *adata, const char *group)</td></tr>
<tr class="memdesc:a9f33e774091672b52c32fcdf3a96b05c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find <a class="el" href="structNntpMboxData.html" title="NNTP-specific Mailbox data -.">NntpMboxData</a> for given newsgroup or add it.  <br /></td></tr>
<tr class="separator:a9f33e774091672b52c32fcdf3a96b05c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5290f190dba237467e63bd09ddc28c0" id="r_ac5290f190dba237467e63bd09ddc28c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac5290f190dba237467e63bd09ddc28c0">nntp_acache_free</a> (struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *mdata)</td></tr>
<tr class="memdesc:ac5290f190dba237467e63bd09ddc28c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove all temporarily cache files.  <br /></td></tr>
<tr class="separator:ac5290f190dba237467e63bd09ddc28c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64fdec9977db62a95daa5af59d280673" id="r_a64fdec9977db62a95daa5af59d280673"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a64fdec9977db62a95daa5af59d280673">nntp_newsrc_close</a> (struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *adata)</td></tr>
<tr class="memdesc:a64fdec9977db62a95daa5af59d280673"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock and close .newsrc file.  <br /></td></tr>
<tr class="separator:a64fdec9977db62a95daa5af59d280673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab375e79092001683947b61e4079db8c0" id="r_ab375e79092001683947b61e4079db8c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab375e79092001683947b61e4079db8c0">nntp_group_unread_stat</a> (struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *mdata)</td></tr>
<tr class="memdesc:ab375e79092001683947b61e4079db8c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count number of unread articles using .newsrc data.  <br /></td></tr>
<tr class="separator:ab375e79092001683947b61e4079db8c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57bd184c51b8701e9613761a629ca485" id="r_a57bd184c51b8701e9613761a629ca485"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a57bd184c51b8701e9613761a629ca485">nntp_newsrc_parse</a> (struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *adata)</td></tr>
<tr class="memdesc:a57bd184c51b8701e9613761a629ca485"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse .newsrc file.  <br /></td></tr>
<tr class="separator:a57bd184c51b8701e9613761a629ca485"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21d6dfb74310c442a524deed9579395a" id="r_a21d6dfb74310c442a524deed9579395a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21d6dfb74310c442a524deed9579395a">nntp_newsrc_gen_entries</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a21d6dfb74310c442a524deed9579395a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate array of .newsrc entries.  <br /></td></tr>
<tr class="separator:a21d6dfb74310c442a524deed9579395a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a400892d96104e348988b980faace6d3f" id="r_a400892d96104e348988b980faace6d3f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a400892d96104e348988b980faace6d3f">update_file</a> (char *filename, char *buf)</td></tr>
<tr class="memdesc:a400892d96104e348988b980faace6d3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update file with new contents.  <br /></td></tr>
<tr class="separator:a400892d96104e348988b980faace6d3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ae05e2f17614ff64c3429ac40ec5119" id="r_a6ae05e2f17614ff64c3429ac40ec5119"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6ae05e2f17614ff64c3429ac40ec5119">nntp_newsrc_update</a> (struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *adata)</td></tr>
<tr class="memdesc:a6ae05e2f17614ff64c3429ac40ec5119"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update .newsrc file.  <br /></td></tr>
<tr class="separator:a6ae05e2f17614ff64c3429ac40ec5119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d3a7328ed6d800fc41fb83e20db792a" id="r_a8d3a7328ed6d800fc41fb83e20db792a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d3a7328ed6d800fc41fb83e20db792a">cache_expand</a> (char *dst, size_t dstlen, struct <a class="el" href="structConnAccount.html">ConnAccount</a> *cac, const char *src)</td></tr>
<tr class="memdesc:a8d3a7328ed6d800fc41fb83e20db792a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make fully qualified cache file name.  <br /></td></tr>
<tr class="separator:a8d3a7328ed6d800fc41fb83e20db792a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82d043009c986ea9887b31976c0ca262" id="r_a82d043009c986ea9887b31976c0ca262"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82d043009c986ea9887b31976c0ca262">nntp_expand_path</a> (char *buf, size_t buflen, struct <a class="el" href="structConnAccount.html">ConnAccount</a> *cac)</td></tr>
<tr class="memdesc:a82d043009c986ea9887b31976c0ca262"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make fully qualified url from newsgroup name.  <br /></td></tr>
<tr class="separator:a82d043009c986ea9887b31976c0ca262"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a81ebd8f2d0f68109bddeef2c87ea83" id="r_a4a81ebd8f2d0f68109bddeef2c87ea83"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4a81ebd8f2d0f68109bddeef2c87ea83">nntp_add_group</a> (char *line, void *data)</td></tr>
<tr class="memdesc:a4a81ebd8f2d0f68109bddeef2c87ea83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse newsgroup.  <br /></td></tr>
<tr class="separator:a4a81ebd8f2d0f68109bddeef2c87ea83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a0f0a9d60138637dde00cb0732c6b9e" id="r_a8a0f0a9d60138637dde00cb0732c6b9e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a0f0a9d60138637dde00cb0732c6b9e">active_get_cache</a> (struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *adata)</td></tr>
<tr class="memdesc:a8a0f0a9d60138637dde00cb0732c6b9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load list of all newsgroups from cache.  <br /></td></tr>
<tr class="separator:a8a0f0a9d60138637dde00cb0732c6b9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8b8319b59b7ef6de942cd25400e0d79" id="r_aa8b8319b59b7ef6de942cd25400e0d79"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8b8319b59b7ef6de942cd25400e0d79">nntp_active_save_cache</a> (struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *adata)</td></tr>
<tr class="memdesc:aa8b8319b59b7ef6de942cd25400e0d79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save list of all newsgroups to cache.  <br /></td></tr>
<tr class="separator:aa8b8319b59b7ef6de942cd25400e0d79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2469bc6478c1b4766ed132a2bb1a4018" id="r_ga2469bc6478c1b4766ed132a2bb1a4018"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hcache__namer__api.html#ga2469bc6478c1b4766ed132a2bb1a4018">nntp_hcache_namer</a> (const char *path, struct <a class="el" href="structBuffer.html">Buffer</a> *dest)</td></tr>
<tr class="memdesc:ga2469bc6478c1b4766ed132a2bb1a4018"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compose hcache file names - Implements <a class="el" href="hcache_2lib_8h.html#a8a057dcdc29771b3f30457651fd523d5">hcache_namer_t</a> -.  <br /></td></tr>
<tr class="separator:ga2469bc6478c1b4766ed132a2bb1a4018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00132ef57a28e8ec428b6fa298ea63d4" id="r_a00132ef57a28e8ec428b6fa298ea63d4"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structHeaderCache.html">HeaderCache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a00132ef57a28e8ec428b6fa298ea63d4">nntp_hcache_open</a> (struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *mdata)</td></tr>
<tr class="memdesc:a00132ef57a28e8ec428b6fa298ea63d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open newsgroup hcache.  <br /></td></tr>
<tr class="separator:a00132ef57a28e8ec428b6fa298ea63d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25f479090028437bbd1cc59a08942112" id="r_a25f479090028437bbd1cc59a08942112"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a25f479090028437bbd1cc59a08942112">nntp_hcache_update</a> (struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *mdata, struct <a class="el" href="structHeaderCache.html">HeaderCache</a> *hc)</td></tr>
<tr class="memdesc:a25f479090028437bbd1cc59a08942112"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove stale cached headers.  <br /></td></tr>
<tr class="separator:a25f479090028437bbd1cc59a08942112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga181aa7de0266d119dcc65f48088c306d" id="r_ga181aa7de0266d119dcc65f48088c306d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bcache__list__api.html#ga181aa7de0266d119dcc65f48088c306d">nntp_bcache_delete</a> (const char *id, struct <a class="el" href="structBodyCache.html">BodyCache</a> *bcache, void *data)</td></tr>
<tr class="memdesc:ga181aa7de0266d119dcc65f48088c306d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete an entry from the message cache - Implements <a class="el" href="bcache_2lib_8h.html#a1cbba854dbad4ca2ef97dfad376a2fa6">bcache_list_t</a> -.  <br /></td></tr>
<tr class="separator:ga181aa7de0266d119dcc65f48088c306d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab103e38d32e64122d7892f29eeb67fcf" id="r_ab103e38d32e64122d7892f29eeb67fcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab103e38d32e64122d7892f29eeb67fcf">nntp_bcache_update</a> (struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *mdata)</td></tr>
<tr class="memdesc:ab103e38d32e64122d7892f29eeb67fcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove stale cached messages.  <br /></td></tr>
<tr class="separator:ab103e38d32e64122d7892f29eeb67fcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a140bf8e49e3f11e0d9cb4d8253767819" id="r_a140bf8e49e3f11e0d9cb4d8253767819"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a140bf8e49e3f11e0d9cb4d8253767819">nntp_delete_group_cache</a> (struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *mdata)</td></tr>
<tr class="memdesc:a140bf8e49e3f11e0d9cb4d8253767819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove hcache and bcache of newsgroup.  <br /></td></tr>
<tr class="separator:a140bf8e49e3f11e0d9cb4d8253767819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e57436b35d68983c6fe44815f3ad505" id="r_a0e57436b35d68983c6fe44815f3ad505"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e57436b35d68983c6fe44815f3ad505">nntp_clear_cache</a> (struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *adata)</td></tr>
<tr class="memdesc:a0e57436b35d68983c6fe44815f3ad505"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the NNTP cache.  <br /></td></tr>
<tr class="separator:a0e57436b35d68983c6fe44815f3ad505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81411f29dda39c2e2276e7dc6985ea77" id="r_ga81411f29dda39c2e2276e7dc6985ea77"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conn__account__get__field.html#ga81411f29dda39c2e2276e7dc6985ea77">nntp_get_field</a> (enum <a class="el" href="connaccount_8h.html#a25419e97b0149cb541a4f3906ce852fb">ConnAccountField</a> field, void *gf_data)</td></tr>
<tr class="memdesc:ga81411f29dda39c2e2276e7dc6985ea77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get connection login credentials - Implements <a class="el" href="structConnAccount.html#ae69871442c1135a06b359011104f630b">ConnAccount::get_field()</a> -.  <br /></td></tr>
<tr class="separator:ga81411f29dda39c2e2276e7dc6985ea77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9ee1cc132aa482531fdc2463200e492" id="r_ae9ee1cc132aa482531fdc2463200e492"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae9ee1cc132aa482531fdc2463200e492">nntp_select_server</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *server, bool leave_lock)</td></tr>
<tr class="memdesc:ae9ee1cc132aa482531fdc2463200e492"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a connection to an NNTP server.  <br /></td></tr>
<tr class="separator:ae9ee1cc132aa482531fdc2463200e492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a2a364d853a786fb0b224c379d28eab" id="r_a3a2a364d853a786fb0b224c379d28eab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3a2a364d853a786fb0b224c379d28eab">nntp_article_status</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, char *group, <a class="el" href="nntp_2lib_8h.html#afbe93ce95fbbf1758c93d4b123fc2246">anum_t</a> anum)</td></tr>
<tr class="memdesc:a3a2a364d853a786fb0b224c379d28eab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get status of articles from .newsrc.  <br /></td></tr>
<tr class="separator:a3a2a364d853a786fb0b224c379d28eab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8116259f1259f7d6a96240cff0e9fa9e" id="r_a8116259f1259f7d6a96240cff0e9fa9e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8116259f1259f7d6a96240cff0e9fa9e">mutt_newsgroup_subscribe</a> (struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *adata, char *group)</td></tr>
<tr class="memdesc:a8116259f1259f7d6a96240cff0e9fa9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribe newsgroup.  <br /></td></tr>
<tr class="separator:a8116259f1259f7d6a96240cff0e9fa9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7a9bc2676ed73179b698122081f3abe" id="r_af7a9bc2676ed73179b698122081f3abe"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7a9bc2676ed73179b698122081f3abe">mutt_newsgroup_unsubscribe</a> (struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *adata, char *group)</td></tr>
<tr class="memdesc:af7a9bc2676ed73179b698122081f3abe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsubscribe newsgroup.  <br /></td></tr>
<tr class="separator:af7a9bc2676ed73179b698122081f3abe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6706491e2d469cd6d2b48fc816e28517" id="r_a6706491e2d469cd6d2b48fc816e28517"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6706491e2d469cd6d2b48fc816e28517">mutt_newsgroup_catchup</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *adata, char *group)</td></tr>
<tr class="memdesc:a6706491e2d469cd6d2b48fc816e28517"><td class="mdescLeft">&#160;</td><td class="mdescRight">Catchup newsgroup.  <br /></td></tr>
<tr class="separator:a6706491e2d469cd6d2b48fc816e28517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27ee89ff347b03db409f087a69e20e3" id="r_aa27ee89ff347b03db409f087a69e20e3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa27ee89ff347b03db409f087a69e20e3">mutt_newsgroup_uncatchup</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *adata, char *group)</td></tr>
<tr class="memdesc:aa27ee89ff347b03db409f087a69e20e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uncatchup newsgroup.  <br /></td></tr>
<tr class="separator:aa27ee89ff347b03db409f087a69e20e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d6b4cf3e2a57697ddf28fb7b616cb46" id="r_a5d6b4cf3e2a57697ddf28fb7b616cb46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5d6b4cf3e2a57697ddf28fb7b616cb46">nntp_mailbox</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, char *buf, size_t buflen)</td></tr>
<tr class="memdesc:a5d6b4cf3e2a57697ddf28fb7b616cb46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get first newsgroup with new messages.  <br /></td></tr>
<tr class="separator:a5d6b4cf3e2a57697ddf28fb7b616cb46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Read/parse/write an NNTP config file of subscribed newsgroups. </p>
<dl class="section author"><dt>Authors</dt><dd><ul>
<li>Richard Russon</li>
<li>Pietro Cerutti</li>
<li>Ian Zimmerman</li>
<li>Ramkumar Ramachandra</li>
<li>Tóth János</li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</dd></dl>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p class="definition">Definition in file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a9f33e774091672b52c32fcdf3a96b05c" name="a9f33e774091672b52c32fcdf3a96b05c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f33e774091672b52c32fcdf3a96b05c">&#9670;&#160;</a></span>mdata_find()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> * mdata_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *</td>          <td class="paramname"><span class="paramname"><em>adata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>group</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find <a class="el" href="structNntpMboxData.html" title="NNTP-specific Mailbox data -.">NntpMboxData</a> for given newsgroup or add it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>NNTP server </td></tr>
    <tr><td class="paramname">group</td><td>Newsgroup </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>NNTP data </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00074">74</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   75</span>{</div>
<div class="line"><span class="lineno">   76</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a>, <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>);</div>
<div class="line"><span class="lineno">   77</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno">   78</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>;</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>  <span class="keywordtype">size_t</span> len = strlen(<a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>) + 1;</div>
<div class="line"><span class="lineno">   81</span>  <span class="comment">/* create NntpMboxData structure and add it to hash */</span></div>
<div class="line"><span class="lineno">   82</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="memory_8c.html#a39469100e5b8ae30c8f6f21e206aefe8">mutt_mem_calloc</a>(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a>) + len);</div>
<div class="line"><span class="lineno">   83</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;group = (<span class="keywordtype">char</span> *) <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> + <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a>);</div>
<div class="line"><span class="lineno">   84</span>  <a class="code hl_function" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;group, <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>, len);</div>
<div class="line"><span class="lineno">   85</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;adata = <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>;</div>
<div class="line"><span class="lineno">   86</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;deleted = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   87</span>  <a class="code hl_function" href="hash_8c.html#a10bd305a8183db9829caee9ea1bac2f5">mutt_hash_insert</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a>, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;group, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>);</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>  <span class="comment">/* add NntpMboxData to list */</span></div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a37bf5f2141a2488012a0441694bae9bf">groups_num</a> &gt;= <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a9d74636989a2ad52c90363e982997b9a">groups_max</a>)</div>
<div class="line"><span class="lineno">   91</span>  {</div>
<div class="line"><span class="lineno">   92</span>    <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a9d74636989a2ad52c90363e982997b9a">groups_max</a> *= 2;</div>
<div class="line"><span class="lineno">   93</span>    <a class="code hl_define" href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a>(&amp;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a17e649e29d0d7d8e6137647e62aa4b37">groups_list</a>, <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a9d74636989a2ad52c90363e982997b9a">groups_max</a>, <span class="keyword">struct</span> <a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *);</div>
<div class="line"><span class="lineno">   94</span>  }</div>
<div class="line"><span class="lineno">   95</span>  <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a17e649e29d0d7d8e6137647e62aa4b37">groups_list</a>[<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a37bf5f2141a2488012a0441694bae9bf">groups_num</a>++] = <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>;</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>;</div>
<div class="line"><span class="lineno">   98</span>}</div>
<div class="ttc" id="ahash_8c_html_a10bd305a8183db9829caee9ea1bac2f5"><div class="ttname"><a href="hash_8c.html#a10bd305a8183db9829caee9ea1bac2f5">mutt_hash_insert</a></div><div class="ttdeci">struct HashElem * mutt_hash_insert(struct HashTable *table, const char *strkey, void *data)</div><div class="ttdoc">Add a new element to the Hash Table (with string keys)</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00335">hash.c:335</a></div></div>
<div class="ttc" id="ahash_8c_html_a21cfc2c56db496fc57d3d85a71c03215"><div class="ttname"><a href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a></div><div class="ttdeci">void * mutt_hash_find(const struct HashTable *table, const char *strkey)</div><div class="ttdoc">Find the HashElem data in a Hash Table element using a key.</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00362">hash.c:362</a></div></div>
<div class="ttc" id="amemory_8c_html_a39469100e5b8ae30c8f6f21e206aefe8"><div class="ttname"><a href="memory_8c.html#a39469100e5b8ae30c8f6f21e206aefe8">mutt_mem_calloc</a></div><div class="ttdeci">void * mutt_mem_calloc(size_t nmemb, size_t size)</div><div class="ttdoc">Allocate zeroed memory on the heap.</div><div class="ttdef"><b>Definition</b> <a href="memory_8c_source.html#l00076">memory.c:76</a></div></div>
<div class="ttc" id="amemory_8h_html_abd7aad5fe8f11bcd476c64b4243081ba"><div class="ttname"><a href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a></div><div class="ttdeci">#define MUTT_MEM_REALLOC(pptr, n, type)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00050">memory.h:50</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_ad20e00309de897a1e882fc7400335b83"><div class="ttname"><a href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a></div><div class="ttdeci">size_t mutt_str_copy(char *dest, const char *src, size_t dsize)</div><div class="ttdoc">Copy a string into a buffer (guaranteeing NUL-termination)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00581">string.c:581</a></div></div>
<div class="ttc" id="astructMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00132">mailbox.h:132</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_a0c47d705c8553a61127b79839399607d"><div class="ttname"><a href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">NntpAccountData::groups_hash</a></div><div class="ttdeci">struct HashTable * groups_hash</div><div class="ttdoc">Hash Table: &quot;newsgroup&quot; -&gt; NntpMboxData.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00061">adata.h:61</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_a17e649e29d0d7d8e6137647e62aa4b37"><div class="ttname"><a href="structNntpAccountData.html#a17e649e29d0d7d8e6137647e62aa4b37">NntpAccountData::groups_list</a></div><div class="ttdeci">struct NntpMboxData ** groups_list</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00060">adata.h:60</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_a37bf5f2141a2488012a0441694bae9bf"><div class="ttname"><a href="structNntpAccountData.html#a37bf5f2141a2488012a0441694bae9bf">NntpAccountData::groups_num</a></div><div class="ttdeci">unsigned int groups_num</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00058">adata.h:58</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_a9d74636989a2ad52c90363e982997b9a"><div class="ttname"><a href="structNntpAccountData.html#a9d74636989a2ad52c90363e982997b9a">NntpAccountData::groups_max</a></div><div class="ttdeci">unsigned int groups_max</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00059">adata.h:59</a></div></div>
<div class="ttc" id="astructNntpMboxData_html"><div class="ttname"><a href="structNntpMboxData.html">NntpMboxData</a></div><div class="ttdoc">NNTP-specific Mailbox data -.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00033">mdata.h:34</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_a4eeac824a82fb5bb884aa9aab449ccf8"><div class="ttname"><a href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">NntpMboxData::group</a></div><div class="ttdeci">char * group</div><div class="ttdoc">Name of newsgroup.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00035">mdata.h:35</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_a5fe54958715f3c542698ee11e6fd6687"><div class="ttname"><a href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">NntpMboxData::adata</a></div><div class="ttdeci">struct NntpAccountData * adata</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00048">mdata.h:48</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a9f33e774091672b52c32fcdf3a96b05c_cgraph.svg" width="278" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a9f33e774091672b52c32fcdf3a96b05c_icgraph.svg" width="340" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac5290f190dba237467e63bd09ddc28c0" name="ac5290f190dba237467e63bd09ddc28c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5290f190dba237467e63bd09ddc28c0">&#9670;&#160;</a></span>nntp_acache_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nntp_acache_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *</td>          <td class="paramname"><span class="paramname"><em>mdata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove all temporarily cache files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdata</td><td>NNTP <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> data </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00104">104</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  105</span>{</div>
<div class="line"><span class="lineno">  106</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_define" href="nntp_2lib_8h.html#a1efe6072fe3f0f219d90675e1aa55f40">NNTP_ACACHE_LEN</a>; i++)</div>
<div class="line"><span class="lineno">  107</span>  {</div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordflow">if</span> (mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac77579c4bad5769c1ed74f5990701cf5">acache</a>[i].<a class="code hl_variable" href="structNntpAcache.html#a33c62982769726fafeb4e89d6c92905c">path</a>)</div>
<div class="line"><span class="lineno">  109</span>    {</div>
<div class="line"><span class="lineno">  110</span>      unlink(mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac77579c4bad5769c1ed74f5990701cf5">acache</a>[i].<a class="code hl_variable" href="structNntpAcache.html#a33c62982769726fafeb4e89d6c92905c">path</a>);</div>
<div class="line"><span class="lineno">  111</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac77579c4bad5769c1ed74f5990701cf5">acache</a>[i].<a class="code hl_variable" href="structNntpAcache.html#a33c62982769726fafeb4e89d6c92905c">path</a>);</div>
<div class="line"><span class="lineno">  112</span>    }</div>
<div class="line"><span class="lineno">  113</span>  }</div>
<div class="line"><span class="lineno">  114</span>}</div>
<div class="ttc" id="amemory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00062">memory.h:62</a></div></div>
<div class="ttc" id="anntp_2lib_8h_html_a1efe6072fe3f0f219d90675e1aa55f40"><div class="ttname"><a href="nntp_2lib_8h.html#a1efe6072fe3f0f219d90675e1aa55f40">NNTP_ACACHE_LEN</a></div><div class="ttdeci">#define NNTP_ACACHE_LEN</div><div class="ttdef"><b>Definition</b> <a href="nntp_2lib_8h_source.html#l00084">lib.h:84</a></div></div>
<div class="ttc" id="astructNntpAcache_html_a33c62982769726fafeb4e89d6c92905c"><div class="ttname"><a href="structNntpAcache.html#a33c62982769726fafeb4e89d6c92905c">NntpAcache::path</a></div><div class="ttdeci">char * path</div><div class="ttdoc">Cache path.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2lib_8h_source.html#l00071">lib.h:71</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_ac77579c4bad5769c1ed74f5990701cf5"><div class="ttname"><a href="structNntpMboxData.html#ac77579c4bad5769c1ed74f5990701cf5">NntpMboxData::acache</a></div><div class="ttdeci">struct NntpAcache acache[NNTP_ACACHE_LEN]</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00049">mdata.h:49</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_ac5290f190dba237467e63bd09ddc28c0_icgraph.svg" width="494" height="66"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a64fdec9977db62a95daa5af59d280673" name="a64fdec9977db62a95daa5af59d280673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64fdec9977db62a95daa5af59d280673">&#9670;&#160;</a></span>nntp_newsrc_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nntp_newsrc_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *</td>          <td class="paramname"><span class="paramname"><em>adata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock and close .newsrc file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>NNTP server </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00120">120</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  121</span>{</div>
<div class="line"><span class="lineno">  122</span>  <span class="keywordflow">if</span> (!adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a>)</div>
<div class="line"><span class="lineno">  123</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Unlocking %s\n&quot;</span>, adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>);</div>
<div class="line"><span class="lineno">  126</span>  <a class="code hl_function" href="file_8c.html#a58563edc1ad32b074fb2425a929b0f39">mutt_file_unlock</a>(fileno(adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a>));</div>
<div class="line"><span class="lineno">  127</span>  <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a>);</div>
<div class="line"><span class="lineno">  128</span>}</div>
<div class="ttc" id="afile_8c_html_a58563edc1ad32b074fb2425a929b0f39"><div class="ttname"><a href="file_8c.html#a58563edc1ad32b074fb2425a929b0f39">mutt_file_unlock</a></div><div class="ttdeci">int mutt_file_unlock(int fd)</div><div class="ttdoc">Unlock a file previously locked by mutt_file_lock()</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l01142">file.c:1142</a></div></div>
<div class="ttc" id="afile_8h_html_a9b519e795f098be88b93cd72c49a35ec"><div class="ttname"><a href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a></div><div class="ttdeci">#define mutt_file_fclose(FP)</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00139">file.h:139</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00090">logging2.h:90</a></div></div>
<div class="ttc" id="alogging2_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdeci">@ LL_DEBUG1</div><div class="ttdoc">Log at debug level 1.</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00044">logging2.h:44</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_aa463e0294965977e77014d13a7741b47"><div class="ttname"><a href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">NntpAccountData::fp_newsrc</a></div><div class="ttdeci">FILE * fp_newsrc</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00050">adata.h:50</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_ac66124453d57694fec9563cdbe65ce97"><div class="ttname"><a href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">NntpAccountData::newsrc_file</a></div><div class="ttdeci">char * newsrc_file</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00051">adata.h:51</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a64fdec9977db62a95daa5af59d280673_cgraph.svg" width="316" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a64fdec9977db62a95daa5af59d280673_icgraph.svg" width="722" height="495"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab375e79092001683947b61e4079db8c0" name="ab375e79092001683947b61e4079db8c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab375e79092001683947b61e4079db8c0">&#9670;&#160;</a></span>nntp_group_unread_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nntp_group_unread_stat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *</td>          <td class="paramname"><span class="paramname"><em>mdata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Count number of unread articles using .newsrc data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdata</td><td>NNTP <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> data </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00134">134</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  135</span>{</div>
<div class="line"><span class="lineno">  136</span>  mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a98dfbd45b53b18796fa524f87b8ce32e">unread</a> = 0;</div>
<div class="line"><span class="lineno">  137</span>  <span class="keywordflow">if</span> ((mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a3792d3aacd074ccb3cd92fcf686fa4e6">last_message</a> == 0) ||</div>
<div class="line"><span class="lineno">  138</span>      (mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#adc97f802d08bafa065d06fc76b84dd93">first_message</a> &gt; mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a3792d3aacd074ccb3cd92fcf686fa4e6">last_message</a>) || !mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>)</div>
<div class="line"><span class="lineno">  139</span>  {</div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  141</span>  }</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>  mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a98dfbd45b53b18796fa524f87b8ce32e">unread</a> = mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a3792d3aacd074ccb3cd92fcf686fa4e6">last_message</a> - mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#adc97f802d08bafa065d06fc76b84dd93">first_message</a> + 1;</div>
<div class="line"><span class="lineno">  144</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac07bf6c8bf2b97d0d99655a1e674304c">newsrc_len</a>; i++)</div>
<div class="line"><span class="lineno">  145</span>  {</div>
<div class="line"><span class="lineno">  146</span>    <a class="code hl_define" href="nntp_2lib_8h.html#afbe93ce95fbbf1758c93d4b123fc2246">anum_t</a> first = mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>[i].<a class="code hl_variable" href="structNewsrcEntry.html#a9754473230323401f3cfddcbdc560d0b">first</a>;</div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordflow">if</span> (first &lt; mdata-&gt;first_message)</div>
<div class="line"><span class="lineno">  148</span>      first = mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#adc97f802d08bafa065d06fc76b84dd93">first_message</a>;</div>
<div class="line"><span class="lineno">  149</span>    <a class="code hl_define" href="nntp_2lib_8h.html#afbe93ce95fbbf1758c93d4b123fc2246">anum_t</a> last = mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>[i].<a class="code hl_variable" href="structNewsrcEntry.html#a35e1d881699320677a0032b9fc207565">last</a>;</div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">if</span> (last &gt; mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a3792d3aacd074ccb3cd92fcf686fa4e6">last_message</a>)</div>
<div class="line"><span class="lineno">  151</span>      last = mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a3792d3aacd074ccb3cd92fcf686fa4e6">last_message</a>;</div>
<div class="line"><span class="lineno">  152</span>    <span class="keywordflow">if</span> (first &lt;= last)</div>
<div class="line"><span class="lineno">  153</span>      mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a98dfbd45b53b18796fa524f87b8ce32e">unread</a> -= last - first + 1;</div>
<div class="line"><span class="lineno">  154</span>  }</div>
<div class="line"><span class="lineno">  155</span>}</div>
<div class="ttc" id="anntp_2lib_8h_html_afbe93ce95fbbf1758c93d4b123fc2246"><div class="ttname"><a href="nntp_2lib_8h.html#afbe93ce95fbbf1758c93d4b123fc2246">anum_t</a></div><div class="ttdeci">#define anum_t</div><div class="ttdef"><b>Definition</b> <a href="nntp_2lib_8h_source.html#l00062">lib.h:62</a></div></div>
<div class="ttc" id="astructNewsrcEntry_html_a35e1d881699320677a0032b9fc207565"><div class="ttname"><a href="structNewsrcEntry.html#a35e1d881699320677a0032b9fc207565">NewsrcEntry::last</a></div><div class="ttdeci">anum_t last</div><div class="ttdoc">Last article number in run.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2lib_8h_source.html#l00080">lib.h:80</a></div></div>
<div class="ttc" id="astructNewsrcEntry_html_a9754473230323401f3cfddcbdc560d0b"><div class="ttname"><a href="structNewsrcEntry.html#a9754473230323401f3cfddcbdc560d0b">NewsrcEntry::first</a></div><div class="ttdeci">anum_t first</div><div class="ttdoc">First article number in run.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2lib_8h_source.html#l00079">lib.h:79</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_a3792d3aacd074ccb3cd92fcf686fa4e6"><div class="ttname"><a href="structNntpMboxData.html#a3792d3aacd074ccb3cd92fcf686fa4e6">NntpMboxData::last_message</a></div><div class="ttdeci">anum_t last_message</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_a9747475877d94ec69209a43352cf25cb"><div class="ttname"><a href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">NntpMboxData::newsrc_ent</a></div><div class="ttdeci">struct NewsrcEntry * newsrc_ent</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00047">mdata.h:47</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_a98dfbd45b53b18796fa524f87b8ce32e"><div class="ttname"><a href="structNntpMboxData.html#a98dfbd45b53b18796fa524f87b8ce32e">NntpMboxData::unread</a></div><div class="ttdeci">anum_t unread</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00041">mdata.h:41</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_ac07bf6c8bf2b97d0d99655a1e674304c"><div class="ttname"><a href="structNntpMboxData.html#ac07bf6c8bf2b97d0d99655a1e674304c">NntpMboxData::newsrc_len</a></div><div class="ttdeci">unsigned int newsrc_len</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00046">mdata.h:46</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_adc97f802d08bafa065d06fc76b84dd93"><div class="ttname"><a href="structNntpMboxData.html#adc97f802d08bafa065d06fc76b84dd93">NntpMboxData::first_message</a></div><div class="ttdeci">anum_t first_message</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00037">mdata.h:37</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_ab375e79092001683947b61e4079db8c0_icgraph.svg" width="371" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a57bd184c51b8701e9613761a629ca485" name="a57bd184c51b8701e9613761a629ca485"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57bd184c51b8701e9613761a629ca485">&#9670;&#160;</a></span>nntp_newsrc_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nntp_newsrc_parse </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *</td>          <td class="paramname"><span class="paramname"><em>adata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse .newsrc file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>NNTP server </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Not changed </td></tr>
    <tr><td class="paramname">1</td><td>Parsed </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00164">164</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  165</span>{</div>
<div class="line"><span class="lineno">  166</span>  <span class="keywordflow">if</span> (!adata)</div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>  <span class="keywordtype">char</span> *line = NULL;</div>
<div class="line"><span class="lineno">  170</span>  <span class="keyword">struct </span>stat st = { 0 };</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>  <span class="keywordflow">if</span> (adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a>)</div>
<div class="line"><span class="lineno">  173</span>  {</div>
<div class="line"><span class="lineno">  174</span>    <span class="comment">/* if we already have a handle, close it and reopen */</span></div>
<div class="line"><span class="lineno">  175</span>    <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a>);</div>
<div class="line"><span class="lineno">  176</span>  }</div>
<div class="line"><span class="lineno">  177</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  178</span>  {</div>
<div class="line"><span class="lineno">  179</span>    <span class="comment">/* if file doesn&#39;t exist, create it */</span></div>
<div class="line"><span class="lineno">  180</span>    adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a> = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>, <span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line"><span class="lineno">  181</span>    <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a>);</div>
<div class="line"><span class="lineno">  182</span>  }</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>  <span class="comment">/* open .newsrc */</span></div>
<div class="line"><span class="lineno">  185</span>  adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a> = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno">  186</span>  <span class="keywordflow">if</span> (!adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a>)</div>
<div class="line"><span class="lineno">  187</span>  {</div>
<div class="line"><span class="lineno">  188</span>    <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>);</div>
<div class="line"><span class="lineno">  189</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  190</span>  }</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>  <span class="comment">/* lock it */</span></div>
<div class="line"><span class="lineno">  193</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Locking %s\n&quot;</span>, adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>);</div>
<div class="line"><span class="lineno">  194</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="file_8c.html#a4cdd1f9b1b370cbf5a8348f63cfe67cf">mutt_file_lock</a>(fileno(adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a>), <span class="keyword">false</span>, <span class="keyword">true</span>))</div>
<div class="line"><span class="lineno">  195</span>  {</div>
<div class="line"><span class="lineno">  196</span>    <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a>);</div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  198</span>  }</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>  <span class="keywordflow">if</span> (stat(adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>, &amp;st) != 0)</div>
<div class="line"><span class="lineno">  201</span>  {</div>
<div class="line"><span class="lineno">  202</span>    <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>);</div>
<div class="line"><span class="lineno">  203</span>    <a class="code hl_function" href="#a64fdec9977db62a95daa5af59d280673">nntp_newsrc_close</a>(adata);</div>
<div class="line"><span class="lineno">  204</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  205</span>  }</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>  <span class="keywordflow">if</span> ((adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a12f478749b5ab10135a81d90ed0dc797">size</a> == st.st_size) &amp;&amp; (adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a8f59266cfb95512dfb9e2f900b7a2b54">mtime</a> == st.st_mtime))</div>
<div class="line"><span class="lineno">  208</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>  adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a12f478749b5ab10135a81d90ed0dc797">size</a> = st.st_size;</div>
<div class="line"><span class="lineno">  211</span>  adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a8f59266cfb95512dfb9e2f900b7a2b54">mtime</a> = st.st_mtime;</div>
<div class="line"><span class="lineno">  212</span>  adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a07329147457f52f9d362d7dc69bb0d68">newsrc_modified</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  213</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Parsing %s\n&quot;</span>, adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>);</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>  <span class="comment">/* .newsrc has been externally modified or hasn&#39;t been loaded yet */</span></div>
<div class="line"><span class="lineno">  216</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a37bf5f2141a2488012a0441694bae9bf">groups_num</a>; i++)</div>
<div class="line"><span class="lineno">  217</span>  {</div>
<div class="line"><span class="lineno">  218</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a17e649e29d0d7d8e6137647e62aa4b37">groups_list</a>[i];</div>
<div class="line"><span class="lineno">  219</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno">  220</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;<a class="code hl_variable" href="structNntpMboxData.html#af1fae146cb0fab012147cefe8791a8f6">subscribed</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  223</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_len = 0;</div>
<div class="line"><span class="lineno">  224</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent);</div>
<div class="line"><span class="lineno">  225</span>  }</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>  line = <a class="code hl_define" href="memory_8h.html#af997cb3719dc7abbeabae655d0ee1b9e">MUTT_MEM_MALLOC</a>(st.st_size + 1, <span class="keywordtype">char</span>);</div>
<div class="line"><span class="lineno">  228</span>  <span class="keywordflow">while</span> (st.st_size &amp;&amp; fgets(line, st.st_size + 1, <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#aa463e0294965977e77014d13a7741b47">fp_newsrc</a>))</div>
<div class="line"><span class="lineno">  229</span>  {</div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordtype">char</span> *b = NULL, *h = NULL;</div>
<div class="line"><span class="lineno">  231</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 1;</div>
<div class="line"><span class="lineno">  232</span>    <span class="keywordtype">bool</span> subs = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>    <span class="comment">/* find end of newsgroup name */</span></div>
<div class="line"><span class="lineno">  235</span>    <span class="keywordtype">char</span> *p = strpbrk(line, <span class="stringliteral">&quot;:!&quot;</span>);</div>
<div class="line"><span class="lineno">  236</span>    <span class="keywordflow">if</span> (!p)</div>
<div class="line"><span class="lineno">  237</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>    <span class="comment">/* &quot;:&quot; - subscribed, &quot;!&quot; - unsubscribed */</span></div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;:&#39;</span>)</div>
<div class="line"><span class="lineno">  241</span>      subs = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  242</span>    *p++ = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    <span class="comment">/* get newsgroup data */</span></div>
<div class="line"><span class="lineno">  245</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="#a9f33e774091672b52c32fcdf3a96b05c">mdata_find</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>, line);</div>
<div class="line"><span class="lineno">  246</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent);</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    <span class="comment">/* count number of entries */</span></div>
<div class="line"><span class="lineno">  249</span>    b = p;</div>
<div class="line"><span class="lineno">  250</span>    <span class="keywordflow">while</span> (*b)</div>
<div class="line"><span class="lineno">  251</span>      <span class="keywordflow">if</span> (*b++ == <span class="charliteral">&#39;,&#39;</span>)</div>
<div class="line"><span class="lineno">  252</span>        j++;</div>
<div class="line"><span class="lineno">  253</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent = <a class="code hl_define" href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a>(j, <span class="keyword">struct</span> <a class="code hl_struct" href="structNewsrcEntry.html">NewsrcEntry</a>);</div>
<div class="line"><span class="lineno">  254</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;subscribed = subs;</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>    <span class="comment">/* parse entries */</span></div>
<div class="line"><span class="lineno">  257</span>    j = 0;</div>
<div class="line"><span class="lineno">  258</span>    <span class="keywordflow">while</span> (p)</div>
<div class="line"><span class="lineno">  259</span>    {</div>
<div class="line"><span class="lineno">  260</span>      b = p;</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>      <span class="comment">/* find end of entry */</span></div>
<div class="line"><span class="lineno">  263</span>      p = strchr(p, <span class="charliteral">&#39;,&#39;</span>);</div>
<div class="line"><span class="lineno">  264</span>      <span class="keywordflow">if</span> (p)</div>
<div class="line"><span class="lineno">  265</span>        *p++ = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>      <span class="comment">/* first-last or single number */</span></div>
<div class="line"><span class="lineno">  268</span>      h = strchr(b, <span class="charliteral">&#39;-&#39;</span>);</div>
<div class="line"><span class="lineno">  269</span>      <span class="keywordflow">if</span> (h)</div>
<div class="line"><span class="lineno">  270</span>        *h++ = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  271</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  272</span>        h = b;</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>      <span class="keywordflow">if</span> ((sscanf(b, <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a>, &amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j].first) == 1) &amp;&amp;</div>
<div class="line"><span class="lineno">  275</span>          (sscanf(h, <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a>, &amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j].last) == 1))</div>
<div class="line"><span class="lineno">  276</span>      {</div>
<div class="line"><span class="lineno">  277</span>        j++;</div>
<div class="line"><span class="lineno">  278</span>      }</div>
<div class="line"><span class="lineno">  279</span>    }</div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordflow">if</span> (j == 0)</div>
<div class="line"><span class="lineno">  281</span>    {</div>
<div class="line"><span class="lineno">  282</span>      <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j].first = 1;</div>
<div class="line"><span class="lineno">  283</span>      <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j].last = 0;</div>
<div class="line"><span class="lineno">  284</span>      j++;</div>
<div class="line"><span class="lineno">  285</span>    }</div>
<div class="line"><span class="lineno">  286</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_message == 0)</div>
<div class="line"><span class="lineno">  287</span>      <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_message = <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j - 1].last;</div>
<div class="line"><span class="lineno">  288</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_len = j;</div>
<div class="line"><span class="lineno">  289</span>    <a class="code hl_define" href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a>(&amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent, j, <span class="keyword">struct</span> <a class="code hl_struct" href="structNewsrcEntry.html">NewsrcEntry</a>);</div>
<div class="line"><span class="lineno">  290</span>    <a class="code hl_function" href="#ab375e79092001683947b61e4079db8c0">nntp_group_unread_stat</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>);</div>
<div class="line"><span class="lineno">  291</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;group);</div>
<div class="line"><span class="lineno">  292</span>  }</div>
<div class="line"><span class="lineno">  293</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;line);</div>
<div class="line"><span class="lineno">  294</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  295</span>}</div>
<div class="ttc" id="afile_8c_html_a4cdd1f9b1b370cbf5a8348f63cfe67cf"><div class="ttname"><a href="file_8c.html#a4cdd1f9b1b370cbf5a8348f63cfe67cf">mutt_file_lock</a></div><div class="ttdeci">int mutt_file_lock(int fd, bool excl, bool timeout)</div><div class="ttdoc">(Try to) Lock a file using fcntl()</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l01095">file.c:1095</a></div></div>
<div class="ttc" id="afile_8h_html_a9fa358d76519cb6bc8ffca5850976d46"><div class="ttname"><a href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a></div><div class="ttdeci">#define mutt_file_fopen(PATH, MODE)</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00138">file.h:138</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00094">logging2.h:94</a></div></div>
<div class="ttc" id="alogging2_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3"><div class="ttname"><a href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a></div><div class="ttdeci">@ LL_DEBUG2</div><div class="ttdoc">Log at debug level 2.</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00045">logging2.h:45</a></div></div>
<div class="ttc" id="amemory_8h_html_a9aaf8f21a29735767a069ff1aee9d7d9"><div class="ttname"><a href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a></div><div class="ttdeci">#define MUTT_MEM_CALLOC(n, type)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00047">memory.h:47</a></div></div>
<div class="ttc" id="amemory_8h_html_af997cb3719dc7abbeabae655d0ee1b9e"><div class="ttname"><a href="memory_8h.html#af997cb3719dc7abbeabae655d0ee1b9e">MUTT_MEM_MALLOC</a></div><div class="ttdeci">#define MUTT_MEM_MALLOC(n, type)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00048">memory.h:48</a></div></div>
<div class="ttc" id="anewsrc_8c_html_a64fdec9977db62a95daa5af59d280673"><div class="ttname"><a href="#a64fdec9977db62a95daa5af59d280673">nntp_newsrc_close</a></div><div class="ttdeci">void nntp_newsrc_close(struct NntpAccountData *adata)</div><div class="ttdoc">Unlock and close .newsrc file.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00120">newsrc.c:120</a></div></div>
<div class="ttc" id="anewsrc_8c_html_a9f33e774091672b52c32fcdf3a96b05c"><div class="ttname"><a href="#a9f33e774091672b52c32fcdf3a96b05c">mdata_find</a></div><div class="ttdeci">static struct NntpMboxData * mdata_find(struct NntpAccountData *adata, const char *group)</div><div class="ttdoc">Find NntpMboxData for given newsgroup or add it.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00074">newsrc.c:74</a></div></div>
<div class="ttc" id="anewsrc_8c_html_ab375e79092001683947b61e4079db8c0"><div class="ttname"><a href="#ab375e79092001683947b61e4079db8c0">nntp_group_unread_stat</a></div><div class="ttdeci">void nntp_group_unread_stat(struct NntpMboxData *mdata)</div><div class="ttdoc">Count number of unread articles using .newsrc data.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00134">newsrc.c:134</a></div></div>
<div class="ttc" id="anntp_2lib_8h_html_a9d3ef937cceedd7b24520f69c5191d68"><div class="ttname"><a href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a></div><div class="ttdeci">#define ANUM_FMT</div><div class="ttdef"><b>Definition</b> <a href="nntp_2lib_8h_source.html#l00063">lib.h:63</a></div></div>
<div class="ttc" id="astructNewsrcEntry_html"><div class="ttname"><a href="structNewsrcEntry.html">NewsrcEntry</a></div><div class="ttdoc">An entry in a .newsrc (subscribed newsgroups)</div><div class="ttdef"><b>Definition</b> <a href="nntp_2lib_8h_source.html#l00077">lib.h:78</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_a07329147457f52f9d362d7dc69bb0d68"><div class="ttname"><a href="structNntpAccountData.html#a07329147457f52f9d362d7dc69bb0d68">NntpAccountData::newsrc_modified</a></div><div class="ttdeci">bool newsrc_modified</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00049">adata.h:49</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_a12f478749b5ab10135a81d90ed0dc797"><div class="ttname"><a href="structNntpAccountData.html#a12f478749b5ab10135a81d90ed0dc797">NntpAccountData::size</a></div><div class="ttdeci">off_t size</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00054">adata.h:54</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_a8f59266cfb95512dfb9e2f900b7a2b54"><div class="ttname"><a href="structNntpAccountData.html#a8f59266cfb95512dfb9e2f900b7a2b54">NntpAccountData::mtime</a></div><div class="ttdeci">time_t mtime</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00055">adata.h:55</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_af1fae146cb0fab012147cefe8791a8f6"><div class="ttname"><a href="structNntpMboxData.html#af1fae146cb0fab012147cefe8791a8f6">NntpMboxData::subscribed</a></div><div class="ttdeci">bool subscribed</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00042">mdata.h:42</a></div></div>
</div><!-- fragment --><div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a57bd184c51b8701e9613761a629ca485_cgraph.svg" width="371" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a57bd184c51b8701e9613761a629ca485_icgraph.svg" width="358" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a21d6dfb74310c442a524deed9579395a" name="a21d6dfb74310c442a524deed9579395a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21d6dfb74310c442a524deed9579395a">&#9670;&#160;</a></span>nntp_newsrc_gen_entries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nntp_newsrc_gen_entries </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate array of .newsrc entries. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00301">301</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  302</span>{</div>
<div class="line"><span class="lineno">  303</span>  <span class="keywordflow">if</span> (!m)</div>
<div class="line"><span class="lineno">  304</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = m-&gt;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>;</div>
<div class="line"><span class="lineno">  307</span>  <a class="code hl_define" href="nntp_2lib_8h.html#afbe93ce95fbbf1758c93d4b123fc2246">anum_t</a> last = 0, first = 1;</div>
<div class="line"><span class="lineno">  308</span>  <span class="keywordtype">bool</span> series;</div>
<div class="line"><span class="lineno">  309</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> entries;</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4">EmailSortType</a> c_sort = <a class="code hl_function" href="config_2helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>);</div>
<div class="line"><span class="lineno">  312</span>  <span class="keywordflow">if</span> (c_sort != <a class="code hl_enumvalue" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4aa5fa714c8f7a789cb67f5d22cd014361">EMAIL_SORT_UNSORTED</a>)</div>
<div class="line"><span class="lineno">  313</span>  {</div>
<div class="line"><span class="lineno">  314</span>    <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>, <a class="code hl_enumvalue" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4aa5fa714c8f7a789cb67f5d22cd014361">EMAIL_SORT_UNSORTED</a>, NULL);</div>
<div class="line"><span class="lineno">  315</span>    <a class="code hl_function" href="core_2mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code hl_enumvalue" href="core_2mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f">NT_MAILBOX_RESORT</a>);</div>
<div class="line"><span class="lineno">  316</span>  }</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>  entries = <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_len;</div>
<div class="line"><span class="lineno">  319</span>  <span class="keywordflow">if</span> (!entries)</div>
<div class="line"><span class="lineno">  320</span>  {</div>
<div class="line"><span class="lineno">  321</span>    entries = 5;</div>
<div class="line"><span class="lineno">  322</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent = <a class="code hl_define" href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a>(entries, <span class="keyword">struct</span> <a class="code hl_struct" href="structNewsrcEntry.html">NewsrcEntry</a>);</div>
<div class="line"><span class="lineno">  323</span>  }</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>  <span class="comment">/* Set up to fake initial sequence from 1 to the article before the</span></div>
<div class="line"><span class="lineno">  326</span><span class="comment">   * first article in our list */</span></div>
<div class="line"><span class="lineno">  327</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_len = 0;</div>
<div class="line"><span class="lineno">  328</span>  series = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  329</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno">  330</span>  {</div>
<div class="line"><span class="lineno">  331</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno">  333</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>    <span class="comment">/* search for first unread */</span></div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordflow">if</span> (series)</div>
<div class="line"><span class="lineno">  337</span>    {</div>
<div class="line"><span class="lineno">  338</span>      <span class="comment">/* We don&#39;t actually check sequential order, since we mark</span></div>
<div class="line"><span class="lineno">  339</span><span class="comment">       * &quot;missing&quot; entries as read/deleted */</span></div>
<div class="line"><span class="lineno">  340</span>      last = <a class="code hl_function" href="nntp_2edata_8c.html#a78e1fab53bc6f3d3813bcef508414349">nntp_edata_get</a>(e)-&gt;<a class="code hl_variable" href="structNntpEmailData.html#a664cb7fd06434c6a0769467038b99f8a">article_num</a>;</div>
<div class="line"><span class="lineno">  341</span>      <span class="keywordflow">if</span> ((last &gt;= mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#adc97f802d08bafa065d06fc76b84dd93">first_message</a>) &amp;&amp; !e-&gt;<a class="code hl_variable" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> &amp;&amp; !e-&gt;<a class="code hl_variable" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a>)</div>
<div class="line"><span class="lineno">  342</span>      {</div>
<div class="line"><span class="lineno">  343</span>        <span class="keywordflow">if</span> (mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac07bf6c8bf2b97d0d99655a1e674304c">newsrc_len</a> &gt;= entries)</div>
<div class="line"><span class="lineno">  344</span>        {</div>
<div class="line"><span class="lineno">  345</span>          entries *= 2;</div>
<div class="line"><span class="lineno">  346</span>          <a class="code hl_define" href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>, entries, <span class="keyword">struct</span> <a class="code hl_struct" href="structNewsrcEntry.html">NewsrcEntry</a>);</div>
<div class="line"><span class="lineno">  347</span>        }</div>
<div class="line"><span class="lineno">  348</span>        mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>[mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac07bf6c8bf2b97d0d99655a1e674304c">newsrc_len</a>].<a class="code hl_variable" href="structNewsrcEntry.html#a9754473230323401f3cfddcbdc560d0b">first</a> = first;</div>
<div class="line"><span class="lineno">  349</span>        mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>[mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac07bf6c8bf2b97d0d99655a1e674304c">newsrc_len</a>].<a class="code hl_variable" href="structNewsrcEntry.html#a35e1d881699320677a0032b9fc207565">last</a> = last - 1;</div>
<div class="line"><span class="lineno">  350</span>        mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac07bf6c8bf2b97d0d99655a1e674304c">newsrc_len</a>++;</div>
<div class="line"><span class="lineno">  351</span>        series = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  352</span>      }</div>
<div class="line"><span class="lineno">  353</span>    }</div>
<div class="line"><span class="lineno">  354</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  355</span>    {</div>
<div class="line"><span class="lineno">  356</span>      <span class="comment">/* search for first read */</span></div>
<div class="line"><span class="lineno">  357</span>      <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> || e-&gt;<a class="code hl_variable" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a>)</div>
<div class="line"><span class="lineno">  358</span>      {</div>
<div class="line"><span class="lineno">  359</span>        first = last + 1;</div>
<div class="line"><span class="lineno">  360</span>        series = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  361</span>      }</div>
<div class="line"><span class="lineno">  362</span>      last = <a class="code hl_function" href="nntp_2edata_8c.html#a78e1fab53bc6f3d3813bcef508414349">nntp_edata_get</a>(e)-&gt;<a class="code hl_variable" href="structNntpEmailData.html#a664cb7fd06434c6a0769467038b99f8a">article_num</a>;</div>
<div class="line"><span class="lineno">  363</span>    }</div>
<div class="line"><span class="lineno">  364</span>  }</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>  <span class="keywordflow">if</span> (series &amp;&amp; (first &lt;= mdata-&gt;last_loaded))</div>
<div class="line"><span class="lineno">  367</span>  {</div>
<div class="line"><span class="lineno">  368</span>    <span class="keywordflow">if</span> (mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac07bf6c8bf2b97d0d99655a1e674304c">newsrc_len</a> &gt;= entries)</div>
<div class="line"><span class="lineno">  369</span>    {</div>
<div class="line"><span class="lineno">  370</span>      entries++;</div>
<div class="line"><span class="lineno">  371</span>      <a class="code hl_define" href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>, entries, <span class="keyword">struct</span> <a class="code hl_struct" href="structNewsrcEntry.html">NewsrcEntry</a>);</div>
<div class="line"><span class="lineno">  372</span>    }</div>
<div class="line"><span class="lineno">  373</span>    mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>[mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac07bf6c8bf2b97d0d99655a1e674304c">newsrc_len</a>].<a class="code hl_variable" href="structNewsrcEntry.html#a9754473230323401f3cfddcbdc560d0b">first</a> = first;</div>
<div class="line"><span class="lineno">  374</span>    mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>[mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac07bf6c8bf2b97d0d99655a1e674304c">newsrc_len</a>].<a class="code hl_variable" href="structNewsrcEntry.html#a35e1d881699320677a0032b9fc207565">last</a> = mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9cecad8ca33cea69ef91939fc3088e72">last_loaded</a>;</div>
<div class="line"><span class="lineno">  375</span>    mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac07bf6c8bf2b97d0d99655a1e674304c">newsrc_len</a>++;</div>
<div class="line"><span class="lineno">  376</span>  }</div>
<div class="line"><span class="lineno">  377</span>  <a class="code hl_define" href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>, mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#ac07bf6c8bf2b97d0d99655a1e674304c">newsrc_len</a>, <span class="keyword">struct</span> <a class="code hl_struct" href="structNewsrcEntry.html">NewsrcEntry</a>);</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>  <span class="keywordflow">if</span> (c_sort != <a class="code hl_enumvalue" href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4aa5fa714c8f7a789cb67f5d22cd014361">EMAIL_SORT_UNSORTED</a>)</div>
<div class="line"><span class="lineno">  380</span>  {</div>
<div class="line"><span class="lineno">  381</span>    <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;sort&quot;</span>, c_sort, NULL);</div>
<div class="line"><span class="lineno">  382</span>    <a class="code hl_function" href="core_2mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code hl_enumvalue" href="core_2mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f">NT_MAILBOX_RESORT</a>);</div>
<div class="line"><span class="lineno">  383</span>  }</div>
<div class="line"><span class="lineno">  384</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_af7f3de51c3c2f5b8f527f40c8397a3fc"><div class="ttname"><a href="config_2helpers_8c.html#af7f3de51c3c2f5b8f527f40c8397a3fc">cs_subset_sort</a></div><div class="ttdeci">short cs_subset_sort(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a sort config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00266">helpers.c:266</a></div></div>
<div class="ttc" id="acore_2mailbox_8c_html_af09ac36728ca3255523cd3b0bfd1f172"><div class="ttname"><a href="core_2mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a></div><div class="ttdeci">void mailbox_changed(struct Mailbox *m, enum NotifyMailbox action)</div><div class="ttdoc">Notify observers of a change to a Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8c_source.html#l00233">mailbox.c:233</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f"><div class="ttname"><a href="core_2mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f">NT_MAILBOX_RESORT</a></div><div class="ttdeci">@ NT_MAILBOX_RESORT</div><div class="ttdoc">Email list needs resorting.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00190">mailbox.h:190</a></div></div>
<div class="ttc" id="aemail_2sort_8h_html_aefa89e4f16231d09e09e4693bebf6dd4"><div class="ttname"><a href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4">EmailSortType</a></div><div class="ttdeci">EmailSortType</div><div class="ttdoc">Methods for sorting Emails.</div><div class="ttdef"><b>Definition</b> <a href="email_2sort_8h_source.html#l00052">sort.h:53</a></div></div>
<div class="ttc" id="aemail_2sort_8h_html_aefa89e4f16231d09e09e4693bebf6dd4aa5fa714c8f7a789cb67f5d22cd014361"><div class="ttname"><a href="email_2sort_8h.html#aefa89e4f16231d09e09e4693bebf6dd4aa5fa714c8f7a789cb67f5d22cd014361">EMAIL_SORT_UNSORTED</a></div><div class="ttdeci">@ EMAIL_SORT_UNSORTED</div><div class="ttdoc">Sort by the order the messages appear in the mailbox.</div><div class="ttdef"><b>Definition</b> <a href="email_2sort_8h_source.html#l00064">sort.h:64</a></div></div>
<div class="ttc" id="anntp_2edata_8c_html_a78e1fab53bc6f3d3813bcef508414349"><div class="ttname"><a href="nntp_2edata_8c.html#a78e1fab53bc6f3d3813bcef508414349">nntp_edata_get</a></div><div class="ttdeci">struct NntpEmailData * nntp_edata_get(struct Email *e)</div><div class="ttdoc">Get the private data for this Email.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2edata_8c_source.html#l00060">edata.c:60</a></div></div>
<div class="ttc" id="astructEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00038">email.h:39</a></div></div>
<div class="ttc" id="astructEmail_html_a0bd79550be901d44e50953fb43614e10"><div class="ttname"><a href="structEmail.html#a0bd79550be901d44e50953fb43614e10">Email::read</a></div><div class="ttdeci">bool read</div><div class="ttdoc">Email is read.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00050">email.h:50</a></div></div>
<div class="ttc" id="astructEmail_html_ac5db33e3d6d9723d8e496078d5769567"><div class="ttname"><a href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">Email::deleted</a></div><div class="ttdeci">bool deleted</div><div class="ttdoc">Email is deleted.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00078">email.h:78</a></div></div>
<div class="ttc" id="astructMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00088">mailbox.h:88</a></div></div>
<div class="ttc" id="astructMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00096">mailbox.h:96</a></div></div>
<div class="ttc" id="astructNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00042">neomutt.h:43</a></div></div>
<div class="ttc" id="astructNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00047">neomutt.h:47</a></div></div>
<div class="ttc" id="astructNntpEmailData_html_a664cb7fd06434c6a0769467038b99f8a"><div class="ttname"><a href="structNntpEmailData.html#a664cb7fd06434c6a0769467038b99f8a">NntpEmailData::article_num</a></div><div class="ttdeci">anum_t article_num</div><div class="ttdoc">NNTP article number.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2edata_8h_source.html#l00036">edata.h:36</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_a9cecad8ca33cea69ef91939fc3088e72"><div class="ttname"><a href="structNntpMboxData.html#a9cecad8ca33cea69ef91939fc3088e72">NntpMboxData::last_loaded</a></div><div class="ttdeci">anum_t last_loaded</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00039">mdata.h:39</a></div></div>
<div class="ttc" id="asubset_8c_html_a6ee598a96defed645b11cad6e6cb6512"><div class="ttname"><a href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a></div><div class="ttdeci">int cs_subset_str_native_set(const struct ConfigSubset *sub, const char *name, intptr_t value, struct Buffer *err)</div><div class="ttdoc">Natively set the value of a string config item.</div><div class="ttdef"><b>Definition</b> <a href="subset_8c_source.html#l00303">subset.c:303</a></div></div>
</div><!-- fragment --><div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a21d6dfb74310c442a524deed9579395a_cgraph.svg" width="410" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a21d6dfb74310c442a524deed9579395a_icgraph.svg" width="362" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a400892d96104e348988b980faace6d3f" name="a400892d96104e348988b980faace6d3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a400892d96104e348988b980faace6d3f">&#9670;&#160;</a></span>update_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_file </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update file with new contents. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>File to update </td></tr>
    <tr><td class="paramname">buf</td><td>New context </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00393">393</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  394</span>{</div>
<div class="line"><span class="lineno">  395</span>  FILE *fp = NULL;</div>
<div class="line"><span class="lineno">  396</span>  <span class="keywordtype">char</span> tempfile[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno">  397</span>  <span class="keywordtype">int</span> rc = -1;</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>  <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  400</span>  {</div>
<div class="line"><span class="lineno">  401</span>    snprintf(tempfile, <span class="keyword">sizeof</span>(tempfile), <span class="stringliteral">&quot;%s.tmp&quot;</span>, filename);</div>
<div class="line"><span class="lineno">  402</span>    fp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(tempfile, <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"><span class="lineno">  403</span>    <span class="keywordflow">if</span> (!fp)</div>
<div class="line"><span class="lineno">  404</span>    {</div>
<div class="line"><span class="lineno">  405</span>      <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, tempfile);</div>
<div class="line"><span class="lineno">  406</span>      *tempfile = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  407</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  408</span>    }</div>
<div class="line"><span class="lineno">  409</span>    <span class="keywordflow">if</span> (fputs(buf, fp) == EOF)</div>
<div class="line"><span class="lineno">  410</span>    {</div>
<div class="line"><span class="lineno">  411</span>      <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, tempfile);</div>
<div class="line"><span class="lineno">  412</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  413</span>    }</div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp) == EOF)</div>
<div class="line"><span class="lineno">  415</span>    {</div>
<div class="line"><span class="lineno">  416</span>      <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, tempfile);</div>
<div class="line"><span class="lineno">  417</span>      fp = NULL;</div>
<div class="line"><span class="lineno">  418</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  419</span>    }</div>
<div class="line"><span class="lineno">  420</span>    fp = NULL;</div>
<div class="line"><span class="lineno">  421</span>    <span class="keywordflow">if</span> (rename(tempfile, filename) &lt; 0)</div>
<div class="line"><span class="lineno">  422</span>    {</div>
<div class="line"><span class="lineno">  423</span>      <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, filename);</div>
<div class="line"><span class="lineno">  424</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  425</span>    }</div>
<div class="line"><span class="lineno">  426</span>    *tempfile = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  427</span>    rc = 0;</div>
<div class="line"><span class="lineno">  428</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  429</span>  }</div>
<div class="line"><span class="lineno">  430</span>  <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp);</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span>  <span class="keywordflow">if</span> (*tempfile)</div>
<div class="line"><span class="lineno">  433</span>    unlink(tempfile);</div>
<div class="line"><span class="lineno">  434</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  435</span>}</div>
<div class="ttc" id="amutt_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00042">mutt.h:42</a></div></div>
</div><!-- fragment --><div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a400892d96104e348988b980faace6d3f_icgraph.svg" width="316" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6ae05e2f17614ff64c3429ac40ec5119" name="a6ae05e2f17614ff64c3429ac40ec5119"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ae05e2f17614ff64c3429ac40ec5119">&#9670;&#160;</a></span>nntp_newsrc_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nntp_newsrc_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *</td>          <td class="paramname"><span class="paramname"><em>adata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update .newsrc file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>NNTP server </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00443">443</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  444</span>{</div>
<div class="line"><span class="lineno">  445</span>  <span class="keywordflow">if</span> (!adata)</div>
<div class="line"><span class="lineno">  446</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span>  <span class="keywordtype">int</span> rc = -1;</div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>  <span class="keywordtype">size_t</span> buflen = 10240;</div>
<div class="line"><span class="lineno">  451</span>  <span class="keywordtype">char</span> *buf = <a class="code hl_define" href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a>(buflen, <span class="keywordtype">char</span>);</div>
<div class="line"><span class="lineno">  452</span>  <span class="keywordtype">size_t</span> off = 0;</div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>  <span class="comment">/* we will generate full newsrc here */</span></div>
<div class="line"><span class="lineno">  455</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a37bf5f2141a2488012a0441694bae9bf">groups_num</a>; i++)</div>
<div class="line"><span class="lineno">  456</span>  {</div>
<div class="line"><span class="lineno">  457</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a17e649e29d0d7d8e6137647e62aa4b37">groups_list</a>[i];</div>
<div class="line"><span class="lineno">  458</span> </div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> || !<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent)</div>
<div class="line"><span class="lineno">  460</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>    <span class="comment">/* write newsgroup name */</span></div>
<div class="line"><span class="lineno">  463</span>    <span class="keywordflow">if</span> ((off + strlen(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;group) + 3) &gt; buflen)</div>
<div class="line"><span class="lineno">  464</span>    {</div>
<div class="line"><span class="lineno">  465</span>      buflen *= 2;</div>
<div class="line"><span class="lineno">  466</span>      <a class="code hl_define" href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a>(&amp;buf, buflen, <span class="keywordtype">char</span>);</div>
<div class="line"><span class="lineno">  467</span>    }</div>
<div class="line"><span class="lineno">  468</span>    snprintf(buf + off, buflen - off, <span class="stringliteral">&quot;%s%c &quot;</span>, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;group, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;subscribed ? <span class="charliteral">&#39;:&#39;</span> : <span class="charliteral">&#39;!&#39;</span>);</div>
<div class="line"><span class="lineno">  469</span>    off += strlen(buf + off);</div>
<div class="line"><span class="lineno">  470</span> </div>
<div class="line"><span class="lineno">  471</span>    <span class="comment">/* write entries */</span></div>
<div class="line"><span class="lineno">  472</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_len; j++)</div>
<div class="line"><span class="lineno">  473</span>    {</div>
<div class="line"><span class="lineno">  474</span>      <span class="keywordflow">if</span> ((off + 1024) &gt; buflen)</div>
<div class="line"><span class="lineno">  475</span>      {</div>
<div class="line"><span class="lineno">  476</span>        buflen *= 2;</div>
<div class="line"><span class="lineno">  477</span>        <a class="code hl_define" href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a>(&amp;buf, buflen, <span class="keywordtype">char</span>);</div>
<div class="line"><span class="lineno">  478</span>      }</div>
<div class="line"><span class="lineno">  479</span>      <span class="keywordflow">if</span> (j)</div>
<div class="line"><span class="lineno">  480</span>        buf[off++] = <span class="charliteral">&#39;,&#39;</span>;</div>
<div class="line"><span class="lineno">  481</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j].first == <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j].last)</div>
<div class="line"><span class="lineno">  482</span>      {</div>
<div class="line"><span class="lineno">  483</span>        snprintf(buf + off, buflen - off, <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a>, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j].first);</div>
<div class="line"><span class="lineno">  484</span>      }</div>
<div class="line"><span class="lineno">  485</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j].first &lt; <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j].last)</div>
<div class="line"><span class="lineno">  486</span>      {</div>
<div class="line"><span class="lineno">  487</span>        snprintf(buf + off, buflen - off, <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a> <span class="stringliteral">&quot;-&quot;</span> <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a>,</div>
<div class="line"><span class="lineno">  488</span>                 <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j].first, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[j].last);</div>
<div class="line"><span class="lineno">  489</span>      }</div>
<div class="line"><span class="lineno">  490</span>      off += strlen(buf + off);</div>
<div class="line"><span class="lineno">  491</span>    }</div>
<div class="line"><span class="lineno">  492</span>    buf[off++] = <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><span class="lineno">  493</span>  }</div>
<div class="line"><span class="lineno">  494</span>  buf[off] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>  <span class="comment">/* newrc being fully rewritten */</span></div>
<div class="line"><span class="lineno">  497</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Updating %s\n&quot;</span>, <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>);</div>
<div class="line"><span class="lineno">  498</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a> &amp;&amp; (<a class="code hl_function" href="#a400892d96104e348988b980faace6d3f">update_file</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>, buf) == 0))</div>
<div class="line"><span class="lineno">  499</span>  {</div>
<div class="line"><span class="lineno">  500</span>    <span class="keyword">struct </span>stat st = { 0 };</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>    rc = stat(adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>, &amp;st);</div>
<div class="line"><span class="lineno">  503</span>    <span class="keywordflow">if</span> (rc == 0)</div>
<div class="line"><span class="lineno">  504</span>    {</div>
<div class="line"><span class="lineno">  505</span>      adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a12f478749b5ab10135a81d90ed0dc797">size</a> = st.st_size;</div>
<div class="line"><span class="lineno">  506</span>      adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a8f59266cfb95512dfb9e2f900b7a2b54">mtime</a> = st.st_mtime;</div>
<div class="line"><span class="lineno">  507</span>    }</div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  509</span>    {</div>
<div class="line"><span class="lineno">  510</span>      <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>);</div>
<div class="line"><span class="lineno">  511</span>    }</div>
<div class="line"><span class="lineno">  512</span>  }</div>
<div class="line"><span class="lineno">  513</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  514</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  515</span>}</div>
<div class="ttc" id="anewsrc_8c_html_a400892d96104e348988b980faace6d3f"><div class="ttname"><a href="#a400892d96104e348988b980faace6d3f">update_file</a></div><div class="ttdeci">static int update_file(char *filename, char *buf)</div><div class="ttdoc">Update file with new contents.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00393">newsrc.c:393</a></div></div>
</div><!-- fragment --><div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a6ae05e2f17614ff64c3429ac40ec5119_cgraph.svg" width="298" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a6ae05e2f17614ff64c3429ac40ec5119_icgraph.svg" width="367" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8d3a7328ed6d800fc41fb83e20db792a" name="a8d3a7328ed6d800fc41fb83e20db792a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d3a7328ed6d800fc41fb83e20db792a">&#9670;&#160;</a></span>cache_expand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cache_expand </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>dst</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>dstlen</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConnAccount.html">ConnAccount</a> *</td>          <td class="paramname"><span class="paramname"><em>cac</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>src</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make fully qualified cache file name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer.">Buffer</a> for filename </td></tr>
    <tr><td class="paramname">dstlen</td><td>Length of buffer </td></tr>
    <tr><td class="paramname">cac</td><td><a class="el" href="structAccount.html" title="A group of associated Mailboxes.">Account</a> </td></tr>
    <tr><td class="paramname">src</td><td>Path to add to the URL </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00524">524</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  525</span>{</div>
<div class="line"><span class="lineno">  526</span>  <span class="keywordtype">char</span> file[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno">  527</span> </div>
<div class="line"><span class="lineno">  528</span>  <span class="comment">/* server subdirectory */</span></div>
<div class="line"><span class="lineno">  529</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structUrl.html">Url</a> url = { 0 };</div>
<div class="line"><span class="lineno">  530</span>  <a class="code hl_function" href="mutt__account_8c.html#aab5936a62e77123420e4c515904567f3">account_to_url</a>(cac, &amp;url);</div>
<div class="line"><span class="lineno">  531</span>  url.<a class="code hl_variable" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(<a class="code hl_variable" href="structUrl.html#a9e7df736f4e72353af3360b8e2b2c9cf">src</a>);</div>
<div class="line"><span class="lineno">  532</span>  <a class="code hl_function" href="url_8c.html#aa114f683b940e0773ca758b49a18a2a7">url_tostring</a>(&amp;url, file, <span class="keyword">sizeof</span>(file), <a class="code hl_define" href="url_8h.html#a2f7d340c7b07a0b212e6ba7c9d1c52fa">U_PATH</a>);</div>
<div class="line"><span class="lineno">  533</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;url.<a class="code hl_variable" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a>);</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>  <span class="comment">/* remove trailing slash */</span></div>
<div class="line"><span class="lineno">  536</span>  <span class="keywordtype">char</span> *c = file + strlen(file) - 1;</div>
<div class="line"><span class="lineno">  537</span>  <span class="keywordflow">if</span> (*c == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><span class="lineno">  538</span>    *c = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *tmp = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  541</span>  <a class="code hl_function" href="buffer_8c.html#a9924e74ddcb5280ab380e4627d1fba99">buf_addstr</a>(tmp, file);</div>
<div class="line"><span class="lineno">  542</span>  <a class="code hl_function" href="muttlib_8c.html#aeac015518fd637e7822d8e679dc3d18f">mutt_encode_path</a>(tmp, file);</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_news_cache_dir = <a class="code hl_function" href="config_2helpers_8c.html#a9f184e61342916799259930333f4205f">cs_subset_path</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;news_cache_dir&quot;</span>);</div>
<div class="line"><span class="lineno">  545</span>  snprintf(dst, dstlen, <span class="stringliteral">&quot;%s/%s&quot;</span>, c_news_cache_dir, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tmp));</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;tmp);</div>
<div class="line"><span class="lineno">  548</span>}</div>
<div class="ttc" id="abuffer_8c_html_a9924e74ddcb5280ab380e4627d1fba99"><div class="ttname"><a href="buffer_8c.html#a9924e74ddcb5280ab380e4627d1fba99">buf_addstr</a></div><div class="ttdeci">size_t buf_addstr(struct Buffer *buf, const char *s)</div><div class="ttdoc">Add a string to a Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00226">buffer.c:226</a></div></div>
<div class="ttc" id="abuffer_8h_html_a728ebc5a947b77c8d56db44ce553a7ab"><div class="ttname"><a href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a></div><div class="ttdeci">static const char * buf_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00096">buffer.h:96</a></div></div>
<div class="ttc" id="aconfig_2helpers_8c_html_a9f184e61342916799259930333f4205f"><div class="ttname"><a href="config_2helpers_8c.html#a9f184e61342916799259930333f4205f">cs_subset_path</a></div><div class="ttdeci">const char * cs_subset_path(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a path config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00168">helpers.c:168</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a3fe33d90e4814281cd57de048119c950"><div class="ttname"><a href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a></div><div class="ttdeci">char * mutt_str_dup(const char *str)</div><div class="ttdoc">Copy a string, safely.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00255">string.c:255</a></div></div>
<div class="ttc" id="amutt__account_8c_html_aab5936a62e77123420e4c515904567f3"><div class="ttname"><a href="mutt__account_8c.html#aab5936a62e77123420e4c515904567f3">account_to_url</a></div><div class="ttdeci">void account_to_url(struct ConnAccount *cac, struct Url *url)</div><div class="ttdoc">Fill URL with info from account.</div><div class="ttdef"><b>Definition</b> <a href="mutt__account_8c_source.html#l00080">mutt_account.c:80</a></div></div>
<div class="ttc" id="amuttlib_8c_html_aeac015518fd637e7822d8e679dc3d18f"><div class="ttname"><a href="muttlib_8c.html#aeac015518fd637e7822d8e679dc3d18f">mutt_encode_path</a></div><div class="ttdeci">void mutt_encode_path(struct Buffer *buf, const char *src)</div><div class="ttdoc">Convert a path to &#39;us-ascii&#39;.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00857">muttlib.c:857</a></div></div>
<div class="ttc" id="apool_8c_html_a41cba27c25d33cb6822789a2856093f2"><div class="ttname"><a href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a></div><div class="ttdeci">struct Buffer * buf_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00082">pool.c:82</a></div></div>
<div class="ttc" id="apool_8c_html_a4cc6068279461cb8628219586dfa35a1"><div class="ttname"><a href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a></div><div class="ttdeci">void buf_pool_release(struct Buffer **ptr)</div><div class="ttdoc">Return a Buffer to the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00096">pool.c:96</a></div></div>
<div class="ttc" id="astructBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00035">buffer.h:36</a></div></div>
<div class="ttc" id="astructUrl_html"><div class="ttname"><a href="structUrl.html">Url</a></div><div class="ttdoc">A parsed URL proto://user:password@host:port/path?a=1&amp;b=2</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00068">url.h:69</a></div></div>
<div class="ttc" id="astructUrl_html_a9e7df736f4e72353af3360b8e2b2c9cf"><div class="ttname"><a href="structUrl.html#a9e7df736f4e72353af3360b8e2b2c9cf">Url::src</a></div><div class="ttdeci">char * src</div><div class="ttdoc">Raw URL string.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00077">url.h:77</a></div></div>
<div class="ttc" id="astructUrl_html_ad4b772878b40b204a7e91520b0bcbed4"><div class="ttname"><a href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">Url::path</a></div><div class="ttdeci">char * path</div><div class="ttdoc">Path.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00075">url.h:75</a></div></div>
<div class="ttc" id="aurl_8c_html_aa114f683b940e0773ca758b49a18a2a7"><div class="ttname"><a href="url_8c.html#aa114f683b940e0773ca758b49a18a2a7">url_tostring</a></div><div class="ttdeci">int url_tostring(const struct Url *url, char *dest, size_t len, uint8_t flags)</div><div class="ttdoc">Output the URL string for a given Url object.</div><div class="ttdef"><b>Definition</b> <a href="url_8c_source.html#l00422">url.c:422</a></div></div>
<div class="ttc" id="aurl_8h_html_a2f7d340c7b07a0b212e6ba7c9d1c52fa"><div class="ttname"><a href="url_8h.html#a2f7d340c7b07a0b212e6ba7c9d1c52fa">U_PATH</a></div><div class="ttdeci">#define U_PATH</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00050">url.h:50</a></div></div>
</div><!-- fragment --><div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a8d3a7328ed6d800fc41fb83e20db792a_cgraph.svg" width="478" height="443"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a8d3a7328ed6d800fc41fb83e20db792a_icgraph.svg" width="710" height="248"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a82d043009c986ea9887b31976c0ca262" name="a82d043009c986ea9887b31976c0ca262"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82d043009c986ea9887b31976c0ca262">&#9670;&#160;</a></span>nntp_expand_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nntp_expand_path </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>buflen</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConnAccount.html">ConnAccount</a> *</td>          <td class="paramname"><span class="paramname"><em>cac</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make fully qualified url from newsgroup name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer.">Buffer</a> for the result </td></tr>
    <tr><td class="paramname">buflen</td><td>Length of buffer </td></tr>
    <tr><td class="paramname">cac</td><td><a class="el" href="structAccount.html" title="A group of associated Mailboxes.">Account</a> to serialise </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00556">556</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  557</span>{</div>
<div class="line"><span class="lineno">  558</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structUrl.html">Url</a> url = { 0 };</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>  <a class="code hl_function" href="mutt__account_8c.html#aab5936a62e77123420e4c515904567f3">account_to_url</a>(cac, &amp;url);</div>
<div class="line"><span class="lineno">  561</span>  url.<a class="code hl_variable" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(buf);</div>
<div class="line"><span class="lineno">  562</span>  <a class="code hl_function" href="url_8c.html#aa114f683b940e0773ca758b49a18a2a7">url_tostring</a>(&amp;url, buf, buflen, <a class="code hl_define" href="url_8h.html#a04ddf99a809afcc240e4b3d517c98d20">U_NO_FLAGS</a>);</div>
<div class="line"><span class="lineno">  563</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;url.<a class="code hl_variable" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a>);</div>
<div class="line"><span class="lineno">  564</span>}</div>
<div class="ttc" id="aurl_8h_html_a04ddf99a809afcc240e4b3d517c98d20"><div class="ttname"><a href="url_8h.html#a04ddf99a809afcc240e4b3d517c98d20">U_NO_FLAGS</a></div><div class="ttdeci">#define U_NO_FLAGS</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00049">url.h:49</a></div></div>
</div><!-- fragment --><div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a82d043009c986ea9887b31976c0ca262_cgraph.svg" width="306" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-17" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a82d043009c986ea9887b31976c0ca262_icgraph.svg" width="352" height="166"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4a81ebd8f2d0f68109bddeef2c87ea83" name="a4a81ebd8f2d0f68109bddeef2c87ea83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a81ebd8f2d0f68109bddeef2c87ea83">&#9670;&#160;</a></span>nntp_add_group()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nntp_add_group </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>line</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse newsgroup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">line</td><td>String to parse </td></tr>
    <tr><td class="paramname">data</td><td>NNTP data </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Always </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00572">572</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  573</span>{</div>
<div class="line"><span class="lineno">  574</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNntpAccountData.html">NntpAccountData</a> *<a class="code hl_variable" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = data;</div>
<div class="line"><span class="lineno">  575</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = NULL;</div>
<div class="line"><span class="lineno">  576</span>  <span class="keywordtype">char</span> <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>[1024] = { 0 };</div>
<div class="line"><span class="lineno">  577</span>  <span class="keywordtype">char</span> <a class="code hl_variable" href="structNntpMboxData.html#a6d1f6681e3b32714f5c85d463f38fab8">desc</a>[8192] = { 0 };</div>
<div class="line"><span class="lineno">  578</span>  <span class="keywordtype">char</span> mod = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  579</span>  <a class="code hl_define" href="nntp_2lib_8h.html#afbe93ce95fbbf1758c93d4b123fc2246">anum_t</a> first = 0, last = 0;</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a> || !line)</div>
<div class="line"><span class="lineno">  582</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  583</span> </div>
<div class="line"><span class="lineno">  584</span>  <span class="comment">/* These sscanf limits must match the sizes of the group and desc arrays */</span></div>
<div class="line"><span class="lineno">  585</span>  <span class="keywordflow">if</span> (sscanf(line, <span class="stringliteral">&quot;%1023s &quot;</span> <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a> <span class="stringliteral">&quot; &quot;</span> <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a> <span class="stringliteral">&quot; %c %8191[^\n]&quot;</span>, <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>,</div>
<div class="line"><span class="lineno">  586</span>             &amp;last, &amp;first, &amp;mod, <a class="code hl_variable" href="structNntpMboxData.html#a6d1f6681e3b32714f5c85d463f38fab8">desc</a>) &lt; 4)</div>
<div class="line"><span class="lineno">  587</span>  {</div>
<div class="line"><span class="lineno">  588</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;Can&#39;t parse server line: %s\n&quot;</span>, line);</div>
<div class="line"><span class="lineno">  589</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  590</span>  }</div>
<div class="line"><span class="lineno">  591</span> </div>
<div class="line"><span class="lineno">  592</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="#a9f33e774091672b52c32fcdf3a96b05c">mdata_find</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>, <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>);</div>
<div class="line"><span class="lineno">  593</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;deleted = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  594</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;first_message = first;</div>
<div class="line"><span class="lineno">  595</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_message = last;</div>
<div class="line"><span class="lineno">  596</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;allowed = (mod == <span class="charliteral">&#39;y&#39;</span>) || (mod == <span class="charliteral">&#39;m&#39;</span>);</div>
<div class="line"><span class="lineno">  597</span>  <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;desc, <a class="code hl_variable" href="structNntpMboxData.html#a6d1f6681e3b32714f5c85d463f38fab8">desc</a>);</div>
<div class="line"><span class="lineno">  598</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent || (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_cached != 0))</div>
<div class="line"><span class="lineno">  599</span>    <a class="code hl_function" href="#ab375e79092001683947b61e4079db8c0">nntp_group_unread_stat</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>);</div>
<div class="line"><span class="lineno">  600</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_message &amp;&amp; (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;first_message &lt;= <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_message))</div>
<div class="line"><span class="lineno">  601</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;unread = <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_message - <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;first_message + 1;</div>
<div class="line"><span class="lineno">  602</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  603</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;unread = 0;</div>
<div class="line"><span class="lineno">  604</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  605</span>}</div>
<div class="ttc" id="amutt_2string_8c_html_af8c32ffc64dd55e92001a974a4be6bbf"><div class="ttname"><a href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a></div><div class="ttdeci">char * mutt_str_replace(char **p, const char *s)</div><div class="ttdoc">Replace one string with another.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00282">string.c:282</a></div></div>
<div class="ttc" id="astructAccount_html_ad10abe32dcee204d654a3cd350d8cd8e"><div class="ttname"><a href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">Account::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdoc">Private data (for Mailbox backends)</div><div class="ttdef"><b>Definition</b> <a href="core_2account_8h_source.html#l00042">account.h:42</a></div></div>
<div class="ttc" id="astructNntpAccountData_html"><div class="ttname"><a href="structNntpAccountData.html">NntpAccountData</a></div><div class="ttdoc">NNTP-specific Account data -.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00035">adata.h:36</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_a6d1f6681e3b32714f5c85d463f38fab8"><div class="ttname"><a href="structNntpMboxData.html#a6d1f6681e3b32714f5c85d463f38fab8">NntpMboxData::desc</a></div><div class="ttdeci">char * desc</div><div class="ttdoc">Description of newsgroup.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00036">mdata.h:36</a></div></div>
</div><!-- fragment --><div id="dynsection-18" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a4a81ebd8f2d0f68109bddeef2c87ea83_cgraph.svg" width="354" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-19" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a4a81ebd8f2d0f68109bddeef2c87ea83_icgraph.svg" width="352" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8a0f0a9d60138637dde00cb0732c6b9e" name="a8a0f0a9d60138637dde00cb0732c6b9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a0f0a9d60138637dde00cb0732c6b9e">&#9670;&#160;</a></span>active_get_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int active_get_cache </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *</td>          <td class="paramname"><span class="paramname"><em>adata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load list of all newsgroups from cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>NNTP server </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00613">613</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  614</span>{</div>
<div class="line"><span class="lineno">  615</span>  <span class="keywordtype">char</span> buf[8192] = { 0 };</div>
<div class="line"><span class="lineno">  616</span>  <span class="keywordtype">char</span> file[4096] = { 0 };</div>
<div class="line"><span class="lineno">  617</span>  time_t t = 0;</div>
<div class="line"><span class="lineno">  618</span> </div>
<div class="line"><span class="lineno">  619</span>  <a class="code hl_function" href="#a8d3a7328ed6d800fc41fb83e20db792a">cache_expand</a>(file, <span class="keyword">sizeof</span>(file), &amp;adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a27c41dff3b7d62798dda5cec8d755c2a">conn</a>-&gt;<a class="code hl_variable" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>, <span class="stringliteral">&quot;.active&quot;</span>);</div>
<div class="line"><span class="lineno">  620</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Parsing %s\n&quot;</span>, file);</div>
<div class="line"><span class="lineno">  621</span>  FILE *fp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(file, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno">  622</span>  <span class="keywordflow">if</span> (!fp)</div>
<div class="line"><span class="lineno">  623</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  624</span> </div>
<div class="line"><span class="lineno">  625</span>  <span class="keywordflow">if</span> (!fgets(buf, <span class="keyword">sizeof</span>(buf), fp) || (sscanf(buf, <span class="stringliteral">&quot;%jd%4095s&quot;</span>, &amp;t, file) != 1) || (t == 0))</div>
<div class="line"><span class="lineno">  626</span>  {</div>
<div class="line"><span class="lineno">  627</span>    <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp);</div>
<div class="line"><span class="lineno">  628</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  629</span>  }</div>
<div class="line"><span class="lineno">  630</span>  adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a001b86788ccf66b12160431cbbb6e0bf">newgroups_time</a> = t;</div>
<div class="line"><span class="lineno">  631</span> </div>
<div class="line"><span class="lineno">  632</span>  <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Loading list of groups from cache...&quot;</span>));</div>
<div class="line"><span class="lineno">  633</span>  <span class="keywordflow">while</span> (fgets(buf, <span class="keyword">sizeof</span>(buf), fp))</div>
<div class="line"><span class="lineno">  634</span>    <a class="code hl_function" href="#a4a81ebd8f2d0f68109bddeef2c87ea83">nntp_add_group</a>(buf, adata);</div>
<div class="line"><span class="lineno">  635</span>  <a class="code hl_function" href="#a4a81ebd8f2d0f68109bddeef2c87ea83">nntp_add_group</a>(NULL, NULL);</div>
<div class="line"><span class="lineno">  636</span>  <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp);</div>
<div class="line"><span class="lineno">  637</span>  <a class="code hl_function" href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a>();</div>
<div class="line"><span class="lineno">  638</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  639</span>}</div>
<div class="ttc" id="agroup__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00092">logging2.h:92</a></div></div>
<div class="ttc" id="amutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="amutt__logging_8c_html_af068b3f524a31fad293b2fb61dfc4534"><div class="ttname"><a href="mutt__logging_8c.html#af068b3f524a31fad293b2fb61dfc4534">mutt_clear_error</a></div><div class="ttdeci">void mutt_clear_error(void)</div><div class="ttdoc">Clear the message line (bottom line of screen)</div><div class="ttdef"><b>Definition</b> <a href="mutt__logging_8c_source.html#l00074">mutt_logging.c:74</a></div></div>
<div class="ttc" id="anewsrc_8c_html_a4a81ebd8f2d0f68109bddeef2c87ea83"><div class="ttname"><a href="#a4a81ebd8f2d0f68109bddeef2c87ea83">nntp_add_group</a></div><div class="ttdeci">int nntp_add_group(char *line, void *data)</div><div class="ttdoc">Parse newsgroup.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00572">newsrc.c:572</a></div></div>
<div class="ttc" id="anewsrc_8c_html_a8d3a7328ed6d800fc41fb83e20db792a"><div class="ttname"><a href="#a8d3a7328ed6d800fc41fb83e20db792a">cache_expand</a></div><div class="ttdeci">static void cache_expand(char *dst, size_t dstlen, struct ConnAccount *cac, const char *src)</div><div class="ttdoc">Make fully qualified cache file name.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00524">newsrc.c:524</a></div></div>
<div class="ttc" id="astructConnection_html_ac3c39549b6611c8eaed2a25573b5c432"><div class="ttname"><a href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">Connection::account</a></div><div class="ttdeci">struct ConnAccount account</div><div class="ttdoc">Account details: username, password, etc.</div><div class="ttdef"><b>Definition</b> <a href="connection_8h_source.html#l00049">connection.h:49</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_a001b86788ccf66b12160431cbbb6e0bf"><div class="ttname"><a href="structNntpAccountData.html#a001b86788ccf66b12160431cbbb6e0bf">NntpAccountData::newgroups_time</a></div><div class="ttdeci">time_t newgroups_time</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00056">adata.h:56</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_a27c41dff3b7d62798dda5cec8d755c2a"><div class="ttname"><a href="structNntpAccountData.html#a27c41dff3b7d62798dda5cec8d755c2a">NntpAccountData::conn</a></div><div class="ttdeci">struct Connection * conn</div><div class="ttdoc">Connection to NNTP Server.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00062">adata.h:62</a></div></div>
</div><!-- fragment --><div id="dynsection-20" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a8a0f0a9d60138637dde00cb0732c6b9e_cgraph.svg" width="311" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-21" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a8a0f0a9d60138637dde00cb0732c6b9e_icgraph.svg" width="324" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa8b8319b59b7ef6de942cd25400e0d79" name="aa8b8319b59b7ef6de942cd25400e0d79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8b8319b59b7ef6de942cd25400e0d79">&#9670;&#160;</a></span>nntp_active_save_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nntp_active_save_cache </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *</td>          <td class="paramname"><span class="paramname"><em>adata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save list of all newsgroups to cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>NNTP server </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00647">647</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  648</span>{</div>
<div class="line"><span class="lineno">  649</span>  <span class="keywordflow">if</span> (!adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ab1119d6a97b21d5015bef09d4debc002">cacheable</a>)</div>
<div class="line"><span class="lineno">  650</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span>  <span class="keywordtype">size_t</span> buflen = 10240;</div>
<div class="line"><span class="lineno">  653</span>  <span class="keywordtype">char</span> *buf = <a class="code hl_define" href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a>(buflen, <span class="keywordtype">char</span>);</div>
<div class="line"><span class="lineno">  654</span>  snprintf(buf, buflen, <span class="stringliteral">&quot;%lu\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a001b86788ccf66b12160431cbbb6e0bf">newgroups_time</a>);</div>
<div class="line"><span class="lineno">  655</span>  <span class="keywordtype">size_t</span> off = strlen(buf);</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a37bf5f2141a2488012a0441694bae9bf">groups_num</a>; i++)</div>
<div class="line"><span class="lineno">  658</span>  {</div>
<div class="line"><span class="lineno">  659</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a17e649e29d0d7d8e6137647e62aa4b37">groups_list</a>[i];</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> || <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;deleted)</div>
<div class="line"><span class="lineno">  662</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  663</span> </div>
<div class="line"><span class="lineno">  664</span>    <span class="keywordflow">if</span> ((off + strlen(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;group) + (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;desc ? strlen(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;desc) : 0) + 50) &gt; buflen)</div>
<div class="line"><span class="lineno">  665</span>    {</div>
<div class="line"><span class="lineno">  666</span>      buflen *= 2;</div>
<div class="line"><span class="lineno">  667</span>      <a class="code hl_define" href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a>(&amp;buf, buflen, <span class="keywordtype">char</span>);</div>
<div class="line"><span class="lineno">  668</span>    }</div>
<div class="line"><span class="lineno">  669</span>    snprintf(buf + off, buflen - off, <span class="stringliteral">&quot;%s &quot;</span> <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a> <span class="stringliteral">&quot; &quot;</span> <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a> <span class="stringliteral">&quot; %c%s%s\n&quot;</span>,</div>
<div class="line"><span class="lineno">  670</span>             <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;group, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_message, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;first_message,</div>
<div class="line"><span class="lineno">  671</span>             <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;allowed ? <span class="charliteral">&#39;y&#39;</span> : <span class="charliteral">&#39;n&#39;</span>, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;desc ? <span class="stringliteral">&quot; &quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><span class="lineno">  672</span>             <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;desc ? <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;desc : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  673</span>    off += strlen(buf + off);</div>
<div class="line"><span class="lineno">  674</span>  }</div>
<div class="line"><span class="lineno">  675</span> </div>
<div class="line"><span class="lineno">  676</span>  <span class="keywordtype">char</span> file[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno">  677</span>  <a class="code hl_function" href="#a8d3a7328ed6d800fc41fb83e20db792a">cache_expand</a>(file, <span class="keyword">sizeof</span>(file), &amp;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a27c41dff3b7d62798dda5cec8d755c2a">conn</a>-&gt;<a class="code hl_variable" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>, <span class="stringliteral">&quot;.active&quot;</span>);</div>
<div class="line"><span class="lineno">  678</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;Updating %s\n&quot;</span>, file);</div>
<div class="line"><span class="lineno">  679</span>  <span class="keywordtype">int</span> rc = <a class="code hl_function" href="#a400892d96104e348988b980faace6d3f">update_file</a>(file, buf);</div>
<div class="line"><span class="lineno">  680</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  681</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  682</span>}</div>
<div class="ttc" id="astructNntpAccountData_html_ab1119d6a97b21d5015bef09d4debc002"><div class="ttname"><a href="structNntpAccountData.html#ab1119d6a97b21d5015bef09d4debc002">NntpAccountData::cacheable</a></div><div class="ttdeci">bool cacheable</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00048">adata.h:48</a></div></div>
</div><!-- fragment --><div id="dynsection-22" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_aa8b8319b59b7ef6de942cd25400e0d79_cgraph.svg" width="334" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-23" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_aa8b8319b59b7ef6de942cd25400e0d79_icgraph.svg" width="398" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a00132ef57a28e8ec428b6fa298ea63d4" name="a00132ef57a28e8ec428b6fa298ea63d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00132ef57a28e8ec428b6fa298ea63d4">&#9670;&#160;</a></span>nntp_hcache_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structHeaderCache.html">HeaderCache</a> * nntp_hcache_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *</td>          <td class="paramname"><span class="paramname"><em>mdata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open newsgroup hcache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdata</td><td>NNTP <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> data </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Header cache </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00707">707</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  708</span>{</div>
<div class="line"><span class="lineno">  709</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structUrl.html">Url</a> url = { 0 };</div>
<div class="line"><span class="lineno">  710</span>  <span class="keywordtype">char</span> file[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno">  711</span> </div>
<div class="line"><span class="lineno">  712</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_save_unsubscribed = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;save_unsubscribed&quot;</span>);</div>
<div class="line"><span class="lineno">  713</span>  <span class="keywordflow">if</span> (!mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a> || !mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ab1119d6a97b21d5015bef09d4debc002">cacheable</a> || !mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a27c41dff3b7d62798dda5cec8d755c2a">conn</a> || !mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a> ||</div>
<div class="line"><span class="lineno">  714</span>      !(mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a> || mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#af1fae146cb0fab012147cefe8791a8f6">subscribed</a> || c_save_unsubscribed))</div>
<div class="line"><span class="lineno">  715</span>  {</div>
<div class="line"><span class="lineno">  716</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  717</span>  }</div>
<div class="line"><span class="lineno">  718</span> </div>
<div class="line"><span class="lineno">  719</span>  <a class="code hl_function" href="mutt__account_8c.html#aab5936a62e77123420e4c515904567f3">account_to_url</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a27c41dff3b7d62798dda5cec8d755c2a">conn</a>-&gt;<a class="code hl_variable" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>, &amp;url);</div>
<div class="line"><span class="lineno">  720</span>  url.<a class="code hl_variable" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a> = mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>;</div>
<div class="line"><span class="lineno">  721</span>  <a class="code hl_function" href="url_8c.html#aa114f683b940e0773ca758b49a18a2a7">url_tostring</a>(&amp;url, file, <span class="keyword">sizeof</span>(file), <a class="code hl_define" href="url_8h.html#a2f7d340c7b07a0b212e6ba7c9d1c52fa">U_PATH</a>);</div>
<div class="line"><span class="lineno">  722</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_news_cache_dir = <a class="code hl_function" href="config_2helpers_8c.html#a9f184e61342916799259930333f4205f">cs_subset_path</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;news_cache_dir&quot;</span>);</div>
<div class="line"><span class="lineno">  723</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="hcache_2hcache_8c.html#a5691b8a075665d48c570eb105a472556">hcache_open</a>(c_news_cache_dir, file, <a class="code hl_function" href="group__hcache__namer__api.html#ga2469bc6478c1b4766ed132a2bb1a4018">nntp_hcache_namer</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  724</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00047">helpers.c:47</a></div></div>
<div class="ttc" id="agroup__hcache__namer__api_html_ga2469bc6478c1b4766ed132a2bb1a4018"><div class="ttname"><a href="group__hcache__namer__api.html#ga2469bc6478c1b4766ed132a2bb1a4018">nntp_hcache_namer</a></div><div class="ttdeci">static void nntp_hcache_namer(const char *path, struct Buffer *dest)</div><div class="ttdoc">Compose hcache file names - Implements hcache_namer_t -.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00688">newsrc.c:688</a></div></div>
<div class="ttc" id="ahcache_2hcache_8c_html_a5691b8a075665d48c570eb105a472556"><div class="ttname"><a href="hcache_2hcache_8c.html#a5691b8a075665d48c570eb105a472556">hcache_open</a></div><div class="ttdeci">struct HeaderCache * hcache_open(const char *path, const char *folder, hcache_namer_t namer, bool create)</div><div class="ttdoc">Multiplexor for StoreOps::open.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2hcache_8c_source.html#l00473">hcache.c:473</a></div></div>
</div><!-- fragment --><div id="dynsection-24" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a00132ef57a28e8ec428b6fa298ea63d4_cgraph.svg" width="343" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-25" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a00132ef57a28e8ec428b6fa298ea63d4_icgraph.svg" width="520" height="248"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a25f479090028437bbd1cc59a08942112" name="a25f479090028437bbd1cc59a08942112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25f479090028437bbd1cc59a08942112">&#9670;&#160;</a></span>nntp_hcache_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nntp_hcache_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *</td>          <td class="paramname"><span class="paramname"><em>mdata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structHeaderCache.html">HeaderCache</a> *</td>          <td class="paramname"><span class="paramname"><em>hc</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove stale cached headers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdata</td><td>NNTP <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> data </td></tr>
    <tr><td class="paramname">hc</td><td>Header cache </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00731">731</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  732</span>{</div>
<div class="line"><span class="lineno">  733</span>  <span class="keywordflow">if</span> (!hc)</div>
<div class="line"><span class="lineno">  734</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>  <span class="keywordtype">char</span> buf[32] = { 0 };</div>
<div class="line"><span class="lineno">  737</span>  <span class="keywordtype">bool</span> old = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  738</span>  <a class="code hl_define" href="nntp_2lib_8h.html#afbe93ce95fbbf1758c93d4b123fc2246">anum_t</a> first = 0, last = 0;</div>
<div class="line"><span class="lineno">  739</span> </div>
<div class="line"><span class="lineno">  740</span>  <span class="comment">/* fetch previous values of first and last */</span></div>
<div class="line"><span class="lineno">  741</span>  <span class="keywordtype">char</span> *hdata = <a class="code hl_function" href="hcache_2hcache_8c.html#a9f2aea3b2e8ba9dc758a06e0163dee14">hcache_fetch_raw_str</a>(hc, <span class="stringliteral">&quot;index&quot;</span>, 5);</div>
<div class="line"><span class="lineno">  742</span>  <span class="keywordflow">if</span> (hdata)</div>
<div class="line"><span class="lineno">  743</span>  {</div>
<div class="line"><span class="lineno">  744</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;hcache_fetch_email index: %s\n&quot;</span>, hdata);</div>
<div class="line"><span class="lineno">  745</span>    <span class="keywordflow">if</span> (sscanf(hdata, <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a> <span class="stringliteral">&quot; &quot;</span> <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a>, &amp;first, &amp;last) == 2)</div>
<div class="line"><span class="lineno">  746</span>    {</div>
<div class="line"><span class="lineno">  747</span>      old = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  748</span>      mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a2869a3060aa018d6c8e8e2b6ab6cfa21">last_cached</a> = last;</div>
<div class="line"><span class="lineno">  749</span> </div>
<div class="line"><span class="lineno">  750</span>      <span class="comment">/* clean removed headers from cache */</span></div>
<div class="line"><span class="lineno">  751</span>      <span class="keywordflow">for</span> (<a class="code hl_define" href="nntp_2lib_8h.html#afbe93ce95fbbf1758c93d4b123fc2246">anum_t</a> current = first; current &lt;= last; current++)</div>
<div class="line"><span class="lineno">  752</span>      {</div>
<div class="line"><span class="lineno">  753</span>        <span class="keywordflow">if</span> ((current &gt;= mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#adc97f802d08bafa065d06fc76b84dd93">first_message</a>) &amp;&amp; (current &lt;= mdata-&gt;last_message))</div>
<div class="line"><span class="lineno">  754</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  755</span> </div>
<div class="line"><span class="lineno">  756</span>        snprintf(buf, <span class="keyword">sizeof</span>(buf), <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a>, current);</div>
<div class="line"><span class="lineno">  757</span>        <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;hcache_delete_email %s\n&quot;</span>, buf);</div>
<div class="line"><span class="lineno">  758</span>        <a class="code hl_function" href="hcache_2hcache_8c.html#a66e48b640205127c7a4bb987b8d0192d">hcache_delete_email</a>(hc, buf, strlen(buf));</div>
<div class="line"><span class="lineno">  759</span>      }</div>
<div class="line"><span class="lineno">  760</span>    }</div>
<div class="line"><span class="lineno">  761</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;hdata);</div>
<div class="line"><span class="lineno">  762</span>  }</div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>  <span class="comment">/* store current values of first and last */</span></div>
<div class="line"><span class="lineno">  765</span>  <span class="keywordflow">if</span> (!old || (mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#adc97f802d08bafa065d06fc76b84dd93">first_message</a> != first) || (mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a3792d3aacd074ccb3cd92fcf686fa4e6">last_message</a> != last))</div>
<div class="line"><span class="lineno">  766</span>  {</div>
<div class="line"><span class="lineno">  767</span>    snprintf(buf, <span class="keyword">sizeof</span>(buf), <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a> <span class="stringliteral">&quot; &quot;</span> <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a>, mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#adc97f802d08bafa065d06fc76b84dd93">first_message</a>,</div>
<div class="line"><span class="lineno">  768</span>             mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a3792d3aacd074ccb3cd92fcf686fa4e6">last_message</a>);</div>
<div class="line"><span class="lineno">  769</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;hcache_store_email index: %s\n&quot;</span>, buf);</div>
<div class="line"><span class="lineno">  770</span>    <a class="code hl_function" href="hcache_2hcache_8c.html#acca0b66c75e59b1400da46b646e6bb9c">hcache_store_raw</a>(hc, <span class="stringliteral">&quot;index&quot;</span>, 5, buf, strlen(buf) + 1);</div>
<div class="line"><span class="lineno">  771</span>  }</div>
<div class="line"><span class="lineno">  772</span>}</div>
<div class="ttc" id="ahcache_2hcache_8c_html_a66e48b640205127c7a4bb987b8d0192d"><div class="ttname"><a href="hcache_2hcache_8c.html#a66e48b640205127c7a4bb987b8d0192d">hcache_delete_email</a></div><div class="ttdeci">int hcache_delete_email(struct HeaderCache *hc, const char *key, size_t keylen)</div><div class="ttdoc">Multiplexor for StoreOps::delete_record.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2hcache_8c_source.html#l00741">hcache.c:741</a></div></div>
<div class="ttc" id="ahcache_2hcache_8c_html_a9f2aea3b2e8ba9dc758a06e0163dee14"><div class="ttname"><a href="hcache_2hcache_8c.html#a9f2aea3b2e8ba9dc758a06e0163dee14">hcache_fetch_raw_str</a></div><div class="ttdeci">char * hcache_fetch_raw_str(struct HeaderCache *hc, const char *key, size_t keylen)</div><div class="ttdoc">Fetch a string from the cache.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2hcache_8c_source.html#l00654">hcache.c:654</a></div></div>
<div class="ttc" id="ahcache_2hcache_8c_html_acca0b66c75e59b1400da46b646e6bb9c"><div class="ttname"><a href="hcache_2hcache_8c.html#acca0b66c75e59b1400da46b646e6bb9c">hcache_store_raw</a></div><div class="ttdeci">int hcache_store_raw(struct HeaderCache *hc, const char *key, size_t keylen, void *data, size_t dlen)</div><div class="ttdoc">Store a key / data pair.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2hcache_8c_source.html#l00726">hcache.c:726</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_a2869a3060aa018d6c8e8e2b6ab6cfa21"><div class="ttname"><a href="structNntpMboxData.html#a2869a3060aa018d6c8e8e2b6ab6cfa21">NntpMboxData::last_cached</a></div><div class="ttdeci">anum_t last_cached</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00040">mdata.h:40</a></div></div>
</div><!-- fragment --><div id="dynsection-26" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a25f479090028437bbd1cc59a08942112_cgraph.svg" width="362" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-27" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a25f479090028437bbd1cc59a08942112_icgraph.svg" width="338" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab103e38d32e64122d7892f29eeb67fcf" name="ab103e38d32e64122d7892f29eeb67fcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab103e38d32e64122d7892f29eeb67fcf">&#9670;&#160;</a></span>nntp_bcache_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nntp_bcache_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *</td>          <td class="paramname"><span class="paramname"><em>mdata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove stale cached messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdata</td><td>NNTP <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> data </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00799">799</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  800</span>{</div>
<div class="line"><span class="lineno">  801</span>  <a class="code hl_function" href="bcache_8c.html#a61b6432fa4ef33ea232dad524cf907bb">mutt_bcache_list</a>(mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4a0fee3ab5b7ee9b0027505083f16790">bcache</a>, <a class="code hl_function" href="group__bcache__list__api.html#ga181aa7de0266d119dcc65f48088c306d">nntp_bcache_delete</a>, mdata);</div>
<div class="line"><span class="lineno">  802</span>}</div>
<div class="ttc" id="abcache_8c_html_a61b6432fa4ef33ea232dad524cf907bb"><div class="ttname"><a href="bcache_8c.html#a61b6432fa4ef33ea232dad524cf907bb">mutt_bcache_list</a></div><div class="ttdeci">int mutt_bcache_list(struct BodyCache *bcache, bcache_list_t want_id, void *data)</div><div class="ttdoc">Find matching entries in the Body Cache.</div><div class="ttdef"><b>Definition</b> <a href="bcache_8c_source.html#l00334">bcache.c:334</a></div></div>
<div class="ttc" id="agroup__bcache__list__api_html_ga181aa7de0266d119dcc65f48088c306d"><div class="ttname"><a href="group__bcache__list__api.html#ga181aa7de0266d119dcc65f48088c306d">nntp_bcache_delete</a></div><div class="ttdeci">static int nntp_bcache_delete(const char *id, struct BodyCache *bcache, void *data)</div><div class="ttdoc">Delete an entry from the message cache - Implements bcache_list_t -.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00779">newsrc.c:779</a></div></div>
<div class="ttc" id="astructNntpMboxData_html_a4a0fee3ab5b7ee9b0027505083f16790"><div class="ttname"><a href="structNntpMboxData.html#a4a0fee3ab5b7ee9b0027505083f16790">NntpMboxData::bcache</a></div><div class="ttdeci">struct BodyCache * bcache</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00050">mdata.h:50</a></div></div>
</div><!-- fragment --><div id="dynsection-28" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_ab103e38d32e64122d7892f29eeb67fcf_cgraph.svg" width="354" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-29" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_ab103e38d32e64122d7892f29eeb67fcf_icgraph.svg" width="338" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a140bf8e49e3f11e0d9cb4d8253767819" name="a140bf8e49e3f11e0d9cb4d8253767819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a140bf8e49e3f11e0d9cb4d8253767819">&#9670;&#160;</a></span>nntp_delete_group_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nntp_delete_group_cache </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> *</td>          <td class="paramname"><span class="paramname"><em>mdata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove hcache and bcache of newsgroup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdata</td><td>NNTP <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> data </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00808">808</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  809</span>{</div>
<div class="line"><span class="lineno">  810</span>  <span class="keywordflow">if</span> (!mdata || !mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a> || !mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ab1119d6a97b21d5015bef09d4debc002">cacheable</a>)</div>
<div class="line"><span class="lineno">  811</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  812</span> </div>
<div class="line"><span class="lineno">  813</span><span class="preprocessor">#ifdef USE_HCACHE</span></div>
<div class="line"><span class="lineno">  814</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *file = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  815</span>  <a class="code hl_function" href="group__hcache__namer__api.html#ga2469bc6478c1b4766ed132a2bb1a4018">nntp_hcache_namer</a>(mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>, file);</div>
<div class="line"><span class="lineno">  816</span>  <a class="code hl_function" href="#a8d3a7328ed6d800fc41fb83e20db792a">cache_expand</a>(file-&gt;<a class="code hl_variable" href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">data</a>, file-&gt;<a class="code hl_variable" href="structBuffer.html#a1d9ee60bcf94de702b15ec2b5d811995">dsize</a>, &amp;mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a27c41dff3b7d62798dda5cec8d755c2a">conn</a>-&gt;<a class="code hl_variable" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(file));</div>
<div class="line"><span class="lineno">  817</span>  unlink(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(file));</div>
<div class="line"><span class="lineno">  818</span>  mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a2869a3060aa018d6c8e8e2b6ab6cfa21">last_cached</a> = 0;</div>
<div class="line"><span class="lineno">  819</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(file));</div>
<div class="line"><span class="lineno">  820</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;file);</div>
<div class="line"><span class="lineno">  821</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span>  <span class="keywordflow">if</span> (!mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4a0fee3ab5b7ee9b0027505083f16790">bcache</a>)</div>
<div class="line"><span class="lineno">  824</span>  {</div>
<div class="line"><span class="lineno">  825</span>    mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4a0fee3ab5b7ee9b0027505083f16790">bcache</a> = <a class="code hl_function" href="bcache_8c.html#a545298aaa4549d15f26112ff46c3c4ac">mutt_bcache_open</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a27c41dff3b7d62798dda5cec8d755c2a">conn</a>-&gt;<a class="code hl_variable" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>, mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>);</div>
<div class="line"><span class="lineno">  826</span>  }</div>
<div class="line"><span class="lineno">  827</span>  <span class="keywordflow">if</span> (mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4a0fee3ab5b7ee9b0027505083f16790">bcache</a>)</div>
<div class="line"><span class="lineno">  828</span>  {</div>
<div class="line"><span class="lineno">  829</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;%s/*\n&quot;</span>, mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>);</div>
<div class="line"><span class="lineno">  830</span>    <a class="code hl_function" href="bcache_8c.html#a61b6432fa4ef33ea232dad524cf907bb">mutt_bcache_list</a>(mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4a0fee3ab5b7ee9b0027505083f16790">bcache</a>, <a class="code hl_function" href="group__bcache__list__api.html#ga181aa7de0266d119dcc65f48088c306d">nntp_bcache_delete</a>, NULL);</div>
<div class="line"><span class="lineno">  831</span>    <a class="code hl_function" href="bcache_8c.html#a77e4e275b9eef5e12aef41bf912bd8f4">mutt_bcache_close</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4a0fee3ab5b7ee9b0027505083f16790">bcache</a>);</div>
<div class="line"><span class="lineno">  832</span>  }</div>
<div class="line"><span class="lineno">  833</span>}</div>
<div class="ttc" id="abcache_8c_html_a545298aaa4549d15f26112ff46c3c4ac"><div class="ttname"><a href="bcache_8c.html#a545298aaa4549d15f26112ff46c3c4ac">mutt_bcache_open</a></div><div class="ttdeci">struct BodyCache * mutt_bcache_open(struct ConnAccount *account, const char *mailbox)</div><div class="ttdoc">Open an Email-Body Cache.</div><div class="ttdef"><b>Definition</b> <a href="bcache_8c_source.html#l00146">bcache.c:146</a></div></div>
<div class="ttc" id="abcache_8c_html_a77e4e275b9eef5e12aef41bf912bd8f4"><div class="ttname"><a href="bcache_8c.html#a77e4e275b9eef5e12aef41bf912bd8f4">mutt_bcache_close</a></div><div class="ttdeci">void mutt_bcache_close(struct BodyCache **ptr)</div><div class="ttdoc">Close an Email-Body Cache.</div><div class="ttdef"><b>Definition</b> <a href="bcache_8c_source.html#l00167">bcache.c:167</a></div></div>
<div class="ttc" id="astructBuffer_html_a1d9ee60bcf94de702b15ec2b5d811995"><div class="ttname"><a href="structBuffer.html#a1d9ee60bcf94de702b15ec2b5d811995">Buffer::dsize</a></div><div class="ttdeci">size_t dsize</div><div class="ttdoc">Length of data.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00039">buffer.h:39</a></div></div>
<div class="ttc" id="astructBuffer_html_aeec1fd4af0ddf6765b0187466d4361b8"><div class="ttname"><a href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">Buffer::data</a></div><div class="ttdeci">char * data</div><div class="ttdoc">Pointer to data.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00037">buffer.h:37</a></div></div>
</div><!-- fragment --><div id="dynsection-30" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a140bf8e49e3f11e0d9cb4d8253767819_cgraph.svg" width="571" height="451"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-31" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a140bf8e49e3f11e0d9cb4d8253767819_icgraph.svg" width="370" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0e57436b35d68983c6fe44815f3ad505" name="a0e57436b35d68983c6fe44815f3ad505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e57436b35d68983c6fe44815f3ad505">&#9670;&#160;</a></span>nntp_clear_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nntp_clear_cache </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *</td>          <td class="paramname"><span class="paramname"><em>adata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the NNTP cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>NNTP server</td></tr>
  </table>
  </dd>
</dl>
<p>Remove hcache and bcache of all unexistent and unsubscribed newsgroups </p>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00841">841</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  842</span>{</div>
<div class="line"><span class="lineno">  843</span>  <span class="keywordflow">if</span> (!adata || !adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ab1119d6a97b21d5015bef09d4debc002">cacheable</a>)</div>
<div class="line"><span class="lineno">  844</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  845</span> </div>
<div class="line"><span class="lineno">  846</span>  <span class="keyword">struct </span>dirent *de = NULL;</div>
<div class="line"><span class="lineno">  847</span>  DIR *dir = NULL;</div>
<div class="line"><span class="lineno">  848</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *cache = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  849</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *file = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  850</span> </div>
<div class="line"><span class="lineno">  851</span>  <a class="code hl_function" href="#a8d3a7328ed6d800fc41fb83e20db792a">cache_expand</a>(cache-&gt;<a class="code hl_variable" href="structBuffer.html#aeec1fd4af0ddf6765b0187466d4361b8">data</a>, cache-&gt;<a class="code hl_variable" href="structBuffer.html#a1d9ee60bcf94de702b15ec2b5d811995">dsize</a>, &amp;adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a27c41dff3b7d62798dda5cec8d755c2a">conn</a>-&gt;<a class="code hl_variable" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>, NULL);</div>
<div class="line"><span class="lineno">  852</span>  dir = <a class="code hl_function" href="file_8c.html#a69da918c66c3f22815d6e4aed88b6122">mutt_file_opendir</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(cache), <a class="code hl_enumvalue" href="file_8h.html#a222e4f679593f00cd8c126212b3cdb3ba88d03a1ea19c4b7fdccd5dfc936a7a60">MUTT_OPENDIR_NONE</a>);</div>
<div class="line"><span class="lineno">  853</span>  <span class="keywordflow">if</span> (!dir)</div>
<div class="line"><span class="lineno">  854</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  855</span> </div>
<div class="line"><span class="lineno">  856</span>  <a class="code hl_function" href="buffer_8c.html#a9765efbb7f2c32e46fb1cb271a02ba20">buf_addch</a>(cache, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><span class="lineno">  857</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_save_unsubscribed = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;save_unsubscribed&quot;</span>);</div>
<div class="line"><span class="lineno">  858</span> </div>
<div class="line"><span class="lineno">  859</span>  <span class="keywordflow">while</span> ((de = readdir(dir)))</div>
<div class="line"><span class="lineno">  860</span>  {</div>
<div class="line"><span class="lineno">  861</span>    <span class="keywordtype">char</span> *group = de-&gt;d_name;</div>
<div class="line"><span class="lineno">  862</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(group, <span class="stringliteral">&quot;.&quot;</span>) || <a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(group, <span class="stringliteral">&quot;..&quot;</span>))</div>
<div class="line"><span class="lineno">  863</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  864</span> </div>
<div class="line"><span class="lineno">  865</span>    <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(file, <span class="stringliteral">&quot;%s%s&quot;</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(cache), group);</div>
<div class="line"><span class="lineno">  866</span>    <span class="keyword">struct </span>stat st = { 0 };</div>
<div class="line"><span class="lineno">  867</span>    <span class="keywordflow">if</span> (stat(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(file), &amp;st) != 0)</div>
<div class="line"><span class="lineno">  868</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  869</span> </div>
<div class="line"><span class="lineno">  870</span><span class="preprocessor">#ifdef USE_HCACHE</span></div>
<div class="line"><span class="lineno">  871</span>    <span class="keywordflow">if</span> (S_ISREG(st.st_mode))</div>
<div class="line"><span class="lineno">  872</span>    {</div>
<div class="line"><span class="lineno">  873</span>      <span class="keywordtype">char</span> *ext = group + strlen(group) - 7;</div>
<div class="line"><span class="lineno">  874</span>      <span class="keywordflow">if</span> ((strlen(group) &lt; 8) || !<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(ext, <span class="stringliteral">&quot;.hcache&quot;</span>))</div>
<div class="line"><span class="lineno">  875</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  876</span>      *ext = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  877</span>    }</div>
<div class="line"><span class="lineno">  878</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  879</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  880</span>        <span class="keywordflow">if</span> (!S_ISDIR(st.st_mode))</div>
<div class="line"><span class="lineno">  881</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  882</span> </div>
<div class="line"><span class="lineno">  883</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> tmp_mdata = { 0 };</div>
<div class="line"><span class="lineno">  884</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a>, <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>);</div>
<div class="line"><span class="lineno">  885</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno">  886</span>    {</div>
<div class="line"><span class="lineno">  887</span>      <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = &amp;tmp_mdata;</div>
<div class="line"><span class="lineno">  888</span>      <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a> = <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>;</div>
<div class="line"><span class="lineno">  889</span>      <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;group = <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>;</div>
<div class="line"><span class="lineno">  890</span>      <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;bcache = NULL;</div>
<div class="line"><span class="lineno">  891</span>    }</div>
<div class="line"><span class="lineno">  892</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent || <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;subscribed || c_save_unsubscribed)</div>
<div class="line"><span class="lineno">  893</span>    {</div>
<div class="line"><span class="lineno">  894</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  895</span>    }</div>
<div class="line"><span class="lineno">  896</span> </div>
<div class="line"><span class="lineno">  897</span>    <a class="code hl_function" href="#a140bf8e49e3f11e0d9cb4d8253767819">nntp_delete_group_cache</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>);</div>
<div class="line"><span class="lineno">  898</span>    <span class="keywordflow">if</span> (S_ISDIR(st.st_mode))</div>
<div class="line"><span class="lineno">  899</span>    {</div>
<div class="line"><span class="lineno">  900</span>      rmdir(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(file));</div>
<div class="line"><span class="lineno">  901</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(file));</div>
<div class="line"><span class="lineno">  902</span>    }</div>
<div class="line"><span class="lineno">  903</span>  }</div>
<div class="line"><span class="lineno">  904</span>  closedir(dir);</div>
<div class="line"><span class="lineno">  905</span> </div>
<div class="line"><span class="lineno">  906</span>done:</div>
<div class="line"><span class="lineno">  907</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;cache);</div>
<div class="line"><span class="lineno">  908</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;file);</div>
<div class="line"><span class="lineno">  909</span>}</div>
<div class="ttc" id="abuffer_8c_html_a02123807d31181ac701b566226e93b33"><div class="ttname"><a href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a></div><div class="ttdeci">int buf_printf(struct Buffer *buf, const char *fmt,...)</div><div class="ttdoc">Format a string overwriting a Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00161">buffer.c:161</a></div></div>
<div class="ttc" id="abuffer_8c_html_a9765efbb7f2c32e46fb1cb271a02ba20"><div class="ttname"><a href="buffer_8c.html#a9765efbb7f2c32e46fb1cb271a02ba20">buf_addch</a></div><div class="ttdeci">size_t buf_addch(struct Buffer *buf, char c)</div><div class="ttdoc">Add a single character to a Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00241">buffer.c:241</a></div></div>
<div class="ttc" id="afile_8c_html_a69da918c66c3f22815d6e4aed88b6122"><div class="ttname"><a href="file_8c.html#a69da918c66c3f22815d6e4aed88b6122">mutt_file_opendir</a></div><div class="ttdeci">DIR * mutt_file_opendir(const char *path, enum MuttOpenDirMode mode)</div><div class="ttdoc">Open a directory.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l00542">file.c:542</a></div></div>
<div class="ttc" id="afile_8h_html_a222e4f679593f00cd8c126212b3cdb3ba88d03a1ea19c4b7fdccd5dfc936a7a60"><div class="ttname"><a href="file_8h.html#a222e4f679593f00cd8c126212b3cdb3ba88d03a1ea19c4b7fdccd5dfc936a7a60">MUTT_OPENDIR_NONE</a></div><div class="ttdeci">@ MUTT_OPENDIR_NONE</div><div class="ttdoc">Plain opendir()</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00063">file.h:63</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a6b6a50296dd2a31863a43379ef4a343d"><div class="ttname"><a href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a></div><div class="ttdeci">bool mutt_str_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00660">string.c:660</a></div></div>
<div class="ttc" id="anewsrc_8c_html_a140bf8e49e3f11e0d9cb4d8253767819"><div class="ttname"><a href="#a140bf8e49e3f11e0d9cb4d8253767819">nntp_delete_group_cache</a></div><div class="ttdeci">void nntp_delete_group_cache(struct NntpMboxData *mdata)</div><div class="ttdoc">Remove hcache and bcache of newsgroup.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00808">newsrc.c:808</a></div></div>
</div><!-- fragment --><div id="dynsection-32" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a0e57436b35d68983c6fe44815f3ad505_cgraph.svg" width="696" height="615"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-33" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a0e57436b35d68983c6fe44815f3ad505_icgraph.svg" width="346" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae9ee1cc132aa482531fdc2463200e492" name="ae9ee1cc132aa482531fdc2463200e492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9ee1cc132aa482531fdc2463200e492">&#9670;&#160;</a></span>nntp_select_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> * nntp_select_server </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>server</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>leave_lock</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a connection to an NNTP server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">server</td><td>Server URL </td></tr>
    <tr><td class="paramname">leave_lock</td><td>Leave the server locked? </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>NNTP server </td></tr>
    <tr><td class="paramname">NULL</td><td>Error</td></tr>
  </table>
  </dd>
</dl>
<p>Automatically loads a newsrc into memory, if necessary. Checks the size/mtime of a newsrc file, if it doesn't match, load again. Hmm, if a system has broken mtimes, this might mean the file is reloaded every time, which we'd have to fix.</p>
<dl class="section see"><dt>See also</dt><dd>$newsrc </dd></dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l00945">945</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  946</span>{</div>
<div class="line"><span class="lineno">  947</span>  <span class="keywordtype">char</span> file[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno">  948</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno">  949</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structConnAccount.html">ConnAccount</a> cac = { { 0 } };</div>
<div class="line"><span class="lineno">  950</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNntpAccountData.html">NntpAccountData</a> *<a class="code hl_variable" href="structAccount.html#ad10abe32dcee204d654a3cd350d8cd8e">adata</a> = NULL;</div>
<div class="line"><span class="lineno">  951</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structConnection.html">Connection</a> *conn = NULL;</div>
<div class="line"><span class="lineno">  952</span> </div>
<div class="line"><span class="lineno">  953</span>  <span class="keywordflow">if</span> (!server || (*server == <span class="charliteral">&#39;\0&#39;</span>))</div>
<div class="line"><span class="lineno">  954</span>  {</div>
<div class="line"><span class="lineno">  955</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No news server defined&quot;</span>));</div>
<div class="line"><span class="lineno">  956</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  957</span>  }</div>
<div class="line"><span class="lineno">  958</span> </div>
<div class="line"><span class="lineno">  959</span>  <span class="comment">/* create account from news server url */</span></div>
<div class="line"><span class="lineno">  960</span>  cac.<a class="code hl_variable" href="structConnAccount.html#af674ed2969fc29ff7d99f8b4cff6c92b">flags</a> = 0;</div>
<div class="line"><span class="lineno">  961</span>  cac.<a class="code hl_variable" href="structConnAccount.html#aff0fc77d9a388c80c347c5c2c925086d">port</a> = <a class="code hl_define" href="nntp_2private_8h.html#aaccdd399473f113674cbabfeaa5ef972">NNTP_PORT</a>;</div>
<div class="line"><span class="lineno">  962</span>  cac.<a class="code hl_variable" href="structConnAccount.html#aefc6c0b647de43e60472000102a0e208">type</a> = <a class="code hl_enumvalue" href="mutt__account_8h.html#a406c8474bdbb9cc2a25882558a367c2fa5cb8b16458e2d70c723c355ea3b8bfa3">MUTT_ACCT_TYPE_NNTP</a>;</div>
<div class="line"><span class="lineno">  963</span>  cac.<a class="code hl_variable" href="structConnAccount.html#a86102cb75ff512603a5559d4908b1ba4">service</a> = <span class="stringliteral">&quot;nntp&quot;</span>;</div>
<div class="line"><span class="lineno">  964</span>  cac.<a class="code hl_variable" href="structConnAccount.html#ae69871442c1135a06b359011104f630b">get_field</a> = <a class="code hl_function" href="group__conn__account__get__field.html#ga81411f29dda39c2e2276e7dc6985ea77">nntp_get_field</a>;</div>
<div class="line"><span class="lineno">  965</span> </div>
<div class="line"><span class="lineno">  966</span>  snprintf(file, <span class="keyword">sizeof</span>(file), <span class="stringliteral">&quot;%s%s&quot;</span>, strstr(server, <span class="stringliteral">&quot;://&quot;</span>) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;news://&quot;</span>, server);</div>
<div class="line"><span class="lineno">  967</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structUrl.html">Url</a> *url = <a class="code hl_function" href="url_8c.html#a3030b91052fa1a5fee0ca7b1d4d94f93">url_parse</a>(file);</div>
<div class="line"><span class="lineno">  968</span>  <span class="keywordflow">if</span> (!url || (url-&gt;<a class="code hl_variable" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a> &amp;&amp; *url-&gt;<a class="code hl_variable" href="structUrl.html#ad4b772878b40b204a7e91520b0bcbed4">path</a>) ||</div>
<div class="line"><span class="lineno">  969</span>      !((url-&gt;<a class="code hl_variable" href="structUrl.html#ad84f1714cab12c536e1bcc552b1c5b51">scheme</a> == <a class="code hl_enumvalue" href="url_8h.html#a10b37ccf31f8e23024ff3ba628aa4243a867c7d440d5858e5c749d595a7e971a1">U_NNTP</a>) || (url-&gt;<a class="code hl_variable" href="structUrl.html#ad84f1714cab12c536e1bcc552b1c5b51">scheme</a> == <a class="code hl_enumvalue" href="url_8h.html#a10b37ccf31f8e23024ff3ba628aa4243a36622ec19979218e1af310e5e17fba76">U_NNTPS</a>)) || !url-&gt;<a class="code hl_variable" href="structUrl.html#a565d3391c8b8114a97ad6f1b7c75b5f6">host</a> ||</div>
<div class="line"><span class="lineno">  970</span>      (<a class="code hl_function" href="mutt__account_8c.html#abc47c557e0f361296ee93c89024f5c35">account_from_url</a>(&amp;cac, url) &lt; 0))</div>
<div class="line"><span class="lineno">  971</span>  {</div>
<div class="line"><span class="lineno">  972</span>    <a class="code hl_function" href="url_8c.html#a7b05825b8bb8f87657713fe5bc6edfaa">url_free</a>(&amp;url);</div>
<div class="line"><span class="lineno">  973</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;%s is an invalid news server specification&quot;</span>), server);</div>
<div class="line"><span class="lineno">  974</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  975</span>  }</div>
<div class="line"><span class="lineno">  976</span>  <span class="keywordflow">if</span> (url-&gt;<a class="code hl_variable" href="structUrl.html#ad84f1714cab12c536e1bcc552b1c5b51">scheme</a> == <a class="code hl_enumvalue" href="url_8h.html#a10b37ccf31f8e23024ff3ba628aa4243a36622ec19979218e1af310e5e17fba76">U_NNTPS</a>)</div>
<div class="line"><span class="lineno">  977</span>  {</div>
<div class="line"><span class="lineno">  978</span>    cac.<a class="code hl_variable" href="structConnAccount.html#af674ed2969fc29ff7d99f8b4cff6c92b">flags</a> |= <a class="code hl_define" href="connaccount_8h.html#a4a13697bc3f261ea3949d4dbe3869863">MUTT_ACCT_SSL</a>;</div>
<div class="line"><span class="lineno">  979</span>    cac.<a class="code hl_variable" href="structConnAccount.html#aff0fc77d9a388c80c347c5c2c925086d">port</a> = <a class="code hl_define" href="nntp_2private_8h.html#a1e2acdcc22ea61457b4dcafc8825aae5">NNTP_SSL_PORT</a>;</div>
<div class="line"><span class="lineno">  980</span>  }</div>
<div class="line"><span class="lineno">  981</span>  <a class="code hl_function" href="url_8c.html#a7b05825b8bb8f87657713fe5bc6edfaa">url_free</a>(&amp;url);</div>
<div class="line"><span class="lineno">  982</span> </div>
<div class="line"><span class="lineno">  983</span>  <span class="comment">// If nntp_user and nntp_pass are specified in the config, use them to find the connection</span></div>
<div class="line"><span class="lineno">  984</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="structUrl.html#a18db9f379a95b00dc4f4ae7e4ac8698b">user</a> = NULL;</div>
<div class="line"><span class="lineno">  985</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="structUrl.html#ac65d0bd34ac810ddf4a9a1a348151e67">pass</a> = NULL;</div>
<div class="line"><span class="lineno">  986</span>  <span class="keywordflow">if</span> ((<a class="code hl_variable" href="structUrl.html#a18db9f379a95b00dc4f4ae7e4ac8698b">user</a> = cac.<a class="code hl_variable" href="structConnAccount.html#ae69871442c1135a06b359011104f630b">get_field</a>(<a class="code hl_enumvalue" href="connaccount_8h.html#a25419e97b0149cb541a4f3906ce852fba88e08ced0262113ed414eb31dac201f1">MUTT_CA_USER</a>, NULL)))</div>
<div class="line"><span class="lineno">  987</span>  {</div>
<div class="line"><span class="lineno">  988</span>    <a class="code hl_function" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(cac.<a class="code hl_variable" href="structConnAccount.html#a48b8084b2dd1ef3d4e051a01cf15c7ca">user</a>, <a class="code hl_variable" href="structUrl.html#a18db9f379a95b00dc4f4ae7e4ac8698b">user</a>, <span class="keyword">sizeof</span>(cac.<a class="code hl_variable" href="structConnAccount.html#a48b8084b2dd1ef3d4e051a01cf15c7ca">user</a>));</div>
<div class="line"><span class="lineno">  989</span>    cac.<a class="code hl_variable" href="structConnAccount.html#af674ed2969fc29ff7d99f8b4cff6c92b">flags</a> |= <a class="code hl_define" href="connaccount_8h.html#ab496cae7636af7b356aad973a4a2e675">MUTT_ACCT_USER</a>;</div>
<div class="line"><span class="lineno">  990</span>  }</div>
<div class="line"><span class="lineno">  991</span>  <span class="keywordflow">if</span> ((<a class="code hl_variable" href="structUrl.html#ac65d0bd34ac810ddf4a9a1a348151e67">pass</a> = cac.<a class="code hl_variable" href="structConnAccount.html#ae69871442c1135a06b359011104f630b">get_field</a>(<a class="code hl_enumvalue" href="connaccount_8h.html#a25419e97b0149cb541a4f3906ce852fbae477f9be6711da6e0abb96409c566798">MUTT_CA_PASS</a>, NULL)))</div>
<div class="line"><span class="lineno">  992</span>  {</div>
<div class="line"><span class="lineno">  993</span>    <a class="code hl_function" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(cac.<a class="code hl_variable" href="structConnAccount.html#a842f1bf5afe0830ae96d80bdacead037">pass</a>, <a class="code hl_variable" href="structUrl.html#ac65d0bd34ac810ddf4a9a1a348151e67">pass</a>, <span class="keyword">sizeof</span>(cac.<a class="code hl_variable" href="structConnAccount.html#a842f1bf5afe0830ae96d80bdacead037">pass</a>));</div>
<div class="line"><span class="lineno">  994</span>    cac.<a class="code hl_variable" href="structConnAccount.html#af674ed2969fc29ff7d99f8b4cff6c92b">flags</a> |= <a class="code hl_define" href="connaccount_8h.html#a9c5c05c3447f2884a5bbf1ab219e3f37">MUTT_ACCT_PASS</a>;</div>
<div class="line"><span class="lineno">  995</span>  }</div>
<div class="line"><span class="lineno">  996</span> </div>
<div class="line"><span class="lineno">  997</span>  <span class="comment">/* find connection by account */</span></div>
<div class="line"><span class="lineno">  998</span>  conn = <a class="code hl_function" href="mutt__socket_8c.html#ab79e92d0c88e3061f590cb1874b8b59d">mutt_conn_find</a>(&amp;cac);</div>
<div class="line"><span class="lineno">  999</span>  <span class="keywordflow">if</span> (!conn)</div>
<div class="line"><span class="lineno"> 1000</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1001</span>  <span class="keywordflow">if</span> (!(conn-&gt;<a class="code hl_variable" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>.<a class="code hl_variable" href="structConnAccount.html#af674ed2969fc29ff7d99f8b4cff6c92b">flags</a> &amp; <a class="code hl_define" href="connaccount_8h.html#ab496cae7636af7b356aad973a4a2e675">MUTT_ACCT_USER</a>) &amp;&amp; cac.<a class="code hl_variable" href="structConnAccount.html#af674ed2969fc29ff7d99f8b4cff6c92b">flags</a> &amp; <a class="code hl_define" href="connaccount_8h.html#ab496cae7636af7b356aad973a4a2e675">MUTT_ACCT_USER</a>)</div>
<div class="line"><span class="lineno"> 1002</span>  {</div>
<div class="line"><span class="lineno"> 1003</span>    conn-&gt;<a class="code hl_variable" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>.<a class="code hl_variable" href="structConnAccount.html#af674ed2969fc29ff7d99f8b4cff6c92b">flags</a> |= <a class="code hl_define" href="connaccount_8h.html#ab496cae7636af7b356aad973a4a2e675">MUTT_ACCT_USER</a>;</div>
<div class="line"><span class="lineno"> 1004</span>    conn-&gt;<a class="code hl_variable" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>.<a class="code hl_variable" href="structConnAccount.html#a48b8084b2dd1ef3d4e051a01cf15c7ca">user</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1005</span>  }</div>
<div class="line"><span class="lineno"> 1006</span> </div>
<div class="line"><span class="lineno"> 1007</span>  <span class="comment">/* new news server */</span></div>
<div class="line"><span class="lineno"> 1008</span>  adata = <a class="code hl_function" href="nntp_2adata_8c.html#ad68d7c631f8efc0cf6d986ee23820399">nntp_adata_new</a>(conn);</div>
<div class="line"><span class="lineno"> 1009</span> </div>
<div class="line"><span class="lineno"> 1010</span>  rc = <a class="code hl_function" href="nntp_8c.html#abc4e8951366a6bf81d5d4d4ecf5ad4ba">nntp_open_connection</a>(adata);</div>
<div class="line"><span class="lineno"> 1011</span> </div>
<div class="line"><span class="lineno"> 1012</span>  <span class="comment">/* try to create cache directory and enable caching */</span></div>
<div class="line"><span class="lineno"> 1013</span>  adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ab1119d6a97b21d5015bef09d4debc002">cacheable</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1014</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_news_cache_dir = <a class="code hl_function" href="config_2helpers_8c.html#a9f184e61342916799259930333f4205f">cs_subset_path</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;news_cache_dir&quot;</span>);</div>
<div class="line"><span class="lineno"> 1015</span>  <span class="keywordflow">if</span> ((rc &gt;= 0) &amp;&amp; c_news_cache_dir)</div>
<div class="line"><span class="lineno"> 1016</span>  {</div>
<div class="line"><span class="lineno"> 1017</span>    <a class="code hl_function" href="#a8d3a7328ed6d800fc41fb83e20db792a">cache_expand</a>(file, <span class="keyword">sizeof</span>(file), &amp;conn-&gt;<a class="code hl_variable" href="structConnection.html#ac3c39549b6611c8eaed2a25573b5c432">account</a>, NULL);</div>
<div class="line"><span class="lineno"> 1018</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="file_8c.html#a42b89c4ae9ca386c22de502b37cdf45e">mutt_file_mkdir</a>(file, S_IRWXU) &lt; 0)</div>
<div class="line"><span class="lineno"> 1019</span>    {</div>
<div class="line"><span class="lineno"> 1020</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Can&#39;t create %s: %s&quot;</span>), file, strerror(errno));</div>
<div class="line"><span class="lineno"> 1021</span>    }</div>
<div class="line"><span class="lineno"> 1022</span>    adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ab1119d6a97b21d5015bef09d4debc002">cacheable</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1023</span>  }</div>
<div class="line"><span class="lineno"> 1024</span> </div>
<div class="line"><span class="lineno"> 1025</span>  <span class="comment">/* load .newsrc */</span></div>
<div class="line"><span class="lineno"> 1026</span>  <span class="keywordflow">if</span> (rc &gt;= 0)</div>
<div class="line"><span class="lineno"> 1027</span>  {</div>
<div class="line"><span class="lineno"> 1028</span>    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structExpando.html">Expando</a> *c_newsrc = <a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;newsrc&quot;</span>);</div>
<div class="line"><span class="lineno"> 1029</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1030</span>    <a class="code hl_function" href="expando_2filter_8c.html#aca5d8e52ad7cb152322d011300631bc1">expando_filter</a>(c_newsrc, <a class="code hl_variable" href="expando__newsrc_8c.html#aceb81cc70350b6de0506358f4c657778">NntpRenderCallbacks</a>, adata, <a class="code hl_define" href="render_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a>,</div>
<div class="line"><span class="lineno"> 1031</span>                   buf-&gt;<a class="code hl_variable" href="structBuffer.html#a1d9ee60bcf94de702b15ec2b5d811995">dsize</a>, <a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#a5410041863c473ba1f27b415c0a40482">env</a>, buf);</div>
<div class="line"><span class="lineno"> 1032</span>    <a class="code hl_function" href="muttlib_8c.html#adde3990a0490dfba609fc94dbdbfd6b3">buf_expand_path</a>(buf);</div>
<div class="line"><span class="lineno"> 1033</span>    adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a> = <a class="code hl_function" href="buffer_8c.html#ad76477cc0c660bc50162393e997233eb">buf_strdup</a>(buf);</div>
<div class="line"><span class="lineno"> 1034</span>    <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno"> 1035</span>    rc = <a class="code hl_function" href="#a57bd184c51b8701e9613761a629ca485">nntp_newsrc_parse</a>(adata);</div>
<div class="line"><span class="lineno"> 1036</span>  }</div>
<div class="line"><span class="lineno"> 1037</span>  <span class="keywordflow">if</span> (rc &gt;= 0)</div>
<div class="line"><span class="lineno"> 1038</span>  {</div>
<div class="line"><span class="lineno"> 1039</span>    <span class="comment">/* try to load list of newsgroups from cache */</span></div>
<div class="line"><span class="lineno"> 1040</span>    <span class="keywordflow">if</span> (adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ab1119d6a97b21d5015bef09d4debc002">cacheable</a> &amp;&amp; (<a class="code hl_function" href="#a8a0f0a9d60138637dde00cb0732c6b9e">active_get_cache</a>(adata) == 0))</div>
<div class="line"><span class="lineno"> 1041</span>    {</div>
<div class="line"><span class="lineno"> 1042</span>      rc = <a class="code hl_function" href="nntp_8c.html#a1f4ed64d09034fa97562c2976d80d614">nntp_check_new_groups</a>(m, adata);</div>
<div class="line"><span class="lineno"> 1043</span>    }</div>
<div class="line"><span class="lineno"> 1044</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1045</span>    {</div>
<div class="line"><span class="lineno"> 1046</span>      <span class="comment">/* load list of newsgroups from server */</span></div>
<div class="line"><span class="lineno"> 1047</span>      rc = <a class="code hl_function" href="nntp_2lib_8h.html#a1782c5df61421b1951f9672b5d78d952">nntp_active_fetch</a>(adata, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1048</span>    }</div>
<div class="line"><span class="lineno"> 1049</span>  }</div>
<div class="line"><span class="lineno"> 1050</span> </div>
<div class="line"><span class="lineno"> 1051</span>  <span class="keywordflow">if</span> (rc &gt;= 0)</div>
<div class="line"><span class="lineno"> 1052</span>    <a class="code hl_function" href="#a0e57436b35d68983c6fe44815f3ad505">nntp_clear_cache</a>(adata);</div>
<div class="line"><span class="lineno"> 1053</span> </div>
<div class="line"><span class="lineno"> 1054</span><span class="preprocessor">#ifdef USE_HCACHE</span></div>
<div class="line"><span class="lineno"> 1055</span>  <span class="comment">/* check cache files */</span></div>
<div class="line"><span class="lineno"> 1056</span>  <span class="keywordflow">if</span> ((rc &gt;= 0) &amp;&amp; adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ab1119d6a97b21d5015bef09d4debc002">cacheable</a>)</div>
<div class="line"><span class="lineno"> 1057</span>  {</div>
<div class="line"><span class="lineno"> 1058</span>    <span class="keyword">struct </span>dirent *de = NULL;</div>
<div class="line"><span class="lineno"> 1059</span>    DIR *dir = <a class="code hl_function" href="file_8c.html#a69da918c66c3f22815d6e4aed88b6122">mutt_file_opendir</a>(file, <a class="code hl_enumvalue" href="file_8h.html#a222e4f679593f00cd8c126212b3cdb3ba88d03a1ea19c4b7fdccd5dfc936a7a60">MUTT_OPENDIR_NONE</a>);</div>
<div class="line"><span class="lineno"> 1060</span> </div>
<div class="line"><span class="lineno"> 1061</span>    <span class="keywordflow">if</span> (dir)</div>
<div class="line"><span class="lineno"> 1062</span>    {</div>
<div class="line"><span class="lineno"> 1063</span>      <span class="keywordflow">while</span> ((de = readdir(dir)))</div>
<div class="line"><span class="lineno"> 1064</span>      {</div>
<div class="line"><span class="lineno"> 1065</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structHeaderCache.html">HeaderCache</a> *hc = NULL;</div>
<div class="line"><span class="lineno"> 1066</span>        <span class="keywordtype">char</span> *group = de-&gt;d_name;</div>
<div class="line"><span class="lineno"> 1067</span> </div>
<div class="line"><span class="lineno"> 1068</span>        <span class="keywordtype">char</span> *p = group + strlen(group) - 7;</div>
<div class="line"><span class="lineno"> 1069</span>        <span class="keywordflow">if</span> ((strlen(group) &lt; 8) || !<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(p, <span class="stringliteral">&quot;.hcache&quot;</span>))</div>
<div class="line"><span class="lineno"> 1070</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1071</span>        *p = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1072</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a>, <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>);</div>
<div class="line"><span class="lineno"> 1073</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1074</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span>        hc = <a class="code hl_function" href="#a00132ef57a28e8ec428b6fa298ea63d4">nntp_hcache_open</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>);</div>
<div class="line"><span class="lineno"> 1077</span>        <span class="keywordflow">if</span> (!hc)</div>
<div class="line"><span class="lineno"> 1078</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1079</span> </div>
<div class="line"><span class="lineno"> 1080</span>        <span class="comment">/* fetch previous values of first and last */</span></div>
<div class="line"><span class="lineno"> 1081</span>        <span class="keywordtype">char</span> *hdata = <a class="code hl_function" href="hcache_2hcache_8c.html#a9f2aea3b2e8ba9dc758a06e0163dee14">hcache_fetch_raw_str</a>(hc, <span class="stringliteral">&quot;index&quot;</span>, 5);</div>
<div class="line"><span class="lineno"> 1082</span>        <span class="keywordflow">if</span> (hdata)</div>
<div class="line"><span class="lineno"> 1083</span>        {</div>
<div class="line"><span class="lineno"> 1084</span>          <a class="code hl_define" href="nntp_2lib_8h.html#afbe93ce95fbbf1758c93d4b123fc2246">anum_t</a> first = 0, last = 0;</div>
<div class="line"><span class="lineno"> 1085</span> </div>
<div class="line"><span class="lineno"> 1086</span>          <span class="keywordflow">if</span> (sscanf(hdata, <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a> <span class="stringliteral">&quot; &quot;</span> <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a>, &amp;first, &amp;last) == 2)</div>
<div class="line"><span class="lineno"> 1087</span>          {</div>
<div class="line"><span class="lineno"> 1088</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;deleted)</div>
<div class="line"><span class="lineno"> 1089</span>            {</div>
<div class="line"><span class="lineno"> 1090</span>              <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;first_message = first;</div>
<div class="line"><span class="lineno"> 1091</span>              <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_message = last;</div>
<div class="line"><span class="lineno"> 1092</span>            }</div>
<div class="line"><span class="lineno"> 1093</span>            <span class="keywordflow">if</span> ((last &gt;= <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;first_message) &amp;&amp; (last &lt;= mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a3792d3aacd074ccb3cd92fcf686fa4e6">last_message</a>))</div>
<div class="line"><span class="lineno"> 1094</span>            {</div>
<div class="line"><span class="lineno"> 1095</span>              <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_cached = last;</div>
<div class="line"><span class="lineno"> 1096</span>              <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;%s last_cached=&quot;</span> <a class="code hl_define" href="nntp_2lib_8h.html#a9d3ef937cceedd7b24520f69c5191d68">ANUM_FMT</a> <span class="stringliteral">&quot;\n&quot;</span>, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;group, last);</div>
<div class="line"><span class="lineno"> 1097</span>            }</div>
<div class="line"><span class="lineno"> 1098</span>          }</div>
<div class="line"><span class="lineno"> 1099</span>          <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;hdata);</div>
<div class="line"><span class="lineno"> 1100</span>        }</div>
<div class="line"><span class="lineno"> 1101</span>        <a class="code hl_function" href="hcache_2hcache_8c.html#a791c8437997aca5d8747271ff4c75e98">hcache_close</a>(&amp;hc);</div>
<div class="line"><span class="lineno"> 1102</span>      }</div>
<div class="line"><span class="lineno"> 1103</span>      closedir(dir);</div>
<div class="line"><span class="lineno"> 1104</span>    }</div>
<div class="line"><span class="lineno"> 1105</span>  }</div>
<div class="line"><span class="lineno"> 1106</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1107</span> </div>
<div class="line"><span class="lineno"> 1108</span>  <span class="keywordflow">if</span> ((rc &lt; 0) || !leave_lock)</div>
<div class="line"><span class="lineno"> 1109</span>    <a class="code hl_function" href="#a64fdec9977db62a95daa5af59d280673">nntp_newsrc_close</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>);</div>
<div class="line"><span class="lineno"> 1110</span> </div>
<div class="line"><span class="lineno"> 1111</span>  <span class="keywordflow">if</span> (rc &lt; 0)</div>
<div class="line"><span class="lineno"> 1112</span>  {</div>
<div class="line"><span class="lineno"> 1113</span>    <a class="code hl_function" href="hash_8c.html#afa22b7f78bbf1b59a4a2bd4bdd20948b">mutt_hash_free</a>(&amp;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a>);</div>
<div class="line"><span class="lineno"> 1114</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a17e649e29d0d7d8e6137647e62aa4b37">groups_list</a>);</div>
<div class="line"><span class="lineno"> 1115</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#ac66124453d57694fec9563cdbe65ce97">newsrc_file</a>);</div>
<div class="line"><span class="lineno"> 1116</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a31956518f4a223c885421a1315b79330">authenticators</a>);</div>
<div class="line"><span class="lineno"> 1117</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>);</div>
<div class="line"><span class="lineno"> 1118</span>    <a class="code hl_function" href="socket_8c.html#a432eed609a221c68f457302d6e40c383">mutt_socket_close</a>(conn);</div>
<div class="line"><span class="lineno"> 1119</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;conn);</div>
<div class="line"><span class="lineno"> 1120</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1121</span>  }</div>
<div class="line"><span class="lineno"> 1122</span> </div>
<div class="line"><span class="lineno"> 1123</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>;</div>
<div class="line"><span class="lineno"> 1124</span>}</div>
<div class="ttc" id="abuffer_8c_html_ad76477cc0c660bc50162393e997233eb"><div class="ttname"><a href="buffer_8c.html#ad76477cc0c660bc50162393e997233eb">buf_strdup</a></div><div class="ttdeci">char * buf_strdup(const struct Buffer *buf)</div><div class="ttdoc">Copy a Buffer&#39;s string.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00571">buffer.c:571</a></div></div>
<div class="ttc" id="aconfig_2helpers_8h_html_afadba3dd7a0ec53c70d047005b2efcef"><div class="ttname"><a href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a></div><div class="ttdeci">const struct Expando * cs_subset_expando(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get an Expando config item by name.</div><div class="ttdef"><b>Definition</b> <a href="expando_2config__type_8c_source.html#l00360">config_type.c:360</a></div></div>
<div class="ttc" id="aconnaccount_8h_html_a25419e97b0149cb541a4f3906ce852fba88e08ced0262113ed414eb31dac201f1"><div class="ttname"><a href="connaccount_8h.html#a25419e97b0149cb541a4f3906ce852fba88e08ced0262113ed414eb31dac201f1">MUTT_CA_USER</a></div><div class="ttdeci">@ MUTT_CA_USER</div><div class="ttdoc">User name.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00036">connaccount.h:36</a></div></div>
<div class="ttc" id="aconnaccount_8h_html_a25419e97b0149cb541a4f3906ce852fbae477f9be6711da6e0abb96409c566798"><div class="ttname"><a href="connaccount_8h.html#a25419e97b0149cb541a4f3906ce852fbae477f9be6711da6e0abb96409c566798">MUTT_CA_PASS</a></div><div class="ttdeci">@ MUTT_CA_PASS</div><div class="ttdoc">Password.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00037">connaccount.h:37</a></div></div>
<div class="ttc" id="aconnaccount_8h_html_a4a13697bc3f261ea3949d4dbe3869863"><div class="ttname"><a href="connaccount_8h.html#a4a13697bc3f261ea3949d4dbe3869863">MUTT_ACCT_SSL</a></div><div class="ttdeci">#define MUTT_ACCT_SSL</div><div class="ttdoc">Account uses SSL/TLS.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00047">connaccount.h:47</a></div></div>
<div class="ttc" id="aconnaccount_8h_html_a9c5c05c3447f2884a5bbf1ab219e3f37"><div class="ttname"><a href="connaccount_8h.html#a9c5c05c3447f2884a5bbf1ab219e3f37">MUTT_ACCT_PASS</a></div><div class="ttdeci">#define MUTT_ACCT_PASS</div><div class="ttdoc">Password field has been set.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00046">connaccount.h:46</a></div></div>
<div class="ttc" id="aconnaccount_8h_html_ab496cae7636af7b356aad973a4a2e675"><div class="ttname"><a href="connaccount_8h.html#ab496cae7636af7b356aad973a4a2e675">MUTT_ACCT_USER</a></div><div class="ttdeci">#define MUTT_ACCT_USER</div><div class="ttdoc">User field has been set.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00044">connaccount.h:44</a></div></div>
<div class="ttc" id="aexpando_2filter_8c_html_aca5d8e52ad7cb152322d011300631bc1"><div class="ttname"><a href="expando_2filter_8c.html#aca5d8e52ad7cb152322d011300631bc1">expando_filter</a></div><div class="ttdeci">int expando_filter(const struct Expando *exp, const struct ExpandoRenderCallback *erc, void *data, MuttFormatFlags flags, int max_cols, char **env_list, struct Buffer *buf)</div><div class="ttdoc">Render an Expando and run the result through a filter.</div><div class="ttdef"><b>Definition</b> <a href="expando_2filter_8c_source.html#l00138">filter.c:138</a></div></div>
<div class="ttc" id="aexpando__newsrc_8c_html_aceb81cc70350b6de0506358f4c657778"><div class="ttname"><a href="expando__newsrc_8c.html#aceb81cc70350b6de0506358f4c657778">NntpRenderCallbacks</a></div><div class="ttdeci">const struct ExpandoRenderCallback NntpRenderCallbacks[]</div><div class="ttdoc">Callbacks for Newsrc Expandos.</div><div class="ttdef"><b>Definition</b> <a href="expando__newsrc_8c_source.html#l00161">expando_newsrc.c:161</a></div></div>
<div class="ttc" id="afile_8c_html_a42b89c4ae9ca386c22de502b37cdf45e"><div class="ttname"><a href="file_8c.html#a42b89c4ae9ca386c22de502b37cdf45e">mutt_file_mkdir</a></div><div class="ttdeci">int mutt_file_mkdir(const char *path, mode_t mode)</div><div class="ttdoc">Recursively create directories.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l00851">file.c:851</a></div></div>
<div class="ttc" id="agroup__conn__account__get__field_html_ga81411f29dda39c2e2276e7dc6985ea77"><div class="ttname"><a href="group__conn__account__get__field.html#ga81411f29dda39c2e2276e7dc6985ea77">nntp_get_field</a></div><div class="ttdeci">static const char * nntp_get_field(enum ConnAccountField field, void *gf_data)</div><div class="ttdoc">Get connection login credentials - Implements ConnAccount::get_field() -.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00914">newsrc.c:914</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00093">logging2.h:93</a></div></div>
<div class="ttc" id="ahash_8c_html_afa22b7f78bbf1b59a4a2bd4bdd20948b"><div class="ttname"><a href="hash_8c.html#afa22b7f78bbf1b59a4a2bd4bdd20948b">mutt_hash_free</a></div><div class="ttdeci">void mutt_hash_free(struct HashTable **ptr)</div><div class="ttdoc">Free a hash table.</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00457">hash.c:457</a></div></div>
<div class="ttc" id="ahcache_2hcache_8c_html_a791c8437997aca5d8747271ff4c75e98"><div class="ttname"><a href="hcache_2hcache_8c.html#a791c8437997aca5d8747271ff4c75e98">hcache_close</a></div><div class="ttdeci">void hcache_close(struct HeaderCache **ptr)</div><div class="ttdoc">Multiplexor for StoreOps::close.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2hcache_8c_source.html#l00544">hcache.c:544</a></div></div>
<div class="ttc" id="amutt__account_8c_html_abc47c557e0f361296ee93c89024f5c35"><div class="ttname"><a href="mutt__account_8c.html#abc47c557e0f361296ee93c89024f5c35">account_from_url</a></div><div class="ttdeci">int account_from_url(struct ConnAccount *cac, const struct Url *url)</div><div class="ttdoc">Fill ConnAccount with information from url.</div><div class="ttdef"><b>Definition</b> <a href="mutt__account_8c_source.html#l00044">mutt_account.c:44</a></div></div>
<div class="ttc" id="amutt__account_8h_html_a406c8474bdbb9cc2a25882558a367c2fa5cb8b16458e2d70c723c355ea3b8bfa3"><div class="ttname"><a href="mutt__account_8h.html#a406c8474bdbb9cc2a25882558a367c2fa5cb8b16458e2d70c723c355ea3b8bfa3">MUTT_ACCT_TYPE_NNTP</a></div><div class="ttdeci">@ MUTT_ACCT_TYPE_NNTP</div><div class="ttdoc">Nntp (Usenet) Account.</div><div class="ttdef"><b>Definition</b> <a href="mutt__account_8h_source.html#l00039">mutt_account.h:39</a></div></div>
<div class="ttc" id="amutt__socket_8c_html_ab79e92d0c88e3061f590cb1874b8b59d"><div class="ttname"><a href="mutt__socket_8c.html#ab79e92d0c88e3061f590cb1874b8b59d">mutt_conn_find</a></div><div class="ttdeci">struct Connection * mutt_conn_find(const struct ConnAccount *cac)</div><div class="ttdoc">Find a connection from a list.</div><div class="ttdef"><b>Definition</b> <a href="mutt__socket_8c_source.html#l00088">mutt_socket.c:88</a></div></div>
<div class="ttc" id="amuttlib_8c_html_adde3990a0490dfba609fc94dbdbfd6b3"><div class="ttname"><a href="muttlib_8c.html#adde3990a0490dfba609fc94dbdbfd6b3">buf_expand_path</a></div><div class="ttdeci">void buf_expand_path(struct Buffer *buf)</div><div class="ttdoc">Create the canonical path.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00314">muttlib.c:314</a></div></div>
<div class="ttc" id="anewsrc_8c_html_a00132ef57a28e8ec428b6fa298ea63d4"><div class="ttname"><a href="#a00132ef57a28e8ec428b6fa298ea63d4">nntp_hcache_open</a></div><div class="ttdeci">struct HeaderCache * nntp_hcache_open(struct NntpMboxData *mdata)</div><div class="ttdoc">Open newsgroup hcache.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00707">newsrc.c:707</a></div></div>
<div class="ttc" id="anewsrc_8c_html_a0e57436b35d68983c6fe44815f3ad505"><div class="ttname"><a href="#a0e57436b35d68983c6fe44815f3ad505">nntp_clear_cache</a></div><div class="ttdeci">void nntp_clear_cache(struct NntpAccountData *adata)</div><div class="ttdoc">Clear the NNTP cache.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00841">newsrc.c:841</a></div></div>
<div class="ttc" id="anewsrc_8c_html_a57bd184c51b8701e9613761a629ca485"><div class="ttname"><a href="#a57bd184c51b8701e9613761a629ca485">nntp_newsrc_parse</a></div><div class="ttdeci">int nntp_newsrc_parse(struct NntpAccountData *adata)</div><div class="ttdoc">Parse .newsrc file.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00164">newsrc.c:164</a></div></div>
<div class="ttc" id="anewsrc_8c_html_a8a0f0a9d60138637dde00cb0732c6b9e"><div class="ttname"><a href="#a8a0f0a9d60138637dde00cb0732c6b9e">active_get_cache</a></div><div class="ttdeci">static int active_get_cache(struct NntpAccountData *adata)</div><div class="ttdoc">Load list of all newsgroups from cache.</div><div class="ttdef"><b>Definition</b> <a href="newsrc_8c_source.html#l00613">newsrc.c:613</a></div></div>
<div class="ttc" id="anntp_2adata_8c_html_ad68d7c631f8efc0cf6d986ee23820399"><div class="ttname"><a href="nntp_2adata_8c.html#ad68d7c631f8efc0cf6d986ee23820399">nntp_adata_new</a></div><div class="ttdeci">struct NntpAccountData * nntp_adata_new(struct Connection *conn)</div><div class="ttdoc">Allocate and initialise a new NntpAccountData structure.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8c_source.html#l00065">adata.c:65</a></div></div>
<div class="ttc" id="anntp_2lib_8h_html_a1782c5df61421b1951f9672b5d78d952"><div class="ttname"><a href="nntp_2lib_8h.html#a1782c5df61421b1951f9672b5d78d952">nntp_active_fetch</a></div><div class="ttdeci">int nntp_active_fetch(struct NntpAccountData *adata, bool mark_new)</div><div class="ttdoc">Fetch list of all newsgroups from server.</div><div class="ttdef"><b>Definition</b> <a href="nntp_8c_source.html#l02036">nntp.c:2036</a></div></div>
<div class="ttc" id="anntp_2private_8h_html_a1e2acdcc22ea61457b4dcafc8825aae5"><div class="ttname"><a href="nntp_2private_8h.html#a1e2acdcc22ea61457b4dcafc8825aae5">NNTP_SSL_PORT</a></div><div class="ttdeci">#define NNTP_SSL_PORT</div><div class="ttdef"><b>Definition</b> <a href="nntp_2private_8h_source.html#l00037">private.h:37</a></div></div>
<div class="ttc" id="anntp_2private_8h_html_aaccdd399473f113674cbabfeaa5ef972"><div class="ttname"><a href="nntp_2private_8h.html#aaccdd399473f113674cbabfeaa5ef972">NNTP_PORT</a></div><div class="ttdeci">#define NNTP_PORT</div><div class="ttdef"><b>Definition</b> <a href="nntp_2private_8h_source.html#l00036">private.h:36</a></div></div>
<div class="ttc" id="anntp_8c_html_a1f4ed64d09034fa97562c2976d80d614"><div class="ttname"><a href="nntp_8c.html#a1f4ed64d09034fa97562c2976d80d614">nntp_check_new_groups</a></div><div class="ttdeci">int nntp_check_new_groups(struct Mailbox *m, struct NntpAccountData *adata)</div><div class="ttdoc">Check for new groups/articles in subscribed groups.</div><div class="ttdef"><b>Definition</b> <a href="nntp_8c_source.html#l02104">nntp.c:2104</a></div></div>
<div class="ttc" id="anntp_8c_html_abc4e8951366a6bf81d5d4d4ecf5ad4ba"><div class="ttname"><a href="nntp_8c.html#abc4e8951366a6bf81d5d4d4ecf5ad4ba">nntp_open_connection</a></div><div class="ttdeci">int nntp_open_connection(struct NntpAccountData *adata)</div><div class="ttdoc">Connect to server, authenticate and get capabilities.</div><div class="ttdef"><b>Definition</b> <a href="nntp_8c_source.html#l01765">nntp.c:1765</a></div></div>
<div class="ttc" id="arender_8h_html_a5167e8b2777abe5e02be90e0d2a816de"><div class="ttname"><a href="render_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_FORMAT_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00033">render.h:33</a></div></div>
<div class="ttc" id="asocket_8c_html_a432eed609a221c68f457302d6e40c383"><div class="ttname"><a href="socket_8c.html#a432eed609a221c68f457302d6e40c383">mutt_socket_close</a></div><div class="ttdeci">int mutt_socket_close(struct Connection *conn)</div><div class="ttdoc">Close a socket.</div><div class="ttdef"><b>Definition</b> <a href="socket_8c_source.html#l00100">socket.c:100</a></div></div>
<div class="ttc" id="astructConnAccount_html"><div class="ttname"><a href="structConnAccount.html">ConnAccount</a></div><div class="ttdoc">Login details for a remote server.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00052">connaccount.h:53</a></div></div>
<div class="ttc" id="astructConnAccount_html_a48b8084b2dd1ef3d4e051a01cf15c7ca"><div class="ttname"><a href="structConnAccount.html#a48b8084b2dd1ef3d4e051a01cf15c7ca">ConnAccount::user</a></div><div class="ttdeci">char user[128]</div><div class="ttdoc">Username.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00056">connaccount.h:56</a></div></div>
<div class="ttc" id="astructConnAccount_html_a842f1bf5afe0830ae96d80bdacead037"><div class="ttname"><a href="structConnAccount.html#a842f1bf5afe0830ae96d80bdacead037">ConnAccount::pass</a></div><div class="ttdeci">char pass[256]</div><div class="ttdoc">Password.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00057">connaccount.h:57</a></div></div>
<div class="ttc" id="astructConnAccount_html_a86102cb75ff512603a5559d4908b1ba4"><div class="ttname"><a href="structConnAccount.html#a86102cb75ff512603a5559d4908b1ba4">ConnAccount::service</a></div><div class="ttdeci">const char * service</div><div class="ttdoc">Name of the service, e.g. &quot;imap&quot;.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00061">connaccount.h:61</a></div></div>
<div class="ttc" id="astructConnAccount_html_ae69871442c1135a06b359011104f630b"><div class="ttname"><a href="structConnAccount.html#ae69871442c1135a06b359011104f630b">ConnAccount::get_field</a></div><div class="ttdeci">const char *(* get_field)(enum ConnAccountField field, void *gf_data)</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00070">connaccount.h:70</a></div></div>
<div class="ttc" id="astructConnAccount_html_aefc6c0b647de43e60472000102a0e208"><div class="ttname"><a href="structConnAccount.html#aefc6c0b647de43e60472000102a0e208">ConnAccount::type</a></div><div class="ttdeci">unsigned char type</div><div class="ttdoc">Connection type, e.g. MUTT_ACCT_TYPE_IMAP.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00059">connaccount.h:59</a></div></div>
<div class="ttc" id="astructConnAccount_html_af674ed2969fc29ff7d99f8b4cff6c92b"><div class="ttname"><a href="structConnAccount.html#af674ed2969fc29ff7d99f8b4cff6c92b">ConnAccount::flags</a></div><div class="ttdeci">MuttAccountFlags flags</div><div class="ttdoc">Which fields are initialised, e.g. MUTT_ACCT_USER.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00060">connaccount.h:60</a></div></div>
<div class="ttc" id="astructConnAccount_html_aff0fc77d9a388c80c347c5c2c925086d"><div class="ttname"><a href="structConnAccount.html#aff0fc77d9a388c80c347c5c2c925086d">ConnAccount::port</a></div><div class="ttdeci">unsigned short port</div><div class="ttdoc">Port to connect to.</div><div class="ttdef"><b>Definition</b> <a href="connaccount_8h_source.html#l00058">connaccount.h:58</a></div></div>
<div class="ttc" id="astructConnection_html"><div class="ttname"><a href="structConnection.html">Connection</a></div><div class="ttdef"><b>Definition</b> <a href="connection_8h_source.html#l00047">connection.h:48</a></div></div>
<div class="ttc" id="astructExpando_html"><div class="ttname"><a href="structExpando.html">Expando</a></div><div class="ttdoc">Parsed Expando trees.</div><div class="ttdef"><b>Definition</b> <a href="expando_2expando_8h_source.html#l00040">expando.h:41</a></div></div>
<div class="ttc" id="astructHeaderCache_html"><div class="ttname"><a href="structHeaderCache.html">HeaderCache</a></div><div class="ttdoc">Header Cache.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2lib_8h_source.html#l00085">lib.h:86</a></div></div>
<div class="ttc" id="astructNeoMutt_html_a5410041863c473ba1f27b415c0a40482"><div class="ttname"><a href="structNeoMutt.html#a5410041863c473ba1f27b415c0a40482">NeoMutt::env</a></div><div class="ttdeci">char ** env</div><div class="ttdoc">Private copy of the environment variables.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00055">neomutt.h:55</a></div></div>
<div class="ttc" id="astructNntpAccountData_html_a31956518f4a223c885421a1315b79330"><div class="ttname"><a href="structNntpAccountData.html#a31956518f4a223c885421a1315b79330">NntpAccountData::authenticators</a></div><div class="ttdeci">char * authenticators</div><div class="ttdef"><b>Definition</b> <a href="nntp_2adata_8h_source.html#l00052">adata.h:52</a></div></div>
<div class="ttc" id="astructUrl_html_a18db9f379a95b00dc4f4ae7e4ac8698b"><div class="ttname"><a href="structUrl.html#a18db9f379a95b00dc4f4ae7e4ac8698b">Url::user</a></div><div class="ttdeci">char * user</div><div class="ttdoc">Username.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00071">url.h:71</a></div></div>
<div class="ttc" id="astructUrl_html_a565d3391c8b8114a97ad6f1b7c75b5f6"><div class="ttname"><a href="structUrl.html#a565d3391c8b8114a97ad6f1b7c75b5f6">Url::host</a></div><div class="ttdeci">char * host</div><div class="ttdoc">Host.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00073">url.h:73</a></div></div>
<div class="ttc" id="astructUrl_html_ac65d0bd34ac810ddf4a9a1a348151e67"><div class="ttname"><a href="structUrl.html#ac65d0bd34ac810ddf4a9a1a348151e67">Url::pass</a></div><div class="ttdeci">char * pass</div><div class="ttdoc">Password.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00072">url.h:72</a></div></div>
<div class="ttc" id="astructUrl_html_ad84f1714cab12c536e1bcc552b1c5b51"><div class="ttname"><a href="structUrl.html#ad84f1714cab12c536e1bcc552b1c5b51">Url::scheme</a></div><div class="ttdeci">enum UrlScheme scheme</div><div class="ttdoc">Scheme, e.g. U_SMTPS.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00070">url.h:70</a></div></div>
<div class="ttc" id="aurl_8c_html_a3030b91052fa1a5fee0ca7b1d4d94f93"><div class="ttname"><a href="url_8c.html#a3030b91052fa1a5fee0ca7b1d4d94f93">url_parse</a></div><div class="ttdeci">struct Url * url_parse(const char *src)</div><div class="ttdoc">Fill in Url.</div><div class="ttdef"><b>Definition</b> <a href="url_8c_source.html#l00238">url.c:238</a></div></div>
<div class="ttc" id="aurl_8c_html_a7b05825b8bb8f87657713fe5bc6edfaa"><div class="ttname"><a href="url_8c.html#a7b05825b8bb8f87657713fe5bc6edfaa">url_free</a></div><div class="ttdeci">void url_free(struct Url **ptr)</div><div class="ttdoc">Free the contents of a URL.</div><div class="ttdef"><b>Definition</b> <a href="url_8c_source.html#l00123">url.c:123</a></div></div>
<div class="ttc" id="aurl_8h_html_a10b37ccf31f8e23024ff3ba628aa4243a36622ec19979218e1af310e5e17fba76"><div class="ttname"><a href="url_8h.html#a10b37ccf31f8e23024ff3ba628aa4243a36622ec19979218e1af310e5e17fba76">U_NNTPS</a></div><div class="ttdeci">@ U_NNTPS</div><div class="ttdoc">Url is nntps://.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00042">url.h:42</a></div></div>
<div class="ttc" id="aurl_8h_html_a10b37ccf31f8e23024ff3ba628aa4243a867c7d440d5858e5c749d595a7e971a1"><div class="ttname"><a href="url_8h.html#a10b37ccf31f8e23024ff3ba628aa4243a867c7d440d5858e5c749d595a7e971a1">U_NNTP</a></div><div class="ttdeci">@ U_NNTP</div><div class="ttdoc">Url is nntp://.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00041">url.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-34" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_ae9ee1cc132aa482531fdc2463200e492_cgraph.svg" width="891" height="1640"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-35" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_ae9ee1cc132aa482531fdc2463200e492_icgraph.svg" width="366" height="272"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3a2a364d853a786fb0b224c379d28eab" name="a3a2a364d853a786fb0b224c379d28eab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a2a364d853a786fb0b224c379d28eab">&#9670;&#160;</a></span>nntp_article_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nntp_article_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>group</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nntp_2lib_8h.html#afbe93ce95fbbf1758c93d4b123fc2246">anum_t</a></td>          <td class="paramname"><span class="paramname"><em>anum</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get status of articles from .newsrc. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">group</td><td>Newsgroup </td></tr>
    <tr><td class="paramname">anum</td><td>Article number</td></tr>
  </table>
  </dd>
</dl>
<p>Full status flags are not supported by nntp, but we can fake some of them: Read = a read message number is in the .newsrc New = not read and not cached Old = not read but cached </p>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l01138">1138</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1139</span>{</div>
<div class="line"><span class="lineno"> 1140</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = m-&gt;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>;</div>
<div class="line"><span class="lineno"> 1141</span> </div>
<div class="line"><span class="lineno"> 1142</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>)</div>
<div class="line"><span class="lineno"> 1143</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;adata-&gt;groups_hash, <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>);</div>
<div class="line"><span class="lineno"> 1144</span> </div>
<div class="line"><span class="lineno"> 1145</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1146</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1147</span> </div>
<div class="line"><span class="lineno"> 1148</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_len; i++)</div>
<div class="line"><span class="lineno"> 1149</span>  {</div>
<div class="line"><span class="lineno"> 1150</span>    <span class="keywordflow">if</span> ((anum &gt;= <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[i].first) &amp;&amp; (anum &lt;= mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>[i].<a class="code hl_variable" href="structNewsrcEntry.html#a35e1d881699320677a0032b9fc207565">last</a>))</div>
<div class="line"><span class="lineno"> 1151</span>    {</div>
<div class="line"><span class="lineno"> 1152</span>      <span class="comment">/* can&#39;t use mutt_set_flag() because mview_update() didn&#39;t get called yet */</span></div>
<div class="line"><span class="lineno"> 1153</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1154</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1155</span>    }</div>
<div class="line"><span class="lineno"> 1156</span>  }</div>
<div class="line"><span class="lineno"> 1157</span> </div>
<div class="line"><span class="lineno"> 1158</span>  <span class="comment">/* article was not cached yet, it&#39;s new */</span></div>
<div class="line"><span class="lineno"> 1159</span>  <span class="keywordflow">if</span> (anum &gt; <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_cached)</div>
<div class="line"><span class="lineno"> 1160</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1161</span> </div>
<div class="line"><span class="lineno"> 1162</span>  <span class="comment">/* article isn&#39;t read but cached, it&#39;s old */</span></div>
<div class="line"><span class="lineno"> 1163</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_mark_old = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;mark_old&quot;</span>);</div>
<div class="line"><span class="lineno"> 1164</span>  <span class="keywordflow">if</span> (c_mark_old)</div>
<div class="line"><span class="lineno"> 1165</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1166</span>}</div>
<div class="ttc" id="astructEmail_html_a6d9062408a8c89b19cf25584dd2ffb57"><div class="ttname"><a href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">Email::old</a></div><div class="ttdeci">bool old</div><div class="ttdoc">Email is seen, but unread.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00049">email.h:49</a></div></div>
</div><!-- fragment --><div id="dynsection-36" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a3a2a364d853a786fb0b224c379d28eab_cgraph.svg" width="312" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-37" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a3a2a364d853a786fb0b224c379d28eab_icgraph.svg" width="864" height="166"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8116259f1259f7d6a96240cff0e9fa9e" name="a8116259f1259f7d6a96240cff0e9fa9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8116259f1259f7d6a96240cff0e9fa9e">&#9670;&#160;</a></span>mutt_newsgroup_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> * mutt_newsgroup_subscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *</td>          <td class="paramname"><span class="paramname"><em>adata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>group</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subscribe newsgroup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>NNTP server </td></tr>
    <tr><td class="paramname">group</td><td>Newsgroup </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>NNTP data </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l01175">1175</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1176</span>{</div>
<div class="line"><span class="lineno"> 1177</span>  <span class="keywordflow">if</span> (!adata || !adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a> || !group || (*group == <span class="charliteral">&#39;\0&#39;</span>))</div>
<div class="line"><span class="lineno"> 1178</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1179</span> </div>
<div class="line"><span class="lineno"> 1180</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="#a9f33e774091672b52c32fcdf3a96b05c">mdata_find</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>, <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>);</div>
<div class="line"><span class="lineno"> 1181</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;subscribed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1182</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent)</div>
<div class="line"><span class="lineno"> 1183</span>  {</div>
<div class="line"><span class="lineno"> 1184</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent = <a class="code hl_define" href="memory_8h.html#a9aaf8f21a29735767a069ff1aee9d7d9">MUTT_MEM_CALLOC</a>(1, <span class="keyword">struct</span> <a class="code hl_struct" href="structNewsrcEntry.html">NewsrcEntry</a>);</div>
<div class="line"><span class="lineno"> 1185</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_len = 1;</div>
<div class="line"><span class="lineno"> 1186</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[0].first = 1;</div>
<div class="line"><span class="lineno"> 1187</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[0].last = 0;</div>
<div class="line"><span class="lineno"> 1188</span>  }</div>
<div class="line"><span class="lineno"> 1189</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>;</div>
<div class="line"><span class="lineno"> 1190</span>}</div>
</div><!-- fragment --><div id="dynsection-38" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a8116259f1259f7d6a96240cff0e9fa9e_cgraph.svg" width="340" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-39" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a8116259f1259f7d6a96240cff0e9fa9e_icgraph.svg" width="408" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af7a9bc2676ed73179b698122081f3abe" name="af7a9bc2676ed73179b698122081f3abe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7a9bc2676ed73179b698122081f3abe">&#9670;&#160;</a></span>mutt_newsgroup_unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> * mutt_newsgroup_unsubscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *</td>          <td class="paramname"><span class="paramname"><em>adata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>group</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unsubscribe newsgroup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adata</td><td>NNTP server </td></tr>
    <tr><td class="paramname">group</td><td>Newsgroup </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>NNTP data </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l01199">1199</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1200</span>{</div>
<div class="line"><span class="lineno"> 1201</span>  <span class="keywordflow">if</span> (!adata || !adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a> || !group || (*group == <span class="charliteral">&#39;\0&#39;</span>))</div>
<div class="line"><span class="lineno"> 1202</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1203</span> </div>
<div class="line"><span class="lineno"> 1204</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a>, <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>);</div>
<div class="line"><span class="lineno"> 1205</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1206</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1207</span> </div>
<div class="line"><span class="lineno"> 1208</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;subscribed = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1209</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_save_unsubscribed = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;save_unsubscribed&quot;</span>);</div>
<div class="line"><span class="lineno"> 1210</span>  <span class="keywordflow">if</span> (!c_save_unsubscribed)</div>
<div class="line"><span class="lineno"> 1211</span>  {</div>
<div class="line"><span class="lineno"> 1212</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_len = 0;</div>
<div class="line"><span class="lineno"> 1213</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent);</div>
<div class="line"><span class="lineno"> 1214</span>  }</div>
<div class="line"><span class="lineno"> 1215</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>;</div>
<div class="line"><span class="lineno"> 1216</span>}</div>
</div><!-- fragment --><div id="dynsection-40" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-40-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-40-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-40-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_af7a9bc2676ed73179b698122081f3abe_cgraph.svg" width="382" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-41" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-41-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-41-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-41-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_af7a9bc2676ed73179b698122081f3abe_icgraph.svg" width="424" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6706491e2d469cd6d2b48fc816e28517" name="a6706491e2d469cd6d2b48fc816e28517"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6706491e2d469cd6d2b48fc816e28517">&#9670;&#160;</a></span>mutt_newsgroup_catchup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> * mutt_newsgroup_catchup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *</td>          <td class="paramname"><span class="paramname"><em>adata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>group</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Catchup newsgroup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">adata</td><td>NNTP server </td></tr>
    <tr><td class="paramname">group</td><td>Newsgroup </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>NNTP data </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l01226">1226</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1228</span>{</div>
<div class="line"><span class="lineno"> 1229</span>  <span class="keywordflow">if</span> (!adata || !adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a> || !group || (*group == <span class="charliteral">&#39;\0&#39;</span>))</div>
<div class="line"><span class="lineno"> 1230</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1231</span> </div>
<div class="line"><span class="lineno"> 1232</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a>, <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>);</div>
<div class="line"><span class="lineno"> 1233</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1234</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent)</div>
<div class="line"><span class="lineno"> 1237</span>  {</div>
<div class="line"><span class="lineno"> 1238</span>    <a class="code hl_define" href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a>(&amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent, 1, <span class="keyword">struct</span> <a class="code hl_struct" href="structNewsrcEntry.html">NewsrcEntry</a>);</div>
<div class="line"><span class="lineno"> 1239</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_len = 1;</div>
<div class="line"><span class="lineno"> 1240</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[0].first = 1;</div>
<div class="line"><span class="lineno"> 1241</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[0].last = <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;last_message;</div>
<div class="line"><span class="lineno"> 1242</span>  }</div>
<div class="line"><span class="lineno"> 1243</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;unread = 0;</div>
<div class="line"><span class="lineno"> 1244</span>  <span class="keywordflow">if</span> (m &amp;&amp; (m-&gt;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> == <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>))</div>
<div class="line"><span class="lineno"> 1245</span>  {</div>
<div class="line"><span class="lineno"> 1246</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno"> 1247</span>    {</div>
<div class="line"><span class="lineno"> 1248</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div>
<div class="line"><span class="lineno"> 1249</span>      <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno"> 1250</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1251</span>      <a class="code hl_function" href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a>(m, e, <a class="code hl_enumvalue" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd">MUTT_READ</a>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1252</span>    }</div>
<div class="line"><span class="lineno"> 1253</span>  }</div>
<div class="line"><span class="lineno"> 1254</span>  <span class="keywordflow">return</span> mdata;</div>
<div class="line"><span class="lineno"> 1255</span>}</div>
<div class="ttc" id="aflags_8c_html_a29547b9c7c39eb22039ff4b8f1c03829"><div class="ttname"><a href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a></div><div class="ttdeci">void mutt_set_flag(struct Mailbox *m, struct Email *e, enum MessageType flag, bool bf, bool upd_mbox)</div><div class="ttdoc">Set a flag on an email.</div><div class="ttdef"><b>Definition</b> <a href="flags_8c_source.html#l00056">flags.c:56</a></div></div>
<div class="ttc" id="amutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd">MUTT_READ</a></div><div class="ttdeci">@ MUTT_READ</div><div class="ttdoc">Messages that have been read.</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00073">mutt.h:73</a></div></div>
</div><!-- fragment --><div id="dynsection-42" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-42-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-42-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-42-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a6706491e2d469cd6d2b48fc816e28517_cgraph.svg" width="355" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-43" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-43-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-43-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-43-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a6706491e2d469cd6d2b48fc816e28517_icgraph.svg" width="356" height="171"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa27ee89ff347b03db409f087a69e20e3" name="aa27ee89ff347b03db409f087a69e20e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa27ee89ff347b03db409f087a69e20e3">&#9670;&#160;</a></span>mutt_newsgroup_uncatchup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structNntpMboxData.html">NntpMboxData</a> * mutt_newsgroup_uncatchup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structNntpAccountData.html">NntpAccountData</a> *</td>          <td class="paramname"><span class="paramname"><em>adata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>group</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uncatchup newsgroup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">adata</td><td>NNTP server </td></tr>
    <tr><td class="paramname">group</td><td>Newsgroup </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>NNTP data </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l01265">1265</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1267</span>{</div>
<div class="line"><span class="lineno"> 1268</span>  <span class="keywordflow">if</span> (!adata || !adata-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a> || !group || (*group == <span class="charliteral">&#39;\0&#39;</span>))</div>
<div class="line"><span class="lineno"> 1269</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1270</span> </div>
<div class="line"><span class="lineno"> 1271</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a>(<a class="code hl_variable" href="structNntpMboxData.html#a5fe54958715f3c542698ee11e6fd6687">adata</a>-&gt;<a class="code hl_variable" href="structNntpAccountData.html#a0c47d705c8553a61127b79839399607d">groups_hash</a>, <a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>);</div>
<div class="line"><span class="lineno"> 1272</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1273</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1274</span> </div>
<div class="line"><span class="lineno"> 1275</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent)</div>
<div class="line"><span class="lineno"> 1276</span>  {</div>
<div class="line"><span class="lineno"> 1277</span>    <a class="code hl_define" href="memory_8h.html#abd7aad5fe8f11bcd476c64b4243081ba">MUTT_MEM_REALLOC</a>(&amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent, 1, <span class="keyword">struct</span> <a class="code hl_struct" href="structNewsrcEntry.html">NewsrcEntry</a>);</div>
<div class="line"><span class="lineno"> 1278</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_len = 1;</div>
<div class="line"><span class="lineno"> 1279</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[0].first = 1;</div>
<div class="line"><span class="lineno"> 1280</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;newsrc_ent[0].last = <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;first_message - 1;</div>
<div class="line"><span class="lineno"> 1281</span>  }</div>
<div class="line"><span class="lineno"> 1282</span>  <span class="keywordflow">if</span> (m &amp;&amp; (m-&gt;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> == <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>))</div>
<div class="line"><span class="lineno"> 1283</span>  {</div>
<div class="line"><span class="lineno"> 1284</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;unread = m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>;</div>
<div class="line"><span class="lineno"> 1285</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno"> 1286</span>    {</div>
<div class="line"><span class="lineno"> 1287</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div>
<div class="line"><span class="lineno"> 1288</span>      <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno"> 1289</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1290</span>      <a class="code hl_function" href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a>(m, e, <a class="code hl_enumvalue" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd">MUTT_READ</a>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1291</span>    }</div>
<div class="line"><span class="lineno"> 1292</span>  }</div>
<div class="line"><span class="lineno"> 1293</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1294</span>  {</div>
<div class="line"><span class="lineno"> 1295</span>    mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a98dfbd45b53b18796fa524f87b8ce32e">unread</a> = mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a3792d3aacd074ccb3cd92fcf686fa4e6">last_message</a>;</div>
<div class="line"><span class="lineno"> 1296</span>    <span class="keywordflow">if</span> (mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>)</div>
<div class="line"><span class="lineno"> 1297</span>      mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a98dfbd45b53b18796fa524f87b8ce32e">unread</a> -= mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a9747475877d94ec69209a43352cf25cb">newsrc_ent</a>[0].<a class="code hl_variable" href="structNewsrcEntry.html#a35e1d881699320677a0032b9fc207565">last</a>;</div>
<div class="line"><span class="lineno"> 1298</span>  }</div>
<div class="line"><span class="lineno"> 1299</span>  <span class="keywordflow">return</span> mdata;</div>
<div class="line"><span class="lineno"> 1300</span>}</div>
</div><!-- fragment --><div id="dynsection-44" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-44-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-44-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-44-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_aa27ee89ff347b03db409f087a69e20e3_cgraph.svg" width="371" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-45" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-45-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-45-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-45-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_aa27ee89ff347b03db409f087a69e20e3_icgraph.svg" width="346" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5d6b4cf3e2a57697ddf28fb7b616cb46" name="a5d6b4cf3e2a57697ddf28fb7b616cb46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d6b4cf3e2a57697ddf28fb7b616cb46">&#9670;&#160;</a></span>nntp_mailbox()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nntp_mailbox </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>buflen</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get first newsgroup with new messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">buf</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer.">Buffer</a> for result </td></tr>
    <tr><td class="paramname">buflen</td><td>Length of buffer </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="newsrc_8c_source.html#l01308">1308</a> of file <a class="el" href="newsrc_8c_source.html">newsrc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1309</span>{</div>
<div class="line"><span class="lineno"> 1310</span>  <span class="keywordflow">if</span> (!m)</div>
<div class="line"><span class="lineno"> 1311</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1312</span> </div>
<div class="line"><span class="lineno"> 1313</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="nntp_2lib_8h.html#ae58e3a5dcd99b6bbd0354b133fc220ce">CurrentNewsSrv</a>-&gt;groups_num; i++)</div>
<div class="line"><span class="lineno"> 1314</span>  {</div>
<div class="line"><span class="lineno"> 1315</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_variable" href="nntp_2lib_8h.html#ae58e3a5dcd99b6bbd0354b133fc220ce">CurrentNewsSrv</a>-&gt;groups_list[i];</div>
<div class="line"><span class="lineno"> 1316</span> </div>
<div class="line"><span class="lineno"> 1317</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> || !<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;subscribed || !<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;unread)</div>
<div class="line"><span class="lineno"> 1318</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1319</span> </div>
<div class="line"><span class="lineno"> 1320</span>    <span class="keywordflow">if</span> ((m-&gt;<a class="code hl_variable" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> == <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803">MUTT_NNTP</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1321</span>        <a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;group, ((<span class="keyword">struct</span> <a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *) m-&gt;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)-&gt;group))</div>
<div class="line"><span class="lineno"> 1322</span>    {</div>
<div class="line"><span class="lineno"> 1323</span>      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structNntpMboxData.html#a98dfbd45b53b18796fa524f87b8ce32e">unread</a> = 0;</div>
<div class="line"><span class="lineno"> 1324</span> </div>
<div class="line"><span class="lineno"> 1325</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; j++)</div>
<div class="line"><span class="lineno"> 1326</span>      {</div>
<div class="line"><span class="lineno"> 1327</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[j];</div>
<div class="line"><span class="lineno"> 1328</span>        <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno"> 1329</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1330</span>        <span class="keywordflow">if</span> (!e-&gt;<a class="code hl_variable" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> &amp;&amp; !e-&gt;<a class="code hl_variable" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a>)</div>
<div class="line"><span class="lineno"> 1331</span>          unread++;</div>
<div class="line"><span class="lineno"> 1332</span>      }</div>
<div class="line"><span class="lineno"> 1333</span>      <span class="keywordflow">if</span> (unread == 0)</div>
<div class="line"><span class="lineno"> 1334</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1335</span>    }</div>
<div class="line"><span class="lineno"> 1336</span>    <a class="code hl_function" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(buf, mdata-&gt;<a class="code hl_variable" href="structNntpMboxData.html#a4eeac824a82fb5bb884aa9aab449ccf8">group</a>, buflen);</div>
<div class="line"><span class="lineno"> 1337</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1338</span>  }</div>
<div class="line"><span class="lineno"> 1339</span>}</div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803">MUTT_NNTP</a></div><div class="ttdeci">@ MUTT_NNTP</div><div class="ttdoc">&#39;NNTP&#39; (Usenet) Mailbox type</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00049">mailbox.h:49</a></div></div>
<div class="ttc" id="anntp_2lib_8h_html_ae58e3a5dcd99b6bbd0354b133fc220ce"><div class="ttname"><a href="nntp_2lib_8h.html#ae58e3a5dcd99b6bbd0354b133fc220ce">CurrentNewsSrv</a></div><div class="ttdeci">struct NntpAccountData * CurrentNewsSrv</div><div class="ttdoc">Current NNTP news server.</div><div class="ttdef"><b>Definition</b> <a href="nntp_8c_source.html#l00076">nntp.c:76</a></div></div>
<div class="ttc" id="astructMailbox_html_a5638329fb2ebd4bbe1f4a949ec8de174"><div class="ttname"><a href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">Mailbox::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Mailbox type.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00102">mailbox.h:102</a></div></div>
</div><!-- fragment --><div id="dynsection-46" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-46-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-46-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-46-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a5d6b4cf3e2a57697ddf28fb7b616cb46_cgraph.svg" width="278" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-47" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-47-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-47-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-47-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="newsrc_8c_a5d6b4cf3e2a57697ddf28fb7b616cb46_icgraph.svg" width="331" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
