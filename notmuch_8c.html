<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: notmuch/notmuch.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2025-12-11-30-ge364a7</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('notmuch_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">notmuch.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Notmuch virtual mailbox type.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;notmuch.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="notmuch_2private_8h_source.html">private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt_2lib_8h_source.html">mutt/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_2lib_8h_source.html">config/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="email_2lib_8h_source.html">email/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="core_2lib_8h_source.html">core/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt_8h_source.html">mutt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="notmuch_2lib_8h_source.html">lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="editor_2lib_8h_source.html">editor/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hcache_2lib_8h_source.html">hcache/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="history_2lib_8h_source.html">history/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="index_2lib_8h_source.html">index/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="progress_2lib_8h_source.html">progress/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="notmuch_2adata_8h_source.html">adata.h</a>&quot;</code><br />
<code>#include &quot;commands.h&quot;</code><br />
<code>#include &quot;<a class="el" href="notmuch_2edata_8h_source.html">edata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="maildir_2shared_8h_source.html">maildir/shared.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="notmuch_2mdata_8h_source.html">mdata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutt__thread_8h_source.html">mutt_thread.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mx_8h_source.html">mx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="protos_8h_source.html">protos.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="query_8h_source.html">query.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tag_8h_source.html">tag.h</a>&quot;</code><br />
<code>#include &lt;libintl.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for notmuch.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c__incl.svg" width="2540" height="274"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="notmuch_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac14b20cce8965804b7da03772f8d6f0b" id="r_ac14b20cce8965804b7da03772f8d6f0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac14b20cce8965804b7da03772f8d6f0b">nm_init</a> (void)</td></tr>
<tr class="memdesc:ac14b20cce8965804b7da03772f8d6f0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup feature commands.  <br /></td></tr>
<tr class="separator:ac14b20cce8965804b7da03772f8d6f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99bcf8d4cf20029c6285d28d681efe00" id="r_a99bcf8d4cf20029c6285d28d681efe00"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structHeaderCache.html">HeaderCache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a99bcf8d4cf20029c6285d28d681efe00">nm_hcache_open</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a99bcf8d4cf20029c6285d28d681efe00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a header cache.  <br /></td></tr>
<tr class="separator:a99bcf8d4cf20029c6285d28d681efe00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea09d673b9d50ceb497435f800bb4075" id="r_aea09d673b9d50ceb497435f800bb4075"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aea09d673b9d50ceb497435f800bb4075">nm_hcache_close</a> (struct <a class="el" href="structHeaderCache.html">HeaderCache</a> **ptr)</td></tr>
<tr class="memdesc:aea09d673b9d50ceb497435f800bb4075"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the header cache.  <br /></td></tr>
<tr class="separator:aea09d673b9d50ceb497435f800bb4075"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee14876a4916eff9cbdd7678abce919" id="r_a0ee14876a4916eff9cbdd7678abce919"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0ee14876a4916eff9cbdd7678abce919">nm_get_default_url</a> (void)</td></tr>
<tr class="memdesc:a0ee14876a4916eff9cbdd7678abce919"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> with default Notmuch settings.  <br /></td></tr>
<tr class="separator:a0ee14876a4916eff9cbdd7678abce919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8920fc52f45278586c66a02808a648c8" id="r_a8920fc52f45278586c66a02808a648c8"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structNmMboxData.html">NmMboxData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8920fc52f45278586c66a02808a648c8">nm_get_default_data</a> (void)</td></tr>
<tr class="memdesc:a8920fc52f45278586c66a02808a648c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> with default Notmuch settings.  <br /></td></tr>
<tr class="separator:a8920fc52f45278586c66a02808a648c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49be0897f8fb6c33c74a838b83f4ed46" id="r_a49be0897f8fb6c33c74a838b83f4ed46"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a49be0897f8fb6c33c74a838b83f4ed46">init_mailbox</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a49be0897f8fb6c33c74a838b83f4ed46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add Notmuch data to the <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a>.  <br /></td></tr>
<tr class="separator:a49be0897f8fb6c33c74a838b83f4ed46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f9c7fb1a77cbbd2a1e0e55a434ef7ac" id="r_a1f9c7fb1a77cbbd2a1e0e55a434ef7ac"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f9c7fb1a77cbbd2a1e0e55a434ef7ac">email_get_id</a> (struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a1f9c7fb1a77cbbd2a1e0e55a434ef7ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the unique Notmuch Id.  <br /></td></tr>
<tr class="separator:a1f9c7fb1a77cbbd2a1e0e55a434ef7ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a286bd4e8384ba50b8a064d17ba211e12" id="r_a286bd4e8384ba50b8a064d17ba211e12"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a286bd4e8384ba50b8a064d17ba211e12">email_get_fullpath</a> (struct <a class="el" href="structEmail.html">Email</a> *e, char *buf, size_t buflen)</td></tr>
<tr class="memdesc:a286bd4e8384ba50b8a064d17ba211e12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the full path of an email.  <br /></td></tr>
<tr class="separator:a286bd4e8384ba50b8a064d17ba211e12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8da43128384281992caf90397da2452b" id="r_a8da43128384281992caf90397da2452b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8da43128384281992caf90397da2452b">query_window_reset</a> (void)</td></tr>
<tr class="memdesc:a8da43128384281992caf90397da2452b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore vfolder's search window to its original position.  <br /></td></tr>
<tr class="separator:a8da43128384281992caf90397da2452b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c1e6b40d6cc7a396ef95d90e4364337" id="r_a3c1e6b40d6cc7a396ef95d90e4364337"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c1e6b40d6cc7a396ef95d90e4364337">windowed_query_from_query</a> (const char *query, char *buf, size_t buflen)</td></tr>
<tr class="memdesc:a3c1e6b40d6cc7a396ef95d90e4364337"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transforms a vfolder search query into a windowed one.  <br /></td></tr>
<tr class="separator:a3c1e6b40d6cc7a396ef95d90e4364337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03dd129a289f7f6abe0451cef4ee5ee1" id="r_a03dd129a289f7f6abe0451cef4ee5ee1"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a03dd129a289f7f6abe0451cef4ee5ee1">get_query_string</a> (struct <a class="el" href="structNmMboxData.html">NmMboxData</a> *mdata, bool window)</td></tr>
<tr class="memdesc:a03dd129a289f7f6abe0451cef4ee5ee1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds the notmuch vfolder search string.  <br /></td></tr>
<tr class="separator:a03dd129a289f7f6abe0451cef4ee5ee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a686a65345db081f8d66accfc760e909b" id="r_a686a65345db081f8d66accfc760e909b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a686a65345db081f8d66accfc760e909b">get_limit</a> (struct <a class="el" href="structNmMboxData.html">NmMboxData</a> *mdata)</td></tr>
<tr class="memdesc:a686a65345db081f8d66accfc760e909b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the database limit.  <br /></td></tr>
<tr class="separator:a686a65345db081f8d66accfc760e909b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a284a1155894b4ed4351ad49ebe5dcd9c" id="r_a284a1155894b4ed4351ad49ebe5dcd9c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a284a1155894b4ed4351ad49ebe5dcd9c">apply_exclude_tags</a> (notmuch_query_t *query)</td></tr>
<tr class="memdesc:a284a1155894b4ed4351ad49ebe5dcd9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exclude the configured tags.  <br /></td></tr>
<tr class="separator:a284a1155894b4ed4351ad49ebe5dcd9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5c63cadd458794511139952c08abf77" id="r_aa5c63cadd458794511139952c08abf77"><td class="memItemLeft" align="right" valign="top">static notmuch_query_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa5c63cadd458794511139952c08abf77">get_query</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, bool writable)</td></tr>
<tr class="memdesc:aa5c63cadd458794511139952c08abf77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new query.  <br /></td></tr>
<tr class="separator:aa5c63cadd458794511139952c08abf77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad709dd1e383f13bf730e1b0791b6fdac" id="r_ad709dd1e383f13bf730e1b0791b6fdac"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad709dd1e383f13bf730e1b0791b6fdac">update_email_tags</a> (struct <a class="el" href="structEmail.html">Email</a> *e, notmuch_message_t *msg)</td></tr>
<tr class="memdesc:ad709dd1e383f13bf730e1b0791b6fdac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a>'s tags from Notmuch.  <br /></td></tr>
<tr class="separator:ad709dd1e383f13bf730e1b0791b6fdac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa667101acb4fa8caff3610d35875da18" id="r_aa667101acb4fa8caff3610d35875da18"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa667101acb4fa8caff3610d35875da18">update_message_path</a> (struct <a class="el" href="structEmail.html">Email</a> *e, const char *path)</td></tr>
<tr class="memdesc:aa667101acb4fa8caff3610d35875da18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the path for a message.  <br /></td></tr>
<tr class="separator:aa667101acb4fa8caff3610d35875da18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf60a7d578968ef9a84a0e9dc1f7999a" id="r_abf60a7d578968ef9a84a0e9dc1f7999a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abf60a7d578968ef9a84a0e9dc1f7999a">get_folder_from_path</a> (const char *path)</td></tr>
<tr class="memdesc:abf60a7d578968ef9a84a0e9dc1f7999a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find an email's folder from its path.  <br /></td></tr>
<tr class="separator:abf60a7d578968ef9a84a0e9dc1f7999a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac447f33fb05b39c0d8efe128872ead37" id="r_ac447f33fb05b39c0d8efe128872ead37"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac447f33fb05b39c0d8efe128872ead37">nm2mutt_message_id</a> (const char *id)</td></tr>
<tr class="memdesc:ac447f33fb05b39c0d8efe128872ead37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts notmuch message Id to neomutt message Id.  <br /></td></tr>
<tr class="separator:ac447f33fb05b39c0d8efe128872ead37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61864e0bbe54304156a22768894a95e3" id="r_a61864e0bbe54304156a22768894a95e3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a61864e0bbe54304156a22768894a95e3">init_email</a> (struct <a class="el" href="structEmail.html">Email</a> *e, const char *path, notmuch_message_t *msg)</td></tr>
<tr class="memdesc:a61864e0bbe54304156a22768894a95e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up an email's Notmuch data.  <br /></td></tr>
<tr class="separator:a61864e0bbe54304156a22768894a95e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb073f4dc73187e300d73278fd74b918" id="r_abb073f4dc73187e300d73278fd74b918"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb073f4dc73187e300d73278fd74b918">get_message_last_filename</a> (notmuch_message_t *msg)</td></tr>
<tr class="memdesc:abb073f4dc73187e300d73278fd74b918"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a message's last filename.  <br /></td></tr>
<tr class="separator:abb073f4dc73187e300d73278fd74b918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae623124dfaf26d5005567bda66b288ff" id="r_ae623124dfaf26d5005567bda66b288ff"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae623124dfaf26d5005567bda66b288ff">progress_setup</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ae623124dfaf26d5005567bda66b288ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the Progress Bar.  <br /></td></tr>
<tr class="separator:ae623124dfaf26d5005567bda66b288ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4d63e598d37c1d204fcc56bdb0e2bae" id="r_af4d63e598d37c1d204fcc56bdb0e2bae"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af4d63e598d37c1d204fcc56bdb0e2bae">nm_progress_update</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:af4d63e598d37c1d204fcc56bdb0e2bae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the progress counter.  <br /></td></tr>
<tr class="separator:af4d63e598d37c1d204fcc56bdb0e2bae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8ae1c5e8502f9a61c6bc3f3f51ddc35" id="r_af8ae1c5e8502f9a61c6bc3f3f51ddc35"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structEmail.html">Email</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af8ae1c5e8502f9a61c6bc3f3f51ddc35">get_mutt_email</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, notmuch_message_t *msg)</td></tr>
<tr class="memdesc:af8ae1c5e8502f9a61c6bc3f3f51ddc35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> of a Notmuch message.  <br /></td></tr>
<tr class="separator:af8ae1c5e8502f9a61c6bc3f3f51ddc35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6f3a25ff7aa400b362b784d0c302750" id="r_ad6f3a25ff7aa400b362b784d0c302750"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6f3a25ff7aa400b362b784d0c302750">append_message</a> (struct <a class="el" href="structHeaderCache.html">HeaderCache</a> *hc, struct <a class="el" href="structMailbox.html">Mailbox</a> *m, notmuch_message_t *msg, bool dedup)</td></tr>
<tr class="memdesc:ad6f3a25ff7aa400b362b784d0c302750"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate a message.  <br /></td></tr>
<tr class="separator:ad6f3a25ff7aa400b362b784d0c302750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbaff67a7811e3ced0df0b62f3aebf8d" id="r_abbaff67a7811e3ced0df0b62f3aebf8d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abbaff67a7811e3ced0df0b62f3aebf8d">append_replies</a> (struct <a class="el" href="structHeaderCache.html">HeaderCache</a> *hc, struct <a class="el" href="structMailbox.html">Mailbox</a> *m, notmuch_query_t *q, notmuch_message_t *top, bool dedup)</td></tr>
<tr class="memdesc:abbaff67a7811e3ced0df0b62f3aebf8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add all the replies to a given messages into the display.  <br /></td></tr>
<tr class="separator:abbaff67a7811e3ced0df0b62f3aebf8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8baa89ed93ca9ac6c16520fb488d8f87" id="r_a8baa89ed93ca9ac6c16520fb488d8f87"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8baa89ed93ca9ac6c16520fb488d8f87">append_thread</a> (struct <a class="el" href="structHeaderCache.html">HeaderCache</a> *hc, struct <a class="el" href="structMailbox.html">Mailbox</a> *m, notmuch_query_t *q, notmuch_thread_t *thread, bool dedup)</td></tr>
<tr class="memdesc:a8baa89ed93ca9ac6c16520fb488d8f87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add each top level reply in the thread.  <br /></td></tr>
<tr class="separator:a8baa89ed93ca9ac6c16520fb488d8f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef6aa22d4cc0a066fe9b9b428ab70f44" id="r_aef6aa22d4cc0a066fe9b9b428ab70f44"><td class="memItemLeft" align="right" valign="top">static notmuch_messages_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aef6aa22d4cc0a066fe9b9b428ab70f44">get_messages</a> (notmuch_query_t *query)</td></tr>
<tr class="memdesc:aef6aa22d4cc0a066fe9b9b428ab70f44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load messages for a query.  <br /></td></tr>
<tr class="separator:aef6aa22d4cc0a066fe9b9b428ab70f44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaf21ab5cf16eed638156c611e65e22f" id="r_abaf21ab5cf16eed638156c611e65e22f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abaf21ab5cf16eed638156c611e65e22f">read_mesgs_query</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, notmuch_query_t *q, bool dedup)</td></tr>
<tr class="memdesc:abaf21ab5cf16eed638156c611e65e22f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search for matching messages.  <br /></td></tr>
<tr class="separator:abaf21ab5cf16eed638156c611e65e22f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0256045c9befd9a5bf7ec50373f7b431" id="r_a0256045c9befd9a5bf7ec50373f7b431"><td class="memItemLeft" align="right" valign="top">static notmuch_threads_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0256045c9befd9a5bf7ec50373f7b431">get_threads</a> (notmuch_query_t *query)</td></tr>
<tr class="memdesc:a0256045c9befd9a5bf7ec50373f7b431"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load threads for a query.  <br /></td></tr>
<tr class="separator:a0256045c9befd9a5bf7ec50373f7b431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73570c4d26bc98c4862a64d96859d09f" id="r_a73570c4d26bc98c4862a64d96859d09f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a73570c4d26bc98c4862a64d96859d09f">read_threads_query</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, notmuch_query_t *q, bool dedup, int limit)</td></tr>
<tr class="memdesc:a73570c4d26bc98c4862a64d96859d09f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a query with threads.  <br /></td></tr>
<tr class="separator:a73570c4d26bc98c4862a64d96859d09f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ea2e0203ec9a6bf6c9d346d7178c9da" id="r_a5ea2e0203ec9a6bf6c9d346d7178c9da"><td class="memItemLeft" align="right" valign="top">static notmuch_message_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5ea2e0203ec9a6bf6c9d346d7178c9da">get_nm_message</a> (notmuch_database_t *db, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a5ea2e0203ec9a6bf6c9d346d7178c9da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a Notmuch message.  <br /></td></tr>
<tr class="separator:a5ea2e0203ec9a6bf6c9d346d7178c9da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacdf02765d6b92f25b17fb389440566a" id="r_aacdf02765d6b92f25b17fb389440566a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aacdf02765d6b92f25b17fb389440566a">nm_message_has_tag</a> (notmuch_message_t *msg, const char *tag)</td></tr>
<tr class="memdesc:aacdf02765d6b92f25b17fb389440566a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does a message have this tag?  <br /></td></tr>
<tr class="separator:aacdf02765d6b92f25b17fb389440566a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d9e6d209beb0f018e50e865a7b53c44" id="r_a5d9e6d209beb0f018e50e865a7b53c44"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5d9e6d209beb0f018e50e865a7b53c44">sync_email_path_with_nm</a> (struct <a class="el" href="structEmail.html">Email</a> *e, notmuch_message_t *msg)</td></tr>
<tr class="memdesc:a5d9e6d209beb0f018e50e865a7b53c44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications.">NeoMutt</a>'s <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> path with notmuch.  <br /></td></tr>
<tr class="separator:a5d9e6d209beb0f018e50e865a7b53c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab368ac6da1bfee09880e51942edb79ab" id="r_ab368ac6da1bfee09880e51942edb79ab"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab368ac6da1bfee09880e51942edb79ab">update_tags</a> (notmuch_message_t *msg, const char *tag_str)</td></tr>
<tr class="memdesc:ab368ac6da1bfee09880e51942edb79ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the tags on a message.  <br /></td></tr>
<tr class="separator:ab368ac6da1bfee09880e51942edb79ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8f62a6c7fc1fcdab25470d50e6b9d49" id="r_ad8f62a6c7fc1fcdab25470d50e6b9d49"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad8f62a6c7fc1fcdab25470d50e6b9d49">update_email_flags</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, const char *tag_str)</td></tr>
<tr class="memdesc:ad8f62a6c7fc1fcdab25470d50e6b9d49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a>'s flags.  <br /></td></tr>
<tr class="separator:ad8f62a6c7fc1fcdab25470d50e6b9d49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57496754297d15a9c6cb92cc4562b895" id="r_a57496754297d15a9c6cb92cc4562b895"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a57496754297d15a9c6cb92cc4562b895">rename_maildir_filename</a> (const char *old, char *buf, size_t buflen, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a57496754297d15a9c6cb92cc4562b895"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rename a Maildir file.  <br /></td></tr>
<tr class="separator:a57496754297d15a9c6cb92cc4562b895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc3bd6b21e3f137f3bb6a9b90b39be38" id="r_adc3bd6b21e3f137f3bb6a9b90b39be38"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adc3bd6b21e3f137f3bb6a9b90b39be38">remove_filename</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *path)</td></tr>
<tr class="memdesc:adc3bd6b21e3f137f3bb6a9b90b39be38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a file.  <br /></td></tr>
<tr class="separator:adc3bd6b21e3f137f3bb6a9b90b39be38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9007300d0a2336c11035d0d34f9458aa" id="r_a9007300d0a2336c11035d0d34f9458aa"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9007300d0a2336c11035d0d34f9458aa">rename_filename</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *old_file, const char *new_file, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a9007300d0a2336c11035d0d34f9458aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rename the file.  <br /></td></tr>
<tr class="separator:a9007300d0a2336c11035d0d34f9458aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4407eb83838cab3b1d14b9d22de269fc" id="r_a4407eb83838cab3b1d14b9d22de269fc"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4407eb83838cab3b1d14b9d22de269fc">count_query</a> (notmuch_database_t *db, const char *qstr, int limit)</td></tr>
<tr class="memdesc:a4407eb83838cab3b1d14b9d22de269fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count the results of a query.  <br /></td></tr>
<tr class="separator:a4407eb83838cab3b1d14b9d22de269fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4b565dda9a762faf390ee6a5a7022e7" id="r_ad4b565dda9a762faf390ee6a5a7022e7"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4b565dda9a762faf390ee6a5a7022e7">nm_email_get_folder</a> (struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:ad4b565dda9a762faf390ee6a5a7022e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the folder for a <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a>.  <br /></td></tr>
<tr class="separator:ad4b565dda9a762faf390ee6a5a7022e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72acf31f947469459b612276f8619ab3" id="r_a72acf31f947469459b612276f8619ab3"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72acf31f947469459b612276f8619ab3">nm_email_get_folder_rel_db</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a72acf31f947469459b612276f8619ab3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the folder for a <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> from the same level as the notmuch database.  <br /></td></tr>
<tr class="separator:a72acf31f947469459b612276f8619ab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ac57cce7f11e7ce9b485d9fce4c2975" id="r_a8ac57cce7f11e7ce9b485d9fce4c2975"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ac57cce7f11e7ce9b485d9fce4c2975">nm_read_entire_thread</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a8ac57cce7f11e7ce9b485d9fce4c2975"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the entire thread of an email.  <br /></td></tr>
<tr class="separator:a8ac57cce7f11e7ce9b485d9fce4c2975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe4e03790339e376de7c1cd92eb1bdef" id="r_abe4e03790339e376de7c1cd92eb1bdef"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe4e03790339e376de7c1cd92eb1bdef">nm_url_from_query</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, char *buf, size_t buflen)</td></tr>
<tr class="memdesc:abe4e03790339e376de7c1cd92eb1bdef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn a query into a URL.  <br /></td></tr>
<tr class="separator:abe4e03790339e376de7c1cd92eb1bdef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae60593aef46b9214e075f66103c956c" id="r_aae60593aef46b9214e075f66103c956c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae60593aef46b9214e075f66103c956c">nm_query_window_available</a> (void)</td></tr>
<tr class="memdesc:aae60593aef46b9214e075f66103c956c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Are windowed queries enabled for use?  <br /></td></tr>
<tr class="separator:aae60593aef46b9214e075f66103c956c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea5430205d9c6c6cb5b5a71ff740fddb" id="r_aea5430205d9c6c6cb5b5a71ff740fddb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aea5430205d9c6c6cb5b5a71ff740fddb">nm_query_window_forward</a> (void)</td></tr>
<tr class="memdesc:aea5430205d9c6c6cb5b5a71ff740fddb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to move the current search window forward in time.  <br /></td></tr>
<tr class="separator:aea5430205d9c6c6cb5b5a71ff740fddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a972d1267792a1d646ecf3bf49d38ce00" id="r_a972d1267792a1d646ecf3bf49d38ce00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a972d1267792a1d646ecf3bf49d38ce00">nm_query_window_backward</a> (void)</td></tr>
<tr class="memdesc:a972d1267792a1d646ecf3bf49d38ce00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to move the current search window backward in time.  <br /></td></tr>
<tr class="separator:a972d1267792a1d646ecf3bf49d38ce00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a319609376f1dcd48dd3c75e7f75cf6" id="r_a1a319609376f1dcd48dd3c75e7f75cf6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a319609376f1dcd48dd3c75e7f75cf6">nm_query_window_reset</a> (void)</td></tr>
<tr class="memdesc:a1a319609376f1dcd48dd3c75e7f75cf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the vfolder window position to the present.  <br /></td></tr>
<tr class="separator:a1a319609376f1dcd48dd3c75e7f75cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad84349cdd5669f38ce04692c048dcfc8" id="r_ad84349cdd5669f38ce04692c048dcfc8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad84349cdd5669f38ce04692c048dcfc8">nm_message_is_still_queried</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:ad84349cdd5669f38ce04692c048dcfc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is a message still visible in the query?  <br /></td></tr>
<tr class="separator:ad84349cdd5669f38ce04692c048dcfc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a117bd16ebdde574564b14e737dc1349e" id="r_a117bd16ebdde574564b14e737dc1349e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a117bd16ebdde574564b14e737dc1349e">nm_update_filename</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *old_file, const char *new_file, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a117bd16ebdde574564b14e737dc1349e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the filename.  <br /></td></tr>
<tr class="separator:a117bd16ebdde574564b14e737dc1349e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf0ba56fedbc28eeaa260e75dae131b3a" id="r_gaf0ba56fedbc28eeaa260e75dae131b3a"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check__stats.html#gaf0ba56fedbc28eeaa260e75dae131b3a">nm_mbox_check_stats</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, uint8_t flags)</td></tr>
<tr class="memdesc:gaf0ba56fedbc28eeaa260e75dae131b3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#abfbc84e79f106de70ebed8e4dbccd1f6">MxOps::mbox_check_stats()</a> -.  <br /></td></tr>
<tr class="separator:gaf0ba56fedbc28eeaa260e75dae131b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7557b4c8c21bc1fe7da1730b0af70836" id="r_a7557b4c8c21bc1fe7da1730b0af70836"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structMailbox.html">Mailbox</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7557b4c8c21bc1fe7da1730b0af70836">get_default_mailbox</a> (void)</td></tr>
<tr class="memdesc:a7557b4c8c21bc1fe7da1730b0af70836"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> for notmuch without any parameters.  <br /></td></tr>
<tr class="separator:a7557b4c8c21bc1fe7da1730b0af70836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76a97a39757a2e0441d23eab1ba5a221" id="r_a76a97a39757a2e0441d23eab1ba5a221"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a76a97a39757a2e0441d23eab1ba5a221">nm_record_message</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, char *path, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a76a97a39757a2e0441d23eab1ba5a221"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a message to the Notmuch database.  <br /></td></tr>
<tr class="separator:a76a97a39757a2e0441d23eab1ba5a221"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a424ba19f36b097c879ff65793c8ef1d9" id="r_a424ba19f36b097c879ff65793c8ef1d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a424ba19f36b097c879ff65793c8ef1d9">nm_get_all_tags</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char **tag_list, int *tag_count)</td></tr>
<tr class="memdesc:a424ba19f36b097c879ff65793c8ef1d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill a list with all notmuch tags.  <br /></td></tr>
<tr class="separator:a424ba19f36b097c879ff65793c8ef1d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3fe12af353c56758b08fe105737fc72" id="r_gaf3fe12af353c56758b08fe105737fc72"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__ac__owns__path.html#gaf3fe12af353c56758b08fe105737fc72">nm_ac_owns_path</a> (struct <a class="el" href="structAccount.html">Account</a> *a, const char *path)</td></tr>
<tr class="memdesc:gaf3fe12af353c56758b08fe105737fc72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether an <a class="el" href="structAccount.html" title="A group of associated Mailboxes.">Account</a> owns a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#a8036f191d1b0ace220c5a5ff52f609b4">MxOps::ac_owns_path()</a> -.  <br /></td></tr>
<tr class="separator:gaf3fe12af353c56758b08fe105737fc72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa3f6916994e009888cbd2616eb02efc9" id="r_gaa3f6916994e009888cbd2616eb02efc9"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__ac__add.html#gaa3f6916994e009888cbd2616eb02efc9">nm_ac_add</a> (struct <a class="el" href="structAccount.html">Account</a> *a, struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gaa3f6916994e009888cbd2616eb02efc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> to an <a class="el" href="structAccount.html" title="A group of associated Mailboxes.">Account</a> - Implements <a class="el" href="structMxOps.html#ac432a4900b0ca5a5ca2dc98319dbf737">MxOps::ac_add()</a> -.  <br /></td></tr>
<tr class="separator:gaa3f6916994e009888cbd2616eb02efc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad12c3265a631efb7b39b28fae19121c" id="r_gaad12c3265a631efb7b39b28fae19121c"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#a95aa6f9d458f82609e795a7f449f4cad">MxOpenReturns</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__open.html#gaad12c3265a631efb7b39b28fae19121c">nm_mbox_open</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gaad12c3265a631efb7b39b28fae19121c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ac504b1095f3ce15cae85466ab6c7bd45">MxOps::mbox_open()</a> -.  <br /></td></tr>
<tr class="separator:gaad12c3265a631efb7b39b28fae19121c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd9ac1fea250b07e3ea64493021aaa06" id="r_gafd9ac1fea250b07e3ea64493021aaa06"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#gafd9ac1fea250b07e3ea64493021aaa06">nm_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gafd9ac1fea250b07e3ea64493021aaa06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -.  <br /></td></tr>
<tr class="separator:gafd9ac1fea250b07e3ea64493021aaa06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf34af0a876b8063034f021754bf66886" id="r_gaf34af0a876b8063034f021754bf66886"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__sync.html#gaf34af0a876b8063034f021754bf66886">nm_mbox_sync</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gaf34af0a876b8063034f021754bf66886"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save changes to the <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> - Implements <a class="el" href="structMxOps.html#aebbfeec5651637ec053cc47b95c124af">MxOps::mbox_sync()</a> -.  <br /></td></tr>
<tr class="separator:gaf34af0a876b8063034f021754bf66886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd457684e3ed3e4af41087f806a30520" id="r_gabd457684e3ed3e4af41087f806a30520"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__close.html#gabd457684e3ed3e4af41087f806a30520">nm_mbox_close</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gabd457684e3ed3e4af41087f806a30520"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ae97b81d5371def5f6f2e64544cdec5fc">MxOps::mbox_close()</a> -.  <br /></td></tr>
<tr class="separator:gabd457684e3ed3e4af41087f806a30520"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga88dde7e6780b188d62b5cecd395fc4c4" id="r_ga88dde7e6780b188d62b5cecd395fc4c4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__msg__open.html#ga88dde7e6780b188d62b5cecd395fc4c4">nm_msg_open</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:ga88dde7e6780b188d62b5cecd395fc4c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an email message in a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> - Implements <a class="el" href="structMxOps.html#a1eaafb57e50a69b5d091f03cbd2521cc">MxOps::msg_open()</a> -.  <br /></td></tr>
<tr class="separator:ga88dde7e6780b188d62b5cecd395fc4c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga687f114afaf0d0f46f15fefb042388f8" id="r_ga687f114afaf0d0f46f15fefb042388f8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__msg__commit.html#ga687f114afaf0d0f46f15fefb042388f8">nm_msg_commit</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg)</td></tr>
<tr class="memdesc:ga687f114afaf0d0f46f15fefb042388f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save changes to an email - Implements <a class="el" href="structMxOps.html#ab59dadf81aec5575a1c690caa4822e37">MxOps::msg_commit()</a> -.  <br /></td></tr>
<tr class="separator:ga687f114afaf0d0f46f15fefb042388f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac8114a1b39313cf9d098b94aefcef468" id="r_gac8114a1b39313cf9d098b94aefcef468"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__msg__close.html#gac8114a1b39313cf9d098b94aefcef468">nm_msg_close</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structMessage.html">Message</a> *msg)</td></tr>
<tr class="memdesc:gac8114a1b39313cf9d098b94aefcef468"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close an email - Implements <a class="el" href="structMxOps.html#ad53e3df1ff124eea52bc0488915e9ae4">MxOps::msg_close()</a> -.  <br /></td></tr>
<tr class="separator:gac8114a1b39313cf9d098b94aefcef468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac44e390c7bf1a1f9fce4986e2840bead" id="r_gac44e390c7bf1a1f9fce4986e2840bead"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__tags__edit.html#gac44e390c7bf1a1f9fce4986e2840bead">nm_tags_edit</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *tags, struct <a class="el" href="structBuffer.html">Buffer</a> *buf)</td></tr>
<tr class="memdesc:gac44e390c7bf1a1f9fce4986e2840bead"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt and validate new messages tags - Implements <a class="el" href="structMxOps.html#a9b14a8b820a431e67082863331938d81">MxOps::tags_edit()</a> -.  <br /></td></tr>
<tr class="separator:gac44e390c7bf1a1f9fce4986e2840bead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0f4fdd35b61c036a56539d9fbfa07e7" id="r_gac0f4fdd35b61c036a56539d9fbfa07e7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__tags__commit.html#gac0f4fdd35b61c036a56539d9fbfa07e7">nm_tags_commit</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e, const char *buf)</td></tr>
<tr class="memdesc:gac0f4fdd35b61c036a56539d9fbfa07e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the tags to a message - Implements <a class="el" href="structMxOps.html#a2c86bd6a85aefbb16701be00593013fb">MxOps::tags_commit()</a> -.  <br /></td></tr>
<tr class="separator:gac0f4fdd35b61c036a56539d9fbfa07e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7557498adc7575505d1d53c70b64194" id="r_gad7557498adc7575505d1d53c70b64194"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921d">MailboxType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__path__probe.html#gad7557498adc7575505d1d53c70b64194">nm_path_probe</a> (const char *path, const struct stat *st)</td></tr>
<tr class="memdesc:gad7557498adc7575505d1d53c70b64194"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this a Notmuch <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a>?  <br /></td></tr>
<tr class="separator:gad7557498adc7575505d1d53c70b64194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga423b1e01cacd7df329cd81741ada97a8" id="r_ga423b1e01cacd7df329cd81741ada97a8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__path__canon.html#ga423b1e01cacd7df329cd81741ada97a8">nm_path_canon</a> (struct <a class="el" href="structBuffer.html">Buffer</a> *path)</td></tr>
<tr class="memdesc:ga423b1e01cacd7df329cd81741ada97a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Canonicalise a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> path - Implements <a class="el" href="structMxOps.html#ae8d7490a00b551c9430cd45db3cd517a">MxOps::path_canon()</a> -.  <br /></td></tr>
<tr class="separator:ga423b1e01cacd7df329cd81741ada97a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a76c06f932aaddfae70f3c651c6974f71" id="r_a76c06f932aaddfae70f3c651c6974f71"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="structCommand.html">Command</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a76c06f932aaddfae70f3c651c6974f71">NmCommands</a> []</td></tr>
<tr class="memdesc:a76c06f932aaddfae70f3c651c6974f71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notmuch Commands.  <br /></td></tr>
<tr class="separator:a76c06f932aaddfae70f3c651c6974f71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3142ba8f1a45d56da0e74227b5ccdb4" id="r_af3142ba8f1a45d56da0e74227b5ccdb4"><td class="memItemLeft" align="right" valign="top">const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af3142ba8f1a45d56da0e74227b5ccdb4">NmUrlProtocol</a> [] = &quot;notmuch://&quot;</td></tr>
<tr class="memdesc:af3142ba8f1a45d56da0e74227b5ccdb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Protocol string for Notmuch URLs.  <br /></td></tr>
<tr class="separator:af3142ba8f1a45d56da0e74227b5ccdb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ff34e2c5dba7a81ce5b877213be040f" id="r_a8ff34e2c5dba7a81ce5b877213be040f"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ff34e2c5dba7a81ce5b877213be040f">NmUrlProtocolLen</a> = sizeof(<a class="el" href="#af3142ba8f1a45d56da0e74227b5ccdb4">NmUrlProtocol</a>) - 1</td></tr>
<tr class="memdesc:a8ff34e2c5dba7a81ce5b877213be040f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of <a class="el" href="#af3142ba8f1a45d56da0e74227b5ccdb4" title="Protocol string for Notmuch URLs.">NmUrlProtocol</a> string.  <br /></td></tr>
<tr class="separator:a8ff34e2c5dba7a81ce5b877213be040f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62b13e448033a089b1de7f11d13836d5" id="r_ga62b13e448033a089b1de7f11d13836d5"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="structMxOps.html">MxOps</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__api.html#ga62b13e448033a089b1de7f11d13836d5">MxNotmuchOps</a></td></tr>
<tr class="memdesc:ga62b13e448033a089b1de7f11d13836d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notmuch <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> - Implements <a class="el" href="structMxOps.html">MxOps</a> -.  <br /></td></tr>
<tr class="separator:ga62b13e448033a089b1de7f11d13836d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Notmuch virtual mailbox type. </p>
<dl class="section author"><dt>Authors</dt><dd><ul>
<li>Karel Zak</li>
<li>Kevin Velghe</li>
<li>Richard Russon</li>
<li>Bernard Pratz</li>
<li>Bryan Bennett</li>
<li>Julian Andres Klode</li>
<li>William Pettersson</li>
<li>Austin Ray</li>
<li>Pietro Cerutti</li>
<li>Federico Kircheis</li>
<li>Ian Zimmerman</li>
<li>Reto Brunner</li>
<li>Dennis Schn</li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</dd></dl>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p class="definition">Definition in file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac14b20cce8965804b7da03772f8d6f0b" name="ac14b20cce8965804b7da03772f8d6f0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac14b20cce8965804b7da03772f8d6f0b">&#9670;&#160;</a></span>nm_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup feature commands. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00109">109</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  110</span>{</div>
<div class="line"><span class="lineno">  111</span>  <a class="code hl_function" href="core_2command_8c.html#a1763d41d44392438fea7833979888888">commands_register</a>(&amp;<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#a3024ae27b85ddf7c9c3ff11299d01b05">commands</a>, <a class="code hl_variable" href="#a76c06f932aaddfae70f3c651c6974f71">NmCommands</a>);</div>
<div class="line"><span class="lineno">  112</span>}</div>
<div class="ttc" id="acore_2command_8c_html_a1763d41d44392438fea7833979888888"><div class="ttname"><a href="core_2command_8c.html#a1763d41d44392438fea7833979888888">commands_register</a></div><div class="ttdeci">bool commands_register(struct CommandArray *ca, const struct Command *cmds)</div><div class="ttdoc">Add commands to Commands array.</div><div class="ttdef"><b>Definition</b> <a href="core_2command_8c_source.html#l00051">command.c:51</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a76c06f932aaddfae70f3c651c6974f71"><div class="ttname"><a href="#a76c06f932aaddfae70f3c651c6974f71">NmCommands</a></div><div class="ttdeci">static const struct Command NmCommands[]</div><div class="ttdoc">Notmuch Commands.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00093">notmuch.c:93</a></div></div>
<div class="ttc" id="astructNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00041">neomutt.h:42</a></div></div>
<div class="ttc" id="astructNeoMutt_html_a3024ae27b85ddf7c9c3ff11299d01b05"><div class="ttname"><a href="structNeoMutt.html#a3024ae27b85ddf7c9c3ff11299d01b05">NeoMutt::commands</a></div><div class="ttdeci">struct CommandArray commands</div><div class="ttdoc">NeoMutt commands.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00050">neomutt.h:50</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ac14b20cce8965804b7da03772f8d6f0b_cgraph.svg" width="268" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ac14b20cce8965804b7da03772f8d6f0b_icgraph.svg" width="176" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a99bcf8d4cf20029c6285d28d681efe00" name="a99bcf8d4cf20029c6285d28d681efe00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99bcf8d4cf20029c6285d28d681efe00">&#9670;&#160;</a></span>nm_hcache_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structHeaderCache.html">HeaderCache</a> * nm_hcache_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Open a header cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Header cache handle </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00119">119</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  120</span>{</div>
<div class="line"><span class="lineno">  121</span><span class="preprocessor">#ifdef USE_HCACHE</span></div>
<div class="line"><span class="lineno">  122</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_header_cache = <a class="code hl_function" href="config_2helpers_8c.html#a9f184e61342916799259930333f4205f">cs_subset_path</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;header_cache&quot;</span>);</div>
<div class="line"><span class="lineno">  123</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="hcache_2hcache_8c.html#a5691b8a075665d48c570eb105a472556">hcache_open</a>(c_header_cache, <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(m), NULL, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  124</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  125</span>  <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  126</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  127</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_a9f184e61342916799259930333f4205f"><div class="ttname"><a href="config_2helpers_8c.html#a9f184e61342916799259930333f4205f">cs_subset_path</a></div><div class="ttdeci">const char * cs_subset_path(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a path config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00168">helpers.c:168</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_a7e9739eb3e94344633f7051c2fb9453e"><div class="ttname"><a href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&#39;s path string.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00214">mailbox.h:214</a></div></div>
<div class="ttc" id="ahcache_2hcache_8c_html_a5691b8a075665d48c570eb105a472556"><div class="ttname"><a href="hcache_2hcache_8c.html#a5691b8a075665d48c570eb105a472556">hcache_open</a></div><div class="ttdeci">struct HeaderCache * hcache_open(const char *path, const char *folder, hcache_namer_t namer, bool create)</div><div class="ttdoc">Multiplexor for StoreOps::open.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2hcache_8c_source.html#l00473">hcache.c:473</a></div></div>
<div class="ttc" id="astructNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00046">neomutt.h:46</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a99bcf8d4cf20029c6285d28d681efe00_cgraph.svg" width="302" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a99bcf8d4cf20029c6285d28d681efe00_icgraph.svg" width="332" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aea09d673b9d50ceb497435f800bb4075" name="aea09d673b9d50ceb497435f800bb4075"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea09d673b9d50ceb497435f800bb4075">&#9670;&#160;</a></span>nm_hcache_close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nm_hcache_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structHeaderCache.html">HeaderCache</a> **</td>          <td class="paramname"><span class="paramname"><em>ptr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Close the header cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>Header cache handle </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00133">133</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  134</span>{</div>
<div class="line"><span class="lineno">  135</span><span class="preprocessor">#ifdef USE_HCACHE</span></div>
<div class="line"><span class="lineno">  136</span>  <a class="code hl_function" href="hcache_2hcache_8c.html#a791c8437997aca5d8747271ff4c75e98">hcache_close</a>(ptr);</div>
<div class="line"><span class="lineno">  137</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  138</span>}</div>
<div class="ttc" id="ahcache_2hcache_8c_html_a791c8437997aca5d8747271ff4c75e98"><div class="ttname"><a href="hcache_2hcache_8c.html#a791c8437997aca5d8747271ff4c75e98">hcache_close</a></div><div class="ttdeci">void hcache_close(struct HeaderCache **ptr)</div><div class="ttdoc">Multiplexor for StoreOps::close.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2hcache_8c_source.html#l00544">hcache.c:544</a></div></div>
</div><!-- fragment --><div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aea09d673b9d50ceb497435f800bb4075_cgraph.svg" width="288" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aea09d673b9d50ceb497435f800bb4075_icgraph.svg" width="332" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0ee14876a4916eff9cbdd7678abce919" name="a0ee14876a4916eff9cbdd7678abce919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ee14876a4916eff9cbdd7678abce919">&#9670;&#160;</a></span>nm_get_default_url()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * nm_get_default_url </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> with default Notmuch settings. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> with default Notmuch settings </td></tr>
    <tr><td class="paramname">NULL</td><td>Error, it's impossible to create an <a class="el" href="structNmMboxData.html" title="Notmuch-specific Mailbox data -.">NmMboxData</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00145">145</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  146</span>{</div>
<div class="line"><span class="lineno">  147</span>  <span class="comment">// path to DB + query + url &quot;decoration&quot;</span></div>
<div class="line"><span class="lineno">  148</span>  <span class="keywordtype">size_t</span> len = <a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a> + 1024 + 32;</div>
<div class="line"><span class="lineno">  149</span>  <span class="keywordtype">char</span> *url = <a class="code hl_define" href="memory_8h.html#af997cb3719dc7abbeabae655d0ee1b9e">MUTT_MEM_MALLOC</a>(len, <span class="keywordtype">char</span>);</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>  <span class="comment">// Try to use `$nm_default_url` or `$folder`.</span></div>
<div class="line"><span class="lineno">  152</span>  <span class="comment">// If neither are set, it is impossible to create a Notmuch URL.</span></div>
<div class="line"><span class="lineno">  153</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_default_url = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_default_url&quot;</span>);</div>
<div class="line"><span class="lineno">  154</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_folder = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;folder&quot;</span>);</div>
<div class="line"><span class="lineno">  155</span>  <span class="keywordflow">if</span> (c_nm_default_url)</div>
<div class="line"><span class="lineno">  156</span>  {</div>
<div class="line"><span class="lineno">  157</span>    snprintf(url, len, <span class="stringliteral">&quot;%s&quot;</span>, c_nm_default_url);</div>
<div class="line"><span class="lineno">  158</span>  }</div>
<div class="line"><span class="lineno">  159</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c_folder)</div>
<div class="line"><span class="lineno">  160</span>  {</div>
<div class="line"><span class="lineno">  161</span>    snprintf(url, len, <span class="stringliteral">&quot;notmuch://%s&quot;</span>, c_folder);</div>
<div class="line"><span class="lineno">  162</span>  }</div>
<div class="line"><span class="lineno">  163</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  164</span>  {</div>
<div class="line"><span class="lineno">  165</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;url);</div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  167</span>  }</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>  <span class="keywordflow">return</span> url;</div>
<div class="line"><span class="lineno">  170</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_a6b1589ee93ff51ef31f1d9324e138078"><div class="ttname"><a href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a></div><div class="ttdeci">const char * cs_subset_string(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00291">helpers.c:291</a></div></div>
<div class="ttc" id="amemory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00062">memory.h:62</a></div></div>
<div class="ttc" id="amemory_8h_html_af997cb3719dc7abbeabae655d0ee1b9e"><div class="ttname"><a href="memory_8h.html#af997cb3719dc7abbeabae655d0ee1b9e">MUTT_MEM_MALLOC</a></div><div class="ttdeci">#define MUTT_MEM_MALLOC(n, type)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00048">memory.h:48</a></div></div>
<div class="ttc" id="amutt_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00042">mutt.h:42</a></div></div>
</div><!-- fragment --><div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a0ee14876a4916eff9cbdd7678abce919_cgraph.svg" width="323" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a0ee14876a4916eff9cbdd7678abce919_icgraph.svg" width="352" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8920fc52f45278586c66a02808a648c8" name="a8920fc52f45278586c66a02808a648c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8920fc52f45278586c66a02808a648c8">&#9670;&#160;</a></span>nm_get_default_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structNmMboxData.html">NmMboxData</a> * nm_get_default_data </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> with default Notmuch settings. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> with default Notmuch settings </td></tr>
    <tr><td class="paramname">NULL</td><td>Error, it's impossible to create an <a class="el" href="structNmMboxData.html" title="Notmuch-specific Mailbox data -.">NmMboxData</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00177">177</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  178</span>{</div>
<div class="line"><span class="lineno">  179</span>  <span class="comment">// path to DB + query + url &quot;decoration&quot;</span></div>
<div class="line"><span class="lineno">  180</span>  <span class="keywordtype">char</span> *url = <a class="code hl_function" href="#a0ee14876a4916eff9cbdd7678abce919">nm_get_default_url</a>();</div>
<div class="line"><span class="lineno">  181</span>  <span class="keywordflow">if</span> (!url)</div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *default_data = <a class="code hl_function" href="notmuch_2mdata_8c.html#a064456517ccebf77fb96e4716bf6f85e">nm_mdata_new</a>(url);</div>
<div class="line"><span class="lineno">  185</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;url);</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>  <span class="keywordflow">return</span> default_data;</div>
<div class="line"><span class="lineno">  188</span>}</div>
<div class="ttc" id="anotmuch_2mdata_8c_html_a064456517ccebf77fb96e4716bf6f85e"><div class="ttname"><a href="notmuch_2mdata_8c.html#a064456517ccebf77fb96e4716bf6f85e">nm_mdata_new</a></div><div class="ttdeci">struct NmMboxData * nm_mdata_new(const char *url)</div><div class="ttdoc">Create a new NmMboxData object from a query.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8c_source.html#l00068">mdata.c:68</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a0ee14876a4916eff9cbdd7678abce919"><div class="ttname"><a href="#a0ee14876a4916eff9cbdd7678abce919">nm_get_default_url</a></div><div class="ttdeci">static char * nm_get_default_url(void)</div><div class="ttdoc">Create a Mailbox with default Notmuch settings.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00145">notmuch.c:145</a></div></div>
<div class="ttc" id="astructNmMboxData_html"><div class="ttname"><a href="structNmMboxData.html">NmMboxData</a></div><div class="ttdoc">Notmuch-specific Mailbox data -.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8h_source.html#l00034">mdata.h:35</a></div></div>
</div><!-- fragment --><div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a8920fc52f45278586c66a02808a648c8_cgraph.svg" width="352" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a8920fc52f45278586c66a02808a648c8_icgraph.svg" width="354" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a49be0897f8fb6c33c74a838b83f4ed46" name="a49be0897f8fb6c33c74a838b83f4ed46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49be0897f8fb6c33c74a838b83f4ed46">&#9670;&#160;</a></span>init_mailbox()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int init_mailbox </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add Notmuch data to the <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error Bad format</td></tr>
  </table>
  </dd>
</dl>
<p>Create a new <a class="el" href="structNmMboxData.html" title="Notmuch-specific Mailbox data -.">NmMboxData</a> struct and add it Mailbox::data. Notmuch-specific data will be stored in this struct. This struct can be freed using <a class="el" href="group__mailbox__mdata__free.html#ga2b2dbfa2b1f60e776e9bc6371e08ba37" title="Free the private Mailbox data - Implements Mailbox::mdata_free() -.">nm_mdata_free()</a>. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00200">200</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  201</span>{</div>
<div class="line"><span class="lineno">  202</span>  <span class="keywordflow">if</span> (!m || (m-&gt;<a class="code hl_variable" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> != <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da05c2d20da557ac5b2c45a349eec1fba6">MUTT_NOTMUCH</a>))</div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>  <span class="keywordflow">if</span> (m-&gt;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>  m-&gt;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a064456517ccebf77fb96e4716bf6f85e">nm_mdata_new</a>(<a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(m));</div>
<div class="line"><span class="lineno">  209</span>  <span class="keywordflow">if</span> (!m-&gt;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>  m-&gt;<a class="code hl_variable" href="structMailbox.html#a015fb45ad1a08cf8e44e3553202834fb">mdata_free</a> = <a class="code hl_function" href="group__mailbox__mdata__free.html#ga2b2dbfa2b1f60e776e9bc6371e08ba37">nm_mdata_free</a>;</div>
<div class="line"><span class="lineno">  213</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  214</span>}</div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921da05c2d20da557ac5b2c45a349eec1fba6"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da05c2d20da557ac5b2c45a349eec1fba6">MUTT_NOTMUCH</a></div><div class="ttdeci">@ MUTT_NOTMUCH</div><div class="ttdoc">&#39;Notmuch&#39; (virtual) Mailbox type</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00051">mailbox.h:51</a></div></div>
<div class="ttc" id="agroup__mailbox__mdata__free_html_ga2b2dbfa2b1f60e776e9bc6371e08ba37"><div class="ttname"><a href="group__mailbox__mdata__free.html#ga2b2dbfa2b1f60e776e9bc6371e08ba37">nm_mdata_free</a></div><div class="ttdeci">void nm_mdata_free(void **ptr)</div><div class="ttdoc">Free the private Mailbox data - Implements Mailbox::mdata_free() -.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8c_source.html#l00045">mdata.c:45</a></div></div>
<div class="ttc" id="astructMailbox_html_a015fb45ad1a08cf8e44e3553202834fb"><div class="ttname"><a href="structMailbox.html#a015fb45ad1a08cf8e44e3553202834fb">Mailbox::mdata_free</a></div><div class="ttdeci">void(* mdata_free)(void **ptr)</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00143">mailbox.h:143</a></div></div>
<div class="ttc" id="astructMailbox_html_a5638329fb2ebd4bbe1f4a949ec8de174"><div class="ttname"><a href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">Mailbox::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Mailbox type.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00102">mailbox.h:102</a></div></div>
<div class="ttc" id="astructMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00132">mailbox.h:132</a></div></div>
</div><!-- fragment --><div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a49be0897f8fb6c33c74a838b83f4ed46_cgraph.svg" width="272" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a49be0897f8fb6c33c74a838b83f4ed46_icgraph.svg" width="300" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1f9c7fb1a77cbbd2a1e0e55a434ef7ac" name="a1f9c7fb1a77cbbd2a1e0e55a434ef7ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f9c7fb1a77cbbd2a1e0e55a434ef7ac">&#9670;&#160;</a></span>email_get_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * email_get_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the unique Notmuch Id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>ID string </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00222">222</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  223</span>{</div>
<div class="line"><span class="lineno">  224</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmEmailData.html">NmEmailData</a> *<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code hl_function" href="notmuch_2edata_8c.html#a6f1508526644c430c650ac2678590635">nm_edata_get</a>(e);</div>
<div class="line"><span class="lineno">  225</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>)</div>
<div class="line"><span class="lineno">  226</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;virtual_id;</div>
<div class="line"><span class="lineno">  229</span>}</div>
<div class="ttc" id="anotmuch_2edata_8c_html_a6f1508526644c430c650ac2678590635"><div class="ttname"><a href="notmuch_2edata_8c.html#a6f1508526644c430c650ac2678590635">nm_edata_get</a></div><div class="ttdeci">struct NmEmailData * nm_edata_get(struct Email *e)</div><div class="ttdoc">Get the Notmuch Email data.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2edata_8c_source.html#l00072">edata.c:72</a></div></div>
<div class="ttc" id="astructEmail_html_a50d8a8dde5fbf0b6dba934ff7e07fb6b"><div class="ttname"><a href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">Email::edata</a></div><div class="ttdeci">void * edata</div><div class="ttdoc">Driver-specific data.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00074">email.h:74</a></div></div>
<div class="ttc" id="astructNmEmailData_html"><div class="ttname"><a href="structNmEmailData.html">NmEmailData</a></div><div class="ttdoc">Notmuch-specific Email data -.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2edata_8h_source.html#l00033">edata.h:34</a></div></div>
</div><!-- fragment --><div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a1f9c7fb1a77cbbd2a1e0e55a434ef7ac_cgraph.svg" width="267" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a1f9c7fb1a77cbbd2a1e0e55a434ef7ac_icgraph.svg" width="300" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a286bd4e8384ba50b8a064d17ba211e12" name="a286bd4e8384ba50b8a064d17ba211e12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a286bd4e8384ba50b8a064d17ba211e12">&#9670;&#160;</a></span>email_get_fullpath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * email_get_fullpath </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>buflen</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the full path of an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">buf</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer.">Buffer</a> for the path </td></tr>
    <tr><td class="paramname">buflen</td><td>Length of the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Path string </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00238">238</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  239</span>{</div>
<div class="line"><span class="lineno">  240</span>  snprintf(buf, buflen, <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code hl_function" href="#ad4b565dda9a762faf390ee6a5a7022e7">nm_email_get_folder</a>(e), e-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  241</span>  <span class="keywordflow">return</span> buf;</div>
<div class="line"><span class="lineno">  242</span>}</div>
<div class="ttc" id="anotmuch_8c_html_ad4b565dda9a762faf390ee6a5a7022e7"><div class="ttname"><a href="#ad4b565dda9a762faf390ee6a5a7022e7">nm_email_get_folder</a></div><div class="ttdeci">char * nm_email_get_folder(struct Email *e)</div><div class="ttdoc">Get the folder for a Email.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l01491">notmuch.c:1491</a></div></div>
<div class="ttc" id="astructEmail_html_ac041599cfe41b49e7b8f9d752d07bb39"><div class="ttname"><a href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">Email::path</a></div><div class="ttdeci">char * path</div><div class="ttdoc">Path of Email (for local Mailboxes)</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00070">email.h:70</a></div></div>
</div><!-- fragment --><div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a286bd4e8384ba50b8a064d17ba211e12_cgraph.svg" width="344" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a286bd4e8384ba50b8a064d17ba211e12_icgraph.svg" width="536" height="198"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8da43128384281992caf90397da2452b" name="a8da43128384281992caf90397da2452b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8da43128384281992caf90397da2452b">&#9670;&#160;</a></span>query_window_reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void query_window_reset </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Restore vfolder's search window to its original position. </p>
<p>After moving a vfolder search window backward and forward, calling this function will reset the search position to its original value, setting to 0 the user settable variable: </p><pre class="fragment">nm_query_window_current_position
</pre> 
<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00253">253</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  254</span>{</div>
<div class="line"><span class="lineno">  255</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;entering\n&quot;</span>);</div>
<div class="line"><span class="lineno">  256</span>  <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_current_position&quot;</span>, 0, NULL);</div>
<div class="line"><span class="lineno">  257</span>}</div>
<div class="ttc" id="agroup__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00090">logging2.h:90</a></div></div>
<div class="ttc" id="alogging2_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3"><div class="ttname"><a href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a></div><div class="ttdeci">@ LL_DEBUG2</div><div class="ttdoc">Log at debug level 2.</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00045">logging2.h:45</a></div></div>
<div class="ttc" id="asubset_8c_html_a6ee598a96defed645b11cad6e6cb6512"><div class="ttname"><a href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a></div><div class="ttdeci">int cs_subset_str_native_set(const struct ConfigSubset *sub, const char *name, intptr_t value, struct Buffer *err)</div><div class="ttdoc">Natively set the value of a string config item.</div><div class="ttdef"><b>Definition</b> <a href="subset_8c_source.html#l00303">subset.c:303</a></div></div>
</div><!-- fragment --><div id="dynsection-17" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a8da43128384281992caf90397da2452b_cgraph.svg" width="380" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-18" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a8da43128384281992caf90397da2452b_icgraph.svg" width="372" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3c1e6b40d6cc7a396ef95d90e4364337" name="a3c1e6b40d6cc7a396ef95d90e4364337"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c1e6b40d6cc7a396ef95d90e4364337">&#9670;&#160;</a></span>windowed_query_from_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool windowed_query_from_query </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>query</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>buflen</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transforms a vfolder search query into a windowed one. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">query</td><td>vfolder search string </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>allocated string buffer to receive the modified search query </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buflen</td><td>allocated maximum size of the buf string buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Transformed search query is available as a string in buf </td></tr>
    <tr><td class="paramname">false</td><td>Search query shall not be transformed</td></tr>
  </table>
  </dd>
</dl>
<p>Creates a <code>date:</code> search term window from the following user settings:</p>
<ul>
<li><code>nm_query_window_enable</code> (only required for <code>nm_query_window_duration = 0</code>)</li>
<li><code>nm_query_window_duration</code></li>
<li><code>nm_query_window_timebase</code></li>
<li><code>nm_query_window_current_position</code></li>
</ul>
<p>The window won't be applied:</p>
<ul>
<li>If the duration of the search query is set to <code>0</code> this function will be disabled unless a user explicitly enables windowed queries.</li>
<li>If the timebase is invalid, it will show an error message and do nothing.</li>
</ul>
<p>If there's no search registered in <code>nm_query_window_current_search</code> or this is a new search, it will reset the window and do the search. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00283">283</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  284</span>{</div>
<div class="line"><span class="lineno">  285</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: %s\n&quot;</span>, query);</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_nm_query_window_enable = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_enable&quot;</span>);</div>
<div class="line"><span class="lineno">  288</span>  <span class="keyword">const</span> <span class="keywordtype">short</span> c_nm_query_window_duration = <a class="code hl_function" href="config_2helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_duration&quot;</span>);</div>
<div class="line"><span class="lineno">  289</span>  <span class="keyword">const</span> <span class="keywordtype">short</span> c_nm_query_window_current_position = <a class="code hl_function" href="config_2helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_current_position&quot;</span>);</div>
<div class="line"><span class="lineno">  290</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_query_window_current_search = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_current_search&quot;</span>);</div>
<div class="line"><span class="lineno">  291</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_query_window_timebase = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_timebase&quot;</span>);</div>
<div class="line"><span class="lineno">  292</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_query_window_or_terms = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_or_terms&quot;</span>);</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>  <span class="comment">/* if the query has changed, reset the window position */</span></div>
<div class="line"><span class="lineno">  295</span>  <span class="keywordflow">if</span> (!c_nm_query_window_current_search || !<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(query, c_nm_query_window_current_search))</div>
<div class="line"><span class="lineno">  296</span>  {</div>
<div class="line"><span class="lineno">  297</span>    <a class="code hl_function" href="#a8da43128384281992caf90397da2452b">query_window_reset</a>();</div>
<div class="line"><span class="lineno">  298</span>  }</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="query_8h.html#a5e4875af0e433ff3133f1b1f66744e42">NmWindowQueryRc</a> rc = <a class="code hl_function" href="query_8c.html#aeb616448f4b9672d04c1d8d84ba5fb96">nm_windowed_query_from_query</a>(</div>
<div class="line"><span class="lineno">  301</span>      buf, buflen, c_nm_query_window_enable, c_nm_query_window_duration,</div>
<div class="line"><span class="lineno">  302</span>      c_nm_query_window_current_position, c_nm_query_window_current_search,</div>
<div class="line"><span class="lineno">  303</span>      c_nm_query_window_timebase, c_nm_query_window_or_terms);</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>  <span class="keywordflow">switch</span> (rc)</div>
<div class="line"><span class="lineno">  306</span>  {</div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="query_8h.html#a5e4875af0e433ff3133f1b1f66744e42a12532bacd01baeddfe477795902eb1f7">NM_WINDOW_QUERY_SUCCESS</a>:</div>
<div class="line"><span class="lineno">  308</span>    {</div>
<div class="line"><span class="lineno">  309</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: %s -&gt; %s\n&quot;</span>, query, buf);</div>
<div class="line"><span class="lineno">  310</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  311</span>    }</div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="query_8h.html#a5e4875af0e433ff3133f1b1f66744e42a609e2ad56f15917e05799b36f8fa8355">NM_WINDOW_QUERY_INVALID_DURATION</a>:</div>
<div class="line"><span class="lineno">  313</span>    {</div>
<div class="line"><span class="lineno">  314</span>      <a class="code hl_function" href="#a8da43128384281992caf90397da2452b">query_window_reset</a>();</div>
<div class="line"><span class="lineno">  315</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  316</span>    }</div>
<div class="line"><span class="lineno">  317</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="query_8h.html#a5e4875af0e433ff3133f1b1f66744e42ae3a3ca1fa3d50d6d45d58e23b1e13a55">NM_WINDOW_QUERY_INVALID_TIMEBASE</a>:</div>
<div class="line"><span class="lineno">  318</span>    {</div>
<div class="line"><span class="lineno">  319</span>      <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(</div>
<div class="line"><span class="lineno">  320</span>          <span class="comment">// L10N: The values &#39;hour&#39;, &#39;day&#39;, &#39;week&#39;, &#39;month&#39;, &#39;year&#39; are literal.</span></div>
<div class="line"><span class="lineno">  321</span>          <span class="comment">//       They should not be translated.</span></div>
<div class="line"><span class="lineno">  322</span>          <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Invalid nm_query_window_timebase value (valid values are: hour, day, week, month, year)&quot;</span>));</div>
<div class="line"><span class="lineno">  323</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;Invalid nm_query_window_timebase value\n&quot;</span>);</div>
<div class="line"><span class="lineno">  324</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  325</span>    }</div>
<div class="line"><span class="lineno">  326</span>  }</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  329</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_a96039a9f8d37daad993ae7b490510339"><div class="ttname"><a href="config_2helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a></div><div class="ttdeci">short cs_subset_number(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a number config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00143">helpers.c:143</a></div></div>
<div class="ttc" id="aconfig_2helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00047">helpers.c:47</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00092">logging2.h:92</a></div></div>
<div class="ttc" id="amutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a6b6a50296dd2a31863a43379ef4a343d"><div class="ttname"><a href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a></div><div class="ttdeci">bool mutt_str_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00660">string.c:660</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a8da43128384281992caf90397da2452b"><div class="ttname"><a href="#a8da43128384281992caf90397da2452b">query_window_reset</a></div><div class="ttdeci">static void query_window_reset(void)</div><div class="ttdoc">Restore vfolder&#39;s search window to its original position.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00253">notmuch.c:253</a></div></div>
<div class="ttc" id="aquery_8c_html_aeb616448f4b9672d04c1d8d84ba5fb96"><div class="ttname"><a href="query_8c.html#aeb616448f4b9672d04c1d8d84ba5fb96">nm_windowed_query_from_query</a></div><div class="ttdeci">enum NmWindowQueryRc nm_windowed_query_from_query(char *buf, size_t buflen, const bool force_enable, const short duration, const short cur_pos, const char *cur_search, const char *timebase, const char *or_terms)</div><div class="ttdoc">Windows buf with notmuch date: search term.</div><div class="ttdef"><b>Definition</b> <a href="query_8c_source.html#l00206">query.c:206</a></div></div>
<div class="ttc" id="aquery_8h_html_a5e4875af0e433ff3133f1b1f66744e42"><div class="ttname"><a href="query_8h.html#a5e4875af0e433ff3133f1b1f66744e42">NmWindowQueryRc</a></div><div class="ttdeci">NmWindowQueryRc</div><div class="ttdoc">Return codes for nm_windowed_query_from_query()</div><div class="ttdef"><b>Definition</b> <a href="query_8h_source.html#l00044">query.h:45</a></div></div>
<div class="ttc" id="aquery_8h_html_a5e4875af0e433ff3133f1b1f66744e42a12532bacd01baeddfe477795902eb1f7"><div class="ttname"><a href="query_8h.html#a5e4875af0e433ff3133f1b1f66744e42a12532bacd01baeddfe477795902eb1f7">NM_WINDOW_QUERY_SUCCESS</a></div><div class="ttdeci">@ NM_WINDOW_QUERY_SUCCESS</div><div class="ttdoc">Query was successful.</div><div class="ttdef"><b>Definition</b> <a href="query_8h_source.html#l00046">query.h:46</a></div></div>
<div class="ttc" id="aquery_8h_html_a5e4875af0e433ff3133f1b1f66744e42a609e2ad56f15917e05799b36f8fa8355"><div class="ttname"><a href="query_8h.html#a5e4875af0e433ff3133f1b1f66744e42a609e2ad56f15917e05799b36f8fa8355">NM_WINDOW_QUERY_INVALID_DURATION</a></div><div class="ttdeci">@ NM_WINDOW_QUERY_INVALID_DURATION</div><div class="ttdoc">Invalid duration.</div><div class="ttdef"><b>Definition</b> <a href="query_8h_source.html#l00048">query.h:48</a></div></div>
<div class="ttc" id="aquery_8h_html_a5e4875af0e433ff3133f1b1f66744e42ae3a3ca1fa3d50d6d45d58e23b1e13a55"><div class="ttname"><a href="query_8h.html#a5e4875af0e433ff3133f1b1f66744e42ae3a3ca1fa3d50d6d45d58e23b1e13a55">NM_WINDOW_QUERY_INVALID_TIMEBASE</a></div><div class="ttdeci">@ NM_WINDOW_QUERY_INVALID_TIMEBASE</div><div class="ttdoc">Invalid timebase.</div><div class="ttdef"><b>Definition</b> <a href="query_8h_source.html#l00047">query.h:47</a></div></div>
</div><!-- fragment --><div id="dynsection-19" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a3c1e6b40d6cc7a396ef95d90e4364337_cgraph.svg" width="574" height="323"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-20" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a3c1e6b40d6cc7a396ef95d90e4364337_icgraph.svg" width="350" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a03dd129a289f7f6abe0451cef4ee5ee1" name="a03dd129a289f7f6abe0451cef4ee5ee1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03dd129a289f7f6abe0451cef4ee5ee1">&#9670;&#160;</a></span>get_query_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * get_query_string </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNmMboxData.html">NmMboxData</a> *</td>          <td class="paramname"><span class="paramname"><em>mdata</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>window</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds the notmuch vfolder search string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdata</td><td>Notmuch <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> data </td></tr>
    <tr><td class="paramname">window</td><td>If true enable application of the window on the search string </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>String containing a notmuch search query </td></tr>
    <tr><td class="paramname">NULL</td><td>None can be generated</td></tr>
  </table>
  </dd>
</dl>
<p>This function parses the internal representation of a search, and returns a search query string ready to be fed to the notmuch API, given the search is valid.</p>
<dl class="section note"><dt>Note</dt><dd>The window parameter here is here to decide contextually whether we want to return a search query with window applied (for the actual search result in mailbox) or not (for the count in the sidebar). It is not aimed at enabling/disabling the feature. </dd></dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00347">347</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  348</span>{</div>
<div class="line"><span class="lineno">  349</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: %s\n&quot;</span>, window ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>  <span class="keywordflow">if</span> (!mdata)</div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  353</span>  <span class="keywordflow">if</span> (mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">db_query</a> &amp;&amp; !window)</div>
<div class="line"><span class="lineno">  354</span>    <span class="keywordflow">return</span> mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">db_query</a>;</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_query_type = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_type&quot;</span>);</div>
<div class="line"><span class="lineno">  357</span>  mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#a8851650d8d08c3490375ea41f4fe39d8">query_type</a> = <a class="code hl_function" href="query_8c.html#a005246432ee7301cb450cbc25cf9f71a">nm_string_to_query_type</a>(c_nm_query_type); <span class="comment">/* user&#39;s default */</span></div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structUrlQuery.html">UrlQuery</a> *item = NULL;</div>
<div class="line"><span class="lineno">  360</span>  <a class="code hl_define" href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a>(item, &amp;mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#a22d80b4f9f022ae1dae0a6592eab53d4">db_url</a>-&gt;<a class="code hl_variable" href="structUrl.html#a30ca5136a9649e6df583a48cbdee35d2">query_strings</a>, entries)</div>
<div class="line"><span class="lineno">  361</span>  {</div>
<div class="line"><span class="lineno">  362</span>    <span class="keywordflow">if</span> (!item-&gt;<a class="code hl_variable" href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">value</a> || !item-&gt;<a class="code hl_variable" href="structUrlQuery.html#a5e84f8d3d31c6f77cd662a9db2bae336">name</a>)</div>
<div class="line"><span class="lineno">  363</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(item-&gt;<a class="code hl_variable" href="structUrlQuery.html#a5e84f8d3d31c6f77cd662a9db2bae336">name</a>, <span class="stringliteral">&quot;limit&quot;</span>))</div>
<div class="line"><span class="lineno">  366</span>    {</div>
<div class="line"><span class="lineno">  367</span>      <span class="keywordflow">if</span> (!mutt_str_atoi_full(item-&gt;<a class="code hl_variable" href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">value</a>, &amp;mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#acbb63acef384ecdbfe563aebaeb810a0">db_limit</a>))</div>
<div class="line"><span class="lineno">  368</span>      {</div>
<div class="line"><span class="lineno">  369</span>        <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;failed to parse notmuch limit: %s&quot;</span>), item-&gt;<a class="code hl_variable" href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">value</a>);</div>
<div class="line"><span class="lineno">  370</span>      }</div>
<div class="line"><span class="lineno">  371</span>    }</div>
<div class="line"><span class="lineno">  372</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(item-&gt;<a class="code hl_variable" href="structUrlQuery.html#a5e84f8d3d31c6f77cd662a9db2bae336">name</a>, <span class="stringliteral">&quot;type&quot;</span>))</div>
<div class="line"><span class="lineno">  373</span>    {</div>
<div class="line"><span class="lineno">  374</span>      mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#a8851650d8d08c3490375ea41f4fe39d8">query_type</a> = <a class="code hl_function" href="query_8c.html#a005246432ee7301cb450cbc25cf9f71a">nm_string_to_query_type</a>(item-&gt;<a class="code hl_variable" href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">value</a>);</div>
<div class="line"><span class="lineno">  375</span>    }</div>
<div class="line"><span class="lineno">  376</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(item-&gt;<a class="code hl_variable" href="structUrlQuery.html#a5e84f8d3d31c6f77cd662a9db2bae336">name</a>, <span class="stringliteral">&quot;query&quot;</span>))</div>
<div class="line"><span class="lineno">  377</span>    {</div>
<div class="line"><span class="lineno">  378</span>      <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">db_query</a>, item-&gt;<a class="code hl_variable" href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">value</a>);</div>
<div class="line"><span class="lineno">  379</span>    }</div>
<div class="line"><span class="lineno">  380</span>  }</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>  <span class="keywordflow">if</span> (!mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">db_query</a>)</div>
<div class="line"><span class="lineno">  383</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>  <span class="keywordflow">if</span> (window)</div>
<div class="line"><span class="lineno">  386</span>  {</div>
<div class="line"><span class="lineno">  387</span>    <span class="keywordtype">char</span> buf[1024] = { 0 };</div>
<div class="line"><span class="lineno">  388</span>    <a class="code hl_function" href="subset_8c.html#a8d7d5e60bd8f7f0f8ffd8522de126b12">cs_subset_str_string_set</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_current_search&quot;</span>,</div>
<div class="line"><span class="lineno">  389</span>                             mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">db_query</a>, NULL);</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span>    <span class="comment">/* if a date part is defined, do not apply windows (to avoid the risk of</span></div>
<div class="line"><span class="lineno">  392</span><span class="comment">     * having a non-intersected date frame). A good improvement would be to</span></div>
<div class="line"><span class="lineno">  393</span><span class="comment">     * accept if they intersect */</span></div>
<div class="line"><span class="lineno">  394</span>    <span class="keywordflow">if</span> (!strstr(mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">db_query</a>, <span class="stringliteral">&quot;date:&quot;</span>) &amp;&amp;</div>
<div class="line"><span class="lineno">  395</span>        <a class="code hl_function" href="#a3c1e6b40d6cc7a396ef95d90e4364337">windowed_query_from_query</a>(mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">db_query</a>, buf, <span class="keyword">sizeof</span>(buf)))</div>
<div class="line"><span class="lineno">  396</span>    {</div>
<div class="line"><span class="lineno">  397</span>      <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">db_query</a>, buf);</div>
<div class="line"><span class="lineno">  398</span>    }</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: query (windowed) &#39;%s&#39;\n&quot;</span>, mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">db_query</a>);</div>
<div class="line"><span class="lineno">  401</span>  }</div>
<div class="line"><span class="lineno">  402</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  403</span>  {</div>
<div class="line"><span class="lineno">  404</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: query &#39;%s&#39;\n&quot;</span>, mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">db_query</a>);</div>
<div class="line"><span class="lineno">  405</span>  }</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>  <span class="keywordflow">return</span> mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">db_query</a>;</div>
<div class="line"><span class="lineno">  408</span>}</div>
<div class="ttc" id="agroup__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00093">logging2.h:93</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_af8c32ffc64dd55e92001a974a4be6bbf"><div class="ttname"><a href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a></div><div class="ttdeci">char * mutt_str_replace(char **p, const char *s)</div><div class="ttdoc">Replace one string with another.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00282">string.c:282</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a3c1e6b40d6cc7a396ef95d90e4364337"><div class="ttname"><a href="#a3c1e6b40d6cc7a396ef95d90e4364337">windowed_query_from_query</a></div><div class="ttdeci">static bool windowed_query_from_query(const char *query, char *buf, size_t buflen)</div><div class="ttdoc">Transforms a vfolder search query into a windowed one.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00283">notmuch.c:283</a></div></div>
<div class="ttc" id="aquery_8c_html_a005246432ee7301cb450cbc25cf9f71a"><div class="ttname"><a href="query_8c.html#a005246432ee7301cb450cbc25cf9f71a">nm_string_to_query_type</a></div><div class="ttdeci">enum NmQueryType nm_string_to_query_type(const char *str)</div><div class="ttdoc">Lookup a query type.</div><div class="ttdef"><b>Definition</b> <a href="query_8c_source.html#l00110">query.c:110</a></div></div>
<div class="ttc" id="aqueue_8h_html_a77999ebdf5aaf7af8b8ea22bf208c432"><div class="ttname"><a href="queue_8h.html#a77999ebdf5aaf7af8b8ea22bf208c432">STAILQ_FOREACH</a></div><div class="ttdeci">#define STAILQ_FOREACH(var, head, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00390">queue.h:390</a></div></div>
<div class="ttc" id="astructNmMboxData_html_a22d80b4f9f022ae1dae0a6592eab53d4"><div class="ttname"><a href="structNmMboxData.html#a22d80b4f9f022ae1dae0a6592eab53d4">NmMboxData::db_url</a></div><div class="ttdeci">struct Url * db_url</div><div class="ttdoc">Parsed view url of the Notmuch database.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8h_source.html#l00036">mdata.h:36</a></div></div>
<div class="ttc" id="astructNmMboxData_html_a8851650d8d08c3490375ea41f4fe39d8"><div class="ttname"><a href="structNmMboxData.html#a8851650d8d08c3490375ea41f4fe39d8">NmMboxData::query_type</a></div><div class="ttdeci">enum NmQueryType query_type</div><div class="ttdoc">Messages or Threads.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8h_source.html#l00039">mdata.h:39</a></div></div>
<div class="ttc" id="astructNmMboxData_html_acbb63acef384ecdbfe563aebaeb810a0"><div class="ttname"><a href="structNmMboxData.html#acbb63acef384ecdbfe563aebaeb810a0">NmMboxData::db_limit</a></div><div class="ttdeci">int db_limit</div><div class="ttdoc">Maximum number of results to return.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
<div class="ttc" id="astructNmMboxData_html_ae4b9cce3520ac3e2a97b1032545eda56"><div class="ttname"><a href="structNmMboxData.html#ae4b9cce3520ac3e2a97b1032545eda56">NmMboxData::db_query</a></div><div class="ttdeci">char * db_query</div><div class="ttdoc">Previous query.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8h_source.html#l00037">mdata.h:37</a></div></div>
<div class="ttc" id="astructUrlQuery_html"><div class="ttname"><a href="structUrlQuery.html">UrlQuery</a></div><div class="ttdoc">Parsed Query String.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00057">url.h:58</a></div></div>
<div class="ttc" id="astructUrlQuery_html_a5e84f8d3d31c6f77cd662a9db2bae336"><div class="ttname"><a href="structUrlQuery.html#a5e84f8d3d31c6f77cd662a9db2bae336">UrlQuery::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Query name.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00059">url.h:59</a></div></div>
<div class="ttc" id="astructUrlQuery_html_a6e66e3d6d751fdadc6697177649a9dad"><div class="ttname"><a href="structUrlQuery.html#a6e66e3d6d751fdadc6697177649a9dad">UrlQuery::value</a></div><div class="ttdeci">char * value</div><div class="ttdoc">Query value.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00060">url.h:60</a></div></div>
<div class="ttc" id="astructUrl_html_a30ca5136a9649e6df583a48cbdee35d2"><div class="ttname"><a href="structUrl.html#a30ca5136a9649e6df583a48cbdee35d2">Url::query_strings</a></div><div class="ttdeci">struct UrlQueryList query_strings</div><div class="ttdoc">List of query strings.</div><div class="ttdef"><b>Definition</b> <a href="url_8h_source.html#l00076">url.h:76</a></div></div>
<div class="ttc" id="asubset_8c_html_a8d7d5e60bd8f7f0f8ffd8522de126b12"><div class="ttname"><a href="subset_8c.html#a8d7d5e60bd8f7f0f8ffd8522de126b12">cs_subset_str_string_set</a></div><div class="ttdeci">int cs_subset_str_string_set(const struct ConfigSubset *sub, const char *name, const char *value, struct Buffer *err)</div><div class="ttdoc">Set a config item by string.</div><div class="ttdef"><b>Definition</b> <a href="subset_8c_source.html#l00392">subset.c:392</a></div></div>
</div><!-- fragment --><div id="dynsection-21" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a03dd129a289f7f6abe0451cef4ee5ee1_cgraph.svg" width="536" height="302"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-22" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a03dd129a289f7f6abe0451cef4ee5ee1_icgraph.svg" width="330" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a686a65345db081f8d66accfc760e909b" name="a686a65345db081f8d66accfc760e909b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a686a65345db081f8d66accfc760e909b">&#9670;&#160;</a></span>get_limit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_limit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structNmMboxData.html">NmMboxData</a> *</td>          <td class="paramname"><span class="paramname"><em>mdata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the database limit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdata</td><td>Notmuch <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> data </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Current limit </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00415">415</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  416</span>{</div>
<div class="line"><span class="lineno">  417</span>  <span class="keywordflow">return</span> mdata ? mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#acbb63acef384ecdbfe563aebaeb810a0">db_limit</a> : 0;</div>
<div class="line"><span class="lineno">  418</span>}</div>
</div><!-- fragment --><div id="dynsection-23" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a686a65345db081f8d66accfc760e909b_icgraph.svg" width="446" height="198"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a284a1155894b4ed4351ad49ebe5dcd9c" name="a284a1155894b4ed4351ad49ebe5dcd9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a284a1155894b4ed4351ad49ebe5dcd9c">&#9670;&#160;</a></span>apply_exclude_tags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apply_exclude_tags </td>
          <td>(</td>
          <td class="paramtype">notmuch_query_t *</td>          <td class="paramname"><span class="paramname"><em>query</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Exclude the configured tags. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>Notmuch query </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00424">424</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  425</span>{</div>
<div class="line"><span class="lineno">  426</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_exclude_tags = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_exclude_tags&quot;</span>);</div>
<div class="line"><span class="lineno">  427</span>  <span class="keywordflow">if</span> (!c_nm_exclude_tags || !query)</div>
<div class="line"><span class="lineno">  428</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmTags.html">NmTags</a> <a class="code hl_variable" href="structNmTags.html#a5a1921dc2cf39e108af3ea05f8d051e6">tags</a> = <a class="code hl_function" href="tag_8c.html#a67a0d993694ee6e2be5aec3815e382cf">nm_tag_str_to_tags</a>(c_nm_exclude_tags);</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> **tag = NULL;</div>
<div class="line"><span class="lineno">  433</span>  <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(tag, &amp;<a class="code hl_variable" href="structNmTags.html#a5a1921dc2cf39e108af3ea05f8d051e6">tags</a>.tags)</div>
<div class="line"><span class="lineno">  434</span>  {</div>
<div class="line"><span class="lineno">  435</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: query exclude tag &#39;%s&#39;\n&quot;</span>, *tag);</div>
<div class="line"><span class="lineno">  436</span>    notmuch_query_add_tag_exclude(query, *tag);</div>
<div class="line"><span class="lineno">  437</span>  }</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>  notmuch_query_set_omit_excluded(query, 1);</div>
<div class="line"><span class="lineno">  440</span>  <a class="code hl_function" href="tag_8c.html#a54d60243e592a4ea8bfa271268ce3a9a">nm_tag_array_free</a>(&amp;<a class="code hl_variable" href="structNmTags.html#a5a1921dc2cf39e108af3ea05f8d051e6">tags</a>);</div>
<div class="line"><span class="lineno">  441</span>}</div>
<div class="ttc" id="aarray_8h_html_a6b8ea5fb2f366d7716f5042b347093a6"><div class="ttname"><a href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a></div><div class="ttdeci">#define ARRAY_FOREACH(elem, head)</div><div class="ttdoc">Iterate over all elements of the array.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00214">array.h:214</a></div></div>
<div class="ttc" id="astructNmTags_html"><div class="ttname"><a href="structNmTags.html">NmTags</a></div><div class="ttdoc">Array of Notmuch tags.</div><div class="ttdef"><b>Definition</b> <a href="tag_8h_source.html#l00035">tag.h:36</a></div></div>
<div class="ttc" id="astructNmTags_html_a5a1921dc2cf39e108af3ea05f8d051e6"><div class="ttname"><a href="structNmTags.html#a5a1921dc2cf39e108af3ea05f8d051e6">NmTags::tags</a></div><div class="ttdeci">struct StringArray tags</div><div class="ttdoc">Tags.</div><div class="ttdef"><b>Definition</b> <a href="tag_8h_source.html#l00037">tag.h:37</a></div></div>
<div class="ttc" id="atag_8c_html_a54d60243e592a4ea8bfa271268ce3a9a"><div class="ttname"><a href="tag_8c.html#a54d60243e592a4ea8bfa271268ce3a9a">nm_tag_array_free</a></div><div class="ttdeci">void nm_tag_array_free(struct NmTags *tags)</div><div class="ttdoc">Free all memory of a NmTags.</div><div class="ttdef"><b>Definition</b> <a href="tag_8c_source.html#l00039">tag.c:39</a></div></div>
<div class="ttc" id="atag_8c_html_a67a0d993694ee6e2be5aec3815e382cf"><div class="ttname"><a href="tag_8c.html#a67a0d993694ee6e2be5aec3815e382cf">nm_tag_str_to_tags</a></div><div class="ttdeci">struct NmTags nm_tag_str_to_tags(const char *tag_str)</div><div class="ttdoc">Converts a comma and/or space-delimited string of tags into an array.</div><div class="ttdef"><b>Definition</b> <a href="tag_8c_source.html#l00050">tag.c:50</a></div></div>
</div><!-- fragment --><div id="dynsection-24" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a284a1155894b4ed4351ad49ebe5dcd9c_cgraph.svg" width="340" height="171"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-25" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a284a1155894b4ed4351ad49ebe5dcd9c_icgraph.svg" width="364" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa5c63cadd458794511139952c08abf77" name="aa5c63cadd458794511139952c08abf77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5c63cadd458794511139952c08abf77">&#9670;&#160;</a></span>get_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static notmuch_query_t * get_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>writable</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">writable</td><td>Should the query be updateable? </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Notmuch query </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00450">450</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  451</span>{</div>
<div class="line"><span class="lineno">  452</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno">  453</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno">  454</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>  notmuch_database_t *db = <a class="code hl_function" href="notmuch_2db_8c.html#a19b35f35a4315f940b355e3b6f776846">nm_db_get</a>(m, writable);</div>
<div class="line"><span class="lineno">  457</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *str = <a class="code hl_function" href="#a03dd129a289f7f6abe0451cef4ee5ee1">get_query_string</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  458</span> </div>
<div class="line"><span class="lineno">  459</span>  <span class="keywordflow">if</span> (!db || !str)</div>
<div class="line"><span class="lineno">  460</span>    <span class="keywordflow">goto</span> err;</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>  notmuch_query_t *q = notmuch_query_create(db, str);</div>
<div class="line"><span class="lineno">  463</span>  <span class="keywordflow">if</span> (!q)</div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordflow">goto</span> err;</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>  <a class="code hl_function" href="#a284a1155894b4ed4351ad49ebe5dcd9c">apply_exclude_tags</a>(q);</div>
<div class="line"><span class="lineno">  467</span>  notmuch_query_set_sort(q, NOTMUCH_SORT_NEWEST_FIRST);</div>
<div class="line"><span class="lineno">  468</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: query successfully initialized (%s)\n&quot;</span>, str);</div>
<div class="line"><span class="lineno">  469</span>  <span class="keywordflow">return</span> q;</div>
<div class="line"><span class="lineno">  470</span>err:</div>
<div class="line"><span class="lineno">  471</span>  <a class="code hl_function" href="notmuch_2db_8c.html#ab42f2a23cdaa9f6c5653fa7e9f9a8911">nm_db_release</a>(m);</div>
<div class="line"><span class="lineno">  472</span>  <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  473</span>}</div>
<div class="ttc" id="anotmuch_2db_8c_html_a19b35f35a4315f940b355e3b6f776846"><div class="ttname"><a href="notmuch_2db_8c.html#a19b35f35a4315f940b355e3b6f776846">nm_db_get</a></div><div class="ttdeci">notmuch_database_t * nm_db_get(struct Mailbox *m, bool writable)</div><div class="ttdoc">Get the Notmuch database.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2db_8c_source.html#l00209">db.c:209</a></div></div>
<div class="ttc" id="anotmuch_2db_8c_html_ab42f2a23cdaa9f6c5653fa7e9f9a8911"><div class="ttname"><a href="notmuch_2db_8c.html#ab42f2a23cdaa9f6c5653fa7e9f9a8911">nm_db_release</a></div><div class="ttdeci">int nm_db_release(struct Mailbox *m)</div><div class="ttdoc">Close the Notmuch database.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2db_8c_source.html#l00233">db.c:233</a></div></div>
<div class="ttc" id="anotmuch_2mdata_8c_html_a8906852e9cd707fc4e4fb61a264799dc"><div class="ttname"><a href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a></div><div class="ttdeci">struct NmMboxData * nm_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the Notmuch Mailbox data.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8c_source.html#l00096">mdata.c:96</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a03dd129a289f7f6abe0451cef4ee5ee1"><div class="ttname"><a href="#a03dd129a289f7f6abe0451cef4ee5ee1">get_query_string</a></div><div class="ttdeci">static char * get_query_string(struct NmMboxData *mdata, bool window)</div><div class="ttdoc">Builds the notmuch vfolder search string.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00347">notmuch.c:347</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a284a1155894b4ed4351ad49ebe5dcd9c"><div class="ttname"><a href="#a284a1155894b4ed4351ad49ebe5dcd9c">apply_exclude_tags</a></div><div class="ttdeci">static void apply_exclude_tags(notmuch_query_t *query)</div><div class="ttdoc">Exclude the configured tags.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00424">notmuch.c:424</a></div></div>
</div><!-- fragment --><div id="dynsection-26" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aa5c63cadd458794511139952c08abf77_cgraph.svg" width="284" height="254"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-27" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aa5c63cadd458794511139952c08abf77_icgraph.svg" width="268" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad709dd1e383f13bf730e1b0791b6fdac" name="ad709dd1e383f13bf730e1b0791b6fdac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad709dd1e383f13bf730e1b0791b6fdac">&#9670;&#160;</a></span>update_email_tags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_email_tags </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">notmuch_message_t *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a>'s tags from Notmuch. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">msg</td><td>Notmuch message </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">1</td><td>Tags unchanged </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00482">482</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  483</span>{</div>
<div class="line"><span class="lineno">  484</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmEmailData.html">NmEmailData</a> *<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code hl_function" href="notmuch_2edata_8c.html#a6f1508526644c430c650ac2678590635">nm_edata_get</a>(e);</div>
<div class="line"><span class="lineno">  485</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *new_tags = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  486</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *old_tags = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: tags update requested (%s)\n&quot;</span>, edata-&gt;<a class="code hl_variable" href="structNmEmailData.html#ac95286a6a9f4b7d1649cb4bed151ec97">virtual_id</a>);</div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>  <span class="keywordflow">for</span> (notmuch_tags_t *tags = notmuch_message_get_tags(msg);</div>
<div class="line"><span class="lineno">  491</span>       tags &amp;&amp; notmuch_tags_valid(tags); notmuch_tags_move_to_next(tags))</div>
<div class="line"><span class="lineno">  492</span>  {</div>
<div class="line"><span class="lineno">  493</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *t = notmuch_tags_get(tags);</div>
<div class="line"><span class="lineno">  494</span>    <span class="keywordflow">if</span> (!t || (*t == <span class="charliteral">&#39;\0&#39;</span>))</div>
<div class="line"><span class="lineno">  495</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>    <a class="code hl_function" href="buffer_8c.html#a9c6d8fc1e15c23966ee2ca28180e11d5">buf_join_str</a>(new_tags, t, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><span class="lineno">  498</span>  }</div>
<div class="line"><span class="lineno">  499</span> </div>
<div class="line"><span class="lineno">  500</span>  <a class="code hl_function" href="tags_8c.html#a84a6cef08d4ce584c9f1f89ac9d41f2d">driver_tags_get</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#aaa992628043f7a89ba87b8ce24f8c1b1">tags</a>, old_tags);</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(new_tags) &amp;&amp; !<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(old_tags) &amp;&amp;</div>
<div class="line"><span class="lineno">  503</span>      (<a class="code hl_function" href="buffer_8c.html#a9e3dd78a86aea77a654037a7549accd4">buf_str_equal</a>(old_tags, new_tags)))</div>
<div class="line"><span class="lineno">  504</span>  {</div>
<div class="line"><span class="lineno">  505</span>    <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;new_tags);</div>
<div class="line"><span class="lineno">  506</span>    <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;old_tags);</div>
<div class="line"><span class="lineno">  507</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: tags unchanged\n&quot;</span>);</div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  509</span>  }</div>
<div class="line"><span class="lineno">  510</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;old_tags);</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>  <span class="comment">/* new version */</span></div>
<div class="line"><span class="lineno">  513</span>  <a class="code hl_function" href="tags_8c.html#a10c39befc2124fd8e712dc4f42eaca12">driver_tags_replace</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#aaa992628043f7a89ba87b8ce24f8c1b1">tags</a>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(new_tags));</div>
<div class="line"><span class="lineno">  514</span>  <a class="code hl_function" href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a>(new_tags);</div>
<div class="line"><span class="lineno">  515</span> </div>
<div class="line"><span class="lineno">  516</span>  <a class="code hl_function" href="tags_8c.html#aeefaa5240ea695743f0b3a62f836f92f">driver_tags_get_transformed</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#aaa992628043f7a89ba87b8ce24f8c1b1">tags</a>, new_tags);</div>
<div class="line"><span class="lineno">  517</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: new tags transformed: &#39;%s&#39;\n&quot;</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(new_tags));</div>
<div class="line"><span class="lineno">  518</span>  <a class="code hl_function" href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a>(new_tags);</div>
<div class="line"><span class="lineno">  519</span> </div>
<div class="line"><span class="lineno">  520</span>  <a class="code hl_function" href="tags_8c.html#a84a6cef08d4ce584c9f1f89ac9d41f2d">driver_tags_get</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#aaa992628043f7a89ba87b8ce24f8c1b1">tags</a>, new_tags);</div>
<div class="line"><span class="lineno">  521</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: new tag: &#39;%s&#39;\n&quot;</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(new_tags));</div>
<div class="line"><span class="lineno">  522</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;new_tags);</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  525</span>}</div>
<div class="ttc" id="abuffer_8c_html_a3b1f80652b37dc26046f9acdd85a0b05"><div class="ttname"><a href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a></div><div class="ttdeci">void buf_reset(struct Buffer *buf)</div><div class="ttdoc">Reset an existing Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00076">buffer.c:76</a></div></div>
<div class="ttc" id="abuffer_8c_html_a4245e227baa2a9beb6991917404aab0d"><div class="ttname"><a href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a></div><div class="ttdeci">bool buf_is_empty(const struct Buffer *buf)</div><div class="ttdoc">Is the Buffer empty?</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00291">buffer.c:291</a></div></div>
<div class="ttc" id="abuffer_8c_html_a9c6d8fc1e15c23966ee2ca28180e11d5"><div class="ttname"><a href="buffer_8c.html#a9c6d8fc1e15c23966ee2ca28180e11d5">buf_join_str</a></div><div class="ttdeci">void buf_join_str(struct Buffer *buf, const char *str, char sep)</div><div class="ttdoc">Join a buffer with a string separated by sep.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00748">buffer.c:748</a></div></div>
<div class="ttc" id="abuffer_8c_html_a9e3dd78a86aea77a654037a7549accd4"><div class="ttname"><a href="buffer_8c.html#a9e3dd78a86aea77a654037a7549accd4">buf_str_equal</a></div><div class="ttdeci">bool buf_str_equal(const struct Buffer *a, const struct Buffer *b)</div><div class="ttdoc">Return if two buffers are equal.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00683">buffer.c:683</a></div></div>
<div class="ttc" id="abuffer_8h_html_a728ebc5a947b77c8d56db44ce553a7ab"><div class="ttname"><a href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a></div><div class="ttdeci">static const char * buf_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00096">buffer.h:96</a></div></div>
<div class="ttc" id="apool_8c_html_a41cba27c25d33cb6822789a2856093f2"><div class="ttname"><a href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a></div><div class="ttdeci">struct Buffer * buf_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00082">pool.c:82</a></div></div>
<div class="ttc" id="apool_8c_html_a4cc6068279461cb8628219586dfa35a1"><div class="ttname"><a href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a></div><div class="ttdeci">void buf_pool_release(struct Buffer **ptr)</div><div class="ttdoc">Return a Buffer to the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00096">pool.c:96</a></div></div>
<div class="ttc" id="astructBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00035">buffer.h:36</a></div></div>
<div class="ttc" id="astructEmail_html_aaa992628043f7a89ba87b8ce24f8c1b1"><div class="ttname"><a href="structEmail.html#aaa992628043f7a89ba87b8ce24f8c1b1">Email::tags</a></div><div class="ttdeci">struct TagList tags</div><div class="ttdoc">For drivers that support server tagging.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00072">email.h:72</a></div></div>
<div class="ttc" id="astructNmEmailData_html_ac95286a6a9f4b7d1649cb4bed151ec97"><div class="ttname"><a href="structNmEmailData.html#ac95286a6a9f4b7d1649cb4bed151ec97">NmEmailData::virtual_id</a></div><div class="ttdeci">char * virtual_id</div><div class="ttdoc">Unique Notmuch Id.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2edata_8h_source.html#l00037">edata.h:37</a></div></div>
<div class="ttc" id="atags_8c_html_a10c39befc2124fd8e712dc4f42eaca12"><div class="ttname"><a href="tags_8c.html#a10c39befc2124fd8e712dc4f42eaca12">driver_tags_replace</a></div><div class="ttdeci">bool driver_tags_replace(struct TagList *tl, const char *tags)</div><div class="ttdoc">Replace all tags.</div><div class="ttdef"><b>Definition</b> <a href="tags_8c_source.html#l00201">tags.c:201</a></div></div>
<div class="ttc" id="atags_8c_html_a84a6cef08d4ce584c9f1f89ac9d41f2d"><div class="ttname"><a href="tags_8c.html#a84a6cef08d4ce584c9f1f89ac9d41f2d">driver_tags_get</a></div><div class="ttdeci">void driver_tags_get(struct TagList *tl, struct Buffer *tags)</div><div class="ttdoc">Get tags all tags separated by space.</div><div class="ttdef"><b>Definition</b> <a href="tags_8c_source.html#l00164">tags.c:164</a></div></div>
<div class="ttc" id="atags_8c_html_aeefaa5240ea695743f0b3a62f836f92f"><div class="ttname"><a href="tags_8c.html#aeefaa5240ea695743f0b3a62f836f92f">driver_tags_get_transformed</a></div><div class="ttdeci">void driver_tags_get_transformed(struct TagList *tl, struct Buffer *tags)</div><div class="ttdoc">Get transformed tags separated by space.</div><div class="ttdef"><b>Definition</b> <a href="tags_8c_source.html#l00152">tags.c:152</a></div></div>
</div><!-- fragment --><div id="dynsection-28" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ad709dd1e383f13bf730e1b0791b6fdac_cgraph.svg" width="550" height="559"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-29" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ad709dd1e383f13bf730e1b0791b6fdac_icgraph.svg" width="324" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa667101acb4fa8caff3610d35875da18" name="aa667101acb4fa8caff3610d35875da18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa667101acb4fa8caff3610d35875da18">&#9670;&#160;</a></span>update_message_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_message_path </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>path</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the path for a message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">path</td><td>Path </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00534">534</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  535</span>{</div>
<div class="line"><span class="lineno">  536</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmEmailData.html">NmEmailData</a> *<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code hl_function" href="notmuch_2edata_8c.html#a6f1508526644c430c650ac2678590635">nm_edata_get</a>(e);</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: path update requested path=%s, (%s)\n&quot;</span>, <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;virtual_id);</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>  <span class="keywordtype">char</span> *p = strrchr(<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><span class="lineno">  541</span>  <span class="keywordflow">if</span> (p &amp;&amp; ((p - <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>) &gt; 3) &amp;&amp;</div>
<div class="line"><span class="lineno">  542</span>      (<a class="code hl_function" href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a>(p - 3, <span class="stringliteral">&quot;cur&quot;</span>, 3) || <a class="code hl_function" href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a>(p - 3, <span class="stringliteral">&quot;new&quot;</span>, 3) ||</div>
<div class="line"><span class="lineno">  543</span>       <a class="code hl_function" href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a>(p - 3, <span class="stringliteral">&quot;tmp&quot;</span>, 3)))</div>
<div class="line"><span class="lineno">  544</span>  {</div>
<div class="line"><span class="lineno">  545</span>    <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;type = <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921dafd4cdaa9851e1c936b2f648b4bdc6ad4">MUTT_MAILDIR</a>;</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  548</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;folder);</div>
<div class="line"><span class="lineno">  549</span> </div>
<div class="line"><span class="lineno">  550</span>    p -= 3; <span class="comment">/* skip subfolder (e.g. &quot;new&quot;) */</span></div>
<div class="line"><span class="lineno">  551</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;mark_old&quot;</span>))</div>
<div class="line"><span class="lineno">  552</span>    {</div>
<div class="line"><span class="lineno">  553</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a> = <a class="code hl_function" href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a>(p, <span class="stringliteral">&quot;cur&quot;</span>);</div>
<div class="line"><span class="lineno">  554</span>    }</div>
<div class="line"><span class="lineno">  555</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(p);</div>
<div class="line"><span class="lineno">  556</span> </div>
<div class="line"><span class="lineno">  557</span>    <span class="keywordflow">for</span> (; (p &gt; <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>) &amp;&amp; (*(p - 1) == <span class="charliteral">&#39;/&#39;</span>); p--)</div>
<div class="line"><span class="lineno">  558</span>      ; <span class="comment">// do nothing</span></div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>    <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;folder = <a class="code hl_function" href="mutt_2string_8c.html#a116d1d2391bc57f2ba3a9d9cfb15db76">mutt_strn_dup</a>(<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, p - <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: folder=&#39;%s&#39;, file=&#39;%s&#39;\n&quot;</span>, <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;folder, e-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  563</span> </div>
<div class="line"><span class="lineno">  564</span>    <span class="comment">// We _might_ be looking at a different file (with the same message-id)</span></div>
<div class="line"><span class="lineno">  565</span>    <span class="comment">// so reparse it from scratch.</span></div>
<div class="line"><span class="lineno">  566</span> </div>
<div class="line"><span class="lineno">  567</span>    <span class="comment">// Preserve the message-id as it&#39;s used in the Email HashTable</span></div>
<div class="line"><span class="lineno">  568</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: reparse the message\n&quot;</span>);</div>
<div class="line"><span class="lineno">  569</span>    <span class="keywordtype">char</span> *message_id = e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>;</div>
<div class="line"><span class="lineno">  570</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a> = NULL;</div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span>    <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno">  573</span>    <a class="code hl_function" href="envelope_8c.html#a244dacf9b1001c9ce1dbd473e001381f">mutt_env_free</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno">  574</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="maildir_2mailbox_8c.html#a5b3866322416ead2f4f1fd899702f649">maildir_parse_message</a>(<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, e-&gt;<a class="code hl_variable" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a>, e))</div>
<div class="line"><span class="lineno">  575</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>    <a class="code hl_define" href="signal2_8h.html#a903f9b298be75defd8a3043ebf62bd99">ASSERT</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno">  578</span>    <a class="code hl_define" href="signal2_8h.html#a903f9b298be75defd8a3043ebf62bd99">ASSERT</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno">  579</span> </div>
<div class="line"><span class="lineno">  580</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>);</div>
<div class="line"><span class="lineno">  581</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a> = message_id;</div>
<div class="line"><span class="lineno">  582</span>    message_id = NULL;</div>
<div class="line"><span class="lineno">  583</span> </div>
<div class="line"><span class="lineno">  584</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  585</span>  }</div>
<div class="line"><span class="lineno">  586</span> </div>
<div class="line"><span class="lineno">  587</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  588</span>}</div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921dafd4cdaa9851e1c936b2f648b4bdc6ad4"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921dafd4cdaa9851e1c936b2f648b4bdc6ad4">MUTT_MAILDIR</a></div><div class="ttdeci">@ MUTT_MAILDIR</div><div class="ttdoc">&#39;Maildir&#39; Mailbox type</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00048">mailbox.h:48</a></div></div>
<div class="ttc" id="aemail_2body_8c_html_a129af1c316fcbc26b55fb48957bab2cb"><div class="ttname"><a href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a></div><div class="ttdeci">void mutt_body_free(struct Body **ptr)</div><div class="ttdoc">Free a Body.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8c_source.html#l00058">body.c:58</a></div></div>
<div class="ttc" id="aenvelope_8c_html_a244dacf9b1001c9ce1dbd473e001381f"><div class="ttname"><a href="envelope_8c.html#a244dacf9b1001c9ce1dbd473e001381f">mutt_env_free</a></div><div class="ttdeci">void mutt_env_free(struct Envelope **ptr)</div><div class="ttdoc">Free an Envelope.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00125">envelope.c:125</a></div></div>
<div class="ttc" id="alogging2_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdeci">@ LL_DEBUG1</div><div class="ttdoc">Log at debug level 1.</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00044">logging2.h:44</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_a5b3866322416ead2f4f1fd899702f649"><div class="ttname"><a href="maildir_2mailbox_8c.html#a5b3866322416ead2f4f1fd899702f649">maildir_parse_message</a></div><div class="ttdeci">bool maildir_parse_message(const char *fname, bool is_old, struct Email *e)</div><div class="ttdoc">Actually parse a maildir message.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00194">mailbox.c:194</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a116d1d2391bc57f2ba3a9d9cfb15db76"><div class="ttname"><a href="mutt_2string_8c.html#a116d1d2391bc57f2ba3a9d9cfb15db76">mutt_strn_dup</a></div><div class="ttdeci">char * mutt_strn_dup(const char *begin, size_t len)</div><div class="ttdoc">Duplicate a sub-string.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00382">string.c:382</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a3fe33d90e4814281cd57de048119c950"><div class="ttname"><a href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a></div><div class="ttdeci">char * mutt_str_dup(const char *str)</div><div class="ttdoc">Copy a string, safely.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00255">string.c:255</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a6f574867aa9db4d434adbc8af1f5f7e7"><div class="ttname"><a href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a></div><div class="ttdeci">bool mutt_strn_equal(const char *a, const char *b, size_t num)</div><div class="ttdoc">Check for equality of two strings (to a maximum), safely.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00427">string.c:427</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a9bf968304f4f9b49e24215cb2e28d22d"><div class="ttname"><a href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a></div><div class="ttdeci">size_t mutt_str_startswith(const char *str, const char *prefix)</div><div class="ttdoc">Check whether a string starts with a prefix.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00232">string.c:232</a></div></div>
<div class="ttc" id="asignal2_8h_html_a903f9b298be75defd8a3043ebf62bd99"><div class="ttname"><a href="signal2_8h.html#a903f9b298be75defd8a3043ebf62bd99">ASSERT</a></div><div class="ttdeci">#define ASSERT(COND)</div><div class="ttdef"><b>Definition</b> <a href="signal2_8h_source.html#l00060">signal2.h:60</a></div></div>
<div class="ttc" id="astructEmail_html_a34cc4493729d7a3b1f4ed783e739a9ec"><div class="ttname"><a href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">Email::env</a></div><div class="ttdeci">struct Envelope * env</div><div class="ttdoc">Envelope information.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00068">email.h:68</a></div></div>
<div class="ttc" id="astructEmail_html_a57ad6ac618c0f685804f6f5bb390b3a6"><div class="ttname"><a href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">Email::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">List of MIME parts.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00069">email.h:69</a></div></div>
<div class="ttc" id="astructEmail_html_a6d9062408a8c89b19cf25584dd2ffb57"><div class="ttname"><a href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">Email::old</a></div><div class="ttdeci">bool old</div><div class="ttdoc">Email is seen, but unread.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00049">email.h:49</a></div></div>
<div class="ttc" id="astructEnvelope_html_a50418c13a849bf27b22922bd5867e5e1"><div class="ttname"><a href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">Envelope::message_id</a></div><div class="ttdeci">char * message_id</div><div class="ttdoc">Message ID.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00073">envelope.h:73</a></div></div>
</div><!-- fragment --><div id="dynsection-30" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aa667101acb4fa8caff3610d35875da18_cgraph.svg" width="546" height="488"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-31" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aa667101acb4fa8caff3610d35875da18_icgraph.svg" width="399" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="abf60a7d578968ef9a84a0e9dc1f7999a" name="abf60a7d578968ef9a84a0e9dc1f7999a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf60a7d578968ef9a84a0e9dc1f7999a">&#9670;&#160;</a></span>get_folder_from_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * get_folder_from_path </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find an email's folder from its path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Path string </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00596">596</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  597</span>{</div>
<div class="line"><span class="lineno">  598</span>  <span class="keywordtype">char</span> *p = strrchr(path, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span>  <span class="keywordflow">if</span> (p &amp;&amp; ((p - path) &gt; 3) &amp;&amp;</div>
<div class="line"><span class="lineno">  601</span>      (<a class="code hl_function" href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a>(p - 3, <span class="stringliteral">&quot;cur&quot;</span>, 3) || <a class="code hl_function" href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a>(p - 3, <span class="stringliteral">&quot;new&quot;</span>, 3) ||</div>
<div class="line"><span class="lineno">  602</span>       <a class="code hl_function" href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a>(p - 3, <span class="stringliteral">&quot;tmp&quot;</span>, 3)))</div>
<div class="line"><span class="lineno">  603</span>  {</div>
<div class="line"><span class="lineno">  604</span>    p -= 3;</div>
<div class="line"><span class="lineno">  605</span>    <span class="keywordflow">for</span> (; (p &gt; path) &amp;&amp; (*(p - 1) == <span class="charliteral">&#39;/&#39;</span>); p--)</div>
<div class="line"><span class="lineno">  606</span>      ; <span class="comment">// do nothing</span></div>
<div class="line"><span class="lineno">  607</span> </div>
<div class="line"><span class="lineno">  608</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="mutt_2string_8c.html#a116d1d2391bc57f2ba3a9d9cfb15db76">mutt_strn_dup</a>(path, p - path);</div>
<div class="line"><span class="lineno">  609</span>  }</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>  <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  612</span>}</div>
</div><!-- fragment --><div id="dynsection-32" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_abf60a7d578968ef9a84a0e9dc1f7999a_cgraph.svg" width="338" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-33" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_abf60a7d578968ef9a84a0e9dc1f7999a_icgraph.svg" width="344" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac447f33fb05b39c0d8efe128872ead37" name="ac447f33fb05b39c0d8efe128872ead37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac447f33fb05b39c0d8efe128872ead37">&#9670;&#160;</a></span>nm2mutt_message_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * nm2mutt_message_id </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts notmuch message Id to neomutt message Id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Notmuch ID to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td><a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications.">NeoMutt</a> message ID</td></tr>
  </table>
  </dd>
</dl>
<p>Caller must free the <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications.">NeoMutt</a> <a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> ID </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00621">621</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  622</span>{</div>
<div class="line"><span class="lineno">  623</span>  <span class="keywordflow">if</span> (!<span class="keywordtype">id</span>)</div>
<div class="line"><span class="lineno">  624</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>  <span class="keywordtype">char</span> *mid = NULL;</div>
<div class="line"><span class="lineno">  627</span>  <a class="code hl_function" href="mutt_2string_8c.html#a4388c16988fac9a7596dee4d4af89595">mutt_str_asprintf</a>(&amp;mid, <span class="stringliteral">&quot;&lt;%s&gt;&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  628</span>  <span class="keywordflow">return</span> mid;</div>
<div class="line"><span class="lineno">  629</span>}</div>
<div class="ttc" id="amutt_2string_8c_html_a4388c16988fac9a7596dee4d4af89595"><div class="ttname"><a href="mutt_2string_8c.html#a4388c16988fac9a7596dee4d4af89595">mutt_str_asprintf</a></div><div class="ttdeci">int mutt_str_asprintf(char **strp, const char *fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00803">string.c:803</a></div></div>
</div><!-- fragment --><div id="dynsection-34" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ac447f33fb05b39c0d8efe128872ead37_cgraph.svg" width="344" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-35" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ac447f33fb05b39c0d8efe128872ead37_icgraph.svg" width="334" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a61864e0bbe54304156a22768894a95e3" name="a61864e0bbe54304156a22768894a95e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61864e0bbe54304156a22768894a95e3">&#9670;&#160;</a></span>init_email()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int init_email </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">notmuch_message_t *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set up an email's Notmuch data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">path</td><td>Path to email </td></tr>
    <tr><td class="paramname">msg</td><td>Notmuch message </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00639">639</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  640</span>{</div>
<div class="line"><span class="lineno">  641</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="notmuch_2edata_8c.html#a6f1508526644c430c650ac2678590635">nm_edata_get</a>(e))</div>
<div class="line"><span class="lineno">  642</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmEmailData.html">NmEmailData</a> *<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code hl_function" href="notmuch_2edata_8c.html#a8b759a38d8d34d237345b10a324586e6">nm_edata_new</a>();</div>
<div class="line"><span class="lineno">  645</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a677a6956d02a1df8b87751a6161109b5">nm_edata</a> = <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>;</div>
<div class="line"><span class="lineno">  646</span> </div>
<div class="line"><span class="lineno">  647</span>  <span class="comment">/* Notmuch ensures that message Id exists (if not notmuch Notmuch will</span></div>
<div class="line"><span class="lineno">  648</span><span class="comment">   * generate an ID), so it&#39;s more safe than use neomutt Email-&gt;env-&gt;id */</span></div>
<div class="line"><span class="lineno">  649</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = notmuch_message_get_message_id(msg);</div>
<div class="line"><span class="lineno">  650</span>  <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;virtual_id = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: [e=%p, edata=%p] (%s)\n&quot;</span>, (<span class="keywordtype">void</span> *) e, (<span class="keywordtype">void</span> *) <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  653</span> </div>
<div class="line"><span class="lineno">  654</span>  <span class="keywordtype">char</span> *nm_msg_id = <a class="code hl_function" href="#ac447f33fb05b39c0d8efe128872ead37">nm2mutt_message_id</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  655</span>  <span class="keywordflow">if</span> (!e-&gt;env-&gt;message_id)</div>
<div class="line"><span class="lineno">  656</span>  {</div>
<div class="line"><span class="lineno">  657</span>    e-&gt;env-&gt;message_id = nm_msg_id;</div>
<div class="line"><span class="lineno">  658</span>  }</div>
<div class="line"><span class="lineno">  659</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(e-&gt;env-&gt;message_id, nm_msg_id))</div>
<div class="line"><span class="lineno">  660</span>  {</div>
<div class="line"><span class="lineno">  661</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;e-&gt;env-&gt;message_id);</div>
<div class="line"><span class="lineno">  662</span>    e-&gt;env-&gt;message_id = nm_msg_id;</div>
<div class="line"><span class="lineno">  663</span>  }</div>
<div class="line"><span class="lineno">  664</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  665</span>  {</div>
<div class="line"><span class="lineno">  666</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;nm_msg_id);</div>
<div class="line"><span class="lineno">  667</span>  }</div>
<div class="line"><span class="lineno">  668</span> </div>
<div class="line"><span class="lineno">  669</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="#aa667101acb4fa8caff3610d35875da18">update_message_path</a>(e, <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>) != 0)</div>
<div class="line"><span class="lineno">  670</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>  <a class="code hl_function" href="#ad709dd1e383f13bf730e1b0791b6fdac">update_email_tags</a>(e, msg);</div>
<div class="line"><span class="lineno">  673</span> </div>
<div class="line"><span class="lineno">  674</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  675</span>}</div>
<div class="ttc" id="anotmuch_2edata_8c_html_a8b759a38d8d34d237345b10a324586e6"><div class="ttname"><a href="notmuch_2edata_8c.html#a8b759a38d8d34d237345b10a324586e6">nm_edata_new</a></div><div class="ttdeci">struct NmEmailData * nm_edata_new(void)</div><div class="ttdoc">Create a new NmEmailData for an email.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2edata_8c_source.html#l00061">edata.c:61</a></div></div>
<div class="ttc" id="anotmuch_8c_html_aa667101acb4fa8caff3610d35875da18"><div class="ttname"><a href="#aa667101acb4fa8caff3610d35875da18">update_message_path</a></div><div class="ttdeci">static int update_message_path(struct Email *e, const char *path)</div><div class="ttdoc">Set the path for a message.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00534">notmuch.c:534</a></div></div>
<div class="ttc" id="anotmuch_8c_html_ac447f33fb05b39c0d8efe128872ead37"><div class="ttname"><a href="#ac447f33fb05b39c0d8efe128872ead37">nm2mutt_message_id</a></div><div class="ttdeci">static char * nm2mutt_message_id(const char *id)</div><div class="ttdoc">Converts notmuch message Id to neomutt message Id.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00621">notmuch.c:621</a></div></div>
<div class="ttc" id="anotmuch_8c_html_ad709dd1e383f13bf730e1b0791b6fdac"><div class="ttname"><a href="#ad709dd1e383f13bf730e1b0791b6fdac">update_email_tags</a></div><div class="ttdeci">static int update_email_tags(struct Email *e, notmuch_message_t *msg)</div><div class="ttdoc">Update the Email&#39;s tags from Notmuch.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00482">notmuch.c:482</a></div></div>
<div class="ttc" id="astructEmail_html_a677a6956d02a1df8b87751a6161109b5"><div class="ttname"><a href="structEmail.html#a677a6956d02a1df8b87751a6161109b5">Email::nm_edata</a></div><div class="ttdeci">void * nm_edata</div><div class="ttdoc">Notmuch private data.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00093">email.h:93</a></div></div>
</div><!-- fragment --><div id="dynsection-36" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a61864e0bbe54304156a22768894a95e3_cgraph.svg" width="456" height="336"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-37" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a61864e0bbe54304156a22768894a95e3_icgraph.svg" width="268" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="abb073f4dc73187e300d73278fd74b918" name="abb073f4dc73187e300d73278fd74b918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb073f4dc73187e300d73278fd74b918">&#9670;&#160;</a></span>get_message_last_filename()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * get_message_last_filename </td>
          <td>(</td>
          <td class="paramtype">notmuch_message_t *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a message's last filename. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>Notmuch message </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Filename </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00683">683</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  684</span>{</div>
<div class="line"><span class="lineno">  685</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *name = NULL;</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>  <span class="keywordflow">for</span> (notmuch_filenames_t *ls = notmuch_message_get_filenames(msg);</div>
<div class="line"><span class="lineno">  688</span>       ls &amp;&amp; notmuch_filenames_valid(ls); notmuch_filenames_move_to_next(ls))</div>
<div class="line"><span class="lineno">  689</span>  {</div>
<div class="line"><span class="lineno">  690</span>    name = notmuch_filenames_get(ls);</div>
<div class="line"><span class="lineno">  691</span>  }</div>
<div class="line"><span class="lineno">  692</span> </div>
<div class="line"><span class="lineno">  693</span>  <span class="keywordflow">return</span> name;</div>
<div class="line"><span class="lineno">  694</span>}</div>
</div><!-- fragment --><div id="dynsection-38" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_abb073f4dc73187e300d73278fd74b918_icgraph.svg" width="600" height="144"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae623124dfaf26d5005567bda66b288ff" name="ae623124dfaf26d5005567bda66b288ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae623124dfaf26d5005567bda66b288ff">&#9670;&#160;</a></span>progress_setup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void progress_setup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set up the Progress Bar. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00700">700</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  701</span>{</div>
<div class="line"><span class="lineno">  702</span>  <span class="keywordflow">if</span> (!m-&gt;<a class="code hl_variable" href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">verbose</a>)</div>
<div class="line"><span class="lineno">  703</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  704</span> </div>
<div class="line"><span class="lineno">  705</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno">  706</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno">  707</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  708</span> </div>
<div class="line"><span class="lineno">  709</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;oldmsgcount = m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>;</div>
<div class="line"><span class="lineno">  710</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;ignmsgcount = 0;</div>
<div class="line"><span class="lineno">  711</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;progress = <a class="code hl_function" href="progress_2lib_8h.html#a551a8d9e844532e2851d6bee121c09b3">progress_new</a>(<a class="code hl_enumvalue" href="progress_2lib_8h.html#a0a558d538b8742adf8b1251f2848ba75adc0a9dcc8b2f53e3698038e7164b6489">MUTT_PROGRESS_READ</a>, <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;oldmsgcount);</div>
<div class="line"><span class="lineno">  712</span>  <a class="code hl_function" href="progress_2lib_8h.html#abd7142bf1b3c664cf1c3edca7c9b41d8">progress_set_message</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;progress, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Reading messages...&quot;</span>));</div>
<div class="line"><span class="lineno">  713</span>}</div>
<div class="ttc" id="aprogress_2lib_8h_html_a0a558d538b8742adf8b1251f2848ba75adc0a9dcc8b2f53e3698038e7164b6489"><div class="ttname"><a href="progress_2lib_8h.html#a0a558d538b8742adf8b1251f2848ba75adc0a9dcc8b2f53e3698038e7164b6489">MUTT_PROGRESS_READ</a></div><div class="ttdeci">@ MUTT_PROGRESS_READ</div><div class="ttdoc">Progress tracks elements, according to $read_inc</div><div class="ttdef"><b>Definition</b> <a href="progress_2lib_8h_source.html#l00083">lib.h:83</a></div></div>
<div class="ttc" id="aprogress_2lib_8h_html_a551a8d9e844532e2851d6bee121c09b3"><div class="ttname"><a href="progress_2lib_8h.html#a551a8d9e844532e2851d6bee121c09b3">progress_new</a></div><div class="ttdeci">struct Progress * progress_new(enum ProgressType type, size_t size)</div><div class="ttdoc">Create a new Progress Bar.</div><div class="ttdef"><b>Definition</b> <a href="progress_8c_source.html#l00139">progress.c:139</a></div></div>
<div class="ttc" id="aprogress_2lib_8h_html_abd7142bf1b3c664cf1c3edca7c9b41d8"><div class="ttname"><a href="progress_2lib_8h.html#abd7142bf1b3c664cf1c3edca7c9b41d8">progress_set_message</a></div><div class="ttdeci">void progress_set_message(struct Progress *progress, const char *fmt,...) __attribute__((__format__(__printf__</div></div>
<div class="ttc" id="astructMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00088">mailbox.h:88</a></div></div>
<div class="ttc" id="astructMailbox_html_af1ff47b8f14a4503c9b8473582b13d5a"><div class="ttname"><a href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">Mailbox::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdoc">Display status messages?</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00117">mailbox.h:117</a></div></div>
</div><!-- fragment --><div id="dynsection-39" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ae623124dfaf26d5005567bda66b288ff_cgraph.svg" width="336" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-40" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-40-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-40-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-40-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ae623124dfaf26d5005567bda66b288ff_icgraph.svg" width="340" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af4d63e598d37c1d204fcc56bdb0e2bae" name="af4d63e598d37c1d204fcc56bdb0e2bae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4d63e598d37c1d204fcc56bdb0e2bae">&#9670;&#160;</a></span>nm_progress_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nm_progress_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the progress counter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00719">719</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  720</span>{</div>
<div class="line"><span class="lineno">  721</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span>  <span class="keywordflow">if</span> (!m-&gt;<a class="code hl_variable" href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">verbose</a> || !<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> || !<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;progress)</div>
<div class="line"><span class="lineno">  724</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  725</span> </div>
<div class="line"><span class="lineno">  726</span>  <a class="code hl_function" href="progress_2lib_8h.html#ae0ca330f9059a039a4ece5cb1b00155b">progress_update</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;progress, m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> + <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;ignmsgcount, -1);</div>
<div class="line"><span class="lineno">  727</span>}</div>
<div class="ttc" id="aprogress_2lib_8h_html_ae0ca330f9059a039a4ece5cb1b00155b"><div class="ttname"><a href="progress_2lib_8h.html#ae0ca330f9059a039a4ece5cb1b00155b">progress_update</a></div><div class="ttdeci">bool progress_update(struct Progress *progress, size_t pos, int percent)</div><div class="ttdoc">Update the state of the progress bar.</div><div class="ttdef"><b>Definition</b> <a href="progress_8c_source.html#l00080">progress.c:80</a></div></div>
</div><!-- fragment --><div id="dynsection-41" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-41-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-41-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-41-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_af4d63e598d37c1d204fcc56bdb0e2bae_cgraph.svg" width="336" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-42" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-42-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-42-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-42-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_af4d63e598d37c1d204fcc56bdb0e2bae_icgraph.svg" width="340" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af8ae1c5e8502f9a61c6bc3f3f51ddc35" name="af8ae1c5e8502f9a61c6bc3f3f51ddc35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8ae1c5e8502f9a61c6bc3f3f51ddc35">&#9670;&#160;</a></span>get_mutt_email()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structEmail.html">Email</a> * get_mutt_email </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">notmuch_message_t *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> of a Notmuch message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">msg</td><td>Notmuch message </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00736">736</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  737</span>{</div>
<div class="line"><span class="lineno">  738</span>  <span class="keywordflow">if</span> (!m || !msg)</div>
<div class="line"><span class="lineno">  739</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = notmuch_message_get_message_id(msg);</div>
<div class="line"><span class="lineno">  742</span>  <span class="keywordflow">if</span> (!<span class="keywordtype">id</span>)</div>
<div class="line"><span class="lineno">  743</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  744</span> </div>
<div class="line"><span class="lineno">  745</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: neomutt email, id=&#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  746</span> </div>
<div class="line"><span class="lineno">  747</span>  <span class="keywordflow">if</span> (!m-&gt;<a class="code hl_variable" href="structMailbox.html#aa179b922336df79d4674b836ca5ef4fb">id_hash</a>)</div>
<div class="line"><span class="lineno">  748</span>  {</div>
<div class="line"><span class="lineno">  749</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: init hash\n&quot;</span>);</div>
<div class="line"><span class="lineno">  750</span>    m-&gt;<a class="code hl_variable" href="structMailbox.html#aa179b922336df79d4674b836ca5ef4fb">id_hash</a> = <a class="code hl_function" href="mutt__thread_8c.html#ae8501253bd895f865daea90b51817425">mutt_make_id_hash</a>(m);</div>
<div class="line"><span class="lineno">  751</span>    <span class="keywordflow">if</span> (!m-&gt;<a class="code hl_variable" href="structMailbox.html#aa179b922336df79d4674b836ca5ef4fb">id_hash</a>)</div>
<div class="line"><span class="lineno">  752</span>      <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  753</span>  }</div>
<div class="line"><span class="lineno">  754</span> </div>
<div class="line"><span class="lineno">  755</span>  <span class="keywordtype">char</span> *mid = <a class="code hl_function" href="#ac447f33fb05b39c0d8efe128872ead37">nm2mutt_message_id</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  756</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: neomutt id=&#39;%s&#39;\n&quot;</span>, mid);</div>
<div class="line"><span class="lineno">  757</span> </div>
<div class="line"><span class="lineno">  758</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = <a class="code hl_function" href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a>(m-&gt;<a class="code hl_variable" href="structMailbox.html#aa179b922336df79d4674b836ca5ef4fb">id_hash</a>, mid);</div>
<div class="line"><span class="lineno">  759</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;mid);</div>
<div class="line"><span class="lineno">  760</span>  <span class="keywordflow">return</span> e;</div>
<div class="line"><span class="lineno">  761</span>}</div>
<div class="ttc" id="ahash_8c_html_a21cfc2c56db496fc57d3d85a71c03215"><div class="ttname"><a href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a></div><div class="ttdeci">void * mutt_hash_find(const struct HashTable *table, const char *strkey)</div><div class="ttdoc">Find the HashElem data in a Hash Table element using a key.</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00362">hash.c:362</a></div></div>
<div class="ttc" id="amutt__thread_8c_html_ae8501253bd895f865daea90b51817425"><div class="ttname"><a href="mutt__thread_8c.html#ae8501253bd895f865daea90b51817425">mutt_make_id_hash</a></div><div class="ttdeci">struct HashTable * mutt_make_id_hash(struct Mailbox *m)</div><div class="ttdoc">Create a Hash Table for message-ids.</div><div class="ttdef"><b>Definition</b> <a href="mutt__thread_8c_source.html#l01701">mutt_thread.c:1701</a></div></div>
<div class="ttc" id="astructEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00038">email.h:39</a></div></div>
<div class="ttc" id="astructMailbox_html_aa179b922336df79d4674b836ca5ef4fb"><div class="ttname"><a href="structMailbox.html#aa179b922336df79d4674b836ca5ef4fb">Mailbox::id_hash</a></div><div class="ttdeci">struct HashTable * id_hash</div><div class="ttdoc">Hash Table: &quot;message-id&quot; -&gt; Email.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00123">mailbox.h:123</a></div></div>
</div><!-- fragment --><div id="dynsection-43" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-43-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-43-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-43-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_af8ae1c5e8502f9a61c6bc3f3f51ddc35_cgraph.svg" width="334" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-44" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-44-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-44-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-44-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_af8ae1c5e8502f9a61c6bc3f3f51ddc35_icgraph.svg" width="478" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad6f3a25ff7aa400b362b784d0c302750" name="ad6f3a25ff7aa400b362b784d0c302750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f3a25ff7aa400b362b784d0c302750">&#9670;&#160;</a></span>append_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void append_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structHeaderCache.html">HeaderCache</a> *</td>          <td class="paramname"><span class="paramname"><em>hc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">notmuch_message_t *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>dedup</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Associate a message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hc</td><td>Header cache handle </td></tr>
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">msg</td><td>Notmuch message </td></tr>
    <tr><td class="paramname">dedup</td><td>De-duplicate results </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00770">770</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  772</span>{</div>
<div class="line"><span class="lineno">  773</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno">  774</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno">  775</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span>  <span class="keywordtype">char</span> *newpath = NULL;</div>
<div class="line"><span class="lineno">  778</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = NULL;</div>
<div class="line"><span class="lineno">  779</span> </div>
<div class="line"><span class="lineno">  780</span>  <span class="comment">/* deduplicate */</span></div>
<div class="line"><span class="lineno">  781</span>  <span class="keywordflow">if</span> (dedup &amp;&amp; <a class="code hl_function" href="#af8ae1c5e8502f9a61c6bc3f3f51ddc35">get_mutt_email</a>(m, msg))</div>
<div class="line"><span class="lineno">  782</span>  {</div>
<div class="line"><span class="lineno">  783</span>    mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#af3b4f8b53e562307570d85ae72a7e875">ignmsgcount</a>++;</div>
<div class="line"><span class="lineno">  784</span>    <a class="code hl_function" href="#af4d63e598d37c1d204fcc56bdb0e2bae">nm_progress_update</a>(m);</div>
<div class="line"><span class="lineno">  785</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: ignore id=%s, already in the m\n&quot;</span>,</div>
<div class="line"><span class="lineno">  786</span>               notmuch_message_get_message_id(msg));</div>
<div class="line"><span class="lineno">  787</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  788</span>  }</div>
<div class="line"><span class="lineno">  789</span> </div>
<div class="line"><span class="lineno">  790</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a> = <a class="code hl_function" href="#abb073f4dc73187e300d73278fd74b918">get_message_last_filename</a>(msg);</div>
<div class="line"><span class="lineno">  791</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>)</div>
<div class="line"><span class="lineno">  792</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  793</span> </div>
<div class="line"><span class="lineno">  794</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: appending message, i=%d, id=%s, path=%s\n&quot;</span>,</div>
<div class="line"><span class="lineno">  795</span>             m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>, notmuch_message_get_message_id(msg), <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  796</span> </div>
<div class="line"><span class="lineno">  797</span>  <a class="code hl_function" href="mx_8c.html#a0572e1f7a00e528557923201a39c7de9">mx_alloc_memory</a>(m, m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>);</div>
<div class="line"><span class="lineno">  798</span> </div>
<div class="line"><span class="lineno">  799</span><span class="preprocessor">#ifdef USE_HCACHE</span></div>
<div class="line"><span class="lineno">  800</span>  e = <a class="code hl_function" href="hcache_2hcache_8c.html#a8ef10068ab1140db0955929b282525f6">hcache_fetch_email</a>(hc, <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, <a class="code hl_function" href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a>(<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>), 0).<a class="code hl_variable" href="structHCacheEntry.html#a5348d7756835f94b4173db6afc4849eb">email</a>;</div>
<div class="line"><span class="lineno">  801</span>  <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno">  802</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  803</span>  {</div>
<div class="line"><span class="lineno">  804</span>    <span class="keywordflow">if</span> (access(<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, F_OK) == 0)</div>
<div class="line"><span class="lineno">  805</span>    {</div>
<div class="line"><span class="lineno">  806</span>      <span class="comment">/* We pass is_old=false as argument here, but e-&gt;old will be updated later</span></div>
<div class="line"><span class="lineno">  807</span><span class="comment">       * by update_message_path() (called by init_email() below).  */</span></div>
<div class="line"><span class="lineno">  808</span>      e = <a class="code hl_function" href="maildir_2mailbox_8c.html#a9d90d803e76211ae72ffad89d74bc7a1">maildir_email_new</a>();</div>
<div class="line"><span class="lineno">  809</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="maildir_2mailbox_8c.html#a5b3866322416ead2f4f1fd899702f649">maildir_parse_message</a>(<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, <span class="keyword">false</span>, e))</div>
<div class="line"><span class="lineno">  810</span>        <a class="code hl_function" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;e);</div>
<div class="line"><span class="lineno">  811</span>    }</div>
<div class="line"><span class="lineno">  812</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  813</span>    {</div>
<div class="line"><span class="lineno">  814</span>      <span class="comment">/* maybe moved try find it... */</span></div>
<div class="line"><span class="lineno">  815</span>      <span class="keywordtype">char</span> *folder = <a class="code hl_function" href="#abf60a7d578968ef9a84a0e9dc1f7999a">get_folder_from_path</a>(<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  816</span> </div>
<div class="line"><span class="lineno">  817</span>      <span class="keywordflow">if</span> (folder)</div>
<div class="line"><span class="lineno">  818</span>      {</div>
<div class="line"><span class="lineno">  819</span>        FILE *fp = <a class="code hl_function" href="maildir_2message_8c.html#a6be4837824f7fb8e2fbdfd0e316da17e">maildir_open_find_message</a>(folder, <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, &amp;newpath);</div>
<div class="line"><span class="lineno">  820</span>        <span class="keywordflow">if</span> (fp)</div>
<div class="line"><span class="lineno">  821</span>        {</div>
<div class="line"><span class="lineno">  822</span>          e = <a class="code hl_function" href="maildir_2mailbox_8c.html#a9d90d803e76211ae72ffad89d74bc7a1">maildir_email_new</a>();</div>
<div class="line"><span class="lineno">  823</span>          <span class="keywordflow">if</span> (!<a class="code hl_function" href="maildir_2mailbox_8c.html#ab640c4df30bd2ccd3820c48367ab0d19">maildir_parse_stream</a>(fp, newpath, <span class="keyword">false</span>, e))</div>
<div class="line"><span class="lineno">  824</span>            <a class="code hl_function" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;e);</div>
<div class="line"><span class="lineno">  825</span>          <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp);</div>
<div class="line"><span class="lineno">  826</span> </div>
<div class="line"><span class="lineno">  827</span>          <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: not up-to-date: %s -&gt; %s\n&quot;</span>, <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, newpath);</div>
<div class="line"><span class="lineno">  828</span>        }</div>
<div class="line"><span class="lineno">  829</span>      }</div>
<div class="line"><span class="lineno">  830</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;folder);</div>
<div class="line"><span class="lineno">  831</span>    }</div>
<div class="line"><span class="lineno">  832</span> </div>
<div class="line"><span class="lineno">  833</span>    <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno">  834</span>    {</div>
<div class="line"><span class="lineno">  835</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: failed to parse message: %s\n&quot;</span>, <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  836</span>      <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  837</span>    }</div>
<div class="line"><span class="lineno">  838</span> </div>
<div class="line"><span class="lineno">  839</span><span class="preprocessor">#ifdef USE_HCACHE</span></div>
<div class="line"><span class="lineno">  840</span>    <a class="code hl_function" href="hcache_2hcache_8c.html#a9e0172956ca278dc113eefc10baef638">hcache_store_email</a>(hc, newpath ? newpath : <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>,</div>
<div class="line"><span class="lineno">  841</span>                       <a class="code hl_function" href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a>(newpath ? newpath : <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>), e, 0);</div>
<div class="line"><span class="lineno">  842</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  843</span>  }</div>
<div class="line"><span class="lineno">  844</span> </div>
<div class="line"><span class="lineno">  845</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="#a61864e0bbe54304156a22768894a95e3">init_email</a>(e, newpath ? newpath : <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, msg) != 0)</div>
<div class="line"><span class="lineno">  846</span>  {</div>
<div class="line"><span class="lineno">  847</span>    <a class="code hl_function" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;e);</div>
<div class="line"><span class="lineno">  848</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: failed to append email!\n&quot;</span>);</div>
<div class="line"><span class="lineno">  849</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  850</span>  }</div>
<div class="line"><span class="lineno">  851</span> </div>
<div class="line"><span class="lineno">  852</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  853</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#ace0e20a11dbdc84ca9ea63497c05b603">index</a> = m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>;</div>
<div class="line"><span class="lineno">  854</span>  <a class="code hl_function" href="core_2mailbox_8c.html#a2c6a73f0789f1985d07f296537493cf0">mailbox_size_add</a>(m, e);</div>
<div class="line"><span class="lineno">  855</span>  m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>] = e;</div>
<div class="line"><span class="lineno">  856</span>  m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>++;</div>
<div class="line"><span class="lineno">  857</span> </div>
<div class="line"><span class="lineno">  858</span>  <span class="keywordflow">if</span> (newpath)</div>
<div class="line"><span class="lineno">  859</span>  {</div>
<div class="line"><span class="lineno">  860</span>    <span class="comment">/* remember that file has been moved -- nm_mbox_sync() will update the DB */</span></div>
<div class="line"><span class="lineno">  861</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structNmEmailData.html">NmEmailData</a> *<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code hl_function" href="notmuch_2edata_8c.html#a6f1508526644c430c650ac2678590635">nm_edata_get</a>(e);</div>
<div class="line"><span class="lineno">  862</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>)</div>
<div class="line"><span class="lineno">  863</span>    {</div>
<div class="line"><span class="lineno">  864</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: remember obsolete path: %s\n&quot;</span>, <a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  865</span>      <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;oldpath = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  866</span>    }</div>
<div class="line"><span class="lineno">  867</span>  }</div>
<div class="line"><span class="lineno">  868</span>  <a class="code hl_function" href="#af4d63e598d37c1d204fcc56bdb0e2bae">nm_progress_update</a>(m);</div>
<div class="line"><span class="lineno">  869</span>done:</div>
<div class="line"><span class="lineno">  870</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;newpath);</div>
<div class="line"><span class="lineno">  871</span>}</div>
<div class="ttc" id="acore_2mailbox_8c_html_a2c6a73f0789f1985d07f296537493cf0"><div class="ttname"><a href="core_2mailbox_8c.html#a2c6a73f0789f1985d07f296537493cf0">mailbox_size_add</a></div><div class="ttdeci">void mailbox_size_add(struct Mailbox *m, const struct Email *e)</div><div class="ttdoc">Add an email&#39;s size to the total size of a Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8c_source.html#l00247">mailbox.c:247</a></div></div>
<div class="ttc" id="aemail_2email_8c_html_ae9f719d3fc31d00b92bcf9f77d56ee67"><div class="ttname"><a href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a></div><div class="ttdeci">void email_free(struct Email **ptr)</div><div class="ttdoc">Free an Email.</div><div class="ttdef"><b>Definition</b> <a href="email_2email_8c_source.html#l00046">email.c:46</a></div></div>
<div class="ttc" id="afile_8h_html_a9b519e795f098be88b93cd72c49a35ec"><div class="ttname"><a href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a></div><div class="ttdeci">#define mutt_file_fclose(FP)</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00139">file.h:139</a></div></div>
<div class="ttc" id="ahcache_2hcache_8c_html_a8ef10068ab1140db0955929b282525f6"><div class="ttname"><a href="hcache_2hcache_8c.html#a8ef10068ab1140db0955929b282525f6">hcache_fetch_email</a></div><div class="ttdeci">struct HCacheEntry hcache_fetch_email(struct HeaderCache *hc, const char *key, size_t keylen, uint32_t uidvalidity)</div><div class="ttdoc">Multiplexor for StoreOps::fetch.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2hcache_8c_source.html#l00564">hcache.c:564</a></div></div>
<div class="ttc" id="ahcache_2hcache_8c_html_a9e0172956ca278dc113eefc10baef638"><div class="ttname"><a href="hcache_2hcache_8c.html#a9e0172956ca278dc113eefc10baef638">hcache_store_email</a></div><div class="ttdeci">int hcache_store_email(struct HeaderCache *hc, const char *key, size_t keylen, struct Email *e, uint32_t uidvalidity)</div><div class="ttdoc">Multiplexor for StoreOps::store.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2hcache_8c_source.html#l00672">hcache.c:672</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_a9d90d803e76211ae72ffad89d74bc7a1"><div class="ttname"><a href="maildir_2mailbox_8c.html#a9d90d803e76211ae72ffad89d74bc7a1">maildir_email_new</a></div><div class="ttdeci">struct Email * maildir_email_new(void)</div><div class="ttdoc">Create a Maildir Email.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00067">mailbox.c:67</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_ab640c4df30bd2ccd3820c48367ab0d19"><div class="ttname"><a href="maildir_2mailbox_8c.html#ab640c4df30bd2ccd3820c48367ab0d19">maildir_parse_stream</a></div><div class="ttdeci">bool maildir_parse_stream(FILE *fp, const char *fname, bool is_old, struct Email *e)</div><div class="ttdoc">Parse a Maildir message.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00157">mailbox.c:157</a></div></div>
<div class="ttc" id="amaildir_2message_8c_html_a6be4837824f7fb8e2fbdfd0e316da17e"><div class="ttname"><a href="maildir_2message_8c.html#a6be4837824f7fb8e2fbdfd0e316da17e">maildir_open_find_message</a></div><div class="ttdeci">FILE * maildir_open_find_message(const char *folder, const char *msg, char **newname)</div><div class="ttdoc">Find a message by name.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2message_8c_source.html#l00169">message.c:169</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_acca6786b903b22a5924219f9db96e10d"><div class="ttname"><a href="mutt_2string_8c.html#acca6786b903b22a5924219f9db96e10d">mutt_str_len</a></div><div class="ttdeci">size_t mutt_str_len(const char *a)</div><div class="ttdoc">Calculate the length of a string, safely.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00498">string.c:498</a></div></div>
<div class="ttc" id="amx_8c_html_a0572e1f7a00e528557923201a39c7de9"><div class="ttname"><a href="mx_8c.html#a0572e1f7a00e528557923201a39c7de9">mx_alloc_memory</a></div><div class="ttdeci">void mx_alloc_memory(struct Mailbox *m, int req_size)</div><div class="ttdoc">Create storage for the emails.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l01211">mx.c:1211</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a61864e0bbe54304156a22768894a95e3"><div class="ttname"><a href="#a61864e0bbe54304156a22768894a95e3">init_email</a></div><div class="ttdeci">static int init_email(struct Email *e, const char *path, notmuch_message_t *msg)</div><div class="ttdoc">Set up an email&#39;s Notmuch data.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00639">notmuch.c:639</a></div></div>
<div class="ttc" id="anotmuch_8c_html_abb073f4dc73187e300d73278fd74b918"><div class="ttname"><a href="#abb073f4dc73187e300d73278fd74b918">get_message_last_filename</a></div><div class="ttdeci">static const char * get_message_last_filename(notmuch_message_t *msg)</div><div class="ttdoc">Get a message&#39;s last filename.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00683">notmuch.c:683</a></div></div>
<div class="ttc" id="anotmuch_8c_html_abf60a7d578968ef9a84a0e9dc1f7999a"><div class="ttname"><a href="#abf60a7d578968ef9a84a0e9dc1f7999a">get_folder_from_path</a></div><div class="ttdeci">static char * get_folder_from_path(const char *path)</div><div class="ttdoc">Find an email&#39;s folder from its path.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00596">notmuch.c:596</a></div></div>
<div class="ttc" id="anotmuch_8c_html_af4d63e598d37c1d204fcc56bdb0e2bae"><div class="ttname"><a href="#af4d63e598d37c1d204fcc56bdb0e2bae">nm_progress_update</a></div><div class="ttdeci">static void nm_progress_update(struct Mailbox *m)</div><div class="ttdoc">Update the progress counter.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00719">notmuch.c:719</a></div></div>
<div class="ttc" id="anotmuch_8c_html_af8ae1c5e8502f9a61c6bc3f3f51ddc35"><div class="ttname"><a href="#af8ae1c5e8502f9a61c6bc3f3f51ddc35">get_mutt_email</a></div><div class="ttdeci">static struct Email * get_mutt_email(struct Mailbox *m, notmuch_message_t *msg)</div><div class="ttdoc">Get the Email of a Notmuch message.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00736">notmuch.c:736</a></div></div>
<div class="ttc" id="astructEmail_html_a620f342070525352c06b9ffabe19a8a6"><div class="ttname"><a href="structEmail.html#a620f342070525352c06b9ffabe19a8a6">Email::active</a></div><div class="ttdeci">bool active</div><div class="ttdoc">Message is not to be removed.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00076">email.h:76</a></div></div>
<div class="ttc" id="astructEmail_html_ace0e20a11dbdc84ca9ea63497c05b603"><div class="ttname"><a href="structEmail.html#ace0e20a11dbdc84ca9ea63497c05b603">Email::index</a></div><div class="ttdeci">int index</div><div class="ttdoc">The absolute (unsorted) message number.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00110">email.h:110</a></div></div>
<div class="ttc" id="astructHCacheEntry_html_a5348d7756835f94b4173db6afc4849eb"><div class="ttname"><a href="structHCacheEntry.html#a5348d7756835f94b4173db6afc4849eb">HCacheEntry::email</a></div><div class="ttdeci">struct Email * email</div><div class="ttdoc">Retrieved email.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2lib_8h_source.html#l00102">lib.h:102</a></div></div>
<div class="ttc" id="astructMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00096">mailbox.h:96</a></div></div>
<div class="ttc" id="astructNmMboxData_html_af3b4f8b53e562307570d85ae72a7e875"><div class="ttname"><a href="structNmMboxData.html#af3b4f8b53e562307570d85ae72a7e875">NmMboxData::ignmsgcount</a></div><div class="ttdeci">int ignmsgcount</div><div class="ttdoc">Ignored messages.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8h_source.html#l00043">mdata.h:43</a></div></div>
</div><!-- fragment --><div id="dynsection-45" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-45-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-45-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-45-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ad6f3a25ff7aa400b362b784d0c302750_cgraph.svg" width="582" height="960"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-46" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-46-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-46-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-46-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ad6f3a25ff7aa400b362b784d0c302750_icgraph.svg" width="490" height="222"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="abbaff67a7811e3ced0df0b62f3aebf8d" name="abbaff67a7811e3ced0df0b62f3aebf8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbaff67a7811e3ced0df0b62f3aebf8d">&#9670;&#160;</a></span>append_replies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void append_replies </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structHeaderCache.html">HeaderCache</a> *</td>          <td class="paramname"><span class="paramname"><em>hc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">notmuch_query_t *</td>          <td class="paramname"><span class="paramname"><em>q</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">notmuch_message_t *</td>          <td class="paramname"><span class="paramname"><em>top</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>dedup</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add all the replies to a given messages into the display. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hc</td><td>Header cache handle </td></tr>
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">q</td><td>Notmuch query </td></tr>
    <tr><td class="paramname">top</td><td>Notmuch message </td></tr>
    <tr><td class="paramname">dedup</td><td>De-duplicate the results</td></tr>
  </table>
  </dd>
</dl>
<p>Careful, this calls itself recursively to make sure we get everything. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00883">883</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  885</span>{</div>
<div class="line"><span class="lineno">  886</span>  notmuch_messages_t *msgs = NULL;</div>
<div class="line"><span class="lineno">  887</span> </div>
<div class="line"><span class="lineno">  888</span>  <span class="keywordflow">for</span> (msgs = notmuch_message_get_replies(top); notmuch_messages_valid(msgs);</div>
<div class="line"><span class="lineno">  889</span>       notmuch_messages_move_to_next(msgs))</div>
<div class="line"><span class="lineno">  890</span>  {</div>
<div class="line"><span class="lineno">  891</span>    notmuch_message_t *nm = notmuch_messages_get(msgs);</div>
<div class="line"><span class="lineno">  892</span>    <a class="code hl_function" href="#ad6f3a25ff7aa400b362b784d0c302750">append_message</a>(hc, m, nm, dedup);</div>
<div class="line"><span class="lineno">  893</span>    <span class="comment">/* recurse through all the replies to this message too */</span></div>
<div class="line"><span class="lineno">  894</span>    <a class="code hl_function" href="#abbaff67a7811e3ced0df0b62f3aebf8d">append_replies</a>(hc, m, q, nm, dedup);</div>
<div class="line"><span class="lineno">  895</span>    notmuch_message_destroy(nm);</div>
<div class="line"><span class="lineno">  896</span>  }</div>
<div class="line"><span class="lineno">  897</span>}</div>
<div class="ttc" id="anotmuch_8c_html_abbaff67a7811e3ced0df0b62f3aebf8d"><div class="ttname"><a href="#abbaff67a7811e3ced0df0b62f3aebf8d">append_replies</a></div><div class="ttdeci">static void append_replies(struct HeaderCache *hc, struct Mailbox *m, notmuch_query_t *q, notmuch_message_t *top, bool dedup)</div><div class="ttdoc">Add all the replies to a given messages into the display.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00883">notmuch.c:883</a></div></div>
<div class="ttc" id="anotmuch_8c_html_ad6f3a25ff7aa400b362b784d0c302750"><div class="ttname"><a href="#ad6f3a25ff7aa400b362b784d0c302750">append_message</a></div><div class="ttdeci">static void append_message(struct HeaderCache *hc, struct Mailbox *m, notmuch_message_t *msg, bool dedup)</div><div class="ttdoc">Associate a message.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00770">notmuch.c:770</a></div></div>
</div><!-- fragment --><div id="dynsection-47" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-47-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-47-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-47-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_abbaff67a7811e3ced0df0b62f3aebf8d_cgraph.svg" width="304" height="64"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-48" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-48-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-48-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-48-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_abbaff67a7811e3ced0df0b62f3aebf8d_icgraph.svg" width="290" height="64"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8baa89ed93ca9ac6c16520fb488d8f87" name="a8baa89ed93ca9ac6c16520fb488d8f87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8baa89ed93ca9ac6c16520fb488d8f87">&#9670;&#160;</a></span>append_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void append_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structHeaderCache.html">HeaderCache</a> *</td>          <td class="paramname"><span class="paramname"><em>hc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">notmuch_query_t *</td>          <td class="paramname"><span class="paramname"><em>q</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">notmuch_thread_t *</td>          <td class="paramname"><span class="paramname"><em>thread</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>dedup</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add each top level reply in the thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hc</td><td>Header cache handle </td></tr>
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">q</td><td>Notmuch query </td></tr>
    <tr><td class="paramname">thread</td><td>Notmuch thread </td></tr>
    <tr><td class="paramname">dedup</td><td>De-duplicate the results</td></tr>
  </table>
  </dd>
</dl>
<p>add each top level reply in the thread, and then add each reply to the top level replies </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00910">910</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  912</span>{</div>
<div class="line"><span class="lineno">  913</span>  notmuch_messages_t *msgs = NULL;</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>  <span class="keywordflow">for</span> (msgs = notmuch_thread_get_toplevel_messages(thread);</div>
<div class="line"><span class="lineno">  916</span>       notmuch_messages_valid(msgs); notmuch_messages_move_to_next(msgs))</div>
<div class="line"><span class="lineno">  917</span>  {</div>
<div class="line"><span class="lineno">  918</span>    notmuch_message_t *nm = notmuch_messages_get(msgs);</div>
<div class="line"><span class="lineno">  919</span>    <a class="code hl_function" href="#ad6f3a25ff7aa400b362b784d0c302750">append_message</a>(hc, m, nm, dedup);</div>
<div class="line"><span class="lineno">  920</span>    <a class="code hl_function" href="#abbaff67a7811e3ced0df0b62f3aebf8d">append_replies</a>(hc, m, q, nm, dedup);</div>
<div class="line"><span class="lineno">  921</span>    notmuch_message_destroy(nm);</div>
<div class="line"><span class="lineno">  922</span>  }</div>
<div class="line"><span class="lineno">  923</span>}</div>
</div><!-- fragment --><div id="dynsection-49" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-49-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-49-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-49-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a8baa89ed93ca9ac6c16520fb488d8f87_cgraph.svg" width="467" height="79"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-50" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-50-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-50-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-50-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a8baa89ed93ca9ac6c16520fb488d8f87_icgraph.svg" width="320" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aef6aa22d4cc0a066fe9b9b428ab70f44" name="aef6aa22d4cc0a066fe9b9b428ab70f44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef6aa22d4cc0a066fe9b9b428ab70f44">&#9670;&#160;</a></span>get_messages()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static notmuch_messages_t * get_messages </td>
          <td>(</td>
          <td class="paramtype">notmuch_query_t *</td>          <td class="paramname"><span class="paramname"><em>query</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load messages for a query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>Notmuch query </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Messages matching query </td></tr>
    <tr><td class="paramname">NULL</td><td>Error occurred</td></tr>
  </table>
  </dd>
</dl>
<p>This helper method is to be the single point for retrieving messages. It handles version specific calls, which will make maintenance easier. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00934">934</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  935</span>{</div>
<div class="line"><span class="lineno">  936</span>  <span class="keywordflow">if</span> (!query)</div>
<div class="line"><span class="lineno">  937</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  938</span> </div>
<div class="line"><span class="lineno">  939</span>  notmuch_messages_t *msgs = NULL;</div>
<div class="line"><span class="lineno">  940</span> </div>
<div class="line"><span class="lineno">  941</span><span class="preprocessor">#if LIBNOTMUCH_CHECK_VERSION(5, 0, 0)</span></div>
<div class="line"><span class="lineno">  942</span>  <span class="keywordflow">if</span> (notmuch_query_search_messages(query, &amp;msgs) != NOTMUCH_STATUS_SUCCESS)</div>
<div class="line"><span class="lineno">  943</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  944</span><span class="preprocessor">#elif LIBNOTMUCH_CHECK_VERSION(4, 3, 0)</span></div>
<div class="line"><span class="lineno">  945</span>  <span class="keywordflow">if</span> (notmuch_query_search_messages_st(query, &amp;msgs) != NOTMUCH_STATUS_SUCCESS)</div>
<div class="line"><span class="lineno">  946</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  947</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  948</span>  msgs = notmuch_query_search_messages(query);</div>
<div class="line"><span class="lineno">  949</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>  <span class="keywordflow">return</span> msgs;</div>
<div class="line"><span class="lineno">  952</span>}</div>
</div><!-- fragment --><div id="dynsection-51" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-51-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-51-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-51-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aef6aa22d4cc0a066fe9b9b428ab70f44_icgraph.svg" width="312" height="166"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="abaf21ab5cf16eed638156c611e65e22f" name="abaf21ab5cf16eed638156c611e65e22f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaf21ab5cf16eed638156c611e65e22f">&#9670;&#160;</a></span>read_mesgs_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool read_mesgs_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">notmuch_query_t *</td>          <td class="paramname"><span class="paramname"><em>q</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>dedup</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Search for matching messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">q</td><td>Notmuch query </td></tr>
    <tr><td class="paramname">dedup</td><td>De-duplicate the results </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success </td></tr>
    <tr><td class="paramname">false</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00962">962</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  963</span>{</div>
<div class="line"><span class="lineno">  964</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno">  965</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno">  966</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  967</span> </div>
<div class="line"><span class="lineno">  968</span>  <span class="keywordtype">int</span> limit = <a class="code hl_function" href="#a686a65345db081f8d66accfc760e909b">get_limit</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>);</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>  notmuch_messages_t *msgs = <a class="code hl_function" href="#aef6aa22d4cc0a066fe9b9b428ab70f44">get_messages</a>(q);</div>
<div class="line"><span class="lineno">  971</span> </div>
<div class="line"><span class="lineno">  972</span>  <span class="keywordflow">if</span> (!msgs)</div>
<div class="line"><span class="lineno">  973</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  974</span> </div>
<div class="line"><span class="lineno">  975</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structHeaderCache.html">HeaderCache</a> *hc = <a class="code hl_function" href="#a99bcf8d4cf20029c6285d28d681efe00">nm_hcache_open</a>(m);</div>
<div class="line"><span class="lineno">  976</span> </div>
<div class="line"><span class="lineno">  977</span>  <span class="keywordflow">for</span> (; notmuch_messages_valid(msgs) &amp;&amp; ((limit == 0) || (m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> &lt; limit));</div>
<div class="line"><span class="lineno">  978</span>       notmuch_messages_move_to_next(msgs))</div>
<div class="line"><span class="lineno">  979</span>  {</div>
<div class="line"><span class="lineno">  980</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="signal_8c.html#a85c069643781da758ffa8281db66e8f0">SigInt</a>)</div>
<div class="line"><span class="lineno">  981</span>    {</div>
<div class="line"><span class="lineno">  982</span>      <a class="code hl_function" href="#aea09d673b9d50ceb497435f800bb4075">nm_hcache_close</a>(&amp;hc);</div>
<div class="line"><span class="lineno">  983</span>      <a class="code hl_variable" href="signal_8c.html#a85c069643781da758ffa8281db66e8f0">SigInt</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  984</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  985</span>    }</div>
<div class="line"><span class="lineno">  986</span>    notmuch_message_t *nm = notmuch_messages_get(msgs);</div>
<div class="line"><span class="lineno">  987</span>    <a class="code hl_function" href="#ad6f3a25ff7aa400b362b784d0c302750">append_message</a>(hc, m, nm, dedup);</div>
<div class="line"><span class="lineno">  988</span>    notmuch_message_destroy(nm);</div>
<div class="line"><span class="lineno">  989</span>  }</div>
<div class="line"><span class="lineno">  990</span> </div>
<div class="line"><span class="lineno">  991</span>  <a class="code hl_function" href="#aea09d673b9d50ceb497435f800bb4075">nm_hcache_close</a>(&amp;hc);</div>
<div class="line"><span class="lineno">  992</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  993</span>}</div>
<div class="ttc" id="anotmuch_8c_html_a686a65345db081f8d66accfc760e909b"><div class="ttname"><a href="#a686a65345db081f8d66accfc760e909b">get_limit</a></div><div class="ttdeci">static int get_limit(struct NmMboxData *mdata)</div><div class="ttdoc">Get the database limit.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00415">notmuch.c:415</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a99bcf8d4cf20029c6285d28d681efe00"><div class="ttname"><a href="#a99bcf8d4cf20029c6285d28d681efe00">nm_hcache_open</a></div><div class="ttdeci">static struct HeaderCache * nm_hcache_open(struct Mailbox *m)</div><div class="ttdoc">Open a header cache.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00119">notmuch.c:119</a></div></div>
<div class="ttc" id="anotmuch_8c_html_aea09d673b9d50ceb497435f800bb4075"><div class="ttname"><a href="#aea09d673b9d50ceb497435f800bb4075">nm_hcache_close</a></div><div class="ttdeci">static void nm_hcache_close(struct HeaderCache **ptr)</div><div class="ttdoc">Close the header cache.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00133">notmuch.c:133</a></div></div>
<div class="ttc" id="anotmuch_8c_html_aef6aa22d4cc0a066fe9b9b428ab70f44"><div class="ttname"><a href="#aef6aa22d4cc0a066fe9b9b428ab70f44">get_messages</a></div><div class="ttdeci">static notmuch_messages_t * get_messages(notmuch_query_t *query)</div><div class="ttdoc">Load messages for a query.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00934">notmuch.c:934</a></div></div>
<div class="ttc" id="asignal_8c_html_a85c069643781da758ffa8281db66e8f0"><div class="ttname"><a href="signal_8c.html#a85c069643781da758ffa8281db66e8f0">SigInt</a></div><div class="ttdeci">volatile sig_atomic_t SigInt</div><div class="ttdoc">true after SIGINT is received</div><div class="ttdef"><b>Definition</b> <a href="signal_8c_source.html#l00068">signal.c:68</a></div></div>
<div class="ttc" id="astructHeaderCache_html"><div class="ttname"><a href="structHeaderCache.html">HeaderCache</a></div><div class="ttdoc">Header Cache.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2lib_8h_source.html#l00085">lib.h:86</a></div></div>
</div><!-- fragment --><div id="dynsection-52" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-52-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-52-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-52-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_abaf21ab5cf16eed638156c611e65e22f_cgraph.svg" width="488" height="304"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-53" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-53-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-53-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-53-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_abaf21ab5cf16eed638156c611e65e22f_icgraph.svg" width="318" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0256045c9befd9a5bf7ec50373f7b431" name="a0256045c9befd9a5bf7ec50373f7b431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0256045c9befd9a5bf7ec50373f7b431">&#9670;&#160;</a></span>get_threads()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static notmuch_threads_t * get_threads </td>
          <td>(</td>
          <td class="paramtype">notmuch_query_t *</td>          <td class="paramname"><span class="paramname"><em>query</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load threads for a query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>Notmuch query </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Threads matching query </td></tr>
    <tr><td class="paramname">NULL</td><td>Error occurred</td></tr>
  </table>
  </dd>
</dl>
<p>This helper method is to be the single point for retrieving messages. It handles version specific calls, which will make maintenance easier. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01004">1004</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1005</span>{</div>
<div class="line"><span class="lineno"> 1006</span>  <span class="keywordflow">if</span> (!query)</div>
<div class="line"><span class="lineno"> 1007</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1008</span> </div>
<div class="line"><span class="lineno"> 1009</span>  notmuch_threads_t *threads = NULL;</div>
<div class="line"><span class="lineno"> 1010</span><span class="preprocessor">#if LIBNOTMUCH_CHECK_VERSION(5, 0, 0)</span></div>
<div class="line"><span class="lineno"> 1011</span>  <span class="keywordflow">if</span> (notmuch_query_search_threads(query, &amp;threads) != NOTMUCH_STATUS_SUCCESS)</div>
<div class="line"><span class="lineno"> 1012</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1013</span><span class="preprocessor">#elif LIBNOTMUCH_CHECK_VERSION(4, 3, 0)</span></div>
<div class="line"><span class="lineno"> 1014</span>  <span class="keywordflow">if</span> (notmuch_query_search_threads_st(query, &amp;threads) != NOTMUCH_STATUS_SUCCESS)</div>
<div class="line"><span class="lineno"> 1015</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1016</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1017</span>  threads = notmuch_query_search_threads(query);</div>
<div class="line"><span class="lineno"> 1018</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1019</span> </div>
<div class="line"><span class="lineno"> 1020</span>  <span class="keywordflow">return</span> threads;</div>
<div class="line"><span class="lineno"> 1021</span>}</div>
</div><!-- fragment --><div id="dynsection-54" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-54-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-54-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-54-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a0256045c9befd9a5bf7ec50373f7b431_icgraph.svg" width="300" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a73570c4d26bc98c4862a64d96859d09f" name="a73570c4d26bc98c4862a64d96859d09f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73570c4d26bc98c4862a64d96859d09f">&#9670;&#160;</a></span>read_threads_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool read_threads_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">notmuch_query_t *</td>          <td class="paramname"><span class="paramname"><em>q</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>dedup</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>limit</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform a query with threads. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">q</td><td>Query type </td></tr>
    <tr><td class="paramname">dedup</td><td>Should the results be de-duped? </td></tr>
    <tr><td class="paramname">limit</td><td>Maximum number of results </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success </td></tr>
    <tr><td class="paramname">false</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01032">1032</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1033</span>{</div>
<div class="line"><span class="lineno"> 1034</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno"> 1035</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1036</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1037</span> </div>
<div class="line"><span class="lineno"> 1038</span>  notmuch_threads_t *threads = <a class="code hl_function" href="#a0256045c9befd9a5bf7ec50373f7b431">get_threads</a>(q);</div>
<div class="line"><span class="lineno"> 1039</span>  <span class="keywordflow">if</span> (!threads)</div>
<div class="line"><span class="lineno"> 1040</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1041</span> </div>
<div class="line"><span class="lineno"> 1042</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structHeaderCache.html">HeaderCache</a> *hc = <a class="code hl_function" href="#a99bcf8d4cf20029c6285d28d681efe00">nm_hcache_open</a>(m);</div>
<div class="line"><span class="lineno"> 1043</span> </div>
<div class="line"><span class="lineno"> 1044</span>  <span class="keywordflow">for</span> (; notmuch_threads_valid(threads) &amp;&amp; ((limit == 0) || (m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> &lt; limit));</div>
<div class="line"><span class="lineno"> 1045</span>       notmuch_threads_move_to_next(threads))</div>
<div class="line"><span class="lineno"> 1046</span>  {</div>
<div class="line"><span class="lineno"> 1047</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="signal_8c.html#a85c069643781da758ffa8281db66e8f0">SigInt</a>)</div>
<div class="line"><span class="lineno"> 1048</span>    {</div>
<div class="line"><span class="lineno"> 1049</span>      <a class="code hl_function" href="#aea09d673b9d50ceb497435f800bb4075">nm_hcache_close</a>(&amp;hc);</div>
<div class="line"><span class="lineno"> 1050</span>      <a class="code hl_variable" href="signal_8c.html#a85c069643781da758ffa8281db66e8f0">SigInt</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1051</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1052</span>    }</div>
<div class="line"><span class="lineno"> 1053</span>    notmuch_thread_t *thread = notmuch_threads_get(threads);</div>
<div class="line"><span class="lineno"> 1054</span>    <a class="code hl_function" href="#a8baa89ed93ca9ac6c16520fb488d8f87">append_thread</a>(hc, m, q, thread, dedup);</div>
<div class="line"><span class="lineno"> 1055</span>    notmuch_thread_destroy(thread);</div>
<div class="line"><span class="lineno"> 1056</span>  }</div>
<div class="line"><span class="lineno"> 1057</span> </div>
<div class="line"><span class="lineno"> 1058</span>  <a class="code hl_function" href="#aea09d673b9d50ceb497435f800bb4075">nm_hcache_close</a>(&amp;hc);</div>
<div class="line"><span class="lineno"> 1059</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1060</span>}</div>
<div class="ttc" id="anotmuch_8c_html_a0256045c9befd9a5bf7ec50373f7b431"><div class="ttname"><a href="#a0256045c9befd9a5bf7ec50373f7b431">get_threads</a></div><div class="ttdeci">static notmuch_threads_t * get_threads(notmuch_query_t *query)</div><div class="ttdoc">Load threads for a query.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l01004">notmuch.c:1004</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a8baa89ed93ca9ac6c16520fb488d8f87"><div class="ttname"><a href="#a8baa89ed93ca9ac6c16520fb488d8f87">append_thread</a></div><div class="ttdeci">static void append_thread(struct HeaderCache *hc, struct Mailbox *m, notmuch_query_t *q, notmuch_thread_t *thread, bool dedup)</div><div class="ttdoc">Add each top level reply in the thread.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00910">notmuch.c:910</a></div></div>
</div><!-- fragment --><div id="dynsection-55" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-55-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-55-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-55-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a73570c4d26bc98c4862a64d96859d09f_cgraph.svg" width="332" height="254"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-56" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-56-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-56-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-56-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a73570c4d26bc98c4862a64d96859d09f_icgraph.svg" width="370" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5ea2e0203ec9a6bf6c9d346d7178c9da" name="a5ea2e0203ec9a6bf6c9d346d7178c9da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ea2e0203ec9a6bf6c9d346d7178c9da">&#9670;&#160;</a></span>get_nm_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static notmuch_message_t * get_nm_message </td>
          <td>(</td>
          <td class="paramtype">notmuch_database_t *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find a Notmuch message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Notmuch database </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Handle to the Notmuch message </td></tr>
    <tr><td class="paramname">NULL</td><td>Error occurred </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01069">1069</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1070</span>{</div>
<div class="line"><span class="lineno"> 1071</span>  notmuch_message_t *msg = NULL;</div>
<div class="line"><span class="lineno"> 1072</span>  <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = <a class="code hl_function" href="#a1f9c7fb1a77cbbd2a1e0e55a434ef7ac">email_get_id</a>(e);</div>
<div class="line"><span class="lineno"> 1073</span> </div>
<div class="line"><span class="lineno"> 1074</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: find message (%s)\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span>  <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &amp;&amp; db)</div>
<div class="line"><span class="lineno"> 1077</span>    notmuch_database_find_message(db, <span class="keywordtype">id</span>, &amp;msg);</div>
<div class="line"><span class="lineno"> 1078</span> </div>
<div class="line"><span class="lineno"> 1079</span>  <span class="keywordflow">return</span> msg;</div>
<div class="line"><span class="lineno"> 1080</span>}</div>
<div class="ttc" id="anotmuch_8c_html_a1f9c7fb1a77cbbd2a1e0e55a434ef7ac"><div class="ttname"><a href="#a1f9c7fb1a77cbbd2a1e0e55a434ef7ac">email_get_id</a></div><div class="ttdeci">static char * email_get_id(struct Email *e)</div><div class="ttdoc">Get the unique Notmuch Id.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00222">notmuch.c:222</a></div></div>
</div><!-- fragment --><div id="dynsection-57" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-57-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-57-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-57-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a5ea2e0203ec9a6bf6c9d346d7178c9da_cgraph.svg" width="287" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-58" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-58-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-58-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-58-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a5ea2e0203ec9a6bf6c9d346d7178c9da_icgraph.svg" width="354" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aacdf02765d6b92f25b17fb389440566a" name="aacdf02765d6b92f25b17fb389440566a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacdf02765d6b92f25b17fb389440566a">&#9670;&#160;</a></span>nm_message_has_tag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool nm_message_has_tag </td>
          <td>(</td>
          <td class="paramtype">notmuch_message_t *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>tag</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Does a message have this tag? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>Notmuch message </td></tr>
    <tr><td class="paramname">tag</td><td><a class="el" href="structTag.html" title="LinkedList Tag Element.">Tag</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>It does </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01088">1088</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1089</span>{</div>
<div class="line"><span class="lineno"> 1090</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *possible_match_tag = NULL;</div>
<div class="line"><span class="lineno"> 1091</span>  notmuch_tags_t *tags = NULL;</div>
<div class="line"><span class="lineno"> 1092</span> </div>
<div class="line"><span class="lineno"> 1093</span>  <span class="keywordflow">for</span> (tags = notmuch_message_get_tags(msg); notmuch_tags_valid(tags);</div>
<div class="line"><span class="lineno"> 1094</span>       notmuch_tags_move_to_next(tags))</div>
<div class="line"><span class="lineno"> 1095</span>  {</div>
<div class="line"><span class="lineno"> 1096</span>    possible_match_tag = notmuch_tags_get(tags);</div>
<div class="line"><span class="lineno"> 1097</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(possible_match_tag, tag))</div>
<div class="line"><span class="lineno"> 1098</span>    {</div>
<div class="line"><span class="lineno"> 1099</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1100</span>    }</div>
<div class="line"><span class="lineno"> 1101</span>  }</div>
<div class="line"><span class="lineno"> 1102</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1103</span>}</div>
</div><!-- fragment --><div id="dynsection-59" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-59-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-59-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-59-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aacdf02765d6b92f25b17fb389440566a_cgraph.svg" width="328" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-60" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-60-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-60-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-60-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aacdf02765d6b92f25b17fb389440566a_icgraph.svg" width="312" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5d9e6d209beb0f018e50e865a7b53c44" name="a5d9e6d209beb0f018e50e865a7b53c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d9e6d209beb0f018e50e865a7b53c44">&#9670;&#160;</a></span>sync_email_path_with_nm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sync_email_path_with_nm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">notmuch_message_t *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Synchronize <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications.">NeoMutt</a>'s <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> path with notmuch. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> in <a class="el" href="structNeoMutt.html" title="Container for Accounts, Notifications.">NeoMutt</a> </td></tr>
    <tr><td class="paramname">msg</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> from notmuch </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01110">1110</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1111</span>{</div>
<div class="line"><span class="lineno"> 1112</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *new_file = <a class="code hl_function" href="#abb073f4dc73187e300d73278fd74b918">get_message_last_filename</a>(msg);</div>
<div class="line"><span class="lineno"> 1113</span>  <span class="keywordtype">char</span> old_file[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno"> 1114</span>  <a class="code hl_function" href="#a286bd4e8384ba50b8a064d17ba211e12">email_get_fullpath</a>(e, old_file, <span class="keyword">sizeof</span>(old_file));</div>
<div class="line"><span class="lineno"> 1115</span> </div>
<div class="line"><span class="lineno"> 1116</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(old_file, new_file))</div>
<div class="line"><span class="lineno"> 1117</span>    <a class="code hl_function" href="#aa667101acb4fa8caff3610d35875da18">update_message_path</a>(e, new_file);</div>
<div class="line"><span class="lineno"> 1118</span>}</div>
<div class="ttc" id="anotmuch_8c_html_a286bd4e8384ba50b8a064d17ba211e12"><div class="ttname"><a href="#a286bd4e8384ba50b8a064d17ba211e12">email_get_fullpath</a></div><div class="ttdeci">static char * email_get_fullpath(struct Email *e, char *buf, size_t buflen)</div><div class="ttdoc">Get the full path of an email.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00238">notmuch.c:238</a></div></div>
</div><!-- fragment --><div id="dynsection-61" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-61-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-61-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-61-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a5d9e6d209beb0f018e50e865a7b53c44_cgraph.svg" width="428" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-62" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-62-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-62-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-62-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a5d9e6d209beb0f018e50e865a7b53c44_icgraph.svg" width="354" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab368ac6da1bfee09880e51942edb79ab" name="ab368ac6da1bfee09880e51942edb79ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab368ac6da1bfee09880e51942edb79ab">&#9670;&#160;</a></span>update_tags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_tags </td>
          <td>(</td>
          <td class="paramtype">notmuch_message_t *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>tag_str</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the tags on a message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>Notmuch message </td></tr>
    <tr><td class="paramname">tag_str</td><td>String of tags (space separated) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01127">1127</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1128</span>{</div>
<div class="line"><span class="lineno"> 1129</span>  <span class="keywordflow">if</span> (!tag_str)</div>
<div class="line"><span class="lineno"> 1130</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1131</span> </div>
<div class="line"><span class="lineno"> 1132</span>  notmuch_message_freeze(msg);</div>
<div class="line"><span class="lineno"> 1133</span> </div>
<div class="line"><span class="lineno"> 1134</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmTags.html">NmTags</a> <a class="code hl_variable" href="structNmTags.html#a5a1921dc2cf39e108af3ea05f8d051e6">tags</a> = <a class="code hl_function" href="tag_8c.html#a67a0d993694ee6e2be5aec3815e382cf">nm_tag_str_to_tags</a>(<a class="code hl_variable" href="structNmTags.html#aeb685f7878de45a6603480a0bd41bd63">tag_str</a>);</div>
<div class="line"><span class="lineno"> 1135</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> **tag_elem = NULL;</div>
<div class="line"><span class="lineno"> 1136</span>  <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(tag_elem, &amp;<a class="code hl_variable" href="structNmTags.html#a5a1921dc2cf39e108af3ea05f8d051e6">tags</a>.tags)</div>
<div class="line"><span class="lineno"> 1137</span>  {</div>
<div class="line"><span class="lineno"> 1138</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *tag = *tag_elem;</div>
<div class="line"><span class="lineno"> 1139</span> </div>
<div class="line"><span class="lineno"> 1140</span>    <span class="keywordflow">if</span> (tag[0] == <span class="charliteral">&#39;-&#39;</span>)</div>
<div class="line"><span class="lineno"> 1141</span>    {</div>
<div class="line"><span class="lineno"> 1142</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: remove tag: &#39;%s&#39;\n&quot;</span>, tag + 1);</div>
<div class="line"><span class="lineno"> 1143</span>      notmuch_message_remove_tag(msg, tag + 1);</div>
<div class="line"><span class="lineno"> 1144</span>    }</div>
<div class="line"><span class="lineno"> 1145</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag[0] == <span class="charliteral">&#39;!&#39;</span>)</div>
<div class="line"><span class="lineno"> 1146</span>    {</div>
<div class="line"><span class="lineno"> 1147</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: toggle tag: &#39;%s&#39;\n&quot;</span>, tag + 1);</div>
<div class="line"><span class="lineno"> 1148</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="#aacdf02765d6b92f25b17fb389440566a">nm_message_has_tag</a>(msg, tag + 1))</div>
<div class="line"><span class="lineno"> 1149</span>      {</div>
<div class="line"><span class="lineno"> 1150</span>        notmuch_message_remove_tag(msg, tag + 1);</div>
<div class="line"><span class="lineno"> 1151</span>      }</div>
<div class="line"><span class="lineno"> 1152</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1153</span>      {</div>
<div class="line"><span class="lineno"> 1154</span>        notmuch_message_add_tag(msg, tag + 1);</div>
<div class="line"><span class="lineno"> 1155</span>      }</div>
<div class="line"><span class="lineno"> 1156</span>    }</div>
<div class="line"><span class="lineno"> 1157</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1158</span>    {</div>
<div class="line"><span class="lineno"> 1159</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: add tag: &#39;%s&#39;\n&quot;</span>, (tag[0] == <span class="charliteral">&#39;+&#39;</span>) ? tag + 1 : tag);</div>
<div class="line"><span class="lineno"> 1160</span>      notmuch_message_add_tag(msg, (tag[0] == <span class="charliteral">&#39;+&#39;</span>) ? tag + 1 : tag);</div>
<div class="line"><span class="lineno"> 1161</span>    }</div>
<div class="line"><span class="lineno"> 1162</span>  }</div>
<div class="line"><span class="lineno"> 1163</span> </div>
<div class="line"><span class="lineno"> 1164</span>  notmuch_message_thaw(msg);</div>
<div class="line"><span class="lineno"> 1165</span>  <a class="code hl_function" href="tag_8c.html#a54d60243e592a4ea8bfa271268ce3a9a">nm_tag_array_free</a>(&amp;<a class="code hl_variable" href="structNmTags.html#a5a1921dc2cf39e108af3ea05f8d051e6">tags</a>);</div>
<div class="line"><span class="lineno"> 1166</span> </div>
<div class="line"><span class="lineno"> 1167</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1168</span>}</div>
<div class="ttc" id="anotmuch_8c_html_aacdf02765d6b92f25b17fb389440566a"><div class="ttname"><a href="#aacdf02765d6b92f25b17fb389440566a">nm_message_has_tag</a></div><div class="ttdeci">static bool nm_message_has_tag(notmuch_message_t *msg, const char *tag)</div><div class="ttdoc">Does a message have this tag?</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l01088">notmuch.c:1088</a></div></div>
<div class="ttc" id="astructNmTags_html_aeb685f7878de45a6603480a0bd41bd63"><div class="ttname"><a href="structNmTags.html#aeb685f7878de45a6603480a0bd41bd63">NmTags::tag_str</a></div><div class="ttdeci">char * tag_str</div><div class="ttdoc">Source string.</div><div class="ttdef"><b>Definition</b> <a href="tag_8h_source.html#l00038">tag.h:38</a></div></div>
</div><!-- fragment --><div id="dynsection-63" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-63-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-63-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-63-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ab368ac6da1bfee09880e51942edb79ab_cgraph.svg" width="312" height="171"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-64" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-64-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-64-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-64-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ab368ac6da1bfee09880e51942edb79ab_icgraph.svg" width="304" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad8f62a6c7fc1fcdab25470d50e6b9d49" name="ad8f62a6c7fc1fcdab25470d50e6b9d49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8f62a6c7fc1fcdab25470d50e6b9d49">&#9670;&#160;</a></span>update_email_flags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_email_flags </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>tag_str</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a>'s flags. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">tag_str</td><td>String of tags (space separated) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>TODO: join update_email_tags and update_email_flags, which are given an array of tags. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01181">1181</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1182</span>{</div>
<div class="line"><span class="lineno"> 1183</span>  <span class="keywordflow">if</span> (!tag_str)</div>
<div class="line"><span class="lineno"> 1184</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1185</span> </div>
<div class="line"><span class="lineno"> 1186</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_unread_tag = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_unread_tag&quot;</span>);</div>
<div class="line"><span class="lineno"> 1187</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_replied_tag = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_replied_tag&quot;</span>);</div>
<div class="line"><span class="lineno"> 1188</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_flagged_tag = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_flagged_tag&quot;</span>);</div>
<div class="line"><span class="lineno"> 1189</span> </div>
<div class="line"><span class="lineno"> 1190</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmTags.html">NmTags</a> <a class="code hl_variable" href="structNmTags.html#a5a1921dc2cf39e108af3ea05f8d051e6">tags</a> = <a class="code hl_function" href="tag_8c.html#a67a0d993694ee6e2be5aec3815e382cf">nm_tag_str_to_tags</a>(<a class="code hl_variable" href="structNmTags.html#aeb685f7878de45a6603480a0bd41bd63">tag_str</a>);</div>
<div class="line"><span class="lineno"> 1191</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> **tag_elem = NULL;</div>
<div class="line"><span class="lineno"> 1192</span>  <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(tag_elem, &amp;<a class="code hl_variable" href="structNmTags.html#a5a1921dc2cf39e108af3ea05f8d051e6">tags</a>.tags)</div>
<div class="line"><span class="lineno"> 1193</span>  {</div>
<div class="line"><span class="lineno"> 1194</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *tag = *tag_elem;</div>
<div class="line"><span class="lineno"> 1195</span> </div>
<div class="line"><span class="lineno"> 1196</span>    <span class="keywordflow">if</span> (tag[0] == <span class="charliteral">&#39;-&#39;</span>)</div>
<div class="line"><span class="lineno"> 1197</span>    {</div>
<div class="line"><span class="lineno"> 1198</span>      tag++;</div>
<div class="line"><span class="lineno"> 1199</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(tag, c_nm_unread_tag))</div>
<div class="line"><span class="lineno"> 1200</span>        <a class="code hl_function" href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a>(m, e, <a class="code hl_enumvalue" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd">MUTT_READ</a>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1201</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(tag, c_nm_replied_tag))</div>
<div class="line"><span class="lineno"> 1202</span>        <a class="code hl_function" href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a>(m, e, <a class="code hl_enumvalue" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b">MUTT_REPLIED</a>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1203</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(tag, c_nm_flagged_tag))</div>
<div class="line"><span class="lineno"> 1204</span>        <a class="code hl_function" href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a>(m, e, <a class="code hl_enumvalue" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a98e86a6ccd0fbd487266f4f0cbf28d58">MUTT_FLAG</a>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1205</span>    }</div>
<div class="line"><span class="lineno"> 1206</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1207</span>    {</div>
<div class="line"><span class="lineno"> 1208</span>      tag = (tag[0] == <span class="charliteral">&#39;+&#39;</span>) ? tag + 1 : tag;</div>
<div class="line"><span class="lineno"> 1209</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(tag, c_nm_unread_tag))</div>
<div class="line"><span class="lineno"> 1210</span>        <a class="code hl_function" href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a>(m, e, <a class="code hl_enumvalue" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd">MUTT_READ</a>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1211</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(tag, c_nm_replied_tag))</div>
<div class="line"><span class="lineno"> 1212</span>        <a class="code hl_function" href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a>(m, e, <a class="code hl_enumvalue" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b">MUTT_REPLIED</a>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1213</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(tag, c_nm_flagged_tag))</div>
<div class="line"><span class="lineno"> 1214</span>        <a class="code hl_function" href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a>(m, e, <a class="code hl_enumvalue" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a98e86a6ccd0fbd487266f4f0cbf28d58">MUTT_FLAG</a>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1215</span>    }</div>
<div class="line"><span class="lineno"> 1216</span>  }</div>
<div class="line"><span class="lineno"> 1217</span> </div>
<div class="line"><span class="lineno"> 1218</span>  <a class="code hl_function" href="tag_8c.html#a54d60243e592a4ea8bfa271268ce3a9a">nm_tag_array_free</a>(&amp;<a class="code hl_variable" href="structNmTags.html#a5a1921dc2cf39e108af3ea05f8d051e6">tags</a>);</div>
<div class="line"><span class="lineno"> 1219</span> </div>
<div class="line"><span class="lineno"> 1220</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1221</span>}</div>
<div class="ttc" id="aflags_8c_html_a29547b9c7c39eb22039ff4b8f1c03829"><div class="ttname"><a href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a></div><div class="ttdeci">void mutt_set_flag(struct Mailbox *m, struct Email *e, enum MessageType flag, bool bf, bool upd_mbox)</div><div class="ttdoc">Set a flag on an email.</div><div class="ttdef"><b>Definition</b> <a href="flags_8c_source.html#l00056">flags.c:56</a></div></div>
<div class="ttc" id="amutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a6be24502ab2b73e6c0dfdcc682b103bd">MUTT_READ</a></div><div class="ttdeci">@ MUTT_READ</div><div class="ttdoc">Messages that have been read.</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00073">mutt.h:73</a></div></div>
<div class="ttc" id="amutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a98e86a6ccd0fbd487266f4f0cbf28d58"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a98e86a6ccd0fbd487266f4f0cbf28d58">MUTT_FLAG</a></div><div class="ttdeci">@ MUTT_FLAG</div><div class="ttdoc">Flagged messages.</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00079">mutt.h:79</a></div></div>
<div class="ttc" id="amutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b">MUTT_REPLIED</a></div><div class="ttdeci">@ MUTT_REPLIED</div><div class="ttdoc">Messages that have been replied to.</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00072">mutt.h:72</a></div></div>
</div><!-- fragment --><div id="dynsection-65" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-65-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-65-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-65-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ad8f62a6c7fc1fcdab25470d50e6b9d49_cgraph.svg" width="340" height="278"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-66" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-66-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-66-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-66-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ad8f62a6c7fc1fcdab25470d50e6b9d49_icgraph.svg" width="324" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a57496754297d15a9c6cb92cc4562b895" name="a57496754297d15a9c6cb92cc4562b895"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57496754297d15a9c6cb92cc4562b895">&#9670;&#160;</a></span>rename_maildir_filename()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rename_maildir_filename </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>old</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>buflen</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rename a Maildir file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old</td><td>Old path </td></tr>
    <tr><td class="paramname">buf</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer.">Buffer</a> for new path </td></tr>
    <tr><td class="paramname">buflen</td><td>Length of buffer </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success, renamed </td></tr>
    <tr><td class="paramname">1</td><td>Success, no change </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01233">1233</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1234</span>{</div>
<div class="line"><span class="lineno"> 1235</span>  <span class="keywordtype">char</span> filename[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno"> 1236</span>  <span class="keywordtype">char</span> suffix[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno"> 1237</span>  <span class="keywordtype">char</span> folder[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno"> 1238</span> </div>
<div class="line"><span class="lineno"> 1239</span>  <a class="code hl_function" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(folder, old, <span class="keyword">sizeof</span>(folder));</div>
<div class="line"><span class="lineno"> 1240</span>  <span class="keywordtype">char</span> *p = strrchr(folder, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><span class="lineno"> 1241</span>  <span class="keywordflow">if</span> (p)</div>
<div class="line"><span class="lineno"> 1242</span>  {</div>
<div class="line"><span class="lineno"> 1243</span>    *p = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1244</span>    p++;</div>
<div class="line"><span class="lineno"> 1245</span>  }</div>
<div class="line"><span class="lineno"> 1246</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1247</span>  {</div>
<div class="line"><span class="lineno"> 1248</span>    p = folder;</div>
<div class="line"><span class="lineno"> 1249</span>  }</div>
<div class="line"><span class="lineno"> 1250</span> </div>
<div class="line"><span class="lineno"> 1251</span>  <a class="code hl_function" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(filename, p, <span class="keyword">sizeof</span>(filename));</div>
<div class="line"><span class="lineno"> 1252</span> </div>
<div class="line"><span class="lineno"> 1253</span>  <span class="comment">/* remove (new,cur,...) from folder path */</span></div>
<div class="line"><span class="lineno"> 1254</span>  p = strrchr(folder, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><span class="lineno"> 1255</span>  <span class="keywordflow">if</span> (p)</div>
<div class="line"><span class="lineno"> 1256</span>    *p = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1257</span> </div>
<div class="line"><span class="lineno"> 1258</span>  <span class="comment">/* remove old flags from filename */</span></div>
<div class="line"><span class="lineno"> 1259</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> c_maildir_field_delimiter = *<a class="code hl_function" href="config__cache_8c.html#a0cc761b2657310f7a7c392d4c480cc7d">cc_maildir_field_delimiter</a>();</div>
<div class="line"><span class="lineno"> 1260</span>  p = strchr(filename, c_maildir_field_delimiter);</div>
<div class="line"><span class="lineno"> 1261</span>  <span class="keywordflow">if</span> (p)</div>
<div class="line"><span class="lineno"> 1262</span>    *p = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1263</span> </div>
<div class="line"><span class="lineno"> 1264</span>  <span class="comment">/* compose new flags */</span></div>
<div class="line"><span class="lineno"> 1265</span>  <a class="code hl_function" href="maildir_2message_8c.html#ac1b43584aaf8f3ddc0ebf28da7cc2bfb">maildir_gen_flags</a>(suffix, <span class="keyword">sizeof</span>(suffix), e);</div>
<div class="line"><span class="lineno"> 1266</span> </div>
<div class="line"><span class="lineno"> 1267</span>  snprintf(buf, buflen, <span class="stringliteral">&quot;%s/%s/%s%s&quot;</span>, folder,</div>
<div class="line"><span class="lineno"> 1268</span>           (e-&gt;<a class="code hl_variable" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> || e-&gt;<a class="code hl_variable" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a>) ? <span class="stringliteral">&quot;cur&quot;</span> : <span class="stringliteral">&quot;new&quot;</span>, filename, suffix);</div>
<div class="line"><span class="lineno"> 1269</span> </div>
<div class="line"><span class="lineno"> 1270</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(old, buf))</div>
<div class="line"><span class="lineno"> 1271</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno"> 1272</span> </div>
<div class="line"><span class="lineno"> 1273</span>  <span class="keywordflow">if</span> (rename(old, buf) != 0)</div>
<div class="line"><span class="lineno"> 1274</span>  {</div>
<div class="line"><span class="lineno"> 1275</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: rename(2) failed %s -&gt; %s\n&quot;</span>, old, buf);</div>
<div class="line"><span class="lineno"> 1276</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1277</span>  }</div>
<div class="line"><span class="lineno"> 1278</span> </div>
<div class="line"><span class="lineno"> 1279</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1280</span>}</div>
<div class="ttc" id="aconfig__cache_8c_html_a0cc761b2657310f7a7c392d4c480cc7d"><div class="ttname"><a href="config__cache_8c.html#a0cc761b2657310f7a7c392d4c480cc7d">cc_maildir_field_delimiter</a></div><div class="ttdeci">const char * cc_maildir_field_delimiter(void)</div><div class="ttdoc">Get the cached value of $maildir_field_delimiter.</div><div class="ttdef"><b>Definition</b> <a href="config__cache_8c_source.html#l00131">config_cache.c:131</a></div></div>
<div class="ttc" id="amaildir_2message_8c_html_ac1b43584aaf8f3ddc0ebf28da7cc2bfb"><div class="ttname"><a href="maildir_2message_8c.html#ac1b43584aaf8f3ddc0ebf28da7cc2bfb">maildir_gen_flags</a></div><div class="ttdeci">void maildir_gen_flags(char *dest, size_t destlen, struct Email *e)</div><div class="ttdoc">Generate the Maildir flags for an email.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2message_8c_source.html#l00072">message.c:72</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_ad20e00309de897a1e882fc7400335b83"><div class="ttname"><a href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a></div><div class="ttdeci">size_t mutt_str_copy(char *dest, const char *src, size_t dsize)</div><div class="ttdoc">Copy a string into a buffer (guaranteeing NUL-termination)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00581">string.c:581</a></div></div>
<div class="ttc" id="astructEmail_html_a0bd79550be901d44e50953fb43614e10"><div class="ttname"><a href="structEmail.html#a0bd79550be901d44e50953fb43614e10">Email::read</a></div><div class="ttdeci">bool read</div><div class="ttdoc">Email is read.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00050">email.h:50</a></div></div>
</div><!-- fragment --><div id="dynsection-67" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-67-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-67-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-67-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a57496754297d15a9c6cb92cc4562b895_cgraph.svg" width="590" height="172"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-68" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-68-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-68-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-68-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a57496754297d15a9c6cb92cc4562b895_icgraph.svg" width="366" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="adc3bd6b21e3f137f3bb6a9b90b39be38" name="adc3bd6b21e3f137f3bb6a9b90b39be38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc3bd6b21e3f137f3bb6a9b90b39be38">&#9670;&#160;</a></span>remove_filename()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int remove_filename </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>path</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">path</td><td>Path of file </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01289">1289</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1290</span>{</div>
<div class="line"><span class="lineno"> 1291</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno"> 1292</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1293</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1294</span> </div>
<div class="line"><span class="lineno"> 1295</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: remove filename &#39;%s&#39;\n&quot;</span>, path);</div>
<div class="line"><span class="lineno"> 1296</span> </div>
<div class="line"><span class="lineno"> 1297</span>  notmuch_database_t *db = <a class="code hl_function" href="notmuch_2db_8c.html#a19b35f35a4315f940b355e3b6f776846">nm_db_get</a>(m, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1298</span>  <span class="keywordflow">if</span> (!db)</div>
<div class="line"><span class="lineno"> 1299</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1300</span> </div>
<div class="line"><span class="lineno"> 1301</span>  notmuch_message_t *msg = NULL;</div>
<div class="line"><span class="lineno"> 1302</span>  notmuch_status_t st = notmuch_database_find_message_by_filename(db, path, &amp;msg);</div>
<div class="line"><span class="lineno"> 1303</span>  <span class="keywordflow">if</span> (st || !msg)</div>
<div class="line"><span class="lineno"> 1304</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1305</span> </div>
<div class="line"><span class="lineno"> 1306</span>  <span class="keywordtype">int</span> trans = <a class="code hl_function" href="notmuch_2db_8c.html#a225b816f7deae709b7f98ed856eec996">nm_db_trans_begin</a>(m);</div>
<div class="line"><span class="lineno"> 1307</span>  <span class="keywordflow">if</span> (trans &lt; 0)</div>
<div class="line"><span class="lineno"> 1308</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1309</span> </div>
<div class="line"><span class="lineno"> 1310</span>  <span class="comment">/* note that unlink() is probably unnecessary here, it&#39;s already removed</span></div>
<div class="line"><span class="lineno"> 1311</span><span class="comment">   * by mh_sync_mailbox_message(), but for sure...  */</span></div>
<div class="line"><span class="lineno"> 1312</span>  notmuch_filenames_t *ls = NULL;</div>
<div class="line"><span class="lineno"> 1313</span>  st = notmuch_database_remove_message(db, path);</div>
<div class="line"><span class="lineno"> 1314</span>  <span class="keywordflow">switch</span> (st)</div>
<div class="line"><span class="lineno"> 1315</span>  {</div>
<div class="line"><span class="lineno"> 1316</span>    <span class="keywordflow">case</span> NOTMUCH_STATUS_SUCCESS:</div>
<div class="line"><span class="lineno"> 1317</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: remove success, call unlink\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1318</span>      unlink(path);</div>
<div class="line"><span class="lineno"> 1319</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1320</span>    <span class="keywordflow">case</span> NOTMUCH_STATUS_DUPLICATE_MESSAGE_ID:</div>
<div class="line"><span class="lineno"> 1321</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: remove success (duplicate), call unlink\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1322</span>      unlink(path);</div>
<div class="line"><span class="lineno"> 1323</span>      <span class="keywordflow">for</span> (ls = notmuch_message_get_filenames(msg);</div>
<div class="line"><span class="lineno"> 1324</span>           ls &amp;&amp; notmuch_filenames_valid(ls); notmuch_filenames_move_to_next(ls))</div>
<div class="line"><span class="lineno"> 1325</span>      {</div>
<div class="line"><span class="lineno"> 1326</span>        path = notmuch_filenames_get(ls);</div>
<div class="line"><span class="lineno"> 1327</span> </div>
<div class="line"><span class="lineno"> 1328</span>        <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: remove duplicate: &#39;%s&#39;\n&quot;</span>, path);</div>
<div class="line"><span class="lineno"> 1329</span>        unlink(path);</div>
<div class="line"><span class="lineno"> 1330</span>        notmuch_database_remove_message(db, path);</div>
<div class="line"><span class="lineno"> 1331</span>      }</div>
<div class="line"><span class="lineno"> 1332</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1333</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1334</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: failed to remove &#39;%s&#39; [st=%d]\n&quot;</span>, path, (<span class="keywordtype">int</span>) st);</div>
<div class="line"><span class="lineno"> 1335</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1336</span>  }</div>
<div class="line"><span class="lineno"> 1337</span> </div>
<div class="line"><span class="lineno"> 1338</span>  notmuch_message_destroy(msg);</div>
<div class="line"><span class="lineno"> 1339</span>  <span class="keywordflow">if</span> (trans)</div>
<div class="line"><span class="lineno"> 1340</span>    <a class="code hl_function" href="notmuch_2db_8c.html#afc7d9b81a6379ea5d80b84af5128b66d">nm_db_trans_end</a>(m);</div>
<div class="line"><span class="lineno"> 1341</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1342</span>}</div>
<div class="ttc" id="anotmuch_2db_8c_html_a225b816f7deae709b7f98ed856eec996"><div class="ttname"><a href="notmuch_2db_8c.html#a225b816f7deae709b7f98ed856eec996">nm_db_trans_begin</a></div><div class="ttdeci">int nm_db_trans_begin(struct Mailbox *m)</div><div class="ttdoc">Start a Notmuch database transaction.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2db_8c_source.html#l00266">db.c:266</a></div></div>
<div class="ttc" id="anotmuch_2db_8c_html_afc7d9b81a6379ea5d80b84af5128b66d"><div class="ttname"><a href="notmuch_2db_8c.html#afc7d9b81a6379ea5d80b84af5128b66d">nm_db_trans_end</a></div><div class="ttdeci">int nm_db_trans_end(struct Mailbox *m)</div><div class="ttdoc">End a database transaction.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2db_8c_source.html#l00288">db.c:288</a></div></div>
</div><!-- fragment --><div id="dynsection-69" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-69-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-69-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-69-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_adc3bd6b21e3f137f3bb6a9b90b39be38_cgraph.svg" width="330" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-70" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-70-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-70-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-70-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_adc3bd6b21e3f137f3bb6a9b90b39be38_icgraph.svg" width="304" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9007300d0a2336c11035d0d34f9458aa" name="a9007300d0a2336c11035d0d34f9458aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9007300d0a2336c11035d0d34f9458aa">&#9670;&#160;</a></span>rename_filename()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rename_filename </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>old_file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>new_file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rename the file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Notmuch <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> data </td></tr>
    <tr><td class="paramname">old_file</td><td>Old filename </td></tr>
    <tr><td class="paramname">new_file</td><td>New filename </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01353">1353</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1355</span>{</div>
<div class="line"><span class="lineno"> 1356</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno"> 1357</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1358</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1359</span> </div>
<div class="line"><span class="lineno"> 1360</span>  notmuch_database_t *db = <a class="code hl_function" href="notmuch_2db_8c.html#a19b35f35a4315f940b355e3b6f776846">nm_db_get</a>(m, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1361</span>  <span class="keywordflow">if</span> (!db || !new_file || !old_file || (access(new_file, F_OK) != 0))</div>
<div class="line"><span class="lineno"> 1362</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1363</span> </div>
<div class="line"><span class="lineno"> 1364</span>  <span class="keywordtype">int</span> rc = -1;</div>
<div class="line"><span class="lineno"> 1365</span>  notmuch_status_t st;</div>
<div class="line"><span class="lineno"> 1366</span>  notmuch_filenames_t *ls = NULL;</div>
<div class="line"><span class="lineno"> 1367</span>  notmuch_message_t *msg = NULL;</div>
<div class="line"><span class="lineno"> 1368</span> </div>
<div class="line"><span class="lineno"> 1369</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: rename filename, %s -&gt; %s\n&quot;</span>, old_file, new_file);</div>
<div class="line"><span class="lineno"> 1370</span>  <span class="keywordtype">int</span> trans = <a class="code hl_function" href="notmuch_2db_8c.html#a225b816f7deae709b7f98ed856eec996">nm_db_trans_begin</a>(m);</div>
<div class="line"><span class="lineno"> 1371</span>  <span class="keywordflow">if</span> (trans &lt; 0)</div>
<div class="line"><span class="lineno"> 1372</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1373</span> </div>
<div class="line"><span class="lineno"> 1374</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: rename: add &#39;%s&#39;\n&quot;</span>, new_file);</div>
<div class="line"><span class="lineno"> 1375</span><span class="preprocessor">#if LIBNOTMUCH_CHECK_VERSION(5, 1, 0)</span></div>
<div class="line"><span class="lineno"> 1376</span>  st = notmuch_database_index_file(db, new_file, NULL, &amp;msg);</div>
<div class="line"><span class="lineno"> 1377</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1378</span>  st = notmuch_database_add_message(db, new_file, &amp;msg);</div>
<div class="line"><span class="lineno"> 1379</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1380</span> </div>
<div class="line"><span class="lineno"> 1381</span>  <span class="keywordflow">if</span> ((st != NOTMUCH_STATUS_SUCCESS) &amp;&amp; (st != NOTMUCH_STATUS_DUPLICATE_MESSAGE_ID))</div>
<div class="line"><span class="lineno"> 1382</span>  {</div>
<div class="line"><span class="lineno"> 1383</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: failed to add &#39;%s&#39; [st=%d]\n&quot;</span>, new_file, (<span class="keywordtype">int</span>) st);</div>
<div class="line"><span class="lineno"> 1384</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1385</span>  }</div>
<div class="line"><span class="lineno"> 1386</span> </div>
<div class="line"><span class="lineno"> 1387</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: rename: rem &#39;%s&#39;\n&quot;</span>, old_file);</div>
<div class="line"><span class="lineno"> 1388</span>  st = notmuch_database_remove_message(db, old_file);</div>
<div class="line"><span class="lineno"> 1389</span>  <span class="keywordflow">switch</span> (st)</div>
<div class="line"><span class="lineno"> 1390</span>  {</div>
<div class="line"><span class="lineno"> 1391</span>    <span class="keywordflow">case</span> NOTMUCH_STATUS_SUCCESS:</div>
<div class="line"><span class="lineno"> 1392</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1393</span>    <span class="keywordflow">case</span> NOTMUCH_STATUS_DUPLICATE_MESSAGE_ID:</div>
<div class="line"><span class="lineno"> 1394</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: rename: syncing duplicate filename\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1395</span>      notmuch_message_destroy(msg);</div>
<div class="line"><span class="lineno"> 1396</span>      msg = NULL;</div>
<div class="line"><span class="lineno"> 1397</span>      notmuch_database_find_message_by_filename(db, new_file, &amp;msg);</div>
<div class="line"><span class="lineno"> 1398</span> </div>
<div class="line"><span class="lineno"> 1399</span>      <span class="keywordflow">for</span> (ls = notmuch_message_get_filenames(msg);</div>
<div class="line"><span class="lineno"> 1400</span>           msg &amp;&amp; ls &amp;&amp; notmuch_filenames_valid(ls); notmuch_filenames_move_to_next(ls))</div>
<div class="line"><span class="lineno"> 1401</span>      {</div>
<div class="line"><span class="lineno"> 1402</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *path = notmuch_filenames_get(ls);</div>
<div class="line"><span class="lineno"> 1403</span>        <span class="keywordtype">char</span> newpath[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno"> 1404</span> </div>
<div class="line"><span class="lineno"> 1405</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(new_file, path))</div>
<div class="line"><span class="lineno"> 1406</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1407</span> </div>
<div class="line"><span class="lineno"> 1408</span>        <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: rename: syncing duplicate: %s\n&quot;</span>, path);</div>
<div class="line"><span class="lineno"> 1409</span> </div>
<div class="line"><span class="lineno"> 1410</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#a57496754297d15a9c6cb92cc4562b895">rename_maildir_filename</a>(path, newpath, <span class="keyword">sizeof</span>(newpath), e) == 0)</div>
<div class="line"><span class="lineno"> 1411</span>        {</div>
<div class="line"><span class="lineno"> 1412</span>          <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: rename dup %s -&gt; %s\n&quot;</span>, path, newpath);</div>
<div class="line"><span class="lineno"> 1413</span>          notmuch_database_remove_message(db, path);</div>
<div class="line"><span class="lineno"> 1414</span><span class="preprocessor">#if LIBNOTMUCH_CHECK_VERSION(5, 1, 0)</span></div>
<div class="line"><span class="lineno"> 1415</span>          notmuch_database_index_file(db, newpath, NULL, NULL);</div>
<div class="line"><span class="lineno"> 1416</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1417</span>          notmuch_database_add_message(db, newpath, NULL);</div>
<div class="line"><span class="lineno"> 1418</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1419</span>        }</div>
<div class="line"><span class="lineno"> 1420</span>      }</div>
<div class="line"><span class="lineno"> 1421</span>      notmuch_message_destroy(msg);</div>
<div class="line"><span class="lineno"> 1422</span>      msg = NULL;</div>
<div class="line"><span class="lineno"> 1423</span>      notmuch_database_find_message_by_filename(db, new_file, &amp;msg);</div>
<div class="line"><span class="lineno"> 1424</span>      st = NOTMUCH_STATUS_SUCCESS;</div>
<div class="line"><span class="lineno"> 1425</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1426</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1427</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: failed to remove &#39;%s&#39; [st=%d]\n&quot;</span>, old_file, (<span class="keywordtype">int</span>) st);</div>
<div class="line"><span class="lineno"> 1428</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1429</span>  }</div>
<div class="line"><span class="lineno"> 1430</span> </div>
<div class="line"><span class="lineno"> 1431</span>  <span class="keywordflow">if</span> ((st == NOTMUCH_STATUS_SUCCESS) &amp;&amp; e &amp;&amp; msg)</div>
<div class="line"><span class="lineno"> 1432</span>  {</div>
<div class="line"><span class="lineno"> 1433</span>    notmuch_message_maildir_flags_to_tags(msg);</div>
<div class="line"><span class="lineno"> 1434</span>    <a class="code hl_function" href="#ad709dd1e383f13bf730e1b0791b6fdac">update_email_tags</a>(e, msg);</div>
<div class="line"><span class="lineno"> 1435</span> </div>
<div class="line"><span class="lineno"> 1436</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *tags = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1437</span>    <a class="code hl_function" href="tags_8c.html#a84a6cef08d4ce584c9f1f89ac9d41f2d">driver_tags_get</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#aaa992628043f7a89ba87b8ce24f8c1b1">tags</a>, tags);</div>
<div class="line"><span class="lineno"> 1438</span>    <a class="code hl_function" href="#ab368ac6da1bfee09880e51942edb79ab">update_tags</a>(msg, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tags));</div>
<div class="line"><span class="lineno"> 1439</span>    <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;tags);</div>
<div class="line"><span class="lineno"> 1440</span>  }</div>
<div class="line"><span class="lineno"> 1441</span> </div>
<div class="line"><span class="lineno"> 1442</span>  rc = 0;</div>
<div class="line"><span class="lineno"> 1443</span>done:</div>
<div class="line"><span class="lineno"> 1444</span>  <span class="keywordflow">if</span> (msg)</div>
<div class="line"><span class="lineno"> 1445</span>    notmuch_message_destroy(msg);</div>
<div class="line"><span class="lineno"> 1446</span>  <span class="keywordflow">if</span> (trans)</div>
<div class="line"><span class="lineno"> 1447</span>    <a class="code hl_function" href="notmuch_2db_8c.html#afc7d9b81a6379ea5d80b84af5128b66d">nm_db_trans_end</a>(m);</div>
<div class="line"><span class="lineno"> 1448</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1449</span>}</div>
<div class="ttc" id="anotmuch_8c_html_a57496754297d15a9c6cb92cc4562b895"><div class="ttname"><a href="#a57496754297d15a9c6cb92cc4562b895">rename_maildir_filename</a></div><div class="ttdeci">static int rename_maildir_filename(const char *old, char *buf, size_t buflen, struct Email *e)</div><div class="ttdoc">Rename a Maildir file.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l01233">notmuch.c:1233</a></div></div>
<div class="ttc" id="anotmuch_8c_html_ab368ac6da1bfee09880e51942edb79ab"><div class="ttname"><a href="#ab368ac6da1bfee09880e51942edb79ab">update_tags</a></div><div class="ttdeci">static int update_tags(notmuch_message_t *msg, const char *tag_str)</div><div class="ttdoc">Update the tags on a message.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l01127">notmuch.c:1127</a></div></div>
</div><!-- fragment --><div id="dynsection-71" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-71-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-71-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-71-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a9007300d0a2336c11035d0d34f9458aa_cgraph.svg" width="540" height="614"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-72" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-72-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-72-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-72-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a9007300d0a2336c11035d0d34f9458aa_icgraph.svg" width="340" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4407eb83838cab3b1d14b9d22de269fc" name="a4407eb83838cab3b1d14b9d22de269fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4407eb83838cab3b1d14b9d22de269fc">&#9670;&#160;</a></span>count_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int count_query </td>
          <td>(</td>
          <td class="paramtype">notmuch_database_t *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>qstr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>limit</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Count the results of a query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Notmuch database </td></tr>
    <tr><td class="paramname">qstr</td><td>Query to execute </td></tr>
    <tr><td class="paramname">limit</td><td>Maximum number of results </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Number of results </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01458">1458</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1459</span>{</div>
<div class="line"><span class="lineno"> 1460</span>  notmuch_query_t *q = notmuch_query_create(db, qstr);</div>
<div class="line"><span class="lineno"> 1461</span>  <span class="keywordflow">if</span> (!q)</div>
<div class="line"><span class="lineno"> 1462</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1463</span> </div>
<div class="line"><span class="lineno"> 1464</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> res = 0;</div>
<div class="line"><span class="lineno"> 1465</span> </div>
<div class="line"><span class="lineno"> 1466</span>  <a class="code hl_function" href="#a284a1155894b4ed4351ad49ebe5dcd9c">apply_exclude_tags</a>(q);</div>
<div class="line"><span class="lineno"> 1467</span><span class="preprocessor">#if LIBNOTMUCH_CHECK_VERSION(5, 0, 0)</span></div>
<div class="line"><span class="lineno"> 1468</span>  <span class="keywordflow">if</span> (notmuch_query_count_messages(q, &amp;res) != NOTMUCH_STATUS_SUCCESS)</div>
<div class="line"><span class="lineno"> 1469</span>    res = 0; <span class="comment">/* may not be defined on error */</span></div>
<div class="line"><span class="lineno"> 1470</span><span class="preprocessor">#elif LIBNOTMUCH_CHECK_VERSION(4, 3, 0)</span></div>
<div class="line"><span class="lineno"> 1471</span>  <span class="keywordflow">if</span> (notmuch_query_count_messages_st(q, &amp;res) != NOTMUCH_STATUS_SUCCESS)</div>
<div class="line"><span class="lineno"> 1472</span>    res = 0; <span class="comment">/* may not be defined on error */</span></div>
<div class="line"><span class="lineno"> 1473</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1474</span>  res = notmuch_query_count_messages(q);</div>
<div class="line"><span class="lineno"> 1475</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1476</span>  notmuch_query_destroy(q);</div>
<div class="line"><span class="lineno"> 1477</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: count &#39;%s&#39;, result=%d\n&quot;</span>, qstr, res);</div>
<div class="line"><span class="lineno"> 1478</span> </div>
<div class="line"><span class="lineno"> 1479</span>  <span class="keywordflow">if</span> ((limit &gt; 0) &amp;&amp; (res &gt; limit))</div>
<div class="line"><span class="lineno"> 1480</span>    res = limit;</div>
<div class="line"><span class="lineno"> 1481</span> </div>
<div class="line"><span class="lineno"> 1482</span>  <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1483</span>}</div>
</div><!-- fragment --><div id="dynsection-73" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-73-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-73-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-73-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a4407eb83838cab3b1d14b9d22de269fc_cgraph.svg" width="298" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-74" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-74-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-74-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-74-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a4407eb83838cab3b1d14b9d22de269fc_icgraph.svg" width="316" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad4b565dda9a762faf390ee6a5a7022e7" name="ad4b565dda9a762faf390ee6a5a7022e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4b565dda9a762faf390ee6a5a7022e7">&#9670;&#160;</a></span>nm_email_get_folder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * nm_email_get_folder </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the folder for a <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td><a class="el" href="structFolder.html" title="A folder/dir in the browser.">Folder</a> containing email </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01491">1491</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1492</span>{</div>
<div class="line"><span class="lineno"> 1493</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmEmailData.html">NmEmailData</a> *<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code hl_function" href="notmuch_2edata_8c.html#a6f1508526644c430c650ac2678590635">nm_edata_get</a>(e);</div>
<div class="line"><span class="lineno"> 1494</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>)</div>
<div class="line"><span class="lineno"> 1495</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1496</span> </div>
<div class="line"><span class="lineno"> 1497</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;folder;</div>
<div class="line"><span class="lineno"> 1498</span>}</div>
</div><!-- fragment --><div id="dynsection-75" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-75-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-75-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-75-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ad4b565dda9a762faf390ee6a5a7022e7_cgraph.svg" width="320" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-76" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-76-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-76-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-76-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ad4b565dda9a762faf390ee6a5a7022e7_icgraph.svg" width="362" height="219"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a72acf31f947469459b612276f8619ab3" name="a72acf31f947469459b612276f8619ab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72acf31f947469459b612276f8619ab3">&#9670;&#160;</a></span>nm_email_get_folder_rel_db()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * nm_email_get_folder_rel_db </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the folder for a <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> from the same level as the notmuch database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> containing <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td><a class="el" href="structFolder.html" title="A folder/dir in the browser.">Folder</a> containing email from the same level as the notmuch db </td></tr>
    <tr><td class="paramname">NULL</td><td>Error</td></tr>
  </table>
  </dd>
</dl>
<p>Instead of returning a path like /var/mail/account/Inbox, this returns account/Inbox. If wanting the full path, use <a class="el" href="#ad4b565dda9a762faf390ee6a5a7022e7" title="Get the folder for a Email.">nm_email_get_folder()</a>. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01510">1510</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1511</span>{</div>
<div class="line"><span class="lineno"> 1512</span>  <span class="keywordtype">char</span> *full_folder = <a class="code hl_function" href="#ad4b565dda9a762faf390ee6a5a7022e7">nm_email_get_folder</a>(e);</div>
<div class="line"><span class="lineno"> 1513</span>  <span class="keywordflow">if</span> (!full_folder)</div>
<div class="line"><span class="lineno"> 1514</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1515</span> </div>
<div class="line"><span class="lineno"> 1516</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *db_path = <a class="code hl_function" href="notmuch_2db_8c.html#a819879f52559c6d1d4fc687a2ecea5b6">nm_db_get_filename</a>(m);</div>
<div class="line"><span class="lineno"> 1517</span>  <span class="keywordflow">if</span> (!db_path)</div>
<div class="line"><span class="lineno"> 1518</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1519</span> </div>
<div class="line"><span class="lineno"> 1520</span>  <span class="keywordtype">size_t</span> prefix = <a class="code hl_function" href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a>(full_folder, db_path);</div>
<div class="line"><span class="lineno"> 1521</span> </div>
<div class="line"><span class="lineno"> 1522</span>  <span class="keywordtype">char</span> *path = full_folder + prefix;</div>
<div class="line"><span class="lineno"> 1523</span>  <span class="keywordflow">if</span> (*path == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><span class="lineno"> 1524</span>    path++;</div>
<div class="line"><span class="lineno"> 1525</span> </div>
<div class="line"><span class="lineno"> 1526</span>  <span class="keywordflow">return</span> path;</div>
<div class="line"><span class="lineno"> 1527</span>}</div>
<div class="ttc" id="anotmuch_2db_8c_html_a819879f52559c6d1d4fc687a2ecea5b6"><div class="ttname"><a href="notmuch_2db_8c.html#a819879f52559c6d1d4fc687a2ecea5b6">nm_db_get_filename</a></div><div class="ttdeci">const char * nm_db_get_filename(struct Mailbox *m)</div><div class="ttdoc">Get the filename of the Notmuch database.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2db_8c_source.html#l00058">db.c:58</a></div></div>
</div><!-- fragment --><div id="dynsection-77" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-77-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-77-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-77-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a72acf31f947469459b612276f8619ab3_cgraph.svg" width="362" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-78" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-78-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-78-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-78-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a72acf31f947469459b612276f8619ab3_icgraph.svg" width="375" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8ac57cce7f11e7ce9b485d9fce4c2975" name="a8ac57cce7f11e7ce9b485d9fce4c2975"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ac57cce7f11e7ce9b485d9fce4c2975">&#9670;&#160;</a></span>nm_read_entire_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_read_entire_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the entire thread of an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01536">1536</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1537</span>{</div>
<div class="line"><span class="lineno"> 1538</span>  <span class="keywordflow">if</span> (!m)</div>
<div class="line"><span class="lineno"> 1539</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1540</span> </div>
<div class="line"><span class="lineno"> 1541</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno"> 1542</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1543</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1544</span> </div>
<div class="line"><span class="lineno"> 1545</span>  notmuch_query_t *q = NULL;</div>
<div class="line"><span class="lineno"> 1546</span>  notmuch_database_t *db = NULL;</div>
<div class="line"><span class="lineno"> 1547</span>  notmuch_message_t *msg = NULL;</div>
<div class="line"><span class="lineno"> 1548</span>  <span class="keywordtype">int</span> rc = -1;</div>
<div class="line"><span class="lineno"> 1549</span> </div>
<div class="line"><span class="lineno"> 1550</span>  <span class="keywordflow">if</span> (!(db = <a class="code hl_function" href="notmuch_2db_8c.html#a19b35f35a4315f940b355e3b6f776846">nm_db_get</a>(m, <span class="keyword">false</span>)) || !(msg = <a class="code hl_function" href="#a5ea2e0203ec9a6bf6c9d346d7178c9da">get_nm_message</a>(db, e)))</div>
<div class="line"><span class="lineno"> 1551</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1552</span> </div>
<div class="line"><span class="lineno"> 1553</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: reading entire-thread messages...[current count=%d]\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1554</span>             m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>);</div>
<div class="line"><span class="lineno"> 1555</span> </div>
<div class="line"><span class="lineno"> 1556</span>  <a class="code hl_function" href="#ae623124dfaf26d5005567bda66b288ff">progress_setup</a>(m);</div>
<div class="line"><span class="lineno"> 1557</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = notmuch_message_get_thread_id(msg);</div>
<div class="line"><span class="lineno"> 1558</span>  <span class="keywordflow">if</span> (!<span class="keywordtype">id</span>)</div>
<div class="line"><span class="lineno"> 1559</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1560</span> </div>
<div class="line"><span class="lineno"> 1561</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *qstr = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1562</span>  <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(qstr, <span class="stringliteral">&quot;thread:%s&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1563</span>  q = notmuch_query_create(db, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(qstr));</div>
<div class="line"><span class="lineno"> 1564</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;qstr);</div>
<div class="line"><span class="lineno"> 1565</span>  <span class="keywordflow">if</span> (!q)</div>
<div class="line"><span class="lineno"> 1566</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1567</span>  <a class="code hl_function" href="#a284a1155894b4ed4351ad49ebe5dcd9c">apply_exclude_tags</a>(q);</div>
<div class="line"><span class="lineno"> 1568</span>  notmuch_query_set_sort(q, NOTMUCH_SORT_NEWEST_FIRST);</div>
<div class="line"><span class="lineno"> 1569</span> </div>
<div class="line"><span class="lineno"> 1570</span>  <a class="code hl_function" href="#a73570c4d26bc98c4862a64d96859d09f">read_threads_query</a>(m, q, <span class="keyword">true</span>, 0);</div>
<div class="line"><span class="lineno"> 1571</span>  mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#a4f64263b206f43a6bf79de732b95b1a0">mtime</a>.tv_sec = <a class="code hl_function" href="mutt_2date_8c.html#ad1e6304a91c7b6f3c266a9b17c1740fe">mutt_date_now</a>();</div>
<div class="line"><span class="lineno"> 1572</span>  mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#a4f64263b206f43a6bf79de732b95b1a0">mtime</a>.tv_nsec = 0;</div>
<div class="line"><span class="lineno"> 1573</span>  rc = 0;</div>
<div class="line"><span class="lineno"> 1574</span> </div>
<div class="line"><span class="lineno"> 1575</span>  <span class="keywordflow">if</span> (m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> &gt; mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#a22d92645edc04adcf160739785f1704f">oldmsgcount</a>)</div>
<div class="line"><span class="lineno"> 1576</span>    <a class="code hl_function" href="core_2mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code hl_enumvalue" href="core_2mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a>);</div>
<div class="line"><span class="lineno"> 1577</span>done:</div>
<div class="line"><span class="lineno"> 1578</span>  <span class="keywordflow">if</span> (q)</div>
<div class="line"><span class="lineno"> 1579</span>    notmuch_query_destroy(q);</div>
<div class="line"><span class="lineno"> 1580</span> </div>
<div class="line"><span class="lineno"> 1581</span>  <a class="code hl_function" href="notmuch_2db_8c.html#ab42f2a23cdaa9f6c5653fa7e9f9a8911">nm_db_release</a>(m);</div>
<div class="line"><span class="lineno"> 1582</span> </div>
<div class="line"><span class="lineno"> 1583</span>  <span class="keywordflow">if</span> (m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> == mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#a22d92645edc04adcf160739785f1704f">oldmsgcount</a>)</div>
<div class="line"><span class="lineno"> 1584</span>    <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No more messages in the thread&quot;</span>));</div>
<div class="line"><span class="lineno"> 1585</span> </div>
<div class="line"><span class="lineno"> 1586</span>  mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#a22d92645edc04adcf160739785f1704f">oldmsgcount</a> = 0;</div>
<div class="line"><span class="lineno"> 1587</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: reading entire-thread messages... done [rc=%d, count=%d]\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1588</span>             rc, m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>);</div>
<div class="line"><span class="lineno"> 1589</span>  <a class="code hl_function" href="progress_2lib_8h.html#ab4c7a63427cdcaae2b1147ff6f010af4">progress_free</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structNmMboxData.html#a4b076b009cfbd704791dcb517c7e9edf">progress</a>);</div>
<div class="line"><span class="lineno"> 1590</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1591</span>}</div>
<div class="ttc" id="abuffer_8c_html_a02123807d31181ac701b566226e93b33"><div class="ttname"><a href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a></div><div class="ttdeci">int buf_printf(struct Buffer *buf, const char *fmt,...)</div><div class="ttdoc">Format a string overwriting a Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00161">buffer.c:161</a></div></div>
<div class="ttc" id="acore_2mailbox_8c_html_af09ac36728ca3255523cd3b0bfd1f172"><div class="ttname"><a href="core_2mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a></div><div class="ttdeci">void mailbox_changed(struct Mailbox *m, enum NotifyMailbox action)</div><div class="ttdoc">Notify observers of a change to a Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8c_source.html#l00231">mailbox.c:231</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a"><div class="ttname"><a href="core_2mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a></div><div class="ttdeci">@ NT_MAILBOX_INVALID</div><div class="ttdoc">Email list was changed.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00180">mailbox.h:180</a></div></div>
<div class="ttc" id="amutt_2date_8c_html_ad1e6304a91c7b6f3c266a9b17c1740fe"><div class="ttname"><a href="mutt_2date_8c.html#ad1e6304a91c7b6f3c266a9b17c1740fe">mutt_date_now</a></div><div class="ttdeci">time_t mutt_date_now(void)</div><div class="ttdoc">Return the number of seconds since the Unix epoch.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2date_8c_source.html#l00455">date.c:455</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a5ea2e0203ec9a6bf6c9d346d7178c9da"><div class="ttname"><a href="#a5ea2e0203ec9a6bf6c9d346d7178c9da">get_nm_message</a></div><div class="ttdeci">static notmuch_message_t * get_nm_message(notmuch_database_t *db, struct Email *e)</div><div class="ttdoc">Find a Notmuch message.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l01069">notmuch.c:1069</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a73570c4d26bc98c4862a64d96859d09f"><div class="ttname"><a href="#a73570c4d26bc98c4862a64d96859d09f">read_threads_query</a></div><div class="ttdeci">static bool read_threads_query(struct Mailbox *m, notmuch_query_t *q, bool dedup, int limit)</div><div class="ttdoc">Perform a query with threads.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l01032">notmuch.c:1032</a></div></div>
<div class="ttc" id="anotmuch_8c_html_ae623124dfaf26d5005567bda66b288ff"><div class="ttname"><a href="#ae623124dfaf26d5005567bda66b288ff">progress_setup</a></div><div class="ttdeci">static void progress_setup(struct Mailbox *m)</div><div class="ttdoc">Set up the Progress Bar.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00700">notmuch.c:700</a></div></div>
<div class="ttc" id="aprogress_2lib_8h_html_ab4c7a63427cdcaae2b1147ff6f010af4"><div class="ttname"><a href="progress_2lib_8h.html#ab4c7a63427cdcaae2b1147ff6f010af4">progress_free</a></div><div class="ttdeci">void progress_free(struct Progress **ptr)</div><div class="ttdoc">Free a Progress Bar.</div><div class="ttdef"><b>Definition</b> <a href="progress_8c_source.html#l00110">progress.c:110</a></div></div>
<div class="ttc" id="astructNmMboxData_html_a22d92645edc04adcf160739785f1704f"><div class="ttname"><a href="structNmMboxData.html#a22d92645edc04adcf160739785f1704f">NmMboxData::oldmsgcount</a></div><div class="ttdeci">int oldmsgcount</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8h_source.html#l00042">mdata.h:42</a></div></div>
<div class="ttc" id="astructNmMboxData_html_a4b076b009cfbd704791dcb517c7e9edf"><div class="ttname"><a href="structNmMboxData.html#a4b076b009cfbd704791dcb517c7e9edf">NmMboxData::progress</a></div><div class="ttdeci">struct Progress * progress</div><div class="ttdoc">A progress bar.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8h_source.html#l00041">mdata.h:41</a></div></div>
<div class="ttc" id="astructNmMboxData_html_a4f64263b206f43a6bf79de732b95b1a0"><div class="ttname"><a href="structNmMboxData.html#a4f64263b206f43a6bf79de732b95b1a0">NmMboxData::mtime</a></div><div class="ttdeci">struct timespec mtime</div><div class="ttdoc">Time Mailbox was last changed.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_2mdata_8h_source.html#l00044">mdata.h:44</a></div></div>
</div><!-- fragment --><div id="dynsection-79" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-79-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-79-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-79-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a8ac57cce7f11e7ce9b485d9fce4c2975_cgraph.svg" width="531" height="755"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-80" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-80-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-80-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-80-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a8ac57cce7f11e7ce9b485d9fce4c2975_icgraph.svg" width="388" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="abe4e03790339e376de7c1cd92eb1bdef" name="abe4e03790339e376de7c1cd92eb1bdef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe4e03790339e376de7c1cd92eb1bdef">&#9670;&#160;</a></span>nm_url_from_query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * nm_url_from_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>buflen</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn a query into a URL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">buf</td><td><a class="el" href="structBuffer.html" title="String manipulation buffer.">Buffer</a> for URL </td></tr>
    <tr><td class="paramname">buflen</td><td>Length of buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Query as a URL </td></tr>
    <tr><td class="paramname">NULL</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01601">1601</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1602</span>{</div>
<div class="line"><span class="lineno"> 1603</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;(%s)\n&quot;</span>, buf);</div>
<div class="line"><span class="lineno"> 1604</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno"> 1605</span>  <span class="keywordtype">char</span> url[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a> + 1024 + 32]; <span class="comment">/* path to DB + query + URL &quot;decoration&quot; */</span></div>
<div class="line"><span class="lineno"> 1606</span>  <span class="keywordtype">int</span> added;</div>
<div class="line"><span class="lineno"> 1607</span>  <span class="keywordtype">bool</span> using_default_data = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1608</span> </div>
<div class="line"><span class="lineno"> 1609</span>  <span class="comment">// No existing data. Try to get a default NmMboxData.</span></div>
<div class="line"><span class="lineno"> 1610</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1611</span>  {</div>
<div class="line"><span class="lineno"> 1612</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="#a8920fc52f45278586c66a02808a648c8">nm_get_default_data</a>();</div>
<div class="line"><span class="lineno"> 1613</span> </div>
<div class="line"><span class="lineno"> 1614</span>    <span class="comment">// Failed to get default data.</span></div>
<div class="line"><span class="lineno"> 1615</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1616</span>      <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1617</span> </div>
<div class="line"><span class="lineno"> 1618</span>    using_default_data = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1619</span>  }</div>
<div class="line"><span class="lineno"> 1620</span> </div>
<div class="line"><span class="lineno"> 1621</span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="query_8h.html#a7653053ec8dc38d5dd26401163bb1276">NmQueryType</a> <a class="code hl_variable" href="structNmMboxData.html#a8851650d8d08c3490375ea41f4fe39d8">query_type</a> = <a class="code hl_function" href="query_8c.html#a005246432ee7301cb450cbc25cf9f71a">nm_string_to_query_type</a>(</div>
<div class="line"><span class="lineno"> 1622</span>      <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_type&quot;</span>));</div>
<div class="line"><span class="lineno"> 1623</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;query_type = <a class="code hl_function" href="query_8c.html#a7c8f2d72bb41622d977924b859e69699">nm_parse_type_from_query</a>(buf, <a class="code hl_variable" href="structNmMboxData.html#a8851650d8d08c3490375ea41f4fe39d8">query_type</a>);</div>
<div class="line"><span class="lineno"> 1624</span> </div>
<div class="line"><span class="lineno"> 1625</span>  <span class="keyword">const</span> <span class="keywordtype">short</span> c_nm_db_limit = <a class="code hl_function" href="config_2helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_db_limit&quot;</span>);</div>
<div class="line"><span class="lineno"> 1626</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="#a686a65345db081f8d66accfc760e909b">get_limit</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>) == c_nm_db_limit)</div>
<div class="line"><span class="lineno"> 1627</span>  {</div>
<div class="line"><span class="lineno"> 1628</span>    added = snprintf(url, <span class="keyword">sizeof</span>(url), <span class="stringliteral">&quot;%s%s?type=%s&amp;query=&quot;</span>, <a class="code hl_variable" href="#af3142ba8f1a45d56da0e74227b5ccdb4">NmUrlProtocol</a>,</div>
<div class="line"><span class="lineno"> 1629</span>                     <a class="code hl_function" href="notmuch_2db_8c.html#a819879f52559c6d1d4fc687a2ecea5b6">nm_db_get_filename</a>(m), <a class="code hl_function" href="query_8c.html#aa8566f979f8e4f4e506b77f35752cc96">nm_query_type_to_string</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;query_type));</div>
<div class="line"><span class="lineno"> 1630</span>  }</div>
<div class="line"><span class="lineno"> 1631</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1632</span>  {</div>
<div class="line"><span class="lineno"> 1633</span>    added = snprintf(url, <span class="keyword">sizeof</span>(url), <span class="stringliteral">&quot;%s%s?type=%s&amp;limit=%d&amp;query=&quot;</span>, <a class="code hl_variable" href="#af3142ba8f1a45d56da0e74227b5ccdb4">NmUrlProtocol</a>,</div>
<div class="line"><span class="lineno"> 1634</span>                     <a class="code hl_function" href="notmuch_2db_8c.html#a819879f52559c6d1d4fc687a2ecea5b6">nm_db_get_filename</a>(m),</div>
<div class="line"><span class="lineno"> 1635</span>                     <a class="code hl_function" href="query_8c.html#aa8566f979f8e4f4e506b77f35752cc96">nm_query_type_to_string</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;query_type), <a class="code hl_function" href="#a686a65345db081f8d66accfc760e909b">get_limit</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>));</div>
<div class="line"><span class="lineno"> 1636</span>  }</div>
<div class="line"><span class="lineno"> 1637</span> </div>
<div class="line"><span class="lineno"> 1638</span>  <span class="keywordflow">if</span> (added &gt;= <span class="keyword">sizeof</span>(url))</div>
<div class="line"><span class="lineno"> 1639</span>  {</div>
<div class="line"><span class="lineno"> 1640</span>    <span class="comment">// snprintf output was truncated, so can&#39;t create URL</span></div>
<div class="line"><span class="lineno"> 1641</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1642</span>  }</div>
<div class="line"><span class="lineno"> 1643</span> </div>
<div class="line"><span class="lineno"> 1644</span>  <a class="code hl_function" href="url_8c.html#ad489a551217fd22a942ae19d009f3342">url_pct_encode</a>(&amp;url[added], <span class="keyword">sizeof</span>(url) - added, buf);</div>
<div class="line"><span class="lineno"> 1645</span> </div>
<div class="line"><span class="lineno"> 1646</span>  <a class="code hl_function" href="mutt_2string_8c.html#ad20e00309de897a1e882fc7400335b83">mutt_str_copy</a>(buf, url, buflen);</div>
<div class="line"><span class="lineno"> 1647</span>  buf[buflen - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 1648</span> </div>
<div class="line"><span class="lineno"> 1649</span>  <span class="keywordflow">if</span> (using_default_data)</div>
<div class="line"><span class="lineno"> 1650</span>    <a class="code hl_function" href="group__mailbox__mdata__free.html#ga2b2dbfa2b1f60e776e9bc6371e08ba37">nm_mdata_free</a>((<span class="keywordtype">void</span> **) &amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>);</div>
<div class="line"><span class="lineno"> 1651</span> </div>
<div class="line"><span class="lineno"> 1652</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: url from query &#39;%s&#39;\n&quot;</span>, buf);</div>
<div class="line"><span class="lineno"> 1653</span>  <span class="keywordflow">return</span> buf;</div>
<div class="line"><span class="lineno"> 1654</span>}</div>
<div class="ttc" id="anotmuch_8c_html_a8920fc52f45278586c66a02808a648c8"><div class="ttname"><a href="#a8920fc52f45278586c66a02808a648c8">nm_get_default_data</a></div><div class="ttdeci">static struct NmMboxData * nm_get_default_data(void)</div><div class="ttdoc">Create a Mailbox with default Notmuch settings.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00177">notmuch.c:177</a></div></div>
<div class="ttc" id="anotmuch_8c_html_af3142ba8f1a45d56da0e74227b5ccdb4"><div class="ttname"><a href="#af3142ba8f1a45d56da0e74227b5ccdb4">NmUrlProtocol</a></div><div class="ttdeci">const char NmUrlProtocol[]</div><div class="ttdoc">Protocol string for Notmuch URLs.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00102">notmuch.c:102</a></div></div>
<div class="ttc" id="aquery_8c_html_a7c8f2d72bb41622d977924b859e69699"><div class="ttname"><a href="query_8c.html#a7c8f2d72bb41622d977924b859e69699">nm_parse_type_from_query</a></div><div class="ttdeci">enum NmQueryType nm_parse_type_from_query(char *buf, enum NmQueryType fallback)</div><div class="ttdoc">Parse a query type out of a query.</div><div class="ttdef"><b>Definition</b> <a href="query_8c_source.html#l00049">query.c:49</a></div></div>
<div class="ttc" id="aquery_8c_html_aa8566f979f8e4f4e506b77f35752cc96"><div class="ttname"><a href="query_8c.html#aa8566f979f8e4f4e506b77f35752cc96">nm_query_type_to_string</a></div><div class="ttdeci">const char * nm_query_type_to_string(enum NmQueryType query_type)</div><div class="ttdoc">Turn a query type into a string.</div><div class="ttdef"><b>Definition</b> <a href="query_8c_source.html#l00096">query.c:96</a></div></div>
<div class="ttc" id="aquery_8h_html_a7653053ec8dc38d5dd26401163bb1276"><div class="ttname"><a href="query_8h.html#a7653053ec8dc38d5dd26401163bb1276">NmQueryType</a></div><div class="ttdeci">NmQueryType</div><div class="ttdoc">Notmuch Query Types.</div><div class="ttdef"><b>Definition</b> <a href="query_8h_source.html#l00034">query.h:35</a></div></div>
<div class="ttc" id="aurl_8c_html_ad489a551217fd22a942ae19d009f3342"><div class="ttname"><a href="url_8c.html#ad489a551217fd22a942ae19d009f3342">url_pct_encode</a></div><div class="ttdeci">void url_pct_encode(char *buf, size_t buflen, const char *src)</div><div class="ttdoc">Percent-encode a string.</div><div class="ttdef"><b>Definition</b> <a href="url_8c_source.html#l00151">url.c:151</a></div></div>
</div><!-- fragment --><div id="dynsection-81" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-81-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-81-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-81-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_abe4e03790339e376de7c1cd92eb1bdef_cgraph.svg" width="552" height="640"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-82" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-82-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-82-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-82-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_abe4e03790339e376de7c1cd92eb1bdef_icgraph.svg" width="374" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aae60593aef46b9214e075f66103c956c" name="aae60593aef46b9214e075f66103c956c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae60593aef46b9214e075f66103c956c">&#9670;&#160;</a></span>nm_query_window_available()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool nm_query_window_available </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Are windowed queries enabled for use? </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Windowed queries in use </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01660">1660</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1661</span>{</div>
<div class="line"><span class="lineno"> 1662</span>  <span class="keyword">const</span> <span class="keywordtype">short</span> c_nm_query_window_duration = <a class="code hl_function" href="config_2helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_duration&quot;</span>);</div>
<div class="line"><span class="lineno"> 1663</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_nm_query_window_enable = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_enable&quot;</span>);</div>
<div class="line"><span class="lineno"> 1664</span> </div>
<div class="line"><span class="lineno"> 1665</span>  <span class="keywordflow">return</span> c_nm_query_window_enable || (c_nm_query_window_duration &gt; 0);</div>
<div class="line"><span class="lineno"> 1666</span>}</div>
</div><!-- fragment --><div id="dynsection-83" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-83-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-83-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-83-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aae60593aef46b9214e075f66103c956c_cgraph.svg" width="392" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-84" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-84-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-84-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-84-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aae60593aef46b9214e075f66103c956c_icgraph.svg" width="448" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aea5430205d9c6c6cb5b5a71ff740fddb" name="aea5430205d9c6c6cb5b5a71ff740fddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea5430205d9c6c6cb5b5a71ff740fddb">&#9670;&#160;</a></span>nm_query_window_forward()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_query_window_forward </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to move the current search window forward in time. </p>
<p>Updates <code>nm_query_window_current_position</code> by decrementing it by 1, or does nothing if the current window already is set to 0.</p>
<p>The lower the value of <code>nm_query_window_current_position</code> is, the more recent the result will be. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01677">1677</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1678</span>{</div>
<div class="line"><span class="lineno"> 1679</span>  <span class="keyword">const</span> <span class="keywordtype">short</span> c_nm_query_window_current_position = <a class="code hl_function" href="config_2helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_current_position&quot;</span>);</div>
<div class="line"><span class="lineno"> 1680</span>  <span class="keywordflow">if</span> (c_nm_query_window_current_position != 0)</div>
<div class="line"><span class="lineno"> 1681</span>  {</div>
<div class="line"><span class="lineno"> 1682</span>    <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_current_position&quot;</span>,</div>
<div class="line"><span class="lineno"> 1683</span>                             c_nm_query_window_current_position - 1, NULL);</div>
<div class="line"><span class="lineno"> 1684</span>  }</div>
<div class="line"><span class="lineno"> 1685</span> </div>
<div class="line"><span class="lineno"> 1686</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;(%d)\n&quot;</span>, c_nm_query_window_current_position - 1);</div>
<div class="line"><span class="lineno"> 1687</span>}</div>
</div><!-- fragment --><div id="dynsection-85" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-85-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-85-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-85-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aea5430205d9c6c6cb5b5a71ff740fddb_cgraph.svg" width="424" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-86" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-86-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-86-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-86-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_aea5430205d9c6c6cb5b5a71ff740fddb_icgraph.svg" width="444" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a972d1267792a1d646ecf3bf49d38ce00" name="a972d1267792a1d646ecf3bf49d38ce00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a972d1267792a1d646ecf3bf49d38ce00">&#9670;&#160;</a></span>nm_query_window_backward()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_query_window_backward </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to move the current search window backward in time. </p>
<p>Updates <code>nm_query_window_current_position</code> by incrementing it by 1</p>
<p>The higher the value of <code>nm_query_window_current_position</code> is, the less recent the result will be. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01697">1697</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1698</span>{</div>
<div class="line"><span class="lineno"> 1699</span>  <span class="keyword">const</span> <span class="keywordtype">short</span> c_nm_query_window_current_position = <a class="code hl_function" href="config_2helpers_8c.html#a96039a9f8d37daad993ae7b490510339">cs_subset_number</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_current_position&quot;</span>);</div>
<div class="line"><span class="lineno"> 1700</span>  <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_current_position&quot;</span>,</div>
<div class="line"><span class="lineno"> 1701</span>                           c_nm_query_window_current_position + 1, NULL);</div>
<div class="line"><span class="lineno"> 1702</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;(%d)\n&quot;</span>, c_nm_query_window_current_position + 1);</div>
<div class="line"><span class="lineno"> 1703</span>}</div>
</div><!-- fragment --><div id="dynsection-87" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-87-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-87-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-87-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a972d1267792a1d646ecf3bf49d38ce00_cgraph.svg" width="432" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-88" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-88-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-88-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-88-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a972d1267792a1d646ecf3bf49d38ce00_icgraph.svg" width="454" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1a319609376f1dcd48dd3c75e7f75cf6" name="a1a319609376f1dcd48dd3c75e7f75cf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a319609376f1dcd48dd3c75e7f75cf6">&#9670;&#160;</a></span>nm_query_window_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_query_window_reset </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the vfolder window position to the present. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01708">1708</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1709</span>{</div>
<div class="line"><span class="lineno"> 1710</span>  <a class="code hl_function" href="subset_8c.html#a6ee598a96defed645b11cad6e6cb6512">cs_subset_str_native_set</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_query_window_current_position&quot;</span>, 0, NULL);</div>
<div class="line"><span class="lineno"> 1711</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;Reset nm_query_window_current_position to 0\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1712</span>}</div>
</div><!-- fragment --><div id="dynsection-89" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-89-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-89-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-89-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a1a319609376f1dcd48dd3c75e7f75cf6_cgraph.svg" width="407" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-90" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-90-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-90-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-90-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a1a319609376f1dcd48dd3c75e7f75cf6_icgraph.svg" width="428" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad84349cdd5669f38ce04692c048dcfc8" name="ad84349cdd5669f38ce04692c048dcfc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad84349cdd5669f38ce04692c048dcfc8">&#9670;&#160;</a></span>nm_message_is_still_queried()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool nm_message_is_still_queried </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is a message still visible in the query? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> is still in query </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01720">1720</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1721</span>{</div>
<div class="line"><span class="lineno"> 1722</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno"> 1723</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1724</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1725</span> </div>
<div class="line"><span class="lineno"> 1726</span>  notmuch_database_t *db = <a class="code hl_function" href="notmuch_2db_8c.html#a19b35f35a4315f940b355e3b6f776846">nm_db_get</a>(m, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1727</span>  <span class="keywordtype">char</span> *orig_str = <a class="code hl_function" href="#a03dd129a289f7f6abe0451cef4ee5ee1">get_query_string</a>(<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1728</span> </div>
<div class="line"><span class="lineno"> 1729</span>  <span class="keywordflow">if</span> (!db || !orig_str)</div>
<div class="line"><span class="lineno"> 1730</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1731</span> </div>
<div class="line"><span class="lineno"> 1732</span>  <span class="keywordtype">char</span> *new_str = NULL;</div>
<div class="line"><span class="lineno"> 1733</span>  <span class="keywordtype">bool</span> rc = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1734</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a4388c16988fac9a7596dee4d4af89595">mutt_str_asprintf</a>(&amp;new_str, <span class="stringliteral">&quot;id:%s and (%s)&quot;</span>, <a class="code hl_function" href="#a1f9c7fb1a77cbbd2a1e0e55a434ef7ac">email_get_id</a>(e), orig_str) &lt; 0)</div>
<div class="line"><span class="lineno"> 1735</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1736</span> </div>
<div class="line"><span class="lineno"> 1737</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: checking if message is still queried: %s\n&quot;</span>, new_str);</div>
<div class="line"><span class="lineno"> 1738</span> </div>
<div class="line"><span class="lineno"> 1739</span>  notmuch_query_t *q = notmuch_query_create(db, new_str);</div>
<div class="line"><span class="lineno"> 1740</span> </div>
<div class="line"><span class="lineno"> 1741</span>  <span class="keywordflow">switch</span> (<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;query_type)</div>
<div class="line"><span class="lineno"> 1742</span>  {</div>
<div class="line"><span class="lineno"> 1743</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="query_8h.html#a7653053ec8dc38d5dd26401163bb1276a314f23fbc20cfdb2e64b86f3b1631817">NM_QUERY_TYPE_UNKNOWN</a>: <span class="comment">// UNKNOWN should never occur, but MESGS is default</span></div>
<div class="line"><span class="lineno"> 1744</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="query_8h.html#a7653053ec8dc38d5dd26401163bb1276ad556837b89dfda3f049992f43620ece0">NM_QUERY_TYPE_MESGS</a>:</div>
<div class="line"><span class="lineno"> 1745</span>    {</div>
<div class="line"><span class="lineno"> 1746</span>      notmuch_messages_t *messages = <a class="code hl_function" href="#aef6aa22d4cc0a066fe9b9b428ab70f44">get_messages</a>(q);</div>
<div class="line"><span class="lineno"> 1747</span> </div>
<div class="line"><span class="lineno"> 1748</span>      <span class="keywordflow">if</span> (!messages)</div>
<div class="line"><span class="lineno"> 1749</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1750</span> </div>
<div class="line"><span class="lineno"> 1751</span>      rc = notmuch_messages_valid(messages);</div>
<div class="line"><span class="lineno"> 1752</span>      notmuch_messages_destroy(messages);</div>
<div class="line"><span class="lineno"> 1753</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1754</span>    }</div>
<div class="line"><span class="lineno"> 1755</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="query_8h.html#a7653053ec8dc38d5dd26401163bb1276a36c5648d27a123f04dd1cb459b5e02cc">NM_QUERY_TYPE_THREADS</a>:</div>
<div class="line"><span class="lineno"> 1756</span>    {</div>
<div class="line"><span class="lineno"> 1757</span>      notmuch_threads_t *threads = <a class="code hl_function" href="#a0256045c9befd9a5bf7ec50373f7b431">get_threads</a>(q);</div>
<div class="line"><span class="lineno"> 1758</span> </div>
<div class="line"><span class="lineno"> 1759</span>      <span class="keywordflow">if</span> (!threads)</div>
<div class="line"><span class="lineno"> 1760</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1761</span> </div>
<div class="line"><span class="lineno"> 1762</span>      rc = notmuch_threads_valid(threads);</div>
<div class="line"><span class="lineno"> 1763</span>      notmuch_threads_destroy(threads);</div>
<div class="line"><span class="lineno"> 1764</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1765</span>    }</div>
<div class="line"><span class="lineno"> 1766</span>  }</div>
<div class="line"><span class="lineno"> 1767</span> </div>
<div class="line"><span class="lineno"> 1768</span>  notmuch_query_destroy(q);</div>
<div class="line"><span class="lineno"> 1769</span> </div>
<div class="line"><span class="lineno"> 1770</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;nm: checking if message is still queried: %s = %s\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 1771</span>             new_str, rc ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><span class="lineno"> 1772</span> </div>
<div class="line"><span class="lineno"> 1773</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1774</span>}</div>
<div class="ttc" id="aquery_8h_html_a7653053ec8dc38d5dd26401163bb1276a314f23fbc20cfdb2e64b86f3b1631817"><div class="ttname"><a href="query_8h.html#a7653053ec8dc38d5dd26401163bb1276a314f23fbc20cfdb2e64b86f3b1631817">NM_QUERY_TYPE_UNKNOWN</a></div><div class="ttdeci">@ NM_QUERY_TYPE_UNKNOWN</div><div class="ttdoc">Unknown query type. Error in notmuch query.</div><div class="ttdef"><b>Definition</b> <a href="query_8h_source.html#l00038">query.h:38</a></div></div>
<div class="ttc" id="aquery_8h_html_a7653053ec8dc38d5dd26401163bb1276a36c5648d27a123f04dd1cb459b5e02cc"><div class="ttname"><a href="query_8h.html#a7653053ec8dc38d5dd26401163bb1276a36c5648d27a123f04dd1cb459b5e02cc">NM_QUERY_TYPE_THREADS</a></div><div class="ttdeci">@ NM_QUERY_TYPE_THREADS</div><div class="ttdoc">Whole threads.</div><div class="ttdef"><b>Definition</b> <a href="query_8h_source.html#l00037">query.h:37</a></div></div>
<div class="ttc" id="aquery_8h_html_a7653053ec8dc38d5dd26401163bb1276ad556837b89dfda3f049992f43620ece0"><div class="ttname"><a href="query_8h.html#a7653053ec8dc38d5dd26401163bb1276ad556837b89dfda3f049992f43620ece0">NM_QUERY_TYPE_MESGS</a></div><div class="ttdeci">@ NM_QUERY_TYPE_MESGS</div><div class="ttdoc">Default: Messages only.</div><div class="ttdef"><b>Definition</b> <a href="query_8h_source.html#l00036">query.h:36</a></div></div>
</div><!-- fragment --><div id="dynsection-91" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-91-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-91-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-91-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ad84349cdd5669f38ce04692c048dcfc8_cgraph.svg" width="331" height="360"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-92" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-92-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-92-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-92-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_ad84349cdd5669f38ce04692c048dcfc8_icgraph.svg" width="356" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a117bd16ebdde574564b14e737dc1349e" name="a117bd16ebdde574564b14e737dc1349e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a117bd16ebdde574564b14e737dc1349e">&#9670;&#160;</a></span>nm_update_filename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_update_filename </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>old_file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>new_file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the filename. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">old_file</td><td>Old filename </td></tr>
    <tr><td class="paramname">new_file</td><td>New filename </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01785">1785</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1787</span>{</div>
<div class="line"><span class="lineno"> 1788</span>  <span class="keywordtype">char</span> buf[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno"> 1789</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno"> 1790</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> || !new_file)</div>
<div class="line"><span class="lineno"> 1791</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1792</span> </div>
<div class="line"><span class="lineno"> 1793</span>  <span class="keywordflow">if</span> (!old_file &amp;&amp; <a class="code hl_function" href="notmuch_2edata_8c.html#a6f1508526644c430c650ac2678590635">nm_edata_get</a>(e))</div>
<div class="line"><span class="lineno"> 1794</span>  {</div>
<div class="line"><span class="lineno"> 1795</span>    <a class="code hl_function" href="#a286bd4e8384ba50b8a064d17ba211e12">email_get_fullpath</a>(e, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><span class="lineno"> 1796</span>    old_file = buf;</div>
<div class="line"><span class="lineno"> 1797</span>  }</div>
<div class="line"><span class="lineno"> 1798</span> </div>
<div class="line"><span class="lineno"> 1799</span>  <span class="keywordtype">int</span> rc = <a class="code hl_function" href="#a9007300d0a2336c11035d0d34f9458aa">rename_filename</a>(m, old_file, new_file, e);</div>
<div class="line"><span class="lineno"> 1800</span> </div>
<div class="line"><span class="lineno"> 1801</span>  <a class="code hl_function" href="notmuch_2db_8c.html#ab42f2a23cdaa9f6c5653fa7e9f9a8911">nm_db_release</a>(m);</div>
<div class="line"><span class="lineno"> 1802</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;mtime.tv_sec = <a class="code hl_function" href="mutt_2date_8c.html#ad1e6304a91c7b6f3c266a9b17c1740fe">mutt_date_now</a>();</div>
<div class="line"><span class="lineno"> 1803</span>  <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;mtime.tv_nsec = 0;</div>
<div class="line"><span class="lineno"> 1804</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1805</span>}</div>
<div class="ttc" id="anotmuch_8c_html_a9007300d0a2336c11035d0d34f9458aa"><div class="ttname"><a href="#a9007300d0a2336c11035d0d34f9458aa">rename_filename</a></div><div class="ttdeci">static int rename_filename(struct Mailbox *m, const char *old_file, const char *new_file, struct Email *e)</div><div class="ttdoc">Rename the file.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l01353">notmuch.c:1353</a></div></div>
</div><!-- fragment --><div id="dynsection-93" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-93-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-93-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-93-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a117bd16ebdde574564b14e737dc1349e_cgraph.svg" width="506" height="304"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-94" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-94-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-94-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-94-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a117bd16ebdde574564b14e737dc1349e_icgraph.svg" width="387" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7557b4c8c21bc1fe7da1730b0af70836" name="a7557b4c8c21bc1fe7da1730b0af70836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7557b4c8c21bc1fe7da1730b0af70836">&#9670;&#160;</a></span>get_default_mailbox()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structMailbox.html">Mailbox</a> * get_default_mailbox </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> for notmuch without any parameters. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> pointer </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01895">1895</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1896</span>{</div>
<div class="line"><span class="lineno"> 1897</span>  <span class="comment">// Create a new notmuch mailbox from scratch and add plumbing for DB access.</span></div>
<div class="line"><span class="lineno"> 1898</span>  <span class="keywordtype">char</span> *default_url = <a class="code hl_function" href="#a0ee14876a4916eff9cbdd7678abce919">nm_get_default_url</a>();</div>
<div class="line"><span class="lineno"> 1899</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMailbox.html">Mailbox</a> *m = <a class="code hl_function" href="mx_8c.html#addbeb100364d5be4dd89b74ac73ef067">mx_path_resolve</a>(default_url);</div>
<div class="line"><span class="lineno"> 1900</span> </div>
<div class="line"><span class="lineno"> 1901</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;default_url);</div>
<div class="line"><span class="lineno"> 1902</span> </div>
<div class="line"><span class="lineno"> 1903</span>  <span class="comment">// These are no-ops for an initialized mailbox.</span></div>
<div class="line"><span class="lineno"> 1904</span>  <a class="code hl_function" href="#a49be0897f8fb6c33c74a838b83f4ed46">init_mailbox</a>(m);</div>
<div class="line"><span class="lineno"> 1905</span>  <a class="code hl_function" href="mx_8c.html#ac32b635494a705cc5828b7686b910834">mx_mbox_ac_link</a>(m);</div>
<div class="line"><span class="lineno"> 1906</span> </div>
<div class="line"><span class="lineno"> 1907</span>  <span class="keywordflow">return</span> m;</div>
<div class="line"><span class="lineno"> 1908</span>}</div>
<div class="ttc" id="amx_8c_html_ac32b635494a705cc5828b7686b910834"><div class="ttname"><a href="mx_8c.html#ac32b635494a705cc5828b7686b910834">mx_mbox_ac_link</a></div><div class="ttdeci">bool mx_mbox_ac_link(struct Mailbox *m)</div><div class="ttdoc">Link a Mailbox to an existing or new Account.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l00251">mx.c:251</a></div></div>
<div class="ttc" id="amx_8c_html_addbeb100364d5be4dd89b74ac73ef067"><div class="ttname"><a href="mx_8c.html#addbeb100364d5be4dd89b74ac73ef067">mx_path_resolve</a></div><div class="ttdeci">struct Mailbox * mx_path_resolve(const char *path)</div><div class="ttdoc">Get a Mailbox for a path.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l01650">mx.c:1650</a></div></div>
<div class="ttc" id="anotmuch_8c_html_a49be0897f8fb6c33c74a838b83f4ed46"><div class="ttname"><a href="#a49be0897f8fb6c33c74a838b83f4ed46">init_mailbox</a></div><div class="ttdeci">static int init_mailbox(struct Mailbox *m)</div><div class="ttdoc">Add Notmuch data to the Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l00200">notmuch.c:200</a></div></div>
<div class="ttc" id="astructMailbox_html"><div class="ttname"><a href="structMailbox.html">Mailbox</a></div><div class="ttdoc">A mailbox.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00078">mailbox.h:79</a></div></div>
</div><!-- fragment --><div id="dynsection-95" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-95-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-95-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-95-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a7557b4c8c21bc1fe7da1730b0af70836_cgraph.svg" width="347" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-96" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-96-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-96-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-96-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a7557b4c8c21bc1fe7da1730b0af70836_icgraph.svg" width="354" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a76a97a39757a2e0441d23eab1ba5a221" name="a76a97a39757a2e0441d23eab1ba5a221"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76a97a39757a2e0441d23eab1ba5a221">&#9670;&#160;</a></span>nm_record_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_record_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a message to the Notmuch database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">path</td><td>Path of the email </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l01918">1918</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1919</span>{</div>
<div class="line"><span class="lineno"> 1920</span>  notmuch_database_t *db = NULL;</div>
<div class="line"><span class="lineno"> 1921</span>  notmuch_status_t st;</div>
<div class="line"><span class="lineno"> 1922</span>  notmuch_message_t *msg = NULL;</div>
<div class="line"><span class="lineno"> 1923</span>  <span class="keywordtype">int</span> rc = -1;</div>
<div class="line"><span class="lineno"> 1924</span> </div>
<div class="line"><span class="lineno"> 1925</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno"> 1926</span> </div>
<div class="line"><span class="lineno"> 1927</span>  <span class="comment">// If no notmuch data, fall back to the default mailbox.</span></div>
<div class="line"><span class="lineno"> 1928</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno"> 1929</span>  <span class="comment">// IMPORTANT: DO NOT FREE THIS MAILBOX. Two reasons:</span></div>
<div class="line"><span class="lineno"> 1930</span>  <span class="comment">// 1) If user has default mailbox in config, we&#39;ll be removing it. That&#39;s not</span></div>
<div class="line"><span class="lineno"> 1931</span>  <span class="comment">//    good program behavior!</span></div>
<div class="line"><span class="lineno"> 1932</span>  <span class="comment">// 2) If not in user&#39;s config, keep mailbox around for future nm_record calls.</span></div>
<div class="line"><span class="lineno"> 1933</span>  <span class="comment">//    It saves NeoMutt from allocating/deallocating repeatedly.</span></div>
<div class="line"><span class="lineno"> 1934</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 1935</span>  {</div>
<div class="line"><span class="lineno"> 1936</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: non-nm mailbox. trying the default nm mailbox.\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1937</span>    m = <a class="code hl_function" href="#a7557b4c8c21bc1fe7da1730b0af70836">get_default_mailbox</a>();</div>
<div class="line"><span class="lineno"> 1938</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno"> 1939</span>  }</div>
<div class="line"><span class="lineno"> 1940</span> </div>
<div class="line"><span class="lineno"> 1941</span>  <span class="keywordflow">if</span> (!path || !<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> || (access(path, F_OK) != 0))</div>
<div class="line"><span class="lineno"> 1942</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1943</span>  db = <a class="code hl_function" href="notmuch_2db_8c.html#a19b35f35a4315f940b355e3b6f776846">nm_db_get</a>(m, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1944</span>  <span class="keywordflow">if</span> (!db)</div>
<div class="line"><span class="lineno"> 1945</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1946</span> </div>
<div class="line"><span class="lineno"> 1947</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: record message: %s\n&quot;</span>, path);</div>
<div class="line"><span class="lineno"> 1948</span>  <span class="keywordtype">int</span> trans = <a class="code hl_function" href="notmuch_2db_8c.html#a225b816f7deae709b7f98ed856eec996">nm_db_trans_begin</a>(m);</div>
<div class="line"><span class="lineno"> 1949</span>  <span class="keywordflow">if</span> (trans &lt; 0)</div>
<div class="line"><span class="lineno"> 1950</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1951</span> </div>
<div class="line"><span class="lineno"> 1952</span><span class="preprocessor">#if LIBNOTMUCH_CHECK_VERSION(5, 1, 0)</span></div>
<div class="line"><span class="lineno"> 1953</span>  st = notmuch_database_index_file(db, path, NULL, &amp;msg);</div>
<div class="line"><span class="lineno"> 1954</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1955</span>  st = notmuch_database_add_message(db, path, &amp;msg);</div>
<div class="line"><span class="lineno"> 1956</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1957</span> </div>
<div class="line"><span class="lineno"> 1958</span>  <span class="keywordflow">if</span> ((st != NOTMUCH_STATUS_SUCCESS) &amp;&amp; (st != NOTMUCH_STATUS_DUPLICATE_MESSAGE_ID))</div>
<div class="line"><span class="lineno"> 1959</span>  {</div>
<div class="line"><span class="lineno"> 1960</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: failed to add &#39;%s&#39; [st=%d]\n&quot;</span>, path, (<span class="keywordtype">int</span>) st);</div>
<div class="line"><span class="lineno"> 1961</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 1962</span>  }</div>
<div class="line"><span class="lineno"> 1963</span> </div>
<div class="line"><span class="lineno"> 1964</span>  <span class="keywordflow">if</span> ((st == NOTMUCH_STATUS_SUCCESS) &amp;&amp; msg)</div>
<div class="line"><span class="lineno"> 1965</span>  {</div>
<div class="line"><span class="lineno"> 1966</span>    notmuch_message_maildir_flags_to_tags(msg);</div>
<div class="line"><span class="lineno"> 1967</span>    <span class="keywordflow">if</span> (e)</div>
<div class="line"><span class="lineno"> 1968</span>    {</div>
<div class="line"><span class="lineno"> 1969</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *tags = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 1970</span>      <a class="code hl_function" href="tags_8c.html#a84a6cef08d4ce584c9f1f89ac9d41f2d">driver_tags_get</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#aaa992628043f7a89ba87b8ce24f8c1b1">tags</a>, tags);</div>
<div class="line"><span class="lineno"> 1971</span>      <a class="code hl_function" href="#ab368ac6da1bfee09880e51942edb79ab">update_tags</a>(msg, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(tags));</div>
<div class="line"><span class="lineno"> 1972</span>      <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;tags);</div>
<div class="line"><span class="lineno"> 1973</span>    }</div>
<div class="line"><span class="lineno"> 1974</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_nm_record_tags = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;nm_record_tags&quot;</span>);</div>
<div class="line"><span class="lineno"> 1975</span>    <span class="keywordflow">if</span> (c_nm_record_tags)</div>
<div class="line"><span class="lineno"> 1976</span>      <a class="code hl_function" href="#ab368ac6da1bfee09880e51942edb79ab">update_tags</a>(msg, c_nm_record_tags);</div>
<div class="line"><span class="lineno"> 1977</span>  }</div>
<div class="line"><span class="lineno"> 1978</span> </div>
<div class="line"><span class="lineno"> 1979</span>  rc = 0;</div>
<div class="line"><span class="lineno"> 1980</span>done:</div>
<div class="line"><span class="lineno"> 1981</span>  <span class="keywordflow">if</span> (msg)</div>
<div class="line"><span class="lineno"> 1982</span>    notmuch_message_destroy(msg);</div>
<div class="line"><span class="lineno"> 1983</span>  <span class="keywordflow">if</span> (trans == 1)</div>
<div class="line"><span class="lineno"> 1984</span>    <a class="code hl_function" href="notmuch_2db_8c.html#afc7d9b81a6379ea5d80b84af5128b66d">nm_db_trans_end</a>(m);</div>
<div class="line"><span class="lineno"> 1985</span> </div>
<div class="line"><span class="lineno"> 1986</span>  <a class="code hl_function" href="notmuch_2db_8c.html#ab42f2a23cdaa9f6c5653fa7e9f9a8911">nm_db_release</a>(m);</div>
<div class="line"><span class="lineno"> 1987</span> </div>
<div class="line"><span class="lineno"> 1988</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1989</span>}</div>
<div class="ttc" id="anotmuch_8c_html_a7557b4c8c21bc1fe7da1730b0af70836"><div class="ttname"><a href="#a7557b4c8c21bc1fe7da1730b0af70836">get_default_mailbox</a></div><div class="ttdeci">static struct Mailbox * get_default_mailbox(void)</div><div class="ttdoc">Get Mailbox for notmuch without any parameters.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l01895">notmuch.c:1895</a></div></div>
</div><!-- fragment --><div id="dynsection-97" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-97-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-97-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-97-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a76a97a39757a2e0441d23eab1ba5a221_cgraph.svg" width="354" height="651"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-98" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-98-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-98-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-98-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a76a97a39757a2e0441d23eab1ba5a221_icgraph.svg" width="356" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a424ba19f36b097c879ff65793c8ef1d9" name="a424ba19f36b097c879ff65793c8ef1d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a424ba19f36b097c879ff65793c8ef1d9">&#9670;&#160;</a></span>nm_get_all_tags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_get_all_tags </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **</td>          <td class="paramname"><span class="paramname"><em>tag_list</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>tag_count</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill a list with all notmuch tags. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tag_list</td><td>List of tags </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tag_count</td><td>Number of tags </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<p>If tag_list is NULL, just count the tags. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l02001">2001</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2002</span>{</div>
<div class="line"><span class="lineno"> 2003</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structNmMboxData.html">NmMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="notmuch_2mdata_8c.html#a8906852e9cd707fc4e4fb61a264799dc">nm_mdata_get</a>(m);</div>
<div class="line"><span class="lineno"> 2004</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno"> 2005</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 2006</span> </div>
<div class="line"><span class="lineno"> 2007</span>  notmuch_database_t *db = NULL;</div>
<div class="line"><span class="lineno"> 2008</span>  notmuch_tags_t *tags = NULL;</div>
<div class="line"><span class="lineno"> 2009</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *tag = NULL;</div>
<div class="line"><span class="lineno"> 2010</span>  <span class="keywordtype">int</span> rc = -1;</div>
<div class="line"><span class="lineno"> 2011</span> </div>
<div class="line"><span class="lineno"> 2012</span>  <span class="keywordflow">if</span> (!(db = <a class="code hl_function" href="notmuch_2db_8c.html#a19b35f35a4315f940b355e3b6f776846">nm_db_get</a>(m, <span class="keyword">false</span>)) || !(tags = notmuch_database_get_all_tags(db)))</div>
<div class="line"><span class="lineno"> 2013</span>    <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno"> 2014</span> </div>
<div class="line"><span class="lineno"> 2015</span>  *tag_count = 0;</div>
<div class="line"><span class="lineno"> 2016</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: get all tags\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 2017</span> </div>
<div class="line"><span class="lineno"> 2018</span>  <span class="keywordflow">while</span> (notmuch_tags_valid(tags))</div>
<div class="line"><span class="lineno"> 2019</span>  {</div>
<div class="line"><span class="lineno"> 2020</span>    tag = notmuch_tags_get(tags);</div>
<div class="line"><span class="lineno"> 2021</span>    <span class="comment">/* Skip empty string */</span></div>
<div class="line"><span class="lineno"> 2022</span>    <span class="keywordflow">if</span> (*tag)</div>
<div class="line"><span class="lineno"> 2023</span>    {</div>
<div class="line"><span class="lineno"> 2024</span>      <span class="keywordflow">if</span> (tag_list)</div>
<div class="line"><span class="lineno"> 2025</span>        tag_list[*tag_count] = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(tag);</div>
<div class="line"><span class="lineno"> 2026</span>      (*tag_count)++;</div>
<div class="line"><span class="lineno"> 2027</span>    }</div>
<div class="line"><span class="lineno"> 2028</span>    notmuch_tags_move_to_next(tags);</div>
<div class="line"><span class="lineno"> 2029</span>  }</div>
<div class="line"><span class="lineno"> 2030</span> </div>
<div class="line"><span class="lineno"> 2031</span>  rc = 0;</div>
<div class="line"><span class="lineno"> 2032</span>done:</div>
<div class="line"><span class="lineno"> 2033</span>  <span class="keywordflow">if</span> (tags)</div>
<div class="line"><span class="lineno"> 2034</span>    notmuch_tags_destroy(tags);</div>
<div class="line"><span class="lineno"> 2035</span> </div>
<div class="line"><span class="lineno"> 2036</span>  <a class="code hl_function" href="notmuch_2db_8c.html#ab42f2a23cdaa9f6c5653fa7e9f9a8911">nm_db_release</a>(m);</div>
<div class="line"><span class="lineno"> 2037</span> </div>
<div class="line"><span class="lineno"> 2038</span>  <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;nm: get all tags done [rc=%d tag_count=%u]\n&quot;</span>, rc, *tag_count);</div>
<div class="line"><span class="lineno"> 2039</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 2040</span>}</div>
</div><!-- fragment --><div id="dynsection-99" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-99-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-99-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-99-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a424ba19f36b097c879ff65793c8ef1d9_cgraph.svg" width="292" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-100" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-100-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-100-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-100-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="notmuch_8c_a424ba19f36b097c879ff65793c8ef1d9_icgraph.svg" width="335" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a76c06f932aaddfae70f3c651c6974f71" name="a76c06f932aaddfae70f3c651c6974f71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76c06f932aaddfae70f3c651c6974f71">&#9670;&#160;</a></span>NmCommands</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structCommand.html">Command</a> NmCommands[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">  </div>
<div class="line">  { <span class="stringliteral">&quot;unvirtual-mailboxes&quot;</span>, <a class="code hl_function" href="group__command__parse.html#gadfe990b71ece54cc2af3bdd1ad54db56">parse_unmailboxes</a>, 0 },</div>
<div class="line">  { <span class="stringliteral">&quot;virtual-mailboxes&quot;</span>,   <a class="code hl_function" href="group__command__parse.html#gaca1b80d2d539170d89d5f0b3461a0930">parse_mailboxes</a>,   <a class="code hl_define" href="commands_8h.html#a42342512fa552348848c86e0b402b508">MUTT_NAMED</a> },</div>
<div class="line">  { NULL, NULL, 0 },</div>
<div class="line">  </div>
<div class="line">}</div>
<div class="ttc" id="acommands_8h_html_a42342512fa552348848c86e0b402b508"><div class="ttname"><a href="commands_8h.html#a42342512fa552348848c86e0b402b508">MUTT_NAMED</a></div><div class="ttdeci">#define MUTT_NAMED</div><div class="ttdef"><b>Definition</b> <a href="commands_8h_source.html#l00036">commands.h:36</a></div></div>
<div class="ttc" id="agroup__command__parse_html_gaca1b80d2d539170d89d5f0b3461a0930"><div class="ttname"><a href="group__command__parse.html#gaca1b80d2d539170d89d5f0b3461a0930">parse_mailboxes</a></div><div class="ttdeci">enum CommandResult parse_mailboxes(const struct Command *cmd, struct Buffer *token, struct Buffer *line, struct Buffer *err)</div><div class="ttdoc">Parse the &#39;mailboxes&#39; command - Implements Command::parse() -.</div><div class="ttdef"><b>Definition</b> <a href="commands_8c_source.html#l00770">commands.c:770</a></div></div>
<div class="ttc" id="agroup__command__parse_html_gadfe990b71ece54cc2af3bdd1ad54db56"><div class="ttname"><a href="group__command__parse.html#gadfe990b71ece54cc2af3bdd1ad54db56">parse_unmailboxes</a></div><div class="ttdeci">enum CommandResult parse_unmailboxes(const struct Command *cmd, struct Buffer *token, struct Buffer *line, struct Buffer *err)</div><div class="ttdoc">Parse the &#39;unmailboxes&#39; command - Implements Command::parse() -.</div><div class="ttdef"><b>Definition</b> <a href="commands_8c_source.html#l01533">commands.c:1533</a></div></div>
</div><!-- fragment -->
<p>Notmuch Commands. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00093">93</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   93</span>                                           {</div>
<div class="line"><span class="lineno">   94</span>  <span class="comment">// clang-format off</span></div>
<div class="line"><span class="lineno">   95</span>  { <span class="stringliteral">&quot;unvirtual-mailboxes&quot;</span>, <a class="code hl_function" href="group__command__parse.html#gadfe990b71ece54cc2af3bdd1ad54db56">parse_unmailboxes</a>, 0 },</div>
<div class="line"><span class="lineno">   96</span>  { <span class="stringliteral">&quot;virtual-mailboxes&quot;</span>,   <a class="code hl_function" href="group__command__parse.html#gaca1b80d2d539170d89d5f0b3461a0930">parse_mailboxes</a>,   <a class="code hl_define" href="commands_8h.html#a42342512fa552348848c86e0b402b508">MUTT_NAMED</a> },</div>
<div class="line"><span class="lineno">   97</span>  { NULL, NULL, 0 },</div>
<div class="line"><span class="lineno">   98</span>  <span class="comment">// clang-format on</span></div>
<div class="line"><span class="lineno">   99</span>};</div>
</div><!-- fragment -->
</div>
</div>
<a id="af3142ba8f1a45d56da0e74227b5ccdb4" name="af3142ba8f1a45d56da0e74227b5ccdb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3142ba8f1a45d56da0e74227b5ccdb4">&#9670;&#160;</a></span>NmUrlProtocol</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char NmUrlProtocol[] = &quot;notmuch://&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Protocol string for Notmuch URLs. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00102">102</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>

</div>
</div>
<a id="a8ff34e2c5dba7a81ce5b877213be040f" name="a8ff34e2c5dba7a81ce5b877213be040f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ff34e2c5dba7a81ce5b877213be040f">&#9670;&#160;</a></span>NmUrlProtocolLen</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int NmUrlProtocolLen = sizeof(<a class="el" href="#af3142ba8f1a45d56da0e74227b5ccdb4">NmUrlProtocol</a>) - 1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Length of <a class="el" href="#af3142ba8f1a45d56da0e74227b5ccdb4" title="Protocol string for Notmuch URLs.">NmUrlProtocol</a> string. </p>

<p class="definition">Definition at line <a class="el" href="notmuch_8c_source.html#l00104">104</a> of file <a class="el" href="notmuch_8c_source.html">notmuch.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
