<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: maildir/mailbox.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2025-09-05-43-g177ed6</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('maildir_2mailbox_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">mailbox.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Maildir <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a>.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mutt_2lib_8h_source.html">mutt/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_2lib_8h_source.html">config/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="email_2lib_8h_source.html">email/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="maildir_2mailbox_8h_source.html">mailbox.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="progress_2lib_8h_source.html">progress/lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="maildir_2edata_8h_source.html">edata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hcache_8h_source.html">hcache.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="maildir_2mdata_8h_source.html">mdata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mdemail_8h_source.html">mdemail.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mx_8h_source.html">mx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="maildir_2shared_8h_source.html">shared.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="monitor_8h_source.html">monitor.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for mailbox.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c__incl.svg" width="1852" height="274"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="maildir_2mailbox_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa32d2f8315f63e8e0c4e6712f7317a6e" id="r_aa32d2f8315f63e8e0c4e6712f7317a6e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa32d2f8315f63e8e0c4e6712f7317a6e">MMC_NO_DIRS</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:aa32d2f8315f63e8e0c4e6712f7317a6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">No directories changed.  <br /></td></tr>
<tr class="separator:aa32d2f8315f63e8e0c4e6712f7317a6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab308421b848b9caed6fc2ac4612b1212" id="r_ab308421b848b9caed6fc2ac4612b1212"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab308421b848b9caed6fc2ac4612b1212">MMC_NEW_DIR</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr class="memdesc:ab308421b848b9caed6fc2ac4612b1212"><td class="mdescLeft">&#160;</td><td class="mdescRight">'new' directory changed  <br /></td></tr>
<tr class="separator:ab308421b848b9caed6fc2ac4612b1212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71970dc06915beff8deee456e5af5ee4" id="r_a71970dc06915beff8deee456e5af5ee4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a71970dc06915beff8deee456e5af5ee4">MMC_CUR_DIR</a>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="memdesc:a71970dc06915beff8deee456e5af5ee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">'cur' directory changed  <br /></td></tr>
<tr class="separator:a71970dc06915beff8deee456e5af5ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9d90d803e76211ae72ffad89d74bc7a1" id="r_a9d90d803e76211ae72ffad89d74bc7a1"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structEmail.html">Email</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d90d803e76211ae72ffad89d74bc7a1">maildir_email_new</a> (void)</td></tr>
<tr class="memdesc:a9d90d803e76211ae72ffad89d74bc7a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a Maildir <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a>.  <br /></td></tr>
<tr class="separator:a9d90d803e76211ae72ffad89d74bc7a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afad70ac642ae3a3a925778412bb64097" id="r_afad70ac642ae3a3a925778412bb64097"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afad70ac642ae3a3a925778412bb64097">maildir_parse_flags</a> (struct <a class="el" href="structEmail.html">Email</a> *e, const char *path)</td></tr>
<tr class="memdesc:afad70ac642ae3a3a925778412bb64097"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse Maildir file flags.  <br /></td></tr>
<tr class="separator:afad70ac642ae3a3a925778412bb64097"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab640c4df30bd2ccd3820c48367ab0d19" id="r_ab640c4df30bd2ccd3820c48367ab0d19"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab640c4df30bd2ccd3820c48367ab0d19">maildir_parse_stream</a> (FILE *fp, const char *fname, bool is_old, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:ab640c4df30bd2ccd3820c48367ab0d19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse a Maildir message.  <br /></td></tr>
<tr class="separator:ab640c4df30bd2ccd3820c48367ab0d19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b3866322416ead2f4f1fd899702f649" id="r_a5b3866322416ead2f4f1fd899702f649"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b3866322416ead2f4f1fd899702f649">maildir_parse_message</a> (const char *fname, bool is_old, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a5b3866322416ead2f4f1fd899702f649"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actually parse a maildir message.  <br /></td></tr>
<tr class="separator:a5b3866322416ead2f4f1fd899702f649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5de73eb9f624c898094973ba07d8f688" id="r_a5de73eb9f624c898094973ba07d8f688"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5de73eb9f624c898094973ba07d8f688">maildir_move_to_mailbox</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const struct MdEmailArray *mda)</td></tr>
<tr class="memdesc:a5de73eb9f624c898094973ba07d8f688"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy the Maildir list to the <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a>.  <br /></td></tr>
<tr class="separator:a5de73eb9f624c898094973ba07d8f688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga36dcef303e81a05e2760cd5c4dbdb603" id="r_ga36dcef303e81a05e2760cd5c4dbdb603"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sort__api.html#ga36dcef303e81a05e2760cd5c4dbdb603">maildir_sort_inode</a> (const void *a, const void *b, void *sdata)</td></tr>
<tr class="memdesc:ga36dcef303e81a05e2760cd5c4dbdb603"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two Maildirs by inode number - Implements <a class="el" href="qsort__r_8h.html#aba6ac91047d93d4a94103cd9db50d759">sort_t</a> -.  <br /></td></tr>
<tr class="separator:ga36dcef303e81a05e2760cd5c4dbdb603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1a80f2ce21a609b9ab3d61976df29ee" id="r_ab1a80f2ce21a609b9ab3d61976df29ee"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1a80f2ce21a609b9ab3d61976df29ee">maildir_parse_dir</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct MdEmailArray *mda, const char *subdir, struct Progress *progress)</td></tr>
<tr class="memdesc:ab1a80f2ce21a609b9ab3d61976df29ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a Maildir mailbox.  <br /></td></tr>
<tr class="separator:ab1a80f2ce21a609b9ab3d61976df29ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e8ef5194a5698e46defde07cb1a98ad" id="r_a2e8ef5194a5698e46defde07cb1a98ad"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e8ef5194a5698e46defde07cb1a98ad">maildir_delayed_parsing</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct MdEmailArray *mda, struct Progress *progress)</td></tr>
<tr class="memdesc:a2e8ef5194a5698e46defde07cb1a98ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function does the second parsing pass.  <br /></td></tr>
<tr class="separator:a2e8ef5194a5698e46defde07cb1a98ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ce7bc45f6b4f1426bb85851bf6b06c" id="r_aa4ce7bc45f6b4f1426bb85851bf6b06c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa4ce7bc45f6b4f1426bb85851bf6b06c">maildir_check_dir</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *dir_name, bool check_new, bool check_stats)</td></tr>
<tr class="memdesc:aa4ce7bc45f6b4f1426bb85851bf6b06c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail / mail counts.  <br /></td></tr>
<tr class="separator:aa4ce7bc45f6b4f1426bb85851bf6b06c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b42bc7ae8e488c3ae0306e008f664d6" id="r_a4b42bc7ae8e488c3ae0306e008f664d6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4b42bc7ae8e488c3ae0306e008f664d6">maildir_read_dir</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, const char *subdir)</td></tr>
<tr class="memdesc:a4b42bc7ae8e488c3ae0306e008f664d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a Maildir style mailbox.  <br /></td></tr>
<tr class="separator:a4b42bc7ae8e488c3ae0306e008f664d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a574fe0e1b5e2b5fb122b1cf4335824" id="r_a0a574fe0e1b5e2b5fb122b1cf4335824"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0a574fe0e1b5e2b5fb122b1cf4335824">maildir_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a0a574fe0e1b5e2b5fb122b1cf4335824"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail.  <br /></td></tr>
<tr class="separator:a0a574fe0e1b5e2b5fb122b1cf4335824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c65f6a672a0bb2b822e2d2fbcc662df" id="r_a5c65f6a672a0bb2b822e2d2fbcc662df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c65f6a672a0bb2b822e2d2fbcc662df">maildir_update_mtime</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:a5c65f6a672a0bb2b822e2d2fbcc662df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update our record of the Maildir modification time.  <br /></td></tr>
<tr class="separator:a5c65f6a672a0bb2b822e2d2fbcc662df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1a3ec86f8ca14e073f6dfc37d03689b7" id="r_ga1a3ec86f8ca14e073f6dfc37d03689b7"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="mxapi_8h.html#a95aa6f9d458f82609e795a7f449f4cad">MxOpenReturns</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__open.html#ga1a3ec86f8ca14e073f6dfc37d03689b7">maildir_mbox_open</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ga1a3ec86f8ca14e073f6dfc37d03689b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ac504b1095f3ce15cae85466ab6c7bd45">MxOps::mbox_open()</a> -.  <br /></td></tr>
<tr class="separator:ga1a3ec86f8ca14e073f6dfc37d03689b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b4803c762b7a34f27c501c9c48e2798" id="r_ga2b4803c762b7a34f27c501c9c48e2798"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__open__append.html#ga2b4803c762b7a34f27c501c9c48e2798">maildir_mbox_open_append</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, <a class="el" href="mxapi_8h.html#a12d50555671e01ef64b027974fc5acfa">OpenMailboxFlags</a> flags)</td></tr>
<tr class="memdesc:ga2b4803c762b7a34f27c501c9c48e2798"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> for appending - Implements <a class="el" href="structMxOps.html#af201c2c2f87a1253cbaf8ae24f062ef3">MxOps::mbox_open_append()</a> -.  <br /></td></tr>
<tr class="separator:ga2b4803c762b7a34f27c501c9c48e2798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c83b6e969c6eced44ccaa2fc21360ec" id="r_ga9c83b6e969c6eced44ccaa2fc21360ec"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check.html#ga9c83b6e969c6eced44ccaa2fc21360ec">maildir_mbox_check</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ga9c83b6e969c6eced44ccaa2fc21360ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for new mail - Implements <a class="el" href="structMxOps.html#af72b7c6ef064d1ca86b71ac9aff3e875">MxOps::mbox_check()</a> -.  <br /></td></tr>
<tr class="separator:ga9c83b6e969c6eced44ccaa2fc21360ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb202456659b59d67e34a9b1e9364ffa" id="r_gabb202456659b59d67e34a9b1e9364ffa"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__check__stats.html#gabb202456659b59d67e34a9b1e9364ffa">maildir_mbox_check_stats</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, uint8_t flags)</td></tr>
<tr class="memdesc:gabb202456659b59d67e34a9b1e9364ffa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> statistics - Implements <a class="el" href="structMxOps.html#abfbc84e79f106de70ebed8e4dbccd1f6">MxOps::mbox_check_stats()</a> -.  <br /></td></tr>
<tr class="separator:gabb202456659b59d67e34a9b1e9364ffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51ba9115523ffa080d8f71211a821c39" id="r_ga51ba9115523ffa080d8f71211a821c39"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__sync.html#ga51ba9115523ffa080d8f71211a821c39">maildir_mbox_sync</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:ga51ba9115523ffa080d8f71211a821c39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save changes to the <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> - Implements <a class="el" href="structMxOps.html#aebbfeec5651637ec053cc47b95c124af">MxOps::mbox_sync()</a> -.  <br /></td></tr>
<tr class="separator:ga51ba9115523ffa080d8f71211a821c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae841dab8452ed5e7aefc7bb395bc33d6" id="r_gae841dab8452ed5e7aefc7bb395bc33d6"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mx__mbox__close.html#gae841dab8452ed5e7aefc7bb395bc33d6">maildir_mbox_close</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m)</td></tr>
<tr class="memdesc:gae841dab8452ed5e7aefc7bb395bc33d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> - Implements <a class="el" href="structMxOps.html#ae97b81d5371def5f6f2e64544cdec5fc">MxOps::mbox_close()</a> -.  <br /></td></tr>
<tr class="separator:gae841dab8452ed5e7aefc7bb395bc33d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Maildir <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a>. </p>
<dl class="section author"><dt>Authors</dt><dd><ul>
<li>Richard Russon</li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</dd></dl>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p class="definition">Definition in file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa32d2f8315f63e8e0c4e6712f7317a6e" name="aa32d2f8315f63e8e0c4e6712f7317a6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa32d2f8315f63e8e0c4e6712f7317a6e">&#9670;&#160;</a></span>MMC_NO_DIRS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMC_NO_DIRS&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>No directories changed. </p>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00055">55</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>

</div>
</div>
<a id="ab308421b848b9caed6fc2ac4612b1212" name="ab308421b848b9caed6fc2ac4612b1212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab308421b848b9caed6fc2ac4612b1212">&#9670;&#160;</a></span>MMC_NEW_DIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMC_NEW_DIR&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>'new' directory changed </p>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00056">56</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>

</div>
</div>
<a id="a71970dc06915beff8deee456e5af5ee4" name="a71970dc06915beff8deee456e5af5ee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71970dc06915beff8deee456e5af5ee4">&#9670;&#160;</a></span>MMC_CUR_DIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMC_CUR_DIR&#160;&#160;&#160;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>'cur' directory changed </p>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00057">57</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9d90d803e76211ae72ffad89d74bc7a1" name="a9d90d803e76211ae72ffad89d74bc7a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d90d803e76211ae72ffad89d74bc7a1">&#9670;&#160;</a></span>maildir_email_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structEmail.html">Email</a> * maildir_email_new </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a Maildir <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Newly created <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a></td></tr>
  </table>
  </dd>
</dl>
<p>Create a new <a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> and attach <a class="el" href="structMaildirEmailData.html" title="Maildir-specific Email data -.">MaildirEmailData</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This should be freed using <a class="el" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67" title="Free an Email.">email_free()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00067">67</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>{</div>
<div class="line"><span class="lineno">   69</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = <a class="code hl_function" href="email_2email_8c.html#ab53e91414f24cecdc75fcfea6f1824e3">email_new</a>();</div>
<div class="line"><span class="lineno">   70</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code hl_function" href="maildir_2edata_8c.html#a7defe583b6fd175e64641c841fb8cca1">maildir_edata_new</a>();</div>
<div class="line"><span class="lineno">   71</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a781551eba730fd251226081727ae74bb">edata_free</a> = <a class="code hl_function" href="group__email__edata__free.html#ga64d6c6eca4ddc56acc9157a876f07d63">maildir_edata_free</a>;</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>  <span class="keywordflow">return</span> e;</div>
<div class="line"><span class="lineno">   74</span>}</div>
<div class="ttc" id="aemail_2email_8c_html_ab53e91414f24cecdc75fcfea6f1824e3"><div class="ttname"><a href="email_2email_8c.html#ab53e91414f24cecdc75fcfea6f1824e3">email_new</a></div><div class="ttdeci">struct Email * email_new(void)</div><div class="ttdoc">Create a new Email.</div><div class="ttdef"><b>Definition</b> <a href="email_2email_8c_source.html#l00077">email.c:77</a></div></div>
<div class="ttc" id="agroup__email__edata__free_html_ga64d6c6eca4ddc56acc9157a876f07d63"><div class="ttname"><a href="group__email__edata__free.html#ga64d6c6eca4ddc56acc9157a876f07d63">maildir_edata_free</a></div><div class="ttdeci">void maildir_edata_free(void **ptr)</div><div class="ttdoc">Free the private Email data - Implements Email::edata_free() -.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2edata_8c_source.html#l00038">edata.c:38</a></div></div>
<div class="ttc" id="amaildir_2edata_8c_html_a7defe583b6fd175e64641c841fb8cca1"><div class="ttname"><a href="maildir_2edata_8c.html#a7defe583b6fd175e64641c841fb8cca1">maildir_edata_new</a></div><div class="ttdeci">struct MaildirEmailData * maildir_edata_new(void)</div><div class="ttdoc">Create a new MaildirEmailData object.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2edata_8c_source.html#l00053">edata.c:53</a></div></div>
<div class="ttc" id="astructEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00038">email.h:39</a></div></div>
<div class="ttc" id="astructEmail_html_a50d8a8dde5fbf0b6dba934ff7e07fb6b"><div class="ttname"><a href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">Email::edata</a></div><div class="ttdeci">void * edata</div><div class="ttdoc">Driver-specific data.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00074">email.h:74</a></div></div>
<div class="ttc" id="astructEmail_html_a781551eba730fd251226081727ae74bb"><div class="ttname"><a href="structEmail.html#a781551eba730fd251226081727ae74bb">Email::edata_free</a></div><div class="ttdeci">void(* edata_free)(void **ptr)</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00090">email.h:90</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a9d90d803e76211ae72ffad89d74bc7a1_cgraph.svg" width="328" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a9d90d803e76211ae72ffad89d74bc7a1_icgraph.svg" width="494" height="144"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="afad70ac642ae3a3a925778412bb64097" name="afad70ac642ae3a3a925778412bb64097"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afad70ac642ae3a3a925778412bb64097">&#9670;&#160;</a></span>maildir_parse_flags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maildir_parse_flags </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse Maildir file flags. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">path</td><td>Path to email file </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00081">81</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   82</span>{</div>
<div class="line"><span class="lineno">   83</span>  <span class="keywordtype">char</span> *q = NULL;</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   86</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   87</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMaildirEmailData.html">MaildirEmailData</a> *<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code hl_function" href="maildir_2edata_8c.html#a629cd9d63994167687009952d0e225b5">maildir_edata_get</a>(e);</div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>)</div>
<div class="line"><span class="lineno">   91</span>  {</div>
<div class="line"><span class="lineno">   92</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = <a class="code hl_function" href="maildir_2edata_8c.html#a7defe583b6fd175e64641c841fb8cca1">maildir_edata_new</a>();</div>
<div class="line"><span class="lineno">   93</span>    <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a> = e-&gt;<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>;</div>
<div class="line"><span class="lineno">   94</span>  }</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> c_maildir_field_delimiter = *<a class="code hl_function" href="config__cache_8c.html#a0cc761b2657310f7a7c392d4c480cc7d">cc_maildir_field_delimiter</a>();</div>
<div class="line"><span class="lineno">   97</span>  <span class="keywordtype">char</span> *p = strrchr(<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, c_maildir_field_delimiter);</div>
<div class="line"><span class="lineno">   98</span>  <span class="keywordflow">if</span> (p &amp;&amp; <a class="code hl_function" href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a>(p + 1, <span class="stringliteral">&quot;2,&quot;</span>))</div>
<div class="line"><span class="lineno">   99</span>  {</div>
<div class="line"><span class="lineno">  100</span>    p += 3;</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;custom_flags, p);</div>
<div class="line"><span class="lineno">  103</span>    q = <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;custom_flags;</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="keywordflow">while</span> (*p)</div>
<div class="line"><span class="lineno">  106</span>    {</div>
<div class="line"><span class="lineno">  107</span>      <span class="keywordflow">switch</span> (*p)</div>
<div class="line"><span class="lineno">  108</span>      {</div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>: <span class="comment">// Flagged</span></div>
<div class="line"><span class="lineno">  110</span>          e-&gt;<a class="code hl_variable" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  111</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;R&#39;</span>: <span class="comment">// Replied</span></div>
<div class="line"><span class="lineno">  114</span>          e-&gt;<a class="code hl_variable" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  115</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>: <span class="comment">// Seen</span></div>
<div class="line"><span class="lineno">  118</span>          e-&gt;<a class="code hl_variable" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  119</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>: <span class="comment">// Trashed</span></div>
<div class="line"><span class="lineno">  122</span>        {</div>
<div class="line"><span class="lineno">  123</span>          <span class="keyword">const</span> <span class="keywordtype">bool</span> c_flag_safe = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;flag_safe&quot;</span>);</div>
<div class="line"><span class="lineno">  124</span>          <span class="keywordflow">if</span> (!e-&gt;<a class="code hl_variable" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a> || !c_flag_safe)</div>
<div class="line"><span class="lineno">  125</span>          {</div>
<div class="line"><span class="lineno">  126</span>            e-&gt;<a class="code hl_variable" href="structEmail.html#ad14bdb707d3b5811734782cfb570d9eb">trash</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  127</span>            e-&gt;<a class="code hl_variable" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  128</span>          }</div>
<div class="line"><span class="lineno">  129</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  130</span>        }</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  133</span>          *q++ = *p;</div>
<div class="line"><span class="lineno">  134</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  135</span>      }</div>
<div class="line"><span class="lineno">  136</span>      p++;</div>
<div class="line"><span class="lineno">  137</span>    }</div>
<div class="line"><span class="lineno">  138</span>  }</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>  <span class="keywordflow">if</span> (q == <a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;custom_flags)</div>
<div class="line"><span class="lineno">  141</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;<a class="code hl_variable" href="structEmail.html#a50d8a8dde5fbf0b6dba934ff7e07fb6b">edata</a>-&gt;custom_flags);</div>
<div class="line"><span class="lineno">  142</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (q)</div>
<div class="line"><span class="lineno">  143</span>    *q = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  144</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00047">helpers.c:47</a></div></div>
<div class="ttc" id="aconfig__cache_8c_html_a0cc761b2657310f7a7c392d4c480cc7d"><div class="ttname"><a href="config__cache_8c.html#a0cc761b2657310f7a7c392d4c480cc7d">cc_maildir_field_delimiter</a></div><div class="ttdeci">const char * cc_maildir_field_delimiter(void)</div><div class="ttdoc">Get the cached value of $maildir_field_delimiter.</div><div class="ttdef"><b>Definition</b> <a href="config__cache_8c_source.html#l00131">config_cache.c:131</a></div></div>
<div class="ttc" id="amaildir_2edata_8c_html_a629cd9d63994167687009952d0e225b5"><div class="ttname"><a href="maildir_2edata_8c.html#a629cd9d63994167687009952d0e225b5">maildir_edata_get</a></div><div class="ttdeci">struct MaildirEmailData * maildir_edata_get(struct Email *e)</div><div class="ttdoc">Get the private data for this Email.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2edata_8c_source.html#l00063">edata.c:63</a></div></div>
<div class="ttc" id="amemory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00062">memory.h:62</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a9bf968304f4f9b49e24215cb2e28d22d"><div class="ttname"><a href="mutt_2string_8c.html#a9bf968304f4f9b49e24215cb2e28d22d">mutt_str_startswith</a></div><div class="ttdeci">size_t mutt_str_startswith(const char *str, const char *prefix)</div><div class="ttdoc">Check whether a string starts with a prefix.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00232">string.c:232</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_af8c32ffc64dd55e92001a974a4be6bbf"><div class="ttname"><a href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a></div><div class="ttdeci">char * mutt_str_replace(char **p, const char *s)</div><div class="ttdoc">Replace one string with another.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00282">string.c:282</a></div></div>
<div class="ttc" id="astructEmail_html_a0bd79550be901d44e50953fb43614e10"><div class="ttname"><a href="structEmail.html#a0bd79550be901d44e50953fb43614e10">Email::read</a></div><div class="ttdeci">bool read</div><div class="ttdoc">Email is read.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00050">email.h:50</a></div></div>
<div class="ttc" id="astructEmail_html_a8e810bc67ce7fea04bfe8a3739093d78"><div class="ttname"><a href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">Email::flagged</a></div><div class="ttdeci">bool flagged</div><div class="ttdoc">Marked important?</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00047">email.h:47</a></div></div>
<div class="ttc" id="astructEmail_html_aa26dd591f92e548bc3c56d0b7fdb3e8c"><div class="ttname"><a href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">Email::replied</a></div><div class="ttdeci">bool replied</div><div class="ttdoc">Email has been replied to.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00051">email.h:51</a></div></div>
<div class="ttc" id="astructEmail_html_ac041599cfe41b49e7b8f9d752d07bb39"><div class="ttname"><a href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">Email::path</a></div><div class="ttdeci">char * path</div><div class="ttdoc">Path of Email (for local Mailboxes)</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00070">email.h:70</a></div></div>
<div class="ttc" id="astructEmail_html_ac5db33e3d6d9723d8e496078d5769567"><div class="ttname"><a href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">Email::deleted</a></div><div class="ttdeci">bool deleted</div><div class="ttdoc">Email is deleted.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00078">email.h:78</a></div></div>
<div class="ttc" id="astructEmail_html_ad14bdb707d3b5811734782cfb570d9eb"><div class="ttname"><a href="structEmail.html#ad14bdb707d3b5811734782cfb570d9eb">Email::trash</a></div><div class="ttdeci">bool trash</div><div class="ttdoc">Message is marked as trashed on disk (used by the maildir_trash option)</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00053">email.h:53</a></div></div>
<div class="ttc" id="astructMaildirEmailData_html"><div class="ttname"><a href="structMaildirEmailData.html">MaildirEmailData</a></div><div class="ttdoc">Maildir-specific Email data -.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2edata_8h_source.html#l00031">edata.h:32</a></div></div>
<div class="ttc" id="astructNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00042">neomutt.h:43</a></div></div>
<div class="ttc" id="astructNeoMutt_html_af98065e32243ce9331f93b7f30247d47"><div class="ttname"><a href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">NeoMutt::sub</a></div><div class="ttdeci">struct ConfigSubset * sub</div><div class="ttdoc">Inherited config items.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00047">neomutt.h:47</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_afad70ac642ae3a3a925778412bb64097_cgraph.svg" width="375" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_afad70ac642ae3a3a925778412bb64097_icgraph.svg" width="352" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab640c4df30bd2ccd3820c48367ab0d19" name="ab640c4df30bd2ccd3820c48367ab0d19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab640c4df30bd2ccd3820c48367ab0d19">&#9670;&#160;</a></span>maildir_parse_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool maildir_parse_stream </td>
          <td>(</td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>fname</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>is_old</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse a Maildir message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> file handle </td></tr>
    <tr><td class="paramname">fname</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> filename </td></tr>
    <tr><td class="paramname">is_old</td><td>true, if the email is old (read) </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success</td></tr>
  </table>
  </dd>
</dl>
<p>Actually parse a maildir message. This may also be used to fill out a fake header structure generated by lazy maildir parsing. </p>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00157">157</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  158</span>{</div>
<div class="line"><span class="lineno">  159</span>  <span class="keywordflow">if</span> (!fp || !fname || !e)</div>
<div class="line"><span class="lineno">  160</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>  <span class="keyword">const</span> <span class="keywordtype">long</span> size = <a class="code hl_function" href="file_8c.html#a4cffa4f503de3736198956ebed431f7e">mutt_file_get_size_fp</a>(fp);</div>
<div class="line"><span class="lineno">  163</span>  <span class="keywordflow">if</span> (size == 0)</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a> = <a class="code hl_function" href="email_2parse_8c.html#a709f7f23d8a54a0f75abc28a0b365ace">mutt_rfc822_read_header</a>(fp, e, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>  <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#af64bcf33ccd8b0ba248fc8d427c21264">received</a> == 0)</div>
<div class="line"><span class="lineno">  169</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#af64bcf33ccd8b0ba248fc8d427c21264">received</a> = e-&gt;<a class="code hl_variable" href="structEmail.html#a9e3cda5dab6d53f68cad95d28068d962">date_sent</a>;</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>  <span class="comment">/* always update the length since we have fresh information available. */</span></div>
<div class="line"><span class="lineno">  172</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">length</a> = size - e-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">offset</a>;</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#ace0e20a11dbdc84ca9ea63497c05b603">index</a> = -1;</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>  <span class="comment">/* maildir stores its flags in the filename, so ignore the</span></div>
<div class="line"><span class="lineno">  177</span><span class="comment">   * flags in the header of the message */</span></div>
<div class="line"><span class="lineno">  178</span>  e-&gt;<a class="code hl_variable" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a> = is_old;</div>
<div class="line"><span class="lineno">  179</span>  <a class="code hl_function" href="#afad70ac642ae3a3a925778412bb64097">maildir_parse_flags</a>(e, fname);</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>  <span class="keywordflow">return</span> e;</div>
<div class="line"><span class="lineno">  182</span>}</div>
<div class="ttc" id="aemail_2parse_8c_html_a709f7f23d8a54a0f75abc28a0b365ace"><div class="ttname"><a href="email_2parse_8c.html#a709f7f23d8a54a0f75abc28a0b365ace">mutt_rfc822_read_header</a></div><div class="ttdeci">struct Envelope * mutt_rfc822_read_header(FILE *fp, struct Email *e, bool user_hdrs, bool weed)</div><div class="ttdoc">Parses an RFC822 header.</div><div class="ttdef"><b>Definition</b> <a href="email_2parse_8c_source.html#l01204">parse.c:1204</a></div></div>
<div class="ttc" id="afile_8c_html_a4cffa4f503de3736198956ebed431f7e"><div class="ttname"><a href="file_8c.html#a4cffa4f503de3736198956ebed431f7e">mutt_file_get_size_fp</a></div><div class="ttdeci">long mutt_file_get_size_fp(FILE *fp)</div><div class="ttdoc">Get the size of a file.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l01430">file.c:1430</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_afad70ac642ae3a3a925778412bb64097"><div class="ttname"><a href="#afad70ac642ae3a3a925778412bb64097">maildir_parse_flags</a></div><div class="ttdeci">void maildir_parse_flags(struct Email *e, const char *path)</div><div class="ttdoc">Parse Maildir file flags.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00081">mailbox.c:81</a></div></div>
<div class="ttc" id="astructBody_html_a1969dfeb0a155ccb16153fe777a103b0"><div class="ttname"><a href="structBody.html#a1969dfeb0a155ccb16153fe777a103b0">Body::offset</a></div><div class="ttdeci">LOFF_T offset</div><div class="ttdoc">offset where the actual data begins</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00052">body.h:52</a></div></div>
<div class="ttc" id="astructBody_html_a6f92d7ec8568ca04ae07931c56dd0790"><div class="ttname"><a href="structBody.html#a6f92d7ec8568ca04ae07931c56dd0790">Body::length</a></div><div class="ttdeci">LOFF_T length</div><div class="ttdoc">length (in bytes) of attachment</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00053">body.h:53</a></div></div>
<div class="ttc" id="astructEmail_html_a34cc4493729d7a3b1f4ed783e739a9ec"><div class="ttname"><a href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">Email::env</a></div><div class="ttdeci">struct Envelope * env</div><div class="ttdoc">Envelope information.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00068">email.h:68</a></div></div>
<div class="ttc" id="astructEmail_html_a57ad6ac618c0f685804f6f5bb390b3a6"><div class="ttname"><a href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">Email::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">List of MIME parts.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00069">email.h:69</a></div></div>
<div class="ttc" id="astructEmail_html_a6d9062408a8c89b19cf25584dd2ffb57"><div class="ttname"><a href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">Email::old</a></div><div class="ttdeci">bool old</div><div class="ttdoc">Email is seen, but unread.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00049">email.h:49</a></div></div>
<div class="ttc" id="astructEmail_html_a9e3cda5dab6d53f68cad95d28068d962"><div class="ttname"><a href="structEmail.html#a9e3cda5dab6d53f68cad95d28068d962">Email::date_sent</a></div><div class="ttdeci">time_t date_sent</div><div class="ttdoc">Time when the message was sent (UTC)</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00060">email.h:60</a></div></div>
<div class="ttc" id="astructEmail_html_ace0e20a11dbdc84ca9ea63497c05b603"><div class="ttname"><a href="structEmail.html#ace0e20a11dbdc84ca9ea63497c05b603">Email::index</a></div><div class="ttdeci">int index</div><div class="ttdoc">The absolute (unsorted) message number.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00110">email.h:110</a></div></div>
<div class="ttc" id="astructEmail_html_af64bcf33ccd8b0ba248fc8d427c21264"><div class="ttname"><a href="structEmail.html#af64bcf33ccd8b0ba248fc8d427c21264">Email::received</a></div><div class="ttdeci">time_t received</div><div class="ttdoc">Time when the message was placed in the mailbox.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00061">email.h:61</a></div></div>
</div><!-- fragment --><div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_ab640c4df30bd2ccd3820c48367ab0d19_cgraph.svg" width="396" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_ab640c4df30bd2ccd3820c48367ab0d19_icgraph.svg" width="555" height="66"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5b3866322416ead2f4f1fd899702f649" name="a5b3866322416ead2f4f1fd899702f649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b3866322416ead2f4f1fd899702f649">&#9670;&#160;</a></span>maildir_parse_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool maildir_parse_message </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>fname</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>is_old</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actually parse a maildir message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fname</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> filename </td></tr>
    <tr><td class="paramname">is_old</td><td>true, if the email is old (read) </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> to populate </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success</td></tr>
  </table>
  </dd>
</dl>
<p>This may also be used to fill out a fake header structure generated by lazy maildir parsing. </p>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00194">194</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  195</span>{</div>
<div class="line"><span class="lineno">  196</span>  <span class="keywordflow">if</span> (!fname || !e)</div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>  FILE *fp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(fname, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno">  200</span>  <span class="keywordflow">if</span> (!fp)</div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>  <span class="keywordtype">bool</span> rc = <a class="code hl_function" href="#ab640c4df30bd2ccd3820c48367ab0d19">maildir_parse_stream</a>(fp, fname, is_old, e);</div>
<div class="line"><span class="lineno">  204</span>  <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp);</div>
<div class="line"><span class="lineno">  205</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  206</span>}</div>
<div class="ttc" id="afile_8h_html_a9b519e795f098be88b93cd72c49a35ec"><div class="ttname"><a href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a></div><div class="ttdeci">#define mutt_file_fclose(FP)</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00139">file.h:139</a></div></div>
<div class="ttc" id="afile_8h_html_a9fa358d76519cb6bc8ffca5850976d46"><div class="ttname"><a href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a></div><div class="ttdeci">#define mutt_file_fopen(PATH, MODE)</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00138">file.h:138</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_ab640c4df30bd2ccd3820c48367ab0d19"><div class="ttname"><a href="#ab640c4df30bd2ccd3820c48367ab0d19">maildir_parse_stream</a></div><div class="ttdeci">bool maildir_parse_stream(FILE *fp, const char *fname, bool is_old, struct Email *e)</div><div class="ttdoc">Parse a Maildir message.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00157">mailbox.c:157</a></div></div>
</div><!-- fragment --><div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a5b3866322416ead2f4f1fd899702f649_cgraph.svg" width="378" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a5b3866322416ead2f4f1fd899702f649_icgraph.svg" width="395" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5de73eb9f624c898094973ba07d8f688" name="a5de73eb9f624c898094973ba07d8f688"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5de73eb9f624c898094973ba07d8f688">&#9670;&#160;</a></span>maildir_move_to_mailbox()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int maildir_move_to_mailbox </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct MdEmailArray *</td>          <td class="paramname"><span class="paramname"><em>mda</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy the Maildir list to the <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mda</td><td>Maildir array to copy, then free </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">num</td><td>Number of new emails </td></tr>
    <tr><td class="paramname">0</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00215">215</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  216</span>{</div>
<div class="line"><span class="lineno">  217</span>  <span class="keywordflow">if</span> (!m)</div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>  <span class="keywordtype">int</span> oldmsgcount = m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>;</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMdEmail.html">MdEmail</a> *md = NULL;</div>
<div class="line"><span class="lineno">  223</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMdEmail.html">MdEmail</a> **mdp = NULL;</div>
<div class="line"><span class="lineno">  224</span>  <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(mdp, mda)</div>
<div class="line"><span class="lineno">  225</span>  {</div>
<div class="line"><span class="lineno">  226</span>    md = *mdp;</div>
<div class="line"><span class="lineno">  227</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;Considering %s\n&quot;</span>, <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(md-&gt;<a class="code hl_variable" href="structMdEmail.html#a6237939d0eb6bb492f79a65a1638a0b2">canon_fname</a>));</div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">if</span> (!md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>)</div>
<div class="line"><span class="lineno">  229</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;Adding header structure. Flags: %s%s%s%s%s\n&quot;</span>,</div>
<div class="line"><span class="lineno">  232</span>               md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a8e810bc67ce7fea04bfe8a3739093d78">flagged</a> ? <span class="stringliteral">&quot;f&quot;</span> : <span class="stringliteral">&quot;&quot;</span>, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> ? <span class="stringliteral">&quot;D&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><span class="lineno">  233</span>               md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a> ? <span class="stringliteral">&quot;r&quot;</span> : <span class="stringliteral">&quot;&quot;</span>, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a> ? <span class="stringliteral">&quot;O&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><span class="lineno">  234</span>               md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a0bd79550be901d44e50953fb43614e10">read</a> ? <span class="stringliteral">&quot;R&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  235</span>    <a class="code hl_function" href="mx_8c.html#a0572e1f7a00e528557923201a39c7de9">mx_alloc_memory</a>(m, m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>);</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>] = md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>;</div>
<div class="line"><span class="lineno">  238</span>    m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>]-&gt;<a class="code hl_variable" href="structEmail.html#ace0e20a11dbdc84ca9ea63497c05b603">index</a> = m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>;</div>
<div class="line"><span class="lineno">  239</span>    <a class="code hl_function" href="core_2mailbox_8c.html#a2c6a73f0789f1985d07f296537493cf0">mailbox_size_add</a>(m, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>);</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>    md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a> = NULL;</div>
<div class="line"><span class="lineno">  242</span>    m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>++;</div>
<div class="line"><span class="lineno">  243</span>  }</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>  <span class="keywordtype">int</span> num = 0;</div>
<div class="line"><span class="lineno">  246</span>  <span class="keywordflow">if</span> (m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> &gt; oldmsgcount)</div>
<div class="line"><span class="lineno">  247</span>    num = m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a> - oldmsgcount;</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>  <span class="keywordflow">return</span> num;</div>
<div class="line"><span class="lineno">  250</span>}</div>
<div class="ttc" id="aarray_8h_html_a6b8ea5fb2f366d7716f5042b347093a6"><div class="ttname"><a href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a></div><div class="ttdeci">#define ARRAY_FOREACH(elem, head)</div><div class="ttdoc">Iterate over all elements of the array.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00214">array.h:214</a></div></div>
<div class="ttc" id="acore_2mailbox_8c_html_a2c6a73f0789f1985d07f296537493cf0"><div class="ttname"><a href="core_2mailbox_8c.html#a2c6a73f0789f1985d07f296537493cf0">mailbox_size_add</a></div><div class="ttdeci">void mailbox_size_add(struct Mailbox *m, const struct Email *e)</div><div class="ttdoc">Add an email&#39;s size to the total size of a Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8c_source.html#l00249">mailbox.c:249</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00090">logging2.h:90</a></div></div>
<div class="ttc" id="alogging2_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3"><div class="ttname"><a href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a></div><div class="ttdeci">@ LL_DEBUG2</div><div class="ttdoc">Log at debug level 2.</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00045">logging2.h:45</a></div></div>
<div class="ttc" id="amx_8c_html_a0572e1f7a00e528557923201a39c7de9"><div class="ttname"><a href="mx_8c.html#a0572e1f7a00e528557923201a39c7de9">mx_alloc_memory</a></div><div class="ttdeci">void mx_alloc_memory(struct Mailbox *m, int req_size)</div><div class="ttdoc">Create storage for the emails.</div><div class="ttdef"><b>Definition</b> <a href="mx_8c_source.html#l01211">mx.c:1211</a></div></div>
<div class="ttc" id="astring2_8h_html_a7e0481bed27661ea2679f256b24e0283"><div class="ttname"><a href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a></div><div class="ttdeci">#define NONULL(x)</div><div class="ttdef"><b>Definition</b> <a href="string2_8h_source.html#l00043">string2.h:43</a></div></div>
<div class="ttc" id="astructMailbox_html_a3d7ee4badbaec0d67db9e29d5ba716ee"><div class="ttname"><a href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">Mailbox::msg_count</a></div><div class="ttdeci">int msg_count</div><div class="ttdoc">Total number of messages.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00088">mailbox.h:88</a></div></div>
<div class="ttc" id="astructMailbox_html_a73ca79846dce43a175892c5d88e932ca"><div class="ttname"><a href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">Mailbox::emails</a></div><div class="ttdeci">struct Email ** emails</div><div class="ttdoc">Array of Emails.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00096">mailbox.h:96</a></div></div>
<div class="ttc" id="astructMdEmail_html"><div class="ttname"><a href="structMdEmail.html">MdEmail</a></div><div class="ttdoc">A Maildir Email helper.</div><div class="ttdef"><b>Definition</b> <a href="mdemail_8h_source.html#l00033">mdemail.h:34</a></div></div>
<div class="ttc" id="astructMdEmail_html_a6237939d0eb6bb492f79a65a1638a0b2"><div class="ttname"><a href="structMdEmail.html#a6237939d0eb6bb492f79a65a1638a0b2">MdEmail::canon_fname</a></div><div class="ttdeci">char * canon_fname</div><div class="ttdoc">Canonical filename for hashing.</div><div class="ttdef"><b>Definition</b> <a href="mdemail_8h_source.html#l00036">mdemail.h:36</a></div></div>
<div class="ttc" id="astructMdEmail_html_a94a29619b71c7e15685ffe4eafc05144"><div class="ttname"><a href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">MdEmail::email</a></div><div class="ttdeci">struct Email * email</div><div class="ttdoc">Temporary Email.</div><div class="ttdef"><b>Definition</b> <a href="mdemail_8h_source.html#l00035">mdemail.h:35</a></div></div>
</div><!-- fragment --><div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a5de73eb9f624c898094973ba07d8f688_cgraph.svg" width="368" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a5de73eb9f624c898094973ba07d8f688_icgraph.svg" width="356" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab1a80f2ce21a609b9ab3d61976df29ee" name="ab1a80f2ce21a609b9ab3d61976df29ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1a80f2ce21a609b9ab3d61976df29ee">&#9670;&#160;</a></span>maildir_parse_dir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int maildir_parse_dir </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct MdEmailArray *</td>          <td class="paramname"><span class="paramname"><em>mda</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>subdir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct Progress *</td>          <td class="paramname"><span class="paramname"><em>progress</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read a Maildir mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mda</td><td>Array for results </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">subdir</td><td>Subdirectory, e.g. 'new' </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">progress</td><td>Progress bar </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error </td></tr>
    <tr><td class="paramname">-2</td><td>Aborted </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00273">273</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  275</span>{</div>
<div class="line"><span class="lineno">  276</span>  <span class="keyword">struct </span>dirent *de = NULL;</div>
<div class="line"><span class="lineno">  277</span>  <span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><span class="lineno">  278</span>  <span class="keywordtype">bool</span> is_old = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  279</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMdEmail.html">MdEmail</a> *entry = NULL;</div>
<div class="line"><span class="lineno">  280</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = NULL;</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>  <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(buf, <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(m), subdir);</div>
<div class="line"><span class="lineno">  285</span>  is_old = <a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(<span class="stringliteral">&quot;cur&quot;</span>, subdir);</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>  DIR *dir = <a class="code hl_function" href="file_8c.html#a69da918c66c3f22815d6e4aed88b6122">mutt_file_opendir</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf), <a class="code hl_enumvalue" href="file_8h.html#a222e4f679593f00cd8c126212b3cdb3ba279decdd0165f19ffc7d35736615f499">MUTT_OPENDIR_CREATE</a>);</div>
<div class="line"><span class="lineno">  288</span>  <span class="keywordflow">if</span> (!dir)</div>
<div class="line"><span class="lineno">  289</span>  {</div>
<div class="line"><span class="lineno">  290</span>    rc = -1;</div>
<div class="line"><span class="lineno">  291</span>    <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno">  292</span>  }</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>  <span class="keywordflow">while</span> (((de = readdir(dir))) &amp;&amp; !<a class="code hl_variable" href="signal_8c.html#a85c069643781da758ffa8281db66e8f0">SigInt</a>)</div>
<div class="line"><span class="lineno">  295</span>  {</div>
<div class="line"><span class="lineno">  296</span>    <span class="keywordflow">if</span> (*de-&gt;d_name == <span class="charliteral">&#39;.&#39;</span>)</div>
<div class="line"><span class="lineno">  297</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  298</span> </div>
<div class="line"><span class="lineno">  299</span>    <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab02ab1e1ebe44a7ad67c0d6cf0447be3">LL_DEBUG2</a>, <span class="stringliteral">&quot;queueing %s\n&quot;</span>, de-&gt;d_name);</div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>    e = <a class="code hl_function" href="#a9d90d803e76211ae72ffad89d74bc7a1">maildir_email_new</a>();</div>
<div class="line"><span class="lineno">  302</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a> = is_old;</div>
<div class="line"><span class="lineno">  303</span>    <a class="code hl_function" href="#afad70ac642ae3a3a925778412bb64097">maildir_parse_flags</a>(e, de-&gt;d_name);</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>    <a class="code hl_function" href="progress_2lib_8h.html#ae0ca330f9059a039a4ece5cb1b00155b">progress_update</a>(progress, <a class="code hl_define" href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a>(mda) + 1, -1);</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>    <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(buf, <span class="stringliteral">&quot;%s/%s&quot;</span>, subdir, de-&gt;d_name);</div>
<div class="line"><span class="lineno">  308</span>    e-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a> = <a class="code hl_function" href="buffer_8c.html#ad76477cc0c660bc50162393e997233eb">buf_strdup</a>(buf);</div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>    entry = <a class="code hl_function" href="mdemail_8c.html#a5f62aec1b91e24e34dcdf66f19cc9d22">maildir_entry_new</a>();</div>
<div class="line"><span class="lineno">  311</span>    entry-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a> = e;</div>
<div class="line"><span class="lineno">  312</span>    entry-&gt;<a class="code hl_variable" href="structMdEmail.html#aa9130be962cf752ad7672ac362932808">inode</a> = de-&gt;d_ino;</div>
<div class="line"><span class="lineno">  313</span>    <a class="code hl_define" href="array_8h.html#a4f570f2382025383e4b2cc46ede6ebd0">ARRAY_ADD</a>(mda, entry);</div>
<div class="line"><span class="lineno">  314</span>  }</div>
<div class="line"><span class="lineno">  315</span> </div>
<div class="line"><span class="lineno">  316</span>  closedir(dir);</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="signal_8c.html#a85c069643781da758ffa8281db66e8f0">SigInt</a>)</div>
<div class="line"><span class="lineno">  319</span>  {</div>
<div class="line"><span class="lineno">  320</span>    <a class="code hl_variable" href="signal_8c.html#a85c069643781da758ffa8281db66e8f0">SigInt</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  321</span>    <span class="keywordflow">return</span> -2; <span class="comment">/* action aborted */</span></div>
<div class="line"><span class="lineno">  322</span>  }</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>  <a class="code hl_define" href="array_8h.html#a3b58598337ec447421a317fa2f836ebd">ARRAY_SORT</a>(mda, <a class="code hl_function" href="group__sort__api.html#ga36dcef303e81a05e2760cd5c4dbdb603">maildir_sort_inode</a>, NULL);</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>cleanup:</div>
<div class="line"><span class="lineno">  327</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  330</span>}</div>
<div class="ttc" id="aarray_8h_html_a3b58598337ec447421a317fa2f836ebd"><div class="ttname"><a href="array_8h.html#a3b58598337ec447421a317fa2f836ebd">ARRAY_SORT</a></div><div class="ttdeci">#define ARRAY_SORT(head, fn, sdata)</div><div class="ttdoc">Sort an array.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00335">array.h:335</a></div></div>
<div class="ttc" id="aarray_8h_html_a4f570f2382025383e4b2cc46ede6ebd0"><div class="ttname"><a href="array_8h.html#a4f570f2382025383e4b2cc46ede6ebd0">ARRAY_ADD</a></div><div class="ttdeci">#define ARRAY_ADD(head, elem)</div><div class="ttdoc">Add an element at the end of the array.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00156">array.h:156</a></div></div>
<div class="ttc" id="aarray_8h_html_a7f1bf469a48c0a2618c94b7b8281c5bf"><div class="ttname"><a href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(head)</div><div class="ttdoc">The number of elements stored.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00087">array.h:87</a></div></div>
<div class="ttc" id="abuffer_8c_html_a02123807d31181ac701b566226e93b33"><div class="ttname"><a href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a></div><div class="ttdeci">int buf_printf(struct Buffer *buf, const char *fmt,...)</div><div class="ttdoc">Format a string overwriting a Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00161">buffer.c:161</a></div></div>
<div class="ttc" id="abuffer_8c_html_ad76477cc0c660bc50162393e997233eb"><div class="ttname"><a href="buffer_8c.html#ad76477cc0c660bc50162393e997233eb">buf_strdup</a></div><div class="ttdeci">char * buf_strdup(const struct Buffer *buf)</div><div class="ttdoc">Copy a Buffer&#39;s string.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00571">buffer.c:571</a></div></div>
<div class="ttc" id="abuffer_8h_html_a728ebc5a947b77c8d56db44ce553a7ab"><div class="ttname"><a href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a></div><div class="ttdeci">static const char * buf_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00096">buffer.h:96</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_a7e9739eb3e94344633f7051c2fb9453e"><div class="ttname"><a href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a></div><div class="ttdeci">static const char * mailbox_path(const struct Mailbox *m)</div><div class="ttdoc">Get the Mailbox&#39;s path string.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00223">mailbox.h:223</a></div></div>
<div class="ttc" id="afile_8c_html_a69da918c66c3f22815d6e4aed88b6122"><div class="ttname"><a href="file_8c.html#a69da918c66c3f22815d6e4aed88b6122">mutt_file_opendir</a></div><div class="ttdeci">DIR * mutt_file_opendir(const char *path, enum MuttOpenDirMode mode)</div><div class="ttdoc">Open a directory.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l00542">file.c:542</a></div></div>
<div class="ttc" id="afile_8h_html_a222e4f679593f00cd8c126212b3cdb3ba279decdd0165f19ffc7d35736615f499"><div class="ttname"><a href="file_8h.html#a222e4f679593f00cd8c126212b3cdb3ba279decdd0165f19ffc7d35736615f499">MUTT_OPENDIR_CREATE</a></div><div class="ttdeci">@ MUTT_OPENDIR_CREATE</div><div class="ttdoc">Create the directory if it doesn&#39;t exist.</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00064">file.h:64</a></div></div>
<div class="ttc" id="agroup__sort__api_html_ga36dcef303e81a05e2760cd5c4dbdb603"><div class="ttname"><a href="group__sort__api.html#ga36dcef303e81a05e2760cd5c4dbdb603">maildir_sort_inode</a></div><div class="ttdeci">static int maildir_sort_inode(const void *a, const void *b, void *sdata)</div><div class="ttdoc">Compare two Maildirs by inode number - Implements sort_t -.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00255">mailbox.c:255</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_a9d90d803e76211ae72ffad89d74bc7a1"><div class="ttname"><a href="#a9d90d803e76211ae72ffad89d74bc7a1">maildir_email_new</a></div><div class="ttdeci">struct Email * maildir_email_new(void)</div><div class="ttdoc">Create a Maildir Email.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00067">mailbox.c:67</a></div></div>
<div class="ttc" id="amdemail_8c_html_a5f62aec1b91e24e34dcdf66f19cc9d22"><div class="ttname"><a href="mdemail_8c.html#a5f62aec1b91e24e34dcdf66f19cc9d22">maildir_entry_new</a></div><div class="ttdeci">struct MdEmail * maildir_entry_new(void)</div><div class="ttdoc">Create a new Maildir entry.</div><div class="ttdef"><b>Definition</b> <a href="mdemail_8c_source.html#l00039">mdemail.c:39</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a6b6a50296dd2a31863a43379ef4a343d"><div class="ttname"><a href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a></div><div class="ttdeci">bool mutt_str_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00660">string.c:660</a></div></div>
<div class="ttc" id="apool_8c_html_a41cba27c25d33cb6822789a2856093f2"><div class="ttname"><a href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a></div><div class="ttdeci">struct Buffer * buf_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00082">pool.c:82</a></div></div>
<div class="ttc" id="apool_8c_html_a4cc6068279461cb8628219586dfa35a1"><div class="ttname"><a href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a></div><div class="ttdeci">void buf_pool_release(struct Buffer **ptr)</div><div class="ttdoc">Return a Buffer to the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00096">pool.c:96</a></div></div>
<div class="ttc" id="aprogress_2lib_8h_html_ae0ca330f9059a039a4ece5cb1b00155b"><div class="ttname"><a href="progress_2lib_8h.html#ae0ca330f9059a039a4ece5cb1b00155b">progress_update</a></div><div class="ttdeci">bool progress_update(struct Progress *progress, size_t pos, int percent)</div><div class="ttdoc">Update the state of the progress bar.</div><div class="ttdef"><b>Definition</b> <a href="progress_8c_source.html#l00080">progress.c:80</a></div></div>
<div class="ttc" id="asignal_8c_html_a85c069643781da758ffa8281db66e8f0"><div class="ttname"><a href="signal_8c.html#a85c069643781da758ffa8281db66e8f0">SigInt</a></div><div class="ttdeci">volatile sig_atomic_t SigInt</div><div class="ttdoc">true after SIGINT is received</div><div class="ttdef"><b>Definition</b> <a href="signal_8c_source.html#l00069">signal.c:69</a></div></div>
<div class="ttc" id="astructBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00035">buffer.h:36</a></div></div>
<div class="ttc" id="astructMdEmail_html_aa9130be962cf752ad7672ac362932808"><div class="ttname"><a href="structMdEmail.html#aa9130be962cf752ad7672ac362932808">MdEmail::inode</a></div><div class="ttdeci">ino_t inode</div><div class="ttdoc">Inode number of the file.</div><div class="ttdef"><b>Definition</b> <a href="mdemail_8h_source.html#l00038">mdemail.h:38</a></div></div>
</div><!-- fragment --><div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_ab1a80f2ce21a609b9ab3d61976df29ee_cgraph.svg" width="458" height="678"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_ab1a80f2ce21a609b9ab3d61976df29ee_icgraph.svg" width="307" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2e8ef5194a5698e46defde07cb1a98ad" name="a2e8ef5194a5698e46defde07cb1a98ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e8ef5194a5698e46defde07cb1a98ad">&#9670;&#160;</a></span>maildir_delayed_parsing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void maildir_delayed_parsing </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct MdEmailArray *</td>          <td class="paramname"><span class="paramname"><em>mda</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct Progress *</td>          <td class="paramname"><span class="paramname"><em>progress</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function does the second parsing pass. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mda</td><td>Maildir array to parse </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">progress</td><td>Progress bar </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00338">338</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  340</span>{</div>
<div class="line"><span class="lineno">  341</span>  <span class="keywordtype">char</span> fn[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structHeaderCache.html">HeaderCache</a> *hc = <a class="code hl_function" href="maildir_2hcache_8c.html#a55f606d07015638dfc6e43bef6202270">maildir_hcache_open</a>(m);</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMdEmail.html">MdEmail</a> *md = NULL;</div>
<div class="line"><span class="lineno">  346</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMdEmail.html">MdEmail</a> **mdp = NULL;</div>
<div class="line"><span class="lineno">  347</span>  <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(mdp, mda)</div>
<div class="line"><span class="lineno">  348</span>  {</div>
<div class="line"><span class="lineno">  349</span>    md = *mdp;</div>
<div class="line"><span class="lineno">  350</span>    <span class="keywordflow">if</span> (!md || !md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a> || md-&gt;<a class="code hl_variable" href="structMdEmail.html#a2b43500608052700fb380a5a97911a20">header_parsed</a>)</div>
<div class="line"><span class="lineno">  351</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>    <a class="code hl_function" href="progress_2lib_8h.html#ae0ca330f9059a039a4ece5cb1b00155b">progress_update</a>(progress, ARRAY_FOREACH_IDX_mdp, -1);</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>    snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(m), md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = <a class="code hl_function" href="maildir_2hcache_8c.html#a46d62ed8ddec74f1b4b5aa865a0450e1">maildir_hcache_read</a>(hc, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>, fn);</div>
<div class="line"><span class="lineno">  358</span>    <span class="keywordflow">if</span> (e)</div>
<div class="line"><span class="lineno">  359</span>    {</div>
<div class="line"><span class="lineno">  360</span>      <a class="code hl_function" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>);</div>
<div class="line"><span class="lineno">  361</span>      md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a> = e;</div>
<div class="line"><span class="lineno">  362</span>    }</div>
<div class="line"><span class="lineno">  363</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  364</span>    {</div>
<div class="line"><span class="lineno">  365</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="#a5b3866322416ead2f4f1fd899702f649">maildir_parse_message</a>(fn, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#a6d9062408a8c89b19cf25584dd2ffb57">old</a>, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>))</div>
<div class="line"><span class="lineno">  366</span>      {</div>
<div class="line"><span class="lineno">  367</span>        md-&gt;<a class="code hl_variable" href="structMdEmail.html#a2b43500608052700fb380a5a97911a20">header_parsed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  368</span>        <a class="code hl_function" href="maildir_2hcache_8c.html#a323433bbc3ac06b9a478aba6f326a775">maildir_hcache_store</a>(hc, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>);</div>
<div class="line"><span class="lineno">  369</span>      }</div>
<div class="line"><span class="lineno">  370</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  371</span>      {</div>
<div class="line"><span class="lineno">  372</span>        <a class="code hl_function" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>);</div>
<div class="line"><span class="lineno">  373</span>      }</div>
<div class="line"><span class="lineno">  374</span>    }</div>
<div class="line"><span class="lineno">  375</span>  }</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>  <a class="code hl_function" href="maildir_2hcache_8c.html#a61490c082944273676e7439df8ce1511">maildir_hcache_close</a>(&amp;hc);</div>
<div class="line"><span class="lineno">  378</span>}</div>
<div class="ttc" id="aemail_2email_8c_html_ae9f719d3fc31d00b92bcf9f77d56ee67"><div class="ttname"><a href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a></div><div class="ttdeci">void email_free(struct Email **ptr)</div><div class="ttdoc">Free an Email.</div><div class="ttdef"><b>Definition</b> <a href="email_2email_8c_source.html#l00046">email.c:46</a></div></div>
<div class="ttc" id="amaildir_2hcache_8c_html_a323433bbc3ac06b9a478aba6f326a775"><div class="ttname"><a href="maildir_2hcache_8c.html#a323433bbc3ac06b9a478aba6f326a775">maildir_hcache_store</a></div><div class="ttdeci">int maildir_hcache_store(struct HeaderCache *hc, struct Email *e)</div><div class="ttdoc">Save an Email to the Header Cache.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2hcache_8c_source.html#l00155">hcache.c:155</a></div></div>
<div class="ttc" id="amaildir_2hcache_8c_html_a46d62ed8ddec74f1b4b5aa865a0450e1"><div class="ttname"><a href="maildir_2hcache_8c.html#a46d62ed8ddec74f1b4b5aa865a0450e1">maildir_hcache_read</a></div><div class="ttdeci">struct Email * maildir_hcache_read(struct HeaderCache *hc, struct Email *e, const char *fn)</div><div class="ttdoc">Read an Email from the Header Cache.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2hcache_8c_source.html#l00113">hcache.c:113</a></div></div>
<div class="ttc" id="amaildir_2hcache_8c_html_a55f606d07015638dfc6e43bef6202270"><div class="ttname"><a href="maildir_2hcache_8c.html#a55f606d07015638dfc6e43bef6202270">maildir_hcache_open</a></div><div class="ttdeci">struct HeaderCache * maildir_hcache_open(struct Mailbox *m)</div><div class="ttdoc">Open the Header Cache.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2hcache_8c_source.html#l00096">hcache.c:96</a></div></div>
<div class="ttc" id="amaildir_2hcache_8c_html_a61490c082944273676e7439df8ce1511"><div class="ttname"><a href="maildir_2hcache_8c.html#a61490c082944273676e7439df8ce1511">maildir_hcache_close</a></div><div class="ttdeci">void maildir_hcache_close(struct HeaderCache **ptr)</div><div class="ttdoc">Close the Header Cache.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2hcache_8c_source.html#l00069">hcache.c:69</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_a5b3866322416ead2f4f1fd899702f649"><div class="ttname"><a href="#a5b3866322416ead2f4f1fd899702f649">maildir_parse_message</a></div><div class="ttdeci">bool maildir_parse_message(const char *fname, bool is_old, struct Email *e)</div><div class="ttdoc">Actually parse a maildir message.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00194">mailbox.c:194</a></div></div>
<div class="ttc" id="amutt_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00042">mutt.h:42</a></div></div>
<div class="ttc" id="astructHeaderCache_html"><div class="ttname"><a href="structHeaderCache.html">HeaderCache</a></div><div class="ttdoc">Header Cache.</div><div class="ttdef"><b>Definition</b> <a href="hcache_2lib_8h_source.html#l00085">lib.h:86</a></div></div>
<div class="ttc" id="astructMdEmail_html_a2b43500608052700fb380a5a97911a20"><div class="ttname"><a href="structMdEmail.html#a2b43500608052700fb380a5a97911a20">MdEmail::header_parsed</a></div><div class="ttdeci">bool header_parsed</div><div class="ttdoc">Has the Email header been parsed?</div><div class="ttdef"><b>Definition</b> <a href="mdemail_8h_source.html#l00037">mdemail.h:37</a></div></div>
</div><!-- fragment --><div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a2e8ef5194a5698e46defde07cb1a98ad_cgraph.svg" width="546" height="392"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a2e8ef5194a5698e46defde07cb1a98ad_icgraph.svg" width="350" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa4ce7bc45f6b4f1426bb85851bf6b06c" name="aa4ce7bc45f6b4f1426bb85851bf6b06c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4ce7bc45f6b4f1426bb85851bf6b06c">&#9670;&#160;</a></span>maildir_check_dir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void maildir_check_dir </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>dir_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>check_new</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>check_stats</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for new mail / mail counts. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> to check </td></tr>
    <tr><td class="paramname">dir_name</td><td>Path to <a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">check_new</td><td>if true, check for new mail </td></tr>
    <tr><td class="paramname">check_stats</td><td>if true, count total, new, and flagged messages</td></tr>
  </table>
  </dd>
</dl>
<p>Checks the specified maildir subdir (cur or new) for new mail or mail counts. </p>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00389">389</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  391</span>{</div>
<div class="line"><span class="lineno">  392</span>  DIR *dir = NULL;</div>
<div class="line"><span class="lineno">  393</span>  <span class="keyword">struct </span>dirent *de = NULL;</div>
<div class="line"><span class="lineno">  394</span>  <span class="keywordtype">char</span> *p = NULL;</div>
<div class="line"><span class="lineno">  395</span>  <span class="keyword">struct </span>stat st = { 0 };</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *path = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  398</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *msgpath = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  399</span>  <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(path, <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(m), dir_name);</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>  <span class="comment">/* when $mail_check_recent is set, if the new/ directory hasn&#39;t been modified since</span></div>
<div class="line"><span class="lineno">  402</span><span class="comment">   * the user last exited the mailbox, then we know there is no recent mail.  */</span></div>
<div class="line"><span class="lineno">  403</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_mail_check_recent = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;mail_check_recent&quot;</span>);</div>
<div class="line"><span class="lineno">  404</span>  <span class="keywordflow">if</span> (check_new &amp;&amp; c_mail_check_recent)</div>
<div class="line"><span class="lineno">  405</span>  {</div>
<div class="line"><span class="lineno">  406</span>    <span class="keywordflow">if</span> ((stat(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(path), &amp;st) == 0) &amp;&amp;</div>
<div class="line"><span class="lineno">  407</span>        (<a class="code hl_function" href="file_8c.html#acf5bbc5f63d75ef10f2d16f183de0de0">mutt_file_stat_timespec_compare</a>(&amp;st, <a class="code hl_enumvalue" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>, &amp;m-&gt;<a class="code hl_variable" href="structMailbox.html#ae355489c17bcccdd40768ef3f42dfb39">last_visited</a>) &lt; 0))</div>
<div class="line"><span class="lineno">  408</span>    {</div>
<div class="line"><span class="lineno">  409</span>      check_new = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  410</span>    }</div>
<div class="line"><span class="lineno">  411</span>  }</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>  <span class="keywordflow">if</span> (!(check_new || check_stats))</div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>  dir = <a class="code hl_function" href="file_8c.html#a69da918c66c3f22815d6e4aed88b6122">mutt_file_opendir</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(path), <a class="code hl_enumvalue" href="file_8h.html#a222e4f679593f00cd8c126212b3cdb3ba279decdd0165f19ffc7d35736615f499">MUTT_OPENDIR_CREATE</a>);</div>
<div class="line"><span class="lineno">  417</span>  <span class="keywordflow">if</span> (!dir)</div>
<div class="line"><span class="lineno">  418</span>  {</div>
<div class="line"><span class="lineno">  419</span>    m-&gt;<a class="code hl_variable" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> = <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921daf14aa0761bb43e33a26f31276a5cd608">MUTT_UNKNOWN</a>;</div>
<div class="line"><span class="lineno">  420</span>    <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno">  421</span>  }</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> c_maildir_field_delimiter = *<a class="code hl_function" href="config__cache_8c.html#a0cc761b2657310f7a7c392d4c480cc7d">cc_maildir_field_delimiter</a>();</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>  <span class="keywordtype">char</span> delimiter_version[8] = { 0 };</div>
<div class="line"><span class="lineno">  426</span>  snprintf(delimiter_version, <span class="keyword">sizeof</span>(delimiter_version), <span class="stringliteral">&quot;%c2,&quot;</span>, c_maildir_field_delimiter);</div>
<div class="line"><span class="lineno">  427</span>  <span class="keywordflow">while</span> ((de = readdir(dir)))</div>
<div class="line"><span class="lineno">  428</span>  {</div>
<div class="line"><span class="lineno">  429</span>    <span class="keywordflow">if</span> (*de-&gt;d_name == <span class="charliteral">&#39;.&#39;</span>)</div>
<div class="line"><span class="lineno">  430</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span>    p = strstr(de-&gt;d_name, delimiter_version);</div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordflow">if</span> (p &amp;&amp; strchr(p + 3, <span class="charliteral">&#39;T&#39;</span>))</div>
<div class="line"><span class="lineno">  434</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>    <span class="keywordflow">if</span> (check_stats)</div>
<div class="line"><span class="lineno">  437</span>    {</div>
<div class="line"><span class="lineno">  438</span>      m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>++;</div>
<div class="line"><span class="lineno">  439</span>      <span class="keywordflow">if</span> (p &amp;&amp; strchr(p + 3, <span class="charliteral">&#39;F&#39;</span>))</div>
<div class="line"><span class="lineno">  440</span>        m-&gt;<a class="code hl_variable" href="structMailbox.html#ad8cc58166581060ab58acf36f22bfd4d">msg_flagged</a>++;</div>
<div class="line"><span class="lineno">  441</span>    }</div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordflow">if</span> (!p || !strchr(p + 3, <span class="charliteral">&#39;S&#39;</span>))</div>
<div class="line"><span class="lineno">  443</span>    {</div>
<div class="line"><span class="lineno">  444</span>      <span class="keywordflow">if</span> (check_stats)</div>
<div class="line"><span class="lineno">  445</span>        m-&gt;<a class="code hl_variable" href="structMailbox.html#af2632307a08699cf251e6599c8a84cac">msg_unread</a>++;</div>
<div class="line"><span class="lineno">  446</span>      <span class="keywordflow">if</span> (check_new)</div>
<div class="line"><span class="lineno">  447</span>      {</div>
<div class="line"><span class="lineno">  448</span>        <span class="keywordflow">if</span> (c_mail_check_recent)</div>
<div class="line"><span class="lineno">  449</span>        {</div>
<div class="line"><span class="lineno">  450</span>          <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(msgpath, <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(path), de-&gt;d_name);</div>
<div class="line"><span class="lineno">  451</span>          <span class="comment">/* ensure this message was received since leaving this m */</span></div>
<div class="line"><span class="lineno">  452</span>          <span class="keywordflow">if</span> ((stat(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(msgpath), &amp;st) == 0) &amp;&amp;</div>
<div class="line"><span class="lineno">  453</span>              (<a class="code hl_function" href="file_8c.html#acf5bbc5f63d75ef10f2d16f183de0de0">mutt_file_stat_timespec_compare</a>(&amp;st, <a class="code hl_enumvalue" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139a25e70e7259f84aeac06539334a6b43e2">MUTT_STAT_CTIME</a>, &amp;m-&gt;<a class="code hl_variable" href="structMailbox.html#ae355489c17bcccdd40768ef3f42dfb39">last_visited</a>) &lt;= 0))</div>
<div class="line"><span class="lineno">  454</span>          {</div>
<div class="line"><span class="lineno">  455</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  456</span>          }</div>
<div class="line"><span class="lineno">  457</span>        }</div>
<div class="line"><span class="lineno">  458</span>        m-&gt;<a class="code hl_variable" href="structMailbox.html#a185d46a268fdf1e34ee061a28d51414e">has_new</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  459</span>        <span class="keywordflow">if</span> (check_stats)</div>
<div class="line"><span class="lineno">  460</span>        {</div>
<div class="line"><span class="lineno">  461</span>          m-&gt;<a class="code hl_variable" href="structMailbox.html#a3348499d9eb11b4e48f073d2eddb2be4">msg_new</a>++;</div>
<div class="line"><span class="lineno">  462</span>        }</div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  464</span>        {</div>
<div class="line"><span class="lineno">  465</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  466</span>        }</div>
<div class="line"><span class="lineno">  467</span>      }</div>
<div class="line"><span class="lineno">  468</span>    }</div>
<div class="line"><span class="lineno">  469</span>  }</div>
<div class="line"><span class="lineno">  470</span> </div>
<div class="line"><span class="lineno">  471</span>  closedir(dir);</div>
<div class="line"><span class="lineno">  472</span> </div>
<div class="line"><span class="lineno">  473</span>cleanup:</div>
<div class="line"><span class="lineno">  474</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;path);</div>
<div class="line"><span class="lineno">  475</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;msgpath);</div>
<div class="line"><span class="lineno">  476</span>}</div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921daf14aa0761bb43e33a26f31276a5cd608"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921daf14aa0761bb43e33a26f31276a5cd608">MUTT_UNKNOWN</a></div><div class="ttdeci">@ MUTT_UNKNOWN</div><div class="ttdoc">Mailbox wasn&#39;t recognised.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00044">mailbox.h:44</a></div></div>
<div class="ttc" id="afile_8c_html_acf5bbc5f63d75ef10f2d16f183de0de0"><div class="ttname"><a href="file_8c.html#acf5bbc5f63d75ef10f2d16f183de0de0">mutt_file_stat_timespec_compare</a></div><div class="ttdeci">int mutt_file_stat_timespec_compare(struct stat *st, enum MuttStatType type, struct timespec *b)</div><div class="ttdoc">Compare stat info with a time value.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l01512">file.c:1512</a></div></div>
<div class="ttc" id="afile_8h_html_ad852389693b4c5a8d79c25e84b2d1139a25e70e7259f84aeac06539334a6b43e2"><div class="ttname"><a href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139a25e70e7259f84aeac06539334a6b43e2">MUTT_STAT_CTIME</a></div><div class="ttdeci">@ MUTT_STAT_CTIME</div><div class="ttdoc">File/dir&#39;s ctime - creation time.</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00055">file.h:55</a></div></div>
<div class="ttc" id="afile_8h_html_ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df"><div class="ttname"><a href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a></div><div class="ttdeci">@ MUTT_STAT_MTIME</div><div class="ttdoc">File/dir&#39;s mtime - last modified time.</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00054">file.h:54</a></div></div>
<div class="ttc" id="astructMailbox_html_a185d46a268fdf1e34ee061a28d51414e"><div class="ttname"><a href="structMailbox.html#a185d46a268fdf1e34ee061a28d51414e">Mailbox::has_new</a></div><div class="ttdeci">bool has_new</div><div class="ttdoc">Mailbox has new mail.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00085">mailbox.h:85</a></div></div>
<div class="ttc" id="astructMailbox_html_a3348499d9eb11b4e48f073d2eddb2be4"><div class="ttname"><a href="structMailbox.html#a3348499d9eb11b4e48f073d2eddb2be4">Mailbox::msg_new</a></div><div class="ttdeci">int msg_new</div><div class="ttdoc">Number of new messages.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00092">mailbox.h:92</a></div></div>
<div class="ttc" id="astructMailbox_html_a5638329fb2ebd4bbe1f4a949ec8de174"><div class="ttname"><a href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">Mailbox::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Mailbox type.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00102">mailbox.h:102</a></div></div>
<div class="ttc" id="astructMailbox_html_ad8cc58166581060ab58acf36f22bfd4d"><div class="ttname"><a href="structMailbox.html#ad8cc58166581060ab58acf36f22bfd4d">Mailbox::msg_flagged</a></div><div class="ttdeci">int msg_flagged</div><div class="ttdoc">Number of flagged messages.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00090">mailbox.h:90</a></div></div>
<div class="ttc" id="astructMailbox_html_ae355489c17bcccdd40768ef3f42dfb39"><div class="ttname"><a href="structMailbox.html#ae355489c17bcccdd40768ef3f42dfb39">Mailbox::last_visited</a></div><div class="ttdeci">struct timespec last_visited</div><div class="ttdoc">Time of last exit from this mailbox.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00104">mailbox.h:104</a></div></div>
<div class="ttc" id="astructMailbox_html_af2632307a08699cf251e6599c8a84cac"><div class="ttname"><a href="structMailbox.html#af2632307a08699cf251e6599c8a84cac">Mailbox::msg_unread</a></div><div class="ttdeci">int msg_unread</div><div class="ttdoc">Number of unread messages.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00089">mailbox.h:89</a></div></div>
</div><!-- fragment --><div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_aa4ce7bc45f6b4f1426bb85851bf6b06c_cgraph.svg" width="495" height="483"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_aa4ce7bc45f6b4f1426bb85851bf6b06c_icgraph.svg" width="332" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4b42bc7ae8e488c3ae0306e008f664d6" name="a4b42bc7ae8e488c3ae0306e008f664d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b42bc7ae8e488c3ae0306e008f664d6">&#9670;&#160;</a></span>maildir_read_dir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int maildir_read_dir </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>subdir</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read a Maildir style mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">subdir</td><td>Subdir of the maildir mailbox to read from </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00485">485</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  486</span>{</div>
<div class="line"><span class="lineno">  487</span>  <span class="keywordflow">if</span> (!m)</div>
<div class="line"><span class="lineno">  488</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>  <a class="code hl_function" href="mutt_2path_8c.html#a5ab1c7e67015696230c62a80223bc752">mutt_path_tidy</a>(&amp;m-&gt;<a class="code hl_variable" href="structMailbox.html#aa44c1232018ddd1953039aa857b23ab5">pathbuf</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>  <span class="keyword">struct </span>Progress *progress = NULL;</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>  <span class="keywordflow">if</span> (m-&gt;<a class="code hl_variable" href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">verbose</a>)</div>
<div class="line"><span class="lineno">  495</span>  {</div>
<div class="line"><span class="lineno">  496</span>    progress = <a class="code hl_function" href="progress_2lib_8h.html#a551a8d9e844532e2851d6bee121c09b3">progress_new</a>(<a class="code hl_enumvalue" href="progress_2lib_8h.html#a0a558d538b8742adf8b1251f2848ba75adc0a9dcc8b2f53e3698038e7164b6489">MUTT_PROGRESS_READ</a>, 0);</div>
<div class="line"><span class="lineno">  497</span>    <a class="code hl_function" href="progress_2lib_8h.html#abd7142bf1b3c664cf1c3edca7c9b41d8">progress_set_message</a>(progress, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Scanning %s...&quot;</span>), <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(m));</div>
<div class="line"><span class="lineno">  498</span>  }</div>
<div class="line"><span class="lineno">  499</span> </div>
<div class="line"><span class="lineno">  500</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMaildirMboxData.html">MaildirMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="maildir_2mdata_8c.html#a544f68cdf8aa0a5206fb0ea109c5f601">maildir_mdata_get</a>(m);</div>
<div class="line"><span class="lineno">  501</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)</div>
<div class="line"><span class="lineno">  502</span>  {</div>
<div class="line"><span class="lineno">  503</span>    <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="maildir_2mdata_8c.html#a561413110c315e2a0a163c9163c55b8c">maildir_mdata_new</a>();</div>
<div class="line"><span class="lineno">  504</span>    m-&gt;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>;</div>
<div class="line"><span class="lineno">  505</span>    m-&gt;<a class="code hl_variable" href="structMailbox.html#a015fb45ad1a08cf8e44e3553202834fb">mdata_free</a> = <a class="code hl_function" href="group__mailbox__mdata__free.html#ga30a12f26c1f8322d52d31f593ce54777">maildir_mdata_free</a>;</div>
<div class="line"><span class="lineno">  506</span>  }</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>  <span class="keyword">struct </span>MdEmailArray mda = <a class="code hl_define" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div>
<div class="line"><span class="lineno">  509</span>  <span class="keywordtype">int</span> rc = <a class="code hl_function" href="#ab1a80f2ce21a609b9ab3d61976df29ee">maildir_parse_dir</a>(m, &amp;mda, subdir, progress);</div>
<div class="line"><span class="lineno">  510</span>  <a class="code hl_function" href="progress_2lib_8h.html#ab4c7a63427cdcaae2b1147ff6f010af4">progress_free</a>(&amp;progress);</div>
<div class="line"><span class="lineno">  511</span>  <span class="keywordflow">if</span> (rc &lt; 0)</div>
<div class="line"><span class="lineno">  512</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  513</span> </div>
<div class="line"><span class="lineno">  514</span>  <span class="keywordflow">if</span> (m-&gt;<a class="code hl_variable" href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">verbose</a>)</div>
<div class="line"><span class="lineno">  515</span>  {</div>
<div class="line"><span class="lineno">  516</span>    progress = <a class="code hl_function" href="progress_2lib_8h.html#a551a8d9e844532e2851d6bee121c09b3">progress_new</a>(<a class="code hl_enumvalue" href="progress_2lib_8h.html#a0a558d538b8742adf8b1251f2848ba75adc0a9dcc8b2f53e3698038e7164b6489">MUTT_PROGRESS_READ</a>, <a class="code hl_define" href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a>(&amp;mda));</div>
<div class="line"><span class="lineno">  517</span>    <a class="code hl_function" href="progress_2lib_8h.html#abd7142bf1b3c664cf1c3edca7c9b41d8">progress_set_message</a>(progress, <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Reading %s...&quot;</span>), <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(m));</div>
<div class="line"><span class="lineno">  518</span>  }</div>
<div class="line"><span class="lineno">  519</span>  <a class="code hl_function" href="#a2e8ef5194a5698e46defde07cb1a98ad">maildir_delayed_parsing</a>(m, &amp;mda, progress);</div>
<div class="line"><span class="lineno">  520</span>  <a class="code hl_function" href="progress_2lib_8h.html#ab4c7a63427cdcaae2b1147ff6f010af4">progress_free</a>(&amp;progress);</div>
<div class="line"><span class="lineno">  521</span> </div>
<div class="line"><span class="lineno">  522</span>  <a class="code hl_function" href="#a5de73eb9f624c898094973ba07d8f688">maildir_move_to_mailbox</a>(m, &amp;mda);</div>
<div class="line"><span class="lineno">  523</span>  <a class="code hl_function" href="mdemail_8c.html#ad8abd173a6a46ddced46784106b8ae5b">maildirarray_clear</a>(&amp;mda);</div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>  <span class="keywordflow">if</span> (!mdata-&gt;<a class="code hl_variable" href="structMaildirMboxData.html#a5488c7ef8ecc266e14a131ba450c73e3">umask</a>)</div>
<div class="line"><span class="lineno">  526</span>    mdata-&gt;<a class="code hl_variable" href="structMaildirMboxData.html#a5488c7ef8ecc266e14a131ba450c73e3">umask</a> = <a class="code hl_function" href="maildir_2shared_8c.html#a9dc1eb0ca0344878f447499039964e29">maildir_umask</a>(m);</div>
<div class="line"><span class="lineno">  527</span> </div>
<div class="line"><span class="lineno">  528</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  529</span>}</div>
<div class="ttc" id="aarray_8h_html_af50a4967d27a0531a1b10a23fc22fe05"><div class="ttname"><a href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a></div><div class="ttdeci">#define ARRAY_HEAD_INITIALIZER</div><div class="ttdoc">Static initializer for arrays.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00058">array.h:58</a></div></div>
<div class="ttc" id="agroup__mailbox__mdata__free_html_ga30a12f26c1f8322d52d31f593ce54777"><div class="ttname"><a href="group__mailbox__mdata__free.html#ga30a12f26c1f8322d52d31f593ce54777">maildir_mdata_free</a></div><div class="ttdeci">void maildir_mdata_free(void **ptr)</div><div class="ttdoc">Free the private Mailbox data - Implements Mailbox::mdata_free() -.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mdata_8c_source.html#l00037">mdata.c:37</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_a2e8ef5194a5698e46defde07cb1a98ad"><div class="ttname"><a href="#a2e8ef5194a5698e46defde07cb1a98ad">maildir_delayed_parsing</a></div><div class="ttdeci">static void maildir_delayed_parsing(struct Mailbox *m, struct MdEmailArray *mda, struct Progress *progress)</div><div class="ttdoc">This function does the second parsing pass.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00338">mailbox.c:338</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_a5de73eb9f624c898094973ba07d8f688"><div class="ttname"><a href="#a5de73eb9f624c898094973ba07d8f688">maildir_move_to_mailbox</a></div><div class="ttdeci">static int maildir_move_to_mailbox(struct Mailbox *m, const struct MdEmailArray *mda)</div><div class="ttdoc">Copy the Maildir list to the Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00215">mailbox.c:215</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_ab1a80f2ce21a609b9ab3d61976df29ee"><div class="ttname"><a href="#ab1a80f2ce21a609b9ab3d61976df29ee">maildir_parse_dir</a></div><div class="ttdeci">static int maildir_parse_dir(struct Mailbox *m, struct MdEmailArray *mda, const char *subdir, struct Progress *progress)</div><div class="ttdoc">Read a Maildir mailbox.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00273">mailbox.c:273</a></div></div>
<div class="ttc" id="amaildir_2mdata_8c_html_a544f68cdf8aa0a5206fb0ea109c5f601"><div class="ttname"><a href="maildir_2mdata_8c.html#a544f68cdf8aa0a5206fb0ea109c5f601">maildir_mdata_get</a></div><div class="ttdeci">struct MaildirMboxData * maildir_mdata_get(struct Mailbox *m)</div><div class="ttdoc">Get the private data for this Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mdata_8c_source.html#l00059">mdata.c:59</a></div></div>
<div class="ttc" id="amaildir_2mdata_8c_html_a561413110c315e2a0a163c9163c55b8c"><div class="ttname"><a href="maildir_2mdata_8c.html#a561413110c315e2a0a163c9163c55b8c">maildir_mdata_new</a></div><div class="ttdeci">struct MaildirMboxData * maildir_mdata_new(void)</div><div class="ttdoc">Create a new MaildirMboxData object.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mdata_8c_source.html#l00049">mdata.c:49</a></div></div>
<div class="ttc" id="amaildir_2shared_8c_html_a9dc1eb0ca0344878f447499039964e29"><div class="ttname"><a href="maildir_2shared_8c.html#a9dc1eb0ca0344878f447499039964e29">maildir_umask</a></div><div class="ttdeci">mode_t maildir_umask(struct Mailbox *m)</div><div class="ttdoc">Create a umask from the mailbox directory.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2shared_8c_source.html#l00047">shared.c:47</a></div></div>
<div class="ttc" id="amdemail_8c_html_ad8abd173a6a46ddced46784106b8ae5b"><div class="ttname"><a href="mdemail_8c.html#ad8abd173a6a46ddced46784106b8ae5b">maildirarray_clear</a></div><div class="ttdeci">void maildirarray_clear(struct MdEmailArray *mda)</div><div class="ttdoc">Free a Maildir array.</div><div class="ttdef"><b>Definition</b> <a href="mdemail_8c_source.html#l00064">mdemail.c:64</a></div></div>
<div class="ttc" id="amutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="amutt_2path_8c_html_a5ab1c7e67015696230c62a80223bc752"><div class="ttname"><a href="mutt_2path_8c.html#a5ab1c7e67015696230c62a80223bc752">mutt_path_tidy</a></div><div class="ttdeci">bool mutt_path_tidy(struct Buffer *path, bool is_dir)</div><div class="ttdoc">Remove unnecessary parts of a path.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2path_8c_source.html#l00169">path.c:169</a></div></div>
<div class="ttc" id="aprogress_2lib_8h_html_a0a558d538b8742adf8b1251f2848ba75adc0a9dcc8b2f53e3698038e7164b6489"><div class="ttname"><a href="progress_2lib_8h.html#a0a558d538b8742adf8b1251f2848ba75adc0a9dcc8b2f53e3698038e7164b6489">MUTT_PROGRESS_READ</a></div><div class="ttdeci">@ MUTT_PROGRESS_READ</div><div class="ttdoc">Progress tracks elements, according to $read_inc</div><div class="ttdef"><b>Definition</b> <a href="progress_2lib_8h_source.html#l00083">lib.h:83</a></div></div>
<div class="ttc" id="aprogress_2lib_8h_html_a551a8d9e844532e2851d6bee121c09b3"><div class="ttname"><a href="progress_2lib_8h.html#a551a8d9e844532e2851d6bee121c09b3">progress_new</a></div><div class="ttdeci">struct Progress * progress_new(enum ProgressType type, size_t size)</div><div class="ttdoc">Create a new Progress Bar.</div><div class="ttdef"><b>Definition</b> <a href="progress_8c_source.html#l00139">progress.c:139</a></div></div>
<div class="ttc" id="aprogress_2lib_8h_html_ab4c7a63427cdcaae2b1147ff6f010af4"><div class="ttname"><a href="progress_2lib_8h.html#ab4c7a63427cdcaae2b1147ff6f010af4">progress_free</a></div><div class="ttdeci">void progress_free(struct Progress **ptr)</div><div class="ttdoc">Free a Progress Bar.</div><div class="ttdef"><b>Definition</b> <a href="progress_8c_source.html#l00110">progress.c:110</a></div></div>
<div class="ttc" id="aprogress_2lib_8h_html_abd7142bf1b3c664cf1c3edca7c9b41d8"><div class="ttname"><a href="progress_2lib_8h.html#abd7142bf1b3c664cf1c3edca7c9b41d8">progress_set_message</a></div><div class="ttdeci">void progress_set_message(struct Progress *progress, const char *fmt,...) __attribute__((__format__(__printf__</div></div>
<div class="ttc" id="astructMailbox_html_a015fb45ad1a08cf8e44e3553202834fb"><div class="ttname"><a href="structMailbox.html#a015fb45ad1a08cf8e44e3553202834fb">Mailbox::mdata_free</a></div><div class="ttdeci">void(* mdata_free)(void **ptr)</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00143">mailbox.h:143</a></div></div>
<div class="ttc" id="astructMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00132">mailbox.h:132</a></div></div>
<div class="ttc" id="astructMailbox_html_aa44c1232018ddd1953039aa857b23ab5"><div class="ttname"><a href="structMailbox.html#aa44c1232018ddd1953039aa857b23ab5">Mailbox::pathbuf</a></div><div class="ttdeci">struct Buffer pathbuf</div><div class="ttdoc">Path of the Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00080">mailbox.h:80</a></div></div>
<div class="ttc" id="astructMailbox_html_af1ff47b8f14a4503c9b8473582b13d5a"><div class="ttname"><a href="structMailbox.html#af1ff47b8f14a4503c9b8473582b13d5a">Mailbox::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdoc">Display status messages?</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00117">mailbox.h:117</a></div></div>
<div class="ttc" id="astructMaildirMboxData_html"><div class="ttname"><a href="structMaildirMboxData.html">MaildirMboxData</a></div><div class="ttdoc">Maildir-specific Mailbox data -.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mdata_8h_source.html#l00034">mdata.h:35</a></div></div>
<div class="ttc" id="astructMaildirMboxData_html_a5488c7ef8ecc266e14a131ba450c73e3"><div class="ttname"><a href="structMaildirMboxData.html#a5488c7ef8ecc266e14a131ba450c73e3">MaildirMboxData::umask</a></div><div class="ttdeci">mode_t umask</div><div class="ttdoc">umask to use when creating files</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mdata_8h_source.html#l00038">mdata.h:38</a></div></div>
</div><!-- fragment --><div id="dynsection-17" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a4b42bc7ae8e488c3ae0306e008f664d6_cgraph.svg" width="540" height="675"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-18" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a4b42bc7ae8e488c3ae0306e008f664d6_icgraph.svg" width="322" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0a574fe0e1b5e2b5fb122b1cf4335824" name="a0a574fe0e1b5e2b5fb122b1cf4335824"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a574fe0e1b5e2b5fb122b1cf4335824">&#9670;&#160;</a></span>maildir_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432">MxStatus</a> maildir_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for new mail. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">enum</td><td><a class="el" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432" title="Return values from mbox_check(), mbox_check_stats(), mbox_sync(), and mbox_close()">MxStatus</a></td></tr>
  </table>
  </dd>
</dl>
<p>This function handles arrival of new mail and reopening of maildir folders. The basic idea here is we check to see if either the new or cur subdirectories have changed, and if so, we scan them for the list of files. We check for newly added messages, and then merge the flags messages we already knew about. We don't treat either subdirectory differently, as mail could be copied directly into the cur directory from another agent. </p>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00543">543</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  544</span>{</div>
<div class="line"><span class="lineno">  545</span>  <span class="keyword">struct </span>stat st_new = { 0 }; <span class="comment">/* status of the &quot;new&quot; subdirectory */</span></div>
<div class="line"><span class="lineno">  546</span>  <span class="keyword">struct </span>stat st_cur = { 0 }; <span class="comment">/* status of the &quot;cur&quot; subdirectory */</span></div>
<div class="line"><span class="lineno">  547</span>  <span class="keywordtype">int</span> changed = <a class="code hl_define" href="#aa32d2f8315f63e8e0c4e6712f7317a6e">MMC_NO_DIRS</a>;  <span class="comment">/* which subdirectories have changed */</span></div>
<div class="line"><span class="lineno">  548</span>  <span class="keywordtype">bool</span> occult = <span class="keyword">false</span>;        <span class="comment">/* messages were removed from the mailbox */</span></div>
<div class="line"><span class="lineno">  549</span>  <span class="keywordtype">int</span> num_new = 0;            <span class="comment">/* number of new messages added to the mailbox */</span></div>
<div class="line"><span class="lineno">  550</span>  <span class="keywordtype">bool</span> flags_changed = <span class="keyword">false</span>; <span class="comment">/* message flags were changed in the mailbox */</span></div>
<div class="line"><span class="lineno">  551</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structHashTable.html">HashTable</a> *hash_names = NULL; <span class="comment">// Hash Table: &quot;base-filename&quot; -&gt; MdEmail</span></div>
<div class="line"><span class="lineno">  552</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMaildirMboxData.html">MaildirMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="maildir_2mdata_8c.html#a544f68cdf8aa0a5206fb0ea109c5f601">maildir_mdata_get</a>(m);</div>
<div class="line"><span class="lineno">  553</span> </div>
<div class="line"><span class="lineno">  554</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_check_new = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#af98065e32243ce9331f93b7f30247d47">sub</a>, <span class="stringliteral">&quot;check_new&quot;</span>);</div>
<div class="line"><span class="lineno">  555</span>  <span class="keywordflow">if</span> (!c_check_new)</div>
<div class="line"><span class="lineno">  556</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div>
<div class="line"><span class="lineno">  557</span> </div>
<div class="line"><span class="lineno">  558</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  559</span>  <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(buf, <span class="stringliteral">&quot;%s/new&quot;</span>, <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(m));</div>
<div class="line"><span class="lineno">  560</span>  <span class="keywordflow">if</span> (stat(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf), &amp;st_new) == -1)</div>
<div class="line"><span class="lineno">  561</span>  {</div>
<div class="line"><span class="lineno">  562</span>    <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  563</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div>
<div class="line"><span class="lineno">  564</span>  }</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>  <a class="code hl_function" href="buffer_8c.html#a02123807d31181ac701b566226e93b33">buf_printf</a>(buf, <span class="stringliteral">&quot;%s/cur&quot;</span>, <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(m));</div>
<div class="line"><span class="lineno">  567</span>  <span class="keywordflow">if</span> (stat(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf), &amp;st_cur) == -1)</div>
<div class="line"><span class="lineno">  568</span>  {</div>
<div class="line"><span class="lineno">  569</span>    <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  570</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a>;</div>
<div class="line"><span class="lineno">  571</span>  }</div>
<div class="line"><span class="lineno">  572</span> </div>
<div class="line"><span class="lineno">  573</span>  <span class="comment">/* determine which subdirectories need to be scanned */</span></div>
<div class="line"><span class="lineno">  574</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="file_8c.html#acf5bbc5f63d75ef10f2d16f183de0de0">mutt_file_stat_timespec_compare</a>(&amp;st_new, <a class="code hl_enumvalue" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>, &amp;mdata-&gt;<a class="code hl_variable" href="structMaildirMboxData.html#ad8e5632fb967f844f10f0643cdd99183">mtime</a>) &gt; 0)</div>
<div class="line"><span class="lineno">  575</span>    changed = <a class="code hl_define" href="#ab308421b848b9caed6fc2ac4612b1212">MMC_NEW_DIR</a>;</div>
<div class="line"><span class="lineno">  576</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="file_8c.html#acf5bbc5f63d75ef10f2d16f183de0de0">mutt_file_stat_timespec_compare</a>(&amp;st_cur, <a class="code hl_enumvalue" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>, &amp;mdata-&gt;<a class="code hl_variable" href="structMaildirMboxData.html#a432d4f7db70109845edca85319390763">mtime_cur</a>) &gt; 0)</div>
<div class="line"><span class="lineno">  577</span>    changed |= <a class="code hl_define" href="#a71970dc06915beff8deee456e5af5ee4">MMC_CUR_DIR</a>;</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>  <span class="keywordflow">if</span> (changed == <a class="code hl_define" href="#aa32d2f8315f63e8e0c4e6712f7317a6e">MMC_NO_DIRS</a>)</div>
<div class="line"><span class="lineno">  580</span>  {</div>
<div class="line"><span class="lineno">  581</span>    <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  582</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>; <span class="comment">/* nothing to do */</span></div>
<div class="line"><span class="lineno">  583</span>  }</div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span>  <span class="comment">/* Update the modification times on the mailbox.</span></div>
<div class="line"><span class="lineno">  586</span><span class="comment">   *</span></div>
<div class="line"><span class="lineno">  587</span><span class="comment">   * The monitor code notices changes in the open mailbox too quickly.</span></div>
<div class="line"><span class="lineno">  588</span><span class="comment">   * In practice, this sometimes leads to all the new messages not being</span></div>
<div class="line"><span class="lineno">  589</span><span class="comment">   * noticed during the SAME group of mtime stat updates.  To work around</span></div>
<div class="line"><span class="lineno">  590</span><span class="comment">   * the problem, don&#39;t update the stat times for a monitor caused check. */</span></div>
<div class="line"><span class="lineno">  591</span><span class="preprocessor">#ifdef USE_INOTIFY</span></div>
<div class="line"><span class="lineno">  592</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="monitor_8c.html#aa9e22d715c7468a084e0f73b04d0e38c">MonitorCurMboxChanged</a>)</div>
<div class="line"><span class="lineno">  593</span>  {</div>
<div class="line"><span class="lineno">  594</span>    <a class="code hl_variable" href="monitor_8c.html#aa9e22d715c7468a084e0f73b04d0e38c">MonitorCurMboxChanged</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  595</span>  }</div>
<div class="line"><span class="lineno">  596</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  597</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  598</span>  {</div>
<div class="line"><span class="lineno">  599</span>    <a class="code hl_function" href="file_8c.html#a0a1a67cd697cb0074317215d4ce6c9e3">mutt_file_get_stat_timespec</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structMaildirMboxData.html#a432d4f7db70109845edca85319390763">mtime_cur</a>, &amp;st_cur, <a class="code hl_enumvalue" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>);</div>
<div class="line"><span class="lineno">  600</span>    <a class="code hl_function" href="file_8c.html#a0a1a67cd697cb0074317215d4ce6c9e3">mutt_file_get_stat_timespec</a>(&amp;mdata-&gt;<a class="code hl_variable" href="structMaildirMboxData.html#ad8e5632fb967f844f10f0643cdd99183">mtime</a>, &amp;st_new, <a class="code hl_enumvalue" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>);</div>
<div class="line"><span class="lineno">  601</span>  }</div>
<div class="line"><span class="lineno">  602</span> </div>
<div class="line"><span class="lineno">  603</span>  <span class="comment">/* do a fast scan of just the filenames in</span></div>
<div class="line"><span class="lineno">  604</span><span class="comment">   * the subdirectories that have changed.  */</span></div>
<div class="line"><span class="lineno">  605</span>  <span class="keyword">struct </span>MdEmailArray mda = <a class="code hl_define" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div>
<div class="line"><span class="lineno">  606</span>  <span class="keywordflow">if</span> (changed &amp; <a class="code hl_define" href="#ab308421b848b9caed6fc2ac4612b1212">MMC_NEW_DIR</a>)</div>
<div class="line"><span class="lineno">  607</span>    <a class="code hl_function" href="#ab1a80f2ce21a609b9ab3d61976df29ee">maildir_parse_dir</a>(m, &amp;mda, <span class="stringliteral">&quot;new&quot;</span>, NULL);</div>
<div class="line"><span class="lineno">  608</span>  <span class="keywordflow">if</span> (changed &amp; <a class="code hl_define" href="#a71970dc06915beff8deee456e5af5ee4">MMC_CUR_DIR</a>)</div>
<div class="line"><span class="lineno">  609</span>    <a class="code hl_function" href="#ab1a80f2ce21a609b9ab3d61976df29ee">maildir_parse_dir</a>(m, &amp;mda, <span class="stringliteral">&quot;cur&quot;</span>, NULL);</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>  <span class="comment">/* we create a hash table keyed off the canonical (sans flags) filename</span></div>
<div class="line"><span class="lineno">  612</span><span class="comment">   * of each message we scanned.  This is used in the loop over the</span></div>
<div class="line"><span class="lineno">  613</span><span class="comment">   * existing messages below to do some correlation.  */</span></div>
<div class="line"><span class="lineno">  614</span>  hash_names = <a class="code hl_function" href="hash_8c.html#a75439958fb5faf57c039faec79d19998">mutt_hash_new</a>(<a class="code hl_define" href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a>(&amp;mda), <a class="code hl_define" href="hash_8h.html#a091c40218093334e24d80f897e76a977">MUTT_HASH_NO_FLAGS</a>);</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMdEmail.html">MdEmail</a> *md = NULL;</div>
<div class="line"><span class="lineno">  617</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMdEmail.html">MdEmail</a> **mdp = NULL;</div>
<div class="line"><span class="lineno">  618</span>  <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(mdp, &amp;mda)</div>
<div class="line"><span class="lineno">  619</span>  {</div>
<div class="line"><span class="lineno">  620</span>    md = *mdp;</div>
<div class="line"><span class="lineno">  621</span>    <a class="code hl_function" href="maildir_2shared_8c.html#ae0026c4d5bd99be78469095721d1e744">maildir_canon_filename</a>(buf, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  622</span>    md-&gt;<a class="code hl_variable" href="structMdEmail.html#a6237939d0eb6bb492f79a65a1638a0b2">canon_fname</a> = <a class="code hl_function" href="buffer_8c.html#ad76477cc0c660bc50162393e997233eb">buf_strdup</a>(buf);</div>
<div class="line"><span class="lineno">  623</span>    <a class="code hl_function" href="hash_8c.html#a10bd305a8183db9829caee9ea1bac2f5">mutt_hash_insert</a>(hash_names, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a6237939d0eb6bb492f79a65a1638a0b2">canon_fname</a>, md);</div>
<div class="line"><span class="lineno">  624</span>  }</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>  <span class="comment">/* check for modifications and adjust flags */</span></div>
<div class="line"><span class="lineno">  627</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m-&gt;<a class="code hl_variable" href="structMailbox.html#a3d7ee4badbaec0d67db9e29d5ba716ee">msg_count</a>; i++)</div>
<div class="line"><span class="lineno">  628</span>  {</div>
<div class="line"><span class="lineno">  629</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = m-&gt;<a class="code hl_variable" href="structMailbox.html#a73ca79846dce43a175892c5d88e932ca">emails</a>[i];</div>
<div class="line"><span class="lineno">  630</span>    <span class="keywordflow">if</span> (!e)</div>
<div class="line"><span class="lineno">  631</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>    <a class="code hl_function" href="maildir_2shared_8c.html#ae0026c4d5bd99be78469095721d1e744">maildir_canon_filename</a>(buf, e-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  634</span>    md = <a class="code hl_function" href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a>(hash_names, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno">  635</span>    <span class="keywordflow">if</span> (md &amp;&amp; md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>)</div>
<div class="line"><span class="lineno">  636</span>    {</div>
<div class="line"><span class="lineno">  637</span>      <span class="comment">/* message already exists, merge flags */</span></div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span>      <span class="comment">/* check to see if the message has moved to a different</span></div>
<div class="line"><span class="lineno">  640</span><span class="comment">       * subdirectory.  If so, update the associated filename.  */</span></div>
<div class="line"><span class="lineno">  641</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt_2string_8c.html#a6b6a50296dd2a31863a43379ef4a343d">mutt_str_equal</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>))</div>
<div class="line"><span class="lineno">  642</span>        <a class="code hl_function" href="mutt_2string_8c.html#af8c32ffc64dd55e92001a974a4be6bbf">mutt_str_replace</a>(&amp;e-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>);</div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span>      <span class="comment">/* if the user hasn&#39;t modified the flags on this message, update</span></div>
<div class="line"><span class="lineno">  645</span><span class="comment">       * the flags we just detected.  */</span></div>
<div class="line"><span class="lineno">  646</span>      <span class="keywordflow">if</span> (!e-&gt;<a class="code hl_variable" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a>)</div>
<div class="line"><span class="lineno">  647</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="maildir_2shared_8c.html#a79713d04e839c3782ef9e0b7bc25e9c0">maildir_update_flags</a>(m, e, md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>))</div>
<div class="line"><span class="lineno">  648</span>          flags_changed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  649</span> </div>
<div class="line"><span class="lineno">  650</span>      <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> == e-&gt;<a class="code hl_variable" href="structEmail.html#ad14bdb707d3b5811734782cfb570d9eb">trash</a>)</div>
<div class="line"><span class="lineno">  651</span>      {</div>
<div class="line"><span class="lineno">  652</span>        <span class="keywordflow">if</span> (e-&gt;<a class="code hl_variable" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> != md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a>)</div>
<div class="line"><span class="lineno">  653</span>        {</div>
<div class="line"><span class="lineno">  654</span>          e-&gt;<a class="code hl_variable" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> = md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a>;</div>
<div class="line"><span class="lineno">  655</span>          flags_changed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  656</span>        }</div>
<div class="line"><span class="lineno">  657</span>      }</div>
<div class="line"><span class="lineno">  658</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#ad14bdb707d3b5811734782cfb570d9eb">trash</a> = md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>-&gt;<a class="code hl_variable" href="structEmail.html#ad14bdb707d3b5811734782cfb570d9eb">trash</a>;</div>
<div class="line"><span class="lineno">  659</span> </div>
<div class="line"><span class="lineno">  660</span>      <span class="comment">/* this is a duplicate of an existing email, so remove it */</span></div>
<div class="line"><span class="lineno">  661</span>      <a class="code hl_function" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;md-&gt;<a class="code hl_variable" href="structMdEmail.html#a94a29619b71c7e15685ffe4eafc05144">email</a>);</div>
<div class="line"><span class="lineno">  662</span>    }</div>
<div class="line"><span class="lineno">  663</span>    <span class="comment">/* This message was not in the list of messages we just scanned.</span></div>
<div class="line"><span class="lineno">  664</span><span class="comment">     * Check to see if we have enough information to know if the</span></div>
<div class="line"><span class="lineno">  665</span><span class="comment">     * message has disappeared out from underneath us.  */</span></div>
<div class="line"><span class="lineno">  666</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_variable" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a> &amp; <a class="code hl_define" href="#ab308421b848b9caed6fc2ac4612b1212">MMC_NEW_DIR</a>) &amp;&amp; <a class="code hl_function" href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, <span class="stringliteral">&quot;new/&quot;</span>, 4)) ||</div>
<div class="line"><span class="lineno">  667</span>             ((<a class="code hl_variable" href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">changed</a> &amp; <a class="code hl_define" href="#a71970dc06915beff8deee456e5af5ee4">MMC_CUR_DIR</a>) &amp;&amp; <a class="code hl_function" href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a>(e-&gt;<a class="code hl_variable" href="structEmail.html#ac041599cfe41b49e7b8f9d752d07bb39">path</a>, <span class="stringliteral">&quot;cur/&quot;</span>, 4)))</div>
<div class="line"><span class="lineno">  668</span>    {</div>
<div class="line"><span class="lineno">  669</span>      <span class="comment">/* This message disappeared, so we need to simulate a &quot;reopen&quot;</span></div>
<div class="line"><span class="lineno">  670</span><span class="comment">       * event.  We know it disappeared because we just scanned the</span></div>
<div class="line"><span class="lineno">  671</span><span class="comment">       * subdirectory it used to reside in.  */</span></div>
<div class="line"><span class="lineno">  672</span>      occult = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  673</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#ac5db33e3d6d9723d8e496078d5769567">deleted</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  674</span>      e-&gt;<a class="code hl_variable" href="structEmail.html#a1e108ee29a0c6571211290457ab60756">purge</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  675</span>    }</div>
<div class="line"><span class="lineno">  676</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  677</span>    {</div>
<div class="line"><span class="lineno">  678</span>      <span class="comment">/* This message resides in a subdirectory which was not</span></div>
<div class="line"><span class="lineno">  679</span><span class="comment">       * modified, so we assume that it is still present and</span></div>
<div class="line"><span class="lineno">  680</span><span class="comment">       * unchanged.  */</span></div>
<div class="line"><span class="lineno">  681</span>    }</div>
<div class="line"><span class="lineno">  682</span>  }</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>  <span class="comment">/* destroy the file name hash */</span></div>
<div class="line"><span class="lineno">  685</span>  <a class="code hl_function" href="hash_8c.html#afa22b7f78bbf1b59a4a2bd4bdd20948b">mutt_hash_free</a>(&amp;hash_names);</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>  <span class="comment">/* If we didn&#39;t just get new mail, update the tables. */</span></div>
<div class="line"><span class="lineno">  688</span>  <span class="keywordflow">if</span> (occult)</div>
<div class="line"><span class="lineno">  689</span>    <a class="code hl_function" href="core_2mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code hl_enumvalue" href="core_2mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f">NT_MAILBOX_RESORT</a>);</div>
<div class="line"><span class="lineno">  690</span> </div>
<div class="line"><span class="lineno">  691</span>  <span class="comment">/* do any delayed parsing we need to do. */</span></div>
<div class="line"><span class="lineno">  692</span>  <a class="code hl_function" href="#a2e8ef5194a5698e46defde07cb1a98ad">maildir_delayed_parsing</a>(m, &amp;mda, NULL);</div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>  <span class="comment">/* Incorporate new messages */</span></div>
<div class="line"><span class="lineno">  695</span>  num_new = <a class="code hl_function" href="#a5de73eb9f624c898094973ba07d8f688">maildir_move_to_mailbox</a>(m, &amp;mda);</div>
<div class="line"><span class="lineno">  696</span>  <a class="code hl_function" href="mdemail_8c.html#ad8abd173a6a46ddced46784106b8ae5b">maildirarray_clear</a>(&amp;mda);</div>
<div class="line"><span class="lineno">  697</span> </div>
<div class="line"><span class="lineno">  698</span>  <span class="keywordflow">if</span> (num_new &gt; 0)</div>
<div class="line"><span class="lineno">  699</span>  {</div>
<div class="line"><span class="lineno">  700</span>    <a class="code hl_function" href="core_2mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a>(m, <a class="code hl_enumvalue" href="core_2mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a>);</div>
<div class="line"><span class="lineno">  701</span>    m-&gt;<a class="code hl_variable" href="structMailbox.html#a12ba98c349220ae172753f4f3294ed59">changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  702</span>  }</div>
<div class="line"><span class="lineno">  703</span> </div>
<div class="line"><span class="lineno">  704</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  705</span> </div>
<div class="line"><span class="lineno">  706</span>  <a class="code hl_define" href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a>(&amp;mda);</div>
<div class="line"><span class="lineno">  707</span>  <span class="keywordflow">if</span> (occult)</div>
<div class="line"><span class="lineno">  708</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a>;</div>
<div class="line"><span class="lineno">  709</span>  <span class="keywordflow">if</span> (num_new &gt; 0)</div>
<div class="line"><span class="lineno">  710</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a>;</div>
<div class="line"><span class="lineno">  711</span>  <span class="keywordflow">if</span> (flags_changed)</div>
<div class="line"><span class="lineno">  712</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6">MX_STATUS_FLAGS</a>;</div>
<div class="line"><span class="lineno">  713</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a>;</div>
<div class="line"><span class="lineno">  714</span>}</div>
<div class="ttc" id="aarray_8h_html_aaa8805bd90a2015d8f5eb0fe3bb13b3f"><div class="ttname"><a href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a></div><div class="ttdeci">#define ARRAY_FREE(head)</div><div class="ttdoc">Release all memory.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00204">array.h:204</a></div></div>
<div class="ttc" id="acore_2mailbox_8c_html_af09ac36728ca3255523cd3b0bfd1f172"><div class="ttname"><a href="core_2mailbox_8c.html#af09ac36728ca3255523cd3b0bfd1f172">mailbox_changed</a></div><div class="ttdeci">void mailbox_changed(struct Mailbox *m, enum NotifyMailbox action)</div><div class="ttdoc">Notify observers of a change to a Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8c_source.html#l00233">mailbox.c:233</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f"><div class="ttname"><a href="core_2mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4a96d28ff20a133d31e2e6ce8bb4e8b78f">NT_MAILBOX_RESORT</a></div><div class="ttdeci">@ NT_MAILBOX_RESORT</div><div class="ttdoc">Email list needs resorting.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00190">mailbox.h:190</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a"><div class="ttname"><a href="core_2mailbox_8h.html#a01795608bad9d16eed1bc017f0bd96c4aa2cbdb348633a2bc5926ba0efddf2e3a">NT_MAILBOX_INVALID</a></div><div class="ttdeci">@ NT_MAILBOX_INVALID</div><div class="ttdoc">Email list was changed.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00189">mailbox.h:189</a></div></div>
<div class="ttc" id="afile_8c_html_a0a1a67cd697cb0074317215d4ce6c9e3"><div class="ttname"><a href="file_8c.html#a0a1a67cd697cb0074317215d4ce6c9e3">mutt_file_get_stat_timespec</a></div><div class="ttdeci">void mutt_file_get_stat_timespec(struct timespec *dest, struct stat *st, enum MuttStatType type)</div><div class="ttdoc">Read the stat() time into a time value.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l01472">file.c:1472</a></div></div>
<div class="ttc" id="ahash_8c_html_a10bd305a8183db9829caee9ea1bac2f5"><div class="ttname"><a href="hash_8c.html#a10bd305a8183db9829caee9ea1bac2f5">mutt_hash_insert</a></div><div class="ttdeci">struct HashElem * mutt_hash_insert(struct HashTable *table, const char *strkey, void *data)</div><div class="ttdoc">Add a new element to the Hash Table (with string keys)</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00335">hash.c:335</a></div></div>
<div class="ttc" id="ahash_8c_html_a21cfc2c56db496fc57d3d85a71c03215"><div class="ttname"><a href="hash_8c.html#a21cfc2c56db496fc57d3d85a71c03215">mutt_hash_find</a></div><div class="ttdeci">void * mutt_hash_find(const struct HashTable *table, const char *strkey)</div><div class="ttdoc">Find the HashElem data in a Hash Table element using a key.</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00362">hash.c:362</a></div></div>
<div class="ttc" id="ahash_8c_html_a75439958fb5faf57c039faec79d19998"><div class="ttname"><a href="hash_8c.html#a75439958fb5faf57c039faec79d19998">mutt_hash_new</a></div><div class="ttdeci">struct HashTable * mutt_hash_new(size_t num_elems, HashFlags flags)</div><div class="ttdoc">Create a new Hash Table (with string keys)</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00259">hash.c:259</a></div></div>
<div class="ttc" id="ahash_8c_html_afa22b7f78bbf1b59a4a2bd4bdd20948b"><div class="ttname"><a href="hash_8c.html#afa22b7f78bbf1b59a4a2bd4bdd20948b">mutt_hash_free</a></div><div class="ttdeci">void mutt_hash_free(struct HashTable **ptr)</div><div class="ttdoc">Free a hash table.</div><div class="ttdef"><b>Definition</b> <a href="hash_8c_source.html#l00457">hash.c:457</a></div></div>
<div class="ttc" id="ahash_8h_html_a091c40218093334e24d80f897e76a977"><div class="ttname"><a href="hash_8h.html#a091c40218093334e24d80f897e76a977">MUTT_HASH_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_HASH_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="hash_8h_source.html#l00111">hash.h:111</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_a71970dc06915beff8deee456e5af5ee4"><div class="ttname"><a href="#a71970dc06915beff8deee456e5af5ee4">MMC_CUR_DIR</a></div><div class="ttdeci">#define MMC_CUR_DIR</div><div class="ttdoc">&#39;cur&#39; directory changed</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00057">mailbox.c:57</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_aa32d2f8315f63e8e0c4e6712f7317a6e"><div class="ttname"><a href="#aa32d2f8315f63e8e0c4e6712f7317a6e">MMC_NO_DIRS</a></div><div class="ttdeci">#define MMC_NO_DIRS</div><div class="ttdoc">No directories changed.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00055">mailbox.c:55</a></div></div>
<div class="ttc" id="amaildir_2mailbox_8c_html_ab308421b848b9caed6fc2ac4612b1212"><div class="ttname"><a href="#ab308421b848b9caed6fc2ac4612b1212">MMC_NEW_DIR</a></div><div class="ttdeci">#define MMC_NEW_DIR</div><div class="ttdoc">&#39;new&#39; directory changed</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mailbox_8c_source.html#l00056">mailbox.c:56</a></div></div>
<div class="ttc" id="amaildir_2shared_8c_html_a79713d04e839c3782ef9e0b7bc25e9c0"><div class="ttname"><a href="maildir_2shared_8c.html#a79713d04e839c3782ef9e0b7bc25e9c0">maildir_update_flags</a></div><div class="ttdeci">bool maildir_update_flags(struct Mailbox *m, struct Email *e_old, struct Email *e_new)</div><div class="ttdoc">Update the mailbox flags.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2shared_8c_source.html#l00105">shared.c:105</a></div></div>
<div class="ttc" id="amaildir_2shared_8c_html_ae0026c4d5bd99be78469095721d1e744"><div class="ttname"><a href="maildir_2shared_8c.html#ae0026c4d5bd99be78469095721d1e744">maildir_canon_filename</a></div><div class="ttdeci">void maildir_canon_filename(struct Buffer *dest, const char *src)</div><div class="ttdoc">Generate the canonical filename for a Maildir folder.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2shared_8c_source.html#l00073">shared.c:73</a></div></div>
<div class="ttc" id="amonitor_8c_html_aa9e22d715c7468a084e0f73b04d0e38c"><div class="ttname"><a href="monitor_8c.html#aa9e22d715c7468a084e0f73b04d0e38c">MonitorCurMboxChanged</a></div><div class="ttdeci">bool MonitorCurMboxChanged</div><div class="ttdoc">Set to true when the current mailbox has changed.</div><div class="ttdef"><b>Definition</b> <a href="monitor_8c_source.html#l00055">monitor.c:55</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a6f574867aa9db4d434adbc8af1f5f7e7"><div class="ttname"><a href="mutt_2string_8c.html#a6f574867aa9db4d434adbc8af1f5f7e7">mutt_strn_equal</a></div><div class="ttdeci">bool mutt_strn_equal(const char *a, const char *b, size_t num)</div><div class="ttdoc">Check for equality of two strings (to a maximum), safely.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00427">string.c:427</a></div></div>
<div class="ttc" id="amxapi_8h_html_af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432aa482eddd52e9811eaef42b91a7e38160">MX_STATUS_ERROR</a></div><div class="ttdeci">@ MX_STATUS_ERROR</div><div class="ttdoc">An error occurred.</div><div class="ttdef"><b>Definition</b> <a href="mxapi_8h_source.html#l00061">mxapi.h:61</a></div></div>
<div class="ttc" id="amxapi_8h_html_af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432acc30aaa1797601a158bcead39ef19a4b">MX_STATUS_OK</a></div><div class="ttdeci">@ MX_STATUS_OK</div><div class="ttdoc">No changes.</div><div class="ttdef"><b>Definition</b> <a href="mxapi_8h_source.html#l00062">mxapi.h:62</a></div></div>
<div class="ttc" id="amxapi_8h_html_af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad3528e181f2bf299a5a598271c0059e6">MX_STATUS_FLAGS</a></div><div class="ttdeci">@ MX_STATUS_FLAGS</div><div class="ttdoc">Nondestructive flags change (IMAP)</div><div class="ttdef"><b>Definition</b> <a href="mxapi_8h_source.html#l00066">mxapi.h:66</a></div></div>
<div class="ttc" id="amxapi_8h_html_af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432ad9cf54713c660db891b05384830e57f4">MX_STATUS_REOPENED</a></div><div class="ttdeci">@ MX_STATUS_REOPENED</div><div class="ttdoc">Mailbox was reopened.</div><div class="ttdef"><b>Definition</b> <a href="mxapi_8h_source.html#l00065">mxapi.h:65</a></div></div>
<div class="ttc" id="amxapi_8h_html_af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b"><div class="ttname"><a href="mxapi_8h.html#af414aea967025ea4ba10b86268488432af3d8ebc52b40a1f9f22b7b4366d0315b">MX_STATUS_NEW_MAIL</a></div><div class="ttdeci">@ MX_STATUS_NEW_MAIL</div><div class="ttdoc">New mail received in Mailbox.</div><div class="ttdef"><b>Definition</b> <a href="mxapi_8h_source.html#l00063">mxapi.h:63</a></div></div>
<div class="ttc" id="astructEmail_html_a1e108ee29a0c6571211290457ab60756"><div class="ttname"><a href="structEmail.html#a1e108ee29a0c6571211290457ab60756">Email::purge</a></div><div class="ttdeci">bool purge</div><div class="ttdoc">Skip trash folder when deleting.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00079">email.h:79</a></div></div>
<div class="ttc" id="astructEmail_html_a8b1e186b9d388e199ba9c6239c612627"><div class="ttname"><a href="structEmail.html#a8b1e186b9d388e199ba9c6239c612627">Email::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Email has been edited.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00077">email.h:77</a></div></div>
<div class="ttc" id="astructHashTable_html"><div class="ttname"><a href="structHashTable.html">HashTable</a></div><div class="ttdoc">A Hash Table.</div><div class="ttdef"><b>Definition</b> <a href="hash_8h_source.html#l00098">hash.h:99</a></div></div>
<div class="ttc" id="astructMailbox_html_a12ba98c349220ae172753f4f3294ed59"><div class="ttname"><a href="structMailbox.html#a12ba98c349220ae172753f4f3294ed59">Mailbox::changed</a></div><div class="ttdeci">bool changed</div><div class="ttdoc">Mailbox has been modified.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00110">mailbox.h:110</a></div></div>
<div class="ttc" id="astructMaildirMboxData_html_a432d4f7db70109845edca85319390763"><div class="ttname"><a href="structMaildirMboxData.html#a432d4f7db70109845edca85319390763">MaildirMboxData::mtime_cur</a></div><div class="ttdeci">struct timespec mtime_cur</div><div class="ttdoc">Timestamp of the &#39;cur&#39; dir.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mdata_8h_source.html#l00037">mdata.h:37</a></div></div>
<div class="ttc" id="astructMaildirMboxData_html_ad8e5632fb967f844f10f0643cdd99183"><div class="ttname"><a href="structMaildirMboxData.html#ad8e5632fb967f844f10f0643cdd99183">MaildirMboxData::mtime</a></div><div class="ttdeci">struct timespec mtime</div><div class="ttdoc">Time Mailbox was last changed.</div><div class="ttdef"><b>Definition</b> <a href="maildir_2mdata_8h_source.html#l00036">mdata.h:36</a></div></div>
</div><!-- fragment --><div id="dynsection-19" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a0a574fe0e1b5e2b5fb122b1cf4335824_cgraph.svg" width="654" height="1322"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-20" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a0a574fe0e1b5e2b5fb122b1cf4335824_icgraph.svg" width="308" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5c65f6a672a0bb2b822e2d2fbcc662df" name="a5c65f6a672a0bb2b822e2d2fbcc662df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c65f6a672a0bb2b822e2d2fbcc662df">&#9670;&#160;</a></span>maildir_update_mtime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maildir_update_mtime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update our record of the Maildir modification time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="maildir_2mailbox_8c_source.html#l00720">720</a> of file <a class="el" href="maildir_2mailbox_8c_source.html">mailbox.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  721</span>{</div>
<div class="line"><span class="lineno">  722</span>  <span class="keywordtype">char</span> buf[<a class="code hl_define" href="mutt_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = { 0 };</div>
<div class="line"><span class="lineno">  723</span>  <span class="keyword">struct </span>stat st = { 0 };</div>
<div class="line"><span class="lineno">  724</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structMaildirMboxData.html">MaildirMboxData</a> *<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a> = <a class="code hl_function" href="maildir_2mdata_8c.html#a544f68cdf8aa0a5206fb0ea109c5f601">maildir_mdata_get</a>(m);</div>
<div class="line"><span class="lineno">  725</span> </div>
<div class="line"><span class="lineno">  726</span>  snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(m), <span class="stringliteral">&quot;cur&quot;</span>);</div>
<div class="line"><span class="lineno">  727</span>  <span class="keywordflow">if</span> (stat(buf, &amp;st) == 0)</div>
<div class="line"><span class="lineno">  728</span>    <a class="code hl_function" href="file_8c.html#a0a1a67cd697cb0074317215d4ce6c9e3">mutt_file_get_stat_timespec</a>(&amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;mtime_cur, &amp;st, <a class="code hl_enumvalue" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>);</div>
<div class="line"><span class="lineno">  729</span> </div>
<div class="line"><span class="lineno">  730</span>  snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code hl_function" href="core_2mailbox_8h.html#a7e9739eb3e94344633f7051c2fb9453e">mailbox_path</a>(m), <span class="stringliteral">&quot;new&quot;</span>);</div>
<div class="line"><span class="lineno">  731</span>  <span class="keywordflow">if</span> (stat(buf, &amp;st) == 0)</div>
<div class="line"><span class="lineno">  732</span>    <a class="code hl_function" href="file_8c.html#a0a1a67cd697cb0074317215d4ce6c9e3">mutt_file_get_stat_timespec</a>(&amp;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>-&gt;mtime, &amp;st, <a class="code hl_enumvalue" href="file_8h.html#ad852389693b4c5a8d79c25e84b2d1139ab6a80eef142816f3ad6e880fc23fb2df">MUTT_STAT_MTIME</a>);</div>
<div class="line"><span class="lineno">  733</span>}</div>
</div><!-- fragment --><div id="dynsection-21" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a5c65f6a672a0bb2b822e2d2fbcc662df_cgraph.svg" width="354" height="166"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-22" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="maildir_2mailbox_8c_a5c65f6a672a0bb2b822e2d2fbcc662df_icgraph.svg" width="356" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
