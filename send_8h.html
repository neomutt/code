<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: send/send.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="https://neomutt.org"><img alt="Logo" src="neomutt-64.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <a style="color: black; text-decoration: none;" href="https://neomutt.org">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">2025-12-11-276-g10b23b</span>
   </div>
   <div id="projectbrief">Teaching an old dog new tricks</div>
   </a>
   <a href="https://github.com/neomutt/neomutt" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#000000; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 9999;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </td>
   <td><a style="text-decoration: none; position: absolute; right: 0; top: 25px; margin-right: 100px; color: #66d866; font-size: 400%;" href="http://www.doxygen.org/index.html">DOXYGEN</a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('send_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">send.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Prepare and send an email.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for send.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h__incl.svg" width="270" height="119"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h__dep__incl.svg" width="348" height="119"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="send_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab7438d8f019957d3a2f9b5d783c4393e" id="r_ab7438d8f019957d3a2f9b5d783c4393e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab7438d8f019957d3a2f9b5d783c4393e">SEND_NO_FLAGS</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ab7438d8f019957d3a2f9b5d783c4393e"><td class="mdescLeft">&#160;</td><td class="mdescRight">No flags are set.  <br /></td></tr>
<tr class="separator:ab7438d8f019957d3a2f9b5d783c4393e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac23e1891bcbc52cc25b5824acfb42d3c" id="r_ac23e1891bcbc52cc25b5824acfb42d3c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr class="memdesc:ac23e1891bcbc52cc25b5824acfb42d3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reply to sender.  <br /></td></tr>
<tr class="separator:ac23e1891bcbc52cc25b5824acfb42d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47e90c63dbdc4426d0630139c04cc8f3" id="r_a47e90c63dbdc4426d0630139c04cc8f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="memdesc:a47e90c63dbdc4426d0630139c04cc8f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reply to all.  <br /></td></tr>
<tr class="separator:a47e90c63dbdc4426d0630139c04cc8f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54e225c19799cf682ef8228825dbb3d8" id="r_a54e225c19799cf682ef8228825dbb3d8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a>&#160;&#160;&#160;(1 &lt;&lt; 2)</td></tr>
<tr class="memdesc:a54e225c19799cf682ef8228825dbb3d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reply to mailing list.  <br /></td></tr>
<tr class="separator:a54e225c19799cf682ef8228825dbb3d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af72e00ab3817e49360034f4d9593bb62" id="r_af72e00ab3817e49360034f4d9593bb62"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a>&#160;&#160;&#160;(1 &lt;&lt; 3)</td></tr>
<tr class="memdesc:af72e00ab3817e49360034f4d9593bb62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forward email.  <br /></td></tr>
<tr class="separator:af72e00ab3817e49360034f4d9593bb62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a819cb72f23fd5b12401baf2963bc694f" id="r_a819cb72f23fd5b12401baf2963bc694f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>&#160;&#160;&#160;(1 &lt;&lt; 4)</td></tr>
<tr class="memdesc:a819cb72f23fd5b12401baf2963bc694f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recall a postponed email.  <br /></td></tr>
<tr class="separator:a819cb72f23fd5b12401baf2963bc694f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05caaa1cac7622dce2a0e32d75619b48" id="r_a05caaa1cac7622dce2a0e32d75619b48"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>&#160;&#160;&#160;(1 &lt;&lt; 5)</td></tr>
<tr class="memdesc:a05caaa1cac7622dce2a0e32d75619b48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send email in batch mode (without user interaction)  <br /></td></tr>
<tr class="separator:a05caaa1cac7622dce2a0e32d75619b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a623f46e1bab1e562893dbd01bbbd92dd" id="r_a623f46e1bab1e562893dbd01bbbd92dd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a>&#160;&#160;&#160;(1 &lt;&lt; 6)</td></tr>
<tr class="memdesc:a623f46e1bab1e562893dbd01bbbd92dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mail a PGP public key.  <br /></td></tr>
<tr class="separator:a623f46e1bab1e562893dbd01bbbd92dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb38906954f30b89ad58ebbf95ac2b0" id="r_abeb38906954f30b89ad58ebbf95ac2b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>&#160;&#160;&#160;(1 &lt;&lt; 7)</td></tr>
<tr class="memdesc:abeb38906954f30b89ad58ebbf95ac2b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reply using the current email as a template.  <br /></td></tr>
<tr class="separator:abeb38906954f30b89ad58ebbf95ac2b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0124ba8cc117eff717a4ddf672c22018" id="r_a0124ba8cc117eff717a4ddf672c22018"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0124ba8cc117eff717a4ddf672c22018">SEND_POSTPONED_FCC</a>&#160;&#160;&#160;(1 &lt;&lt; 8)</td></tr>
<tr class="memdesc:a0124ba8cc117eff717a4ddf672c22018"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used by <a class="el" href="postpone_2lib_8h.html#aacde94d20e952e822eac92e0fbf74682" title="Recall a postponed message.">mutt_get_postponed()</a> to signal that the Mutt-Fcc header field was present.  <br /></td></tr>
<tr class="separator:a0124ba8cc117eff717a4ddf672c22018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a160dd7bb90081f1d45201ef2ab6b46d3" id="r_a160dd7bb90081f1d45201ef2ab6b46d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a160dd7bb90081f1d45201ef2ab6b46d3">SEND_NO_FREE_HEADER</a>&#160;&#160;&#160;(1 &lt;&lt; 9)</td></tr>
<tr class="memdesc:a160dd7bb90081f1d45201ef2ab6b46d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used by the -E flag.  <br /></td></tr>
<tr class="separator:a160dd7bb90081f1d45201ef2ab6b46d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21bc6948879d93793ca7afac2c7964bb" id="r_a21bc6948879d93793ca7afac2c7964bb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a>&#160;&#160;&#160;(1 &lt;&lt; 10)</td></tr>
<tr class="memdesc:a21bc6948879d93793ca7afac2c7964bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used by the -H flag.  <br /></td></tr>
<tr class="separator:a21bc6948879d93793ca7afac2c7964bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0a201a6d90a4760c1e0ece8be43c1cb" id="r_aa0a201a6d90a4760c1e0ece8be43c1cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa0a201a6d90a4760c1e0ece8be43c1cb">SEND_TO_SENDER</a>&#160;&#160;&#160;(1 &lt;&lt; 11)</td></tr>
<tr class="memdesc:aa0a201a6d90a4760c1e0ece8be43c1cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compose new email to sender.  <br /></td></tr>
<tr class="separator:aa0a201a6d90a4760c1e0ece8be43c1cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e11db957196a8cc43bbe955178f3686" id="r_a0e11db957196a8cc43bbe955178f3686"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e11db957196a8cc43bbe955178f3686">SEND_GROUP_CHAT_REPLY</a>&#160;&#160;&#160;(1 &lt;&lt; 12)</td></tr>
<tr class="memdesc:a0e11db957196a8cc43bbe955178f3686"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reply to all recipients preserving To/Cc.  <br /></td></tr>
<tr class="separator:a0e11db957196a8cc43bbe955178f3686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae31498a0e61355a0b4ece8f0c89daf49" id="r_ae31498a0e61355a0b4ece8f0c89daf49"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>&#160;&#160;&#160;(1 &lt;&lt; 13)</td></tr>
<tr class="memdesc:ae31498a0e61355a0b4ece8f0c89daf49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reply to a news article.  <br /></td></tr>
<tr class="separator:ae31498a0e61355a0b4ece8f0c89daf49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae202c5175fee11b7b523c737b41fdb92" id="r_ae202c5175fee11b7b523c737b41fdb92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae202c5175fee11b7b523c737b41fdb92">SEND_REVIEW_TO</a>&#160;&#160;&#160;(1 &lt;&lt; 14)</td></tr>
<tr class="memdesc:ae202c5175fee11b7b523c737b41fdb92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow the user to edit the To field.  <br /></td></tr>
<tr class="separator:ae202c5175fee11b7b523c737b41fdb92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a942f852d37ce6e458cda7f187b922b67" id="r_a942f852d37ce6e458cda7f187b922b67"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a942f852d37ce6e458cda7f187b922b67">SEND_CONSUMED_STDIN</a>&#160;&#160;&#160;(1 &lt;&lt; 15)</td></tr>
<tr class="memdesc:a942f852d37ce6e458cda7f187b922b67"><td class="mdescLeft">&#160;</td><td class="mdescRight">stdin has been read; don't read it twice  <br /></td></tr>
<tr class="separator:a942f852d37ce6e458cda7f187b922b67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab52a058ff3342266b80a3890e2b277a4" id="r_ab52a058ff3342266b80a3890e2b277a4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab52a058ff3342266b80a3890e2b277a4">SEND_CLI_CRYPTO</a>&#160;&#160;&#160;(1 &lt;&lt; 16)</td></tr>
<tr class="memdesc:ab52a058ff3342266b80a3890e2b277a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable message security in modes that by default don't enable it.  <br /></td></tr>
<tr class="separator:ab52a058ff3342266b80a3890e2b277a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a3f25bb31648a5f49a537d8df89a77506" id="r_a3f25bb31648a5f49a537d8df89a77506"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td></tr>
<tr class="memdesc:a3f25bb31648a5f49a537d8df89a77506"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags for <a class="el" href="#ad9c2899c7c3a76d2ce3b911221705a30" title="Send an email.">mutt_send_message()</a>, e.g. <a class="el" href="#ac23e1891bcbc52cc25b5824acfb42d3c" title="Reply to sender.">SEND_REPLY</a>.  <br /></td></tr>
<tr class="separator:a3f25bb31648a5f49a537d8df89a77506"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afff65d1a3590d6cae315239f25a6c48d" id="r_afff65d1a3590d6cae315239f25a6c48d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afff65d1a3590d6cae315239f25a6c48d">mutt_add_to_reference_headers</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structEnvelope.html">Envelope</a> *env_cur, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:afff65d1a3590d6cae315239f25a6c48d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate references for a reply email.  <br /></td></tr>
<tr class="separator:afff65d1a3590d6cae315239f25a6c48d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90907de4e46f3a56b2889b79a48c9011" id="r_a90907de4e46f3a56b2889b79a48c9011"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structAddress.html">Address</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a> (struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a90907de4e46f3a56b2889b79a48c9011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a default 'from' <a class="el" href="structAddress.html" title="An email address.">Address</a>.  <br /></td></tr>
<tr class="separator:a90907de4e46f3a56b2889b79a48c9011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a50e112e7c0ddd1270a550e63fdd80f" id="r_a3a50e112e7c0ddd1270a550e63fdd80f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3a50e112e7c0ddd1270a550e63fdd80f">mutt_edit_address</a> (struct AddressList *al, const char *field, bool expand_aliases)</td></tr>
<tr class="memdesc:a3a50e112e7c0ddd1270a550e63fdd80f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit an email address.  <br /></td></tr>
<tr class="separator:a3a50e112e7c0ddd1270a550e63fdd80f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ba9ce78a67261e872a264bc956ef857" id="r_a1ba9ce78a67261e872a264bc956ef857"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a> (struct <a class="el" href="structBody.html">Body</a> *b, bool recurse, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a1ba9ce78a67261e872a264bc956ef857"><td class="mdescLeft">&#160;</td><td class="mdescRight">RFC2047 encode the content-descriptions.  <br /></td></tr>
<tr class="separator:a1ba9ce78a67261e872a264bc956ef857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78de7631e05a4bde3c61e5f5d2c34921" id="r_a78de7631e05a4bde3c61e5f5d2c34921"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78de7631e05a4bde3c61e5f5d2c34921">mutt_fetch_recips</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *out, struct <a class="el" href="structEnvelope.html">Envelope</a> *in, <a class="el" href="#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a> flags, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a78de7631e05a4bde3c61e5f5d2c34921"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate recpients for a reply email.  <br /></td></tr>
<tr class="separator:a78de7631e05a4bde3c61e5f5d2c34921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a527f182325365ed083dad7be735bab25" id="r_a527f182325365ed083dad7be735bab25"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a527f182325365ed083dad7be735bab25">mutt_fix_reply_recipients</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a527f182325365ed083dad7be735bab25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove duplicate recipients.  <br /></td></tr>
<tr class="separator:a527f182325365ed083dad7be735bab25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40683be6f58e2cdf321c3e30a494fbde" id="r_a40683be6f58e2cdf321c3e30a494fbde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a40683be6f58e2cdf321c3e30a494fbde">mutt_forward_intro</a> (struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a40683be6f58e2cdf321c3e30a494fbde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the "start of forwarded message" text.  <br /></td></tr>
<tr class="separator:a40683be6f58e2cdf321c3e30a494fbde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad951cc16f636045622b313f89278627a" id="r_ad951cc16f636045622b313f89278627a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad951cc16f636045622b313f89278627a">mutt_forward_trailer</a> (struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:ad951cc16f636045622b313f89278627a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a "end of forwarded message" text.  <br /></td></tr>
<tr class="separator:ad951cc16f636045622b313f89278627a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23d9e167b5a86151993349839cc4eaf0" id="r_a23d9e167b5a86151993349839cc4eaf0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23d9e167b5a86151993349839cc4eaf0">mutt_make_attribution_intro</a> (struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp_out, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a23d9e167b5a86151993349839cc4eaf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add "on DATE, PERSON wrote" header.  <br /></td></tr>
<tr class="separator:a23d9e167b5a86151993349839cc4eaf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2a449fb243514b7945f71808d689d9b" id="r_af2a449fb243514b7945f71808d689d9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af2a449fb243514b7945f71808d689d9b">mutt_make_attribution_trailer</a> (struct <a class="el" href="structEmail.html">Email</a> *e, FILE *fp_out, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:af2a449fb243514b7945f71808d689d9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add suffix to replied email text.  <br /></td></tr>
<tr class="separator:af2a449fb243514b7945f71808d689d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a441dbd4f179147fa14692a98acbd8f26" id="r_a441dbd4f179147fa14692a98acbd8f26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a441dbd4f179147fa14692a98acbd8f26">mutt_make_forward_subject</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structEmail.html">Email</a> *e, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a441dbd4f179147fa14692a98acbd8f26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a subject for a forwarded email.  <br /></td></tr>
<tr class="separator:a441dbd4f179147fa14692a98acbd8f26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057d0285aaa896223a70469deb4063c9" id="r_a057d0285aaa896223a70469deb4063c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a057d0285aaa896223a70469deb4063c9">mutt_make_misc_reply_headers</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structEnvelope.html">Envelope</a> *env_cur, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a057d0285aaa896223a70469deb4063c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set subject for a reply.  <br /></td></tr>
<tr class="separator:a057d0285aaa896223a70469deb4063c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58823b3164da72a6429664e1091d12a8" id="r_a58823b3164da72a6429664e1091d12a8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a58823b3164da72a6429664e1091d12a8">mutt_resend_message</a> (FILE *fp, struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e_cur, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:a58823b3164da72a6429664e1091d12a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resend an email.  <br /></td></tr>
<tr class="separator:a58823b3164da72a6429664e1091d12a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c2899c7c3a76d2ce3b911221705a30" id="r_ad9c2899c7c3a76d2ce3b911221705a30"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad9c2899c7c3a76d2ce3b911221705a30">mutt_send_message</a> (<a class="el" href="#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a> flags, struct <a class="el" href="structEmail.html">Email</a> *e_templ, const char *tempfile, struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct EmailArray *ea, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:ad9c2899c7c3a76d2ce3b911221705a30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an email.  <br /></td></tr>
<tr class="separator:ad9c2899c7c3a76d2ce3b911221705a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa20b4cc93fe3d7cbc02675afeddcad4" id="r_afa20b4cc93fe3d7cbc02675afeddcad4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa20b4cc93fe3d7cbc02675afeddcad4">mutt_set_followup_to</a> (struct <a class="el" href="structEnvelope.html">Envelope</a> *env, struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *sub)</td></tr>
<tr class="memdesc:afa20b4cc93fe3d7cbc02675afeddcad4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set followup-to field.  <br /></td></tr>
<tr class="separator:afa20b4cc93fe3d7cbc02675afeddcad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb49acb8f5aeb91227ad946786970111" id="r_aeb49acb8f5aeb91227ad946786970111"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeb49acb8f5aeb91227ad946786970111">mutt_send_list_subscribe</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:aeb49acb8f5aeb91227ad946786970111"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a mailing-list subscription email.  <br /></td></tr>
<tr class="separator:aeb49acb8f5aeb91227ad946786970111"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9567485020b1fd8c30be9b06382cc7d9" id="r_a9567485020b1fd8c30be9b06382cc7d9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9567485020b1fd8c30be9b06382cc7d9">mutt_send_list_unsubscribe</a> (struct <a class="el" href="structMailbox.html">Mailbox</a> *m, struct <a class="el" href="structEmail.html">Email</a> *e)</td></tr>
<tr class="memdesc:a9567485020b1fd8c30be9b06382cc7d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a mailing-list unsubscription email.  <br /></td></tr>
<tr class="separator:a9567485020b1fd8c30be9b06382cc7d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Prepare and send an email. </p>
<dl class="section author"><dt>Authors</dt><dd><ul>
<li>Richard Russon</li>
<li>Pietro Cerutti</li>
<li>Alejandro Colomar</li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</dd></dl>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p class="definition">Definition in file <a class="el" href="send_8h_source.html">send.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab7438d8f019957d3a2f9b5d783c4393e" name="ab7438d8f019957d3a2f9b5d783c4393e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7438d8f019957d3a2f9b5d783c4393e">&#9670;&#160;</a></span>SEND_NO_FLAGS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_NO_FLAGS&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>No flags are set. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00041">41</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="ac23e1891bcbc52cc25b5824acfb42d3c" name="ac23e1891bcbc52cc25b5824acfb42d3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac23e1891bcbc52cc25b5824acfb42d3c">&#9670;&#160;</a></span>SEND_REPLY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_REPLY&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reply to sender. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00042">42</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="a47e90c63dbdc4426d0630139c04cc8f3" name="a47e90c63dbdc4426d0630139c04cc8f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47e90c63dbdc4426d0630139c04cc8f3">&#9670;&#160;</a></span>SEND_GROUP_REPLY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_GROUP_REPLY&#160;&#160;&#160;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reply to all. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00043">43</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="a54e225c19799cf682ef8228825dbb3d8" name="a54e225c19799cf682ef8228825dbb3d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54e225c19799cf682ef8228825dbb3d8">&#9670;&#160;</a></span>SEND_LIST_REPLY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_LIST_REPLY&#160;&#160;&#160;(1 &lt;&lt; 2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reply to mailing list. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00044">44</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="af72e00ab3817e49360034f4d9593bb62" name="af72e00ab3817e49360034f4d9593bb62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af72e00ab3817e49360034f4d9593bb62">&#9670;&#160;</a></span>SEND_FORWARD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_FORWARD&#160;&#160;&#160;(1 &lt;&lt; 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Forward email. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00045">45</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="a819cb72f23fd5b12401baf2963bc694f" name="a819cb72f23fd5b12401baf2963bc694f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a819cb72f23fd5b12401baf2963bc694f">&#9670;&#160;</a></span>SEND_POSTPONED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_POSTPONED&#160;&#160;&#160;(1 &lt;&lt; 4)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recall a postponed email. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00046">46</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="a05caaa1cac7622dce2a0e32d75619b48" name="a05caaa1cac7622dce2a0e32d75619b48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05caaa1cac7622dce2a0e32d75619b48">&#9670;&#160;</a></span>SEND_BATCH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_BATCH&#160;&#160;&#160;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send email in batch mode (without user interaction) </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00047">47</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="a623f46e1bab1e562893dbd01bbbd92dd" name="a623f46e1bab1e562893dbd01bbbd92dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a623f46e1bab1e562893dbd01bbbd92dd">&#9670;&#160;</a></span>SEND_KEY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_KEY&#160;&#160;&#160;(1 &lt;&lt; 6)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mail a PGP public key. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00048">48</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="abeb38906954f30b89ad58ebbf95ac2b0" name="abeb38906954f30b89ad58ebbf95ac2b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeb38906954f30b89ad58ebbf95ac2b0">&#9670;&#160;</a></span>SEND_RESEND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_RESEND&#160;&#160;&#160;(1 &lt;&lt; 7)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reply using the current email as a template. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00049">49</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="a0124ba8cc117eff717a4ddf672c22018" name="a0124ba8cc117eff717a4ddf672c22018"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0124ba8cc117eff717a4ddf672c22018">&#9670;&#160;</a></span>SEND_POSTPONED_FCC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_POSTPONED_FCC&#160;&#160;&#160;(1 &lt;&lt; 8)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used by <a class="el" href="postpone_2lib_8h.html#aacde94d20e952e822eac92e0fbf74682" title="Recall a postponed message.">mutt_get_postponed()</a> to signal that the Mutt-Fcc header field was present. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00050">50</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="a160dd7bb90081f1d45201ef2ab6b46d3" name="a160dd7bb90081f1d45201ef2ab6b46d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a160dd7bb90081f1d45201ef2ab6b46d3">&#9670;&#160;</a></span>SEND_NO_FREE_HEADER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_NO_FREE_HEADER&#160;&#160;&#160;(1 &lt;&lt; 9)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used by the -E flag. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00051">51</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="a21bc6948879d93793ca7afac2c7964bb" name="a21bc6948879d93793ca7afac2c7964bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21bc6948879d93793ca7afac2c7964bb">&#9670;&#160;</a></span>SEND_DRAFT_FILE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_DRAFT_FILE&#160;&#160;&#160;(1 &lt;&lt; 10)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used by the -H flag. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00052">52</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="aa0a201a6d90a4760c1e0ece8be43c1cb" name="aa0a201a6d90a4760c1e0ece8be43c1cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0a201a6d90a4760c1e0ece8be43c1cb">&#9670;&#160;</a></span>SEND_TO_SENDER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_TO_SENDER&#160;&#160;&#160;(1 &lt;&lt; 11)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compose new email to sender. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00053">53</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="a0e11db957196a8cc43bbe955178f3686" name="a0e11db957196a8cc43bbe955178f3686"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e11db957196a8cc43bbe955178f3686">&#9670;&#160;</a></span>SEND_GROUP_CHAT_REPLY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_GROUP_CHAT_REPLY&#160;&#160;&#160;(1 &lt;&lt; 12)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reply to all recipients preserving To/Cc. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00054">54</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="ae31498a0e61355a0b4ece8f0c89daf49" name="ae31498a0e61355a0b4ece8f0c89daf49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae31498a0e61355a0b4ece8f0c89daf49">&#9670;&#160;</a></span>SEND_NEWS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_NEWS&#160;&#160;&#160;(1 &lt;&lt; 13)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reply to a news article. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00055">55</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="ae202c5175fee11b7b523c737b41fdb92" name="ae202c5175fee11b7b523c737b41fdb92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae202c5175fee11b7b523c737b41fdb92">&#9670;&#160;</a></span>SEND_REVIEW_TO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_REVIEW_TO&#160;&#160;&#160;(1 &lt;&lt; 14)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allow the user to edit the To field. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00056">56</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="a942f852d37ce6e458cda7f187b922b67" name="a942f852d37ce6e458cda7f187b922b67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a942f852d37ce6e458cda7f187b922b67">&#9670;&#160;</a></span>SEND_CONSUMED_STDIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_CONSUMED_STDIN&#160;&#160;&#160;(1 &lt;&lt; 15)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>stdin has been read; don't read it twice </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00057">57</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<a id="ab52a058ff3342266b80a3890e2b277a4" name="ab52a058ff3342266b80a3890e2b277a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab52a058ff3342266b80a3890e2b277a4">&#9670;&#160;</a></span>SEND_CLI_CRYPTO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_CLI_CRYPTO&#160;&#160;&#160;(1 &lt;&lt; 16)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable message security in modes that by default don't enable it. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00058">58</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a3f25bb31648a5f49a537d8df89a77506" name="a3f25bb31648a5f49a537d8df89a77506"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f25bb31648a5f49a537d8df89a77506">&#9670;&#160;</a></span>SendFlags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags for <a class="el" href="#ad9c2899c7c3a76d2ce3b911221705a30" title="Send an email.">mutt_send_message()</a>, e.g. <a class="el" href="#ac23e1891bcbc52cc25b5824acfb42d3c" title="Reply to sender.">SEND_REPLY</a>. </p>

<p class="definition">Definition at line <a class="el" href="send_8h_source.html#l00040">40</a> of file <a class="el" href="send_8h_source.html">send.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="afff65d1a3590d6cae315239f25a6c48d" name="afff65d1a3590d6cae315239f25a6c48d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afff65d1a3590d6cae315239f25a6c48d">&#9670;&#160;</a></span>mutt_add_to_reference_headers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_add_to_reference_headers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env_cur</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate references for a reply email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> for result </td></tr>
    <tr><td class="paramname">env_cur</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> of source email </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01035">1035</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1037</span>{</div>
<div class="line"><span class="lineno"> 1038</span>  <a class="code hl_function" href="send_8c.html#af14544f55d0b62fcba84643fadec4890">add_references</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>, env_cur);</div>
<div class="line"><span class="lineno"> 1039</span>  <a class="code hl_function" href="send_8c.html#a6c0f91c0d2e3bb30c0dc096c2d5d5361">add_message_id</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">references</a>, env_cur);</div>
<div class="line"><span class="lineno"> 1040</span>  <a class="code hl_function" href="send_8c.html#a6c0f91c0d2e3bb30c0dc096c2d5d5361">add_message_id</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a9ae6d450b2f012c37d3350f4305fbb90">in_reply_to</a>, env_cur);</div>
<div class="line"><span class="lineno"> 1041</span> </div>
<div class="line"><span class="lineno"> 1042</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_x_comment_to = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;x_comment_to&quot;</span>);</div>
<div class="line"><span class="lineno"> 1043</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a> &amp;&amp; c_x_comment_to &amp;&amp; !<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env_cur-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>))</div>
<div class="line"><span class="lineno"> 1044</span>    env-&gt;<a class="code hl_variable" href="structEnvelope.html#a52153c6e4fdb551233e26d4fdb48fb78">x_comment_to</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(<a class="code hl_function" href="email_2sort_8c.html#a2e20b923e21514eff962dfbde7ec1955">mutt_get_name</a>(<a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;env_cur-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>)));</div>
<div class="line"><span class="lineno"> 1045</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_ae50f679dd6c5bd1ba820884c8602f038"><div class="ttname"><a href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a></div><div class="ttdeci">bool cs_subset_bool(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a boolean config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00047">helpers.c:47</a></div></div>
<div class="ttc" id="aemail_2sort_8c_html_a2e20b923e21514eff962dfbde7ec1955"><div class="ttname"><a href="email_2sort_8c.html#a2e20b923e21514eff962dfbde7ec1955">mutt_get_name</a></div><div class="ttdeci">const char * mutt_get_name(const struct Address *a)</div><div class="ttdoc">Pick the best name to display from an address.</div><div class="ttdef"><b>Definition</b> <a href="email_2sort_8c_source.html#l00138">sort.c:138</a></div></div>
<div class="ttc" id="aglobals_8c_html_ae002039367e2c7cedb76674311136d1f"><div class="ttname"><a href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a></div><div class="ttdeci">bool OptNewsSend</div><div class="ttdoc">(pseudo) used to change behavior when posting</div><div class="ttdef"><b>Definition</b> <a href="globals_8c_source.html#l00054">globals.c:54</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a3fe33d90e4814281cd57de048119c950"><div class="ttname"><a href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a></div><div class="ttdeci">char * mutt_str_dup(const char *str)</div><div class="ttdoc">Copy a string, safely.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00257">string.c:257</a></div></div>
<div class="ttc" id="aqueue_8h_html_a7d6894360bd1c41e0e6f6d84998c1362"><div class="ttname"><a href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a></div><div class="ttdeci">#define TAILQ_FIRST(head)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00780">queue.h:780</a></div></div>
<div class="ttc" id="aqueue_8h_html_ac3c9da7ac712eacbbad5cc54d7a3477e"><div class="ttname"><a href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a></div><div class="ttdeci">#define TAILQ_EMPTY(head)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00778">queue.h:778</a></div></div>
<div class="ttc" id="asend_8c_html_a6c0f91c0d2e3bb30c0dc096c2d5d5361"><div class="ttname"><a href="send_8c.html#a6c0f91c0d2e3bb30c0dc096c2d5d5361">add_message_id</a></div><div class="ttdeci">static void add_message_id(struct ListHead *head, struct Envelope *env)</div><div class="ttdoc">Add the email&#39;s message ID to a list.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00944">send.c:944</a></div></div>
<div class="ttc" id="asend_8c_html_af14544f55d0b62fcba84643fadec4890"><div class="ttname"><a href="send_8c.html#af14544f55d0b62fcba84643fadec4890">add_references</a></div><div class="ttdeci">static void add_references(struct ListHead *head, struct Envelope *env)</div><div class="ttdoc">Add the email&#39;s references to a list.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00933">send.c:933</a></div></div>
<div class="ttc" id="astructEnvelope_html_a52153c6e4fdb551233e26d4fdb48fb78"><div class="ttname"><a href="structEnvelope.html#a52153c6e4fdb551233e26d4fdb48fb78">Envelope::x_comment_to</a></div><div class="ttdeci">char * x_comment_to</div><div class="ttdoc">List of &#39;X-comment-to&#39; fields.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00081">envelope.h:81</a></div></div>
<div class="ttc" id="astructEnvelope_html_a832eec73356a806761e26f0bc40d9083"><div class="ttname"><a href="structEnvelope.html#a832eec73356a806761e26f0bc40d9083">Envelope::references</a></div><div class="ttdeci">struct ListHead references</div><div class="ttdoc">message references (in reverse order)</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00083">envelope.h:83</a></div></div>
<div class="ttc" id="astructEnvelope_html_a9ae6d450b2f012c37d3350f4305fbb90"><div class="ttname"><a href="structEnvelope.html#a9ae6d450b2f012c37d3350f4305fbb90">Envelope::in_reply_to</a></div><div class="ttdeci">struct ListHead in_reply_to</div><div class="ttdoc">in-reply-to header content</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00084">envelope.h:84</a></div></div>
<div class="ttc" id="astructEnvelope_html_af1aa00aed4b8767cf98f08e45a432ad8"><div class="ttname"><a href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">Envelope::from</a></div><div class="ttdeci">struct AddressList from</div><div class="ttdoc">Email&#39;s &#39;From&#39; list.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00059">envelope.h:59</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_afff65d1a3590d6cae315239f25a6c48d_cgraph.svg" width="510" height="248"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_afff65d1a3590d6cae315239f25a6c48d_icgraph.svg" width="404" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a90907de4e46f3a56b2889b79a48c9011" name="a90907de4e46f3a56b2889b79a48c9011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90907de4e46f3a56b2889b79a48c9011">&#9670;&#160;</a></span>mutt_default_from()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structAddress.html">Address</a> * mutt_default_from </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a default 'from' <a class="el" href="structAddress.html" title="An email address.">Address</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ptr</td><td>Newly allocated <a class="el" href="structAddress.html" title="An email address.">Address</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01396">1396</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1397</span>{</div>
<div class="line"><span class="lineno"> 1398</span>  <span class="comment">/* Note: We let $from override $real_name here.</span></div>
<div class="line"><span class="lineno"> 1399</span><span class="comment">   *       Is this the right thing to do?</span></div>
<div class="line"><span class="lineno"> 1400</span><span class="comment">   */</span></div>
<div class="line"><span class="lineno"> 1401</span> </div>
<div class="line"><span class="lineno"> 1402</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *c_from = <a class="code hl_function" href="address_2config__type_8c.html#ae303ac83498043a651ec046b572bc707">cs_subset_address</a>(sub, <span class="stringliteral">&quot;from&quot;</span>);</div>
<div class="line"><span class="lineno"> 1403</span>  <span class="keywordflow">if</span> (c_from)</div>
<div class="line"><span class="lineno"> 1404</span>  {</div>
<div class="line"><span class="lineno"> 1405</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="address_2address_8c.html#a8f8e4be1b71a169870ac10be5426af8d">mutt_addr_copy</a>(c_from);</div>
<div class="line"><span class="lineno"> 1406</span>  }</div>
<div class="line"><span class="lineno"> 1407</span> </div>
<div class="line"><span class="lineno"> 1408</span>  <span class="keywordtype">char</span> domain[1024] = { 0 };</div>
<div class="line"><span class="lineno"> 1409</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="structAddress.html#a45cd47ee76ef04b63f55a0345c691fe8">mailbox</a> = <a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#a5c2d30a2f734f94412bd5b3a7367b981">username</a>;</div>
<div class="line"><span class="lineno"> 1410</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_use_domain = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;use_domain&quot;</span>);</div>
<div class="line"><span class="lineno"> 1411</span>  <span class="keywordflow">if</span> (c_use_domain)</div>
<div class="line"><span class="lineno"> 1412</span>  {</div>
<div class="line"><span class="lineno"> 1413</span>    snprintf(domain, <span class="keyword">sizeof</span>(domain), <span class="stringliteral">&quot;%s@%s&quot;</span>, <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(<a class="code hl_struct" href="structNeoMutt.html">NeoMutt</a>-&gt;<a class="code hl_variable" href="structNeoMutt.html#a5c2d30a2f734f94412bd5b3a7367b981">username</a>),</div>
<div class="line"><span class="lineno"> 1414</span>             <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(<a class="code hl_function" href="sendlib_8c.html#a448ec1abcfc24a2a3d61197ef604877d">mutt_fqdn</a>(<span class="keyword">true</span>, sub)));</div>
<div class="line"><span class="lineno"> 1415</span>    <a class="code hl_variable" href="structAddress.html#a45cd47ee76ef04b63f55a0345c691fe8">mailbox</a> = domain;</div>
<div class="line"><span class="lineno"> 1416</span>  }</div>
<div class="line"><span class="lineno"> 1417</span> </div>
<div class="line"><span class="lineno"> 1418</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="address_2address_8c.html#a0d8aef5de5f361ae50ad1c7d567fe46a">mutt_addr_create</a>(NULL, <a class="code hl_variable" href="structAddress.html#a45cd47ee76ef04b63f55a0345c691fe8">mailbox</a>);</div>
<div class="line"><span class="lineno"> 1419</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a0d8aef5de5f361ae50ad1c7d567fe46a"><div class="ttname"><a href="address_2address_8c.html#a0d8aef5de5f361ae50ad1c7d567fe46a">mutt_addr_create</a></div><div class="ttdeci">struct Address * mutt_addr_create(const char *personal, const char *mailbox)</div><div class="ttdoc">Create and populate a new Address.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00414">address.c:414</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_a8f8e4be1b71a169870ac10be5426af8d"><div class="ttname"><a href="address_2address_8c.html#a8f8e4be1b71a169870ac10be5426af8d">mutt_addr_copy</a></div><div class="ttdeci">struct Address * mutt_addr_copy(const struct Address *addr)</div><div class="ttdoc">Copy the real address.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00745">address.c:745</a></div></div>
<div class="ttc" id="aaddress_2config__type_8c_html_ae303ac83498043a651ec046b572bc707"><div class="ttname"><a href="address_2config__type_8c.html#ae303ac83498043a651ec046b572bc707">cs_subset_address</a></div><div class="ttdeci">const struct Address * cs_subset_address(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get an Address config item by name.</div><div class="ttdef"><b>Definition</b> <a href="address_2config__type_8c_source.html#l00286">config_type.c:286</a></div></div>
<div class="ttc" id="asendlib_8c_html_a448ec1abcfc24a2a3d61197ef604877d"><div class="ttname"><a href="sendlib_8c.html#a448ec1abcfc24a2a3d61197ef604877d">mutt_fqdn</a></div><div class="ttdeci">const char * mutt_fqdn(bool may_hide_host, const struct ConfigSubset *sub)</div><div class="ttdoc">Get the Fully-Qualified Domain Name.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00706">sendlib.c:706</a></div></div>
<div class="ttc" id="astring2_8h_html_a7e0481bed27661ea2679f256b24e0283"><div class="ttname"><a href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a></div><div class="ttdeci">#define NONULL(x)</div><div class="ttdef"><b>Definition</b> <a href="string2_8h_source.html#l00044">string2.h:44</a></div></div>
<div class="ttc" id="astructAddress_html"><div class="ttname"><a href="structAddress.html">Address</a></div><div class="ttdoc">An email address.</div><div class="ttdef"><b>Definition</b> <a href="address_8h_source.html#l00034">address.h:35</a></div></div>
<div class="ttc" id="astructAddress_html_a45cd47ee76ef04b63f55a0345c691fe8"><div class="ttname"><a href="structAddress.html#a45cd47ee76ef04b63f55a0345c691fe8">Address::mailbox</a></div><div class="ttdeci">struct Buffer * mailbox</div><div class="ttdoc">Mailbox and host address.</div><div class="ttdef"><b>Definition</b> <a href="address_8h_source.html#l00037">address.h:37</a></div></div>
<div class="ttc" id="astructNeoMutt_html"><div class="ttname"><a href="structNeoMutt.html">NeoMutt</a></div><div class="ttdoc">Container for Accounts, Notifications.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00040">neomutt.h:41</a></div></div>
<div class="ttc" id="astructNeoMutt_html_a5c2d30a2f734f94412bd5b3a7367b981"><div class="ttname"><a href="structNeoMutt.html#a5c2d30a2f734f94412bd5b3a7367b981">NeoMutt::username</a></div><div class="ttdeci">char * username</div><div class="ttdoc">User&#39;s login name.</div><div class="ttdef"><b>Definition</b> <a href="neomutt_8h_source.html#l00057">neomutt.h:57</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a90907de4e46f3a56b2889b79a48c9011_cgraph.svg" width="492" height="251"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a90907de4e46f3a56b2889b79a48c9011_icgraph.svg" width="558" height="251"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3a50e112e7c0ddd1270a550e63fdd80f" name="a3a50e112e7c0ddd1270a550e63fdd80f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a50e112e7c0ddd1270a550e63fdd80f">&#9670;&#160;</a></span>mutt_edit_address()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_edit_address </td>
          <td>(</td>
          <td class="paramtype">struct AddressList *</td>          <td class="paramname"><span class="paramname"><em>al</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>field</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>expand_aliases</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Edit an email address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">al</td><td>AddressList to edit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">field</td><td>Prompt for user </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">expand_aliases</td><td>If true, expand <a class="el" href="structAddress.html" title="An email address.">Address</a> aliases </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00183">183</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  184</span>{</div>
<div class="line"><span class="lineno">  185</span>  <span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><span class="lineno">  186</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  187</span>  <a class="code hl_function" href="buffer_8c.html#ae144a736bd5f9de289bdc8f27fecf96a">buf_alloc</a>(buf, 8192);</div>
<div class="line"><span class="lineno">  188</span>  <span class="keywordtype">char</span> *err = NULL;</div>
<div class="line"><span class="lineno">  189</span>  <span class="keywordtype">int</span> idna_ok = 0;</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>  <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  192</span>  {</div>
<div class="line"><span class="lineno">  193</span>    <a class="code hl_function" href="address_2address_8c.html#a7b1224fc8c5dde7114228cfc8ffbbc23">mutt_addrlist_to_local</a>(al);</div>
<div class="line"><span class="lineno">  194</span>    <a class="code hl_function" href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a>(buf);</div>
<div class="line"><span class="lineno">  195</span>    <a class="code hl_function" href="address_2address_8c.html#a8143574988507c4f906548a2e88166d5">mutt_addrlist_write</a>(al, buf, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  196</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(buf))</div>
<div class="line"><span class="lineno">  197</span>      <a class="code hl_function" href="buffer_8c.html#a9924e74ddcb5280ab380e4627d1fba99">buf_addstr</a>(buf, <span class="stringliteral">&quot;, &quot;</span>);</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a>(field, buf, <a class="code hl_define" href="editor_2wdata_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a>, <a class="code hl_enumvalue" href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234a7087d625c6e65aa739171b10a68907c5">HC_ALIAS</a>, &amp;<a class="code hl_variable" href="alias_2complete_8c.html#a88ecc4c4cbc99cdba5fed7e26b8b65e9">CompleteAliasOps</a>, NULL) != 0)</div>
<div class="line"><span class="lineno">  200</span>    {</div>
<div class="line"><span class="lineno">  201</span>      rc = -1;</div>
<div class="line"><span class="lineno">  202</span>      <span class="keywordflow">goto</span> done;</div>
<div class="line"><span class="lineno">  203</span>    }</div>
<div class="line"><span class="lineno">  204</span>    <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(al);</div>
<div class="line"><span class="lineno">  205</span>    <a class="code hl_function" href="address_2address_8c.html#a8ac391285f1af69a114544e6575b597a">mutt_addrlist_parse2</a>(al, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">if</span> (expand_aliases)</div>
<div class="line"><span class="lineno">  207</span>      <a class="code hl_function" href="alias_8c.html#a7c57d5376e9a1cf5e1f504a452996b86">mutt_expand_aliases</a>(al);</div>
<div class="line"><span class="lineno">  208</span>    idna_ok = <a class="code hl_function" href="address_2address_8c.html#abe8afdaeb5bdca19a1867823d73a1ec4">mutt_addrlist_to_intl</a>(al, &amp;err);</div>
<div class="line"><span class="lineno">  209</span>    <span class="keywordflow">if</span> (idna_ok != 0)</div>
<div class="line"><span class="lineno">  210</span>    {</div>
<div class="line"><span class="lineno">  211</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Bad IDN: &#39;%s&#39;&quot;</span>), err);</div>
<div class="line"><span class="lineno">  212</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;err);</div>
<div class="line"><span class="lineno">  213</span>    }</div>
<div class="line"><span class="lineno">  214</span>  } <span class="keywordflow">while</span> (idna_ok != 0);</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>done:</div>
<div class="line"><span class="lineno">  217</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  218</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  219</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a396bcf6adfff6663096fa6ae99c31c9a"><div class="ttname"><a href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a></div><div class="ttdeci">void mutt_addrlist_clear(struct AddressList *al)</div><div class="ttdoc">Unlink and free all Address in an AddressList.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01460">address.c:1460</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_a7b1224fc8c5dde7114228cfc8ffbbc23"><div class="ttname"><a href="address_2address_8c.html#a7b1224fc8c5dde7114228cfc8ffbbc23">mutt_addrlist_to_local</a></div><div class="ttdeci">int mutt_addrlist_to_local(struct AddressList *al)</div><div class="ttdoc">Convert an Address list from Punycode.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01378">address.c:1378</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_a8143574988507c4f906548a2e88166d5"><div class="ttname"><a href="address_2address_8c.html#a8143574988507c4f906548a2e88166d5">mutt_addrlist_write</a></div><div class="ttdeci">size_t mutt_addrlist_write(const struct AddressList *al, struct Buffer *buf, bool display)</div><div class="ttdoc">Write an Address to a buffer.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01206">address.c:1206</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_a8ac391285f1af69a114544e6575b597a"><div class="ttname"><a href="address_2address_8c.html#a8ac391285f1af69a114544e6575b597a">mutt_addrlist_parse2</a></div><div class="ttdeci">int mutt_addrlist_parse2(struct AddressList *al, const char *s)</div><div class="ttdoc">Parse a list of email addresses.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00644">address.c:644</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_abe8afdaeb5bdca19a1867823d73a1ec4"><div class="ttname"><a href="address_2address_8c.html#abe8afdaeb5bdca19a1867823d73a1ec4">mutt_addrlist_to_intl</a></div><div class="ttdeci">int mutt_addrlist_to_intl(struct AddressList *al, char **err)</div><div class="ttdoc">Convert an Address list to Punycode.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01293">address.c:1293</a></div></div>
<div class="ttc" id="aalias_2complete_8c_html_a88ecc4c4cbc99cdba5fed7e26b8b65e9"><div class="ttname"><a href="alias_2complete_8c.html#a88ecc4c4cbc99cdba5fed7e26b8b65e9">CompleteAliasOps</a></div><div class="ttdeci">const struct CompleteOps CompleteAliasOps</div><div class="ttdoc">Auto-Completion of Aliases.</div><div class="ttdef"><b>Definition</b> <a href="alias_2complete_8c_source.html#l00108">complete.c:108</a></div></div>
<div class="ttc" id="aalias_8c_html_a7c57d5376e9a1cf5e1f504a452996b86"><div class="ttname"><a href="alias_8c.html#a7c57d5376e9a1cf5e1f504a452996b86">mutt_expand_aliases</a></div><div class="ttdeci">void mutt_expand_aliases(struct AddressList *al)</div><div class="ttdoc">Expand aliases in a List of Addresses.</div><div class="ttdef"><b>Definition</b> <a href="alias_8c_source.html#l00296">alias.c:296</a></div></div>
<div class="ttc" id="abuffer_8c_html_a3b1f80652b37dc26046f9acdd85a0b05"><div class="ttname"><a href="buffer_8c.html#a3b1f80652b37dc26046f9acdd85a0b05">buf_reset</a></div><div class="ttdeci">void buf_reset(struct Buffer *buf)</div><div class="ttdoc">Reset an existing Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00076">buffer.c:76</a></div></div>
<div class="ttc" id="abuffer_8c_html_a4245e227baa2a9beb6991917404aab0d"><div class="ttname"><a href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a></div><div class="ttdeci">bool buf_is_empty(const struct Buffer *buf)</div><div class="ttdoc">Is the Buffer empty?</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00291">buffer.c:291</a></div></div>
<div class="ttc" id="abuffer_8c_html_a9924e74ddcb5280ab380e4627d1fba99"><div class="ttname"><a href="buffer_8c.html#a9924e74ddcb5280ab380e4627d1fba99">buf_addstr</a></div><div class="ttdeci">size_t buf_addstr(struct Buffer *buf, const char *s)</div><div class="ttdoc">Add a string to a Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00226">buffer.c:226</a></div></div>
<div class="ttc" id="abuffer_8c_html_ae144a736bd5f9de289bdc8f27fecf96a"><div class="ttname"><a href="buffer_8c.html#ae144a736bd5f9de289bdc8f27fecf96a">buf_alloc</a></div><div class="ttdeci">void buf_alloc(struct Buffer *buf, size_t new_size)</div><div class="ttdoc">Make sure a buffer can store at least new_size bytes.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00337">buffer.c:337</a></div></div>
<div class="ttc" id="abuffer_8h_html_a728ebc5a947b77c8d56db44ce553a7ab"><div class="ttname"><a href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a></div><div class="ttdeci">static const char * buf_string(const struct Buffer *buf)</div><div class="ttdoc">Convert a buffer to a const char * &quot;string&quot;.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00096">buffer.h:96</a></div></div>
<div class="ttc" id="aeditor_2wdata_8h_html_ab0d3fda521b45dec654ff46bac59c8c2"><div class="ttname"><a href="editor_2wdata_8h.html#ab0d3fda521b45dec654ff46bac59c8c2">MUTT_COMP_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_COMP_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="editor_2wdata_8h_source.html#l00042">wdata.h:42</a></div></div>
<div class="ttc" id="agroup__gui__mw_html_gabcbd2498b412e9f8e9d953cafc01989c"><div class="ttname"><a href="group__gui__mw.html#gabcbd2498b412e9f8e9d953cafc01989c">mw_get_field</a></div><div class="ttdeci">int mw_get_field(const char *prompt, struct Buffer *buf, CompletionFlags complete, enum HistoryClass hclass, const struct CompleteOps *comp_api, void *cdata)</div><div class="ttdoc">Ask the user for a string -.</div><div class="ttdef"><b>Definition</b> <a href="editor_2window_8c_source.html#l00271">window.c:271</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gacc1fd6d7ab1603e80e11e84e90d061e4"><div class="ttname"><a href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a></div><div class="ttdeci">#define mutt_error(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00094">logging2.h:94</a></div></div>
<div class="ttc" id="ahistory_2lib_8h_html_acb0a49d94e5b4fe512c30e2c12621234a7087d625c6e65aa739171b10a68907c5"><div class="ttname"><a href="history_2lib_8h.html#acb0a49d94e5b4fe512c30e2c12621234a7087d625c6e65aa739171b10a68907c5">HC_ALIAS</a></div><div class="ttdeci">@ HC_ALIAS</div><div class="ttdoc">Aliases.</div><div class="ttdef"><b>Definition</b> <a href="history_2lib_8h_source.html#l00056">lib.h:56</a></div></div>
<div class="ttc" id="amemory_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdoc">Free memory and set the pointer to NULL.</div><div class="ttdef"><b>Definition</b> <a href="memory_8h_source.html#l00068">memory.h:68</a></div></div>
<div class="ttc" id="amutt_2message_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2message_8h_source.html#l00028">message.h:28</a></div></div>
<div class="ttc" id="apool_8c_html_a41cba27c25d33cb6822789a2856093f2"><div class="ttname"><a href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a></div><div class="ttdeci">struct Buffer * buf_pool_get(void)</div><div class="ttdoc">Get a Buffer from the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00091">pool.c:91</a></div></div>
<div class="ttc" id="apool_8c_html_a4cc6068279461cb8628219586dfa35a1"><div class="ttname"><a href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a></div><div class="ttdeci">void buf_pool_release(struct Buffer **ptr)</div><div class="ttdoc">Return a Buffer to the pool.</div><div class="ttdef"><b>Definition</b> <a href="pool_8c_source.html#l00111">pool.c:111</a></div></div>
<div class="ttc" id="astructBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">String manipulation buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8h_source.html#l00035">buffer.h:36</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a3a50e112e7c0ddd1270a550e63fdd80f_cgraph.svg" width="482" height="719"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a3a50e112e7c0ddd1270a550e63fdd80f_icgraph.svg" width="391" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1ba9ce78a67261e872a264bc956ef857" name="a1ba9ce78a67261e872a264bc956ef857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ba9ce78a67261e872a264bc956ef857">&#9670;&#160;</a></span>mutt_encode_descriptions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_encode_descriptions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structBody.html">Body</a> *</td>          <td class="paramname"><span class="paramname"><em>b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>recurse</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RFC2047 encode the content-descriptions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td><a class="el" href="structBody.html" title="The body of an email.">Body</a> of email </td></tr>
    <tr><td class="paramname">recurse</td><td>If true, encode children parts </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01492">1492</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1493</span>{</div>
<div class="line"><span class="lineno"> 1494</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structSlist.html">Slist</a> *<span class="keyword">const</span> c_send_charset = <a class="code hl_function" href="config_2helpers_8c.html#a72ee0a5d0c0632c4fe911ef5aa6a9b8b">cs_subset_slist</a>(sub, <span class="stringliteral">&quot;send_charset&quot;</span>);</div>
<div class="line"><span class="lineno"> 1495</span>  <span class="keywordflow">for</span> (<span class="keyword">struct</span> <a class="code hl_struct" href="structBody.html">Body</a> *t = b; t; t = t-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 1496</span>  {</div>
<div class="line"><span class="lineno"> 1497</span>    <span class="keywordflow">if</span> (t-&gt;description)</div>
<div class="line"><span class="lineno"> 1498</span>    {</div>
<div class="line"><span class="lineno"> 1499</span>      <a class="code hl_function" href="rfc2047_8c.html#a61043d0660090027414b220222dbf90b">rfc2047_encode</a>(&amp;t-&gt;description, NULL, <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;Content-Description:&quot;</span>), c_send_charset);</div>
<div class="line"><span class="lineno"> 1500</span>    }</div>
<div class="line"><span class="lineno"> 1501</span>    <span class="keywordflow">if</span> (recurse &amp;&amp; t-&gt;parts)</div>
<div class="line"><span class="lineno"> 1502</span>      <a class="code hl_function" href="send_8c.html#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a>(t-&gt;parts, recurse, sub);</div>
<div class="line"><span class="lineno"> 1503</span>  }</div>
<div class="line"><span class="lineno"> 1504</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_a72ee0a5d0c0632c4fe911ef5aa6a9b8b"><div class="ttname"><a href="config_2helpers_8c.html#a72ee0a5d0c0632c4fe911ef5aa6a9b8b">cs_subset_slist</a></div><div class="ttdeci">const struct Slist * cs_subset_slist(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string-list config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00242">helpers.c:242</a></div></div>
<div class="ttc" id="arfc2047_8c_html_a61043d0660090027414b220222dbf90b"><div class="ttname"><a href="rfc2047_8c.html#a61043d0660090027414b220222dbf90b">rfc2047_encode</a></div><div class="ttdeci">void rfc2047_encode(char **pd, const char *specials, int col, const struct Slist *charsets)</div><div class="ttdoc">RFC-2047-encode a string.</div><div class="ttdef"><b>Definition</b> <a href="rfc2047_8c_source.html#l00632">rfc2047.c:632</a></div></div>
<div class="ttc" id="asend_8c_html_a1ba9ce78a67261e872a264bc956ef857"><div class="ttname"><a href="send_8c.html#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a></div><div class="ttdeci">void mutt_encode_descriptions(struct Body *b, bool recurse, struct ConfigSubset *sub)</div><div class="ttdoc">RFC2047 encode the content-descriptions.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01492">send.c:1492</a></div></div>
<div class="ttc" id="astructBody_html"><div class="ttname"><a href="structBody.html">Body</a></div><div class="ttdoc">The body of an email.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00035">body.h:36</a></div></div>
<div class="ttc" id="astructBody_html_ac55cdfce46eed13151dcfe9b329d254c"><div class="ttname"><a href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">Body::next</a></div><div class="ttdeci">struct Body * next</div><div class="ttdoc">next attachment in the list</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00072">body.h:72</a></div></div>
<div class="ttc" id="astructSlist_html"><div class="ttname"><a href="structSlist.html">Slist</a></div><div class="ttdoc">String list.</div><div class="ttdef"><b>Definition</b> <a href="slist_8h_source.html#l00036">slist.h:37</a></div></div>
</div><!-- fragment --><div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a1ba9ce78a67261e872a264bc956ef857_cgraph.svg" width="366" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a1ba9ce78a67261e872a264bc956ef857_icgraph.svg" width="680" height="116"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a78de7631e05a4bde3c61e5f5d2c34921" name="a78de7631e05a4bde3c61e5f5d2c34921"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78de7631e05a4bde3c61e5f5d2c34921">&#9670;&#160;</a></span>mutt_fetch_recips()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_fetch_recips </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>in</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate recpients for a reply email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> to populate </td></tr>
    <tr><td class="paramname">in</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> of source email </td></tr>
    <tr><td class="paramname">flags</td><td>Flags, see <a class="el" href="#a3f25bb31648a5f49a537d8df89a77506" title="Flags for mutt_send_message(), e.g. SEND_REPLY.">SendFlags</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00874">874</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  876</span>{</div>
<div class="line"><span class="lineno">  877</span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> hmfupto = <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>;</div>
<div class="line"><span class="lineno">  878</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *followup_to = <a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>);</div>
<div class="line"><span class="lineno">  879</span> </div>
<div class="line"><span class="lineno">  880</span>  <span class="keywordflow">if</span> ((flags &amp; (<a class="code hl_define" href="#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a> | <a class="code hl_define" href="#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a> | <a class="code hl_define" href="#a0e11db957196a8cc43bbe955178f3686">SEND_GROUP_CHAT_REPLY</a>)) &amp;&amp; followup_to)</div>
<div class="line"><span class="lineno">  881</span>  {</div>
<div class="line"><span class="lineno">  882</span>    <span class="keywordtype">char</span> prompt[256] = { 0 };</div>
<div class="line"><span class="lineno">  883</span>    snprintf(prompt, <span class="keyword">sizeof</span>(prompt), <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Follow-up to %s%s?&quot;</span>),</div>
<div class="line"><span class="lineno">  884</span>             <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(followup_to-&gt;<a class="code hl_variable" href="structAddress.html#a45cd47ee76ef04b63f55a0345c691fe8">mailbox</a>),</div>
<div class="line"><span class="lineno">  885</span>             <a class="code hl_define" href="queue_8h.html#abd57fe9bdea6007a602f8c7d61bd5265">TAILQ_NEXT</a>(<a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>), entries) ? <span class="stringliteral">&quot;,...&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>    hmfupto = <a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(prompt, sub, <span class="stringliteral">&quot;honor_followup_to&quot;</span>);</div>
<div class="line"><span class="lineno">  888</span>    <span class="keywordflow">if</span> (hmfupto == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>)</div>
<div class="line"><span class="lineno">  889</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  890</span>  }</div>
<div class="line"><span class="lineno">  891</span> </div>
<div class="line"><span class="lineno">  892</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a>)</div>
<div class="line"><span class="lineno">  893</span>  {</div>
<div class="line"><span class="lineno">  894</span>    <a class="code hl_function" href="send_8c.html#a7513f0a7dea1ccf4de7506399771a4c2">add_mailing_lists</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>);</div>
<div class="line"><span class="lineno">  895</span> </div>
<div class="line"><span class="lineno">  896</span>    <span class="keywordflow">if</span> (followup_to &amp;&amp; (hmfupto == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>) &amp;&amp;</div>
<div class="line"><span class="lineno">  897</span>        (<a class="code hl_function" href="send_8c.html#ab5edea027c9fa45beef0a68fb707789d">default_to</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, in, flags &amp; <a class="code hl_define" href="#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a>, (hmfupto == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>), sub) == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>))</div>
<div class="line"><span class="lineno">  898</span>    {</div>
<div class="line"><span class="lineno">  899</span>      <span class="keywordflow">return</span> -1; <span class="comment">/* abort */</span></div>
<div class="line"><span class="lineno">  900</span>    }</div>
<div class="line"><span class="lineno">  901</span>  }</div>
<div class="line"><span class="lineno">  902</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#aa0a201a6d90a4760c1e0ece8be43c1cb">SEND_TO_SENDER</a>)</div>
<div class="line"><span class="lineno">  903</span>  {</div>
<div class="line"><span class="lineno">  904</span>    <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  905</span>  }</div>
<div class="line"><span class="lineno">  906</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  907</span>  {</div>
<div class="line"><span class="lineno">  908</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="send_8c.html#ab5edea027c9fa45beef0a68fb707789d">default_to</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, in, flags &amp; (<a class="code hl_define" href="#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a> | <a class="code hl_define" href="#a0e11db957196a8cc43bbe955178f3686">SEND_GROUP_CHAT_REPLY</a>),</div>
<div class="line"><span class="lineno">  909</span>                   (hmfupto == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>), sub) == -1)</div>
<div class="line"><span class="lineno">  910</span>    {</div>
<div class="line"><span class="lineno">  911</span>      <span class="keywordflow">return</span> -1; <span class="comment">/* abort */</span></div>
<div class="line"><span class="lineno">  912</span>    }</div>
<div class="line"><span class="lineno">  913</span> </div>
<div class="line"><span class="lineno">  914</span>    <span class="keywordflow">if</span> ((flags &amp; (<a class="code hl_define" href="#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a> | <a class="code hl_define" href="#a0e11db957196a8cc43bbe955178f3686">SEND_GROUP_CHAT_REPLY</a>)) &amp;&amp;</div>
<div class="line"><span class="lineno">  915</span>        (!followup_to || (hmfupto != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)))</div>
<div class="line"><span class="lineno">  916</span>    {</div>
<div class="line"><span class="lineno">  917</span>      <span class="comment">/* if(!mutt_addr_is_user(in-&gt;to)) */</span></div>
<div class="line"><span class="lineno">  918</span>      <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a>)</div>
<div class="line"><span class="lineno">  919</span>        <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  920</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  921</span>        <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  922</span>      <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;out-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, &amp;in-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  923</span>    }</div>
<div class="line"><span class="lineno">  924</span>  }</div>
<div class="line"><span class="lineno">  925</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  926</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a16764dc80c9b3f6ad2897c8b7e59bd10"><div class="ttname"><a href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a></div><div class="ttdeci">void mutt_addrlist_copy(struct AddressList *dst, const struct AddressList *src, bool prune)</div><div class="ttdoc">Copy a list of addresses into another list.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00765">address.c:765</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35db"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a></div><div class="ttdeci">QuadOption</div><div class="ttdoc">Possible values for a quad-option.</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00035">quad.h:36</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a></div><div class="ttdeci">@ MUTT_ABORT</div><div class="ttdoc">User aborted the question (with Ctrl-G)</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00037">quad.h:37</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a></div><div class="ttdeci">@ MUTT_YES</div><div class="ttdoc">User answered &#39;Yes&#39;, or assume &#39;Yes&#39;.</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00039">quad.h:39</a></div></div>
<div class="ttc" id="aquestion_2lib_8h_html_a8ba883bf53e8ab425a03d17368de84b4"><div class="ttname"><a href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a></div><div class="ttdeci">enum QuadOption query_quadoption(const char *prompt, struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Ask the user a quad-question.</div><div class="ttdef"><b>Definition</b> <a href="question_8c_source.html#l00378">question.c:378</a></div></div>
<div class="ttc" id="aqueue_8h_html_abd57fe9bdea6007a602f8c7d61bd5265"><div class="ttname"><a href="queue_8h.html#abd57fe9bdea6007a602f8c7d61bd5265">TAILQ_NEXT</a></div><div class="ttdeci">#define TAILQ_NEXT(elm, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00889">queue.h:889</a></div></div>
<div class="ttc" id="asend_8c_html_a7513f0a7dea1ccf4de7506399771a4c2"><div class="ttname"><a href="send_8c.html#a7513f0a7dea1ccf4de7506399771a4c2">add_mailing_lists</a></div><div class="ttdeci">static void add_mailing_lists(struct AddressList *out, const struct AddressList *t, const struct AddressList *c)</div><div class="ttdoc">Search Address lists for mailing lists.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00156">send.c:156</a></div></div>
<div class="ttc" id="asend_8c_html_ab5edea027c9fa45beef0a68fb707789d"><div class="ttname"><a href="send_8c.html#ab5edea027c9fa45beef0a68fb707789d">default_to</a></div><div class="ttdeci">static int default_to(struct AddressList *to, struct Envelope *env, SendFlags flags, int hmfupto, struct ConfigSubset *sub)</div><div class="ttdoc">Generate default email addresses.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00788">send.c:788</a></div></div>
<div class="ttc" id="asend_8h_html_a0e11db957196a8cc43bbe955178f3686"><div class="ttname"><a href="#a0e11db957196a8cc43bbe955178f3686">SEND_GROUP_CHAT_REPLY</a></div><div class="ttdeci">#define SEND_GROUP_CHAT_REPLY</div><div class="ttdoc">Reply to all recipients preserving To/Cc.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00054">send.h:54</a></div></div>
<div class="ttc" id="asend_8h_html_a47e90c63dbdc4426d0630139c04cc8f3"><div class="ttname"><a href="#a47e90c63dbdc4426d0630139c04cc8f3">SEND_GROUP_REPLY</a></div><div class="ttdeci">#define SEND_GROUP_REPLY</div><div class="ttdoc">Reply to all.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00043">send.h:43</a></div></div>
<div class="ttc" id="asend_8h_html_a54e225c19799cf682ef8228825dbb3d8"><div class="ttname"><a href="#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a></div><div class="ttdeci">#define SEND_LIST_REPLY</div><div class="ttdoc">Reply to mailing list.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00044">send.h:44</a></div></div>
<div class="ttc" id="asend_8h_html_aa0a201a6d90a4760c1e0ece8be43c1cb"><div class="ttname"><a href="#aa0a201a6d90a4760c1e0ece8be43c1cb">SEND_TO_SENDER</a></div><div class="ttdeci">#define SEND_TO_SENDER</div><div class="ttdoc">Compose new email to sender.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00053">send.h:53</a></div></div>
<div class="ttc" id="astructEnvelope_html_a2d927371b3b80e025d6f7522b7361fe7"><div class="ttname"><a href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">Envelope::to</a></div><div class="ttdeci">struct AddressList to</div><div class="ttdoc">Email&#39;s &#39;To&#39; list.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00060">envelope.h:60</a></div></div>
<div class="ttc" id="astructEnvelope_html_a6044b60220b8029a6a505e5b61f1cadc"><div class="ttname"><a href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">Envelope::mail_followup_to</a></div><div class="ttdeci">struct AddressList mail_followup_to</div><div class="ttdoc">Email&#39;s &#39;mail-followup-to&#39;.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00065">envelope.h:65</a></div></div>
<div class="ttc" id="astructEnvelope_html_a6b00837b3cb4b41898b42307135be8b6"><div class="ttname"><a href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">Envelope::cc</a></div><div class="ttdeci">struct AddressList cc</div><div class="ttdoc">Email&#39;s &#39;Cc&#39; list.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00061">envelope.h:61</a></div></div>
</div><!-- fragment --><div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a78de7631e05a4bde3c61e5f5d2c34921_cgraph.svg" width="500" height="250"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a78de7631e05a4bde3c61e5f5d2c34921_icgraph.svg" width="367" height="166"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a527f182325365ed083dad7be735bab25" name="a527f182325365ed083dad7be735bab25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a527f182325365ed083dad7be735bab25">&#9670;&#160;</a></span>mutt_fix_reply_recipients()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_fix_reply_recipients </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove duplicate recipients. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> to fix </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00957">957</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  958</span>{</div>
<div class="line"><span class="lineno">  959</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_me_too = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;me_too&quot;</span>);</div>
<div class="line"><span class="lineno">  960</span>  <span class="keywordflow">if</span> (!c_me_too)</div>
<div class="line"><span class="lineno">  961</span>  {</div>
<div class="line"><span class="lineno">  962</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_reply_self = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;reply_self&quot;</span>);</div>
<div class="line"><span class="lineno">  963</span> </div>
<div class="line"><span class="lineno">  964</span>    <span class="comment">/* the order is important here.  do the CC: first so that if the</span></div>
<div class="line"><span class="lineno">  965</span><span class="comment">     * the user is the only recipient, it ends up on the TO: field */</span></div>
<div class="line"><span class="lineno">  966</span>    <a class="code hl_function" href="send_8c.html#a6671477ec99e59665fcbac17986d6e93">remove_user</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>));</div>
<div class="line"><span class="lineno">  967</span>    <a class="code hl_function" href="send_8c.html#a6671477ec99e59665fcbac17986d6e93">remove_user</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>) || c_reply_self);</div>
<div class="line"><span class="lineno">  968</span>  }</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>  <span class="comment">/* the CC field can get cluttered, especially with lists */</span></div>
<div class="line"><span class="lineno">  971</span>  <a class="code hl_function" href="address_2address_8c.html#aee5d40d84136d3a7adba727e2908ad66">mutt_addrlist_dedupe</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>);</div>
<div class="line"><span class="lineno">  972</span>  <a class="code hl_function" href="address_2address_8c.html#aee5d40d84136d3a7adba727e2908ad66">mutt_addrlist_dedupe</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>);</div>
<div class="line"><span class="lineno">  973</span>  <a class="code hl_function" href="address_2address_8c.html#a968e9f56e7408d5e0fa1d1135bdee017">mutt_addrlist_remove_xrefs</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>);</div>
<div class="line"><span class="lineno">  974</span> </div>
<div class="line"><span class="lineno">  975</span>  <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>) &amp;&amp; <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>))</div>
<div class="line"><span class="lineno">  976</span>  {</div>
<div class="line"><span class="lineno">  977</span>    <a class="code hl_define" href="queue_8h.html#aa4cf483c7dcddd1d89a00886b5466bac">TAILQ_SWAP</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, <a class="code hl_struct" href="structAddress.html">Address</a>, entries);</div>
<div class="line"><span class="lineno">  978</span>  }</div>
<div class="line"><span class="lineno">  979</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a968e9f56e7408d5e0fa1d1135bdee017"><div class="ttname"><a href="address_2address_8c.html#a968e9f56e7408d5e0fa1d1135bdee017">mutt_addrlist_remove_xrefs</a></div><div class="ttdeci">void mutt_addrlist_remove_xrefs(const struct AddressList *a, struct AddressList *b)</div><div class="ttdoc">Remove cross-references.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01433">address.c:1433</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_aee5d40d84136d3a7adba727e2908ad66"><div class="ttname"><a href="address_2address_8c.html#aee5d40d84136d3a7adba727e2908ad66">mutt_addrlist_dedupe</a></div><div class="ttdeci">void mutt_addrlist_dedupe(struct AddressList *al)</div><div class="ttdoc">Remove duplicate addresses.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01397">address.c:1397</a></div></div>
<div class="ttc" id="aqueue_8h_html_aa4cf483c7dcddd1d89a00886b5466bac"><div class="ttname"><a href="queue_8h.html#aa4cf483c7dcddd1d89a00886b5466bac">TAILQ_SWAP</a></div><div class="ttdeci">#define TAILQ_SWAP(head1, head2, type, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00937">queue.h:937</a></div></div>
<div class="ttc" id="asend_8c_html_a6671477ec99e59665fcbac17986d6e93"><div class="ttname"><a href="send_8c.html#a6671477ec99e59665fcbac17986d6e93">remove_user</a></div><div class="ttdeci">static void remove_user(struct AddressList *al, bool leave_only)</div><div class="ttdoc">Remove any address which matches the current user.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00137">send.c:137</a></div></div>
</div><!-- fragment --><div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a527f182325365ed083dad7be735bab25_cgraph.svg" width="392" height="219"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a527f182325365ed083dad7be735bab25_icgraph.svg" width="395" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a40683be6f58e2cdf321c3e30a494fbde" name="a40683be6f58e2cdf321c3e30a494fbde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40683be6f58e2cdf321c3e30a494fbde">&#9670;&#160;</a></span>mutt_forward_intro()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_forward_intro </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the "start of forwarded message" text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
    <tr><td class="paramname">fp</td><td>File to write to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00456">456</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  457</span>{</div>
<div class="line"><span class="lineno">  458</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structExpando.html">Expando</a> *c_forward_attribution_intro = <a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(sub, <span class="stringliteral">&quot;forward_attribution_intro&quot;</span>);</div>
<div class="line"><span class="lineno">  459</span>  <span class="keywordflow">if</span> (!c_forward_attribution_intro || !fp)</div>
<div class="line"><span class="lineno">  460</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_attribution_locale = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;attribution_locale&quot;</span>);</div>
<div class="line"><span class="lineno">  463</span> </div>
<div class="line"><span class="lineno">  464</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  465</span>  setlocale(LC_TIME, <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_attribution_locale));</div>
<div class="line"><span class="lineno">  466</span>  <a class="code hl_function" href="dlg__index_8c.html#ae150a6b0d1c7e5ffa3ad1705072ca048">mutt_make_string</a>(buf, -1, c_forward_attribution_intro, NULL, -1, e,</div>
<div class="line"><span class="lineno">  467</span>                   <a class="code hl_define" href="render_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a>, NULL);</div>
<div class="line"><span class="lineno">  468</span>  setlocale(LC_TIME, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  469</span>  fputs(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf), fp);</div>
<div class="line"><span class="lineno">  470</span>  fputs(<span class="stringliteral">&quot;\n\n&quot;</span>, fp);</div>
<div class="line"><span class="lineno">  471</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  472</span>}</div>
<div class="ttc" id="aconfig_2helpers_8c_html_a6b1589ee93ff51ef31f1d9324e138078"><div class="ttname"><a href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a></div><div class="ttdeci">const char * cs_subset_string(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a string config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00291">helpers.c:291</a></div></div>
<div class="ttc" id="aconfig_2helpers_8h_html_afadba3dd7a0ec53c70d047005b2efcef"><div class="ttname"><a href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a></div><div class="ttdeci">const struct Expando * cs_subset_expando(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get an Expando config item by name.</div><div class="ttdef"><b>Definition</b> <a href="expando_2config__type_8c_source.html#l00360">config_type.c:360</a></div></div>
<div class="ttc" id="adlg__index_8c_html_ae150a6b0d1c7e5ffa3ad1705072ca048"><div class="ttname"><a href="dlg__index_8c.html#ae150a6b0d1c7e5ffa3ad1705072ca048">mutt_make_string</a></div><div class="ttdeci">int mutt_make_string(struct Buffer *buf, size_t max_cols, const struct Expando *exp, struct Mailbox *m, int inpgr, struct Email *e, MuttFormatFlags flags, const char *progress)</div><div class="ttdoc">Create formatted strings using mailbox expandos.</div><div class="ttdef"><b>Definition</b> <a href="dlg__index_8c_source.html#l00800">dlg_index.c:800</a></div></div>
<div class="ttc" id="arender_8h_html_a5167e8b2777abe5e02be90e0d2a816de"><div class="ttname"><a href="render_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a></div><div class="ttdeci">#define MUTT_FORMAT_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00033">render.h:33</a></div></div>
<div class="ttc" id="astructExpando_html"><div class="ttname"><a href="structExpando.html">Expando</a></div><div class="ttdoc">Parsed Expando trees.</div><div class="ttdef"><b>Definition</b> <a href="expando_2expando_8h_source.html#l00040">expando.h:41</a></div></div>
</div><!-- fragment --><div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a40683be6f58e2cdf321c3e30a494fbde_cgraph.svg" width="340" height="331"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a40683be6f58e2cdf321c3e30a494fbde_icgraph.svg" width="362" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad951cc16f636045622b313f89278627a" name="ad951cc16f636045622b313f89278627a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad951cc16f636045622b313f89278627a">&#9670;&#160;</a></span>mutt_forward_trailer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_forward_trailer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a "end of forwarded message" text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
    <tr><td class="paramname">fp</td><td>File to write to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00480">480</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  481</span>{</div>
<div class="line"><span class="lineno">  482</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structExpando.html">Expando</a> *c_forward_attribution_trailer = <a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(sub, <span class="stringliteral">&quot;forward_attribution_trailer&quot;</span>);</div>
<div class="line"><span class="lineno">  483</span>  <span class="keywordflow">if</span> (!c_forward_attribution_trailer || !fp)</div>
<div class="line"><span class="lineno">  484</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  485</span> </div>
<div class="line"><span class="lineno">  486</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_attribution_locale = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;attribution_locale&quot;</span>);</div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  489</span>  setlocale(LC_TIME, <a class="code hl_define" href="string2_8h.html#a7e0481bed27661ea2679f256b24e0283">NONULL</a>(c_attribution_locale));</div>
<div class="line"><span class="lineno">  490</span>  <a class="code hl_function" href="dlg__index_8c.html#ae150a6b0d1c7e5ffa3ad1705072ca048">mutt_make_string</a>(buf, -1, c_forward_attribution_trailer, NULL, -1, e,</div>
<div class="line"><span class="lineno">  491</span>                   <a class="code hl_define" href="render_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a>, NULL);</div>
<div class="line"><span class="lineno">  492</span>  setlocale(LC_TIME, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  493</span>  fputc(<span class="charliteral">&#39;\n&#39;</span>, fp);</div>
<div class="line"><span class="lineno">  494</span>  fputs(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf), fp);</div>
<div class="line"><span class="lineno">  495</span>  fputc(<span class="charliteral">&#39;\n&#39;</span>, fp);</div>
<div class="line"><span class="lineno">  496</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  497</span>}</div>
</div><!-- fragment --><div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_ad951cc16f636045622b313f89278627a_cgraph.svg" width="348" height="331"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-17" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_ad951cc16f636045622b313f89278627a_icgraph.svg" width="370" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a23d9e167b5a86151993349839cc4eaf0" name="a23d9e167b5a86151993349839cc4eaf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23d9e167b5a86151993349839cc4eaf0">&#9670;&#160;</a></span>mutt_make_attribution_intro()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_make_attribution_intro </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add "on DATE, PERSON wrote" header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">fp_out</td><td>File to write to </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00664">664</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  665</span>{</div>
<div class="line"><span class="lineno">  666</span>  <a class="code hl_function" href="send_8c.html#a98117235d1c6eb0c923b1114b6f3ff85">format_attribution</a>(<a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(sub, <span class="stringliteral">&quot;attribution_intro&quot;</span>), e, fp_out, sub);</div>
<div class="line"><span class="lineno">  667</span>}</div>
<div class="ttc" id="asend_8c_html_a98117235d1c6eb0c923b1114b6f3ff85"><div class="ttname"><a href="send_8c.html#a98117235d1c6eb0c923b1114b6f3ff85">format_attribution</a></div><div class="ttdeci">static void format_attribution(const struct Expando *exp, struct Email *e, FILE *fp_out, struct ConfigSubset *sub)</div><div class="ttdoc">Format an attribution prefix/suffix.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00641">send.c:641</a></div></div>
</div><!-- fragment --><div id="dynsection-18" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a23d9e167b5a86151993349839cc4eaf0_cgraph.svg" width="362" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-19" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a23d9e167b5a86151993349839cc4eaf0_icgraph.svg" width="550" height="144"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af2a449fb243514b7945f71808d689d9b" name="af2a449fb243514b7945f71808d689d9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2a449fb243514b7945f71808d689d9b">&#9670;&#160;</a></span>mutt_make_attribution_trailer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_make_attribution_trailer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add suffix to replied email text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">fp_out</td><td>File to write to </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00675">675</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  676</span>{</div>
<div class="line"><span class="lineno">  677</span>  <a class="code hl_function" href="send_8c.html#a98117235d1c6eb0c923b1114b6f3ff85">format_attribution</a>(<a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(sub, <span class="stringliteral">&quot;attribution_trailer&quot;</span>), e, fp_out, sub);</div>
<div class="line"><span class="lineno">  678</span>}</div>
</div><!-- fragment --><div id="dynsection-20" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_af2a449fb243514b7945f71808d689d9b_cgraph.svg" width="362" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-21" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_af2a449fb243514b7945f71808d689d9b_icgraph.svg" width="550" height="144"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a441dbd4f179147fa14692a98acbd8f26" name="a441dbd4f179147fa14692a98acbd8f26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a441dbd4f179147fa14692a98acbd8f26">&#9670;&#160;</a></span>mutt_make_forward_subject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_make_forward_subject </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a subject for a forwarded email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> for result </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l00987">987</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  988</span>{</div>
<div class="line"><span class="lineno">  989</span>  <span class="keywordflow">if</span> (!env)</div>
<div class="line"><span class="lineno">  990</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  991</span> </div>
<div class="line"><span class="lineno">  992</span>  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structExpando.html">Expando</a> *c_forward_format = <a class="code hl_function" href="config_2helpers_8h.html#afadba3dd7a0ec53c70d047005b2efcef">cs_subset_expando</a>(sub, <span class="stringliteral">&quot;forward_format&quot;</span>);</div>
<div class="line"><span class="lineno">  993</span> </div>
<div class="line"><span class="lineno">  994</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno">  995</span>  <span class="comment">/* set the default subject for the message. */</span></div>
<div class="line"><span class="lineno">  996</span>  <a class="code hl_function" href="dlg__index_8c.html#ae150a6b0d1c7e5ffa3ad1705072ca048">mutt_make_string</a>(buf, -1, c_forward_format, NULL, -1, e, <a class="code hl_define" href="render_8h.html#a5167e8b2777abe5e02be90e0d2a816de">MUTT_FORMAT_NO_FLAGS</a>, NULL);</div>
<div class="line"><span class="lineno">  997</span>  <a class="code hl_function" href="envelope_8c.html#a91c00f700ee3ca43aa33487591b0d317">mutt_env_set_subject</a>(env, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf));</div>
<div class="line"><span class="lineno">  998</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno">  999</span>}</div>
<div class="ttc" id="aenvelope_8c_html_a91c00f700ee3ca43aa33487591b0d317"><div class="ttname"><a href="envelope_8c.html#a91c00f700ee3ca43aa33487591b0d317">mutt_env_set_subject</a></div><div class="ttdeci">void mutt_env_set_subject(struct Envelope *env, const char *subj)</div><div class="ttdoc">Set both subject and real_subj to subj.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00068">envelope.c:68</a></div></div>
</div><!-- fragment --><div id="dynsection-22" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a441dbd4f179147fa14692a98acbd8f26_cgraph.svg" width="411" height="331"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-23" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a441dbd4f179147fa14692a98acbd8f26_icgraph.svg" width="416" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a057d0285aaa896223a70469deb4063c9" name="a057d0285aaa896223a70469deb4063c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a057d0285aaa896223a70469deb4063c9">&#9670;&#160;</a></span>mutt_make_misc_reply_headers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_make_misc_reply_headers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env_cur</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set subject for a reply. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> for result </td></tr>
    <tr><td class="paramname">env_cur</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> of source email </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01007">1007</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1009</span>{</div>
<div class="line"><span class="lineno"> 1010</span>  <span class="keywordflow">if</span> (!env || !env_cur)</div>
<div class="line"><span class="lineno"> 1011</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1012</span> </div>
<div class="line"><span class="lineno"> 1013</span>  <span class="comment">/* This takes precedence over a subject that might have</span></div>
<div class="line"><span class="lineno"> 1014</span><span class="comment">   * been taken from a List-Post header.  Is that correct?  */</span></div>
<div class="line"><span class="lineno"> 1015</span>  <span class="keywordflow">if</span> (env_cur-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>)</div>
<div class="line"><span class="lineno"> 1016</span>  {</div>
<div class="line"><span class="lineno"> 1017</span>    <span class="keywordtype">char</span> *subj = NULL;</div>
<div class="line"><span class="lineno"> 1018</span>    <a class="code hl_function" href="mutt_2string_8c.html#a4388c16988fac9a7596dee4d4af89595">mutt_str_asprintf</a>(&amp;subj, <span class="stringliteral">&quot;Re: %s&quot;</span>, env_cur-&gt;<a class="code hl_variable" href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">real_subj</a>);</div>
<div class="line"><span class="lineno"> 1019</span>    <a class="code hl_function" href="envelope_8c.html#a91c00f700ee3ca43aa33487591b0d317">mutt_env_set_subject</a>(env, subj);</div>
<div class="line"><span class="lineno"> 1020</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;subj);</div>
<div class="line"><span class="lineno"> 1021</span>  }</div>
<div class="line"><span class="lineno"> 1022</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!env-&gt;<a class="code hl_variable" href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">subject</a>)</div>
<div class="line"><span class="lineno"> 1023</span>  {</div>
<div class="line"><span class="lineno"> 1024</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_empty_subject = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;empty_subject&quot;</span>);</div>
<div class="line"><span class="lineno"> 1025</span>    <a class="code hl_function" href="envelope_8c.html#a91c00f700ee3ca43aa33487591b0d317">mutt_env_set_subject</a>(env, c_empty_subject);</div>
<div class="line"><span class="lineno"> 1026</span>  }</div>
<div class="line"><span class="lineno"> 1027</span>}</div>
<div class="ttc" id="amutt_2string_8c_html_a4388c16988fac9a7596dee4d4af89595"><div class="ttname"><a href="mutt_2string_8c.html#a4388c16988fac9a7596dee4d4af89595">mutt_str_asprintf</a></div><div class="ttdeci">int mutt_str_asprintf(char **strp, const char *fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00805">string.c:805</a></div></div>
<div class="ttc" id="astructEnvelope_html_a20d5ccf675db375e011a7791151fa09d"><div class="ttname"><a href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">Envelope::subject</a></div><div class="ttdeci">char *const subject</div><div class="ttdoc">Email&#39;s subject.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00070">envelope.h:70</a></div></div>
<div class="ttc" id="astructEnvelope_html_ad7dc5e8dd9356bb5266787bf647a4031"><div class="ttname"><a href="structEnvelope.html#ad7dc5e8dd9356bb5266787bf647a4031">Envelope::real_subj</a></div><div class="ttdeci">char *const real_subj</div><div class="ttdoc">Offset of the real subject.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00071">envelope.h:71</a></div></div>
</div><!-- fragment --><div id="dynsection-24" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a057d0285aaa896223a70469deb4063c9_cgraph.svg" width="376" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-25" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a057d0285aaa896223a70469deb4063c9_icgraph.svg" width="380" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a58823b3164da72a6429664e1091d12a8" name="a58823b3164da72a6429664e1091d12a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58823b3164da72a6429664e1091d12a8">&#9670;&#160;</a></span>mutt_resend_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_resend_message </td>
          <td>(</td>
          <td class="paramtype">FILE *</td>          <td class="paramname"><span class="paramname"><em>fp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e_cur</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resend an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>File containing email </td></tr>
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e_cur</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> to resend </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was successfully sent </td></tr>
    <tr><td class="paramname">-1</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was aborted or an error occurred </td></tr>
    <tr><td class="paramname">1</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was postponed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01552">1552</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1554</span>{</div>
<div class="line"><span class="lineno"> 1555</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e_new = <a class="code hl_function" href="email_2email_8c.html#ab53e91414f24cecdc75fcfea6f1824e3">email_new</a>();</div>
<div class="line"><span class="lineno"> 1556</span> </div>
<div class="line"><span class="lineno"> 1557</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="postpone_2lib_8h.html#aad14aaca518d6c005ec318f14114d5ec">mutt_prepare_template</a>(fp, m, e_new, e_cur, <span class="keyword">true</span>) &lt; 0)</div>
<div class="line"><span class="lineno"> 1558</span>  {</div>
<div class="line"><span class="lineno"> 1559</span>    <a class="code hl_function" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;e_new);</div>
<div class="line"><span class="lineno"> 1560</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1561</span>  }</div>
<div class="line"><span class="lineno"> 1562</span> </div>
<div class="line"><span class="lineno"> 1563</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a>)</div>
<div class="line"><span class="lineno"> 1564</span>  {</div>
<div class="line"><span class="lineno"> 1565</span>    <span class="comment">/* mutt_prepare_template doesn&#39;t always flip on an application bit.</span></div>
<div class="line"><span class="lineno"> 1566</span><span class="comment">     * so fix that here */</span></div>
<div class="line"><span class="lineno"> 1567</span>    <span class="keywordflow">if</span> (!(e_new-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)))</div>
<div class="line"><span class="lineno"> 1568</span>    {</div>
<div class="line"><span class="lineno"> 1569</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_smime_is_default = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;smime_is_default&quot;</span>);</div>
<div class="line"><span class="lineno"> 1570</span>      <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>) != 0) &amp;&amp; c_smime_is_default)</div>
<div class="line"><span class="lineno"> 1571</span>        e_new-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>;</div>
<div class="line"><span class="lineno"> 1572</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)</div>
<div class="line"><span class="lineno"> 1573</span>        e_new-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>;</div>
<div class="line"><span class="lineno"> 1574</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1575</span>        e_new-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>;</div>
<div class="line"><span class="lineno"> 1576</span>    }</div>
<div class="line"><span class="lineno"> 1577</span> </div>
<div class="line"><span class="lineno"> 1578</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_opportunistic_encrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_opportunistic_encrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 1579</span>    <span class="keywordflow">if</span> (c_crypt_opportunistic_encrypt)</div>
<div class="line"><span class="lineno"> 1580</span>    {</div>
<div class="line"><span class="lineno"> 1581</span>      e_new-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a2fb0b0aa796d8d79a746001d09c2a2c7">SEC_OPPENCRYPT</a>;</div>
<div class="line"><span class="lineno"> 1582</span>      <a class="code hl_function" href="crypt_8c.html#a2afe38b474061773d69624018621ff1e">crypt_opportunistic_encrypt</a>(e_new);</div>
<div class="line"><span class="lineno"> 1583</span>    }</div>
<div class="line"><span class="lineno"> 1584</span>  }</div>
<div class="line"><span class="lineno"> 1585</span> </div>
<div class="line"><span class="lineno"> 1586</span>  <span class="keyword">struct </span>EmailArray ea = <a class="code hl_define" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div>
<div class="line"><span class="lineno"> 1587</span>  <a class="code hl_define" href="array_8h.html#a4f570f2382025383e4b2cc46ede6ebd0">ARRAY_ADD</a>(&amp;ea, e_cur);</div>
<div class="line"><span class="lineno"> 1588</span>  <span class="keywordtype">int</span> rc = <a class="code hl_function" href="send_8c.html#ad9c2899c7c3a76d2ce3b911221705a30">mutt_send_message</a>(<a class="code hl_define" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>, e_new, NULL, m, &amp;ea, sub);</div>
<div class="line"><span class="lineno"> 1589</span>  <a class="code hl_define" href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a>(&amp;ea);</div>
<div class="line"><span class="lineno"> 1590</span> </div>
<div class="line"><span class="lineno"> 1591</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 1592</span>}</div>
<div class="ttc" id="aarray_8h_html_a4f570f2382025383e4b2cc46ede6ebd0"><div class="ttname"><a href="array_8h.html#a4f570f2382025383e4b2cc46ede6ebd0">ARRAY_ADD</a></div><div class="ttdeci">#define ARRAY_ADD(head, elem)</div><div class="ttdoc">Add an element at the end of the array.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00157">array.h:157</a></div></div>
<div class="ttc" id="aarray_8h_html_aaa8805bd90a2015d8f5eb0fe3bb13b3f"><div class="ttname"><a href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a></div><div class="ttdeci">#define ARRAY_FREE(head)</div><div class="ttdoc">Release all memory.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00209">array.h:209</a></div></div>
<div class="ttc" id="aarray_8h_html_af50a4967d27a0531a1b10a23fc22fe05"><div class="ttname"><a href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a></div><div class="ttdeci">#define ARRAY_HEAD_INITIALIZER</div><div class="ttdoc">Static initializer for arrays.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00058">array.h:58</a></div></div>
<div class="ttc" id="acrypt_8c_html_a2afe38b474061773d69624018621ff1e"><div class="ttname"><a href="crypt_8c.html#a2afe38b474061773d69624018621ff1e">crypt_opportunistic_encrypt</a></div><div class="ttdeci">void crypt_opportunistic_encrypt(struct Email *e)</div><div class="ttdoc">Can all recipients be determined.</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l01045">crypt.c:1045</a></div></div>
<div class="ttc" id="aemail_2email_8c_html_ab53e91414f24cecdc75fcfea6f1824e3"><div class="ttname"><a href="email_2email_8c.html#ab53e91414f24cecdc75fcfea6f1824e3">email_new</a></div><div class="ttdeci">struct Email * email_new(void)</div><div class="ttdoc">Create a new Email.</div><div class="ttdef"><b>Definition</b> <a href="email_2email_8c_source.html#l00077">email.c:77</a></div></div>
<div class="ttc" id="aemail_2email_8c_html_ae9f719d3fc31d00b92bcf9f77d56ee67"><div class="ttname"><a href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a></div><div class="ttdeci">void email_free(struct Email **ptr)</div><div class="ttdoc">Free an Email.</div><div class="ttdef"><b>Definition</b> <a href="email_2email_8c_source.html#l00046">email.c:46</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a2fb0b0aa796d8d79a746001d09c2a2c7"><div class="ttname"><a href="ncrypt_2lib_8h.html#a2fb0b0aa796d8d79a746001d09c2a2c7">SEC_OPPENCRYPT</a></div><div class="ttdeci">#define SEC_OPPENCRYPT</div><div class="ttdoc">Opportunistic encrypt mode.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00094">lib.h:94</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a587e679a4c9cc44f11f0c467bb22b0af"><div class="ttname"><a href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a></div><div class="ttdeci">#define APPLICATION_PGP</div><div class="ttdoc">Use PGP to encrypt/sign.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00098">lib.h:98</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a798dfac1e8839ca89375b4ec62b3eff2"><div class="ttname"><a href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a></div><div class="ttdeci">#define APPLICATION_SMIME</div><div class="ttdoc">Use SMIME to encrypt/sign.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00099">lib.h:99</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_ad980bff69bb614893ad8e7e1c28a5023"><div class="ttname"><a href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a></div><div class="ttdeci">#define WithCrypto</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00124">lib.h:124</a></div></div>
<div class="ttc" id="apostpone_2lib_8h_html_aad14aaca518d6c005ec318f14114d5ec"><div class="ttname"><a href="postpone_2lib_8h.html#aad14aaca518d6c005ec318f14114d5ec">mutt_prepare_template</a></div><div class="ttdeci">int mutt_prepare_template(FILE *fp, struct Mailbox *m, struct Email *e_new, struct Email *e, bool resend)</div><div class="ttdoc">Prepare a message template.</div><div class="ttdef"><b>Definition</b> <a href="postpone_8c_source.html#l00484">postpone.c:484</a></div></div>
<div class="ttc" id="asend_8c_html_ad9c2899c7c3a76d2ce3b911221705a30"><div class="ttname"><a href="send_8c.html#ad9c2899c7c3a76d2ce3b911221705a30">mutt_send_message</a></div><div class="ttdeci">int mutt_send_message(SendFlags flags, struct Email *e_templ, const char *tempfile, struct Mailbox *m, struct EmailArray *ea, struct ConfigSubset *sub)</div><div class="ttdoc">Send an email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l02037">send.c:2037</a></div></div>
<div class="ttc" id="asend_8h_html_abeb38906954f30b89ad58ebbf95ac2b0"><div class="ttname"><a href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a></div><div class="ttdeci">#define SEND_RESEND</div><div class="ttdoc">Reply using the current email as a template.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00049">send.h:49</a></div></div>
<div class="ttc" id="astructEmail_html"><div class="ttname"><a href="structEmail.html">Email</a></div><div class="ttdoc">The envelope/body of an email.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00038">email.h:39</a></div></div>
<div class="ttc" id="astructEmail_html_a570a81cd747437c9ea4357947731ae10"><div class="ttname"><a href="structEmail.html#a570a81cd747437c9ea4357947731ae10">Email::security</a></div><div class="ttdeci">SecurityFlags security</div><div class="ttdoc">bit 0-10: flags, bit 11,12: application, bit 13: traditional pgp See: ncrypt/lib.h pgplib....</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00043">email.h:43</a></div></div>
</div><!-- fragment --><div id="dynsection-26" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a58823b3164da72a6429664e1091d12a8_cgraph.svg" width="739" height="320"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-27" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a58823b3164da72a6429664e1091d12a8_icgraph.svg" width="364" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad9c2899c7c3a76d2ce3b911221705a30" name="ad9c2899c7c3a76d2ce3b911221705a30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c2899c7c3a76d2ce3b911221705a30">&#9670;&#160;</a></span>mutt_send_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mutt_send_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a3f25bb31648a5f49a537d8df89a77506">SendFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e_templ</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>tempfile</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct EmailArray *</td>          <td class="paramname"><span class="paramname"><em>ea</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>Send mode, see <a class="el" href="#a3f25bb31648a5f49a537d8df89a77506" title="Flags for mutt_send_message(), e.g. SEND_REPLY.">SendFlags</a> </td></tr>
    <tr><td class="paramname">e_templ</td><td>Template to use for new message </td></tr>
    <tr><td class="paramname">tempfile</td><td>File specified by -i or -H </td></tr>
    <tr><td class="paramname">m</td><td>Current mailbox </td></tr>
    <tr><td class="paramname">ea</td><td>Array of Emails to send </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was successfully sent </td></tr>
    <tr><td class="paramname">-1</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was aborted or an error occurred </td></tr>
    <tr><td class="paramname">1</td><td><a class="el" href="structMessage.html" title="A local copy of an email.">Message</a> was postponed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l02037">2037</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2039</span>{</div>
<div class="line"><span class="lineno"> 2040</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *fcc = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>(); <span class="comment">/* where to copy this message */</span></div>
<div class="line"><span class="lineno"> 2041</span>  FILE *fp_tmp = NULL;</div>
<div class="line"><span class="lineno"> 2042</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *pbody = NULL;</div>
<div class="line"><span class="lineno"> 2043</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 2044</span>  <span class="keywordtype">bool</span> free_clear_content = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2045</span> </div>
<div class="line"><span class="lineno"> 2046</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *clear_content = NULL;</div>
<div class="line"><span class="lineno"> 2047</span>  <span class="keywordtype">char</span> *pgpkeylist = NULL;</div>
<div class="line"><span class="lineno"> 2048</span>  <span class="comment">/* save current value of &quot;pgp_sign_as&quot;  and &quot;smime_default_key&quot; */</span></div>
<div class="line"><span class="lineno"> 2049</span>  <span class="keywordtype">char</span> *pgp_sign_as = NULL;</div>
<div class="line"><span class="lineno"> 2050</span>  <span class="keywordtype">char</span> *smime_sign_as = NULL;</div>
<div class="line"><span class="lineno"> 2051</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *tag = NULL;</div>
<div class="line"><span class="lineno"> 2052</span>  <span class="keywordtype">char</span> *err = NULL;</div>
<div class="line"><span class="lineno"> 2053</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *ctype = NULL;</div>
<div class="line"><span class="lineno"> 2054</span>  <span class="keywordtype">char</span> *finalpath = NULL;</div>
<div class="line"><span class="lineno"> 2055</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e_cur = NULL;</div>
<div class="line"><span class="lineno"> 2056</span> </div>
<div class="line"><span class="lineno"> 2057</span>  <span class="keywordflow">if</span> (ea &amp;&amp; (<a class="code hl_define" href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a>(ea) == 1))</div>
<div class="line"><span class="lineno"> 2058</span>    e_cur = *<a class="code hl_define" href="array_8h.html#aebd057bb37aec75b6bdbed9e76715803">ARRAY_GET</a>(ea, 0);</div>
<div class="line"><span class="lineno"> 2059</span> </div>
<div class="line"><span class="lineno"> 2060</span>  <span class="keywordtype">int</span> rc = -1;</div>
<div class="line"><span class="lineno"> 2061</span> </div>
<div class="line"><span class="lineno"> 2062</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>)</div>
<div class="line"><span class="lineno"> 2063</span>    <a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2064</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2065</span>    <a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2066</span> </div>
<div class="line"><span class="lineno"> 2067</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_recall = <a class="code hl_function" href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(sub, <span class="stringliteral">&quot;recall&quot;</span>);</div>
<div class="line"><span class="lineno"> 2068</span> </div>
<div class="line"><span class="lineno"> 2069</span>  <span class="keywordflow">if</span> (!flags &amp;&amp; !e_templ &amp;&amp; (c_recall != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>) &amp;&amp; <a class="code hl_function" href="postpone_2lib_8h.html#a42853d2d4da10271644dc7083ae1c453">mutt_num_postponed</a>(m, <span class="keyword">true</span>))</div>
<div class="line"><span class="lineno"> 2070</span>  {</div>
<div class="line"><span class="lineno"> 2071</span>    <span class="comment">/* If the user is composing a new message, check to see if there</span></div>
<div class="line"><span class="lineno"> 2072</span><span class="comment">     * are any postponed messages first.  */</span></div>
<div class="line"><span class="lineno"> 2073</span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> ans = <a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Recall postponed message?&quot;</span>), sub, <span class="stringliteral">&quot;recall&quot;</span>);</div>
<div class="line"><span class="lineno"> 2074</span>    <span class="keywordflow">if</span> (ans == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbaaa75b5db14c0aed1fde665034f113339">MUTT_ABORT</a>)</div>
<div class="line"><span class="lineno"> 2075</span>      <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 2076</span> </div>
<div class="line"><span class="lineno"> 2077</span>    <span class="keywordflow">if</span> (ans == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div>
<div class="line"><span class="lineno"> 2078</span>      flags |= <a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>;</div>
<div class="line"><span class="lineno"> 2079</span>  }</div>
<div class="line"><span class="lineno"> 2080</span> </div>
<div class="line"><span class="lineno"> 2081</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>)</div>
<div class="line"><span class="lineno"> 2082</span>  {</div>
<div class="line"><span class="lineno"> 2083</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)</div>
<div class="line"><span class="lineno"> 2084</span>    {</div>
<div class="line"><span class="lineno"> 2085</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_pgp_sign_as = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;pgp_sign_as&quot;</span>);</div>
<div class="line"><span class="lineno"> 2086</span>      pgp_sign_as = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(c_pgp_sign_as);</div>
<div class="line"><span class="lineno"> 2087</span>    }</div>
<div class="line"><span class="lineno"> 2088</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>)</div>
<div class="line"><span class="lineno"> 2089</span>    {</div>
<div class="line"><span class="lineno"> 2090</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_smime_sign_as = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;smime_sign_as&quot;</span>);</div>
<div class="line"><span class="lineno"> 2091</span>      smime_sign_as = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(c_smime_sign_as);</div>
<div class="line"><span class="lineno"> 2092</span>    }</div>
<div class="line"><span class="lineno"> 2093</span>  }</div>
<div class="line"><span class="lineno"> 2094</span> </div>
<div class="line"><span class="lineno"> 2095</span>  <span class="comment">/* Delay expansion of aliases until absolutely necessary--shouldn&#39;t</span></div>
<div class="line"><span class="lineno"> 2096</span><span class="comment">   * be necessary unless we are prompting the user or about to execute a</span></div>
<div class="line"><span class="lineno"> 2097</span><span class="comment">   * send-hook.  */</span></div>
<div class="line"><span class="lineno"> 2098</span> </div>
<div class="line"><span class="lineno"> 2099</span>  <span class="keywordflow">if</span> (!e_templ)</div>
<div class="line"><span class="lineno"> 2100</span>  {</div>
<div class="line"><span class="lineno"> 2101</span>    e_templ = <a class="code hl_function" href="email_2email_8c.html#ab53e91414f24cecdc75fcfea6f1824e3">email_new</a>();</div>
<div class="line"><span class="lineno"> 2102</span> </div>
<div class="line"><span class="lineno"> 2103</span>    <span class="keywordflow">if</span> (flags == <a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>)</div>
<div class="line"><span class="lineno"> 2104</span>    {</div>
<div class="line"><span class="lineno"> 2105</span>      rc = <a class="code hl_function" href="postpone_2lib_8h.html#aacde94d20e952e822eac92e0fbf74682">mutt_get_postponed</a>(m, e_templ, &amp;e_cur, fcc);</div>
<div class="line"><span class="lineno"> 2106</span>      <span class="keywordflow">if</span> (rc &lt; 0)</div>
<div class="line"><span class="lineno"> 2107</span>      {</div>
<div class="line"><span class="lineno"> 2108</span>        flags = <a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>;</div>
<div class="line"><span class="lineno"> 2109</span>        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2110</span>      }</div>
<div class="line"><span class="lineno"> 2111</span>      flags = rc;</div>
<div class="line"><span class="lineno"> 2112</span>      <span class="comment">/* If postponed message is a news article, it have</span></div>
<div class="line"><span class="lineno"> 2113</span><span class="comment">       * a &quot;Newsgroups:&quot; header line, then set appropriate flag.  */</span></div>
<div class="line"><span class="lineno"> 2114</span>      <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>)</div>
<div class="line"><span class="lineno"> 2115</span>      {</div>
<div class="line"><span class="lineno"> 2116</span>        flags |= <a class="code hl_define" href="#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>;</div>
<div class="line"><span class="lineno"> 2117</span>        <a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2118</span>      }</div>
<div class="line"><span class="lineno"> 2119</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2120</span>      {</div>
<div class="line"><span class="lineno"> 2121</span>        flags &amp;= <a class="code hl_define" href="#ae31498a0e61355a0b4ece8f0c89daf49">~SEND_NEWS</a>;</div>
<div class="line"><span class="lineno"> 2122</span>        <a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2123</span>      }</div>
<div class="line"><span class="lineno"> 2124</span>    }</div>
<div class="line"><span class="lineno"> 2125</span> </div>
<div class="line"><span class="lineno"> 2126</span>    <span class="keywordflow">if</span> (flags &amp; (<a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>))</div>
<div class="line"><span class="lineno"> 2127</span>    {</div>
<div class="line"><span class="lineno"> 2128</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 2129</span>      <span class="keywordflow">while</span> (b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>)</div>
<div class="line"><span class="lineno"> 2130</span>        b = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 2131</span>      fp_tmp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <span class="stringliteral">&quot;a+&quot;</span>);</div>
<div class="line"><span class="lineno"> 2132</span>      <span class="keywordflow">if</span> (!fp_tmp)</div>
<div class="line"><span class="lineno"> 2133</span>      {</div>
<div class="line"><span class="lineno"> 2134</span>        <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2135</span>        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2136</span>      }</div>
<div class="line"><span class="lineno"> 2137</span>    }</div>
<div class="line"><span class="lineno"> 2138</span> </div>
<div class="line"><span class="lineno"> 2139</span>    <span class="keywordflow">if</span> (!e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>)</div>
<div class="line"><span class="lineno"> 2140</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a> = <a class="code hl_function" href="envelope_8c.html#a406e6f76001e7604ce65ffe972fc19c1">mutt_env_new</a>();</div>
<div class="line"><span class="lineno"> 2141</span>  }</div>
<div class="line"><span class="lineno"> 2142</span> </div>
<div class="line"><span class="lineno"> 2143</span>  <span class="comment">/* Parse and use an eventual list-post header */</span></div>
<div class="line"><span class="lineno"> 2144</span>  <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="#a54e225c19799cf682ef8228825dbb3d8">SEND_LIST_REPLY</a>) &amp;&amp; e_cur &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a> &amp;&amp; e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad0b7bb8cf358dd2d5d1dc5733b3f0be1">list_post</a>)</div>
<div class="line"><span class="lineno"> 2145</span>  {</div>
<div class="line"><span class="lineno"> 2146</span>    <span class="comment">/* Use any list-post header as a template */</span></div>
<div class="line"><span class="lineno"> 2147</span>    <a class="code hl_function" href="email_2parse_8c.html#a85f5f11a70b04f611f3e131f67644fbf">mutt_parse_mailto</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, NULL, e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#ad0b7bb8cf358dd2d5d1dc5733b3f0be1">list_post</a>);</div>
<div class="line"><span class="lineno"> 2148</span>    <span class="comment">/* We don&#39;t let them set the sender&#39;s address. */</span></div>
<div class="line"><span class="lineno"> 2149</span>    <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2150</span>  }</div>
<div class="line"><span class="lineno"> 2151</span> </div>
<div class="line"><span class="lineno"> 2152</span>  <span class="keywordflow">if</span> (!(flags &amp; (<a class="code hl_define" href="#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a> | <a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>)))</div>
<div class="line"><span class="lineno"> 2153</span>  {</div>
<div class="line"><span class="lineno"> 2154</span>    <span class="comment">/* When SEND_DRAFT_FILE is set, the caller has already</span></div>
<div class="line"><span class="lineno"> 2155</span><span class="comment">     * created the &quot;parent&quot; body structure.  */</span></div>
<div class="line"><span class="lineno"> 2156</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a>))</div>
<div class="line"><span class="lineno"> 2157</span>    {</div>
<div class="line"><span class="lineno"> 2158</span>      pbody = <a class="code hl_function" href="email_2body_8c.html#a37b346253e3b97aa64bb38ffc8d1ea0c">mutt_body_new</a>();</div>
<div class="line"><span class="lineno"> 2159</span>      pbody-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>; <span class="comment">/* don&#39;t kill command-line attachments */</span></div>
<div class="line"><span class="lineno"> 2160</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = pbody;</div>
<div class="line"><span class="lineno"> 2161</span> </div>
<div class="line"><span class="lineno"> 2162</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_content_type = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;content_type&quot;</span>);</div>
<div class="line"><span class="lineno"> 2163</span>      ctype = c_content_type;</div>
<div class="line"><span class="lineno"> 2164</span>      <span class="keywordflow">if</span> (!ctype)</div>
<div class="line"><span class="lineno"> 2165</span>        ctype = <span class="stringliteral">&quot;text/plain&quot;</span>;</div>
<div class="line"><span class="lineno"> 2166</span>      <a class="code hl_function" href="email_2parse_8c.html#a1c0bcb79c2ff930b4131a1ede5828762">mutt_parse_content_type</a>(ctype, e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2167</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2168</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a86721d1d557276cbc9cf69777af8c305">use_disp</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2169</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a99aff302b287a47c407a7412a99630f5">disposition</a> = <a class="code hl_enumvalue" href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073">DISP_INLINE</a>;</div>
<div class="line"><span class="lineno"> 2170</span> </div>
<div class="line"><span class="lineno"> 2171</span>      <span class="keywordflow">if</span> (tempfile)</div>
<div class="line"><span class="lineno"> 2172</span>      {</div>
<div class="line"><span class="lineno"> 2173</span>        fp_tmp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(tempfile, <span class="stringliteral">&quot;a+&quot;</span>);</div>
<div class="line"><span class="lineno"> 2174</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(tempfile);</div>
<div class="line"><span class="lineno"> 2175</span>        <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#a160dd7bb90081f1d45201ef2ab6b46d3">SEND_NO_FREE_HEADER</a>)</div>
<div class="line"><span class="lineno"> 2176</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a47191eabf16d34d0deb412c898ed629b">unlink</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2177</span>      }</div>
<div class="line"><span class="lineno"> 2178</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2179</span>      {</div>
<div class="line"><span class="lineno"> 2180</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a> *buf = <a class="code hl_function" href="pool_8c.html#a41cba27c25d33cb6822789a2856093f2">buf_pool_get</a>();</div>
<div class="line"><span class="lineno"> 2181</span>        <a class="code hl_define" href="tmp_8h.html#a271a7828888985955df49205d7846a45">buf_mktemp</a>(buf);</div>
<div class="line"><span class="lineno"> 2182</span>        fp_tmp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(<a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(buf), <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line"><span class="lineno"> 2183</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a> = <a class="code hl_function" href="buffer_8c.html#ad76477cc0c660bc50162393e997233eb">buf_strdup</a>(buf);</div>
<div class="line"><span class="lineno"> 2184</span>        <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;buf);</div>
<div class="line"><span class="lineno"> 2185</span>      }</div>
<div class="line"><span class="lineno"> 2186</span>    }</div>
<div class="line"><span class="lineno"> 2187</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2188</span>    {</div>
<div class="line"><span class="lineno"> 2189</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 2190</span>      <span class="keywordflow">while</span> (b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>)</div>
<div class="line"><span class="lineno"> 2191</span>        b = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 2192</span>      fp_tmp = <a class="code hl_define" href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a>(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, <span class="stringliteral">&quot;a+&quot;</span>);</div>
<div class="line"><span class="lineno"> 2193</span>    }</div>
<div class="line"><span class="lineno"> 2194</span> </div>
<div class="line"><span class="lineno"> 2195</span>    <span class="keywordflow">if</span> (!fp_tmp)</div>
<div class="line"><span class="lineno"> 2196</span>    {</div>
<div class="line"><span class="lineno"> 2197</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a>, <span class="stringliteral">&quot;can&#39;t create tempfile %s (errno=%d)\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 2198</span>                 e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, errno);</div>
<div class="line"><span class="lineno"> 2199</span>      <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2200</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2201</span>    }</div>
<div class="line"><span class="lineno"> 2202</span>  }</div>
<div class="line"><span class="lineno"> 2203</span> </div>
<div class="line"><span class="lineno"> 2204</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_reverse_name = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;reverse_name&quot;</span>);</div>
<div class="line"><span class="lineno"> 2205</span>  <span class="comment">/* this is handled here so that the user can match ~f in send-hook */</span></div>
<div class="line"><span class="lineno"> 2206</span>  <span class="keywordflow">if</span> (e_cur &amp;&amp; c_reverse_name &amp;&amp; !(flags &amp; (<a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>)))</div>
<div class="line"><span class="lineno"> 2207</span>  {</div>
<div class="line"><span class="lineno"> 2208</span>    <span class="comment">/* We shouldn&#39;t have to worry about alias expansion here since we are</span></div>
<div class="line"><span class="lineno"> 2209</span><span class="comment">     * either replying to a real or postponed message, therefore no aliases</span></div>
<div class="line"><span class="lineno"> 2210</span><span class="comment">     * should exist since the user has not had the opportunity to add</span></div>
<div class="line"><span class="lineno"> 2211</span><span class="comment">     * addresses to the list.  We just have to ensure the postponed messages</span></div>
<div class="line"><span class="lineno"> 2212</span><span class="comment">     * have their aliases expanded.  */</span></div>
<div class="line"><span class="lineno"> 2213</span> </div>
<div class="line"><span class="lineno"> 2214</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>))</div>
<div class="line"><span class="lineno"> 2215</span>    {</div>
<div class="line"><span class="lineno"> 2216</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9a678d278eb301551ba0b3e0dbcfcee630">LL_DEBUG5</a>, <span class="stringliteral">&quot;e_templ-&gt;env-&gt;from before set_reverse_name: %s\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 2217</span>                 <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(<a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>)-&gt;mailbox));</div>
<div class="line"><span class="lineno"> 2218</span>      <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2219</span>    }</div>
<div class="line"><span class="lineno"> 2220</span>    <a class="code hl_function" href="send_8c.html#ac5be3d670b1d7e5cddb605652e9aa859">set_reverse_name</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, sub);</div>
<div class="line"><span class="lineno"> 2221</span>  }</div>
<div class="line"><span class="lineno"> 2222</span> </div>
<div class="line"><span class="lineno"> 2223</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_reply_with_xorig = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;reply_with_xorig&quot;</span>);</div>
<div class="line"><span class="lineno"> 2224</span>  <span class="keywordflow">if</span> (e_cur &amp;&amp; c_reply_with_xorig &amp;&amp; !(flags &amp; (<a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a> | <a class="code hl_define" href="#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a>)))</div>
<div class="line"><span class="lineno"> 2225</span>  {</div>
<div class="line"><span class="lineno"> 2226</span>    <span class="comment">/* We shouldn&#39;t have to worry about freeing &#39;e_templ-&gt;env-&gt;from&#39; before</span></div>
<div class="line"><span class="lineno"> 2227</span><span class="comment">     * setting it here since this code will only execute when doing some</span></div>
<div class="line"><span class="lineno"> 2228</span><span class="comment">     * sort of reply. The pointer will only be set when using the -H command</span></div>
<div class="line"><span class="lineno"> 2229</span><span class="comment">     * line option.</span></div>
<div class="line"><span class="lineno"> 2230</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno"> 2231</span><span class="comment">     * If there is already a from address recorded in &#39;e_templ-&gt;env-&gt;from&#39;,</span></div>
<div class="line"><span class="lineno"> 2232</span><span class="comment">     * then it theoretically comes from `$reverse_name` handling, and we don&#39;t use</span></div>
<div class="line"><span class="lineno"> 2233</span><span class="comment">     * the &#39;X-Original-To header&#39;.  */</span></div>
<div class="line"><span class="lineno"> 2234</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a525bd5213606067d5c2be2e17fbe956b">x_original_to</a>) &amp;&amp; <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>))</div>
<div class="line"><span class="lineno"> 2235</span>    {</div>
<div class="line"><span class="lineno"> 2236</span>      <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, &amp;e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a525bd5213606067d5c2be2e17fbe956b">x_original_to</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 2237</span>      <a class="code hl_define" href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a>(<a class="code hl_enumvalue" href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9a678d278eb301551ba0b3e0dbcfcee630">LL_DEBUG5</a>, <span class="stringliteral">&quot;e_templ-&gt;env-&gt;from extracted from X-Original-To: header: %s\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 2238</span>                 <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(<a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>)-&gt;mailbox));</div>
<div class="line"><span class="lineno"> 2239</span>    }</div>
<div class="line"><span class="lineno"> 2240</span>  }</div>
<div class="line"><span class="lineno"> 2241</span> </div>
<div class="line"><span class="lineno"> 2242</span>  <span class="keywordflow">if</span> (!e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a>)</div>
<div class="line"><span class="lineno"> 2243</span>    e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">message_id</a> = <a class="code hl_function" href="expando__msgid_8c.html#a89f3fc6f29634eee2e7a18a9d0d04030">msgid_generate</a>();</div>
<div class="line"><span class="lineno"> 2244</span> </div>
<div class="line"><span class="lineno"> 2245</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_resume_draft_files = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;resume_draft_files&quot;</span>);</div>
<div class="line"><span class="lineno"> 2246</span>  <span class="keywordflow">if</span> (!(flags &amp; (<a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>)) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2247</span>      !((flags &amp; <a class="code hl_define" href="#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a>) &amp;&amp; c_resume_draft_files))</div>
<div class="line"><span class="lineno"> 2248</span>  {</div>
<div class="line"><span class="lineno"> 2249</span>    <span class="keywordflow">if</span> ((flags &amp; (<a class="code hl_define" href="#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a> | <a class="code hl_define" href="#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a> | <a class="code hl_define" href="#aa0a201a6d90a4760c1e0ece8be43c1cb">SEND_TO_SENDER</a>)) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2250</span>        (<a class="code hl_function" href="send_8c.html#a3816a6e89fb33a2c6d3d27e90fa024d0">envelope_defaults</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, ea, flags, sub) == -1))</div>
<div class="line"><span class="lineno"> 2251</span>    {</div>
<div class="line"><span class="lineno"> 2252</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2253</span>    }</div>
<div class="line"><span class="lineno"> 2254</span> </div>
<div class="line"><span class="lineno"> 2255</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_hdrs = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;hdrs&quot;</span>);</div>
<div class="line"><span class="lineno"> 2256</span>    <span class="keywordflow">if</span> (c_hdrs)</div>
<div class="line"><span class="lineno"> 2257</span>      <a class="code hl_function" href="send_8c.html#a93b53146e2fbfb6657f83297e722fdac">process_user_recips</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 2258</span> </div>
<div class="line"><span class="lineno"> 2259</span>    <span class="comment">/* Expand aliases and remove duplicates/crossrefs */</span></div>
<div class="line"><span class="lineno"> 2260</span>    <a class="code hl_function" href="alias_8c.html#aa90fd4b086aebbf4fed5245ecaca1ac1">mutt_expand_aliases_env</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 2261</span> </div>
<div class="line"><span class="lineno"> 2262</span>    <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>)</div>
<div class="line"><span class="lineno"> 2263</span>      <a class="code hl_function" href="send_8c.html#a527f182325365ed083dad7be735bab25">mutt_fix_reply_recipients</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, sub);</div>
<div class="line"><span class="lineno"> 2264</span> </div>
<div class="line"><span class="lineno"> 2265</span>    <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>) &amp;&amp; (m &amp;&amp; m-&gt;<a class="code hl_variable" href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">type</a> == <a class="code hl_enumvalue" href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803">MUTT_NNTP</a>) &amp;&amp; !e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>)</div>
<div class="line"><span class="lineno"> 2266</span>    {</div>
<div class="line"><span class="lineno"> 2267</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(((<span class="keyword">struct</span> <a class="code hl_struct" href="structNntpMboxData.html">NntpMboxData</a> *) m-&gt;<a class="code hl_variable" href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">mdata</a>)-&gt;group);</div>
<div class="line"><span class="lineno"> 2268</span>    }</div>
<div class="line"><span class="lineno"> 2269</span> </div>
<div class="line"><span class="lineno"> 2270</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_auto_edit = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;auto_edit&quot;</span>);</div>
<div class="line"><span class="lineno"> 2271</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_edit_headers = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;edit_headers&quot;</span>);</div>
<div class="line"><span class="lineno"> 2272</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_fast_reply = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;fast_reply&quot;</span>);</div>
<div class="line"><span class="lineno"> 2273</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>) &amp;&amp; !(c_auto_edit &amp;&amp; c_edit_headers) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2274</span>        !((flags &amp; <a class="code hl_define" href="#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>) &amp;&amp; c_fast_reply))</div>
<div class="line"><span class="lineno"> 2275</span>    {</div>
<div class="line"><span class="lineno"> 2276</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="send_8c.html#a9fb4ee964889bd118582f0938027a659">edit_envelope</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, flags, sub) == -1)</div>
<div class="line"><span class="lineno"> 2277</span>        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2278</span>    }</div>
<div class="line"><span class="lineno"> 2279</span> </div>
<div class="line"><span class="lineno"> 2280</span>    <span class="comment">/* the from address must be set here regardless of whether or not</span></div>
<div class="line"><span class="lineno"> 2281</span><span class="comment">     * $use_from is set so that the &#39;~P&#39; (from you) operator in send-hook</span></div>
<div class="line"><span class="lineno"> 2282</span><span class="comment">     * patterns will work.  if $use_from is unset, the from address is killed</span></div>
<div class="line"><span class="lineno"> 2283</span><span class="comment">     * after send-hooks are evaluated */</span></div>
<div class="line"><span class="lineno"> 2284</span> </div>
<div class="line"><span class="lineno"> 2285</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> killfrom = <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2286</span>    <span class="keywordflow">if</span> (killfrom)</div>
<div class="line"><span class="lineno"> 2287</span>    {</div>
<div class="line"><span class="lineno"> 2288</span>      <a class="code hl_function" href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, <a class="code hl_function" href="send_8c.html#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a>(sub));</div>
<div class="line"><span class="lineno"> 2289</span>    }</div>
<div class="line"><span class="lineno"> 2290</span> </div>
<div class="line"><span class="lineno"> 2291</span>    <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>) &amp;&amp; e_cur)</div>
<div class="line"><span class="lineno"> 2292</span>    {</div>
<div class="line"><span class="lineno"> 2293</span>      <span class="comment">/* change setting based upon message we are replying to */</span></div>
<div class="line"><span class="lineno"> 2294</span>      <a class="code hl_function" href="hooks_2exec_8c.html#ab8440ad38319fcc7ba6280645e21e62f">exec_message_hook</a>(m, e_cur, <a class="code hl_enumvalue" href="command_8h.html#aaf8d2069e2c6bbecf4aa8f9819028e8aa774911b866bf0ecfe57c0dcc25d179c5">CMD_REPLY_HOOK</a>);</div>
<div class="line"><span class="lineno"> 2295</span> </div>
<div class="line"><span class="lineno"> 2296</span>      <span class="comment">/* set the replied flag for the message we are generating so that the</span></div>
<div class="line"><span class="lineno"> 2297</span><span class="comment">       * user can use ~Q in a send-hook to know when reply-hook&#39;s are also</span></div>
<div class="line"><span class="lineno"> 2298</span><span class="comment">       * being used.  */</span></div>
<div class="line"><span class="lineno"> 2299</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2300</span>    }</div>
<div class="line"><span class="lineno"> 2301</span> </div>
<div class="line"><span class="lineno"> 2302</span>    <span class="comment">/* change settings based upon recipients */</span></div>
<div class="line"><span class="lineno"> 2303</span> </div>
<div class="line"><span class="lineno"> 2304</span>    <a class="code hl_function" href="hooks_2exec_8c.html#ab8440ad38319fcc7ba6280645e21e62f">exec_message_hook</a>(NULL, e_templ, <a class="code hl_enumvalue" href="command_8h.html#aaf8d2069e2c6bbecf4aa8f9819028e8aa0bddb74d77fbd3c5117a1f200c65e926">CMD_SEND_HOOK</a>);</div>
<div class="line"><span class="lineno"> 2305</span> </div>
<div class="line"><span class="lineno"> 2306</span>    <span class="comment">/* Unset the replied flag from the message we are composing since it is</span></div>
<div class="line"><span class="lineno"> 2307</span><span class="comment">     * no longer required.  This is done here because the FCC&#39;d copy of</span></div>
<div class="line"><span class="lineno"> 2308</span><span class="comment">     * this message was erroneously get the &#39;R&#39;eplied flag when stored in</span></div>
<div class="line"><span class="lineno"> 2309</span><span class="comment">     * a maildir-style mailbox.  */</span></div>
<div class="line"><span class="lineno"> 2310</span>    e_templ-&gt;<a class="code hl_variable" href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">replied</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2311</span> </div>
<div class="line"><span class="lineno"> 2312</span>    <span class="comment">/* $use_from and/or $from might have changed in a send-hook */</span></div>
<div class="line"><span class="lineno"> 2313</span>    <span class="keywordflow">if</span> (killfrom)</div>
<div class="line"><span class="lineno"> 2314</span>    {</div>
<div class="line"><span class="lineno"> 2315</span>      <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2316</span> </div>
<div class="line"><span class="lineno"> 2317</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_use_from = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;use_from&quot;</span>);</div>
<div class="line"><span class="lineno"> 2318</span>      <span class="keywordflow">if</span> (c_use_from &amp;&amp; !(flags &amp; (<a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>)))</div>
<div class="line"><span class="lineno"> 2319</span>        <a class="code hl_function" href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, <a class="code hl_function" href="send_8c.html#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a>(sub));</div>
<div class="line"><span class="lineno"> 2320</span>    }</div>
<div class="line"><span class="lineno"> 2321</span> </div>
<div class="line"><span class="lineno"> 2322</span>    <span class="keywordflow">if</span> (c_hdrs)</div>
<div class="line"><span class="lineno"> 2323</span>      <a class="code hl_function" href="send_8c.html#a9bca5c9f44a7908485389d16dcf20f96">process_user_header</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 2324</span> </div>
<div class="line"><span class="lineno"> 2325</span>    <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>) &amp;&amp; !(flags &amp; <a class="code hl_define" href="#a942f852d37ce6e458cda7f187b922b67">SEND_CONSUMED_STDIN</a>))</div>
<div class="line"><span class="lineno"> 2326</span>    {</div>
<div class="line"><span class="lineno"> 2327</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a>(stdin, fp_tmp) &lt; 0)</div>
<div class="line"><span class="lineno"> 2328</span>      {</div>
<div class="line"><span class="lineno"> 2329</span>        <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Error sending message&quot;</span>));</div>
<div class="line"><span class="lineno"> 2330</span>        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2331</span>      }</div>
<div class="line"><span class="lineno"> 2332</span>    }</div>
<div class="line"><span class="lineno"> 2333</span> </div>
<div class="line"><span class="lineno"> 2334</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>))</div>
<div class="line"><span class="lineno"> 2335</span>      <a class="code hl_function" href="send_8c.html#a83f702d9e8d2f453b99a29cc6afe57e1">mutt_make_greeting</a>(e_templ, fp_tmp, sub);</div>
<div class="line"><span class="lineno"> 2336</span> </div>
<div class="line"><span class="lineno"> 2337</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_sig_on_top = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;sig_on_top&quot;</span>);</div>
<div class="line"><span class="lineno"> 2338</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_editor = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;editor&quot;</span>);</div>
<div class="line"><span class="lineno"> 2339</span>    <span class="keywordflow">if</span> (c_sig_on_top &amp;&amp; !(flags &amp; (<a class="code hl_define" href="#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a> | <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>)) &amp;&amp; c_editor)</div>
<div class="line"><span class="lineno"> 2340</span>    {</div>
<div class="line"><span class="lineno"> 2341</span>      <a class="code hl_function" href="send_8c.html#afa5258518aabbe76c14e64e105515acf">append_signature</a>(fp_tmp, sub);</div>
<div class="line"><span class="lineno"> 2342</span>    }</div>
<div class="line"><span class="lineno"> 2343</span> </div>
<div class="line"><span class="lineno"> 2344</span>    <span class="comment">/* include replies/forwarded messages, unless we are given a template */</span></div>
<div class="line"><span class="lineno"> 2345</span>    <span class="keywordflow">if</span> (!tempfile &amp;&amp; (m || !(flags &amp; (<a class="code hl_define" href="#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a> | <a class="code hl_define" href="#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a>))) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2346</span>        (<a class="code hl_function" href="send_8c.html#a5f6595bb450dfd3e7f3b8b01e45396cd">generate_body</a>(fp_tmp, e_templ, flags, m, ea, sub) == -1))</div>
<div class="line"><span class="lineno"> 2347</span>    {</div>
<div class="line"><span class="lineno"> 2348</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2349</span>    }</div>
<div class="line"><span class="lineno"> 2350</span> </div>
<div class="line"><span class="lineno"> 2351</span>    <span class="keywordflow">if</span> (!c_sig_on_top &amp;&amp; !(flags &amp; (<a class="code hl_define" href="#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a> | <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>)) &amp;&amp; c_editor)</div>
<div class="line"><span class="lineno"> 2352</span>    {</div>
<div class="line"><span class="lineno"> 2353</span>      <a class="code hl_function" href="send_8c.html#afa5258518aabbe76c14e64e105515acf">append_signature</a>(fp_tmp, sub);</div>
<div class="line"><span class="lineno"> 2354</span>    }</div>
<div class="line"><span class="lineno"> 2355</span>  }</div>
<div class="line"><span class="lineno"> 2356</span> </div>
<div class="line"><span class="lineno"> 2357</span>  <span class="comment">/* Only set format=flowed for new messages.  postponed/resent/draftfiles</span></div>
<div class="line"><span class="lineno"> 2358</span><span class="comment">   * should respect the original email.</span></div>
<div class="line"><span class="lineno"> 2359</span><span class="comment">   *</span></div>
<div class="line"><span class="lineno"> 2360</span><span class="comment">   * This is set here so that send-hook can be used to turn the option on.  */</span></div>
<div class="line"><span class="lineno"> 2361</span>  <span class="keywordflow">if</span> (!(flags &amp; (<a class="code hl_define" href="#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a> | <a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a> | <a class="code hl_define" href="#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a>)))</div>
<div class="line"><span class="lineno"> 2362</span>  {</div>
<div class="line"><span class="lineno"> 2363</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_text_flowed = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;text_flowed&quot;</span>);</div>
<div class="line"><span class="lineno"> 2364</span>    <span class="keywordflow">if</span> (c_text_flowed &amp;&amp; <a class="code hl_function" href="send_8c.html#adaad7f2e93eb41299f638d224d90f82b">is_text_plain</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>))</div>
<div class="line"><span class="lineno"> 2365</span>    {</div>
<div class="line"><span class="lineno"> 2366</span>      <a class="code hl_function" href="parameter_8c.html#a42249fc15b1e52df046a0a10de29da44">mutt_param_set</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>, <span class="stringliteral">&quot;format&quot;</span>, <span class="stringliteral">&quot;flowed&quot;</span>);</div>
<div class="line"><span class="lineno"> 2367</span>    }</div>
<div class="line"><span class="lineno"> 2368</span>  }</div>
<div class="line"><span class="lineno"> 2369</span> </div>
<div class="line"><span class="lineno"> 2370</span>  <span class="comment">/* This hook is even called for postponed messages, and can, e.g., be used</span></div>
<div class="line"><span class="lineno"> 2371</span><span class="comment">   * for setting the editor, the sendmail path, or the envelope sender.  */</span></div>
<div class="line"><span class="lineno"> 2372</span>  <a class="code hl_function" href="hooks_2exec_8c.html#ab8440ad38319fcc7ba6280645e21e62f">exec_message_hook</a>(NULL, e_templ, <a class="code hl_enumvalue" href="command_8h.html#aaf8d2069e2c6bbecf4aa8f9819028e8aa5a9d4edd51e19a12612fad9f7b9fcfcb">CMD_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 2373</span> </div>
<div class="line"><span class="lineno"> 2374</span>  <span class="comment">/* wait until now to set the real name portion of our return address so</span></div>
<div class="line"><span class="lineno"> 2375</span><span class="comment">   * that $real_name can be set in a send-hook */</span></div>
<div class="line"><span class="lineno"> 2376</span>  {</div>
<div class="line"><span class="lineno"> 2377</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *from = <a class="code hl_define" href="queue_8h.html#a7d6894360bd1c41e0e6f6d84998c1362">TAILQ_FIRST</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2378</span>    <span class="keywordflow">if</span> (from &amp;&amp; !from-&gt;<a class="code hl_variable" href="structAddress.html#a01b32bc3153d06f852064f1cca3feb61">personal</a> &amp;&amp; !(flags &amp; (<a class="code hl_define" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a> | <a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>)))</div>
<div class="line"><span class="lineno"> 2379</span>    {</div>
<div class="line"><span class="lineno"> 2380</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_real_name = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;real_name&quot;</span>);</div>
<div class="line"><span class="lineno"> 2381</span>      <span class="keywordflow">if</span> (c_real_name)</div>
<div class="line"><span class="lineno"> 2382</span>        from-&gt;<a class="code hl_variable" href="structAddress.html#a01b32bc3153d06f852064f1cca3feb61">personal</a> = <a class="code hl_function" href="buffer_8c.html#a7f93abaa65bfc8c15c6ea5d02889c19d">buf_new</a>(c_real_name);</div>
<div class="line"><span class="lineno"> 2383</span>    }</div>
<div class="line"><span class="lineno"> 2384</span>  }</div>
<div class="line"><span class="lineno"> 2385</span> </div>
<div class="line"><span class="lineno"> 2386</span>  <span class="keywordflow">if</span> (!(((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; (flags &amp; <a class="code hl_define" href="#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a>)))</div>
<div class="line"><span class="lineno"> 2387</span>    <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp_tmp);</div>
<div class="line"><span class="lineno"> 2388</span> </div>
<div class="line"><span class="lineno"> 2389</span>  <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>))</div>
<div class="line"><span class="lineno"> 2390</span>  {</div>
<div class="line"><span class="lineno"> 2391</span>    <span class="keyword">struct </span>stat st = { 0 };</div>
<div class="line"><span class="lineno"> 2392</span>    time_t mtime;</div>
<div class="line"><span class="lineno"> 2393</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structBody.html">Body</a> *b = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 2394</span>    <span class="keywordflow">while</span> (b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>)</div>
<div class="line"><span class="lineno"> 2395</span>      b = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 2396</span>    mtime = <a class="code hl_function" href="file_8c.html#a61b50c8615492662cbc27ebbf83090ce">mutt_file_decrease_mtime</a>(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, NULL);</div>
<div class="line"><span class="lineno"> 2397</span>    <span class="keywordflow">if</span> (mtime == (time_t) -1)</div>
<div class="line"><span class="lineno"> 2398</span>    {</div>
<div class="line"><span class="lineno"> 2399</span>      <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2400</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2401</span>    }</div>
<div class="line"><span class="lineno"> 2402</span> </div>
<div class="line"><span class="lineno"> 2403</span>    <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(b, sub);</div>
<div class="line"><span class="lineno"> 2404</span> </div>
<div class="line"><span class="lineno"> 2405</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_edit_headers = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;edit_headers&quot;</span>);</div>
<div class="line"><span class="lineno"> 2406</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_auto_edit = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;auto_edit&quot;</span>);</div>
<div class="line"><span class="lineno"> 2407</span> </div>
<div class="line"><span class="lineno"> 2408</span>    <span class="comment">/* Select whether or not the user&#39;s editor should be called now.  We</span></div>
<div class="line"><span class="lineno"> 2409</span><span class="comment">     * don&#39;t want to do this when:</span></div>
<div class="line"><span class="lineno"> 2410</span><span class="comment">     * 1) we are sending a key/cert</span></div>
<div class="line"><span class="lineno"> 2411</span><span class="comment">     * 2) we are forwarding a message and the user doesn&#39;t want to edit it.</span></div>
<div class="line"><span class="lineno"> 2412</span><span class="comment">     *    This is controlled by the quadoption $forward_edit.  However, if</span></div>
<div class="line"><span class="lineno"> 2413</span><span class="comment">     *    both $edit_headers and $auto_edit are set, we want to ignore the</span></div>
<div class="line"><span class="lineno"> 2414</span><span class="comment">     *    setting of $forward_edit because the user probably needs to add the</span></div>
<div class="line"><span class="lineno"> 2415</span><span class="comment">     *    recipients.  */</span></div>
<div class="line"><span class="lineno"> 2416</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2417</span>        (((flags &amp; <a class="code hl_define" href="#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a>) == 0) || (c_edit_headers &amp;&amp; c_auto_edit) ||</div>
<div class="line"><span class="lineno"> 2418</span>         (<a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Edit forwarded message?&quot;</span>), sub, <span class="stringliteral">&quot;forward_edit&quot;</span>) == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)))</div>
<div class="line"><span class="lineno"> 2419</span>    {</div>
<div class="line"><span class="lineno"> 2420</span>      <span class="comment">/* If the this isn&#39;t a text message, look for a mailcap edit command */</span></div>
<div class="line"><span class="lineno"> 2421</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> c_editor = <a class="code hl_function" href="config_2helpers_8c.html#a6b1589ee93ff51ef31f1d9324e138078">cs_subset_string</a>(sub, <span class="stringliteral">&quot;editor&quot;</span>);</div>
<div class="line"><span class="lineno"> 2422</span>      b = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 2423</span>      <span class="keywordflow">while</span> (b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>)</div>
<div class="line"><span class="lineno"> 2424</span>        b = b-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>;</div>
<div class="line"><span class="lineno"> 2425</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="muttlib_8c.html#a8973b2e5185609bfc5e0ef136fcd3177">mutt_needs_mailcap</a>(b))</div>
<div class="line"><span class="lineno"> 2426</span>      {</div>
<div class="line"><span class="lineno"> 2427</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="mutt__attach_8c.html#a0b2292184984705d60be088b9dbbecfb">mutt_edit_attachment</a>(b))</div>
<div class="line"><span class="lineno"> 2428</span>          <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2429</span>      }</div>
<div class="line"><span class="lineno"> 2430</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c_edit_headers)</div>
<div class="line"><span class="lineno"> 2431</span>      {</div>
<div class="line"><span class="lineno"> 2432</span>        <a class="code hl_function" href="envelope_8c.html#afd00cc8d84947cbd55e082420b5732f1">mutt_env_to_local</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 2433</span>        <a class="code hl_function" href="email_2header_8c.html#add6fa85ce7ef8dcad27d465fbbc27708">mutt_edit_headers</a>(c_editor, b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, e_templ, fcc);</div>
<div class="line"><span class="lineno"> 2434</span>        <a class="code hl_function" href="envelope_8c.html#a0108f989ca58622df272cf31b610395e">mutt_env_to_intl</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, NULL, NULL);</div>
<div class="line"><span class="lineno"> 2435</span>      }</div>
<div class="line"><span class="lineno"> 2436</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2437</span>      {</div>
<div class="line"><span class="lineno"> 2438</span>        <a class="code hl_function" href="curs__lib_8c.html#a0590f11f42a6242002ea4c842438231b">mutt_edit_file</a>(c_editor, b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2439</span>        <span class="keywordflow">if</span> (stat(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, &amp;st) == 0)</div>
<div class="line"><span class="lineno"> 2440</span>        {</div>
<div class="line"><span class="lineno"> 2441</span>          <span class="keywordflow">if</span> (mtime != st.st_mtime)</div>
<div class="line"><span class="lineno"> 2442</span>            <a class="code hl_function" href="send_8c.html#ad5e73f6a253107a7f55ee7388fbbf92f">fix_end_of_file</a>(b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2443</span>        }</div>
<div class="line"><span class="lineno"> 2444</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2445</span>        {</div>
<div class="line"><span class="lineno"> 2446</span>          <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, b-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2447</span>        }</div>
<div class="line"><span class="lineno"> 2448</span>      }</div>
<div class="line"><span class="lineno"> 2449</span> </div>
<div class="line"><span class="lineno"> 2450</span>      <a class="code hl_function" href="hooks_2exec_8c.html#ab8440ad38319fcc7ba6280645e21e62f">exec_message_hook</a>(NULL, e_templ, <a class="code hl_enumvalue" href="command_8h.html#aaf8d2069e2c6bbecf4aa8f9819028e8aa5a9d4edd51e19a12612fad9f7b9fcfcb">CMD_SEND2_HOOK</a>);</div>
<div class="line"><span class="lineno"> 2451</span>    }</div>
<div class="line"><span class="lineno"> 2452</span> </div>
<div class="line"><span class="lineno"> 2453</span>    <span class="keywordflow">if</span> (!(flags &amp; (<a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a> | <a class="code hl_define" href="#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a> | <a class="code hl_define" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a> | <a class="code hl_define" href="#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a>)))</div>
<div class="line"><span class="lineno"> 2454</span>    {</div>
<div class="line"><span class="lineno"> 2455</span>      <span class="keywordflow">if</span> (stat(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>, &amp;st) == 0)</div>
<div class="line"><span class="lineno"> 2456</span>      {</div>
<div class="line"><span class="lineno"> 2457</span>        <span class="comment">/* if the file was not modified, bail out now */</span></div>
<div class="line"><span class="lineno"> 2458</span>        <span class="keywordflow">if</span> ((mtime == st.st_mtime) &amp;&amp; !e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 2459</span>            (<a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Abort unmodified message?&quot;</span>), sub, <span class="stringliteral">&quot;abort_unmodified&quot;</span>) == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>))</div>
<div class="line"><span class="lineno"> 2460</span>        {</div>
<div class="line"><span class="lineno"> 2461</span>          <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Aborted unmodified message&quot;</span>));</div>
<div class="line"><span class="lineno"> 2462</span>          <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2463</span>        }</div>
<div class="line"><span class="lineno"> 2464</span>      }</div>
<div class="line"><span class="lineno"> 2465</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2466</span>      {</div>
<div class="line"><span class="lineno"> 2467</span>        <a class="code hl_define" href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a>(<span class="stringliteral">&quot;%s&quot;</span>, e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">filename</a>);</div>
<div class="line"><span class="lineno"> 2468</span>      }</div>
<div class="line"><span class="lineno"> 2469</span>    }</div>
<div class="line"><span class="lineno"> 2470</span>  }</div>
<div class="line"><span class="lineno"> 2471</span> </div>
<div class="line"><span class="lineno"> 2472</span>  <span class="comment">/* Set the message security unless:</span></div>
<div class="line"><span class="lineno"> 2473</span><span class="comment">   * 1) crypto support is not enabled (WithCrypto==0)</span></div>
<div class="line"><span class="lineno"> 2474</span><span class="comment">   * 2) pgp: header field was present during message editing with $edit_headers (e_templ-&gt;security != 0)</span></div>
<div class="line"><span class="lineno"> 2475</span><span class="comment">   * 3) we are resending a message</span></div>
<div class="line"><span class="lineno"> 2476</span><span class="comment">   * 4) we are recalling a postponed message (don&#39;t override the user&#39;s saved settings)</span></div>
<div class="line"><span class="lineno"> 2477</span><span class="comment">   * 5) we are in batch mode</span></div>
<div class="line"><span class="lineno"> 2478</span><span class="comment">   * But 3, 4, and 5, can be overridden with &#39;-C&#39; in the command line (flags &amp; SEND_CLI_CRYPTO)</span></div>
<div class="line"><span class="lineno"> 2479</span><span class="comment">   *</span></div>
<div class="line"><span class="lineno"> 2480</span><span class="comment">   * This is done after allowing the user to edit the message so that security</span></div>
<div class="line"><span class="lineno"> 2481</span><span class="comment">   * settings can be configured with send2-hook and $edit_headers.  */</span></div>
<div class="line"><span class="lineno"> 2482</span>  <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> == 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2483</span>      ((flags &amp; <a class="code hl_define" href="#ab52a058ff3342266b80a3890e2b277a4">SEND_CLI_CRYPTO</a>) || !(flags &amp; (<a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a> | <a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a> | <a class="code hl_define" href="#abeb38906954f30b89ad58ebbf95ac2b0">SEND_RESEND</a>))))</div>
<div class="line"><span class="lineno"> 2484</span>  {</div>
<div class="line"><span class="lineno"> 2485</span>    <span class="keywordtype">bool</span> c_autocrypt = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2486</span>    <span class="keywordtype">bool</span> c_autocrypt_reply = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2487</span> </div>
<div class="line"><span class="lineno"> 2488</span><span class="preprocessor">#ifdef USE_AUTOCRYPT</span></div>
<div class="line"><span class="lineno"> 2489</span>    c_autocrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;autocrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 2490</span>    c_autocrypt_reply = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;autocrypt_reply&quot;</span>);</div>
<div class="line"><span class="lineno"> 2491</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2492</span> </div>
<div class="line"><span class="lineno"> 2493</span>    <span class="keywordflow">if</span> (c_autocrypt &amp;&amp; c_autocrypt_reply &amp;&amp; e_cur &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>))</div>
<div class="line"><span class="lineno"> 2494</span>    {</div>
<div class="line"><span class="lineno"> 2495</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= (<a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#ae0ce4a742538f3ee3e1bfbf143c794fb">SEC_AUTOCRYPT_OVERRIDE</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>);</div>
<div class="line"><span class="lineno"> 2496</span>    }</div>
<div class="line"><span class="lineno"> 2497</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2498</span>    {</div>
<div class="line"><span class="lineno"> 2499</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_auto_sign = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_auto_sign&quot;</span>);</div>
<div class="line"><span class="lineno"> 2500</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_auto_encrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_auto_encrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 2501</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_reply_encrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_reply_encrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 2502</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_reply_sign = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_reply_sign&quot;</span>);</div>
<div class="line"><span class="lineno"> 2503</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_reply_sign_encrypted = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_reply_sign_encrypted&quot;</span>);</div>
<div class="line"><span class="lineno"> 2504</span> </div>
<div class="line"><span class="lineno"> 2505</span>      <span class="keywordflow">if</span> (c_crypt_auto_sign)</div>
<div class="line"><span class="lineno"> 2506</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>;</div>
<div class="line"><span class="lineno"> 2507</span>      <span class="keywordflow">if</span> (c_crypt_auto_encrypt)</div>
<div class="line"><span class="lineno"> 2508</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>;</div>
<div class="line"><span class="lineno"> 2509</span>      <span class="keywordflow">if</span> (c_crypt_reply_encrypt &amp;&amp; e_cur &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>))</div>
<div class="line"><span class="lineno"> 2510</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>;</div>
<div class="line"><span class="lineno"> 2511</span>      <span class="keywordflow">if</span> (c_crypt_reply_sign &amp;&amp; e_cur &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>))</div>
<div class="line"><span class="lineno"> 2512</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>;</div>
<div class="line"><span class="lineno"> 2513</span>      <span class="keywordflow">if</span> (c_crypt_reply_sign_encrypted &amp;&amp; e_cur &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a>))</div>
<div class="line"><span class="lineno"> 2514</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>;</div>
<div class="line"><span class="lineno"> 2515</span> </div>
<div class="line"><span class="lineno"> 2516</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_opportunistic_encrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_opportunistic_encrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 2517</span> </div>
<div class="line"><span class="lineno"> 2518</span>      <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2519</span>          ((e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>)) || c_crypt_opportunistic_encrypt))</div>
<div class="line"><span class="lineno"> 2520</span>      {</div>
<div class="line"><span class="lineno"> 2521</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> c_pgp_auto_inline = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;pgp_auto_inline&quot;</span>);</div>
<div class="line"><span class="lineno"> 2522</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> c_pgp_reply_inline = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;pgp_reply_inline&quot;</span>);</div>
<div class="line"><span class="lineno"> 2523</span> </div>
<div class="line"><span class="lineno"> 2524</span>        <span class="keywordflow">if</span> (c_pgp_auto_inline)</div>
<div class="line"><span class="lineno"> 2525</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a074f827472ad45f11ec1132cdfed2daf">SEC_INLINE</a>;</div>
<div class="line"><span class="lineno"> 2526</span>        <span class="keywordflow">if</span> (c_pgp_reply_inline &amp;&amp; e_cur &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a074f827472ad45f11ec1132cdfed2daf">SEC_INLINE</a>))</div>
<div class="line"><span class="lineno"> 2527</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a074f827472ad45f11ec1132cdfed2daf">SEC_INLINE</a>;</div>
<div class="line"><span class="lineno"> 2528</span>      }</div>
<div class="line"><span class="lineno"> 2529</span>    }</div>
<div class="line"><span class="lineno"> 2530</span> </div>
<div class="line"><span class="lineno"> 2531</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_opportunistic_encrypt = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_opportunistic_encrypt&quot;</span>);</div>
<div class="line"><span class="lineno"> 2532</span> </div>
<div class="line"><span class="lineno"> 2533</span>    <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> || c_crypt_opportunistic_encrypt)</div>
<div class="line"><span class="lineno"> 2534</span>    {</div>
<div class="line"><span class="lineno"> 2535</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_auto_pgp = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_auto_pgp&quot;</span>);</div>
<div class="line"><span class="lineno"> 2536</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_crypt_auto_smime = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;crypt_auto_smime&quot;</span>);</div>
<div class="line"><span class="lineno"> 2537</span> </div>
<div class="line"><span class="lineno"> 2538</span>      <span class="comment">/* When replying / forwarding, use the original message&#39;s</span></div>
<div class="line"><span class="lineno"> 2539</span><span class="comment">       * crypto system.  According to the documentation,</span></div>
<div class="line"><span class="lineno"> 2540</span><span class="comment">       * smime_is_default should be disregarded here.</span></div>
<div class="line"><span class="lineno"> 2541</span><span class="comment">       *</span></div>
<div class="line"><span class="lineno"> 2542</span><span class="comment">       * Problem: At least with forwarding, this doesn&#39;t really</span></div>
<div class="line"><span class="lineno"> 2543</span><span class="comment">       * make much sense. Should we have an option to completely</span></div>
<div class="line"><span class="lineno"> 2544</span><span class="comment">       * disable individual mechanisms at run-time?  */</span></div>
<div class="line"><span class="lineno"> 2545</span>      <span class="keywordflow">if</span> (e_cur)</div>
<div class="line"><span class="lineno"> 2546</span>      {</div>
<div class="line"><span class="lineno"> 2547</span>        <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; c_crypt_auto_pgp &amp;&amp;</div>
<div class="line"><span class="lineno"> 2548</span>            (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>))</div>
<div class="line"><span class="lineno"> 2549</span>        {</div>
<div class="line"><span class="lineno"> 2550</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>;</div>
<div class="line"><span class="lineno"> 2551</span>        }</div>
<div class="line"><span class="lineno"> 2552</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>) != 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2553</span>                 c_crypt_auto_smime &amp;&amp; (e_cur-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>))</div>
<div class="line"><span class="lineno"> 2554</span>        {</div>
<div class="line"><span class="lineno"> 2555</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>;</div>
<div class="line"><span class="lineno"> 2556</span>        }</div>
<div class="line"><span class="lineno"> 2557</span>      }</div>
<div class="line"><span class="lineno"> 2558</span> </div>
<div class="line"><span class="lineno"> 2559</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> c_smime_is_default = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;smime_is_default&quot;</span>);</div>
<div class="line"><span class="lineno"> 2560</span> </div>
<div class="line"><span class="lineno"> 2561</span>      <span class="comment">/* No crypto mechanism selected? Use availability + smime_is_default</span></div>
<div class="line"><span class="lineno"> 2562</span><span class="comment">       * for the decision.  */</span></div>
<div class="line"><span class="lineno"> 2563</span>      <span class="keywordflow">if</span> (!(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)))</div>
<div class="line"><span class="lineno"> 2564</span>      {</div>
<div class="line"><span class="lineno"> 2565</span>        <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>) != 0) &amp;&amp; c_crypt_auto_smime &amp;&amp; c_smime_is_default)</div>
<div class="line"><span class="lineno"> 2566</span>        {</div>
<div class="line"><span class="lineno"> 2567</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>;</div>
<div class="line"><span class="lineno"> 2568</span>        }</div>
<div class="line"><span class="lineno"> 2569</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>) != 0) &amp;&amp; c_crypt_auto_pgp)</div>
<div class="line"><span class="lineno"> 2570</span>        {</div>
<div class="line"><span class="lineno"> 2571</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>;</div>
<div class="line"><span class="lineno"> 2572</span>        }</div>
<div class="line"><span class="lineno"> 2573</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>) != 0) &amp;&amp; c_crypt_auto_smime)</div>
<div class="line"><span class="lineno"> 2574</span>        {</div>
<div class="line"><span class="lineno"> 2575</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>;</div>
<div class="line"><span class="lineno"> 2576</span>        }</div>
<div class="line"><span class="lineno"> 2577</span>      }</div>
<div class="line"><span class="lineno"> 2578</span>    }</div>
<div class="line"><span class="lineno"> 2579</span> </div>
<div class="line"><span class="lineno"> 2580</span>    <span class="comment">/* opportunistic encrypt relies on SMIME or PGP already being selected */</span></div>
<div class="line"><span class="lineno"> 2581</span>    <span class="keywordflow">if</span> (c_crypt_opportunistic_encrypt)</div>
<div class="line"><span class="lineno"> 2582</span>    {</div>
<div class="line"><span class="lineno"> 2583</span>      <span class="comment">/* If something has already enabled encryption, e.g. `$crypt_auto_encrypt`</span></div>
<div class="line"><span class="lineno"> 2584</span><span class="comment">       * or `$crypt_reply_encrypt`, then don&#39;t enable opportunistic encrypt for</span></div>
<div class="line"><span class="lineno"> 2585</span><span class="comment">       * the message.  */</span></div>
<div class="line"><span class="lineno"> 2586</span>      <span class="keywordflow">if</span> (!(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>)))</div>
<div class="line"><span class="lineno"> 2587</span>      {</div>
<div class="line"><span class="lineno"> 2588</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> |= <a class="code hl_define" href="ncrypt_2lib_8h.html#a2fb0b0aa796d8d79a746001d09c2a2c7">SEC_OPPENCRYPT</a>;</div>
<div class="line"><span class="lineno"> 2589</span>        <a class="code hl_function" href="crypt_8c.html#a2afe38b474061773d69624018621ff1e">crypt_opportunistic_encrypt</a>(e_templ);</div>
<div class="line"><span class="lineno"> 2590</span>      }</div>
<div class="line"><span class="lineno"> 2591</span>    }</div>
<div class="line"><span class="lineno"> 2592</span> </div>
<div class="line"><span class="lineno"> 2593</span>    <span class="comment">/* No permissible mechanisms found.  Don&#39;t sign or encrypt. */</span></div>
<div class="line"><span class="lineno"> 2594</span>    <span class="keywordflow">if</span> (!(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)))</div>
<div class="line"><span class="lineno"> 2595</span>      e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> = <a class="code hl_define" href="ncrypt_2lib_8h.html#a95845954210adfc850d5602843f858d4">SEC_NO_FLAGS</a>;</div>
<div class="line"><span class="lineno"> 2596</span>  }</div>
<div class="line"><span class="lineno"> 2597</span> </div>
<div class="line"><span class="lineno"> 2598</span>  <span class="comment">/* Deal with the corner case where the crypto module backend is not available.</span></div>
<div class="line"><span class="lineno"> 2599</span><span class="comment">   * This can happen if configured without PGP/SMIME and with GPGME, but</span></div>
<div class="line"><span class="lineno"> 2600</span><span class="comment">   * $crypt_use_gpgme is unset.  */</span></div>
<div class="line"><span class="lineno"> 2601</span>  <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp;&amp; !<a class="code hl_function" href="cryptglue_8c.html#a07a6c891658dd90ef8333a1e5bbcc285">crypt_has_module_backend</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a>))</div>
<div class="line"><span class="lineno"> 2602</span>  {</div>
<div class="line"><span class="lineno"> 2603</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No crypto backend configured.  Disabling message security setting.&quot;</span>));</div>
<div class="line"><span class="lineno"> 2604</span>    e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> = <a class="code hl_define" href="ncrypt_2lib_8h.html#a95845954210adfc850d5602843f858d4">SEC_NO_FLAGS</a>;</div>
<div class="line"><span class="lineno"> 2605</span>  }</div>
<div class="line"><span class="lineno"> 2606</span> </div>
<div class="line"><span class="lineno"> 2607</span>  <span class="comment">/* specify a default fcc.  if we are in batchmode, only save a copy of</span></div>
<div class="line"><span class="lineno"> 2608</span><span class="comment">   * the message if the value of $copy is yes or ask-yes */</span></div>
<div class="line"><span class="lineno"> 2609</span> </div>
<div class="line"><span class="lineno"> 2610</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_copy = <a class="code hl_function" href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(sub, <span class="stringliteral">&quot;copy&quot;</span>);</div>
<div class="line"><span class="lineno"> 2611</span> </div>
<div class="line"><span class="lineno"> 2612</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="buffer_8c.html#a4245e227baa2a9beb6991917404aab0d">buf_is_empty</a>(fcc) &amp;&amp; !(flags &amp; <a class="code hl_define" href="#a0124ba8cc117eff717a4ddf672c22018">SEND_POSTPONED_FCC</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2613</span>      (!(flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>) || (c_copy &amp; 0x1)))</div>
<div class="line"><span class="lineno"> 2614</span>  {</div>
<div class="line"><span class="lineno"> 2615</span>    <span class="comment">/* set the default FCC */</span></div>
<div class="line"><span class="lineno"> 2616</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> killfrom = <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2617</span>    <span class="keywordflow">if</span> (killfrom)</div>
<div class="line"><span class="lineno"> 2618</span>    {</div>
<div class="line"><span class="lineno"> 2619</span>      <a class="code hl_function" href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>, <a class="code hl_function" href="send_8c.html#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a>(sub));</div>
<div class="line"><span class="lineno"> 2620</span>    }</div>
<div class="line"><span class="lineno"> 2621</span>    <a class="code hl_function" href="hooks_2exec_8c.html#a6d228c86f5a1900b27af0fde26991a63">mutt_select_fcc</a>(fcc, e_templ);</div>
<div class="line"><span class="lineno"> 2622</span>    <span class="keywordflow">if</span> (killfrom)</div>
<div class="line"><span class="lineno"> 2623</span>    {</div>
<div class="line"><span class="lineno"> 2624</span>      <a class="code hl_function" href="address_2address_8c.html#a396bcf6adfff6663096fa6ae99c31c9a">mutt_addrlist_clear</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>);</div>
<div class="line"><span class="lineno"> 2625</span>    }</div>
<div class="line"><span class="lineno"> 2626</span>  }</div>
<div class="line"><span class="lineno"> 2627</span> </div>
<div class="line"><span class="lineno"> 2628</span>  <a class="code hl_function" href="rfc3676_8c.html#ae80c6b55541960f57f67f4ea3e4467e8">mutt_rfc3676_space_stuff</a>(e_templ);</div>
<div class="line"><span class="lineno"> 2629</span> </div>
<div class="line"><span class="lineno"> 2630</span>  <a class="code hl_function" href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, sub);</div>
<div class="line"><span class="lineno"> 2631</span> </div>
<div class="line"><span class="lineno"> 2632</span>  <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>))</div>
<div class="line"><span class="lineno"> 2633</span>  {</div>
<div class="line"><span class="lineno"> 2634</span>  main_loop:</div>
<div class="line"><span class="lineno"> 2635</span> </div>
<div class="line"><span class="lineno"> 2636</span>    <a class="code hl_function" href="muttlib_8c.html#a795f96cfea0cbef439e21b16e4613c70">pretty_mailbox</a>(fcc);</div>
<div class="line"><span class="lineno"> 2637</span>    i = <a class="code hl_function" href="group__gui__dlg.html#ga4bb08d7fcc8d6dc6524a6a9d153c5820">dlg_compose</a>(e_templ, fcc,</div>
<div class="line"><span class="lineno"> 2638</span>                    ((flags &amp; <a class="code hl_define" href="#a160dd7bb90081f1d45201ef2ab6b46d3">SEND_NO_FREE_HEADER</a>) ? <a class="code hl_define" href="compose_2lib_8h.html#adf568d592758fae1758bbb4dc4e3e554">MUTT_COMPOSE_NOFREEHEADER</a> : 0), sub);</div>
<div class="line"><span class="lineno"> 2639</span>    <span class="keywordflow">if</span> (i == -1)</div>
<div class="line"><span class="lineno"> 2640</span>    {</div>
<div class="line"><span class="lineno"> 2641</span>      <span class="comment">/* abort */</span></div>
<div class="line"><span class="lineno"> 2642</span>      <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>)</div>
<div class="line"><span class="lineno"> 2643</span>        <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Article not posted&quot;</span>));</div>
<div class="line"><span class="lineno"> 2644</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2645</span>        <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Mail not sent&quot;</span>));</div>
<div class="line"><span class="lineno"> 2646</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2647</span>    }</div>
<div class="line"><span class="lineno"> 2648</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == 1)</div>
<div class="line"><span class="lineno"> 2649</span>    {</div>
<div class="line"><span class="lineno"> 2650</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="send_8c.html#a08794ff2edb022ef0c0f59086da9675f">postpone_message</a>(e_templ, e_cur, <a class="code hl_function" href="buffer_8h.html#a728ebc5a947b77c8d56db44ce553a7ab">buf_string</a>(fcc), flags, sub) != 0)</div>
<div class="line"><span class="lineno"> 2651</span>        <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2652</span>      <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Message postponed&quot;</span>));</div>
<div class="line"><span class="lineno"> 2653</span>      rc = 1;</div>
<div class="line"><span class="lineno"> 2654</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2655</span>    }</div>
<div class="line"><span class="lineno"> 2656</span>  }</div>
<div class="line"><span class="lineno"> 2657</span> </div>
<div class="line"><span class="lineno"> 2658</span>  <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>))</div>
<div class="line"><span class="lineno"> 2659</span>  {</div>
<div class="line"><span class="lineno"> 2660</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="address_2address_8c.html#a9a6c4ff878258def25f155501ddb3e7a">mutt_addrlist_count_recips</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>) == 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2661</span>        (<a class="code hl_function" href="address_2address_8c.html#a9a6c4ff878258def25f155501ddb3e7a">mutt_addrlist_count_recips</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>) == 0) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2662</span>        (<a class="code hl_function" href="address_2address_8c.html#a9a6c4ff878258def25f155501ddb3e7a">mutt_addrlist_count_recips</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#aad427832f4ae422f1b16d0896c1d3af6">bcc</a>) == 0))</div>
<div class="line"><span class="lineno"> 2663</span>    {</div>
<div class="line"><span class="lineno"> 2664</span>      <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>)</div>
<div class="line"><span class="lineno"> 2665</span>      {</div>
<div class="line"><span class="lineno"> 2666</span>        puts(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No recipients specified&quot;</span>));</div>
<div class="line"><span class="lineno"> 2667</span>        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2668</span>      }</div>
<div class="line"><span class="lineno"> 2669</span> </div>
<div class="line"><span class="lineno"> 2670</span>      <a class="code hl_define" href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No recipients specified&quot;</span>));</div>
<div class="line"><span class="lineno"> 2671</span>      <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2672</span>    }</div>
<div class="line"><span class="lineno"> 2673</span>  }</div>
<div class="line"><span class="lineno"> 2674</span> </div>
<div class="line"><span class="lineno"> 2675</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="envelope_8c.html#a0108f989ca58622df272cf31b610395e">mutt_env_to_intl</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, &amp;tag, &amp;err))</div>
<div class="line"><span class="lineno"> 2676</span>  {</div>
<div class="line"><span class="lineno"> 2677</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Bad IDN in &#39;%s&#39;: &#39;%s&#39;&quot;</span>), tag, err);</div>
<div class="line"><span class="lineno"> 2678</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;err);</div>
<div class="line"><span class="lineno"> 2679</span>    <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>)</div>
<div class="line"><span class="lineno"> 2680</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2681</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2682</span>  }</div>
<div class="line"><span class="lineno"> 2683</span> </div>
<div class="line"><span class="lineno"> 2684</span>  <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35db">QuadOption</a> c_abort_nosubject = <a class="code hl_function" href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a>(sub, <span class="stringliteral">&quot;abort_nosubject&quot;</span>);</div>
<div class="line"><span class="lineno"> 2685</span> </div>
<div class="line"><span class="lineno"> 2686</span>  <span class="keywordflow">if</span> (!e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">subject</a> &amp;&amp; !(flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2687</span>      (<a class="code hl_function" href="question_2lib_8h.html#a8ba883bf53e8ab425a03d17368de84b4">query_quadoption</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No subject, abort sending?&quot;</span>), sub, <span class="stringliteral">&quot;abort_nosubject&quot;</span>) != <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>))</div>
<div class="line"><span class="lineno"> 2688</span>  {</div>
<div class="line"><span class="lineno"> 2689</span>    <span class="comment">/* if the abort is automatic, print an error message */</span></div>
<div class="line"><span class="lineno"> 2690</span>    <span class="keywordflow">if</span> (c_abort_nosubject == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbafee7088606c4724651c799a6a0b182b7">MUTT_YES</a>)</div>
<div class="line"><span class="lineno"> 2691</span>      <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No subject specified&quot;</span>));</div>
<div class="line"><span class="lineno"> 2692</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2693</span>  }</div>
<div class="line"><span class="lineno"> 2694</span> </div>
<div class="line"><span class="lineno"> 2695</span>  <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>) &amp;&amp; !e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a20d5ccf675db375e011a7791151fa09d">subject</a>)</div>
<div class="line"><span class="lineno"> 2696</span>  {</div>
<div class="line"><span class="lineno"> 2697</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No subject specified&quot;</span>));</div>
<div class="line"><span class="lineno"> 2698</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2699</span>  }</div>
<div class="line"><span class="lineno"> 2700</span> </div>
<div class="line"><span class="lineno"> 2701</span>  <span class="keywordflow">if</span> ((flags &amp; <a class="code hl_define" href="#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>) &amp;&amp; !e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>)</div>
<div class="line"><span class="lineno"> 2702</span>  {</div>
<div class="line"><span class="lineno"> 2703</span>    <a class="code hl_define" href="group__logging__api.html#gacc1fd6d7ab1603e80e11e84e90d061e4">mutt_error</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No newsgroup specified&quot;</span>));</div>
<div class="line"><span class="lineno"> 2704</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2705</span>  }</div>
<div class="line"><span class="lineno"> 2706</span> </div>
<div class="line"><span class="lineno"> 2707</span>  <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>) &amp;&amp; <a class="code hl_function" href="send_8c.html#aad5805f2620506ae4bc2d7f6474cb849">abort_for_missing_attachments</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, sub))</div>
<div class="line"><span class="lineno"> 2708</span>  {</div>
<div class="line"><span class="lineno"> 2709</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2710</span>  }</div>
<div class="line"><span class="lineno"> 2711</span> </div>
<div class="line"><span class="lineno"> 2712</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_confirm_empty_to = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;confirm_empty_to&quot;</span>);</div>
<div class="line"><span class="lineno"> 2713</span>  <span class="keywordflow">if</span> (c_confirm_empty_to &amp;&amp; <a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2714</span>      (<a class="code hl_function" href="question_2lib_8h.html#ae359ab94312d9ae6bcad5ab5b52bd529">query_yesorno</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No recipients specified in To. Send anyway?&quot;</span>), <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>) == <a class="code hl_enumvalue" href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a>))</div>
<div class="line"><span class="lineno"> 2715</span>  {</div>
<div class="line"><span class="lineno"> 2716</span>    <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2717</span>  }</div>
<div class="line"><span class="lineno"> 2718</span> </div>
<div class="line"><span class="lineno"> 2719</span>  <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>)</div>
<div class="line"><span class="lineno"> 2720</span>    e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a9700f763b34719d97a56b5f9b032d97a">mutt_make_multipart</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2721</span> </div>
<div class="line"><span class="lineno"> 2722</span>  <span class="comment">/* Ok, we need to do it this way instead of handling all fcc stuff in</span></div>
<div class="line"><span class="lineno"> 2723</span><span class="comment">   * one place in order to avoid going to main_loop with encoded &quot;env&quot;</span></div>
<div class="line"><span class="lineno"> 2724</span><span class="comment">   * in case of error.  Ugh.  */</span></div>
<div class="line"><span class="lineno"> 2725</span> </div>
<div class="line"><span class="lineno"> 2726</span>  <a class="code hl_function" href="send_8c.html#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, <span class="keyword">true</span>, sub);</div>
<div class="line"><span class="lineno"> 2727</span> </div>
<div class="line"><span class="lineno"> 2728</span>  <span class="comment">/* Make sure that clear_content and free_clear_content are</span></div>
<div class="line"><span class="lineno"> 2729</span><span class="comment">   * properly initialized -- we may visit this particular place in</span></div>
<div class="line"><span class="lineno"> 2730</span><span class="comment">   * the code multiple times, including after a failed call to</span></div>
<div class="line"><span class="lineno"> 2731</span><span class="comment">   * mutt_protect().  */</span></div>
<div class="line"><span class="lineno"> 2732</span> </div>
<div class="line"><span class="lineno"> 2733</span>  clear_content = NULL;</div>
<div class="line"><span class="lineno"> 2734</span>  free_clear_content = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2735</span> </div>
<div class="line"><span class="lineno"> 2736</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a>)</div>
<div class="line"><span class="lineno"> 2737</span>  {</div>
<div class="line"><span class="lineno"> 2738</span>    <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>))</div>
<div class="line"><span class="lineno"> 2739</span>    {</div>
<div class="line"><span class="lineno"> 2740</span>      <span class="comment">/* save the decrypted attachments */</span></div>
<div class="line"><span class="lineno"> 2741</span>      clear_content = e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>;</div>
<div class="line"><span class="lineno"> 2742</span> </div>
<div class="line"><span class="lineno"> 2743</span>      <span class="keywordflow">if</span> ((<a class="code hl_function" href="crypt_8c.html#abb04ccb83d144391034d86704c52b987">crypt_get_keys</a>(e_templ, &amp;pgpkeylist, <span class="keyword">false</span>) == -1) ||</div>
<div class="line"><span class="lineno"> 2744</span>          (<a class="code hl_function" href="crypt_8c.html#a896502d4448fefadaf8786a4f2d5556e">mutt_protect</a>(e_templ, pgpkeylist, <span class="keyword">false</span>) == -1))</div>
<div class="line"><span class="lineno"> 2745</span>      {</div>
<div class="line"><span class="lineno"> 2746</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;mixed&quot;</span>))</div>
<div class="line"><span class="lineno"> 2747</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2748</span> </div>
<div class="line"><span class="lineno"> 2749</span>        <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;pgpkeylist);</div>
<div class="line"><span class="lineno"> 2750</span> </div>
<div class="line"><span class="lineno"> 2751</span>        <a class="code hl_function" href="send_8c.html#af1b54154700865964598299ed1cf9a6a">decode_descriptions</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2752</span> </div>
<div class="line"><span class="lineno"> 2753</span>        <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>)</div>
<div class="line"><span class="lineno"> 2754</span>        {</div>
<div class="line"><span class="lineno"> 2755</span>          <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Missing encryption key; mail not sent&quot;</span>));</div>
<div class="line"><span class="lineno"> 2756</span>          rc = -1;</div>
<div class="line"><span class="lineno"> 2757</span>          <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2758</span>        }</div>
<div class="line"><span class="lineno"> 2759</span> </div>
<div class="line"><span class="lineno"> 2760</span>        <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2761</span>      }</div>
<div class="line"><span class="lineno"> 2762</span>      <a class="code hl_function" href="send_8c.html#a1ba9ce78a67261e872a264bc956ef857">mutt_encode_descriptions</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>, <span class="keyword">false</span>, sub);</div>
<div class="line"><span class="lineno"> 2763</span>    }</div>
<div class="line"><span class="lineno"> 2764</span> </div>
<div class="line"><span class="lineno"> 2765</span>    <span class="comment">/* at this point, e_templ-&gt;body is one of the following three things:</span></div>
<div class="line"><span class="lineno"> 2766</span><span class="comment">     * - multipart/signed.     In this case, clear_content is a child</span></div>
<div class="line"><span class="lineno"> 2767</span><span class="comment">     * - multipart/encrypted.  In this case, clear_content exists independently</span></div>
<div class="line"><span class="lineno"> 2768</span><span class="comment">     * - application/pgp.      In this case, clear_content exists independently</span></div>
<div class="line"><span class="lineno"> 2769</span><span class="comment">     * - something else.       In this case, it&#39;s the same as clear_content */</span></div>
<div class="line"><span class="lineno"> 2770</span> </div>
<div class="line"><span class="lineno"> 2771</span>    <span class="comment">/* This is ugly -- lack of &quot;reporting back&quot; from mutt_protect(). */</span></div>
<div class="line"><span class="lineno"> 2772</span> </div>
<div class="line"><span class="lineno"> 2773</span>    <span class="keywordflow">if</span> (clear_content &amp;&amp; (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> != clear_content) &amp;&amp;</div>
<div class="line"><span class="lineno"> 2774</span>        (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a> != clear_content))</div>
<div class="line"><span class="lineno"> 2775</span>      free_clear_content = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2776</span>  }</div>
<div class="line"><span class="lineno"> 2777</span> </div>
<div class="line"><span class="lineno"> 2778</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#a9b3a197dcd72484bca9ba6f0ce451e1f">OptGui</a>)</div>
<div class="line"><span class="lineno"> 2779</span>    <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Sending message...&quot;</span>));</div>
<div class="line"><span class="lineno"> 2780</span> </div>
<div class="line"><span class="lineno"> 2781</span>  <a class="code hl_function" href="sendlib_8c.html#ac35da3d19eb0d95d4f6260adab57b4c9">mutt_prepare_envelope</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>, <span class="keyword">true</span>, sub);</div>
<div class="line"><span class="lineno"> 2782</span> </div>
<div class="line"><span class="lineno"> 2783</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_fcc_before_send = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;fcc_before_send&quot;</span>);</div>
<div class="line"><span class="lineno"> 2784</span>  <span class="keywordflow">if</span> (c_fcc_before_send)</div>
<div class="line"><span class="lineno"> 2785</span>    <a class="code hl_function" href="send_8c.html#a255efc8a4a366c3de07d48da23d03a32">save_fcc</a>(m, e_templ, fcc, clear_content, pgpkeylist, flags, &amp;finalpath, sub);</div>
<div class="line"><span class="lineno"> 2786</span> </div>
<div class="line"><span class="lineno"> 2787</span>  i = <a class="code hl_function" href="send_8c.html#a859ddbab5f9384328fd06bf9c18c02f2">invoke_mta</a>(m, e_templ, sub);</div>
<div class="line"><span class="lineno"> 2788</span>  <span class="keywordflow">if</span> (i &lt; 0)</div>
<div class="line"><span class="lineno"> 2789</span>  {</div>
<div class="line"><span class="lineno"> 2790</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a>))</div>
<div class="line"><span class="lineno"> 2791</span>    {</div>
<div class="line"><span class="lineno"> 2792</span>      <span class="keywordflow">if</span> (!<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a>)</div>
<div class="line"><span class="lineno"> 2793</span>        ; <span class="comment">// do nothing</span></div>
<div class="line"><span class="lineno"> 2794</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; (<a class="code hl_define" href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a> | <a class="code hl_define" href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a>)) ||</div>
<div class="line"><span class="lineno"> 2795</span>               ((e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>) &amp;&amp; (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e">TYPE_APPLICATION</a>)))</div>
<div class="line"><span class="lineno"> 2796</span>      {</div>
<div class="line"><span class="lineno"> 2797</span>        <span class="keywordflow">if</span> (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> != clear_content)</div>
<div class="line"><span class="lineno"> 2798</span>        {</div>
<div class="line"><span class="lineno"> 2799</span>          <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>); <span class="comment">/* destroy PGP data */</span></div>
<div class="line"><span class="lineno"> 2800</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = clear_content;  <span class="comment">/* restore clear text. */</span></div>
<div class="line"><span class="lineno"> 2801</span>        }</div>
<div class="line"><span class="lineno"> 2802</span>      }</div>
<div class="line"><span class="lineno"> 2803</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a570a81cd747437c9ea4357947731ae10">security</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a>) &amp;&amp; (e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#af77d79aadb278bef8f2829c268f2486f">type</a> == <a class="code hl_enumvalue" href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a>))</div>
<div class="line"><span class="lineno"> 2804</span>      {</div>
<div class="line"><span class="lineno"> 2805</span>        <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">parts</a>-&gt;<a class="code hl_variable" href="structBody.html#ac55cdfce46eed13151dcfe9b329d254c">next</a>); <span class="comment">/* destroy sig */</span></div>
<div class="line"><span class="lineno"> 2806</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;mixed&quot;</span>) ||</div>
<div class="line"><span class="lineno"> 2807</span>            <a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;signed&quot;</span>))</div>
<div class="line"><span class="lineno"> 2808</span>        {</div>
<div class="line"><span class="lineno"> 2809</span>          e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2810</span>        }</div>
<div class="line"><span class="lineno"> 2811</span>      }</div>
<div class="line"><span class="lineno"> 2812</span> </div>
<div class="line"><span class="lineno"> 2813</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;pgpkeylist);</div>
<div class="line"><span class="lineno"> 2814</span>      <a class="code hl_function" href="envelope_8c.html#a244dacf9b1001c9ce1dbd473e001381f">mutt_env_free</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a62f6c9b4245ed3b6b9296adb45aa4010">mime_headers</a>); <span class="comment">/* protected headers */</span></div>
<div class="line"><span class="lineno"> 2815</span>      <a class="code hl_function" href="parameter_8c.html#a34454ee6af9d43eeabf80898dc7270b8">mutt_param_delete</a>(&amp;e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#a782cee95e0064e3895b88248bdfc781a">parameter</a>, <span class="stringliteral">&quot;protected-headers&quot;</span>);</div>
<div class="line"><span class="lineno"> 2816</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>-&gt;<a class="code hl_variable" href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">subtype</a>, <span class="stringliteral">&quot;mixed&quot;</span>))</div>
<div class="line"><span class="lineno"> 2817</span>        e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a> = <a class="code hl_function" href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2818</span>      <a class="code hl_function" href="send_8c.html#af1b54154700865964598299ed1cf9a6a">decode_descriptions</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">body</a>);</div>
<div class="line"><span class="lineno"> 2819</span>      <a class="code hl_function" href="sendlib_8c.html#a99b5cff5076c9e25bce367f0bae45f4c">mutt_unprepare_envelope</a>(e_templ-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>);</div>
<div class="line"><span class="lineno"> 2820</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;finalpath);</div>
<div class="line"><span class="lineno"> 2821</span>      <span class="keywordflow">goto</span> main_loop;</div>
<div class="line"><span class="lineno"> 2822</span>    }</div>
<div class="line"><span class="lineno"> 2823</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2824</span>    {</div>
<div class="line"><span class="lineno"> 2825</span>      puts(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Could not send the message&quot;</span>));</div>
<div class="line"><span class="lineno"> 2826</span>      <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 2827</span>    }</div>
<div class="line"><span class="lineno"> 2828</span>  }</div>
<div class="line"><span class="lineno"> 2829</span> </div>
<div class="line"><span class="lineno"> 2830</span>  <span class="keywordflow">if</span> (!c_fcc_before_send)</div>
<div class="line"><span class="lineno"> 2831</span>    <a class="code hl_function" href="send_8c.html#a255efc8a4a366c3de07d48da23d03a32">save_fcc</a>(m, e_templ, fcc, clear_content, pgpkeylist, flags, &amp;finalpath, sub);</div>
<div class="line"><span class="lineno"> 2832</span> </div>
<div class="line"><span class="lineno"> 2833</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#a9b3a197dcd72484bca9ba6f0ce451e1f">OptGui</a>)</div>
<div class="line"><span class="lineno"> 2834</span>  {</div>
<div class="line"><span class="lineno"> 2835</span>    <a class="code hl_define" href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a>((i != 0)            ? <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Sending in background&quot;</span>) :</div>
<div class="line"><span class="lineno"> 2836</span>                 (flags &amp; <a class="code hl_define" href="#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a>) ? <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Article posted&quot;</span>) :</div>
<div class="line"><span class="lineno"> 2837</span>                                       <a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;Mail sent&quot;</span>));</div>
<div class="line"><span class="lineno"> 2838</span><span class="preprocessor">#ifdef USE_NOTMUCH</span></div>
<div class="line"><span class="lineno"> 2839</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> c_nm_record = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;nm_record&quot;</span>);</div>
<div class="line"><span class="lineno"> 2840</span>    <span class="keywordflow">if</span> (c_nm_record)</div>
<div class="line"><span class="lineno"> 2841</span>      <a class="code hl_function" href="notmuch_2lib_8h.html#a76a97a39757a2e0441d23eab1ba5a221">nm_record_message</a>(m, finalpath, e_cur);</div>
<div class="line"><span class="lineno"> 2842</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2843</span>    <a class="code hl_function" href="muttlib_8c.html#a6fbcbe533be7c4e05d99b0eb9cdb2581">mutt_sleep</a>(0);</div>
<div class="line"><span class="lineno"> 2844</span>  }</div>
<div class="line"><span class="lineno"> 2845</span> </div>
<div class="line"><span class="lineno"> 2846</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a>)</div>
<div class="line"><span class="lineno"> 2847</span>    <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;pgpkeylist);</div>
<div class="line"><span class="lineno"> 2848</span> </div>
<div class="line"><span class="lineno"> 2849</span>  <span class="keywordflow">if</span> ((<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> != 0) &amp;&amp; free_clear_content)</div>
<div class="line"><span class="lineno"> 2850</span>    <a class="code hl_function" href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a>(&amp;clear_content);</div>
<div class="line"><span class="lineno"> 2851</span> </div>
<div class="line"><span class="lineno"> 2852</span>  <span class="comment">/* set &#39;replied&#39; flag only if the user didn&#39;t change/remove</span></div>
<div class="line"><span class="lineno"> 2853</span><span class="comment">   * In-Reply-To: and References: headers during edit */</span></div>
<div class="line"><span class="lineno"> 2854</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a>)</div>
<div class="line"><span class="lineno"> 2855</span>  {</div>
<div class="line"><span class="lineno"> 2856</span>    <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>) &amp;&amp; m)</div>
<div class="line"><span class="lineno"> 2857</span>    {</div>
<div class="line"><span class="lineno"> 2858</span>      <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> **ep = NULL;</div>
<div class="line"><span class="lineno"> 2859</span>      <a class="code hl_define" href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a>(ep, ea)</div>
<div class="line"><span class="lineno"> 2860</span>      {</div>
<div class="line"><span class="lineno"> 2861</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structEmail.html">Email</a> *e = *ep;</div>
<div class="line"><span class="lineno"> 2862</span>        <a class="code hl_function" href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a>(m, e, <a class="code hl_enumvalue" href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b">MUTT_REPLIED</a>, <a class="code hl_function" href="send_8c.html#a19cc8b134c97bc3752c778d8b4977e8c">is_reply</a>(e, e_templ), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2863</span>      }</div>
<div class="line"><span class="lineno"> 2864</span>    }</div>
<div class="line"><span class="lineno"> 2865</span>  }</div>
<div class="line"><span class="lineno"> 2866</span> </div>
<div class="line"><span class="lineno"> 2867</span>  rc = 0;</div>
<div class="line"><span class="lineno"> 2868</span> </div>
<div class="line"><span class="lineno"> 2869</span>cleanup:</div>
<div class="line"><span class="lineno"> 2870</span>  <a class="code hl_function" href="pool_8c.html#a4cc6068279461cb8628219586dfa35a1">buf_pool_release</a>(&amp;fcc);</div>
<div class="line"><span class="lineno"> 2871</span> </div>
<div class="line"><span class="lineno"> 2872</span>  <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a>)</div>
<div class="line"><span class="lineno"> 2873</span>  {</div>
<div class="line"><span class="lineno"> 2874</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a587e679a4c9cc44f11f0c467bb22b0af">APPLICATION_PGP</a>)</div>
<div class="line"><span class="lineno"> 2875</span>    {</div>
<div class="line"><span class="lineno"> 2876</span>      <a class="code hl_function" href="subset_8c.html#a8d7d5e60bd8f7f0f8ffd8522de126b12">cs_subset_str_string_set</a>(sub, <span class="stringliteral">&quot;pgp_sign_as&quot;</span>, pgp_sign_as, NULL);</div>
<div class="line"><span class="lineno"> 2877</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;pgp_sign_as);</div>
<div class="line"><span class="lineno"> 2878</span>    }</div>
<div class="line"><span class="lineno"> 2879</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="ncrypt_2lib_8h.html#ad980bff69bb614893ad8e7e1c28a5023">WithCrypto</a> &amp; <a class="code hl_define" href="ncrypt_2lib_8h.html#a798dfac1e8839ca89375b4ec62b3eff2">APPLICATION_SMIME</a>)</div>
<div class="line"><span class="lineno"> 2880</span>    {</div>
<div class="line"><span class="lineno"> 2881</span>      <a class="code hl_function" href="subset_8c.html#a8d7d5e60bd8f7f0f8ffd8522de126b12">cs_subset_str_string_set</a>(sub, <span class="stringliteral">&quot;smime_sign_as&quot;</span>, smime_sign_as, NULL);</div>
<div class="line"><span class="lineno"> 2882</span>      <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;smime_sign_as);</div>
<div class="line"><span class="lineno"> 2883</span>    }</div>
<div class="line"><span class="lineno"> 2884</span>  }</div>
<div class="line"><span class="lineno"> 2885</span> </div>
<div class="line"><span class="lineno"> 2886</span>  <a class="code hl_define" href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a>(&amp;fp_tmp);</div>
<div class="line"><span class="lineno"> 2887</span>  <span class="keywordflow">if</span> (!(flags &amp; <a class="code hl_define" href="#a160dd7bb90081f1d45201ef2ab6b46d3">SEND_NO_FREE_HEADER</a>))</div>
<div class="line"><span class="lineno"> 2888</span>    <a class="code hl_function" href="email_2email_8c.html#ae9f719d3fc31d00b92bcf9f77d56ee67">email_free</a>(&amp;e_templ);</div>
<div class="line"><span class="lineno"> 2889</span> </div>
<div class="line"><span class="lineno"> 2890</span>  <a class="code hl_define" href="memory_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;finalpath);</div>
<div class="line"><span class="lineno"> 2891</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 2892</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_a68385b174baad74a9aecf3dec61432a0"><div class="ttname"><a href="address_2address_8c.html#a68385b174baad74a9aecf3dec61432a0">mutt_addrlist_append</a></div><div class="ttdeci">void mutt_addrlist_append(struct AddressList *al, struct Address *a)</div><div class="ttdoc">Append an Address to an AddressList.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01480">address.c:1480</a></div></div>
<div class="ttc" id="aaddress_2address_8c_html_a9a6c4ff878258def25f155501ddb3e7a"><div class="ttname"><a href="address_2address_8c.html#a9a6c4ff878258def25f155501ddb3e7a">mutt_addrlist_count_recips</a></div><div class="ttdeci">int mutt_addrlist_count_recips(const struct AddressList *al)</div><div class="ttdoc">Count the number of Addresses with valid recipients.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l00872">address.c:872</a></div></div>
<div class="ttc" id="aalias_8c_html_aa90fd4b086aebbf4fed5245ecaca1ac1"><div class="ttname"><a href="alias_8c.html#aa90fd4b086aebbf4fed5245ecaca1ac1">mutt_expand_aliases_env</a></div><div class="ttdeci">void mutt_expand_aliases_env(struct Envelope *env)</div><div class="ttdoc">Expand aliases in all the fields of an Envelope.</div><div class="ttdef"><b>Definition</b> <a href="alias_8c_source.html#l00310">alias.c:310</a></div></div>
<div class="ttc" id="aarray_8h_html_a6b8ea5fb2f366d7716f5042b347093a6"><div class="ttname"><a href="array_8h.html#a6b8ea5fb2f366d7716f5042b347093a6">ARRAY_FOREACH</a></div><div class="ttdeci">#define ARRAY_FOREACH(elem, head)</div><div class="ttdoc">Iterate over all elements of the array.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00223">array.h:223</a></div></div>
<div class="ttc" id="aarray_8h_html_a7f1bf469a48c0a2618c94b7b8281c5bf"><div class="ttname"><a href="array_8h.html#a7f1bf469a48c0a2618c94b7b8281c5bf">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(head)</div><div class="ttdoc">The number of elements stored.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00087">array.h:87</a></div></div>
<div class="ttc" id="aarray_8h_html_aebd057bb37aec75b6bdbed9e76715803"><div class="ttname"><a href="array_8h.html#aebd057bb37aec75b6bdbed9e76715803">ARRAY_GET</a></div><div class="ttdeci">#define ARRAY_GET(head, idx)</div><div class="ttdoc">Return the element at index.</div><div class="ttdef"><b>Definition</b> <a href="array_8h_source.html#l00109">array.h:109</a></div></div>
<div class="ttc" id="abuffer_8c_html_a7f93abaa65bfc8c15c6ea5d02889c19d"><div class="ttname"><a href="buffer_8c.html#a7f93abaa65bfc8c15c6ea5d02889c19d">buf_new</a></div><div class="ttdeci">struct Buffer * buf_new(const char *str)</div><div class="ttdoc">Allocate a new Buffer.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00304">buffer.c:304</a></div></div>
<div class="ttc" id="abuffer_8c_html_ad76477cc0c660bc50162393e997233eb"><div class="ttname"><a href="buffer_8c.html#ad76477cc0c660bc50162393e997233eb">buf_strdup</a></div><div class="ttdeci">char * buf_strdup(const struct Buffer *buf)</div><div class="ttdoc">Copy a Buffer&#39;s string.</div><div class="ttdef"><b>Definition</b> <a href="buffer_8c_source.html#l00571">buffer.c:571</a></div></div>
<div class="ttc" id="acommand_8h_html_aaf8d2069e2c6bbecf4aa8f9819028e8aa0bddb74d77fbd3c5117a1f200c65e926"><div class="ttname"><a href="command_8h.html#aaf8d2069e2c6bbecf4aa8f9819028e8aa0bddb74d77fbd3c5117a1f200c65e926">CMD_SEND_HOOK</a></div><div class="ttdeci">@ CMD_SEND_HOOK</div><div class="ttdoc">:send-hook</div><div class="ttdef"><b>Definition</b> <a href="command_8h_source.html#l00107">command.h:107</a></div></div>
<div class="ttc" id="acommand_8h_html_aaf8d2069e2c6bbecf4aa8f9819028e8aa5a9d4edd51e19a12612fad9f7b9fcfcb"><div class="ttname"><a href="command_8h.html#aaf8d2069e2c6bbecf4aa8f9819028e8aa5a9d4edd51e19a12612fad9f7b9fcfcb">CMD_SEND2_HOOK</a></div><div class="ttdeci">@ CMD_SEND2_HOOK</div><div class="ttdoc">:send2-hook</div><div class="ttdef"><b>Definition</b> <a href="command_8h_source.html#l00106">command.h:106</a></div></div>
<div class="ttc" id="acommand_8h_html_aaf8d2069e2c6bbecf4aa8f9819028e8aa774911b866bf0ecfe57c0dcc25d179c5"><div class="ttname"><a href="command_8h.html#aaf8d2069e2c6bbecf4aa8f9819028e8aa774911b866bf0ecfe57c0dcc25d179c5">CMD_REPLY_HOOK</a></div><div class="ttdeci">@ CMD_REPLY_HOOK</div><div class="ttdoc">:reply-hook</div><div class="ttdef"><b>Definition</b> <a href="command_8h_source.html#l00102">command.h:102</a></div></div>
<div class="ttc" id="acompose_2lib_8h_html_adf568d592758fae1758bbb4dc4e3e554"><div class="ttname"><a href="compose_2lib_8h.html#adf568d592758fae1758bbb4dc4e3e554">MUTT_COMPOSE_NOFREEHEADER</a></div><div class="ttdeci">#define MUTT_COMPOSE_NOFREEHEADER</div><div class="ttdoc">Don&#39;t free the header when closing compose dialog.</div><div class="ttdef"><b>Definition</b> <a href="compose_2lib_8h_source.html#l00054">lib.h:54</a></div></div>
<div class="ttc" id="aconfig_2helpers_8c_html_a9154ba713ce99b0937f475eec7c61af9"><div class="ttname"><a href="config_2helpers_8c.html#a9154ba713ce99b0937f475eec7c61af9">cs_subset_quad</a></div><div class="ttdeci">enum QuadOption cs_subset_quad(const struct ConfigSubset *sub, const char *name)</div><div class="ttdoc">Get a quad-value config item by name.</div><div class="ttdef"><b>Definition</b> <a href="config_2helpers_8c_source.html#l00192">helpers.c:192</a></div></div>
<div class="ttc" id="acore_2mailbox_8h_html_af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803"><div class="ttname"><a href="core_2mailbox_8h.html#af65addf714c28dd5d483cb426100921da6d3955b4b5acc450ba154b6ec9100803">MUTT_NNTP</a></div><div class="ttdeci">@ MUTT_NNTP</div><div class="ttdoc">&#39;NNTP&#39; (Usenet) Mailbox type</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00048">mailbox.h:48</a></div></div>
<div class="ttc" id="acrypt_8c_html_a896502d4448fefadaf8786a4f2d5556e"><div class="ttname"><a href="crypt_8c.html#a896502d4448fefadaf8786a4f2d5556e">mutt_protect</a></div><div class="ttdeci">int mutt_protect(struct Email *e, char *keylist, bool postpone)</div><div class="ttdoc">Encrypt and/or sign a message.</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l00156">crypt.c:156</a></div></div>
<div class="ttc" id="acrypt_8c_html_abb04ccb83d144391034d86704c52b987"><div class="ttname"><a href="crypt_8c.html#abb04ccb83d144391034d86704c52b987">crypt_get_keys</a></div><div class="ttdeci">int crypt_get_keys(struct Email *e, char **keylist, bool oppenc_mode)</div><div class="ttdoc">Check we have all the keys we need.</div><div class="ttdef"><b>Definition</b> <a href="crypt_8c_source.html#l00961">crypt.c:961</a></div></div>
<div class="ttc" id="acryptglue_8c_html_a07a6c891658dd90ef8333a1e5bbcc285"><div class="ttname"><a href="cryptglue_8c.html#a07a6c891658dd90ef8333a1e5bbcc285">crypt_has_module_backend</a></div><div class="ttdeci">bool crypt_has_module_backend(SecurityFlags type)</div><div class="ttdoc">Is there a crypto backend for a given type?</div><div class="ttdef"><b>Definition</b> <a href="cryptglue_8c_source.html#l00170">cryptglue.c:170</a></div></div>
<div class="ttc" id="acurs__lib_8c_html_a0590f11f42a6242002ea4c842438231b"><div class="ttname"><a href="curs__lib_8c.html#a0590f11f42a6242002ea4c842438231b">mutt_edit_file</a></div><div class="ttdeci">void mutt_edit_file(const char *editor, const char *file)</div><div class="ttdoc">Let the user edit a file.</div><div class="ttdef"><b>Definition</b> <a href="curs__lib_8c_source.html#l00116">curs_lib.c:116</a></div></div>
<div class="ttc" id="aemail_2body_8c_html_a129af1c316fcbc26b55fb48957bab2cb"><div class="ttname"><a href="email_2body_8c.html#a129af1c316fcbc26b55fb48957bab2cb">mutt_body_free</a></div><div class="ttdeci">void mutt_body_free(struct Body **ptr)</div><div class="ttdoc">Free a Body.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8c_source.html#l00058">body.c:58</a></div></div>
<div class="ttc" id="aemail_2body_8c_html_a37b346253e3b97aa64bb38ffc8d1ea0c"><div class="ttname"><a href="email_2body_8c.html#a37b346253e3b97aa64bb38ffc8d1ea0c">mutt_body_new</a></div><div class="ttdeci">struct Body * mutt_body_new(void)</div><div class="ttdoc">Create a new Body.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8c_source.html#l00044">body.c:44</a></div></div>
<div class="ttc" id="aemail_2header_8c_html_add6fa85ce7ef8dcad27d465fbbc27708"><div class="ttname"><a href="email_2header_8c.html#add6fa85ce7ef8dcad27d465fbbc27708">mutt_edit_headers</a></div><div class="ttdeci">void mutt_edit_headers(const char *editor, const char *body, struct Email *e, struct Buffer *fcc)</div><div class="ttdoc">Let the user edit the message header and body.</div><div class="ttdef"><b>Definition</b> <a href="email_2header_8c_source.html#l00181">header.c:181</a></div></div>
<div class="ttc" id="aemail_2parse_8c_html_a1c0bcb79c2ff930b4131a1ede5828762"><div class="ttname"><a href="email_2parse_8c.html#a1c0bcb79c2ff930b4131a1ede5828762">mutt_parse_content_type</a></div><div class="ttdeci">void mutt_parse_content_type(const char *s, struct Body *b)</div><div class="ttdoc">Parse a content type.</div><div class="ttdef"><b>Definition</b> <a href="email_2parse_8c_source.html#l00468">parse.c:468</a></div></div>
<div class="ttc" id="aemail_2parse_8c_html_a85f5f11a70b04f611f3e131f67644fbf"><div class="ttname"><a href="email_2parse_8c.html#a85f5f11a70b04f611f3e131f67644fbf">mutt_parse_mailto</a></div><div class="ttdeci">bool mutt_parse_mailto(struct Envelope *env, char **body, const char *src)</div><div class="ttdoc">Parse a mailto:// url.</div><div class="ttdef"><b>Definition</b> <a href="email_2parse_8c_source.html#l01762">parse.c:1762</a></div></div>
<div class="ttc" id="aenvelope_8c_html_a0108f989ca58622df272cf31b610395e"><div class="ttname"><a href="envelope_8c.html#a0108f989ca58622df272cf31b610395e">mutt_env_to_intl</a></div><div class="ttdeci">int mutt_env_to_intl(struct Envelope *env, const char **tag, char **err)</div><div class="ttdoc">Convert an Envelope&#39;s Address fields to Punycode format.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00350">envelope.c:350</a></div></div>
<div class="ttc" id="aenvelope_8c_html_a244dacf9b1001c9ce1dbd473e001381f"><div class="ttname"><a href="envelope_8c.html#a244dacf9b1001c9ce1dbd473e001381f">mutt_env_free</a></div><div class="ttdeci">void mutt_env_free(struct Envelope **ptr)</div><div class="ttdoc">Free an Envelope.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00125">envelope.c:125</a></div></div>
<div class="ttc" id="aenvelope_8c_html_a406e6f76001e7604ce65ffe972fc19c1"><div class="ttname"><a href="envelope_8c.html#a406e6f76001e7604ce65ffe972fc19c1">mutt_env_new</a></div><div class="ttdeci">struct Envelope * mutt_env_new(void)</div><div class="ttdoc">Create a new Envelope.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00045">envelope.c:45</a></div></div>
<div class="ttc" id="aenvelope_8c_html_afd00cc8d84947cbd55e082420b5732f1"><div class="ttname"><a href="envelope_8c.html#afd00cc8d84947cbd55e082420b5732f1">mutt_env_to_local</a></div><div class="ttdeci">void mutt_env_to_local(struct Envelope *env)</div><div class="ttdoc">Convert an Envelope&#39;s Address fields to local format.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8c_source.html#l00316">envelope.c:316</a></div></div>
<div class="ttc" id="aexpando__msgid_8c_html_a89f3fc6f29634eee2e7a18a9d0d04030"><div class="ttname"><a href="expando__msgid_8c.html#a89f3fc6f29634eee2e7a18a9d0d04030">msgid_generate</a></div><div class="ttdeci">char * msgid_generate(void)</div><div class="ttdoc">Generate a Message-Id.</div><div class="ttdef"><b>Definition</b> <a href="expando__msgid_8c_source.html#l00250">expando_msgid.c:250</a></div></div>
<div class="ttc" id="afile_8c_html_a0a6ff09a685fb6fa1120a582a5a6ef4a"><div class="ttname"><a href="file_8c.html#a0a6ff09a685fb6fa1120a582a5a6ef4a">mutt_file_copy_stream</a></div><div class="ttdeci">int mutt_file_copy_stream(FILE *fp_in, FILE *fp_out)</div><div class="ttdoc">Copy the contents of one file into another.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l00222">file.c:222</a></div></div>
<div class="ttc" id="afile_8c_html_a61b50c8615492662cbc27ebbf83090ce"><div class="ttname"><a href="file_8c.html#a61b50c8615492662cbc27ebbf83090ce">mutt_file_decrease_mtime</a></div><div class="ttdeci">time_t mutt_file_decrease_mtime(const char *fp, struct stat *st)</div><div class="ttdoc">Decrease a file&#39;s modification time by 1 second.</div><div class="ttdef"><b>Definition</b> <a href="file_8c_source.html#l00902">file.c:902</a></div></div>
<div class="ttc" id="afile_8h_html_a9b519e795f098be88b93cd72c49a35ec"><div class="ttname"><a href="file_8h.html#a9b519e795f098be88b93cd72c49a35ec">mutt_file_fclose</a></div><div class="ttdeci">#define mutt_file_fclose(FP)</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00139">file.h:139</a></div></div>
<div class="ttc" id="afile_8h_html_a9fa358d76519cb6bc8ffca5850976d46"><div class="ttname"><a href="file_8h.html#a9fa358d76519cb6bc8ffca5850976d46">mutt_file_fopen</a></div><div class="ttdeci">#define mutt_file_fopen(PATH, MODE)</div><div class="ttdef"><b>Definition</b> <a href="file_8h_source.html#l00138">file.h:138</a></div></div>
<div class="ttc" id="aflags_8c_html_a29547b9c7c39eb22039ff4b8f1c03829"><div class="ttname"><a href="flags_8c.html#a29547b9c7c39eb22039ff4b8f1c03829">mutt_set_flag</a></div><div class="ttdeci">void mutt_set_flag(struct Mailbox *m, struct Email *e, enum MessageType flag, bool bf, bool upd_mbox)</div><div class="ttdoc">Set a flag on an email.</div><div class="ttdef"><b>Definition</b> <a href="flags_8c_source.html#l00054">flags.c:54</a></div></div>
<div class="ttc" id="aglobals_8c_html_a9b3a197dcd72484bca9ba6f0ce451e1f"><div class="ttname"><a href="globals_8c.html#a9b3a197dcd72484bca9ba6f0ce451e1f">OptGui</a></div><div class="ttdeci">bool OptGui</div><div class="ttdoc">(pseudo) when the gui (and curses) are started</div><div class="ttdef"><b>Definition</b> <a href="globals_8c_source.html#l00048">globals.c:48</a></div></div>
<div class="ttc" id="agroup__gui__dlg_html_ga4bb08d7fcc8d6dc6524a6a9d153c5820"><div class="ttname"><a href="group__gui__dlg.html#ga4bb08d7fcc8d6dc6524a6a9d153c5820">dlg_compose</a></div><div class="ttdeci">int dlg_compose(struct Email *e, struct Buffer *fcc, uint8_t flags, struct ConfigSubset *sub)</div><div class="ttdoc">Allow the user to edit the message envelope -.</div><div class="ttdef"><b>Definition</b> <a href="dlg__compose_8c_source.html#l00403">dlg_compose.c:403</a></div></div>
<div class="ttc" id="agroup__logging__api_html_ga377d6ae04687e3cac3da87e05bc7de5d"><div class="ttname"><a href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a></div><div class="ttdeci">#define mutt_warning(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00092">logging2.h:92</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gae108f891125caafa9250cf0959c40c04"><div class="ttname"><a href="group__logging__api.html#gae108f891125caafa9250cf0959c40c04">mutt_message</a></div><div class="ttdeci">#define mutt_message(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00093">logging2.h:93</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gae6c5fd73af3410b2d5e8099f8774c8da"><div class="ttname"><a href="group__logging__api.html#gae6c5fd73af3410b2d5e8099f8774c8da">mutt_debug</a></div><div class="ttdeci">#define mutt_debug(LEVEL,...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00091">logging2.h:91</a></div></div>
<div class="ttc" id="agroup__logging__api_html_gafaa521ab22db877ccf1b87e679e1b43e"><div class="ttname"><a href="group__logging__api.html#gafaa521ab22db877ccf1b87e679e1b43e">mutt_perror</a></div><div class="ttdeci">#define mutt_perror(...)</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00095">logging2.h:95</a></div></div>
<div class="ttc" id="ahooks_2exec_8c_html_a6d228c86f5a1900b27af0fde26991a63"><div class="ttname"><a href="hooks_2exec_8c.html#a6d228c86f5a1900b27af0fde26991a63">mutt_select_fcc</a></div><div class="ttdeci">void mutt_select_fcc(struct Buffer *path, struct Email *e)</div><div class="ttdoc">Select the FCC path for an email.</div><div class="ttdef"><b>Definition</b> <a href="hooks_2exec_8c_source.html#l00252">exec.c:252</a></div></div>
<div class="ttc" id="ahooks_2exec_8c_html_ab8440ad38319fcc7ba6280645e21e62f"><div class="ttname"><a href="hooks_2exec_8c.html#ab8440ad38319fcc7ba6280645e21e62f">exec_message_hook</a></div><div class="ttdeci">void exec_message_hook(struct Mailbox *m, struct Email *e, enum CommandId id)</div><div class="ttdoc">Perform a message hook.</div><div class="ttdef"><b>Definition</b> <a href="hooks_2exec_8c_source.html#l00135">exec.c:135</a></div></div>
<div class="ttc" id="alogging2_8h_html_aca1fd1d8935433e6ba2e3918214e07f9a678d278eb301551ba0b3e0dbcfcee630"><div class="ttname"><a href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9a678d278eb301551ba0b3e0dbcfcee630">LL_DEBUG5</a></div><div class="ttdeci">@ LL_DEBUG5</div><div class="ttdoc">Log at debug level 5.</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00049">logging2.h:49</a></div></div>
<div class="ttc" id="alogging2_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5"><div class="ttname"><a href="logging2_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ab2c99902c587a013b358149516cceeb5">LL_DEBUG1</a></div><div class="ttdeci">@ LL_DEBUG1</div><div class="ttdoc">Log at debug level 1.</div><div class="ttdef"><b>Definition</b> <a href="logging2_8h_source.html#l00045">logging2.h:45</a></div></div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79a877e24e62c85f20ff0e0f09ab983031e">TYPE_MULTIPART</a></div><div class="ttdeci">@ TYPE_MULTIPART</div><div class="ttdoc">Type: &#39;multipart/*&#39;.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00037">mime.h:37</a></div></div>
<div class="ttc" id="amime_8h_html_a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e"><div class="ttname"><a href="mime_8h.html#a3ccd048df649c335df5a7f82673bbc79ac5074066199e3f540550ca0b1a38978e">TYPE_APPLICATION</a></div><div class="ttdeci">@ TYPE_APPLICATION</div><div class="ttdoc">Type: &#39;application/*&#39;.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00033">mime.h:33</a></div></div>
<div class="ttc" id="amime_8h_html_a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073"><div class="ttname"><a href="mime_8h.html#a5f93dab7807282e699a6bc1b2d18a2d8a691faf938d6b4cec05ea5e03d9dee073">DISP_INLINE</a></div><div class="ttdeci">@ DISP_INLINE</div><div class="ttdoc">Content is inline.</div><div class="ttdef"><b>Definition</b> <a href="mime_8h_source.html#l00062">mime.h:62</a></div></div>
<div class="ttc" id="amultipart_8c_html_a294249634f22cab1bce592ca8602c5ec"><div class="ttname"><a href="multipart_8c.html#a294249634f22cab1bce592ca8602c5ec">mutt_remove_multipart</a></div><div class="ttdeci">struct Body * mutt_remove_multipart(struct Body *b)</div><div class="ttdoc">Extract the multipart body if it exists.</div><div class="ttdef"><b>Definition</b> <a href="multipart_8c_source.html#l00126">multipart.c:126</a></div></div>
<div class="ttc" id="amultipart_8c_html_a9700f763b34719d97a56b5f9b032d97a"><div class="ttname"><a href="multipart_8c.html#a9700f763b34719d97a56b5f9b032d97a">mutt_make_multipart</a></div><div class="ttdeci">struct Body * mutt_make_multipart(struct Body *b)</div><div class="ttdoc">Create a multipart email.</div><div class="ttdef"><b>Definition</b> <a href="multipart_8c_source.html#l00100">multipart.c:100</a></div></div>
<div class="ttc" id="amutt_2string_8c_html_a29db81d6f5a7dd216cbea75ecf8a5885"><div class="ttname"><a href="mutt_2string_8c.html#a29db81d6f5a7dd216cbea75ecf8a5885">mutt_istr_equal</a></div><div class="ttdeci">bool mutt_istr_equal(const char *a, const char *b)</div><div class="ttdoc">Compare two strings, ignoring case.</div><div class="ttdef"><b>Definition</b> <a href="mutt_2string_8c_source.html#l00674">string.c:674</a></div></div>
<div class="ttc" id="amutt_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b"><div class="ttname"><a href="mutt_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013af85858c2c1c662fe4c0407b31c75410b">MUTT_REPLIED</a></div><div class="ttdeci">@ MUTT_REPLIED</div><div class="ttdoc">Messages that have been replied to.</div><div class="ttdef"><b>Definition</b> <a href="mutt_8h_source.html#l00090">mutt.h:90</a></div></div>
<div class="ttc" id="amutt__attach_8c_html_a0b2292184984705d60be088b9dbbecfb"><div class="ttname"><a href="mutt__attach_8c.html#a0b2292184984705d60be088b9dbbecfb">mutt_edit_attachment</a></div><div class="ttdeci">bool mutt_edit_attachment(struct Body *b)</div><div class="ttdoc">Edit an attachment.</div><div class="ttdef"><b>Definition</b> <a href="mutt__attach_8c_source.html#l00261">mutt_attach.c:261</a></div></div>
<div class="ttc" id="amuttlib_8c_html_a6fbcbe533be7c4e05d99b0eb9cdb2581"><div class="ttname"><a href="muttlib_8c.html#a6fbcbe533be7c4e05d99b0eb9cdb2581">mutt_sleep</a></div><div class="ttdeci">void mutt_sleep(short s)</div><div class="ttdoc">Sleep for a while.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00786">muttlib.c:786</a></div></div>
<div class="ttc" id="amuttlib_8c_html_a795f96cfea0cbef439e21b16e4613c70"><div class="ttname"><a href="muttlib_8c.html#a795f96cfea0cbef439e21b16e4613c70">pretty_mailbox</a></div><div class="ttdeci">void pretty_mailbox(struct Buffer *buf)</div><div class="ttdoc">Shorten a mailbox path using &#39;~&#39; or &#39;=&#39;.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00427">muttlib.c:427</a></div></div>
<div class="ttc" id="amuttlib_8c_html_a8973b2e5185609bfc5e0ef136fcd3177"><div class="ttname"><a href="muttlib_8c.html#a8973b2e5185609bfc5e0ef136fcd3177">mutt_needs_mailcap</a></div><div class="ttdeci">bool mutt_needs_mailcap(struct Body *b)</div><div class="ttdoc">Does this type need a mailcap entry do display.</div><div class="ttdef"><b>Definition</b> <a href="muttlib_8c_source.html#l00367">muttlib.c:367</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a074f827472ad45f11ec1132cdfed2daf"><div class="ttname"><a href="ncrypt_2lib_8h.html#a074f827472ad45f11ec1132cdfed2daf">SEC_INLINE</a></div><div class="ttdeci">#define SEC_INLINE</div><div class="ttdoc">Email has an inline signature.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00093">lib.h:93</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a0b36be5c32ca90d8f2caef9ea9d627fc"><div class="ttname"><a href="ncrypt_2lib_8h.html#a0b36be5c32ca90d8f2caef9ea9d627fc">SEC_AUTOCRYPT</a></div><div class="ttdeci">#define SEC_AUTOCRYPT</div><div class="ttdoc">(Autocrypt) Message will be, or was Autocrypt encrypt+signed</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00095">lib.h:95</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_a95845954210adfc850d5602843f858d4"><div class="ttname"><a href="ncrypt_2lib_8h.html#a95845954210adfc850d5602843f858d4">SEC_NO_FLAGS</a></div><div class="ttdeci">#define SEC_NO_FLAGS</div><div class="ttdoc">No flags are set.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00085">lib.h:85</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_aacaa4abd4c0696e260b7a0f1d466360a"><div class="ttname"><a href="ncrypt_2lib_8h.html#aacaa4abd4c0696e260b7a0f1d466360a">SEC_ENCRYPT</a></div><div class="ttdeci">#define SEC_ENCRYPT</div><div class="ttdoc">Email is encrypted.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00086">lib.h:86</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_ae0ce4a742538f3ee3e1bfbf143c794fb"><div class="ttname"><a href="ncrypt_2lib_8h.html#ae0ce4a742538f3ee3e1bfbf143c794fb">SEC_AUTOCRYPT_OVERRIDE</a></div><div class="ttdeci">#define SEC_AUTOCRYPT_OVERRIDE</div><div class="ttdoc">(Autocrypt) Indicates manual set/unset of encryption</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00096">lib.h:96</a></div></div>
<div class="ttc" id="ancrypt_2lib_8h_html_ae12c003463c99d28f65f1d6b8b053b2c"><div class="ttname"><a href="ncrypt_2lib_8h.html#ae12c003463c99d28f65f1d6b8b053b2c">SEC_SIGN</a></div><div class="ttdeci">#define SEC_SIGN</div><div class="ttdoc">Email is signed.</div><div class="ttdef"><b>Definition</b> <a href="ncrypt_2lib_8h_source.html#l00087">lib.h:87</a></div></div>
<div class="ttc" id="anotmuch_2lib_8h_html_a76a97a39757a2e0441d23eab1ba5a221"><div class="ttname"><a href="notmuch_2lib_8h.html#a76a97a39757a2e0441d23eab1ba5a221">nm_record_message</a></div><div class="ttdeci">int nm_record_message(struct Mailbox *m, char *path, struct Email *e)</div><div class="ttdoc">Add a message to the Notmuch database.</div><div class="ttdef"><b>Definition</b> <a href="notmuch_8c_source.html#l01910">notmuch.c:1910</a></div></div>
<div class="ttc" id="aparameter_8c_html_a34454ee6af9d43eeabf80898dc7270b8"><div class="ttname"><a href="parameter_8c.html#a34454ee6af9d43eeabf80898dc7270b8">mutt_param_delete</a></div><div class="ttdeci">void mutt_param_delete(struct ParameterList *pl, const char *attribute)</div><div class="ttdoc">Delete a matching Parameter.</div><div class="ttdef"><b>Definition</b> <a href="parameter_8c_source.html#l00143">parameter.c:143</a></div></div>
<div class="ttc" id="aparameter_8c_html_a42249fc15b1e52df046a0a10de29da44"><div class="ttname"><a href="parameter_8c.html#a42249fc15b1e52df046a0a10de29da44">mutt_param_set</a></div><div class="ttdeci">void mutt_param_set(struct ParameterList *pl, const char *attribute, const char *value)</div><div class="ttdoc">Set a Parameter.</div><div class="ttdef"><b>Definition</b> <a href="parameter_8c_source.html#l00111">parameter.c:111</a></div></div>
<div class="ttc" id="apostpone_2lib_8h_html_a42853d2d4da10271644dc7083ae1c453"><div class="ttname"><a href="postpone_2lib_8h.html#a42853d2d4da10271644dc7083ae1c453">mutt_num_postponed</a></div><div class="ttdeci">int mutt_num_postponed(struct Mailbox *m, bool force)</div><div class="ttdoc">Return the number of postponed messages.</div><div class="ttdef"><b>Definition</b> <a href="postpone_8c_source.html#l00067">postpone.c:67</a></div></div>
<div class="ttc" id="apostpone_2lib_8h_html_aacde94d20e952e822eac92e0fbf74682"><div class="ttname"><a href="postpone_2lib_8h.html#aacde94d20e952e822eac92e0fbf74682">mutt_get_postponed</a></div><div class="ttdeci">int mutt_get_postponed(struct Mailbox *m_cur, struct Email *hdr, struct Email **cur, struct Buffer *fcc)</div><div class="ttdoc">Recall a postponed message.</div><div class="ttdef"><b>Definition</b> <a href="postpone_8c_source.html#l00658">postpone.c:658</a></div></div>
<div class="ttc" id="aquad_8h_html_a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b"><div class="ttname"><a href="quad_8h.html#a738f558a271fe5035e0ee3b700ee35dbabe3800cc419f25384aaf1892fc3c812b">MUTT_NO</a></div><div class="ttdeci">@ MUTT_NO</div><div class="ttdoc">User answered &#39;No&#39;, or assume &#39;No&#39;.</div><div class="ttdef"><b>Definition</b> <a href="quad_8h_source.html#l00038">quad.h:38</a></div></div>
<div class="ttc" id="aquestion_2lib_8h_html_ae359ab94312d9ae6bcad5ab5b52bd529"><div class="ttname"><a href="question_2lib_8h.html#ae359ab94312d9ae6bcad5ab5b52bd529">query_yesorno</a></div><div class="ttdeci">enum QuadOption query_yesorno(const char *prompt, enum QuadOption def)</div><div class="ttdoc">Ask the user a Yes/No question.</div><div class="ttdef"><b>Definition</b> <a href="question_8c_source.html#l00326">question.c:326</a></div></div>
<div class="ttc" id="arfc3676_8c_html_ae80c6b55541960f57f67f4ea3e4467e8"><div class="ttname"><a href="rfc3676_8c.html#ae80c6b55541960f57f67f4ea3e4467e8">mutt_rfc3676_space_stuff</a></div><div class="ttdeci">void mutt_rfc3676_space_stuff(struct Email *e)</div><div class="ttdoc">Perform RFC3676 space stuffing on an Email.</div><div class="ttdef"><b>Definition</b> <a href="rfc3676_8c_source.html#l00490">rfc3676.c:490</a></div></div>
<div class="ttc" id="asend_8c_html_a08794ff2edb022ef0c0f59086da9675f"><div class="ttname"><a href="send_8c.html#a08794ff2edb022ef0c0f59086da9675f">postpone_message</a></div><div class="ttdeci">static int postpone_message(struct Email *e_post, struct Email *e_cur, const char *fcc, SendFlags flags, struct ConfigSubset *sub)</div><div class="ttdoc">Save an Email for another day.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01860">send.c:1860</a></div></div>
<div class="ttc" id="asend_8c_html_a19cc8b134c97bc3752c778d8b4977e8c"><div class="ttname"><a href="send_8c.html#a19cc8b134c97bc3752c778d8b4977e8c">is_reply</a></div><div class="ttdeci">static bool is_reply(struct Email *reply, struct Email *orig)</div><div class="ttdoc">Is one email a reply to another?</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01601">send.c:1601</a></div></div>
<div class="ttc" id="asend_8c_html_a255efc8a4a366c3de07d48da23d03a32"><div class="ttname"><a href="send_8c.html#a255efc8a4a366c3de07d48da23d03a32">save_fcc</a></div><div class="ttdeci">static int save_fcc(struct Mailbox *m, struct Email *e, struct Buffer *fcc, struct Body *clear_content, char *pgpkeylist, SendFlags flags, char **finalpath, struct ConfigSubset *sub)</div><div class="ttdoc">Save an Email to a &#39;sent mail&#39; folder.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01665">send.c:1665</a></div></div>
<div class="ttc" id="asend_8c_html_a3816a6e89fb33a2c6d3d27e90fa024d0"><div class="ttname"><a href="send_8c.html#a3816a6e89fb33a2c6d3d27e90fa024d0">envelope_defaults</a></div><div class="ttdeci">static int envelope_defaults(struct Envelope *env, struct EmailArray *ea, SendFlags flags, struct ConfigSubset *sub)</div><div class="ttdoc">Fill in some defaults for a new email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01085">send.c:1085</a></div></div>
<div class="ttc" id="asend_8c_html_a527f182325365ed083dad7be735bab25"><div class="ttname"><a href="send_8c.html#a527f182325365ed083dad7be735bab25">mutt_fix_reply_recipients</a></div><div class="ttdeci">void mutt_fix_reply_recipients(struct Envelope *env, struct ConfigSubset *sub)</div><div class="ttdoc">Remove duplicate recipients.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00957">send.c:957</a></div></div>
<div class="ttc" id="asend_8c_html_a5f6595bb450dfd3e7f3b8b01e45396cd"><div class="ttname"><a href="send_8c.html#a5f6595bb450dfd3e7f3b8b01e45396cd">generate_body</a></div><div class="ttdeci">static int generate_body(FILE *fp_tmp, struct Email *e, SendFlags flags, struct Mailbox *m, struct EmailArray *ea, struct ConfigSubset *sub)</div><div class="ttdoc">Create a new email body.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01158">send.c:1158</a></div></div>
<div class="ttc" id="asend_8c_html_a83f702d9e8d2f453b99a29cc6afe57e1"><div class="ttname"><a href="send_8c.html#a83f702d9e8d2f453b99a29cc6afe57e1">mutt_make_greeting</a></div><div class="ttdeci">static void mutt_make_greeting(struct Email *e, FILE *fp_out, struct ConfigSubset *sub)</div><div class="ttdoc">Add greetings string.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00688">send.c:688</a></div></div>
<div class="ttc" id="asend_8c_html_a859ddbab5f9384328fd06bf9c18c02f2"><div class="ttname"><a href="send_8c.html#a859ddbab5f9384328fd06bf9c18c02f2">invoke_mta</a></div><div class="ttdeci">static int invoke_mta(struct Mailbox *m, struct Email *e, struct ConfigSubset *sub)</div><div class="ttdoc">Send an email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01429">send.c:1429</a></div></div>
<div class="ttc" id="asend_8c_html_a90907de4e46f3a56b2889b79a48c9011"><div class="ttname"><a href="send_8c.html#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a></div><div class="ttdeci">struct Address * mutt_default_from(struct ConfigSubset *sub)</div><div class="ttdoc">Get a default &#39;from&#39; Address.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01396">send.c:1396</a></div></div>
<div class="ttc" id="asend_8c_html_a93b53146e2fbfb6657f83297e722fdac"><div class="ttname"><a href="send_8c.html#a93b53146e2fbfb6657f83297e722fdac">process_user_recips</a></div><div class="ttdeci">static void process_user_recips(struct Envelope *env)</div><div class="ttdoc">Process the user headers.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00374">send.c:374</a></div></div>
<div class="ttc" id="asend_8c_html_a9bca5c9f44a7908485389d16dcf20f96"><div class="ttname"><a href="send_8c.html#a9bca5c9f44a7908485389d16dcf20f96">process_user_header</a></div><div class="ttdeci">static void process_user_header(struct Envelope *env)</div><div class="ttdoc">Process the user headers.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00402">send.c:402</a></div></div>
<div class="ttc" id="asend_8c_html_a9fb4ee964889bd118582f0938027a659"><div class="ttname"><a href="send_8c.html#a9fb4ee964889bd118582f0938027a659">edit_envelope</a></div><div class="ttdeci">static int edit_envelope(struct Envelope *en, SendFlags flags, struct ConfigSubset *sub)</div><div class="ttdoc">Edit Envelope fields.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00229">send.c:229</a></div></div>
<div class="ttc" id="asend_8c_html_aad5805f2620506ae4bc2d7f6474cb849"><div class="ttname"><a href="send_8c.html#aad5805f2620506ae4bc2d7f6474cb849">abort_for_missing_attachments</a></div><div class="ttdeci">static bool abort_for_missing_attachments(const struct Body *b, struct ConfigSubset *sub)</div><div class="ttdoc">Should we abort sending because of missing attachments?</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01985">send.c:1985</a></div></div>
<div class="ttc" id="asend_8c_html_ac5be3d670b1d7e5cddb605652e9aa859"><div class="ttname"><a href="send_8c.html#ac5be3d670b1d7e5cddb605652e9aa859">set_reverse_name</a></div><div class="ttdeci">static void set_reverse_name(struct AddressList *al, struct Envelope *env, struct ConfigSubset *sub)</div><div class="ttdoc">Try to set the &#39;from&#39; field from the recipients.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01343">send.c:1343</a></div></div>
<div class="ttc" id="asend_8c_html_ad5e73f6a253107a7f55ee7388fbbf92f"><div class="ttname"><a href="send_8c.html#ad5e73f6a253107a7f55ee7388fbbf92f">fix_end_of_file</a></div><div class="ttdeci">static void fix_end_of_file(const char *data)</div><div class="ttdoc">Ensure a file ends with a linefeed.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01527">send.c:1527</a></div></div>
<div class="ttc" id="asend_8c_html_adaad7f2e93eb41299f638d224d90f82b"><div class="ttname"><a href="send_8c.html#adaad7f2e93eb41299f638d224d90f82b">is_text_plain</a></div><div class="ttdeci">static bool is_text_plain(const struct Body *b)</div><div class="ttdoc">Is a Body a text/plain MIME part?</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01974">send.c:1974</a></div></div>
<div class="ttc" id="asend_8c_html_af1b54154700865964598299ed1cf9a6a"><div class="ttname"><a href="send_8c.html#af1b54154700865964598299ed1cf9a6a">decode_descriptions</a></div><div class="ttdeci">static void decode_descriptions(struct Body *b)</div><div class="ttdoc">RFC2047 decode them in case of an error.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l01510">send.c:1510</a></div></div>
<div class="ttc" id="asend_8c_html_afa5258518aabbe76c14e64e105515acf"><div class="ttname"><a href="send_8c.html#afa5258518aabbe76c14e64e105515acf">append_signature</a></div><div class="ttdeci">static void append_signature(FILE *fp, struct ConfigSubset *sub)</div><div class="ttdoc">Append a signature to an email.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l00100">send.c:100</a></div></div>
<div class="ttc" id="asend_8h_html_a0124ba8cc117eff717a4ddf672c22018"><div class="ttname"><a href="#a0124ba8cc117eff717a4ddf672c22018">SEND_POSTPONED_FCC</a></div><div class="ttdeci">#define SEND_POSTPONED_FCC</div><div class="ttdoc">Used by mutt_get_postponed() to signal that the Mutt-Fcc header field was present.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00050">send.h:50</a></div></div>
<div class="ttc" id="asend_8h_html_a05caaa1cac7622dce2a0e32d75619b48"><div class="ttname"><a href="#a05caaa1cac7622dce2a0e32d75619b48">SEND_BATCH</a></div><div class="ttdeci">#define SEND_BATCH</div><div class="ttdoc">Send email in batch mode (without user interaction)</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00047">send.h:47</a></div></div>
<div class="ttc" id="asend_8h_html_a160dd7bb90081f1d45201ef2ab6b46d3"><div class="ttname"><a href="#a160dd7bb90081f1d45201ef2ab6b46d3">SEND_NO_FREE_HEADER</a></div><div class="ttdeci">#define SEND_NO_FREE_HEADER</div><div class="ttdoc">Used by the -E flag.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00051">send.h:51</a></div></div>
<div class="ttc" id="asend_8h_html_a21bc6948879d93793ca7afac2c7964bb"><div class="ttname"><a href="#a21bc6948879d93793ca7afac2c7964bb">SEND_DRAFT_FILE</a></div><div class="ttdeci">#define SEND_DRAFT_FILE</div><div class="ttdoc">Used by the -H flag.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00052">send.h:52</a></div></div>
<div class="ttc" id="asend_8h_html_a623f46e1bab1e562893dbd01bbbd92dd"><div class="ttname"><a href="#a623f46e1bab1e562893dbd01bbbd92dd">SEND_KEY</a></div><div class="ttdeci">#define SEND_KEY</div><div class="ttdoc">Mail a PGP public key.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00048">send.h:48</a></div></div>
<div class="ttc" id="asend_8h_html_a819cb72f23fd5b12401baf2963bc694f"><div class="ttname"><a href="#a819cb72f23fd5b12401baf2963bc694f">SEND_POSTPONED</a></div><div class="ttdeci">#define SEND_POSTPONED</div><div class="ttdoc">Recall a postponed email.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00046">send.h:46</a></div></div>
<div class="ttc" id="asend_8h_html_a942f852d37ce6e458cda7f187b922b67"><div class="ttname"><a href="#a942f852d37ce6e458cda7f187b922b67">SEND_CONSUMED_STDIN</a></div><div class="ttdeci">#define SEND_CONSUMED_STDIN</div><div class="ttdoc">stdin has been read; don&#39;t read it twice</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00057">send.h:57</a></div></div>
<div class="ttc" id="asend_8h_html_ab52a058ff3342266b80a3890e2b277a4"><div class="ttname"><a href="#ab52a058ff3342266b80a3890e2b277a4">SEND_CLI_CRYPTO</a></div><div class="ttdeci">#define SEND_CLI_CRYPTO</div><div class="ttdoc">Enable message security in modes that by default don&#39;t enable it.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00058">send.h:58</a></div></div>
<div class="ttc" id="asend_8h_html_ac23e1891bcbc52cc25b5824acfb42d3c"><div class="ttname"><a href="#ac23e1891bcbc52cc25b5824acfb42d3c">SEND_REPLY</a></div><div class="ttdeci">#define SEND_REPLY</div><div class="ttdoc">Reply to sender.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00042">send.h:42</a></div></div>
<div class="ttc" id="asend_8h_html_ae31498a0e61355a0b4ece8f0c89daf49"><div class="ttname"><a href="#ae31498a0e61355a0b4ece8f0c89daf49">SEND_NEWS</a></div><div class="ttdeci">#define SEND_NEWS</div><div class="ttdoc">Reply to a news article.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00055">send.h:55</a></div></div>
<div class="ttc" id="asend_8h_html_af72e00ab3817e49360034f4d9593bb62"><div class="ttname"><a href="#af72e00ab3817e49360034f4d9593bb62">SEND_FORWARD</a></div><div class="ttdeci">#define SEND_FORWARD</div><div class="ttdoc">Forward email.</div><div class="ttdef"><b>Definition</b> <a href="send_8h_source.html#l00045">send.h:45</a></div></div>
<div class="ttc" id="asendlib_8c_html_a3360a74ad39f0bb8e7ae4f84cc52f3be"><div class="ttname"><a href="sendlib_8c.html#a3360a74ad39f0bb8e7ae4f84cc52f3be">mutt_update_encoding</a></div><div class="ttdeci">void mutt_update_encoding(struct Body *b, struct ConfigSubset *sub)</div><div class="ttdoc">Update the encoding type.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00421">sendlib.c:421</a></div></div>
<div class="ttc" id="asendlib_8c_html_a99b5cff5076c9e25bce367f0bae45f4c"><div class="ttname"><a href="sendlib_8c.html#a99b5cff5076c9e25bce367f0bae45f4c">mutt_unprepare_envelope</a></div><div class="ttdeci">void mutt_unprepare_envelope(struct Envelope *env)</div><div class="ttdoc">Undo the encodings of mutt_prepare_envelope()</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00778">sendlib.c:778</a></div></div>
<div class="ttc" id="asendlib_8c_html_ac35da3d19eb0d95d4f6260adab57b4c9"><div class="ttname"><a href="sendlib_8c.html#ac35da3d19eb0d95d4f6260adab57b4c9">mutt_prepare_envelope</a></div><div class="ttdeci">void mutt_prepare_envelope(struct Envelope *env, bool final, struct ConfigSubset *sub)</div><div class="ttdoc">Prepare an email header.</div><div class="ttdef"><b>Definition</b> <a href="sendlib_8c_source.html#l00739">sendlib.c:739</a></div></div>
<div class="ttc" id="astructAddress_html_a01b32bc3153d06f852064f1cca3feb61"><div class="ttname"><a href="structAddress.html#a01b32bc3153d06f852064f1cca3feb61">Address::personal</a></div><div class="ttdeci">struct Buffer * personal</div><div class="ttdoc">Real name of address.</div><div class="ttdef"><b>Definition</b> <a href="address_8h_source.html#l00036">address.h:36</a></div></div>
<div class="ttc" id="astructBody_html_a0b87b7bdb6faef44d9aac4854975f805"><div class="ttname"><a href="structBody.html#a0b87b7bdb6faef44d9aac4854975f805">Body::parts</a></div><div class="ttdeci">struct Body * parts</div><div class="ttdoc">parts of a multipart or message/rfc822</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00073">body.h:73</a></div></div>
<div class="ttc" id="astructBody_html_a47191eabf16d34d0deb412c898ed629b"><div class="ttname"><a href="structBody.html#a47191eabf16d34d0deb412c898ed629b">Body::unlink</a></div><div class="ttdeci">bool unlink</div><div class="ttdoc">If true, filename should be unlink()ed before free()ing this structure.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00068">body.h:68</a></div></div>
<div class="ttc" id="astructBody_html_a62f6c9b4245ed3b6b9296adb45aa4010"><div class="ttname"><a href="structBody.html#a62f6c9b4245ed3b6b9296adb45aa4010">Body::mime_headers</a></div><div class="ttdeci">struct Envelope * mime_headers</div><div class="ttdoc">Memory hole protected headers.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00076">body.h:76</a></div></div>
<div class="ttc" id="astructBody_html_a782cee95e0064e3895b88248bdfc781a"><div class="ttname"><a href="structBody.html#a782cee95e0064e3895b88248bdfc781a">Body::parameter</a></div><div class="ttdeci">struct ParameterList parameter</div><div class="ttdoc">Parameters of the content-type.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00063">body.h:63</a></div></div>
<div class="ttc" id="astructBody_html_a86721d1d557276cbc9cf69777af8c305"><div class="ttname"><a href="structBody.html#a86721d1d557276cbc9cf69777af8c305">Body::use_disp</a></div><div class="ttdeci">bool use_disp</div><div class="ttdoc">Content-Disposition uses filename= ?</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00047">body.h:47</a></div></div>
<div class="ttc" id="astructBody_html_a99aff302b287a47c407a7412a99630f5"><div class="ttname"><a href="structBody.html#a99aff302b287a47c407a7412a99630f5">Body::disposition</a></div><div class="ttdeci">unsigned int disposition</div><div class="ttdoc">content-disposition, ContentDisposition</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00042">body.h:42</a></div></div>
<div class="ttc" id="astructBody_html_ace00f9cba9b46a2d434764335d2fa43a"><div class="ttname"><a href="structBody.html#ace00f9cba9b46a2d434764335d2fa43a">Body::subtype</a></div><div class="ttdeci">char * subtype</div><div class="ttdoc">content-type subtype</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00061">body.h:61</a></div></div>
<div class="ttc" id="astructBody_html_af77d79aadb278bef8f2829c268f2486f"><div class="ttname"><a href="structBody.html#af77d79aadb278bef8f2829c268f2486f">Body::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdoc">content-type primary type, ContentType</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00040">body.h:40</a></div></div>
<div class="ttc" id="astructBody_html_afe3cd2c4b1070e3d0edbf1fed939ac5a"><div class="ttname"><a href="structBody.html#afe3cd2c4b1070e3d0edbf1fed939ac5a">Body::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdoc">When sending a message, this is the file to which this structure refers.</div><div class="ttdef"><b>Definition</b> <a href="email_2body_8h_source.html#l00059">body.h:59</a></div></div>
<div class="ttc" id="astructEmail_html_a34cc4493729d7a3b1f4ed783e739a9ec"><div class="ttname"><a href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">Email::env</a></div><div class="ttdeci">struct Envelope * env</div><div class="ttdoc">Envelope information.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00068">email.h:68</a></div></div>
<div class="ttc" id="astructEmail_html_a57ad6ac618c0f685804f6f5bb390b3a6"><div class="ttname"><a href="structEmail.html#a57ad6ac618c0f685804f6f5bb390b3a6">Email::body</a></div><div class="ttdeci">struct Body * body</div><div class="ttdoc">List of MIME parts.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00069">email.h:69</a></div></div>
<div class="ttc" id="astructEmail_html_aa26dd591f92e548bc3c56d0b7fdb3e8c"><div class="ttname"><a href="structEmail.html#aa26dd591f92e548bc3c56d0b7fdb3e8c">Email::replied</a></div><div class="ttdeci">bool replied</div><div class="ttdoc">Email has been replied to.</div><div class="ttdef"><b>Definition</b> <a href="email_8h_source.html#l00051">email.h:51</a></div></div>
<div class="ttc" id="astructEnvelope_html_a50418c13a849bf27b22922bd5867e5e1"><div class="ttname"><a href="structEnvelope.html#a50418c13a849bf27b22922bd5867e5e1">Envelope::message_id</a></div><div class="ttdeci">char * message_id</div><div class="ttdoc">Message ID.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00073">envelope.h:73</a></div></div>
<div class="ttc" id="astructEnvelope_html_a525bd5213606067d5c2be2e17fbe956b"><div class="ttname"><a href="structEnvelope.html#a525bd5213606067d5c2be2e17fbe956b">Envelope::x_original_to</a></div><div class="ttdeci">struct AddressList x_original_to</div><div class="ttdoc">Email&#39;s &#39;X-Original-to&#39;.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00066">envelope.h:66</a></div></div>
<div class="ttc" id="astructEnvelope_html_a5f680f60f1713477a879877dcbd21a5c"><div class="ttname"><a href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">Envelope::newsgroups</a></div><div class="ttdeci">char * newsgroups</div><div class="ttdoc">List of newsgroups.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00078">envelope.h:78</a></div></div>
<div class="ttc" id="astructEnvelope_html_aad427832f4ae422f1b16d0896c1d3af6"><div class="ttname"><a href="structEnvelope.html#aad427832f4ae422f1b16d0896c1d3af6">Envelope::bcc</a></div><div class="ttdeci">struct AddressList bcc</div><div class="ttdoc">Email&#39;s &#39;Bcc&#39; list.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00062">envelope.h:62</a></div></div>
<div class="ttc" id="astructEnvelope_html_ad0b7bb8cf358dd2d5d1dc5733b3f0be1"><div class="ttname"><a href="structEnvelope.html#ad0b7bb8cf358dd2d5d1dc5733b3f0be1">Envelope::list_post</a></div><div class="ttdeci">char * list_post</div><div class="ttdoc">This stores a mailto URL, or nothing.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00067">envelope.h:67</a></div></div>
<div class="ttc" id="astructMailbox_html_a5638329fb2ebd4bbe1f4a949ec8de174"><div class="ttname"><a href="structMailbox.html#a5638329fb2ebd4bbe1f4a949ec8de174">Mailbox::type</a></div><div class="ttdeci">enum MailboxType type</div><div class="ttdoc">Mailbox type.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00101">mailbox.h:101</a></div></div>
<div class="ttc" id="astructMailbox_html_a69b544c5c748ab3046dcc6e61a41f595"><div class="ttname"><a href="structMailbox.html#a69b544c5c748ab3046dcc6e61a41f595">Mailbox::mdata</a></div><div class="ttdeci">void * mdata</div><div class="ttdoc">Driver specific data.</div><div class="ttdef"><b>Definition</b> <a href="core_2mailbox_8h_source.html#l00131">mailbox.h:131</a></div></div>
<div class="ttc" id="astructNntpMboxData_html"><div class="ttname"><a href="structNntpMboxData.html">NntpMboxData</a></div><div class="ttdoc">NNTP-specific Mailbox data -.</div><div class="ttdef"><b>Definition</b> <a href="nntp_2mdata_8h_source.html#l00033">mdata.h:34</a></div></div>
<div class="ttc" id="asubset_8c_html_a8d7d5e60bd8f7f0f8ffd8522de126b12"><div class="ttname"><a href="subset_8c.html#a8d7d5e60bd8f7f0f8ffd8522de126b12">cs_subset_str_string_set</a></div><div class="ttdeci">int cs_subset_str_string_set(const struct ConfigSubset *sub, const char *name, const char *value, struct Buffer *err)</div><div class="ttdoc">Set a config item by string.</div><div class="ttdef"><b>Definition</b> <a href="subset_8c_source.html#l00392">subset.c:392</a></div></div>
<div class="ttc" id="atmp_8h_html_a271a7828888985955df49205d7846a45"><div class="ttname"><a href="tmp_8h.html#a271a7828888985955df49205d7846a45">buf_mktemp</a></div><div class="ttdeci">#define buf_mktemp(buf)</div><div class="ttdef"><b>Definition</b> <a href="tmp_8h_source.html#l00033">tmp.h:33</a></div></div>
</div><!-- fragment --><div id="dynsection-28" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_ad9c2899c7c3a76d2ce3b911221705a30_icgraph.svg" width="384" height="947"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="afa20b4cc93fe3d7cbc02675afeddcad4" name="afa20b4cc93fe3d7cbc02675afeddcad4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa20b4cc93fe3d7cbc02675afeddcad4">&#9670;&#160;</a></span>mutt_set_followup_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutt_set_followup_to </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structEnvelope.html">Envelope</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structConfigSubset.html">ConfigSubset</a> *</td>          <td class="paramname"><span class="paramname"><em>sub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set followup-to field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td><a class="el" href="structEnvelope.html" title="The header of an Email.">Envelope</a> to modify </td></tr>
    <tr><td class="paramname">sub</td><td>Config Subset </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l01272">1272</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1273</span>{</div>
<div class="line"><span class="lineno"> 1274</span>  <span class="comment">/* Only generate the Mail-Followup-To if the user has requested it, and</span></div>
<div class="line"><span class="lineno"> 1275</span><span class="comment">   * it hasn&#39;t already been set */</span></div>
<div class="line"><span class="lineno"> 1276</span> </div>
<div class="line"><span class="lineno"> 1277</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> c_followup_to = <a class="code hl_function" href="config_2helpers_8c.html#ae50f679dd6c5bd1ba820884c8602f038">cs_subset_bool</a>(sub, <span class="stringliteral">&quot;followup_to&quot;</span>);</div>
<div class="line"><span class="lineno"> 1278</span>  <span class="keywordflow">if</span> (!c_followup_to)</div>
<div class="line"><span class="lineno"> 1279</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1280</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="globals_8c.html#ae002039367e2c7cedb76674311136d1f">OptNewsSend</a>)</div>
<div class="line"><span class="lineno"> 1281</span>  {</div>
<div class="line"><span class="lineno"> 1282</span>    <span class="keywordflow">if</span> (!env-&gt;<a class="code hl_variable" href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">followup_to</a> &amp;&amp; env-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a> &amp;&amp; (strrchr(env-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>, <span class="charliteral">&#39;,&#39;</span>)))</div>
<div class="line"><span class="lineno"> 1283</span>      env-&gt;<a class="code hl_variable" href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">followup_to</a> = <a class="code hl_function" href="mutt_2string_8c.html#a3fe33d90e4814281cd57de048119c950">mutt_str_dup</a>(env-&gt;<a class="code hl_variable" href="structEnvelope.html#a5f680f60f1713477a879877dcbd21a5c">newsgroups</a>);</div>
<div class="line"><span class="lineno"> 1284</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1285</span>  }</div>
<div class="line"><span class="lineno"> 1286</span> </div>
<div class="line"><span class="lineno"> 1287</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>))</div>
<div class="line"><span class="lineno"> 1288</span>  {</div>
<div class="line"><span class="lineno"> 1289</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="pattern_2exec_8c.html#aca4f25244d007a70ef8d0650f8b77b86">mutt_is_list_recipient</a>(<span class="keyword">false</span>, env))</div>
<div class="line"><span class="lineno"> 1290</span>    {</div>
<div class="line"><span class="lineno"> 1291</span>      <span class="comment">/* this message goes to known mailing lists, so create a proper</span></div>
<div class="line"><span class="lineno"> 1292</span><span class="comment">       * mail-followup-to header */</span></div>
<div class="line"><span class="lineno"> 1293</span> </div>
<div class="line"><span class="lineno"> 1294</span>      <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a2d927371b3b80e025d6f7522b7361fe7">to</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1295</span>      <a class="code hl_function" href="address_2address_8c.html#a16764dc80c9b3f6ad2897c8b7e59bd10">mutt_addrlist_copy</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>, &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6b00837b3cb4b41898b42307135be8b6">cc</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1296</span>    }</div>
<div class="line"><span class="lineno"> 1297</span> </div>
<div class="line"><span class="lineno"> 1298</span>    <span class="comment">/* remove ourselves from the mail-followup-to header */</span></div>
<div class="line"><span class="lineno"> 1299</span>    <a class="code hl_function" href="send_8c.html#a6671477ec99e59665fcbac17986d6e93">remove_user</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1300</span> </div>
<div class="line"><span class="lineno"> 1301</span>    <span class="comment">/* If we are not subscribed to any of the lists in question, re-add</span></div>
<div class="line"><span class="lineno"> 1302</span><span class="comment">     * ourselves to the mail-followup-to header.  The mail-followup-to header</span></div>
<div class="line"><span class="lineno"> 1303</span><span class="comment">     * generated is a no-op with group-reply, but makes sure list-reply has the</span></div>
<div class="line"><span class="lineno"> 1304</span><span class="comment">     * desired effect.  */</span></div>
<div class="line"><span class="lineno"> 1305</span> </div>
<div class="line"><span class="lineno"> 1306</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1307</span>        !<a class="code hl_function" href="pattern_2exec_8c.html#a94da23f412141f03a53ef13461c3e40a">mutt_is_subscribed_list_recipient</a>(<span class="keyword">false</span>, env))</div>
<div class="line"><span class="lineno"> 1308</span>    {</div>
<div class="line"><span class="lineno"> 1309</span>      <span class="keyword">struct </span>AddressList *al = NULL;</div>
<div class="line"><span class="lineno"> 1310</span>      <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">reply_to</a>))</div>
<div class="line"><span class="lineno"> 1311</span>        al = &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">reply_to</a>;</div>
<div class="line"><span class="lineno"> 1312</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_define" href="queue_8h.html#ac3c9da7ac712eacbbad5cc54d7a3477e">TAILQ_EMPTY</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>))</div>
<div class="line"><span class="lineno"> 1313</span>        al = &amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#af1aa00aed4b8767cf98f08e45a432ad8">from</a>;</div>
<div class="line"><span class="lineno"> 1314</span> </div>
<div class="line"><span class="lineno"> 1315</span>      <span class="keywordflow">if</span> (al)</div>
<div class="line"><span class="lineno"> 1316</span>      {</div>
<div class="line"><span class="lineno"> 1317</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structAddress.html">Address</a> *a = NULL;</div>
<div class="line"><span class="lineno"> 1318</span>        <a class="code hl_define" href="queue_8h.html#aa7f65c910cd4616fcfa9723c5763b1a5">TAILQ_FOREACH_REVERSE</a>(a, al, AddressList, entries)</div>
<div class="line"><span class="lineno"> 1319</span>        {</div>
<div class="line"><span class="lineno"> 1320</span>          <a class="code hl_function" href="address_2address_8c.html#aa68a29c1feb5938596aa589cf2d6a1af">mutt_addrlist_prepend</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>, <a class="code hl_function" href="address_2address_8c.html#a8f8e4be1b71a169870ac10be5426af8d">mutt_addr_copy</a>(a));</div>
<div class="line"><span class="lineno"> 1321</span>        }</div>
<div class="line"><span class="lineno"> 1322</span>      }</div>
<div class="line"><span class="lineno"> 1323</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1324</span>      {</div>
<div class="line"><span class="lineno"> 1325</span>        <a class="code hl_function" href="address_2address_8c.html#aa68a29c1feb5938596aa589cf2d6a1af">mutt_addrlist_prepend</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>, <a class="code hl_function" href="send_8c.html#a90907de4e46f3a56b2889b79a48c9011">mutt_default_from</a>(sub));</div>
<div class="line"><span class="lineno"> 1326</span>      }</div>
<div class="line"><span class="lineno"> 1327</span>    }</div>
<div class="line"><span class="lineno"> 1328</span> </div>
<div class="line"><span class="lineno"> 1329</span>    <a class="code hl_function" href="address_2address_8c.html#aee5d40d84136d3a7adba727e2908ad66">mutt_addrlist_dedupe</a>(&amp;env-&gt;<a class="code hl_variable" href="structEnvelope.html#a6044b60220b8029a6a505e5b61f1cadc">mail_followup_to</a>);</div>
<div class="line"><span class="lineno"> 1330</span>  }</div>
<div class="line"><span class="lineno"> 1331</span>}</div>
<div class="ttc" id="aaddress_2address_8c_html_aa68a29c1feb5938596aa589cf2d6a1af"><div class="ttname"><a href="address_2address_8c.html#aa68a29c1feb5938596aa589cf2d6a1af">mutt_addrlist_prepend</a></div><div class="ttdeci">void mutt_addrlist_prepend(struct AddressList *al, struct Address *a)</div><div class="ttdoc">Prepend an Address to an AddressList.</div><div class="ttdef"><b>Definition</b> <a href="address_2address_8c_source.html#l01491">address.c:1491</a></div></div>
<div class="ttc" id="apattern_2exec_8c_html_a94da23f412141f03a53ef13461c3e40a"><div class="ttname"><a href="pattern_2exec_8c.html#a94da23f412141f03a53ef13461c3e40a">mutt_is_subscribed_list_recipient</a></div><div class="ttdeci">bool mutt_is_subscribed_list_recipient(bool all_addr, struct Envelope *env)</div><div class="ttdoc">Matches subscribed mailing lists.</div><div class="ttdef"><b>Definition</b> <a href="pattern_2exec_8c_source.html#l00494">exec.c:494</a></div></div>
<div class="ttc" id="apattern_2exec_8c_html_aca4f25244d007a70ef8d0650f8b77b86"><div class="ttname"><a href="pattern_2exec_8c.html#aca4f25244d007a70ef8d0650f8b77b86">mutt_is_list_recipient</a></div><div class="ttdeci">bool mutt_is_list_recipient(bool all_addr, struct Envelope *env)</div><div class="ttdoc">Matches known mailing lists.</div><div class="ttdef"><b>Definition</b> <a href="pattern_2exec_8c_source.html#l00507">exec.c:507</a></div></div>
<div class="ttc" id="aqueue_8h_html_aa7f65c910cd4616fcfa9723c5763b1a5"><div class="ttname"><a href="queue_8h.html#aa7f65c910cd4616fcfa9723c5763b1a5">TAILQ_FOREACH_REVERSE</a></div><div class="ttdeci">#define TAILQ_FOREACH_REVERSE(var, head, headname, field)</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00802">queue.h:802</a></div></div>
<div class="ttc" id="astructEnvelope_html_a46a9e33786aa5394ad768cbcc2357d65"><div class="ttname"><a href="structEnvelope.html#a46a9e33786aa5394ad768cbcc2357d65">Envelope::followup_to</a></div><div class="ttdeci">char * followup_to</div><div class="ttdoc">List of &#39;followup-to&#39; fields.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00080">envelope.h:80</a></div></div>
<div class="ttc" id="astructEnvelope_html_a4b75ab1853f95878dec079371bb0d799"><div class="ttname"><a href="structEnvelope.html#a4b75ab1853f95878dec079371bb0d799">Envelope::reply_to</a></div><div class="ttdeci">struct AddressList reply_to</div><div class="ttdoc">Email&#39;s &#39;reply-to&#39;.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00064">envelope.h:64</a></div></div>
</div><!-- fragment --><div id="dynsection-29" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_afa20b4cc93fe3d7cbc02675afeddcad4_cgraph.svg" width="546" height="516"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-30" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_afa20b4cc93fe3d7cbc02675afeddcad4_icgraph.svg" width="384" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aeb49acb8f5aeb91227ad946786970111" name="aeb49acb8f5aeb91227ad946786970111"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb49acb8f5aeb91227ad946786970111">&#9670;&#160;</a></span>mutt_send_list_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_send_list_subscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a mailing-list subscription email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> carrying mailing-list subscription headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success </td></tr>
    <tr><td class="paramname">false</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l02955">2955</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2956</span>{</div>
<div class="line"><span class="lineno"> 2957</span>  <span class="keywordflow">if</span> (!e || !e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>)</div>
<div class="line"><span class="lineno"> 2958</span>  {</div>
<div class="line"><span class="lineno"> 2959</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2960</span>  }</div>
<div class="line"><span class="lineno"> 2961</span> </div>
<div class="line"><span class="lineno"> 2962</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *mailto = e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#a18ca6295a8894d93fe3b44275b62e415">list_subscribe</a>;</div>
<div class="line"><span class="lineno"> 2963</span>  <span class="keywordflow">if</span> (!mailto)</div>
<div class="line"><span class="lineno"> 2964</span>  {</div>
<div class="line"><span class="lineno"> 2965</span>    <a class="code hl_define" href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No List-Subscribe header found&quot;</span>));</div>
<div class="line"><span class="lineno"> 2966</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2967</span>  }</div>
<div class="line"><span class="lineno"> 2968</span> </div>
<div class="line"><span class="lineno"> 2969</span>  <span class="keyword">struct </span>EmailArray ea = <a class="code hl_define" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div>
<div class="line"><span class="lineno"> 2970</span>  <a class="code hl_define" href="array_8h.html#a4f570f2382025383e4b2cc46ede6ebd0">ARRAY_ADD</a>(&amp;ea, e);</div>
<div class="line"><span class="lineno"> 2971</span>  <span class="keywordtype">bool</span> rc = <a class="code hl_function" href="send_8c.html#aa9b94334fee20d86baa8355c9b8379b4">send_simple_email</a>(m, &amp;ea, mailto, <span class="stringliteral">&quot;Subscribe&quot;</span>, <span class="stringliteral">&quot;subscribe&quot;</span>);</div>
<div class="line"><span class="lineno"> 2972</span>  <a class="code hl_define" href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a>(&amp;ea);</div>
<div class="line"><span class="lineno"> 2973</span> </div>
<div class="line"><span class="lineno"> 2974</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 2975</span>}</div>
<div class="ttc" id="asend_8c_html_aa9b94334fee20d86baa8355c9b8379b4"><div class="ttname"><a href="send_8c.html#aa9b94334fee20d86baa8355c9b8379b4">send_simple_email</a></div><div class="ttdeci">static bool send_simple_email(struct Mailbox *m, struct EmailArray *ea, const char *mailto, const char *subj, const char *body)</div><div class="ttdoc">Compose an email given a few basic ingredients.</div><div class="ttdef"><b>Definition</b> <a href="send_8c_source.html#l02904">send.c:2904</a></div></div>
<div class="ttc" id="astructEnvelope_html_a18ca6295a8894d93fe3b44275b62e415"><div class="ttname"><a href="structEnvelope.html#a18ca6295a8894d93fe3b44275b62e415">Envelope::list_subscribe</a></div><div class="ttdeci">char * list_subscribe</div><div class="ttdoc">This stores a mailto URL, or nothing.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00068">envelope.h:68</a></div></div>
</div><!-- fragment --><div id="dynsection-31" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_aeb49acb8f5aeb91227ad946786970111_cgraph.svg" width="371" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-32" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_aeb49acb8f5aeb91227ad946786970111_icgraph.svg" width="360" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9567485020b1fd8c30be9b06382cc7d9" name="a9567485020b1fd8c30be9b06382cc7d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9567485020b1fd8c30be9b06382cc7d9">&#9670;&#160;</a></span>mutt_send_list_unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutt_send_list_unsubscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMailbox.html">Mailbox</a> *</td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structEmail.html">Email</a> *</td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a mailing-list unsubscription email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td><a class="el" href="structMailbox.html" title="A mailbox.">Mailbox</a> </td></tr>
    <tr><td class="paramname">e</td><td><a class="el" href="structEmail.html" title="The envelope/body of an email.">Email</a> carrying mailing-list unsubscription headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success </td></tr>
    <tr><td class="paramname">false</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="send_8c_source.html#l02984">2984</a> of file <a class="el" href="send_8c_source.html">send.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2985</span>{</div>
<div class="line"><span class="lineno"> 2986</span>  <span class="keywordflow">if</span> (!e || !e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>)</div>
<div class="line"><span class="lineno"> 2987</span>  {</div>
<div class="line"><span class="lineno"> 2988</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2989</span>  }</div>
<div class="line"><span class="lineno"> 2990</span> </div>
<div class="line"><span class="lineno"> 2991</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *mailto = e-&gt;<a class="code hl_variable" href="structEmail.html#a34cc4493729d7a3b1f4ed783e739a9ec">env</a>-&gt;<a class="code hl_variable" href="structEnvelope.html#aebaaff2a6132162b227659bba4260574">list_unsubscribe</a>;</div>
<div class="line"><span class="lineno"> 2992</span>  <span class="keywordflow">if</span> (!mailto)</div>
<div class="line"><span class="lineno"> 2993</span>  {</div>
<div class="line"><span class="lineno"> 2994</span>    <a class="code hl_define" href="group__logging__api.html#ga377d6ae04687e3cac3da87e05bc7de5d">mutt_warning</a>(<a class="code hl_define" href="mutt_2message_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No List-Unsubscribe header found&quot;</span>));</div>
<div class="line"><span class="lineno"> 2995</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2996</span>  }</div>
<div class="line"><span class="lineno"> 2997</span> </div>
<div class="line"><span class="lineno"> 2998</span>  <span class="keyword">struct </span>EmailArray ea = <a class="code hl_define" href="array_8h.html#af50a4967d27a0531a1b10a23fc22fe05">ARRAY_HEAD_INITIALIZER</a>;</div>
<div class="line"><span class="lineno"> 2999</span>  <a class="code hl_define" href="array_8h.html#a4f570f2382025383e4b2cc46ede6ebd0">ARRAY_ADD</a>(&amp;ea, e);</div>
<div class="line"><span class="lineno"> 3000</span>  <span class="keywordtype">bool</span> rc = <a class="code hl_function" href="send_8c.html#aa9b94334fee20d86baa8355c9b8379b4">send_simple_email</a>(m, &amp;ea, mailto, <span class="stringliteral">&quot;Unsubscribe&quot;</span>, <span class="stringliteral">&quot;unsubscribe&quot;</span>);</div>
<div class="line"><span class="lineno"> 3001</span>  <a class="code hl_define" href="array_8h.html#aaa8805bd90a2015d8f5eb0fe3bb13b3f">ARRAY_FREE</a>(&amp;ea);</div>
<div class="line"><span class="lineno"> 3002</span> </div>
<div class="line"><span class="lineno"> 3003</span>  <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno"> 3004</span>}</div>
<div class="ttc" id="astructEnvelope_html_aebaaff2a6132162b227659bba4260574"><div class="ttname"><a href="structEnvelope.html#aebaaff2a6132162b227659bba4260574">Envelope::list_unsubscribe</a></div><div class="ttdeci">char * list_unsubscribe</div><div class="ttdoc">This stores a mailto URL, or nothing.</div><div class="ttdef"><b>Definition</b> <a href="envelope_8h_source.html#l00069">envelope.h:69</a></div></div>
</div><!-- fragment --><div id="dynsection-33" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a9567485020b1fd8c30be9b06382cc7d9_cgraph.svg" width="387" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-34" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="send_8h_a9567485020b1fd8c30be9b06382cc7d9_icgraph.svg" width="392" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
